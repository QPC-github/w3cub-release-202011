
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Openssl_csr – Generate OpenSSL Certificate Signing Request (CSR) - Ansible 2.9 - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.4. ">
  <meta name="keywords" content="openssl, csr, –, generate, certificate, signing, request, ansible, ansible~2.9">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.9/modules/openssl_csr_module.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/ansible~2.9.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.9/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.9</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="openssl-csr-module">openssl_csr – Generate OpenSSL Certificate Signing Request (CSR)</h1> <div class="versionadded" id="openssl-csr-generate-openssl-certificate-signing-request-csr"> <p><span class="versionmodified">New in version 2.4.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#see-also" id="id5">See Also</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li> <li><a class="reference internal" href="#status" id="id8">Status</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module allows one to (re)generate OpenSSL certificate signing requests.</li> <li>It uses the pyOpenSSL python library to interact with openssl. This module supports the subjectAltName, keyUsage, extendedKeyUsage, basicConstraints and OCSP Must Staple extensions.</li> <li>Please note that the module regenerates existing CSR if it doesn’t match the module’s options, or if it seems to be corrupt. If you are concerned that this could overwrite your existing CSR, consider using the <em>backup</em> option.</li> <li>The module can use the cryptography Python library, or the pyOpenSSL Python library. By default, it tries to detect which one is available. This can be overridden with the <em>select_crypto_backend</em> option. Please note that the PyOpenSSL backend was deprecated in Ansible 2.9 and will be removed in Ansible 2.13.”</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>Either cryptography &gt;= 1.3</li> <li>Or pyOpenSSL &gt;= 0.15</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>attributes</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The attributes the resulting file or directory should have.</div> <div>To get supported flags look at the man page for <em>chattr</em> on the target system.</div> <div>This string should contain the attributes in the same order as the one displayed by <em>lsattr</em>.</div> <div>The <code>=</code> operator is assumed as default, otherwise <code>+</code> or <code>-</code> operators need to be included in the string.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: attr</div> </td> </tr> <tr> <td colspan="1">  <b>authority_cert_issuer</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.9</div> </td> <td> </td> <td> <div>Names that will be present in the authority cert issuer field of the certificate signing request.</div> <div>Values must be prefixed by their options. (i.e., <code>email</code>, <code>URI</code>, <code>DNS</code>, <code>RID</code>, <code>IP</code>, <code>dirName</code>, <code>otherName</code> and the ones specific to your CA)</div> <div>Example: <code>DNS:ca.example.org</code>
</div> <div>If specified, <em>authority_key_identifier</em> must also be specified.</div> <div>Please note that commercial CAs ignore this value, respectively use a value of their own choice. Specifying this option is mostly useful for self-signed certificates or for own CAs.</div> <div>Note that this is only supported if the <code>cryptography</code> backend is used!</div> <div>The <code>AuthorityKeyIdentifier</code> will only be added if at least one of <em>authority_key_identifier</em>, <em>authority_cert_issuer</em> and <em>authority_cert_serial_number</em> is specified.</div> </td> </tr> <tr> <td colspan="1">  <b>authority_cert_serial_number</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.9</div> </td> <td> </td> <td> <div>The authority cert serial number.</div> <div>Note that this is only supported if the <code>cryptography</code> backend is used!</div> <div>Please note that commercial CAs ignore this value, respectively use a value of their own choice. Specifying this option is mostly useful for self-signed certificates or for own CAs.</div> <div>The <code>AuthorityKeyIdentifier</code> will only be added if at least one of <em>authority_key_identifier</em>, <em>authority_cert_issuer</em> and <em>authority_cert_serial_number</em> is specified.</div> </td> </tr> <tr> <td colspan="1">  <b>authority_key_identifier</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.9</div> </td> <td> </td> <td> <div>The authority key identifier as a hex string, where two bytes are separated by colons.</div> <div>Example: <code>00:11:22:33:44:55:66:77:88:99:aa:bb:cc:dd:ee:ff:00:11:22:33</code>
</div> <div>If specified, <em>authority_cert_issuer</em> must also be specified.</div> <div>Please note that commercial CAs ignore this value, respectively use a value of their own choice. Specifying this option is mostly useful for self-signed certificates or for own CAs.</div> <div>Note that this is only supported if the <code>cryptography</code> backend is used!</div> <div>The <code>AuthorityKeyIdentifier</code> will only be added if at least one of <em>authority_key_identifier</em>, <em>authority_cert_issuer</em> and <em>authority_cert_serial_number</em> is specified.</div> </td> </tr> <tr> <td colspan="1">  <b>backup</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.8</div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Create a backup file including a timestamp so you can get the original CSR back if you overwrote it with a new one by accident.</div> </td> </tr> <tr> <td colspan="1">  <b>basic_constraints</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.5</div> </td> <td> </td> <td> <div>Indicates basic constraints, such as if the certificate is a CA.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: basicConstraints</div> </td> </tr> <tr> <td colspan="1">  <b>basic_constraints_critical</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.5</div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Should the basicConstraints extension be considered as critical.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: basicConstraints_critical</div> </td> </tr> <tr> <td colspan="1">  <b>common_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The commonName field of the certificate signing request subject.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: CN, commonName</div> </td> </tr> <tr> <td colspan="1">  <b>country_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The countryName field of the certificate signing request subject.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: C, countryName</div> </td> </tr> <tr> <td colspan="1">  <b>create_subject_key_identifier</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.9</div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Create the Subject Key Identifier from the public key.</div> <div>Please note that commercial CAs can ignore the value, respectively use a value of their own choice instead. Specifying this option is mostly useful for self-signed certificates or for own CAs.</div> <div>Note that this is only supported if the <code>cryptography</code> backend is used!</div> </td> </tr> <tr> <td colspan="1">  <b>digest</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <b>Default:</b><br><div style="color: blue">"sha256"</div> </td> <td> <div>The digest used when signing the certificate signing request with the private key.</div> </td> </tr> <tr> <td colspan="1">  <b>email_address</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The emailAddress field of the certificate signing request subject.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: E, emailAddress</div> </td> </tr> <tr> <td colspan="1">  <b>extended_key_usage</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td> </td> <td> <div>Additional restrictions (e.g. client authentication, server authentication) on the allowed purposes for which the public key may be used.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: extKeyUsage, extendedKeyUsage</div> </td> </tr> <tr> <td colspan="1">  <b>extended_key_usage_critical</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Should the extkeyUsage extension be considered as critical.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: extKeyUsage_critical, extendedKeyUsage_critical</div> </td> </tr> <tr> <td colspan="1">  <b>force</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Should the certificate signing request be forced regenerated by this ansible module.</div> </td> </tr> <tr> <td colspan="1">  <b>group</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>Name of the group that should own the file/directory, as would be fed to <em>chown</em>.</div> </td> </tr> <tr> <td colspan="1">  <b>key_usage</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td> </td> <td> <div>This defines the purpose (e.g. encipherment, signature, certificate signing) of the key contained in the certificate.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: keyUsage</div> </td> </tr> <tr> <td colspan="1">  <b>key_usage_critical</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Should the keyUsage extension be considered as critical.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: keyUsage_critical</div> </td> </tr> <tr> <td colspan="1">  <b>locality_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The localityName field of the certificate signing request subject.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: L, localityName</div> </td> </tr> <tr> <td colspan="1">  <b>mode</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The permissions the resulting file or directory should have.</div> <div>For those used to <em>/usr/bin/chmod</em> remember that modes are actually octal numbers. You must either add a leading zero so that Ansible's YAML parser knows it is an octal number (like <code>0644</code> or <code>01777</code>) or quote it (like <code>'644'</code> or <code>'1777'</code>) so Ansible receives a string and can do its own conversion from string into number.</div> <div>Giving Ansible a number without following one of these rules will end up with a decimal number which will have unexpected results.</div> <div>As of Ansible 1.8, the mode may be specified as a symbolic mode (for example, <code>u+rwx</code> or <code>u=rw,g=r,o=r</code>).</div> </td> </tr> <tr> <td colspan="1">  <b>ocsp_must_staple</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.5</div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Indicates that the certificate should contain the OCSP Must Staple extension (<a href="https://tools.ietf.org/html/rfc7633">https://tools.ietf.org/html/rfc7633</a>).</div> <div style="font-size: small; color: darkgreen">
<br>aliases: ocspMustStaple</div> </td> </tr> <tr> <td colspan="1">  <b>ocsp_must_staple_critical</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.5</div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Should the OCSP Must Staple extension be considered as critical</div> <div>Note that according to the RFC, this extension should not be marked as critical, as old clients not knowing about OCSP Must Staple are required to reject such certificates (see <a href="https://tools.ietf.org/html/rfc7633#section-4">https://tools.ietf.org/html/rfc7633#section-4</a>).</div> <div style="font-size: small; color: darkgreen">
<br>aliases: ocspMustStaple_critical</div> </td> </tr> <tr> <td colspan="1">  <b>organization_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The organizationName field of the certificate signing request subject.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: O, organizationName</div> </td> </tr> <tr> <td colspan="1">  <b>organizational_unit_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The organizationalUnitName field of the certificate signing request subject.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: OU, organizationalUnitName</div> </td> </tr> <tr> <td colspan="1">  <b>owner</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>Name of the user that should own the file/directory, as would be fed to <em>chown</em>.</div> </td> </tr> <tr> <td colspan="1">  <b>path</b>  <div style="font-size: small"> <span style="color: purple">path</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>The name of the file into which the generated OpenSSL certificate signing request will be written.</div> </td> </tr> <tr> <td colspan="1">  <b>privatekey_passphrase</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The passphrase for the private key.</div> <div>This is required if the private key is password protected.</div> </td> </tr> <tr> <td colspan="1">  <b>privatekey_path</b>  <div style="font-size: small"> <span style="color: purple">path</span> </div> </td> <td> </td> <td> <div>The path to the private key to use when signing the certificate signing request.</div> <div>Required if <em>state</em> is <code>present</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>select_crypto_backend</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.8</div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>auto</b> ←</div></li> <li>cryptography</li> <li>pyopenssl</li> </ul> </td> <td> <div>Determines which crypto backend to use.</div> <div>The default choice is <code>auto</code>, which tries to use <code>cryptography</code> if available, and falls back to <code>pyopenssl</code>.</div> <div>If set to <code>pyopenssl</code>, will try to use the <a href="https://pypi.org/project/pyOpenSSL/">pyOpenSSL</a> library.</div> <div>If set to <code>cryptography</code>, will try to use the <a href="https://cryptography.io/">cryptography</a> library.</div> <div>Please note that the <code>pyopenssl</code> backend has been deprecated in Ansible 2.9, and will be removed in Ansible 2.13. From that point on, only the <code>cryptography</code> backend will be available.</div> </td> </tr> <tr> <td colspan="1">  <b>selevel</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <b>Default:</b><br><div style="color: blue">"s0"</div> </td> <td> <div>The level part of the SELinux file context.</div> <div>This is the MLS/MCS attribute, sometimes known as the <code>range</code>.</div> <div>When set to <code>_default</code>, it will use the <code>level</code> portion of the policy if available.</div> </td> </tr> <tr> <td colspan="1">  <b>serole</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The role part of the SELinux file context.</div> <div>When set to <code>_default</code>, it will use the <code>role</code> portion of the policy if available.</div> </td> </tr> <tr> <td colspan="1">  <b>setype</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The type part of the SELinux file context.</div> <div>When set to <code>_default</code>, it will use the <code>type</code> portion of the policy if available.</div> </td> </tr> <tr> <td colspan="1">  <b>seuser</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The user part of the SELinux file context.</div> <div>By default it uses the <code>system</code> policy, where applicable.</div> <div>When set to <code>_default</code>, it will use the <code>user</code> portion of the policy if available.</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>absent</li> <li><div style="color: blue">
<b>present</b> ←</div></li> </ul> </td> <td> <div>Whether the certificate signing request should exist or not, taking action if the state is different from what is stated.</div> </td> </tr> <tr> <td colspan="1">  <b>state_or_province_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The stateOrProvinceName field of the certificate signing request subject.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: ST, stateOrProvinceName</div> </td> </tr> <tr> <td colspan="1">  <b>subject</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.5</div> </td> <td> </td> <td> <div>Key/value pairs that will be present in the subject name field of the certificate signing request.</div> <div>If you need to specify more than one value with the same key, use a list as value.</div> </td> </tr> <tr> <td colspan="1">  <b>subject_alt_name</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td> </td> <td> <div>SAN extension to attach to the certificate signing request.</div> <div>This can either be a 'comma separated string' or a YAML list.</div> <div>Values must be prefixed by their options. (i.e., <code>email</code>, <code>URI</code>, <code>DNS</code>, <code>RID</code>, <code>IP</code>, <code>dirName</code>, <code>otherName</code> and the ones specific to your CA)</div> <div>Note that if no SAN is specified, but a common name, the common name will be added as a SAN except if <code>useCommonNameForSAN</code> is set to <em>false</em>.</div> <div>More at <a href="https://tools.ietf.org/html/rfc5280#section-4.2.1.6">https://tools.ietf.org/html/rfc5280#section-4.2.1.6</a>.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: subjectAltName</div> </td> </tr> <tr> <td colspan="1">  <b>subject_alt_name_critical</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Should the subjectAltName extension be considered as critical.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: subjectAltName_critical</div> </td> </tr> <tr> <td colspan="1">  <b>subject_key_identifier</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.9</div> </td> <td> </td> <td> <div>The subject key identifier as a hex string, where two bytes are separated by colons.</div> <div>Example: <code>00:11:22:33:44:55:66:77:88:99:aa:bb:cc:dd:ee:ff:00:11:22:33</code>
</div> <div>Please note that commercial CAs ignore this value, respectively use a value of their own choice. Specifying this option is mostly useful for self-signed certificates or for own CAs.</div> <div>Note that this option can only be used if <em>create_subject_key_identifier</em> is <code>no</code>.</div> <div>Note that this is only supported if the <code>cryptography</code> backend is used!</div> </td> </tr> <tr> <td colspan="1">  <b>unsafe_writes</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Influence when to use atomic operation to prevent data corruption or inconsistent reads from the target file.</div> <div>By default this module uses atomic operations to prevent data corruption or inconsistent reads from the target files, but sometimes systems are configured or just broken in ways that prevent this. One example is docker mounted files, which cannot be updated atomically from inside the container and can only be written in an unsafe manner.</div> <div>This option allows Ansible to fall back to unsafe methods of updating files when atomic operations fail (however, it doesn't force Ansible to perform unsafe writes).</div> <div>IMPORTANT! Unsafe writes are subject to race conditions and can lead to data corruption.</div> </td> </tr> <tr> <td colspan="1">  <b>use_common_name_for_san</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.8</div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If set to <code>yes</code>, the module will fill the common name in for <code>subject_alt_name</code> with <code>DNS:</code> prefix if no SAN is specified.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: useCommonNameForSAN</div> </td> </tr> <tr> <td colspan="1">  <b>version</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> <b>Default:</b><br><div style="color: blue">1</div> </td> <td> <div>The version of the certificate signing request.</div> <div>The only allowed value according to <a href="https://tools.ietf.org/html/rfc2986#section-4.1">RFC 2986</a> is 1.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>If the certificate signing request already exists it will be checked whether subjectAltName, keyUsage, extendedKeyUsage and basicConstraints only contain the requested values, whether OCSP Must Staple is as requested, and if the request was signed by the given private key.</li> </ul> </div>   <h2 id="see-also">See Also</h2> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <dl class="last docutils"> <dt><a class="reference internal" href="openssl_certificate_module#openssl-certificate-module"><span class="std std-ref">openssl_certificate – Generate and/or check OpenSSL certificates</span></a></dt> <dd>The official documentation on the <strong>openssl_certificate</strong> module.</dd> <dt><a class="reference internal" href="openssl_dhparam_module#openssl-dhparam-module"><span class="std std-ref">openssl_dhparam – Generate OpenSSL Diffie-Hellman Parameters</span></a></dt> <dd>The official documentation on the <strong>openssl_dhparam</strong> module.</dd> <dt><a class="reference internal" href="openssl_pkcs12_module#openssl-pkcs12-module"><span class="std std-ref">openssl_pkcs12 – Generate OpenSSL PKCS#12 archive</span></a></dt> <dd>The official documentation on the <strong>openssl_pkcs12</strong> module.</dd> <dt><a class="reference internal" href="openssl_privatekey_module#openssl-privatekey-module"><span class="std std-ref">openssl_privatekey – Generate OpenSSL private keys</span></a></dt> <dd>The official documentation on the <strong>openssl_privatekey</strong> module.</dd> <dt><a class="reference internal" href="openssl_publickey_module#openssl-publickey-module"><span class="std std-ref">openssl_publickey – Generate an OpenSSL public key from its private key</span></a></dt> <dd>The official documentation on the <strong>openssl_publickey</strong> module.</dd> </dl> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml">- name: Generate an OpenSSL Certificate Signing Request
  openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    common_name: www.ansible.com

- name: Generate an OpenSSL Certificate Signing Request with a passphrase protected private key
  openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    privatekey_passphrase: ansible
    common_name: www.ansible.com

- name: Generate an OpenSSL Certificate Signing Request with Subject information
  openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    country_name: FR
    organization_name: Ansible
    email_address: jdoe@ansible.com
    common_name: www.ansible.com

- name: Generate an OpenSSL Certificate Signing Request with subjectAltName extension
  openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    subject_alt_name: 'DNS:www.ansible.com,DNS:m.ansible.com'

- name: Generate an OpenSSL CSR with subjectAltName extension with dynamic list
  openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    subject_alt_name: "{{ item.value | map('regex_replace', '^', 'DNS:') | list }}"
  with_dict:
    dns_server:
    - www.ansible.com
    - m.ansible.com

- name: Force regenerate an OpenSSL Certificate Signing Request
  openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    force: yes
    common_name: www.ansible.com

- name: Generate an OpenSSL Certificate Signing Request with special key usages
  openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    common_name: www.ansible.com
    key_usage:
      - digitalSignature
      - keyAgreement
    extended_key_usage:
      - clientAuth

- name: Generate an OpenSSL Certificate Signing Request with OCSP Must Staple
  openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    common_name: www.ansible.com
    ocsp_must_staple: yes
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>backup_file</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>changed and if <em>backup</em> is <code>yes</code>
</td> <td> <div>Name of backup file created.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">/path/to/www.ansible.com.csr.2019-03-09@11:22~</div> </td> </tr> <tr> <td colspan="1">  <b>basicConstraints</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td>changed or success</td> <td> <div>Indicates if the certificate belongs to a CA</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">['CA:TRUE', 'pathLenConstraint:0']</div> </td> </tr> <tr> <td colspan="1">  <b>extendedKeyUsage</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td>changed or success</td> <td> <div>Additional restriction on the public key purposes</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">['clientAuth']</div> </td> </tr> <tr> <td colspan="1">  <b>filename</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>changed or success</td> <td> <div>Path to the generated Certificate Signing Request</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">/etc/ssl/csr/www.ansible.com.csr</div> </td> </tr> <tr> <td colspan="1">  <b>keyUsage</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td>changed or success</td> <td> <div>Purpose for which the public key may be used</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">['digitalSignature', 'keyAgreement']</div> </td> </tr> <tr> <td colspan="1">  <b>ocsp_must_staple</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td>changed or success</td> <td> <div>Indicates whether the certificate has the OCSP Must Staple feature enabled</div> <br> </td> </tr> <tr> <td colspan="1">  <b>privatekey</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>changed or success</td> <td> <div>Path to the TLS/SSL private key the CSR was generated for</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">/etc/ssl/private/ansible.com.pem</div> </td> </tr> <tr> <td colspan="1">  <b>subject</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=list</span> </div> </td> <td>changed or success</td> <td> <div>A list of the subject tuples attached to the CSR</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">[('CN', 'www.ansible.com'), ('O', 'Ansible')]</div> </td> </tr> <tr> <td colspan="1">  <b>subjectAltName</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td>changed or success</td> <td> <div>The alternative names this CSR is valid for</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">['DNS:www.ansible.com', 'DNS:m.ansible.com']</div> </td> </tr> </table> <br><br>  <h2 id="status">Status</h2> <ul class="simple"> <li>This module is not guaranteed to have a backwards compatible interface. <em>[preview]</em>
</li> <li>This module is <a class="reference internal" href="../user_guide/modules_support#modules-support"><span class="std std-ref">maintained by the Ansible Community</span></a>. <em>[community]</em>
</li> </ul>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Yanis Guenane (@Spredzy)</li> </ul> <div class="admonition hint"> <p class="first admonition-title">Hint</p> <p class="last">If you notice any issues in this documentation, you can <a class="reference external" href="https://github.com/ansible/ansible/edit/devel/lib/ansible/modules/crypto/openssl_csr.py?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr">edit this document</a> to improve it.</p> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2019 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.9/modules/openssl_csr_module.html" class="_attribution-link">https://docs.ansible.com/ansible/2.9/modules/openssl_csr_module.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
