
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Spotinst_aws_elastigroup – Create, Update or Delete Spotinst AWS Elastigroups - Ansible 2.9 - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.5. ">
  <meta name="keywords" content="spotinst, aws, elastigroup, –, create, update, or, delete, elastigroups, ansible, ansible~2.9">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.9/modules/spotinst_aws_elastigroup_module.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/ansible~2.9.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.9/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.9</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="spotinst-aws-elastigroup-module">spotinst_aws_elastigroup – Create, update or delete Spotinst AWS Elastigroups</h1> <div class="versionadded" id="spotinst-aws-elastigroup-create-update-or-delete-spotinst-aws-elastigroups"> <p><span class="versionmodified">New in version 2.5.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> <li><a class="reference internal" href="#status" id="id6">Status</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Can create, update, or delete Spotinst AWS Elastigroups Launch configuration is part of the elastigroup configuration, so no additional modules are necessary for handling the launch configuration. You will have to have a credentials file in this location - &lt;home&gt;/.spotinst/credentials The credentials file must contain a row that looks like this token = &lt;YOUR TOKEN&gt; Full documentation available at <a class="reference external" href="https://help.spotinst.com/hc/en-us/articles/115003530285-Ansible">https://help.spotinst.com/hc/en-us/articles/115003530285-Ansible</a>-</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.7</li> <li>spotinst_sdk &gt;= 1.0.38</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>account_id</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(String) Optional parameter that allows to set an account-id inside the module configuration By default this is retrieved from the credentials path</div> </td> </tr> <tr> <td colspan="1">  <b>availability_vs_cost</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>availabilityOriented</li> <li>costOriented</li> <li>balanced</li> </ul> </td> <td> <div>(String) The strategy orientation.</div> </td> </tr> <tr> <td colspan="1">  <b>availability_zones</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(List of Objects) a list of hash/dictionaries of Availability Zones that are configured in the elastigroup; '[{"key":"value", "key":"value"}]'; keys allowed are name (String), subnet_id (String), placement_group_name (String),</div> </td> </tr> <tr> <td colspan="1">  <b>block_device_mappings</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Objects) a list of hash/dictionaries of Block Device Mappings for elastigroup instances; You can specify virtual devices and EBS volumes.; '[{"key":"value", "key":"value"}]'; keys allowed are device_name (List of Strings), virtual_name (String), no_device (String), ebs (Object, expects the following keys- delete_on_termination(Boolean), encrypted(Boolean), iops (Integer), snapshot_id(Integer), volume_type(String), volume_size(Integer))</div> </td> </tr> <tr> <td colspan="1">  <b>chef</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Object) The Chef integration configuration.; Expects the following keys - chef_server (String), organization (String), user (String), pem_key (String), chef_version (String)</div> </td> </tr> <tr> <td colspan="1">  <b>credentials_path</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(String) Optional parameter that allows to set a non-default credentials path. Default is ~/.spotinst/credentials</div> </td> </tr> <tr> <td colspan="1">  <b>down_scaling_policies</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Objects) a list of hash/dictionaries of scaling policies to configure in the elastigroup; '[{"key":"value", "key":"value"}]'; keys allowed are - policy_name (String, required), namespace (String, required), metric_name (String, required), dimensions ((List of Objects), Keys allowed are name (String, required) and value (String)), statistic (String, required), evaluation_periods (String, required), period (String, required), threshold (String, required), cooldown (String, required), unit (String, required), operator (String, required), action_type (String, required), adjustment (String), max_target_capacity (String), target (String), maximum (String), minimum (String)</div> </td> </tr> <tr> <td colspan="1">  <b>draining_timeout</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Integer) Time for instance to be drained from incoming requests and deregistered from ELB before termination.</div> </td> </tr> <tr> <td colspan="1">  <b>ebs_optimized</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>(Boolean) Enable EBS optimization for supported instances which are not enabled by default.; Note - additional charges will be applied.</div> </td> </tr> <tr> <td colspan="1">  <b>ebs_volume_pool</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Objects) a list of hash/dictionaries of EBS devices to reattach to the elastigroup when available; '[{"key":"value", "key":"value"}]'; keys allowed are - volume_ids (List of Strings), device_name (String)</div> </td> </tr> <tr> <td colspan="1">  <b>ecs</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Object) The ECS integration configuration.; Expects the following key - cluster_name (String)</div> </td> </tr> <tr> <td colspan="1">  <b>elastic_ips</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Strings) List of ElasticIps Allocation Ids (Example <code>eipalloc-9d4e16f8</code>) to associate to the group instances</div> </td> </tr> <tr> <td colspan="1">  <b>fallback_to_od</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>(Boolean) In case of no spots available, Elastigroup will launch an On-demand instance instead</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_grace_period</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> <b>Default:</b><br><div style="color: blue">300</div> </td> <td> <div>(Integer) The amount of time, in seconds, after the instance has launched to start and check its health.</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_type</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>ELB</li> <li>HCS</li> <li>TARGET_GROUP</li> <li>MLB</li> <li>EC2</li> </ul> </td> <td> <div>(String) The service to use for the health check.</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_unhealthy_duration_before_replacement</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Integer) Minimal mount of time instance should be unhealthy for us to consider it unhealthy.</div> </td> </tr> <tr> <td colspan="1">  <b>iam_role_arn</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(String) The instance profile iamRole arn</div> <div>Only use iam_role_arn, or iam_role_name</div> </td> </tr> <tr> <td colspan="1">  <b>iam_role_name</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(String) The instance profile iamRole name</div> <div>Only use iam_role_arn, or iam_role_name</div> </td> </tr> <tr> <td colspan="1">  <b>id</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(String) The group id if it already exists and you want to update, or delete it. This will not work unless the uniqueness_by field is set to id. When this is set, and the uniqueness_by field is set, the group will either be updated or deleted, but not created.</div> </td> </tr> <tr> <td colspan="1">  <b>ignore_changes</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>image_id</li> <li>target</li> </ul> </td> <td> <div>(List of Strings) list of fields on which changes should be ignored when updating</div> </td> </tr> <tr> <td colspan="1">  <b>image_id</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(String) The image Id used to launch the instance.; In case of conflict between Instance type and image type, an error will be returned</div> </td> </tr> <tr> <td colspan="1">  <b>key_pair</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(String) Specify a Key Pair to attach to the instances</div> </td> </tr> <tr> <td colspan="1">  <b>kubernetes</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Object) The Kubernetes integration configuration. Expects the following keys - api_server (String), token (String)</div> </td> </tr> <tr> <td colspan="1">  <b>lifetime_period</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(String) lifetime period</div> </td> </tr> <tr> <td colspan="1">  <b>load_balancers</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Strings) List of classic ELB names</div> </td> </tr> <tr> <td colspan="1">  <b>max_size</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(Integer) The upper limit number of instances that you can scale up to</div> </td> </tr> <tr> <td colspan="1">  <b>mesosphere</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Object) The Mesosphere integration configuration. Expects the following key - api_server (String)</div> </td> </tr> <tr> <td colspan="1">  <b>min_size</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(Integer) The lower limit number of instances that you can scale down to</div> </td> </tr> <tr> <td colspan="1">  <b>monitoring</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(Boolean) Describes whether instance Enhanced Monitoring is enabled</div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(String) Unique name for elastigroup to be created, updated or deleted</div> </td> </tr> <tr> <td colspan="1">  <b>network_interfaces</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Objects) a list of hash/dictionaries of network interfaces to add to the elastigroup; '[{"key":"value", "key":"value"}]'; keys allowed are - description (String), device_index (Integer), secondary_private_ip_address_count (Integer), associate_public_ip_address (Boolean), delete_on_termination (Boolean), groups (List of Strings), network_interface_id (String), private_ip_address (String), subnet_id (String), associate_ipv6_address (Boolean), private_ip_addresses (List of Objects, Keys are privateIpAddress (String, required) and primary (Boolean))</div> </td> </tr> <tr> <td colspan="1">  <b>on_demand_count</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Integer) Required if risk is not set</div> <div>Number of on demand instances to launch. All other instances will be spot instances.; Either set this parameter or the risk parameter</div> </td> </tr> <tr> <td colspan="1">  <b>on_demand_instance_type</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(String) On-demand instance type that will be provisioned</div> </td> </tr> <tr> <td colspan="1">  <b>opsworks</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Object) The elastigroup OpsWorks integration configration.; Expects the following key - layer_id (String)</div> </td> </tr> <tr> <td colspan="1">  <b>persistence</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Object) The Stateful elastigroup configration.; Accepts the following keys - should_persist_root_device (Boolean), should_persist_block_devices (Boolean), should_persist_private_ip (Boolean)</div> </td> </tr> <tr> <td colspan="1">  <b>product</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>Linux/UNIX</li> <li>SUSE Linux</li> <li>Windows</li> <li>Linux/UNIX (Amazon VPC)</li> <li>SUSE Linux (Amazon VPC)</li> <li>Windows</li> </ul> </td> <td> <div>(String) Operation system type._</div> </td> </tr> <tr> <td colspan="1">  <b>rancher</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Object) The Rancher integration configuration.; Expects the following keys - version (String), access_key (String), secret_key (String), master_host (String)</div> </td> </tr> <tr> <td colspan="1">  <b>right_scale</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Object) The Rightscale integration configuration.; Expects the following keys - account_id (String), refresh_token (String)</div> </td> </tr> <tr> <td colspan="1">  <b>risk</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Integer) required if on demand is not set. The percentage of Spot instances to launch (0 - 100).</div> </td> </tr> <tr> <td colspan="1">  <b>roll_config</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Object) Roll configuration.; If you would like the group to roll after updating, please use this feature. Accepts the following keys - batch_size_percentage(Integer, Required), grace_period - (Integer, Required), health_check_type(String, Optional)</div> </td> </tr> <tr> <td colspan="1">  <b>scheduled_tasks</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Objects) a list of hash/dictionaries of scheduled tasks to configure in the elastigroup; '[{"key":"value", "key":"value"}]'; keys allowed are - adjustment (Integer), scale_target_capacity (Integer), scale_min_capacity (Integer), scale_max_capacity (Integer), adjustment_percentage (Integer), batch_size_percentage (Integer), cron_expression (String), frequency (String), grace_period (Integer), task_type (String, required), is_enabled (Boolean)</div> </td> </tr> <tr> <td colspan="1">  <b>security_group_ids</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(List of Strings) One or more security group IDs. ; In case of update it will override the existing Security Group with the new given array</div> </td> </tr> <tr> <td colspan="1">  <b>shutdown_script</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(String) The Base64-encoded shutdown script that executes prior to instance termination. Encode before setting.</div> </td> </tr> <tr> <td colspan="1">  <b>signals</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Objects) a list of hash/dictionaries of signals to configure in the elastigroup; keys allowed are - name (String, required), timeout (Integer)</div> </td> </tr> <tr> <td colspan="1">  <b>spin_up_time</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Integer) spin up time, in seconds, for the instance</div> </td> </tr> <tr> <td colspan="1">  <b>spot_instance_types</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(List of Strings) Spot instance type that will be provisioned.</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>present</li> <li>absent</li> </ul> </td> <td> <div>(String) create or delete the elastigroup</div> </td> </tr> <tr> <td colspan="1">  <b>tags</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of tagKey:tagValue paris) a list of tags to configure in the elastigroup. Please specify list of keys and values (key colon value);</div> </td> </tr> <tr> <td colspan="1">  <b>target</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>(Integer) The number of instances to launch</div> </td> </tr> <tr> <td colspan="1">  <b>target_group_arns</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Strings) List of target group arns instances should be registered to</div> </td> </tr> <tr> <td colspan="1">  <b>target_tracking_policies</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Objects) a list of hash/dictionaries of target tracking policies to configure in the elastigroup; '[{"key":"value", "key":"value"}]'; keys allowed are - policy_name (String, required), namespace (String, required), source (String, required), metric_name (String, required), statistic (String, required), unit (String, required), cooldown (String, required), target (String, required)</div> </td> </tr> <tr> <td colspan="1">  <b>tenancy</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>default</li> <li>dedicated</li> </ul> </td> <td> <div>(String) dedicated vs shared tenancy</div> </td> </tr> <tr> <td colspan="1">  <b>terminate_at_end_of_billing_hour</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>(Boolean) terminate at the end of billing hour</div> </td> </tr> <tr> <td colspan="1">  <b>uniqueness_by</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>id</li> <li>name</li> </ul> </td> <td> <div>(String) If your group names are not unique, you may use this feature to update or delete a specific group. Whenever this property is set, you must set a group_id in order to update or delete a group, otherwise a group will be created.</div> </td> </tr> <tr> <td colspan="1">  <b>unit</b>  <div style="font-size: small"> <span style="color: purple">-</span> / <span style="color: red">required</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>instance</li> <li>weight</li> </ul> </td> <td> <div>(String) The capacity unit to launch instances by.</div> </td> </tr> <tr> <td colspan="1">  <b>up_scaling_policies</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(List of Objects) a list of hash/dictionaries of scaling policies to configure in the elastigroup; '[{"key":"value", "key":"value"}]'; keys allowed are - policy_name (String, required), namespace (String, required), metric_name (String, required), dimensions (List of Objects, Keys allowed are name (String, required) and value (String)), statistic (String, required) evaluation_periods (String, required), period (String, required), threshold (String, required), cooldown (String, required), unit (String, required), operator (String, required), action_type (String, required), adjustment (String), min_target_capacity (String), target (String), maximum (String), minimum (String)</div> </td> </tr> <tr> <td colspan="1">  <b>user_data</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(String) Base64-encoded MIME user data. Encode before setting the value.</div> </td> </tr> <tr> <td colspan="1">  <b>utilize_reserved_instances</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>(Boolean) In case of any available Reserved Instances, Elastigroup will utilize your reservations before purchasing Spot instances.</div> </td> </tr> <tr> <td colspan="1">  <b>wait_for_instances</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>(Boolean) Whether or not the elastigroup creation / update actions should wait for the instances to spin</div> </td> </tr> <tr> <td colspan="1">  <b>wait_timeout</b>  <div style="font-size: small"> <span style="color: purple">-</span> </div> </td> <td> </td> <td> <div>(Integer) How long the module should wait for instances before failing the action.; Only works if wait_for_instances is True.</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml"># Basic configuration YAML example

- hosts: localhost
  tasks:
    - name: create elastigroup
      spotinst_aws_elastigroup:
          state: present
          risk: 100
          availability_vs_cost: balanced
          availability_zones:
            - name: us-west-2a
              subnet_id: subnet-2b68a15c
          image_id: ami-f173cc91
          key_pair: spotinst-oregon
          max_size: 15
          min_size: 0
          target: 0
          unit: instance
          monitoring: True
          name: ansible-group
          on_demand_instance_type: c3.large
          product: Linux/UNIX
          load_balancers:
            - test-lb-1
          security_group_ids:
            - sg-8f4b8fe9
          spot_instance_types:
            - c3.large
          do_not_update:
            - image_id
            - target
      register: result
    - debug: var=result

# In this example, we create an elastigroup and wait 600 seconds to retrieve the instances, and use their private ips

- hosts: localhost
  tasks:
    - name: create elastigroup
      spotinst_aws_elastigroup:
          state: present
          account_id: act-1a9dd2b
          risk: 100
          availability_vs_cost: balanced
          availability_zones:
            - name: us-west-2a
              subnet_id: subnet-2b68a15c
          tags:
            - Environment: someEnvValue
            - OtherTagKey: otherValue
          image_id: ami-f173cc91
          key_pair: spotinst-oregon
          max_size: 5
          min_size: 0
          target: 0
          unit: instance
          monitoring: True
          name: ansible-group-tal
          on_demand_instance_type: c3.large
          product: Linux/UNIX
          security_group_ids:
            - sg-8f4b8fe9
          block_device_mappings:
            - device_name: '/dev/sda1'
              ebs:
                volume_size: 100
                volume_type: gp2
          spot_instance_types:
            - c3.large
          do_not_update:
            - image_id
          wait_for_instances: True
          wait_timeout: 600
      register: result

    - name: Store private ips to file
      shell: echo {{ item.private_ip }}\n &gt;&gt; list-of-private-ips
      with_items: "{{ result.instances }}"
    - debug: var=result

# In this example, we create an elastigroup with multiple block device mappings, tags, and also an account id
# In organizations with more than one account, it is required to specify an account_id

- hosts: localhost
  tasks:
    - name: create elastigroup
      spotinst_aws_elastigroup:
          state: present
          account_id: act-1a9dd2b
          risk: 100
          availability_vs_cost: balanced
          availability_zones:
            - name: us-west-2a
              subnet_id: subnet-2b68a15c
          tags:
            - Environment: someEnvValue
            - OtherTagKey: otherValue
          image_id: ami-f173cc91
          key_pair: spotinst-oregon
          max_size: 5
          min_size: 0
          target: 0
          unit: instance
          monitoring: True
          name: ansible-group-tal
          on_demand_instance_type: c3.large
          product: Linux/UNIX
          security_group_ids:
            - sg-8f4b8fe9
          block_device_mappings:
            - device_name: '/dev/xvda'
              ebs:
                volume_size: 60
                volume_type: gp2
            - device_name: '/dev/xvdb'
              ebs:
                volume_size: 120
                volume_type: gp2
          spot_instance_types:
            - c3.large
          do_not_update:
            - image_id
          wait_for_instances: True
          wait_timeout: 600
      register: result

    - name: Store private ips to file
      shell: echo {{ item.private_ip }}\n &gt;&gt; list-of-private-ips
      with_items: "{{ result.instances }}"
    - debug: var=result

# In this example we have set up block device mapping with ephemeral devices

- hosts: localhost
  tasks:
    - name: create elastigroup
      spotinst_aws_elastigroup:
          state: present
          risk: 100
          availability_vs_cost: balanced
          availability_zones:
            - name: us-west-2a
              subnet_id: subnet-2b68a15c
          image_id: ami-f173cc91
          key_pair: spotinst-oregon
          max_size: 15
          min_size: 0
          target: 0
          unit: instance
          block_device_mappings:
            - device_name: '/dev/xvda'
              virtual_name: ephemeral0
            - device_name: '/dev/xvdb/'
              virtual_name: ephemeral1
          monitoring: True
          name: ansible-group
          on_demand_instance_type: c3.large
          product: Linux/UNIX
          load_balancers:
            - test-lb-1
          security_group_ids:
            - sg-8f4b8fe9
          spot_instance_types:
            - c3.large
          do_not_update:
            - image_id
            - target
      register: result
    - debug: var=result

# In this example we create a basic group configuration with a network interface defined.
# Each network interface must have a device index

- hosts: localhost
  tasks:
    - name: create elastigroup
      spotinst_aws_elastigroup:
          state: present
          risk: 100
          availability_vs_cost: balanced
          network_interfaces:
            - associate_public_ip_address: true
              device_index: 0
          availability_zones:
            - name: us-west-2a
              subnet_id: subnet-2b68a15c
          image_id: ami-f173cc91
          key_pair: spotinst-oregon
          max_size: 15
          min_size: 0
          target: 0
          unit: instance
          monitoring: True
          name: ansible-group
          on_demand_instance_type: c3.large
          product: Linux/UNIX
          load_balancers:
            - test-lb-1
          security_group_ids:
            - sg-8f4b8fe9
          spot_instance_types:
            - c3.large
          do_not_update:
            - image_id
            - target
      register: result
    - debug: var=result


# In this example we create a basic group configuration with a target tracking scaling policy defined

- hosts: localhost
  tasks:
    - name: create elastigroup
      spotinst_aws_elastigroup:
          account_id: act-92d45673
          state: present
          risk: 100
          availability_vs_cost: balanced
          availability_zones:
            - name: us-west-2a
              subnet_id: subnet-79da021e
          image_id: ami-f173cc91
          fallback_to_od: true
          tags:
            - Creator: ValueOfCreatorTag
            - Environment: ValueOfEnvironmentTag
          key_pair: spotinst-labs-oregon
          max_size: 10
          min_size: 0
          target: 2
          unit: instance
          monitoring: True
          name: ansible-group-1
          on_demand_instance_type: c3.large
          product: Linux/UNIX
          security_group_ids:
            - sg-46cdc13d
          spot_instance_types:
            - c3.large
          target_tracking_policies:
            - policy_name: target-tracking-1
              namespace: AWS/EC2
              metric_name: CPUUtilization
              statistic: average
              unit: percent
              target: 50
              cooldown: 120
          do_not_update:
            - image_id
      register: result
    - debug: var=result
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>group_id</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>success</td> <td> <div>Created / Updated group's ID.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">sig-12345</div> </td> </tr> <tr> <td colspan="1">  <b>instances</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> </td> <td>success</td> <td> <div>List of active elastigroup instances and their details.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">[{'spotInstanceRequestId': 'sir-regs25zp', 'instanceId': 'i-09640ad8678234c', 'instanceType': 'm4.large', 'product': 'Linux/UNIX', 'availabilityZone': 'us-west-2b', 'privateIp': '180.0.2.244', 'createdAt': '2017-07-17T12:46:18.000Z', 'status': 'fulfilled'}]</div> </td> </tr> </table> <br><br>  <h2 id="status">Status</h2> <ul class="simple"> <li>This module is not guaranteed to have a backwards compatible interface. <em>[preview]</em>
</li> <li>This module is <a class="reference internal" href="../user_guide/modules_support#modules-support"><span class="std std-ref">maintained by the Ansible Community</span></a>. <em>[community]</em>
</li> </ul>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Spotinst (@talzur)</li> </ul> <div class="admonition hint"> <p class="first admonition-title">Hint</p> <p class="last">If you notice any issues in this documentation, you can <a class="reference external" href="https://github.com/ansible/ansible/edit/devel/lib/ansible/modules/cloud/spotinst/spotinst_aws_elastigroup.py?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr">edit this document</a> to improve it.</p> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2019 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.9/modules/spotinst_aws_elastigroup_module.html" class="_attribution-link">https://docs.ansible.com/ansible/2.9/modules/spotinst_aws_elastigroup_module.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
