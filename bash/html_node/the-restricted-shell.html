
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>The Restricted Shell - Bash - W3cubDocs</title>
  
  <meta name="description" content="If Bash is started with the name rbash, or the --restricted or -r option is supplied at invocation, the shell becomes restricted. A restricted shell &hellip;">
  <meta name="keywords" content="restricted, shell, bash">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/bash/html_node/the-restricted-shell.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/bash.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/bash/" class="_nav-link" title="" style="margin-left:0;">Bash</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _bash">
				
				
<h1 class="section">The Restricted Shell</h1>  <p>If Bash is started with the name <code>rbash</code>, or the <samp>--restricted</samp> or <samp>-r</samp> option is supplied at invocation, the shell becomes restricted. A restricted shell is used to set up an environment more controlled than the standard shell. A restricted shell behaves identically to <code>bash</code> with the exception that the following are disallowed or not performed: </p> <ul> <li> Changing directories with the <code>cd</code> builtin. </li>
<li> Setting or unsetting the values of the <code>SHELL</code>, <code>PATH</code>, <code>ENV</code>, or <code>BASH_ENV</code> variables. </li>
<li> Specifying command names containing slashes. </li>
<li> Specifying a filename containing a slash as an argument to the <code>.</code> builtin command. </li>
<li> Specifying a filename containing a slash as an argument to the <samp>-p</samp> option to the <code>hash</code> builtin command. </li>
<li> Importing function definitions from the shell environment at startup. </li>
<li> Parsing the value of <code>SHELLOPTS</code> from the shell environment at startup. </li>
<li> Redirecting output using the ‘<samp>&gt;</samp>’, ‘<samp>&gt;|</samp>’, ‘<samp>&lt;&gt;</samp>’, ‘<samp>&gt;&amp;</samp>’, ‘<samp>&amp;&gt;</samp>’, and ‘<samp>&gt;&gt;</samp>’ redirection operators. </li>
<li> Using the <code>exec</code> builtin to replace the shell with another command. </li>
<li> Adding or deleting builtin commands with the <samp>-f</samp> and <samp>-d</samp> options to the <code>enable</code> builtin. </li>
<li> Using the <code>enable</code> builtin command to enable disabled shell builtins. </li>
<li> Specifying the <samp>-p</samp> option to the <code>command</code> builtin. </li>
<li> Turning off restricted mode with ‘<samp>set +r</samp>’ or ‘<samp>set +o restricted</samp>’. </li>
</ul> <p>These restrictions are enforced after any startup files are read. </p> <p>When a command that is found to be a shell script is executed (see <a href="shell-scripts#Shell-Scripts">Shell Scripts</a>), <code>rbash</code> turns off any restrictions in the shell spawned to execute the script. </p> <p>The restricted shell mode is only one component of a useful restricted environment. It should be accompanied by setting <code>PATH</code> to a value that allows execution of only a few verified commands (commands that allow shell escapes are particularly vulnerable), leaving the user in a non-writable directory other than his home directory after login, not allowing the restricted shell to execute shell scripts, and cleaning the environment of variables that cause some commands to modify their behavior (e.g., <code>VISUAL</code> or <code>PAGER</code>). </p> <p>Modern systems provide more secure ways to implement a restricted environment, such as <code>jails</code>, <code>zones</code>, or <code>containers</code>. </p>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright © 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.<br>Licensed under the GNU Free Documentation License.<br>
    <a href="https://www.gnu.org/software/bash/manual/html_node/The-Restricted-Shell.html" class="_attribution-link">https://www.gnu.org/software/bash/manual/html_node/The-Restricted-Shell.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
