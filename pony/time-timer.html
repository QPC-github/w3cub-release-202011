
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Timer - Pony - W3cubDocs</title>
  
  <meta name="description" content=" [Source] ">
  <meta name="keywords" content="timer, pony">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/pony/time-timer.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/pony.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/pony/" class="_nav-link" title="" style="margin-left:0;">Pony</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 id="timer">Timer</h1> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/time/timer/#L3">[Source]</a></span></p> <p>The <code>Timer</code> class represents a timer that fires after an expiration time, and then fires at an interval. When a <code>Timer</code> fires, it calls the <code>apply</code> method of the <code>TimerNotify</code> object that was passed to it when it was created.</p> <p>The following example waits 5 seconds and then fires every 2 seconds, and when it fires the <code>TimerNotify</code> object prints how many times it has been called:</p> <pre>use "time"

actor Main
  new create(env: Env) =&gt;
    let timers = Timers
    let timer = Timer(Notify(env), 5_000_000_000, 2_000_000_000)
    timers(consume timer)

class Notify is TimerNotify
  let _env: Env
  var _counter: U32 = 0
  new iso create(env: Env) =&gt;
    _env = env
  fun ref apply(timer: Timer, count: U64): Bool =&gt;
    _env.out.print(_counter.string())
    _counter = _counter + 1
    true
</pre> <pre>class ref Timer
</pre> <h2 id="constructors">Constructors</h2> <h3 id="create">create</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/time/timer/#L39">[Source]</a></span></p> <p>Create a new timer. The expiration time should be a nanosecond count until the first expiration. The interval should also be in nanoseconds.</p> <pre>new iso create(
  notify: TimerNotify iso,
  expiration: U64 val,
  interval: U64 val = 0)
: Timer iso^
</pre> <h4 id="parameters">Parameters</h4> <ul> <li>notify: <a href="time-timernotify">TimerNotify</a> iso</li> <li>expiration: <a href="builtin-u64">U64</a> val</li> <li>interval: <a href="builtin-u64">U64</a> val = 0</li> </ul> <h4 id="returns">Returns</h4> <ul> <li>
<a href="index">Timer</a> iso^</li> </ul>  <h3 id="abs">abs</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/time/timer/#L54">[Source]</a></span></p> <p>Creates a new timer with an absolute expiration time rather than a relative time. The expiration time is wall-clock adjusted system time.</p> <pre>new ref abs(
  notify: TimerNotify ref,
  expiration: (I64 val , I64 val),
  interval: U64 val = 0)
: Timer ref^
</pre> <h4 id="parameters_1">Parameters</h4> <ul> <li>notify: <a href="time-timernotify">TimerNotify</a> ref</li> <li>expiration: (<a href="builtin-i64">I64</a> val , <a href="builtin-i64">I64</a> val)</li> <li>interval: <a href="builtin-u64">U64</a> val = 0</li> </ul> <h4 id="returns_1">Returns</h4> <ul> <li>
<a href="index">Timer</a> ref^</li> </ul>  <h2 id="private-functions">Private Functions</h2> <h3 id="_cancel">_cancel</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/time/timer/#L65">[Source]</a></span></p> <p>Remove the timer from any list.</p> <pre>fun ref _cancel()
: None val
</pre> <h4 id="returns_2">Returns</h4> <ul> <li>
<a href="builtin-none">None</a> val</li> </ul>  <h3 id="_get_node">_get_node</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/time/timer/#L72">[Source]</a></span></p> <p>Returns the list node pointing to the timer. Used to schedule the timer in a queue.</p> <pre>fun ref _get_node()
: ListNode[Timer ref] ref
</pre> <h4 id="returns_3">Returns</h4> <ul> <li>
<a href="collections-listnode">ListNode</a>[<a href="index">Timer</a> ref] ref</li> </ul>  <h3 id="_slop">_slop</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/time/timer/#L79">[Source]</a></span></p> <p>Apply slop bits to the expiration time and interval. This reduces the precision by the given number of bits, effectively quantizing time.</p> <pre>fun ref _slop(
  bits: USize val)
: None val
</pre> <h4 id="parameters_2">Parameters</h4> <ul> <li>bits: <a href="builtin-usize">USize</a> val</li> </ul> <h4 id="returns_4">Returns</h4> <ul> <li>
<a href="builtin-none">None</a> val</li> </ul>  <h3 id="_fire">_fire</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/time/timer/#L90">[Source]</a></span></p> <p>A timer is fired if its expiration time is in the past. The notifier is called with a count based on the elapsed time since expiration and the timer interval. The expiration time is set to the next expiration. Returns true if the timer should be rescheduled, false otherwise.</p> <pre>fun ref _fire(
  current: U64 val)
: Bool val
</pre> <h4 id="parameters_3">Parameters</h4> <ul> <li>current: <a href="builtin-u64">U64</a> val</li> </ul> <h4 id="returns_5">Returns</h4> <ul> <li>
<a href="builtin-bool">Bool</a> val</li> </ul>  <h3 id="_next">_next</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/time/timer/#L111">[Source]</a></span></p> <p>Returns the next expiration time.</p> <pre>fun box _next()
: U64 val
</pre> <h4 id="returns_6">Returns</h4> <ul> <li>
<a href="builtin-u64">U64</a> val</li> </ul>  <h3 id="_abs_expiration_time">_abs_expiration_time</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/time/timer/#L117">[Source]</a></span></p> <p>Converts a wall-clock adjusted system time to absolute expiration time</p> <pre>fun tag _abs_expiration_time(
  wall: (I64 val , I64 val))
: U64 val
</pre> <h4 id="parameters_4">Parameters</h4> <ul> <li>wall: (<a href="builtin-i64">I64</a> val , <a href="builtin-i64">I64</a> val)</li> </ul> <h4 id="returns_7">Returns</h4> <ul> <li>
<a href="builtin-u64">U64</a> val</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2016-2018, The Pony Developers<br>© 2014-2015, Causality Ltd.<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://stdlib.ponylang.io/time-Timer" class="_attribution-link">https://stdlib.ponylang.io/time-Timer</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
