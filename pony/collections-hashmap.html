
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>HashMap - Pony - W3cubDocs</title>
  
  <meta name="description" content=" [Source] ">
  <meta name="keywords" content="hashmap, k, h, val, pony">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/pony/collections-hashmap.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/pony.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/pony/" class="_nav-link" title="" style="margin-left:0;">Pony</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 id="hashmap91k-k-v-v-h-hashfunction91k93-val93">HashMap[K: K, V: V, H: <a href="collections-hashfunction">HashFunction</a>[K] val]</h1> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L15">[Source]</a></span></p> <p>A quadratic probing hash map. Resize occurs at a load factor of 0.75. A resized map has 2 times the space. The hash function can be plugged in to the type to create different kinds of maps.</p> <pre>class ref HashMap[K: K, V: V, H: HashFunction[K] val]
</pre> <h2 id="constructors">Constructors</h2> <h3 id="create">create</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L24">[Source]</a></span></p> <p>Create an array with space for prealloc elements without triggering a resize. Defaults to 6.</p> <pre>new ref create(
  prealloc: USize val = 6)
: HashMap[K, V, H] ref^
</pre> <h4 id="parameters">Parameters</h4> <ul> <li>prealloc: <a href="builtin-usize">USize</a> val = 6</li> </ul> <h4 id="returns">Returns</h4> <ul> <li>
<a href="index">HashMap</a>[K, V, H] ref^</li> </ul>  <h2 id="public-functions">Public Functions</h2> <h3 id="size">size</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L33">[Source]</a></span></p> <p>The number of items in the map.</p> <pre>fun box size()
: USize val
</pre> <h4 id="returns_1">Returns</h4> <ul> <li>
<a href="builtin-usize">USize</a> val</li> </ul>  <h3 id="space">space</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L39">[Source]</a></span></p> <p>The available space in the map. Resize will happen when size / space &gt;= 0.75.</p> <pre>fun box space()
: USize val
</pre> <h4 id="returns_2">Returns</h4> <ul> <li>
<a href="builtin-usize">USize</a> val</li> </ul>  <h3 id="apply">apply</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L46">[Source]</a></span></p> <p>Gets a value from the map. Raises an error if no such item exists.</p> <pre>fun box apply(
  key: box-&gt;K!)
: this-&gt;V ?
</pre> <h4 id="parameters_1">Parameters</h4> <ul> <li>key: box-&gt;K!</li> </ul> <h4 id="returns_3">Returns</h4> <ul> <li>this-&gt;V ?</li> </ul>  <h3 id="update">update</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L58">[Source]</a></span></p> <p>Sets a value in the map. Returns the old value if there was one, otherwise returns None. If there was no previous value, this may trigger a resize.</p> <pre>fun ref update(
  key: K,
  value: V)
: (V^ | None val)
</pre> <h4 id="parameters_2">Parameters</h4> <ul> <li>key: K</li> <li>value: V</li> </ul> <h4 id="returns_4">Returns</h4> <ul> <li>(V^ | <a href="builtin-none">None</a> val)</li> </ul>  <h3 id="upsert">upsert</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L78">[Source]</a></span></p> <p>Combines a provided value with the current value for the provided key using the provided function. If the provided key has not been added to the map yet, it sets its value to the provided value and ignores the provided function.</p> <p>As a simple example, say we had a map with I64 values and we wanted to add 4 to the current value for key "test", which let's say is currently 2. We call</p> <p>m.upsert("test", 4, {(current, provided) =&gt; current + provided })</p> <p>This changes the value associated with "test" to 6.</p> <p>If we have not yet added the key "new-key" to the map and we call</p> <p>m.upsert("new-key", 4, {(current, provided) =&gt; current + provided })</p> <p>then "new-key" is added to the map with a value of 4.</p> <p>Returns the value that we set the key to</p> <pre>fun ref upsert(
  key: K,
  value: V,
  f: {(V, V): V^}[K, V, H] box)
: V
</pre> <h4 id="parameters_3">Parameters</h4> <ul> <li>key: K</li> <li>value: V</li> <li>f: {(V, V): V^}[K, V, H] box</li> </ul> <h4 id="returns_5">Returns</h4> <ul> <li>V</li> </ul>  <h3 id="insert">insert</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L132">[Source]</a></span></p> <p>Set a value in the map. Returns the new value, allowing reuse.</p> <pre>fun ref insert(
  key: K,
  value: V)
: V!
</pre> <h4 id="parameters_4">Parameters</h4> <ul> <li>key: K</li> <li>value: V</li> </ul> <h4 id="returns_6">Returns</h4> <ul> <li>V!</li> </ul>  <h3 id="insert_if_absent">insert_if_absent</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L156">[Source]</a></span></p> <p>Set a value in the map if the key doesn't already exist in the Map. Saves an extra lookup when doing a pattern like:</p> <pre>if not my_map.contains(my_key) then
  my_map(my_key) = my_value
end
</pre> <p>Returns the value, the same as <code>insert</code>, allowing 'insert_if_absent' to be used as a drop-in replacement for <code>insert</code>.</p> <pre>fun ref insert_if_absent(
  key: K,
  value: V)
: V
</pre> <h4 id="parameters_5">Parameters</h4> <ul> <li>key: K</li> <li>value: V</li> </ul> <h4 id="returns_7">Returns</h4> <ul> <li>V</li> </ul>  <h3 id="remove">remove</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L192">[Source]</a></span></p> <p>Delete a value from the map and return it. Raises an error if there was no value for the given key.</p> <pre>fun ref remove(
  key: box-&gt;K!)
: (K^ , V^) ?
</pre> <h4 id="parameters_6">Parameters</h4> <ul> <li>key: box-&gt;K!</li> </ul> <h4 id="returns_8">Returns</h4> <ul> <li>(K^ , V^) ?</li> </ul>  <h3 id="get_or_else">get_or_else</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L211">[Source]</a></span></p> <p>Get the value associated with provided key if present. Otherwise, return the provided alternate value.</p> <pre>fun box get_or_else(
  key: box-&gt;K!,
  alt: this-&gt;V)
: this-&gt;V
</pre> <h4 id="parameters_7">Parameters</h4> <ul> <li>key: box-&gt;K!</li> <li>alt: this-&gt;V</li> </ul> <h4 id="returns_9">Returns</h4> <ul> <li>this-&gt;V</li> </ul>  <h3 id="contains">contains</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L230">[Source]</a></span></p> <p>Checks whether the map contains the key k</p> <pre>fun box contains(
  k: box-&gt;K!)
: Bool val
</pre> <h4 id="parameters_8">Parameters</h4> <ul> <li>k: box-&gt;K!</li> </ul> <h4 id="returns_10">Returns</h4> <ul> <li>
<a href="builtin-bool">Bool</a> val</li> </ul>  <h3 id="concat">concat</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L237">[Source]</a></span></p> <p>Add K, V pairs from the iterator to the map.</p> <pre>fun ref concat(
  iter: Iterator[(K^ , V^)] ref)
: None val
</pre> <h4 id="parameters_9">Parameters</h4> <ul> <li>iter: <a href="builtin-iterator">Iterator</a>[(K^ , V^)] ref</li> </ul> <h4 id="returns_11">Returns</h4> <ul> <li>
<a href="builtin-none">None</a> val</li> </ul>  <h3 id="add91optional-h2-hashfunction91this-k93-val93">add[optional H2: <a href="collections-hashfunction">HashFunction</a>[this-&gt;K!] val]</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L245">[Source]</a></span></p> <p>This with the new (key, value) mapping.</p> <pre>fun box add[optional H2: HashFunction[this-&gt;K!] val](
  key: this-&gt;K!,
  value: this-&gt;V!)
: HashMap[this-&gt;K!, this-&gt;V!, H2] ref^
</pre> <h4 id="parameters_10">Parameters</h4> <ul> <li>key: this-&gt;K!</li> <li>value: this-&gt;V!</li> </ul> <h4 id="returns_12">Returns</h4> <ul> <li>
<a href="index">HashMap</a>[this-&gt;K!, this-&gt;V!, H2] ref^</li> </ul>  <h3 id="sub91optional-h2-hashfunction91this-k93-val93">sub[optional H2: <a href="collections-hashfunction">HashFunction</a>[this-&gt;K!] val]</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L257">[Source]</a></span></p> <p>This without the given key.</p> <pre>fun box sub[optional H2: HashFunction[this-&gt;K!] val](
  key: this-&gt;K!,
  value: this-&gt;V!)
: HashMap[this-&gt;K!, this-&gt;V!, H2] ref^
</pre> <h4 id="parameters_11">Parameters</h4> <ul> <li>key: this-&gt;K!</li> <li>value: this-&gt;V!</li> </ul> <h4 id="returns_13">Returns</h4> <ul> <li>
<a href="index">HashMap</a>[this-&gt;K!, this-&gt;V!, H2] ref^</li> </ul>  <h3 id="next_index">next_index</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L269">[Source]</a></span></p> <p>Given an index, return the next index that has a populated key and value. Raise an error if there is no next populated index.</p> <pre>fun box next_index(
  prev: USize val = call)
: USize val ?
</pre> <h4 id="parameters_12">Parameters</h4> <ul> <li>prev: <a href="builtin-usize">USize</a> val = call</li> </ul> <h4 id="returns_14">Returns</h4> <ul> <li>
<a href="builtin-usize">USize</a> val ?</li> </ul>  <h3 id="index">index</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L281">[Source]</a></span></p> <p>Returns the key and value at a given index. Raise an error if the index is not populated.</p> <pre>fun box index(
  i: USize val)
: (this-&gt;K , this-&gt;V) ?
</pre> <h4 id="parameters_13">Parameters</h4> <ul> <li>i: <a href="builtin-usize">USize</a> val</li> </ul> <h4 id="returns_15">Returns</h4> <ul> <li>(this-&gt;K , this-&gt;V) ?</li> </ul>  <h3 id="compact">compact</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L288">[Source]</a></span></p> <p>Minimise the memory used for the map.</p> <pre>fun ref compact()
: None val
</pre> <h4 id="returns_16">Returns</h4> <ul> <li>
<a href="builtin-none">None</a> val</li> </ul>  <h3 id="clone91optional-h2-hashfunction91this-k93-val93">clone[optional H2: <a href="collections-hashfunction">HashFunction</a>[this-&gt;K!] val]</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L294">[Source]</a></span></p> <p>Create a clone. The key and value types may be different due to aliasing and viewpoint adaptation.</p> <pre>fun box clone[optional H2: HashFunction[this-&gt;K!] val]()
: HashMap[this-&gt;K!, this-&gt;V!, H2] ref^
</pre> <h4 id="returns_17">Returns</h4> <ul> <li>
<a href="index">HashMap</a>[this-&gt;K!, this-&gt;V!, H2] ref^</li> </ul>  <h3 id="clear">clear</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L308">[Source]</a></span></p> <p>Remove all entries.</p> <pre>fun ref clear()
: None val
</pre> <h4 id="returns_18">Returns</h4> <ul> <li>
<a href="builtin-none">None</a> val</li> </ul>  <h3 id="keys">keys</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L372">[Source]</a></span></p> <p>Return an iterator over the keys.</p> <pre>fun box keys()
: MapKeys[K, V, H, this-&gt;HashMap[K, V, H] ref] ref^
</pre> <h4 id="returns_19">Returns</h4> <ul> <li>
<a href="collections-mapkeys">MapKeys</a>[K, V, H, this-&gt;<a href="index">HashMap</a>[K, V, H] ref] ref^</li> </ul>  <h3 id="values">values</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L378">[Source]</a></span></p> <p>Return an iterator over the values.</p> <pre>fun box values()
: MapValues[K, V, H, this-&gt;HashMap[K, V, H] ref] ref^
</pre> <h4 id="returns_20">Returns</h4> <ul> <li>
<a href="collections-mapvalues">MapValues</a>[K, V, H, this-&gt;<a href="index">HashMap</a>[K, V, H] ref] ref^</li> </ul>  <h3 id="pairs">pairs</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L384">[Source]</a></span></p> <p>Return an iterator over the keys and values.</p> <pre>fun box pairs()
: MapPairs[K, V, H, this-&gt;HashMap[K, V, H] ref] ref^
</pre> <h4 id="returns_21">Returns</h4> <ul> <li>
<a href="collections-mappairs">MapPairs</a>[K, V, H, this-&gt;<a href="index">HashMap</a>[K, V, H] ref] ref^</li> </ul>  <h2 id="private-functions">Private Functions</h2> <h3 id="_search">_search</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L317">[Source]</a></span></p> <p>Return a slot number and whether or not it's currently occupied.</p> <pre>fun box _search(
  key: box-&gt;K!)
: (USize val , Bool val)
</pre> <h4 id="parameters_14">Parameters</h4> <ul> <li>key: box-&gt;K!</li> </ul> <h4 id="returns_22">Returns</h4> <ul> <li>(<a href="builtin-usize">USize</a> val , <a href="builtin-bool">Bool</a> val)</li> </ul>  <h3 id="_resize">_resize</h3> <p><span class="source-link"><a href="https://stdlib.ponylang.io/src/collections/map/#L353">[Source]</a></span></p> <p>Change the available space.</p> <pre>fun ref _resize(
  len: USize val)
: None val
</pre> <h4 id="parameters_15">Parameters</h4> <ul> <li>len: <a href="builtin-usize">USize</a> val</li> </ul> <h4 id="returns_23">Returns</h4> <ul> <li>
<a href="builtin-none">None</a> val</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2016-2018, The Pony Developers<br>© 2014-2015, Causality Ltd.<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://stdlib.ponylang.io/collections-HashMap" class="_attribution-link">https://stdlib.ponylang.io/collections-HashMap</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
