
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Data.Array.Unsafe - Haskell 8 - W3cubDocs</title>
  
  <meta name="description" content=" Contains the various unsafe operations that can be performed on arrays. ">
  <meta name="keywords" content="data, array, unsafe, haskell, haskell~8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/haskell~8/libraries/array-0.5.4.0/data-array-unsafe.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/haskell~8.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/haskell~8/" class="_nav-link" title="" style="margin-left:0;">Haskell 8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _haskell">
				
				
<h1 class="caption">Data.Array.Unsafe</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th valign="top">Copyright</th>
<td>(c) The University of Glasgow 2011</td>
</tr>
<tr>
<th>License</th>
<td>BSD-style (see the file libraries/base/LICENSE)</td>
</tr>
<tr>
<th>Maintainer</th>
<td>libraries@haskell.org</td>
</tr>
<tr>
<th>Stability</th>
<td>experimental</td>
</tr>
<tr>
<th>Portability</th>
<td>non-portable (uses Data.Array.MArray)</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>None</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="table-of-contents"><div id="contents-list">
<h4 class="caption" onclick="window.scrollTo(0,0)">Contents</h4>
<ul><li><a href="#g:1">Unsafe operations</a></li></ul>
</div></div>
<div id="description">
<h4 class="caption">Description</h4>
<p>Contains the various unsafe operations that can be performed on arrays.</p>
<p><span class="version">Since: array-0.4.0.0</span></p>
</div>
<a href="#g:1" id="g:1"><h2>Unsafe operations</h2></a><p class="src"><a id="v:castSTUArray" class="def">castSTUArray</a> :: <a href="data-array-st#t:STUArray" title="Data.Array.ST">STUArray</a> s ix a -&gt; <a href="../base-4.13.0.0/control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a> s (<a href="data-array-st#t:STUArray" title="Data.Array.ST">STUArray</a> s ix b) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/array-0.5.4.0/src/Data-Array-Base.html#castSTUArray" class="link">Source</a> </p>
<p>Casts an <code><a href="data-array-st#t:STUArray" title="Data.Array.ST">STUArray</a></code> with one element type into one with a different element type. All the elements of the resulting array are undefined (unless you know what you're doing...).</p>
<p class="src"><a id="v:castIOUArray" class="def">castIOUArray</a> :: <a href="data-array-io#t:IOUArray" title="Data.Array.IO">IOUArray</a> ix a -&gt; <a href="../base-4.13.0.0/system-io#t:IO" title="System.IO">IO</a> (<a href="data-array-io#t:IOUArray" title="Data.Array.IO">IOUArray</a> ix b) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/array-0.5.4.0/src/Data-Array-IO-Internals.html#castIOUArray" class="link">Source</a> </p>
<p>Casts an <code><a href="data-array-io#t:IOUArray" title="Data.Array.IO">IOUArray</a></code> with one element type into one with a different element type. All the elements of the resulting array are undefined (unless you know what you're doing...).</p>
<p class="src"><a id="v:unsafeFreeze" class="def">unsafeFreeze</a> :: (<a href="../base-4.13.0.0/data-ix#t:Ix" title="Data.Ix">Ix</a> i, <a href="data-array-marray#t:MArray" title="Data.Array.MArray">MArray</a> a e m, <a href="data-array-iarray#t:IArray" title="Data.Array.IArray">IArray</a> b e) =&gt; a i e -&gt; m (b i e) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/array-0.5.4.0/src/Data-Array-Base.html#unsafeFreeze" class="link">Source</a> </p>
<p>Converts an mutable array into an immutable array. The implementation may either simply cast the array from one type to the other without copying the array, or it may take a full copy of the array.</p>
<p>Note that because the array is possibly not copied, any subsequent modifications made to the mutable version of the array may be shared with the immutable version. It is safe to use, therefore, if the mutable version is never modified after the freeze operation.</p>
<p>The non-copying implementation is supported between certain pairs of array types only; one constraint is that the array types must have identical representations. In GHC, The following pairs of array types have a non-copying O(1) implementation of <code><a href="data-array-unsafe#v:unsafeFreeze" title="Data.Array.Unsafe">unsafeFreeze</a></code>. Because the optimised versions are enabled by specialisations, you will need to compile with optimisation (-O) to get them.</p>
<ul>
<li>
<code><a href="data-array-io#v:IOUArray" title="Data.Array.IO">IOUArray</a></code> -&gt; <code><a href="data-array-unboxed#v:UArray" title="Data.Array.Unboxed">UArray</a></code>
</li>
<li>
<code><a href="data-array-st#v:STUArray" title="Data.Array.ST">STUArray</a></code> -&gt; <code><a href="data-array-unboxed#v:UArray" title="Data.Array.Unboxed">UArray</a></code>
</li>
<li>
<code><a href="data-array-io#v:IOArray" title="Data.Array.IO">IOArray</a></code> -&gt; <code><a href="data-array#v:Array" title="Data.Array">Array</a></code>
</li>
<li>
<code><a href="data-array-st#v:STArray" title="Data.Array.ST">STArray</a></code> -&gt; <code><a href="data-array#v:Array" title="Data.Array">Array</a></code>
</li>
</ul>
<p class="src"><a id="v:unsafeThaw" class="def">unsafeThaw</a> :: (<a href="../base-4.13.0.0/data-ix#t:Ix" title="Data.Ix">Ix</a> i, <a href="data-array-iarray#t:IArray" title="Data.Array.IArray">IArray</a> a e, <a href="data-array-marray#t:MArray" title="Data.Array.MArray">MArray</a> b e m) =&gt; a i e -&gt; m (b i e) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/array-0.5.4.0/src/Data-Array-Base.html#unsafeThaw" class="link">Source</a> </p>
<p>Converts an immutable array into a mutable array. The implementation may either simply cast the array from one type to the other without copying the array, or it may take a full copy of the array.</p>
<p>Note that because the array is possibly not copied, any subsequent modifications made to the mutable version of the array may be shared with the immutable version. It is only safe to use, therefore, if the immutable array is never referenced again in this thread, and there is no possibility that it can be also referenced in another thread. If you use an unsafeThaw<em>write</em>unsafeFreeze sequence in a multi-threaded setting, then you must ensure that this sequence is atomic with respect to other threads, or a garbage collector crash may result (because the write may be writing to a frozen array).</p>
<p>The non-copying implementation is supported between certain pairs of array types only; one constraint is that the array types must have identical representations. In GHC, The following pairs of array types have a non-copying O(1) implementation of <code><a href="data-array-unsafe#v:unsafeThaw" title="Data.Array.Unsafe">unsafeThaw</a></code>. Because the optimised versions are enabled by specialisations, you will need to compile with optimisation (-O) to get them.</p>
<ul>
<li>
<code><a href="data-array-unboxed#v:UArray" title="Data.Array.Unboxed">UArray</a></code> -&gt; <code><a href="data-array-io#v:IOUArray" title="Data.Array.IO">IOUArray</a></code>
</li>
<li>
<code><a href="data-array-unboxed#v:UArray" title="Data.Array.Unboxed">UArray</a></code> -&gt; <code><a href="data-array-st#v:STUArray" title="Data.Array.ST">STUArray</a></code>
</li>
<li>
<code><a href="data-array#v:Array" title="Data.Array">Array</a></code> -&gt; <code><a href="data-array-io#v:IOArray" title="Data.Array.IO">IOArray</a></code>
</li>
<li>
<code><a href="data-array#v:Array" title="Data.Array">Array</a></code> -&gt; <code><a href="data-array-st#v:STArray" title="Data.Array.ST">STArray</a></code>
</li>
</ul>
<p class="src"><a id="v:unsafeForeignPtrToStorableArray" class="def">unsafeForeignPtrToStorableArray</a> :: <a href="../base-4.13.0.0/data-ix#t:Ix" title="Data.Ix">Ix</a> i =&gt; <a href="../base-4.13.0.0/foreign-foreignptr-safe#t:ForeignPtr" title="Foreign.ForeignPtr.Safe">ForeignPtr</a> e -&gt; (i, i) -&gt; <a href="../base-4.13.0.0/system-io#t:IO" title="System.IO">IO</a> (<a href="data-array-storable#t:StorableArray" title="Data.Array.Storable">StorableArray</a> i e) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/array-0.5.4.0/src/Data-Array-Storable-Internals.html#unsafeForeignPtrToStorableArray" class="link">Source</a> </p>
<p>Construct a <code><a href="data-array-storable#t:StorableArray" title="Data.Array.Storable">StorableArray</a></code> from an arbitrary <code><a href="../base-4.13.0.0/foreign-foreignptr-safe#t:ForeignPtr" title="Foreign.ForeignPtr.Safe">ForeignPtr</a></code>. It is the caller's responsibility to ensure that the <code><a href="../base-4.13.0.0/foreign-foreignptr-safe#t:ForeignPtr" title="Foreign.ForeignPtr.Safe">ForeignPtr</a></code> points to an area of memory sufficient for the specified bounds.</p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/array-0.5.4.0/Data-Array-Unsafe.html" class="_attribution-link">https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/array-0.5.4.0/Data-Array-Unsafe.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
