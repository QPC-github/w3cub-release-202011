
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>love.graphics.newShader - LÖVE - W3cubDocs</title>
  
  <meta name="description" content=" Available since LÖVE 0.9.0 It has been renamed from love.graphics.newPixelEffect. ">
  <meta name="keywords" content="love, graphics, newshader, löve">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/love/love.graphics.newshader.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/love.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/love/" class="_nav-link" title="" style="margin-left:0;">LÖVE</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _love">
				
				
<h1>love.graphics.newShader</h1>
<p class="note note-green"> <b>Available since LÖVE <a href="https://love2d.org/wiki/0.9.0" title="0.9.0">0.9.0</a></b>  <br> It has been renamed from <a href="love.graphics.newpixeleffect" title="love.graphics.newPixelEffect">love.graphics.newPixelEffect</a>. </p> <p><br> </p> <p class="note">This function can be slow if it is called repeatedly, such as from <a href="love.update" title="love.update">love.update</a> or <a href="love.draw" title="love.draw">love.draw</a>. If you need to use a specific resource often, create it once and store it somewhere it can be reused! </p> <p>Creates a new Shader object for hardware-accelerated vertex and pixel effects. A Shader contains either vertex shader code, pixel shader code, or both. </p>
<p>Shaders are small programs which are run on the video card when drawing. Vertex shaders are run once for each vertex (for example, an image has 4 vertices - one at each corner. A <a href="mesh" title="Mesh">Mesh</a> might have many more.) Pixel shaders are run once for each pixel on the screen which the drawn object touches. Pixel shader code is executed after all the object's vertices have been processed by the vertex shader. </p> <h2 id="Function">Function</h2> <h3 id="Synopsis">Synopsis</h3> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">shader = love.graphics.newShader( code )</pre> <h3 id="Arguments">Arguments</h3> <dl>
<dt><code><a href="string" title="string">string</a> code</code></dt> <dd> The pixel shader or vertex shader code, or a filename pointing to a file with the code.</dd>
</dl> <h3 id="Returns">Returns</h3> <dl>
<dt><code><a href="shader" title="Shader">Shader</a> shader</code></dt> <dd> A Shader object for use in drawing operations.</dd>
</dl> <h2 id="Function_2">Function</h2> <h3 id="Synopsis_2">Synopsis</h3> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">shader = love.graphics.newShader( pixelcode, vertexcode )</pre> <h3 id="Arguments_2">Arguments</h3> <dl>
<dt><code><a href="string" title="string">string</a> pixelcode</code></dt> <dd> The pixel shader code, or a filename pointing to a file with the code.</dd> <dt><code><a href="string" title="string">string</a> vertexcode</code></dt> <dd> The vertex shader code, or a filename pointing to a file with the code.</dd>
</dl> <h3 id="Returns_2">Returns</h3> <dl>
<dt><code><a href="shader" title="Shader">Shader</a> shader</code></dt> <dd> A Shader object for use in drawing operations.</dd>
</dl> <h3 id="Notes">Notes</h3> <p>The pixelcode and vertexcode arguments can be in any order. </p> <h2 id="Shader_Language">Shader Language</h2> <p>Shaders are not programmed in Lua, but by using a special shader language instead. The shader language is basically <a rel="nofollow" class="external text" href="http://www.opengl.org/sdk/docs/manglsl/">GLSL 1.20</a> (<a rel="nofollow" class="external text" href="http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.20.8.pdf">specs</a>) with a few aliases added for existing types: </p> <table> <tr> <th>GLSL </th> <th> LÖVE shader language </th>
</tr> <tr> <td>float </td> <td> number </td>
</tr> <tr> <td>sampler2D </td> <td> Image </td>
</tr> <tr> <td>uniform </td> <td> extern </td>
</tr> <tr> <td>texture2D(tex, uv) </td> <td> Texel(tex, uv) </td>
</tr>
</table> <p>Vertex shader code must contain at least one function, named <code>position</code>, which is the function that will produce transformed vertex positions of drawn objects in screen-space. </p>
<p>Pixel shader code must contain at least one function, named <code>effect</code>, which is the function that will produce the color which is blended onto the screen for each pixel a drawn object touches. </p>
<p>Additionally, LÖVE exposes a function <code>VideoTexel(uv)</code> which yields the color value of the currently drawn video at that position. Since Videos are drawn as YUV data, in multiple textures, and then converted in the shader, the Texel function cannot be used. </p> <h2 id="Pixel_Shader_Function">Pixel Shader Function</h2> <p>When an object is drawn, the pixel shader <code>effect</code> function is called hundreds or thousands of times: once for each pixel on the screen that the object touches. The pixel shader is run after the vertex shader, if there is one. </p> <h3 id="Synopsis_3">Synopsis</h3> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">vec4 effect( vec4 color, Image texture, vec2 texture_coords, vec2 screen_coords )</pre> <h3 id="Arguments_3">Arguments</h3> <dl>
<dt><code><a href="https://love2d.org/w/index.php?title=vec4&amp;action=edit&amp;redlink=1" class="new" title="vec4 (page does not exist)">vec4</a> color</code></dt> <dd> The drawing color set with <a href="love.graphics.setcolor" title="love.graphics.setColor">love.graphics.setColor</a> or the per-vertex <a href="mesh" title="Mesh">Mesh</a> color.</dd> <dt><code><a href="image" title="Image">Image</a> texture</code></dt> <dd> The texture of the image or canvas being drawn.</dd> <dt><code><a href="https://love2d.org/w/index.php?title=vec2&amp;action=edit&amp;redlink=1" class="new" title="vec2 (page does not exist)">vec2</a> texture_coords</code></dt> <dd> The location inside the texture to get pixel data from. Texture coordinates are usually normalized to the range of (0, 0) to (1, 1), with the top-left corner being (0, 0). (Prior to LÖVE <a href="https://love2d.org/wiki/0.9.1" title="0.9.1">0.9.1</a> y-axis of canvases are inverted.)</dd> <dt><code><a href="https://love2d.org/w/index.php?title=vec2&amp;action=edit&amp;redlink=1" class="new" title="vec2 (page does not exist)">vec2</a> screen_coords</code></dt> <dd> Coordinates of the pixel on the screen. Pixel coordinates are not normalized (unlike texture coordinates). (0.5, 0.5) represents the top left of the screen (bottom left in LÖVE versions prior to <a href="https://love2d.org/wiki/0.10.0" title="0.10.0">0.10.0</a>).</dd>
</dl> <h3 id="Returns_3">Returns</h3> <dl>
<dt><code><a href="https://love2d.org/w/index.php?title=vec4&amp;action=edit&amp;redlink=1" class="new" title="vec4 (page does not exist)">vec4</a> output_color</code></dt> <dd> The color of the pixel.</dd>
</dl> <h3 id="Notes_2">Notes</h3> <p>If no pixel shader is used, LÖVE internally uses a default. This is its code: </p> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">vec4 effect(vec4 color, Image texture, vec2 texture_coords, vec2 screen_coords)
{
    vec4 texturecolor = Texel(texture, texture_coords);
    return texturecolor * color;
}</pre> <p>Or for Video </p> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">vec4 effect(vec4 color, Image texture, vec2 texture_coords, vec2 screen_coords)
{
    vec4 texturecolor = VideoTexel(texture_coords);
    return texturecolor * color;
}</pre> <p>If multiple canvases are being rendered to simultaneously (by giving multiple Canvas parameters to <a href="love.graphics.setcanvas" title="love.graphics.setCanvas">love.graphics.setCanvas</a>), you can use the <b>effects</b> function instead of <b>effect</b> in order to output a separate color to each Canvas. It has the following prototype: </p> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">void effects(vec4 color, Image texture, vec2 texture_coords, vec2 screen_coords)
{
    // love_Canvases is a writable array of vec4 colors. Each index corresponds to a Canvas. If you don't assign a value to all active canvases, bad things might happen.
    love_Canvases[0] = color;
    love_Canvases[1] = color + vec4(0.5);
    // etc.
}</pre> <h2 id="Vertex_Shader_Function">Vertex Shader Function</h2> <h3 id="Synopsis_4">Synopsis</h3> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">vec4 position( mat4 transform_projection, vec4 vertex_position )</pre> <h3 id="Arguments_4">Arguments</h3> <dl>
<dt><code><a href="https://love2d.org/w/index.php?title=mat4&amp;action=edit&amp;redlink=1" class="new" title="mat4 (page does not exist)">mat4</a> transform_projection</code></dt> <dd> The transformation matrix affected by <a href="love.graphics.translate" title="love.graphics.translate">love.graphics.translate</a> and friends combined with the orthographic projection matrix.</dd> <dt><code><a href="https://love2d.org/w/index.php?title=vec4&amp;action=edit&amp;redlink=1" class="new" title="vec4 (page does not exist)">vec4</a> vertex_position</code></dt> <dd> The raw un-transformed position of the current vertex.</dd>
</dl> <h3 id="Returns_4">Returns</h3> <dl>
<dt><code><a href="https://love2d.org/w/index.php?title=vec4&amp;action=edit&amp;redlink=1" class="new" title="vec4 (page does not exist)">vec4</a> output_pos</code></dt> <dd> The final transformed position of the current vertex.</dd>
</dl> <h3 id="Notes_3">Notes</h3> <p>If no vertex shader code is used, LÖVE uses a default. This is its code: </p> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">vec4 position(mat4 transform_projection, vec4 vertex_position)
{
    // The order of operations matters when doing matrix multiplication.
    return transform_projection * vertex_position;
}</pre> <h2 id="Notes_4">Notes</h2> <p>Vertex shader code is run for every vertex drawn to the screen (for example, love.graphics.rectangle will produce 4 vertices) and is used to transform the vertex positions from their original coordinates into screen-space, as well as to send information such as per-vertex color and texture coordinate values to the pixel shader. </p>
<p>Pixel shader code is run for every pixel on the screen that a drawn object touches, and is used to produce the color that will be blended onto the screen at that pixel, often by reading from an image. Pixel shaders are sometimes called fragment shaders. </p>
<p>The <code>varying</code> keyword can be used to set a value in the vertex shader and have it interpolated in between vertices and passed down to the pixel shader. </p>
<p>Vertex and Pixel shader code can be combined into one file or string if you wrap the vertex-specific code in <code>#ifdef VERTEX .. #endif</code> and the pixel-specific code in <code>#ifdef PIXEL .. #endif</code>. </p> <h2 id="Built-in_variables">Built-in variables</h2> <p>LÖVE provides several built-in variables for both pixel and vertex shaders. The full list can be found here: <a href="shader_variables" title="Shader Variables">Shader Variables</a>. </p> <h2 id="Examples">Examples</h2> <h3 id="Create_a_shader_using_vertex_and_pixel_shader_code_which_behaves_as_if_no_shader_is_set.">Create a shader using vertex and pixel shader code which behaves as if no shader is set.</h3> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">function love.load()
    local pixelcode = [[
        vec4 effect( vec4 color, Image texture, vec2 texture_coords, vec2 screen_coords )
        {
            vec4 texcolor = Texel(texture, texture_coords);
            return texcolor * color;
        }
    ]]
 
    local vertexcode = [[
        vec4 position( mat4 transform_projection, vec4 vertex_position )
        {
            return transform_projection * vertex_position;
        }
    ]]
 
    shader = love.graphics.newShader(pixelcode, vertexcode)
end
 
function love.draw()
    love.graphics.setShader(shader)
    -- draw things
    love.graphics.setShader()
    -- draw more things
end</pre> <h3 id="Access_the_pre-transformed_vertex_position_in_the_pixel_shader_with_the_varying_keyword.">Access the pre-transformed vertex position in the pixel shader with the <b>varying</b> keyword.</h3> <h4 id="vertex_shader_code">vertex shader code</h4> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">varying vec4 vpos;
 
vec4 position( mat4 transform_projection, vec4 vertex_position )
{
    vpos = vertex_position;
    return transform_projection * vertex_position;
}</pre> <h4 id="pixel_shader_code">pixel shader code</h4> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">varying vec4 vpos;
 
vec4 effect( vec4 color, Image texture, vec2 texture_coords, vec2 screen_coords )
{
    texture_coords += vec2(cos(vpos.x), sin(vpos.y));
    vec4 texcolor = Texel(texture, texture_coords);
    return texcolor * color;
}</pre> <h3 id="Combine_the_above_example_into_one_string_or_file_with_the_help_of_.23ifdef.">Combine the above example into one string or file with the help of <b>#ifdef</b>.</h3> <pre dir="ltr" class="mw-geshi mw-code mw-content-ltr" data-language="lua">varying vec4 vpos;
 
#ifdef VERTEX
vec4 position( mat4 transform_projection, vec4 vertex_position )
{
    vpos = vertex_position;
    return transform_projection * vertex_position;
}
#endif
 
#ifdef PIXEL
vec4 effect( vec4 color, Image texture, vec2 texture_coords, vec2 screen_coords )
{
    texture_coords += vec2(cos(vpos.x), sin(vpos.y));
    vec4 texcolor = Texel(texture, texture_coords);
    return texcolor * color;
}
#endif</pre> <h2 id="See_Also">See Also</h2> <ul>
<li> <a href="love.graphics" title="love.graphics">love.graphics</a>
</li> <li> <a href="shader" title="Shader">Shader</a>
</li> <li> <a href="love.graphics.setshader" title="love.graphics.setShader">love.graphics.setShader</a>
</li> <li> <a href="shader_variables" title="Shader Variables">Shader Variables</a>
</li>
</ul> <p><br> </p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2006–2016 LÖVE Development Team<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://love2d.org/wiki/love.graphics.newShader" class="_attribution-link">https://love2d.org/wiki/love.graphics.newShader</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
