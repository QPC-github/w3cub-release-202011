
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Codeception&#92;Stub - Codeception - W3cubDocs</title>
  
  <meta name="description" content="Instantiates a class without executing a constructor. Properties and methods can be set as a second parameter. Even protected and private properties &hellip;">
  <meta name="keywords" content="codeception, stub">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/codeception/reference/stub.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/codeception.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/codeception/" class="_nav-link" title="" style="margin-left:0;">Codeception</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _codeception">
				
				
<h1 id="codeceptionstub">Codeception\Stub</h1> <h3 id="public-static-makeclass-params--null-testcase--null">
<em>public static</em> make($class, $params = null, $testCase = null)</h3> <p>Instantiates a class without executing a constructor. Properties and methods can be set as a second parameter. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::make('User');
Stub::make('User', ['name' =&gt; 'davert']);
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::make(new User, ['name' =&gt; 'davert']);
?&gt;</pre> <p>To replace method provide it’s name as a key in second parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::make('User', ['save' =&gt; function () { return true; }]);
Stub::make('User', ['save' =&gt; true]);
?&gt;</pre> <p><strong>To create a mock, pass current testcase name as last argument:</strong></p> <pre data-language="php">&lt;?php
Stub::make('User', [
     'save' =&gt; \Codeception\Stub\Expected::once()
], $this);</pre> <ul> <li>template RealInstanceType of object</li> <li>
<code class="language-plaintext highlighter-rouge">param class-string&lt;RealInstanceType&gt;|RealInstanceType|callable(): class-string&lt;RealInstanceType&gt;</code> $class - A class to be mocked</li> <li>
<code class="language-plaintext highlighter-rouge">param array</code> $params - properties and methods to set</li> <li> <p><code class="language-plaintext highlighter-rouge">param bool|\PHPUnit\Framework\TestCase</code> $testCase</p> </li> <li>return \PHPUnit\Framework\MockObject\MockObject&amp;RealInstanceType - mock</li> <li>throws \RuntimeException when class does not exist</li> <li>throws \Exception</li> </ul> <h3 id="public-static-factoryclass-num--null-params--null">
<em>public static</em> factory($class, $num = null, $params = null)</h3> <p>Creates $num instances of class through <code class="language-plaintext highlighter-rouge">Stub::make</code>.</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">param mixed</code> $class</li> <li>
<code class="language-plaintext highlighter-rouge">param int</code> $num</li> <li> <p><code class="language-plaintext highlighter-rouge">param array</code> $params</p> </li> <li>return array</li> <li>throws \Exception</li> </ul> <h3 id="public-static-makeemptyexceptclass-method-params--null-testcase--null">
<em>public static</em> makeEmptyExcept($class, $method, $params = null, $testCase = null)</h3> <p>Instantiates class having all methods replaced with dummies except one. Constructor is not triggered. Properties and methods can be replaced. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::makeEmptyExcept('User', 'save');
Stub::makeEmptyExcept('User', 'save', ['name' =&gt; 'davert']);
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
* Stub::makeEmptyExcept(new User, 'save');
?&gt;</pre> <p>To replace method provide it’s name as a key in second parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::makeEmptyExcept('User', 'save', ['isValid' =&gt; function () { return true; }]);
Stub::makeEmptyExcept('User', 'save', ['isValid' =&gt; true]);
?&gt;</pre> <p><strong>To create a mock, pass current testcase name as last argument:</strong></p> <pre data-language="php">&lt;?php
Stub::makeEmptyExcept('User', 'validate', [
     'save' =&gt; \Codeception\Stub\Expected::once()
], $this);</pre> <ul> <li>template</li> <li>
<code class="language-plaintext highlighter-rouge">param class-string&lt;RealInstanceType&gt;|RealInstanceType|callable(): class-string&lt;RealInstanceType&gt;</code> $class - A class to be mocked</li> <li>
<code class="language-plaintext highlighter-rouge">param string</code> $method</li> <li>
<code class="language-plaintext highlighter-rouge">param array</code> $params</li> <li> <p><code class="language-plaintext highlighter-rouge">param bool|\PHPUnit\Framework\TestCase</code> $testCase</p> </li> <li>return \PHPUnit\Framework\MockObject\MockObject&amp;RealInstanceType</li> <li>throws \Exception</li> </ul> <h3 id="public-static-makeemptyclass-params--null-testcase--null">
<em>public static</em> makeEmpty($class, $params = null, $testCase = null)</h3> <p>Instantiates class having all methods replaced with dummies. Constructor is not triggered. Properties and methods can be set as a second parameter. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::makeEmpty('User');
Stub::makeEmpty('User', ['name' =&gt; 'davert']);</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::makeEmpty(new User, ['name' =&gt; 'davert']);</pre> <p>To replace method provide it’s name as a key in second parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::makeEmpty('User', ['save' =&gt; function () { return true; }]);
Stub::makeEmpty('User', ['save' =&gt; true]);</pre> <p><strong>To create a mock, pass current testcase name as last argument:</strong></p> <pre data-language="php">&lt;?php
Stub::makeEmpty('User', [
     'save' =&gt; \Codeception\Stub\Expected::once()
], $this);</pre> <ul> <li>template RealInstanceType of object</li> <li>
<code class="language-plaintext highlighter-rouge">param class-string&lt;RealInstanceType&gt;|RealInstanceType|callable(): class-string&lt;RealInstanceType&gt;</code> $class - A class to be mocked</li> <li>
<code class="language-plaintext highlighter-rouge">param array</code> $params</li> <li> <p><code class="language-plaintext highlighter-rouge">param bool|\PHPUnit\Framework\TestCase</code> $testCase</p> </li> <li>return \PHPUnit\Framework\MockObject\MockObject&amp;RealInstanceType</li> <li>throws \Exception</li> </ul> <h3 id="public-static-copyobj-params--null">
<em>public static</em> copy($obj, $params = null)</h3> <p>Clones an object and redefines it’s properties (even protected and private)</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">param</code> $obj</li> <li> <p><code class="language-plaintext highlighter-rouge">param array</code> $params</p> </li> <li>return mixed</li> <li>throws \Exception</li> </ul> <h3 id="public-static-constructclass-constructorparams--null-params--null-testcase--null">
<em>public static</em> construct($class, $constructorParams = null, $params = null, $testCase = null)</h3> <p>Instantiates a class instance by running constructor. Parameters for constructor passed as second argument Properties and methods can be set in third argument. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::construct('User', ['autosave' =&gt; false]);
Stub::construct('User', ['autosave' =&gt; false], ['name' =&gt; 'davert']);
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::construct(new User, ['autosave' =&gt; false], ['name' =&gt; 'davert']);
?&gt;</pre> <p>To replace method provide it’s name as a key in third parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::construct('User', [], ['save' =&gt; function () { return true; }]);
Stub::construct('User', [], ['save' =&gt; true]);
?&gt;</pre> <p><strong>To create a mock, pass current testcase name as last argument:</strong></p> <pre data-language="php">&lt;?php
Stub::construct('User', [], [
     'save' =&gt; \Codeception\Stub\Expected::once()
], $this);</pre> <ul> <li>template RealInstanceType of object</li> <li>
<code class="language-plaintext highlighter-rouge">param class-string&lt;RealInstanceType&gt;|RealInstanceType|callable(): class-string&lt;RealInstanceType&gt;</code> $class - A class to be mocked</li> <li>
<code class="language-plaintext highlighter-rouge">param array</code> $constructorParams</li> <li>
<code class="language-plaintext highlighter-rouge">param array</code> $params</li> <li> <p><code class="language-plaintext highlighter-rouge">param bool|\PHPUnit\Framework\TestCase</code> $testCase</p> </li> <li>return \PHPUnit\Framework\MockObject\MockObject&amp;RealInstanceType</li> <li>throws \Exception</li> </ul> <h3 id="public-static-constructemptyclass-constructorparams--null-params--null-testcase--null">
<em>public static</em> constructEmpty($class, $constructorParams = null, $params = null, $testCase = null)</h3> <p>Instantiates a class instance by running constructor with all methods replaced with dummies. Parameters for constructor passed as second argument Properties and methods can be set in third argument. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::constructEmpty('User', ['autosave' =&gt; false]);
Stub::constructEmpty('User', ['autosave' =&gt; false], ['name' =&gt; 'davert']);</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::constructEmpty(new User, ['autosave' =&gt; false], ['name' =&gt; 'davert']);</pre> <p>To replace method provide it’s name as a key in third parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::constructEmpty('User', [], ['save' =&gt; function () { return true; }]);
Stub::constructEmpty('User', [], ['save' =&gt; true]);</pre> <p><strong>To create a mock, pass current testcase name as last argument:</strong></p> <pre data-language="php">&lt;?php
Stub::constructEmpty('User', [], [
     'save' =&gt; \Codeception\Stub\Expected::once()
], $this);</pre> <ul> <li>template RealInstanceType of object</li> <li>
<code class="language-plaintext highlighter-rouge">param class-string&lt;RealInstanceType&gt;|RealInstanceType|callable(): class-string&lt;RealInstanceType&gt;</code> $class - A class to be mocked</li> <li>
<code class="language-plaintext highlighter-rouge">param array</code> $constructorParams</li> <li>
<code class="language-plaintext highlighter-rouge">param array</code> $params</li> <li> <p><code class="language-plaintext highlighter-rouge">param bool|\PHPUnit\Framework\TestCase</code> $testCase</p> </li> <li>return \PHPUnit\Framework\MockObject\MockObject&amp;RealInstanceType</li> </ul> <h3 id="public-static-constructemptyexceptclass-method-constructorparams--null-params--null-testcase--null">
<em>public static</em> constructEmptyExcept($class, $method, $constructorParams = null, $params = null, $testCase = null)</h3> <p>Instantiates a class instance by running constructor with all methods replaced with dummies, except one. Parameters for constructor passed as second argument Properties and methods can be set in third argument. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::constructEmptyExcept('User', 'save');
Stub::constructEmptyExcept('User', 'save', ['autosave' =&gt; false], ['name' =&gt; 'davert']);
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::constructEmptyExcept(new User, 'save', ['autosave' =&gt; false], ['name' =&gt; 'davert']);
?&gt;</pre> <p>To replace method provide it’s name as a key in third parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::constructEmptyExcept('User', 'save', [], ['save' =&gt; function () { return true; }]);
Stub::constructEmptyExcept('User', 'save', [], ['save' =&gt; true]);
?&gt;</pre> <p><strong>To create a mock, pass current testcase name as last argument:</strong></p> <pre data-language="php">&lt;?php
Stub::constructEmptyExcept('User', 'save', [], [
     'save' =&gt; \Codeception\Stub\Expected::once()
], $this);</pre> <ul> <li>template RealInstanceType of object</li> <li>
<code class="language-plaintext highlighter-rouge">param class-string&lt;RealInstanceType&gt;|RealInstanceType|callable(): class-string&lt;RealInstanceType&gt;</code> $class - A class to be mocked</li> <li>
<code class="language-plaintext highlighter-rouge">param string</code> $method</li> <li>
<code class="language-plaintext highlighter-rouge">param array</code> $constructorParams</li> <li>
<code class="language-plaintext highlighter-rouge">param array</code> $params</li> <li> <p><code class="language-plaintext highlighter-rouge">param bool|\PHPUnit\Framework\TestCase</code> $testCase</p> </li> <li>return \PHPUnit\Framework\MockObject\MockObject&amp;RealInstanceType</li> </ul> <h3 id="public-static-updatemock-array-params">
<em>public static</em> update($mock, array $params)</h3> <p>Replaces properties of current stub</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">param \PHPUnit\Framework\MockObject\MockObject</code> $mock</li> <li> <p><code class="language-plaintext highlighter-rouge">param array</code> $params</p> </li> <li>return mixed</li> <li>throws \LogicException</li> </ul> <h3 id="public-static-consecutive">
<em>public static</em> consecutive()</h3> <p>Stubbing a method call to return a list of values in the specified order.</p> <pre data-language="php">&lt;?php
$user = Stub::make('User', ['getName' =&gt; Stub::consecutive('david', 'emma', 'sam', 'amy')]);
$user-&gt;getName(); //david
$user-&gt;getName(); //emma
$user-&gt;getName(); //sam
$user-&gt;getName(); //amy
?&gt;</pre> <ul> <li>return ConsecutiveMap</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2011 Michael Bodnarchuk and contributors<br>Licensed under the MIT License.<br>
    <a href="https://codeception.com/docs/reference/Stub" class="_attribution-link">https://codeception.com/docs/reference/Stub</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
