
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>StreamingTemplateEngine - Groovy 3.0 - W3cubDocs</title>
  
  <meta name="description" content="Processes template source files substituting variables and expressions into placeholders in a template source text to produce the desired output &hellip;">
  <meta name="keywords" content="java, class, streamingtemplateengine, groovy, groovy~3.0">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/groovy~3.0/groovy/text/streamingtemplateengine.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c7076d7cdaddc6969cb97911f9b488459d4bebca88d6f2525f2a12432f0bec8426c751ccfbc34920dda3867e50ab24698396bc4e548e788fc826f69a158d6856.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/groovy~3.0.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/groovy~3.0/" class="_nav-link" title="" style="margin-left:0;">Groovy 3.0</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _groovy">
				
				
<h1>[Java] Class StreamingTemplateEngine</h1> <ul class="inheritance"> 

<li>groovy.text.StreamingTemplateEngine </li>
</ul> <div class="description">      <pre data-language="groovy">public class StreamingTemplateEngine
extends <a href="templateengine">TemplateEngine</a></pre> <p> Processes template source files substituting variables and expressions into placeholders in a template source text to produce the desired output using a closure based approach. This engine has equivalent functionality to the <a href="simpletemplateengine" title="SimpleTemplateEngine">SimpleTemplateEngine</a> but creates the template using writable closures making it more scalable for large templates. </p>
<p> Specifically this template engine can handle strings larger than 64k which still causes problems for the other groovy template engines. </p> <p> The template engine uses JSP style &lt;% %&gt; script and &lt;%= %&gt; expression syntax or GString style expressions. The variable '<code>out</code>' is bound to the writer that the template is being written to. </p> Frequently, the template source will be in a file but here is a simple example providing the template as a string: <pre data-language="groovy">

 def binding = [
   firstname : "Grace",
   lastname  : "Hopper",
   accepted  : true,
   title     : 'Groovy for COBOL programmers'
 ]
 def text = '''\
 Dear <code>&lt;%</code> out.print firstname <code>%&gt;</code> ${lastname},

 We <code>&lt;%</code> if (accepted) out.print 'are pleased' else out.print 'regret' <code>%&gt;</code> \
 to inform you that your paper entitled
 '$title' was ${ accepted ? 'accepted' : 'rejected' }.

 The conference committee.
 '''

 def template = new groovy.text.StreamingTemplateEngine().createTemplate(text)

 print template.make(binding)
 </pre> This example uses a mix of the JSP style and GString style placeholders but you can typically use just one style if you wish. Running this example will produce this output: <pre data-language="groovy">

 Dear Grace Hopper,

 We are pleased to inform you that your paper entitled
 'Groovy for COBOL programmers' was accepted.

 The conference committee.
 </pre> <br> <h2>StreamingTemplateEngine as a servlet engine</h2> The template engine can also be used as the engine for <a href="../servlet/templateservlet" title="TemplateServlet">TemplateServlet</a> by placing the following in your <code>web.xml</code> file (plus a corresponding servlet-mapping element): <pre data-language="groovy">

 &lt;servlet&gt;
   &lt;servlet-name&gt;StreamingTemplate&lt;/servlet-name&gt;
   &lt;servlet-class&gt;groovy.servlet.TemplateServlet&lt;/servlet-class&gt;
   &lt;init-param&gt;
     &lt;param-name&gt;template.engine&lt;/param-name&gt;
     &lt;param-value&gt;groovy.text.StreamingTemplateEngine&lt;/param-value&gt;
   &lt;/init-param&gt;
 &lt;/servlet&gt;
 </pre> In this case, your template source file should be HTML with the appropriate embedded placeholders. <h2>Debugging Template Code</h2> <p>The template engine makes an effort to throw descriptive exceptions with context lines, ie: </p>
<pre data-language="groovy">
  groovy.text.TemplateExecutionException: Template parse error at line 4:
           3: We <code>&lt;%</code> if (accepted) out.print 'are pleased' else out.print 'regret' <code>%&gt;</code> to inform you that your paper entitled
       <code>--&gt;</code> 4: '$txitle' was ${ accepted ? 'accepted' : 'rejected' }.
           5:
 at test.run(test.groovy:18)

 Caused by: groovy.lang.MissingPropertyException: No such property: txitle for class: groovy.tmp.templates.StreamingTemplateScript1
 ... 1 more
 </pre> and sanitize the exceptions to make things readable. <p>When the exceptions are not enough, it might sometimes be useful to view the actual script source generated by the template engine. This would conceptually be equivalent to viewing the .java file generated for a jsp page. The source is not currently very readable and until we get a built in groovy code pretty printer, we will probably continue to opt for compactness rather than readability.</p> <p>With that being said, viewing the source might still have some value. For this reason the script source is accessible via the template.scriptSource property, i.e.: </p>
<pre data-language="groovy">
     println template.scriptSource
 </pre> In the above example.   </div> <div class="summary">           <h2 id="constructor_summary">Constructor Summary</h2>  <table class="overviewSummary"> <caption>
<span>Constructors</span>
</caption> <tr> <th class="colFirst" scope="col">Constructor and description</th> </tr> <tr class="altColor"> <td class="colFirst"> <code><a href="#StreamingTemplateEngine()">StreamingTemplateEngine</a>
                                ()</code><br>Create a streaming template engine instance using the default class loader</td> </tr> <tr class="rowColor"> <td class="colFirst"> <code><a href="#StreamingTemplateEngine(java.lang.ClassLoader)">StreamingTemplateEngine</a>
                                (<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> parentLoader)</code><br>Create a streaming template engine instance using a custom class loader</td> </tr> </table>       <h2 id="method_summary">Methods Summary</h2>  <table class="overviewSummary"> <caption>
<span>Methods</span>
</caption> <tr> <th class="colFirst" scope="col">Type Params</th> <th class="colLast" scope="col">Return Type</th> <th class="colLast" scope="col">Name and description</th> </tr> <tr class="altColor"> <td class="colFirst"></td> <td class="colLast"><code>public <a href="template">Template</a></code></td> <td class="colLast">
<code><strong><a href="#createTemplate(java.io.Reader)">createTemplate</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Reader.html" title="Reader">Reader</a> reader)</code><br>Creates a template instance using the template source from the provided Reader.</td> </tr> </table>    <h2 id="method_summary">Inherited Methods Summary</h2>  <table class="overviewSummary"> <caption>
<span>Inherited Methods</span>
</caption> <tr> <th class="colFirst" scope="col">Methods inherited from class</th> <th class="colLast" scope="col">Name</th> </tr> <tr class="altColor"> <td class="colFirst"><code>class <a href="templateengine">TemplateEngine</a></code></td> <td class="colLast"><code><a href="templateengine#createTemplate(java.io.Reader)">createTemplate</a>, <a href="templateengine#createTemplate(java.lang.String)">createTemplate</a>, <a href="templateengine#createTemplate(java.io.File)">createTemplate</a>, <a href="templateengine#createTemplate(java.io.File,%20java.nio.charset.Charset)">createTemplate</a>, <a href="templateengine#createTemplate(java.net.URL)">createTemplate</a>, <a href="templateengine#createTemplate(java.net.URL,%20java.nio.charset.Charset)">createTemplate</a></code></td> </tr> </table>      </div> <div class="details">      <h2 id="constructor_detail">Constructor Detail</h2>    <h3 id="StreamingTemplateEngine()" class="constructor">public <strong>StreamingTemplateEngine</strong>()</h3> <p> Create a streaming template engine instance using the default class loader </p>      <h3 id="StreamingTemplateEngine(java.lang.ClassLoader)" class="constructor">public <strong>StreamingTemplateEngine</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> parentLoader)</h3> <p> Create a streaming template engine instance using a custom class loader </p>
<p>The custom loader is used when parsing the template code</p> <dl>
<dt><b>Parameters:</b></dt>
<dd>
<code>parentLoader</code> - The class loader to use when parsing the template code.</dd>
</dl>        <h2 id="method_detail">Method Detail</h2>    <h3 id="createTemplate(java.io.Reader)" class="method">@<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Override.html" title="Override">Override</a> public <a href="template">Template</a> <strong>createTemplate</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Reader.html" title="Reader">Reader</a> reader)</h3> <p> Creates a template instance using the template source from the provided Reader. The template can be applied repeatedly on different bindings to produce custom output. <strong>Technical detail</strong><br> Under the hood the returned template is represented as a four argument closure where the three first arguments are <a href="../lang/closure#curry" title="curried">curried</a> in while generating the template. <br> <br> In essence we start with a closure on the form: </p>
<pre data-language="groovy">
   { parentClass, stringSectionList, binding, out <code>-&gt;</code>
      //code generated by parsing the template data
   }
 </pre> We then curry in the parentClass and stringSectionList arguments so that the StreamingTemplate instance returned from 'createTemplate' internally contains a template closure on the form: <pre data-language="groovy">
   { binding, out <code>-&gt;</code>
      //code generated by parsing the template data
   }
 </pre> Calling <code>template.make(binding)</code>, curries in the 'binding' argument: <pre data-language="groovy">
   public Writable make(final Map map) {
     final Closure template = this.template.curry(new Object[]{map});
     return (Writable) template;
   }
 </pre> This only leaves the 'out' argument unbound. The only method on the <a href="../lang/writable" title="writable">writable</a> interface is <a href="../lang/writable#writeTo" title="writeTo(Writer out)">writeTo(Writer out)</a> so groovy rules about casting a closure to a one-method-interface apply and the above works. I.e. we return the now one argument closure as the Writable which can be serialized to System.out, a file, etc according to the Writable interface contract. <dl>
<dt><b>See Also:</b></dt>
<dd><a href="templateengine#createTemplate(java.io.Reader)" title="TemplateEngine.createTemplate">TemplateEngine.createTemplate</a></dd>
</dl>       </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2003-2020 The Apache Software Foundation<br>Licensed under the Apache license.<br>
    <a href="https://docs.groovy-lang.org/3.0.7/html/gapi/groovy/text/StreamingTemplateEngine.html" class="_attribution-link">https://docs.groovy-lang.org/3.0.7/html/gapi/groovy/text/StreamingTemplateEngine.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
