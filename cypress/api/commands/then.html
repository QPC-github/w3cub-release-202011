
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Then - Cypress - W3cubDocs</title>
  
  <meta name="description" content=" Enables you to work with the subject yielded from the previous command. ">
  <meta name="keywords" content="then, syntax, examples, notes, rules, command, log, history, see, also, cypress">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cypress/api/commands/then.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/cypress.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cypress/" class="_nav-link" title="" style="margin-left:0;">Cypress</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cypress">
				
				
<h1 class="article-title" itemprop="name">then</h1>  <div class="article-content" itemprop="articleBody"> <p>Enables you to work with the subject yielded from the previous command.</p> <blockquote class="note info">
<p><strong>Note:</strong> <code>.then()</code> assumes you are already familiar with core concepts such as <a href="https://docs.cypress.io/guides/core-concepts/variables-and-aliases.html#Closures">closures</a>.</p> </blockquote> <blockquote class="note info">
<p><strong>Note:</strong> Prefer <a href="should#Function"><code>.should()</code> with callback</a> over <code>.then()</code> for assertions as they are automatically rerun until no assertions throw within it but be aware of <a href="should#Differences">differences</a>.</p> </blockquote> <h1 id="Syntax" class="article-heading">
Syntax
</h1>
<pre class=" language-javascript" data-language="javascript">.then(callbackFn)
.then(options, callbackFn)
</pre> <h2 id="Usage" class="article-heading">
Usage
</h2>
<p><strong> Correct Usage</strong></p> <pre class=" language-javascript" data-language="javascript">cy.get('.nav').then(($nav) =&gt; {})  // Yields .nav as first arg
cy.location().then((loc) =&gt; {})   // Yields location object as first arg
</pre> <h2 id="Arguments" class="article-heading">
Arguments
</h2>
<p><strong> options</strong> <strong><em>(Object)</em></strong></p> <p>Pass in an options object to change the default behavior of <code>.then()</code>.</p> <table> <thead> <tr> <th>Option</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>timeout</code></td> <td><a href="https://docs.cypress.io/guides/references/configuration.html#Timeouts"><code>defaultCommandTimeout</code></a></td> <td>Time to wait for <code>.then()</code> to resolve before <a href="#Timeouts">timing out</a>
</td> </tr> </tbody> </table> <p><strong> callbackFn</strong> <strong><em>(Function)</em></strong></p> <p>Pass a function that takes the previously yielded subject as its first argument.</p> <h2 id="Yields" class="article-heading">
Yields 
</h2>
<p><code>.then()</code> is modeled identically to the way Promises work in JavaScript. Whatever is returned from the callback function becomes the new subject and will flow into the next command (with the exception of <code>undefined</code>).</p> <p>Additionally, the result of the last Cypress command in the callback function will be yielded as the new subject and flow into the next command if there is no <code>return</code>.</p> <p>When <code>undefined</code> is returned by the callback function, the subject will not be modified and will instead carry over to the next command.</p> <p>Just like Promises, you can return any compatible “thenable” (anything that has a <code>.then()</code> interface) and Cypress will wait for that to resolve before continuing forward through the chain of commands.</p> <h1 id="Examples" class="article-heading">
Examples
</h1>
<blockquote class="note info">
<p>We have several more examples in our <a href="https://docs.cypress.io/guides/core-concepts/variables-and-aliases.html">Core Concepts Guide</a> which go into the various ways you can use <code>.then()</code> to store, compare, and debug values.</p> </blockquote> <h2 id="DOM-element" class="article-heading">
DOM element
</h2>
<h3 id="The-button-element-is-yielded" class="article-heading">
The <code>button</code> element is yielded
</h3>
<pre class=" language-javascript" data-language="javascript">cy.get('button').then(($btn) =&gt; {
  const cls = $btn.attr('class')

  cy.wrap($btn).click().should('not.have.class', cls)
})
</pre> <h3 id="The-number-is-yielded-from-previous-command" class="article-heading">
The number is yielded from previous command
</h3>
<pre class=" language-js" data-language="javascript">cy.wrap(1).then((num) =&gt; {
  cy.wrap(num).should('equal', 1) // true
}).should('equal', 1) // true
</pre> <h2 id="Change-subject" class="article-heading">
Change subject
</h2>
<h3 id="The-el-subject-is-changed-with-another-command" class="article-heading">
The el subject is changed with another command
</h3>
<pre class=" language-javascript" data-language="javascript">cy.get('button').then(($btn) =&gt; {
  const cls = $btn.attr('class')

  cy.wrap($btn).click().should('not.have.class', cls)
    .find('i')
    // since there is no explicit return
    // the last Cypress command's yield is yielded
}).should('have.class', 'spin') // assert on i element
</pre> <h3 id="The-number-subject-is-changed-with-another-command" class="article-heading">
The number subject is changed with another command
</h3>
<pre class=" language-javascript" data-language="javascript">cy.wrap(1).then((num) =&gt; {
  cy.wrap(num)).should('equal', 1) // true
  cy.wrap(2)
}).should('equal', 2) // true
</pre> <h3 id="The-number-subject-is-changed-by-returning" class="article-heading">
The number subject is changed by returning
</h3>
<pre class=" language-javascript" data-language="javascript">cy.wrap(1).then((num) =&gt; {
  cy.wrap(num)).should('equal', 1) // true
  return 2
}).should('equal', 2) // true
</pre> <h3 id="Returning-undefined-will-not-modify-the-yielded-subject" class="article-heading">
Returning <code>undefined</code> will not modify the yielded subject
</h3>
<pre class=" language-javascript" data-language="javascript">cy.get('form')
.then(($form) =&gt; {
  console.log('form is:', $form)
  // undefined is returned here, but $form will be
  // yielded to allow for continued chaining
}).find('input').then(($input) =&gt; {
  // we have our $input element here since
  // our form element was yielded and we called
  // .find('input') on it
})
</pre> <h2 id="Promises" class="article-heading">
Promises
</h2>
<p>Cypress waits for Promises to resolve before continuing</p> <h3 id="Example-using-Q" class="article-heading">
Example using Q
</h3>
<pre class=" language-javascript" data-language="javascript">cy.get('button').click().then(($button) =&gt; {
  const p = Q.defer()

  setTimeout(() =&gt; {
    p.resolve()
  }, 1000)

  return p.promise
})
</pre> <h3 id="Example-using-bluebird" class="article-heading">
Example using bluebird
</h3>
<pre class=" language-javascript" data-language="javascript">cy.get('button').click().then(($button) =&gt; {
  return Promise.delay(1000)
})
</pre> <h3 id="Example-using-jQuery-deferred’s" class="article-heading">
Example using jQuery deferred’s
</h3>
<pre class=" language-javascript" data-language="javascript">cy.get('button').click().then(($button) =&gt; {
  const df = $.Deferred()

  setTimeout(() =&gt; {
    df.resolve()
  }, 1000)

  return df
})
</pre> <h1 id="Notes" class="article-heading">
Notes
</h1>
<h2 id="Differences" class="article-heading">
Differences
</h2>
<h3 id="What’s-the-difference-between-then-and-should-and" class="article-heading">
What’s the difference between <code>.then()</code> and <code>.should()</code>/<code>.and()</code>?
</h3>
<p>Using <code>.then()</code> allows you to use the yielded subject in a callback function and should be used when you need to manipulate some values or do some actions.</p> <p>When using a callback function with <code>.should()</code> or <code>.and()</code>, on the other hand, there is special logic to rerun the callback function until no assertions throw within it. You should be careful of side affects in a <code>.should()</code> or <code>.and()</code> callback function that you would not want performed multiple times.</p> <h1 id="Rules" class="article-heading">
Rules
</h1>
<h2 id="Requirements" class="article-heading">
Requirements 
</h2>
<ul> <li><p><code>.then()</code> requires being chained off a previous command.</p></li> </ul> <h2 id="Assertions" class="article-heading">
Assertions 
</h2>
<ul> <li><p><code>.then()</code> will only run assertions you've chained once, and will not <a href="https://docs.cypress.io/guides/core-concepts/retry-ability.html">retry</a>.</p></li> </ul> <h2 id="Timeouts" class="article-heading">
Timeouts 
</h2>
<ul> <li><p><code>.then()</code> can time out waiting for a promise you've returned to resolve.</p></li> </ul> <h1 id="Command-Log" class="article-heading">
Command Log
</h1>
<ul> <li>
<code>.then()</code> does <em>not</em> log in the Command Log</li> </ul> <h1 id="History" class="article-heading">History
</h1>
<table> <thead> <tr> <th>Version</th> <th>Changes</th> </tr> </thead> <tbody> <tr> <td><a href="https://docs.cypress.io/guides/references/changelog.html#0-14-0">0.14.0</a></td> <td>Added <code>timeout</code> option</td> </tr> <tr> <td><a href="https://docs.cypress.io/guides/references/changelog.html#0-3-3">&lt; 0.3.3</a></td> <td>
<code>.then()</code> command added</td> </tr> </tbody> </table> <h1 id="See-also" class="article-heading">
See also
</h1>
<ul> <li><a href="and"><code>.and()</code></a></li> <li><a href="each"><code>.each()</code></a></li> <li><a href="invoke"><code>.invoke()</code></a></li> <li><a href="its"><code>.its()</code></a></li> <li><a href="should"><code>.should()</code></a></li> <li><a href="spread"><code>.spread()</code></a></li> <li><a href="https://docs.cypress.io/guides/core-concepts/variables-and-aliases.html#Closures">Guide: Using Closures to compare values</a></li> <li>
<a href="https://docs.cypress.io/guides/core-concepts/introduction-to-cypress.html#Chains-of-Commands">Guide: Chains of Commands</a> </li> </ul> </div> <div class="_attribution">
  <p class="_attribution-p">
    © 2020 Cypress.io<br>Licensed under the MIT License.<br>
    <a href="https://docs.cypress.io/api/commands/then.html" class="_attribution-link">https://docs.cypress.io/api/commands/then.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
