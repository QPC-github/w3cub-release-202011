
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Cypress.Screenshot - Cypress - W3cubDocs</title>
  
  <meta name="description" content="The Screenshot API allows you set defaults for how screenshots are captured during .screenshot and automatic screenshots taken during test failures &hellip;">
  <meta name="keywords" content="cypress, screenshot, syntax, examples, notes, see, also">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cypress/api/cypress-api/screenshot-api.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/cypress.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cypress/" class="_nav-link" title="" style="margin-left:0;">Cypress</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cypress">
				
				
<h1 class="article-title" itemprop="name">Cypress.Screenshot</h1>  <div class="article-content" itemprop="articleBody"> <p>The Screenshot API allows you set defaults for how screenshots are captured during <a href="../commands/screenshot"><code>.screenshot</code></a> and automatic screenshots taken during test failures. You can set defaults for the following:</p> <ul> <li>Which parts of the screen to capture.</li> <li>Whether to scale your application under test in the screenshot.</li> <li>Whether to disable JavaScript timers and CSS animations when taking the screenshot.</li> <li>Whether to automatically take screenshots when there are run failures.</li> <li>Which, if any, elements to black out when taking the screenshot.</li> <li>Whether to wait for the Command Log to synchronize before taking the screenshot.</li> </ul> <h1 id="Syntax" class="article-heading">
Syntax
</h1>
<pre class=" language-javascript" data-language="javascript">Cypress.Screenshot.defaults(options)
</pre> <h2 id="Arguments" class="article-heading">
Arguments
</h2>
<p><strong> options</strong> <strong><em>(Object)</em></strong></p> <p>An object containing one or more of the following:</p> <table> <thead> <tr> <th>Option</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>blackout</code></td> <td><code>[]</code></td> <td>Array of string selectors used to match elements that should be blacked out when the screenshot is taken. Does not apply to <code>runner</code> captures.</td> </tr> <tr> <td><code>capture</code></td> <td><code>'fullPage'</code></td> <td>Which parts of the Test Runner to capture. This value is ignored for element screenshot captures. Valid values are <code>viewport</code>, <code>fullPage</code>, or <code>runner</code>. When <code>viewport</code>, your application under test is captured in the current viewport. When <code>fullPage</code>, your application under test is captured in its entirety from top to bottom. When <code>runner</code>, the entire browser viewport, including the Cypress Command Log, is captured. For screenshots automatically taken on test failure, capture is always coerced to <code>runner</code>.</td> </tr> <tr> <td><code>disableTimersAndAnimations</code></td> <td><code>true</code></td> <td>When true, prevents JavaScript timers (<code>setTimeout</code>, <code>setInterval</code>, etc) and CSS animations from running while the screenshot is taken.</td> </tr> <tr> <td><code>scale</code></td> <td><code>false</code></td> <td>Whether to scale the app to fit into the browser viewport. This is always coerced to <code>true</code> for <code>runner</code> captures.</td> </tr> <tr> <td><code>screenshotOnRunFailure</code></td> <td><code>true</code></td> <td>When true, automatically takes a screenshot when there is a failure during <code>cypress run</code>.</td> </tr> <tr> <td><code>onBeforeScreenshot</code></td> <td><code>null</code></td> <td>A callback before a (non-failure) screenshot is taken. For an element capture, the argument is the element being captured. For other screenshots, the argument is the <code>$el</code>.</td> </tr> <tr> <td><code>onAfterScreenshot</code></td> <td><code>null</code></td> <td>A callback after a (non-failure) screenshot is taken. For an element capture, the first argument is the element being captured. For other screenshots, the first argument is the <code>$el</code>. The second argument is properties concerning the screenshot, including the path it was saved to and the dimensions of the saved screenshot.</td> </tr> </tbody> </table> <h1 id="Examples" class="article-heading">
Examples
</h1>
<h2 id="Blackout-elements-before-screenshot" class="article-heading">
Blackout elements before screenshot
</h2>
<p>Elements that match the specified selectors will be blacked out from the screenshot, but only when the <code>capture</code> option is <code>viewport</code>. <code>blackout</code> is ignored if <code>capture</code> option is <code>runner</code>.</p> <pre class=" language-javascript" data-language="javascript">Cypress.Screenshot.defaults({
  blackout: ['.secret-info', '[data-hide=true]']
})
</pre> <h2 id="Take-a-screenshot-of-the-entire-Test-Runner" class="article-heading">
Take a screenshot of the entire Test Runner
</h2>
<p>By default, <a href="../commands/screenshot"><code>cy.screenshot()</code></a> only captures your application under test. You may want it to capture the entire Test Runner for debugging purposes.</p> <pre class=" language-javascript" data-language="javascript">Cypress.Screenshot.defaults({
  capture: 'runner'
})
</pre> <h2 id="Allow-timers-and-animations-to-keep-running" class="article-heading">
Allow timers and animations to keep running
</h2>
<p>By default, JavaScript timers and CSS animations are disabled to try to prevent changes to your application under test while the screenshot is taken, but you can turn off this behavior.</p> <pre class=" language-javascript" data-language="javascript">Cypress.Screenshot.defaults({
  disableTimersAndAnimations: false
})
</pre> <h2 id="Disable-screenshots-on-run-failures" class="article-heading">
Disable screenshots on run failures
</h2>
<p>By default, Cypress automatically takes a screenshot when there is a failure when running <code>cypress run</code>, but you can disable this.</p> <pre class=" language-javascript" data-language="javascript">Cypress.Screenshot.defaults({
  screenshotOnRunFailure: false
})
</pre> <h2 id="Scale-viewport-and-fullPage-captures" class="article-heading">
Scale <code>viewport</code> and <code>fullPage</code> captures
</h2>
<p>By default, scaling the application under test is turned off during when the <code>capture</code> option is <code>viewport</code> to prevent differences between screenshots on screens with different resolutions. You can turn scaling on and have your app scaled like it is during normal use of Cypress. This is always coerced to <code>true</code> if the <code>capture</code> option is <code>runner</code>.</p> <pre class=" language-javascript" data-language="javascript">Cypress.Screenshot.defaults({
  scale: true
})
</pre> <h2 id="Change-the-DOM-using-onBeforeScreenshot-and-onAfterScreenshot" class="article-heading">
Change the DOM using <code>onBeforeScreenshot</code> and <code>onAfterScreenshot</code>
</h2>
<p>The <code>onBeforeScreenshot</code> and <code>onAfterScreenshot</code> callbacks provide an opportunity to synchronously change the DOM to create a more consistent state for the screenshot.</p> <p>In this example, imagine there is a clock in your app showing the current time. This can cause screenshots to be non-deterministic, which could create false negatives when screenshot diffing. You can use <code>onBeforeScreenshot</code> to hide the clock and then show it again with <code>onAfterScreenshot</code>.</p> <pre class=" language-javascript" data-language="javascript">Cypress.Screenshot.defaults({
  onBeforeScreenshot ($el) {
    const $clock = $el.find('.clock')

    if ($clock) {
      $clock.hide()
    }
  },

  onAfterScreenshot ($el, props) {
    const $clock = $el.find('.clock')

    if ($clock) {
      $clock.show()
    }
  },
})
</pre> <h2 id="Get-properties-from-the-onAfterScreenshot-callback" class="article-heading">
Get properties from the <code>onAfterScreenshot</code> callback
</h2>
<pre class=" language-javascript" data-language="javascript">Cypress.Screenshot.defaults({
  onAfterScreenshot ($el, props) {
    // props has information about the screenshot,
    // including but not limited to the following:

    // {
    //   path: '/Users/janelane/project/screenshots/my-screenshot.png',
    //   size: '15 kb',
    //   dimensions: {
    //     width: 1000,
    //     height: 660,
    //   },
    //   scaled: true,
    //   blackout: ['.foo'],
    //   duration: 2300,
    // }
  },
})
</pre> <h1 id="Notes" class="article-heading">
Notes
</h1>
<h3 id="Where-to-put-screenshot-configuration" class="article-heading">
Where to put screenshot configuration
</h3>
<p>A great place to put this configuration is in your <a href="https://docs.cypress.io/guides/core-concepts/writing-and-organizing-tests.html#Support-file"><code>cypress/support/index.js</code> file</a>, since it is loaded before any test files are evaluated.</p> <h1 id="See-also" class="article-heading">
See also
</h1>
<ul> <li><a href="../commands/screenshot"><code>cy.screenshot()</code></a></li> <li><a href="https://docs.cypress.io/guides/dashboard/introduction.html">Dashboard Service</a></li> <li><a href="https://docs.cypress.io/guides/guides/screenshots-and-videos.html">Screenshots and Videos</a></li> <li>
<a href="https://docs.cypress.io/guides/tooling/visual-testing.html">Visual Testing</a> </li> </ul> </div> <div class="_attribution">
  <p class="_attribution-p">
    © 2020 Cypress.io<br>Licensed under the MIT License.<br>
    <a href="https://docs.cypress.io/api/cypress-api/screenshot-api.html" class="_attribution-link">https://docs.cypress.io/api/cypress-api/screenshot-api.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
