
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Function - Fish 3.1 - W3cubDocs</title>
  
  <meta name="description" content=" function creates a new function NAME with the body BODY. ">
  <meta name="keywords" content="function, create, fish, fish~3.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/fish~3.1/cmds/function.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/fish~3.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/fish~3.1/" class="_nav-link" title="" style="margin-left:0;">Fish 3.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 id="cmd-function">function - create a function</h1>  <h2 id="function-create-a-function">Synopsis</h2> <pre data-language="fish">function NAME [OPTIONS]; BODY; end
</pre>   <h2 id="description">Description</h2> <p><code>function</code> creates a new function <code>NAME</code> with the body <code>BODY</code>.</p> <p>A function is a list of commands that will be executed when the name of the function is given as a command.</p> <p>The following options are available:</p> <ul class="simple"> <li>
<code>-a NAMES</code> or <code>--argument-names NAMES</code> assigns the value of successive command-line arguments to the names given in NAMES.</li> <li>
<code>-d DESCRIPTION</code> or <code>--description=DESCRIPTION</code> is a description of what the function does, suitable as a completion description.</li> <li>
<code>-w WRAPPED_COMMAND</code> or <code>--wraps=WRAPPED_COMMAND</code> causes the function to inherit completions from the given wrapped command. See the documentation for <a class="reference internal" href="complete#cmd-complete"><span class="std std-ref">complete</span></a> for more information.</li> <li>
<code>-e</code> or <code>--on-event EVENT_NAME</code> tells fish to run this function when the specified named event is emitted. Fish internally generates named events e.g. when showing the prompt.</li> <li>
<code>-v</code> or <code>--on-variable VARIABLE_NAME</code> tells fish to run this function when the variable VARIABLE_NAME changes value.</li> <li>
<code>-j PGID</code> or <code>--on-job-exit PGID</code> tells fish to run this function when the job with group ID PGID exits. Instead of PGID, the string 'caller' can be specified. This is only legal when in a command substitution, and will result in the handler being triggered by the exit of the job which created this command substitution.</li> <li>
<code>-p PID</code> or <code>--on-process-exit PID</code> tells fish to run this function when the fish child process with process ID PID exits. Instead of a PID, for backward compatibility, "<code>%self</code>" can be specified as an alias for <code>$fish_pid</code>, and the function will be run when the current fish instance exits.</li> <li>
<code>-s</code> or <code>--on-signal SIGSPEC</code> tells fish to run this function when the signal SIGSPEC is delivered. SIGSPEC can be a signal number, or the signal name, such as SIGHUP (or just HUP).</li> <li>
<code>-S</code> or <code>--no-scope-shadowing</code> allows the function to access the variables of calling functions. Normally, any variables inside the function that have the same name as variables from the calling function are "shadowed", and their contents is independent of the calling function. It's important to note that this does not capture referenced variables or the scope at the time of function declaration! At this time, fish does not have any concept of closures, and variable lifetimes are never extended. In other words, by using <code>--no-scope-shadowing</code> the scope of the function each time it is run is shared with the scope it was <em>called</em> from rather than the scope it was <em>defined</em> in.</li> <li>
<code>-V</code> or <code>--inherit-variable NAME</code> snapshots the value of the variable <code>NAME</code> and defines a local variable with that same name and value when the function is defined. This is similar to a closure in other languages like Python but a bit different. Note the word "snapshot" in the first sentence. If you change the value of the variable after defining the function, even if you do so in the same scope (typically another function) the new value will not be used by the function you just created using this option. See the <code>function notify</code> example below for how this might be used.</li> </ul> <p>If the user enters any additional arguments after the function, they are inserted into the environment <a class="reference internal" href="../index#variables-lists"><span class="std std-ref">variable list</span></a> <code>$argv</code>. If the <code>--argument-names</code> option is provided, the arguments are also assigned to names specified in that option.</p> <p>By using one of the event handler switches, a function can be made to run automatically at specific events. The user may generate new events using the <a class="reference internal" href="emit#cmd-emit"><span class="std std-ref">emit</span></a> builtin. Fish generates the following named events:</p> <ul> <li>
<code>fish_prompt</code>, which is emitted whenever a new fish prompt is about to be displayed. </li> <li>
<code>fish_command_not_found</code>, which is emitted whenever a command lookup failed. </li> <li>
<p class="first"><code>fish_preexec</code>, which is emitted right before executing an interactive command. The commandline is passed as the first parameter.</p> <p>Note: This event will be emitted even if the command is invalid. The commandline parameter includes the entire commandline verbatim, and may potentially include newlines.</p> </li> <li>
<p class="first"><code>fish_postexec</code>, which is emitted right after executing an interactive command. The commandline is passed as the first parameter.</p> <p>Note: This event will be emitted even if the command is invalid. The commandline parameter includes the entire commandline verbatim, and may potentially include newlines.</p> </li> <li>
<code>fish_exit</code> is emitted right before fish exits. </li> <li>
<code>fish_cancel</code>, which is emitted when a commandline is cleared (used for terminal-shell integration). </li> </ul>   <h2 id="example">Example</h2> <pre data-language="fish">function ll
    ls -l $argv
end
</pre> <p>will run the <code>ls</code> command, using the <code>-l</code> option, while passing on any additional files and switches to <code>ls</code>.</p> <pre data-language="fish">function mkdir -d "Create a directory and set CWD"
    command mkdir $argv
    if test $status = 0
        switch $argv[(count $argv)]
            case '-*'

            case '*'
                cd $argv[(count $argv)]
                return
        end
    end
end
</pre> <p>This will run the <code>mkdir</code> command, and if it is successful, change the current working directory to the one just created.</p> <pre data-language="fish">function notify
    set -l job (jobs -l -g)
    or begin; echo "There are no jobs" &gt;&amp;2; return 1; end

    function _notify_job_$job --on-job-exit $job --inherit-variable job
        echo -n \a # beep
        functions -e _notify_job_$job
    end
end
</pre> <p>This will beep when the most recent job completes.</p>   <h2 id="notes">Notes</h2> <p>Note that events are only received from the current fish process as there is no way to send events from one fish process to another.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 fish-shell developers<br>Licensed under the GNU General Public License, version 2.<br>
    <a href="https://fishshell.com/docs/3.1/cmds/function.html" class="_attribution-link">https://fishshell.com/docs/3.1/cmds/function.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
