
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>RTCPeerConnection.restartIce - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="The WebRTC API&#39;s RTCPeerConnection interface offers the restartIce() method to allow a web application to easily request that ICE candidate &hellip;">
  <meta name="keywords" content="rtcpeerconnection, restartice, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/rtcpeerconnection/restartice.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>RTCPeerConnection.restartIce()</h1>
<p> The <a href="../webrtc_api">WebRTC</a> API's <a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a> interface offers the <code>restartIce()</code> method to allow a web application to easily request that <a href="https://developer.mozilla.org/en-US/docs/Glossary/ICE">ICE</a> candidate gathering be redone on both ends of the connection. This simplifies the process by allowing the same method to be used by either the caller or the receiver to trigger an ICE restart. </p> <p> After <code>restartIce()</code> returns, the offer returned by the next call to <a href="createoffer"><code>createOffer()</code></a> is automatically configured to trigger ICE restart on both the local peer (once the local peer has been set) and on the remote peer, once the offer is sent across your signaling mechanism and the remote peer has set its description as well. </p> <p> <code>restartIce()</code> causes the <a href="negotiationneeded_event"><code>negotiationneeded</code></a> event to be fired on the <code>RTCPeerConnection</code> to inform the application that it should perform negotiation using its signaling channel. </p> <p> If negotiation fails to complete—either due to rollback or because incoming offers are in the process of being negotiated—the <a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a> will remember that you requested ICE restart. The next time the connection's <a href="signalingstate"><code>signalingState</code></a> changes to <code>stable</code>, the connection will fire the <a href="negotiationneeded_event"><code>negotiationneeded</code></a> event. This process continues until an ICE restart has been successfully completed. </p>
<h2 id="syntax">Syntax</h2>
<div class="code-example"><pre data-language="js">rtcPeerConnection<span class="token punctuation">.</span><span class="token function">restartIce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
<h3 id="parameters">Parameters</h3>
<p>None.</p>
<h3 id="return_value">Return value</h3>
<p><code>undefined</code>.</p>
<h2 id="usage_notes">Usage notes</h2>
<p> After calling <code>restartIce()</code>, the next offer created using <a href="createoffer"><code>createOffer()</code></a> will initiate ICE restart once sent to the remote peer over your signaling mechanism. Restarting ICE essentially resets ICE so that it creates all new candidates using new credentials. Existing media transmissions continue uninterrupted during this process. </p> <p> For details about how ICE restart works, see <a href="../webrtc_api/session_lifetime#ice_restart">ICE restart</a> in <a href="../webrtc_api/session_lifetime">Lifetime of a WebRTC session</a> and <a href="https://datatracker.ietf.org/doc/html/rfc5245#section-9.1.1.1" rel=" noopener">RFC 5245, section 9.1.1.1: ICE specification</a>. </p>
<h2 id="example">Example</h2>
<p> This example creates a handler for the <a href="iceconnectionstatechange_event"><code>iceconnectionstatechange</code></a> event that handles a transition to the <code>failed</code> state by restarting ICE in order to try again. </p> <div class="code-example"><pre data-language="js">pc<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"iceconnectionstatechange"</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pc<span class="token punctuation">.</span>iceConnectionState <span class="token operator">===</span> <span class="token string">"failed"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* possibly reconfigure the connection in some way here */</span>
    <span class="token comment">/* then request ICE restart */</span>
    pc<span class="token punctuation">.</span><span class="token function">restartIce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p> With this code in place, a transition to the <code>failed</code> state during ICE negotiation will cause a <a href="negotiationneeded_event"><code>negotiationneeded</code></a> event to be fired, in response to which your code should renegotiate as usual. However, because you have called <code>restartIce()</code>, your call to <a href="createoffer"><code>createOffer()</code></a> which occurs in the handler for <code>negotiationneeded</code> will trigger an ICE restart rather than just a regular renegotiation. </p>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-restartice">WebRTC 1.0: Real-Time Communication Between Browsers (WebRTC 1.0)<br><small># dom-rtcpeerconnection-restartice</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>restartIce</code></th>
<td class="bc-supports-yes"><div>77</div></td>
<td class="bc-supports-yes"><div>79</div></td>
<td class="bc-supports-yes"><div>70</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>14.1</div></td>
<td class="bc-supports-yes"><div>77</div></td>
<td class="bc-supports-yes"><div>77</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>55</div></td>
<td class="bc-supports-yes"><div>14.5</div></td>
<td class="bc-supports-yes"><div>12.0</div></td>
</tr></tbody>
</table>
<h2 id="see_also">See also</h2>
<ul> <li><a href="../webrtc_api">WebRTC API</a></li> <li><a href="../webrtc_api/session_lifetime">Lifetime of a WebRTC session</a></li> <li><a href="../webrtc_api/signaling_and_video_calling">Signaling and video calling</a></li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2021 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/restartIce" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/restartIce</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
