
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Document.caretRangeFromPoint - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="Non-standard&#58; This feature is non-standard and is not on a standards track. Do not use it on production sites facing the Web&#58; it will not &hellip;">
  <meta name="keywords" content="document, caretrangefrompoint, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/document/caretrangefrompoint.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/dom.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>Document.caretRangeFromPoint()</h1>
<div class="notecard warning"><p><strong>Non-standard:</strong> This feature is non-standard and is not on a standards track. Do not use it on production sites facing the Web: it will not work for every user. There may also be large incompatibilities between implementations and the behavior may change in the future.</p></div> <p> The <code>caretRangeFromPoint()</code> method of the <a href="../document"><code>Document</code></a> interface returns a <a href="../range"><code>Range</code></a> object for the document fragment under the specified coordinates. </p>
<h2 id="syntax">Syntax</h2>
<div class="code-example"><pre data-language="js"><span class="token keyword">var</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">caretRangeFromPoint</span><span class="token punctuation">(</span>float x<span class="token punctuation">,</span> float y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
<h3 id="parameters">Parameters</h3>
<dl> <dt><em>x</em></dt> <dd> <p>A horizontal position within the current viewport.</p> </dd> <dt><em>y</em></dt> <dd> <p>A vertical position within the current viewport.</p> </dd> </dl>
<h3 id="returns">Returns</h3>
<p>One of the following:</p> <ul> <li>A <a href="../range"><code>Range</code></a>.</li> <li> <code>Null</code>, if <em>x</em> or <em>y</em> are negative, outside viewport, or there is no text entry node. </li> </ul>
<h2 id="example">Example</h2>
<p>Click anywhere in the <strong>Demo</strong> paragraph below to insert a line break at the point where you click. The code for it is below the demo.</p>
<h3 id="demo">Demo</h3>
<iframe class="sample-code-frame" title="Example sample" id="frame_Example" width="100%" height="100px" src="https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/Document/caretRangeFromPoint/_sample_.Example.html" loading="lazy"></iframe> <p>The code below first checks for <code>document.caretRangeFromPoint</code> support, but if the browser doesnâ€™t support that, the code then checks for <a href="caretpositionfrompoint"><code>document.caretPositionFromPoint</code></a>, and uses that instead.</p>
<h3 id="javascript">JavaScript</h3>
<div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">insertBreakAtPoint</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> range<span class="token punctuation">;</span>
  <span class="token keyword">let</span> textNode<span class="token punctuation">;</span>
  <span class="token keyword">let</span> offset<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>caretRangeFromPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">caretRangeFromPoint</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    textNode <span class="token operator">=</span> range<span class="token punctuation">.</span>startContainer<span class="token punctuation">;</span>
    offset <span class="token operator">=</span> range<span class="token punctuation">.</span>startOffset<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>caretPositionFromPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">caretPositionFromPoint</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    textNode <span class="token operator">=</span> range<span class="token punctuation">.</span>offsetNode<span class="token punctuation">;</span>
    offset <span class="token operator">=</span> range<span class="token punctuation">.</span>offset<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"[This browser supports neither"</span>
      <span class="token operator">+</span> <span class="token string">" document.caretRangeFromPoint"</span>
      <span class="token operator">+</span> <span class="token string">" nor document.caretPositionFromPoint.]"</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Only split TEXT_NODEs</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>textNode <span class="token operator">&amp;&amp;</span> textNode<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> replacement <span class="token operator">=</span> textNode<span class="token punctuation">.</span><span class="token function">splitText</span><span class="token punctuation">(</span>offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> br <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'br'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    textNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>br<span class="token punctuation">,</span> replacement<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> paragraphs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> paragraphs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  paragraphs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> insertBreakAtPoint<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div>
<h3 id="html">HTML</h3>
<div class="code-example"><pre data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat,
sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.
Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</pre></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>caretRangeFromPoint</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>â‰¤37</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>14</div></td>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr></tbody>
</table>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2005â€“2021 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/caretRangeFromPoint" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Document/caretRangeFromPoint</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
