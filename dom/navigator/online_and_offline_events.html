
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Navigator.Online and Offline Events - Web APIs - W3cubDocs</title>
  
  <meta name="description" content=" Some browsers implement Online&#47;Offline events from the WHATWG Web Applications 1.0 specification. ">
  <meta name="keywords" content="online, and, offline, events, navigator, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/navigator/online_and_offline_events.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/dom.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>Online and offline events</h1>
<p>Some browsers implement <a href="https://www.whatwg.org/specs/web-apps/current-work/#offline" rel=" noopener">Online/Offline events</a> from the <a href="https://www.whatwg.org/specs/web-apps/current-work/" rel=" noopener">WHATWG Web Applications 1.0 specification</a>.</p>
<h2 id="overview">Overview</h2>
<p>In order to build a good offline-capable web application, you need to know when your application is actually offline. You also need to know when your application has returned to an 'online' status again. Effectively, the requirements break down as such:</p> <ol> <li>You need to know when the user comes back online, so that you can re-synchronize with the server.</li> <li>You need to know when the user is offline, so that you can queue your server requests for a later time.</li> </ol> <p>It is this process that online/offline events help to simplify.</p> <p>Unfortunately, these events aren't fully reliable. If you need greater reliability, or if the API isn't implemented in the browser, you can use other signals to detect if you are offline including using service workers and <a href="https://www.html5rocks.com/en/mobile/workingoffthegrid.html#toc-xml-http-request" rel=" noopener">responses from XMLHttpRequest</a>.</p>
<h2 id="api">API</h2>
<h3 id="navigator.online"><code>navigator.onLine</code></h3>
<p><a href="online"><code>navigator.onLine</code></a> is a property that maintains a <code>true</code>/<code>false</code> value (<code>true</code> for online, <code>false</code> for offline).</p> <p>This property is updated whenever the user switches into "Offline Mode" (File â†’ Work Offline in Firefox). Additionally, this property should update whenever a browser is no longer capable of connecting to the network. According to the <a href="https://www.whatwg.org/specs/web-apps/current-work/#offline" rel=" noopener">specification</a>:</p> <blockquote> <p>The <code>navigator.onLine</code> attribute must return false if the user agent will not contact the network when the user follows links or when a script requests a remote page (or knows that such an attempt would fail)...</p> </blockquote> <p>Firefox 2 updates this property when switching to/from the browser's Offline mode. <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/41#miscellaneous">Firefox 41</a> updates this property also when the OS reports a change in network connectivity on Windows, Linux, and OS X.</p> <p>This property existed in older versions of Firefox and Internet Explorer (the specification based itself off of these prior implementations), so you can begin using it immediately. Network status autodetection was implemented in Firefox 2.</p>
<h3 id="online_and_offline_events">"<code>online</code>" and "<code>offline</code>" events</h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/3">Firefox 3</a> introduces two new events: "<a href="../document/ononline"><code>online</code></a>" and "<a href="../document/onoffline"><code>offline</code></a>". These two events are fired on the <code>&lt;body&gt;</code> of each page when the browser switches between online and offline mode. Additionally, the events bubble up from <code>document.body</code>, to <code>document</code>, ending at <code>window</code>. Both events are non-cancellable (you can't prevent the user from coming online, or going offline).</p> <p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/41#miscellaneous">Firefox 41</a> fires these events when the OS reports a change in network connectivity on Windows, Linux, and OS X.</p> <p>You can register listeners for these events in a few familiar ways:</p> <ul> <li>using <a href="../eventtarget/addeventlistener"><code>addEventListener</code></a> on the <code>window</code>, <code>document</code>, or <code>document.body</code>
</li> <li>by setting the <code>.ononline</code> or <code>.onoffline</code> properties on <code>document</code> or <code>document.body</code> to a JavaScript <code>Function</code> object. (<strong>Note:</strong> using <code>window.ononline</code> or <code>window.onoffline</code> will not work for compatibility reasons.)</li> <li>by specifying <code>ononline="..."</code> or <code>onoffline="..."</code> attributes on the <code>&lt;body&gt;</code> tag in the HTML markup.</li> </ul>
<h2 id="example">Example</h2>
<p>There's <a href="https://bugzilla.mozilla.org/attachment.cgi?id=220609" rel=" noopener">a simple test case</a> that you can run to verify that the events are working (does not work in Chrome due to attaching the event listener to document.body).</p> <p>Here's the JavaScript part:</p> <div class="code-example"><pre data-language="js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> status <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> log <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"log"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">updateOnlineStatus</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> condition <span class="token operator">=</span> navigator<span class="token punctuation">.</span>onLine <span class="token operator">?</span> <span class="token string">"online"</span> <span class="token operator">:</span> <span class="token string">"offline"</span><span class="token punctuation">;</span>

    status<span class="token punctuation">.</span>className <span class="token operator">=</span> condition<span class="token punctuation">;</span>
    status<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> condition<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    log<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">"beforeend"</span><span class="token punctuation">,</span> <span class="token string">"Event: "</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>type <span class="token operator">+</span> <span class="token string">"; Status: "</span> <span class="token operator">+</span> condition<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span>  updateOnlineStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> updateOnlineStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>A touch of CSS</p> <div class="code-example"><pre data-language="css"><span class="token selector">#status</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">font</span><span class="token punctuation">:</span> bold 1em sans-serif<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #FFF<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#log</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 2.5em 0.5em 0.5em<span class="token punctuation">;</span>
  <span class="token property">font</span><span class="token punctuation">:</span> 1em sans-serif<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.online</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.offline</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div> <p>And the corresponding HTML:</p> <div class="code-example"><pre data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>log<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This is a test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</pre></div> <p>Here's the live result</p>
<iframe class="sample-code-frame" title="Example sample" id="frame_Example" width="100%" height="150" src="https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/Navigator/Online_and_offline_events/_sample_.Example.html" loading="lazy"></iframe><h2 id="notes">Notes</h2>
<p>If the API isn't implemented in the browser, you can use other signals to detect if you are offline including using service workers and <a href="https://www.html5rocks.com/en/mobile/workingoffthegrid.html#toc-xml-http-request" rel=" noopener">responses from XMLHttpRequest</a>.</p>
<h2 id="references">References</h2>
<ul> <li><a href="https://www.whatwg.org/specs/web-apps/current-work/#offline" rel=" noopener">'Online/Offline events' section from the WHATWG Web Applications 1.0 Specification</a></li> <li>
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=336359" rel=" noopener">The bug tracking online/offline events implementation in Firefox</a> and a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=336682" rel=" noopener">follow-up</a>
</li> <li><a href="https://bugzilla.mozilla.org/attachment.cgi?id=220609" rel=" noopener">A simple test case</a></li> <li><a href="http://ejohn.org/blog/offline-events/" rel=" noopener">An explanation of Online/Offline events</a></li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2005â€“2021 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/Online_and_offline_events" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Navigator/Online_and_offline_events</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
