
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>MediaSession.setPositionState - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="The MediaSession method setPositionState() is used to update the current document&#39;s media playback position and speed for presentation by user&# &hellip;">
  <meta name="keywords" content="mediasession, setpositionstate, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/mediasession/setpositionstate.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>MediaSession.setPositionState()</h1>
<p> The <a href="../mediasession"><code>MediaSession</code></a> method <code>setPositionState()</code> is used to update the current document's media playback position and speed for presentation by user's device in any kind of interface that provides details about ongoing media. This can be particularly useful if your code implements a player for type of media not directly supported by the browser. </p> <p> Call this method on the <code>navigator</code> object's <a href="../navigator/mediasession"><code>mediaSession</code></a> object. </p>
<h2 id="syntax">Syntax</h2>
<div class="code-example"><pre data-language="js">navigator<span class="token punctuation">.</span>mediaSession<span class="token punctuation">.</span><span class="token function">setPositionState</span><span class="token punctuation">(</span>stateDict<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
<h3 id="parameters">Parameters</h3>
<dl> <dt>
<code>stateDict</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> An object providing updated information about the playback position and speed of the document's ongoing media. If the object is empty, the existing playback state information is cleared. This object is a dictionary that contains the following parameters: </p> <dl> <dt><code>duration</code></dt> <dd> <p>A floating-point value giving the total duration of the current media in seconds. This should always be a positive number, with positive infinity (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity"><code>Infinity</code></a>) indicating media without a defined end, such as a live stream.</p> </dd> <dt><code>playbackRate</code></dt> <dd> <p>A floating-point value indicating the rate at which the media is being played, as a ratio relative to its normal playback speed. Thus, a value of 1 is playing at normal speed, 2 is playing at double speed, and so forth. Negative values indicate that the media is playing in reverse; -1 indicates playback at the normal speed but backward, -2 is double speed in reverse, and so on.</p> </dd> <dt><code>position</code></dt> <dd> <p>A floating-point value indicating the last reported playback position of the media in seconds. This must always be a positive value.</p> </dd> </dl> </dd> </dl>
<h3 id="return_value">Return value</h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>.</p>
<h3 id="exceptions">Exceptions</h3>
<dl> <dt><code>TypeError</code></dt> <dd> <p>This error can occur in an array of circumstances:</p> <ul> <li> The specified object's <code>duration</code> is missing, negative, or <code>null</code>. </li> <li> Its <code>position</code> is missing or null, or is either negative or greater than <code>duration</code>. </li> <li>Its <code>playbackRate</code> is zero.</li> </ul> </dd> </dl>
<h2 id="example">Example</h2>
<p> Below is a function which updates the position state of the current <a href="../mediasession"><code>MediaSession</code></a> track. </p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">updatePositionState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  navigator<span class="token punctuation">.</span>mediaSession<span class="token punctuation">.</span><span class="token function">setPositionState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> audioEl<span class="token punctuation">.</span>duration<span class="token punctuation">,</span>
    playbackRate<span class="token operator">:</span> audioEl<span class="token punctuation">.</span>playbackRate<span class="token punctuation">,</span>
    position<span class="token operator">:</span> audioEl<span class="token punctuation">.</span>currentTime
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div> <p>We can use this function when updating <a href="../mediametadata"><code>media session
  metadata</code></a> and within callbacks for actions, such as below.</p> <div class="code-example"><pre data-language="js">navigator<span class="token punctuation">.</span>mediaSession<span class="token punctuation">.</span><span class="token function">setActionHandler</span><span class="token punctuation">(</span><span class="token string">'seekbackward'</span><span class="token punctuation">,</span> <span class="token parameter">details</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token comment">// our time to skip</span>
  <span class="token keyword">const</span> skipTime <span class="token operator">=</span> details<span class="token punctuation">.</span>seekOffset <span class="token operator">||</span> <span class="token number">10</span><span class="token punctuation">;</span>

  <span class="token comment">// set our position</span>
  audioEl<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>audioEl<span class="token punctuation">.</span>currentTime <span class="token operator">-</span> skipTime<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">updatePositionState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/mediasession/#dom-mediasession-setpositionstate">Media Session Standard (Media Session)<br><small># dom-mediasession-setpositionstate</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>setPositionState</code></th>
<td class="bc-supports-yes"><div>73</div></td>
<td class="bc-supports-yes"><div>79</div></td>
<td class="bc-supports-yes">
<div>82</div>
<div>71</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>57</div></td>
<td class="bc-supports-yes">
<div>82</div>
<div>Firefox exposes the API, but does not provide a corresponding user-facing media control interface.</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes"><div>7.0</div></td>
</tr></tbody>
</table>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2021 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaSession/setPositionState" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/MediaSession/setPositionState</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
