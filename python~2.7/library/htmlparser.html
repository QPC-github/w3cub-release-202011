
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>HTMLParser - Python 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="htmlparser, —, simple, html, and, xhtml, parser, python, python~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/python~2.7/library/htmlparser.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/python~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/python~2.7/" class="_nav-link" title="" style="margin-left:0;">Python 2.7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _python">
				
				
<h1 id="htmlparser-simple-html-and-xhtml-parser"> HTMLParser — Simple HTML and XHTML parser</h1> <div class="admonition note" id="module-HTMLParser"> <p class="admonition-title">Note</p> <p>The <a class="reference internal" href="#module-HTMLParser" title="HTMLParser: A simple parser that can handle HTML and XHTML."><code>HTMLParser</code></a> module has been renamed to <code>html.parser</code> in Python 3. The <a class="reference internal" href="https://docs.python.org/2.7/glossary.html#term-2to3"><span class="xref std std-term">2to3</span></a> tool will automatically adapt imports when converting your sources to Python 3.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.2.</span></p> </div> <p id="index-0"><strong>Source code:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/2.7/Lib/HTMLParser.py">Lib/HTMLParser.py</a></p>  <p>This module defines a class <a class="reference internal" href="#HTMLParser.HTMLParser" title="HTMLParser.HTMLParser"><code>HTMLParser</code></a> which serves as the basis for parsing text files formatted in HTML (HyperText Mark-up Language) and XHTML. Unlike the parser in <a class="reference internal" href="htmllib#module-htmllib" title="htmllib: A parser for HTML documents. (deprecated)"><code>htmllib</code></a>, this parser is not based on the SGML parser in <a class="reference internal" href="sgmllib#module-sgmllib" title="sgmllib: Only as much of an SGML parser as needed to parse HTML. (deprecated)"><code>sgmllib</code></a>.</p> <dl class="class"> <dt id="HTMLParser.HTMLParser">
<code>class HTMLParser.HTMLParser</code> </dt> <dd>
<p>An <a class="reference internal" href="#HTMLParser.HTMLParser" title="HTMLParser.HTMLParser"><code>HTMLParser</code></a> instance is fed HTML data and calls handler methods when start tags, end tags, text, comments, and other markup elements are encountered. The user should subclass <a class="reference internal" href="#HTMLParser.HTMLParser" title="HTMLParser.HTMLParser"><code>HTMLParser</code></a> and override its methods to implement the desired behavior.</p> <p>The <a class="reference internal" href="#HTMLParser.HTMLParser" title="HTMLParser.HTMLParser"><code>HTMLParser</code></a> class is instantiated without arguments.</p> <p>Unlike the parser in <a class="reference internal" href="htmllib#module-htmllib" title="htmllib: A parser for HTML documents. (deprecated)"><code>htmllib</code></a>, this parser does not check that end tags match start tags or call the end-tag handler for elements which are closed implicitly by closing an outer element.</p> </dd>
</dl> <p>An exception is defined as well:</p> <dl class="exception"> <dt id="HTMLParser.HTMLParseError">
<code>exception HTMLParser.HTMLParseError</code> </dt> <dd>
<p><a class="reference internal" href="#HTMLParser.HTMLParser" title="HTMLParser.HTMLParser"><code>HTMLParser</code></a> is able to handle broken markup, but in some cases it might raise this exception when it encounters an error while parsing. This exception provides three attributes: <code>msg</code> is a brief message explaining the error, <code>lineno</code> is the number of the line on which the broken construct was detected, and <code>offset</code> is the number of characters into the line at which the construct starts.</p> </dd>
</dl>  <h2 id="example-html-parser-application">1. Example HTML Parser Application</h2> <p>As a basic example, below is a simple HTML parser that uses the <a class="reference internal" href="#HTMLParser.HTMLParser" title="HTMLParser.HTMLParser"><code>HTMLParser</code></a> class to print out start tags, end tags and data as they are encountered:</p> <pre data-language="python">from HTMLParser import HTMLParser

# create a subclass and override the handler methods
class MyHTMLParser(HTMLParser):
    def handle_starttag(self, tag, attrs):
        print "Encountered a start tag:", tag

    def handle_endtag(self, tag):
        print "Encountered an end tag :", tag

    def handle_data(self, data):
        print "Encountered some data  :", data

# instantiate the parser and fed it some HTML
parser = MyHTMLParser()
parser.feed('&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;'
            '&lt;body&gt;&lt;h1&gt;Parse me!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;')
</pre> <p>The output will then be:</p> <pre data-language="none">Encountered a start tag: html
Encountered a start tag: head
Encountered a start tag: title
Encountered some data  : Test
Encountered an end tag : title
Encountered an end tag : head
Encountered a start tag: body
Encountered a start tag: h1
Encountered some data  : Parse me!
Encountered an end tag : h1
Encountered an end tag : body
Encountered an end tag : html
</pre>   <h2 id="htmlparser-methods">2. HTMLParser Methods</h2> <p><a class="reference internal" href="#HTMLParser.HTMLParser" title="HTMLParser.HTMLParser"><code>HTMLParser</code></a> instances have the following methods:</p> <dl class="method"> <dt id="HTMLParser.HTMLParser.feed">
<code>HTMLParser.feed(data)</code> </dt> <dd>
<p>Feed some text to the parser. It is processed insofar as it consists of complete elements; incomplete data is buffered until more data is fed or <a class="reference internal" href="#HTMLParser.HTMLParser.close" title="HTMLParser.HTMLParser.close"><code>close()</code></a> is called. <em>data</em> can be either <a class="reference internal" href="functions#unicode" title="unicode"><code>unicode</code></a> or <a class="reference internal" href="functions#str" title="str"><code>str</code></a>, but passing <a class="reference internal" href="functions#unicode" title="unicode"><code>unicode</code></a> is advised.</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.close">
<code>HTMLParser.close()</code> </dt> <dd>
<p>Force processing of all buffered data as if it were followed by an end-of-file mark. This method may be redefined by a derived class to define additional processing at the end of the input, but the redefined version should always call the <a class="reference internal" href="#HTMLParser.HTMLParser" title="HTMLParser.HTMLParser"><code>HTMLParser</code></a> base class method <a class="reference internal" href="#HTMLParser.HTMLParser.close" title="HTMLParser.HTMLParser.close"><code>close()</code></a>.</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.reset">
<code>HTMLParser.reset()</code> </dt> <dd>
<p>Reset the instance. Loses all unprocessed data. This is called implicitly at instantiation time.</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.getpos">
<code>HTMLParser.getpos()</code> </dt> <dd>
<p>Return current line number and offset.</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.get_starttag_text">
<code>HTMLParser.get_starttag_text()</code> </dt> <dd>
<p>Return the text of the most recently opened start tag. This should not normally be needed for structured processing, but may be useful in dealing with HTML “as deployed” or for re-generating input with minimal changes (whitespace between attributes can be preserved, etc.).</p> </dd>
</dl> <p>The following methods are called when data or markup elements are encountered and they are meant to be overridden in a subclass. The base class implementations do nothing (except for <a class="reference internal" href="#HTMLParser.HTMLParser.handle_startendtag" title="HTMLParser.HTMLParser.handle_startendtag"><code>handle_startendtag()</code></a>):</p> <dl class="method"> <dt id="HTMLParser.HTMLParser.handle_starttag">
<code>HTMLParser.handle_starttag(tag, attrs)</code> </dt> <dd>
<p>This method is called to handle the start of a tag (e.g. <code>&lt;div id="main"&gt;</code>).</p> <p>The <em>tag</em> argument is the name of the tag converted to lower case. The <em>attrs</em> argument is a list of <code>(name, value)</code> pairs containing the attributes found inside the tag’s <code>&lt;&gt;</code> brackets. The <em>name</em> will be translated to lower case, and quotes in the <em>value</em> have been removed, and character and entity references have been replaced.</p> <p>For instance, for the tag <code>&lt;A HREF="https://www.cwi.nl/"&gt;</code>, this method would be called as <code>handle_starttag('a', [('href', 'https://www.cwi.nl/')])</code>.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.6: </span>All entity references from <a class="reference internal" href="htmllib#module-htmlentitydefs" title="htmlentitydefs: Definitions of HTML general entities."><code>htmlentitydefs</code></a> are now replaced in the attribute values.</p> </div> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.handle_endtag">
<code>HTMLParser.handle_endtag(tag)</code> </dt> <dd>
<p>This method is called to handle the end tag of an element (e.g. <code>&lt;/div&gt;</code>).</p> <p>The <em>tag</em> argument is the name of the tag converted to lower case.</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.handle_startendtag">
<code>HTMLParser.handle_startendtag(tag, attrs)</code> </dt> <dd>
<p>Similar to <a class="reference internal" href="#HTMLParser.HTMLParser.handle_starttag" title="HTMLParser.HTMLParser.handle_starttag"><code>handle_starttag()</code></a>, but called when the parser encounters an XHTML-style empty tag (<code>&lt;img ... /&gt;</code>). This method may be overridden by subclasses which require this particular lexical information; the default implementation simply calls <a class="reference internal" href="#HTMLParser.HTMLParser.handle_starttag" title="HTMLParser.HTMLParser.handle_starttag"><code>handle_starttag()</code></a> and <a class="reference internal" href="#HTMLParser.HTMLParser.handle_endtag" title="HTMLParser.HTMLParser.handle_endtag"><code>handle_endtag()</code></a>.</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.handle_data">
<code>HTMLParser.handle_data(data)</code> </dt> <dd>
<p>This method is called to process arbitrary data (e.g. text nodes and the content of <code>&lt;script&gt;...&lt;/script&gt;</code> and <code>&lt;style&gt;...&lt;/style&gt;</code>).</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.handle_entityref">
<code>HTMLParser.handle_entityref(name)</code> </dt> <dd>
<p>This method is called to process a named character reference of the form <code>&amp;name;</code> (e.g. <code>&amp;gt;</code>), where <em>name</em> is a general entity reference (e.g. <code>'gt'</code>).</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.handle_charref">
<code>HTMLParser.handle_charref(name)</code> </dt> <dd>
<p>This method is called to process decimal and hexadecimal numeric character references of the form <code>&amp;#NNN;</code> and <code>&amp;#xNNN;</code>. For example, the decimal equivalent for <code>&amp;gt;</code> is <code>&amp;#62;</code>, whereas the hexadecimal is <code>&amp;#x3E;</code>; in this case the method will receive <code>'62'</code> or <code>'x3E'</code>.</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.handle_comment">
<code>HTMLParser.handle_comment(data)</code> </dt> <dd>
<p>This method is called when a comment is encountered (e.g. <code>&lt;!--comment--&gt;</code>).</p> <p>For example, the comment <code>&lt;!-- comment --&gt;</code> will cause this method to be called with the argument <code>' comment '</code>.</p> <p>The content of Internet Explorer conditional comments (condcoms) will also be sent to this method, so, for <code>&lt;!--[if IE 9]&gt;IE9-specific content&lt;![endif]--&gt;</code>, this method will receive <code>'[if IE 9]&gt;IE9-specific content&lt;![endif]'</code>.</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.handle_decl">
<code>HTMLParser.handle_decl(decl)</code> </dt> <dd>
<p>This method is called to handle an HTML doctype declaration (e.g. <code>&lt;!DOCTYPE html&gt;</code>).</p> <p>The <em>decl</em> parameter will be the entire contents of the declaration inside the <code>&lt;!...&gt;</code> markup (e.g. <code>'DOCTYPE html'</code>).</p> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.handle_pi">
<code>HTMLParser.handle_pi(data)</code> </dt> <dd>
<p>This method is called when a processing instruction is encountered. The <em>data</em> parameter will contain the entire processing instruction. For example, for the processing instruction <code>&lt;?proc color='red'&gt;</code>, this method would be called as <code>handle_pi("proc color='red'")</code>.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <a class="reference internal" href="#HTMLParser.HTMLParser" title="HTMLParser.HTMLParser"><code>HTMLParser</code></a> class uses the SGML syntactic rules for processing instructions. An XHTML processing instruction using the trailing <code>'?'</code> will cause the <code>'?'</code> to be included in <em>data</em>.</p> </div> </dd>
</dl> <dl class="method"> <dt id="HTMLParser.HTMLParser.unknown_decl">
<code>HTMLParser.unknown_decl(data)</code> </dt> <dd>
<p>This method is called when an unrecognized declaration is read by the parser.</p> <p>The <em>data</em> parameter will be the entire contents of the declaration inside the <code>&lt;![...]&gt;</code> markup. It is sometimes useful to be overridden by a derived class.</p> </dd>
</dl>   <h2 id="htmlparser-examples">3. Examples</h2> <p id="examples">The following class implements a parser that will be used to illustrate more examples:</p> <pre data-language="python">from HTMLParser import HTMLParser
from htmlentitydefs import name2codepoint

class MyHTMLParser(HTMLParser):
    def handle_starttag(self, tag, attrs):
        print "Start tag:", tag
        for attr in attrs:
            print "     attr:", attr

    def handle_endtag(self, tag):
        print "End tag  :", tag

    def handle_data(self, data):
        print "Data     :", data

    def handle_comment(self, data):
        print "Comment  :", data

    def handle_entityref(self, name):
        c = unichr(name2codepoint[name])
        print "Named ent:", c

    def handle_charref(self, name):
        if name.startswith('x'):
            c = unichr(int(name[1:], 16))
        else:
            c = unichr(int(name))
        print "Num ent  :", c

    def handle_decl(self, data):
        print "Decl     :", data

parser = MyHTMLParser()
</pre> <p>Parsing a doctype:</p> <pre data-language="python">&gt;&gt;&gt; parser.feed('&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" '
...             '"http://www.w3.org/TR/html4/strict.dtd"&gt;')
Decl     : DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"
</pre> <p>Parsing an element with a few attributes and a title:</p> <pre data-language="python">&gt;&gt;&gt; parser.feed('&lt;img src="python-logo.png" alt="The Python logo"&gt;')
Start tag: img
     attr: ('src', 'python-logo.png')
     attr: ('alt', 'The Python logo')
&gt;&gt;&gt;
&gt;&gt;&gt; parser.feed('&lt;h1&gt;Python&lt;/h1&gt;')
Start tag: h1
Data     : Python
End tag  : h1
</pre> <p>The content of <code>script</code> and <code>style</code> elements is returned as is, without further parsing:</p> <pre data-language="python">&gt;&gt;&gt; parser.feed('&lt;style type="text/css"&gt;#python { color: green }&lt;/style&gt;')
Start tag: style
     attr: ('type', 'text/css')
Data     : #python { color: green }
End tag  : style

&gt;&gt;&gt; parser.feed('&lt;script type="text/javascript"&gt;'
...             'alert("&lt;strong&gt;hello!&lt;/strong&gt;");&lt;/script&gt;')
Start tag: script
     attr: ('type', 'text/javascript')
Data     : alert("&lt;strong&gt;hello!&lt;/strong&gt;");
End tag  : script
</pre> <p>Parsing comments:</p> <pre data-language="python">&gt;&gt;&gt; parser.feed('&lt;!-- a comment --&gt;'
...             '&lt;!--[if IE 9]&gt;IE-specific content&lt;![endif]--&gt;')
Comment  :  a comment
Comment  : [if IE 9]&gt;IE-specific content&lt;![endif]
</pre> <p>Parsing named and numeric character references and converting them to the correct char (note: these 3 references are all equivalent to <code>'&gt;'</code>):</p> <pre data-language="python">&gt;&gt;&gt; parser.feed('&amp;gt;&amp;#62;&amp;#x3E;')
Named ent: &gt;
Num ent  : &gt;
Num ent  : &gt;
</pre> <p>Feeding incomplete chunks to <a class="reference internal" href="#HTMLParser.HTMLParser.feed" title="HTMLParser.HTMLParser.feed"><code>feed()</code></a> works, but <a class="reference internal" href="#HTMLParser.HTMLParser.handle_data" title="HTMLParser.HTMLParser.handle_data"><code>handle_data()</code></a> might be called more than once:</p> <pre data-language="python">&gt;&gt;&gt; for chunk in ['&lt;sp', 'an&gt;buff', 'ered ', 'text&lt;/s', 'pan&gt;']:
...     parser.feed(chunk)
...
Start tag: span
Data     : buff
Data     : ered
Data     : text
End tag  : span
</pre> <p>Parsing invalid HTML (e.g. unquoted attributes) also works:</p> <pre data-language="python">&gt;&gt;&gt; parser.feed('&lt;p&gt;&lt;a class=link href=#main&gt;tag soup&lt;/p &gt;&lt;/a&gt;')
Start tag: p
Start tag: a
     attr: ('class', 'link')
     attr: ('href', '#main')
Data     : tag soup
End tag  : p
End tag  : a
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2020 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/2.7/library/htmlparser.html" class="_attribution-link">https://docs.python.org/2.7/library/htmlparser.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
