
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Gettext - Python 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" Source code&#58; Lib&#47;gettext.py ">
  <meta name="keywords" content="gettext, —, multilingual, internationalization, services, python, python~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/python~2.7/library/gettext.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/python~2.7.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/python~2.7/" class="_nav-link" title="" style="margin-left:0;">Python 2.7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _python">
				
				
<h1 id="gettext-multilingual-internationalization-services"> gettext — Multilingual internationalization services</h1> <p id="module-gettext"><strong>Source code:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/2.7/Lib/gettext.py">Lib/gettext.py</a></p>  <p>The <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> module provides internationalization (I18N) and localization (L10N) services for your Python modules and applications. It supports both the GNU <code>gettext</code> message catalog API and a higher level, class-based API that may be more appropriate for Python files. The interface described below allows you to write your module and application messages in one natural language, and provide a catalog of translated messages for running under different natural languages.</p> <p>Some hints on localizing your Python modules and applications are also given.</p>  <h2 id="gnu-gettext-api">1. GNU <strong class="program">gettext</strong> API</h2> <p>The <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> module defines the following API, which is very similar to the GNU <strong class="program">gettext</strong> API. If you use this API you will affect the translation of your entire application globally. Often this is what you want if your application is monolingual, with the choice of language dependent on the locale of your user. If you are localizing a Python module, or if your application needs to switch languages on the fly, you probably want to use the class-based API instead.</p> <dl class="function"> <dt id="gettext.bindtextdomain">
<code>gettext.bindtextdomain(domain[, localedir])</code> </dt> <dd>
<p>Bind the <em>domain</em> to the locale directory <em>localedir</em>. More concretely, <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> will look for binary <code>.mo</code> files for the given domain using the path (on Unix): <code>localedir/language/LC_MESSAGES/domain.mo</code>, where <em>languages</em> is searched for in the environment variables <code id="index-0">LANGUAGE</code>, <code id="index-1">LC_ALL</code>, <code id="index-2">LC_MESSAGES</code>, and <code id="index-3">LANG</code> respectively.</p> <p>If <em>localedir</em> is omitted or <code>None</code>, then the current binding for <em>domain</em> is returned. <a class="footnote-reference brackets" href="#id6" id="id1">1</a></p> </dd>
</dl> <dl class="function"> <dt id="gettext.bind_textdomain_codeset">
<code>gettext.bind_textdomain_codeset(domain[, codeset])</code> </dt> <dd>
<p>Bind the <em>domain</em> to <em>codeset</em>, changing the encoding of strings returned by the <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a> family of functions. If <em>codeset</em> is omitted, then the current binding is returned.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="gettext.textdomain">
<code>gettext.textdomain([domain])</code> </dt> <dd>
<p>Change or query the current global domain. If <em>domain</em> is <code>None</code>, then the current global domain is returned, otherwise the global domain is set to <em>domain</em>, which is returned.</p> </dd>
</dl> <dl class="function"> <dt id="gettext.gettext">
<code>gettext.gettext(message)</code> </dt> <dd>
<p>Return the localized translation of <em>message</em>, based on the current global domain, language, and locale directory. This function is usually aliased as <code>_()</code> in the local namespace (see examples below).</p> </dd>
</dl> <dl class="function"> <dt id="gettext.lgettext">
<code>gettext.lgettext(message)</code> </dt> <dd>
<p>Equivalent to <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a>, but the translation is returned in the preferred system encoding, if no other encoding was explicitly set with <a class="reference internal" href="#gettext.bind_textdomain_codeset" title="gettext.bind_textdomain_codeset"><code>bind_textdomain_codeset()</code></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="gettext.dgettext">
<code>gettext.dgettext(domain, message)</code> </dt> <dd>
<p>Like <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a>, but look the message up in the specified <em>domain</em>.</p> </dd>
</dl> <dl class="function"> <dt id="gettext.ldgettext">
<code>gettext.ldgettext(domain, message)</code> </dt> <dd>
<p>Equivalent to <a class="reference internal" href="#gettext.dgettext" title="gettext.dgettext"><code>dgettext()</code></a>, but the translation is returned in the preferred system encoding, if no other encoding was explicitly set with <a class="reference internal" href="#gettext.bind_textdomain_codeset" title="gettext.bind_textdomain_codeset"><code>bind_textdomain_codeset()</code></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="gettext.ngettext">
<code>gettext.ngettext(singular, plural, n)</code> </dt> <dd>
<p>Like <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a>, but consider plural forms. If a translation is found, apply the plural formula to <em>n</em>, and return the resulting message (some languages have more than two plural forms). If no translation is found, return <em>singular</em> if <em>n</em> is 1; return <em>plural</em> otherwise.</p> <p>The Plural formula is taken from the catalog header. It is a C or Python expression that has a free variable <em>n</em>; the expression evaluates to the index of the plural in the catalog. See the GNU gettext documentation for the precise syntax to be used in <code>.po</code> files and the formulas for a variety of languages.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="gettext.lngettext">
<code>gettext.lngettext(singular, plural, n)</code> </dt> <dd>
<p>Equivalent to <a class="reference internal" href="#gettext.ngettext" title="gettext.ngettext"><code>ngettext()</code></a>, but the translation is returned in the preferred system encoding, if no other encoding was explicitly set with <a class="reference internal" href="#gettext.bind_textdomain_codeset" title="gettext.bind_textdomain_codeset"><code>bind_textdomain_codeset()</code></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="gettext.dngettext">
<code>gettext.dngettext(domain, singular, plural, n)</code> </dt> <dd>
<p>Like <a class="reference internal" href="#gettext.ngettext" title="gettext.ngettext"><code>ngettext()</code></a>, but look the message up in the specified <em>domain</em>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="gettext.ldngettext">
<code>gettext.ldngettext(domain, singular, plural, n)</code> </dt> <dd>
<p>Equivalent to <a class="reference internal" href="#gettext.dngettext" title="gettext.dngettext"><code>dngettext()</code></a>, but the translation is returned in the preferred system encoding, if no other encoding was explicitly set with <a class="reference internal" href="#gettext.bind_textdomain_codeset" title="gettext.bind_textdomain_codeset"><code>bind_textdomain_codeset()</code></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <p>Note that GNU <strong class="program">gettext</strong> also defines a <code>dcgettext()</code> method, but this was deemed not useful and so it is currently unimplemented.</p> <p>Here’s an example of typical usage for this API:</p> <pre data-language="python">import gettext
gettext.bindtextdomain('myapplication', '/path/to/my/language/directory')
gettext.textdomain('myapplication')
_ = gettext.gettext
# ...
print _('This is a translatable string.')
</pre>   <h2 id="class-based-api">2. Class-based API</h2> <p>The class-based API of the <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> module gives you more flexibility and greater convenience than the GNU <strong class="program">gettext</strong> API. It is the recommended way of localizing your Python applications and modules. <code>gettext</code> defines a “translations” class which implements the parsing of GNU <code>.mo</code> format files, and has methods for returning either standard 8-bit strings or Unicode strings. Instances of this “translations” class can also install themselves in the built-in namespace as the function <code>_()</code>.</p> <dl class="function"> <dt id="gettext.find">
<code>gettext.find(domain[, localedir[, languages[, all]]])</code> </dt> <dd>
<p>This function implements the standard <code>.mo</code> file search algorithm. It takes a <em>domain</em>, identical to what <a class="reference internal" href="#gettext.textdomain" title="gettext.textdomain"><code>textdomain()</code></a> takes. Optional <em>localedir</em> is as in <a class="reference internal" href="#gettext.bindtextdomain" title="gettext.bindtextdomain"><code>bindtextdomain()</code></a> Optional <em>languages</em> is a list of strings, where each string is a language code.</p> <p>If <em>localedir</em> is not given, then the default system locale directory is used. <a class="footnote-reference brackets" href="#id7" id="id2">2</a> If <em>languages</em> is not given, then the following environment variables are searched: <code id="index-4">LANGUAGE</code>, <code id="index-5">LC_ALL</code>, <code id="index-6">LC_MESSAGES</code>, and <code id="index-7">LANG</code>. The first one returning a non-empty value is used for the <em>languages</em> variable. The environment variables should contain a colon separated list of languages, which will be split on the colon to produce the expected list of language code strings.</p> <p><a class="reference internal" href="#gettext.find" title="gettext.find"><code>find()</code></a> then expands and normalizes the languages, and then iterates through them, searching for an existing file built of these components:</p> <p><code>localedir/language/LC_MESSAGES/domain.mo</code></p> <p>The first such file name that exists is returned by <a class="reference internal" href="#gettext.find" title="gettext.find"><code>find()</code></a>. If no such file is found, then <code>None</code> is returned. If <em>all</em> is given, it returns a list of all file names, in the order in which they appear in the languages list or the environment variables.</p> </dd>
</dl> <dl class="function"> <dt id="gettext.translation">
<code>gettext.translation(domain[, localedir[, languages[, class_[, fallback[, codeset]]]]])</code> </dt> <dd>
<p>Return a <code>Translations</code> instance based on the <em>domain</em>, <em>localedir</em>, and <em>languages</em>, which are first passed to <a class="reference internal" href="#gettext.find" title="gettext.find"><code>find()</code></a> to get a list of the associated <code>.mo</code> file paths. Instances with identical <code>.mo</code> file names are cached. The actual class instantiated is either <em>class_</em> if provided, otherwise <code>GNUTranslations</code>. The class’s constructor must take a single file object argument. If provided, <em>codeset</em> will change the charset used to encode translated strings.</p> <p>If multiple files are found, later files are used as fallbacks for earlier ones. To allow setting the fallback, <a class="reference internal" href="copy#copy.copy" title="copy.copy"><code>copy.copy()</code></a> is used to clone each translation object from the cache; the actual instance data is still shared with the cache.</p> <p>If no <code>.mo</code> file is found, this function raises <a class="reference internal" href="exceptions#exceptions.IOError" title="exceptions.IOError"><code>IOError</code></a> if <em>fallback</em> is false (which is the default), and returns a <a class="reference internal" href="#gettext.NullTranslations" title="gettext.NullTranslations"><code>NullTranslations</code></a> instance if <em>fallback</em> is true.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.4: </span>Added the <em>codeset</em> parameter.</p> </div> </dd>
</dl> <dl class="function"> <dt id="gettext.install">
<code>gettext.install(domain[, localedir[, unicode[, codeset[, names]]]])</code> </dt> <dd>
<p>This installs the function <code>_()</code> in Python’s builtins namespace, based on <em>domain</em>, <em>localedir</em>, and <em>codeset</em> which are passed to the function <a class="reference internal" href="#gettext.translation" title="gettext.translation"><code>translation()</code></a>. The <em>unicode</em> flag is passed to the resulting translation object’s <a class="reference internal" href="#gettext.NullTranslations.install" title="gettext.NullTranslations.install"><code>install()</code></a> method.</p> <p>For the <em>names</em> parameter, please see the description of the translation object’s <a class="reference internal" href="#gettext.NullTranslations.install" title="gettext.NullTranslations.install"><code>install()</code></a> method.</p> <p>As seen below, you usually mark the strings in your application that are candidates for translation, by wrapping them in a call to the <code>_()</code> function, like this:</p> <pre data-language="python">print _('This string will be translated.')
</pre> <p>For convenience, you want the <code>_()</code> function to be installed in Python’s builtins namespace, so it is easily accessible in all modules of your application.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.4: </span>Added the <em>codeset</em> parameter.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.5: </span>Added the <em>names</em> parameter.</p> </div> </dd>
</dl>  <h3 id="the-nulltranslations-class">2.1. The <a class="reference internal" href="#gettext.NullTranslations" title="gettext.NullTranslations"><code>NullTranslations</code></a> class</h3> <p>Translation classes are what actually implement the translation of original source file message strings to translated message strings. The base class used by all translation classes is <a class="reference internal" href="#gettext.NullTranslations" title="gettext.NullTranslations"><code>NullTranslations</code></a>; this provides the basic interface you can use to write your own specialized translation classes. Here are the methods of <code>NullTranslations</code>:</p> <dl class="class"> <dt id="gettext.NullTranslations">
<code>class gettext.NullTranslations([fp])</code> </dt> <dd>
<p>Takes an optional file object <em>fp</em>, which is ignored by the base class. Initializes “protected” instance variables <em>_info</em> and <em>_charset</em> which are set by derived classes, as well as <em>_fallback</em>, which is set through <a class="reference internal" href="#gettext.NullTranslations.add_fallback" title="gettext.NullTranslations.add_fallback"><code>add_fallback()</code></a>. It then calls <code>self._parse(fp)</code> if <em>fp</em> is not <code>None</code>.</p> <dl class="method"> <dt id="gettext.NullTranslations._parse">
<code>_parse(fp)</code> </dt> <dd>
<p>No-op’d in the base class, this method takes file object <em>fp</em>, and reads the data from the file, initializing its message catalog. If you have an unsupported message catalog file format, you should override this method to parse your format.</p> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.add_fallback">
<code>add_fallback(fallback)</code> </dt> <dd>
<p>Add <em>fallback</em> as the fallback object for the current translation object. A translation object should consult the fallback if it cannot provide a translation for a given message.</p> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.gettext">
<code>gettext(message)</code> </dt> <dd>
<p>If a fallback has been set, forward <code>gettext()</code> to the fallback. Otherwise, return the translated message. Overridden in derived classes.</p> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.lgettext">
<code>lgettext(message)</code> </dt> <dd>
<p>If a fallback has been set, forward <code>lgettext()</code> to the fallback. Otherwise, return the translated message. Overridden in derived classes.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.ugettext">
<code>ugettext(message)</code> </dt> <dd>
<p>If a fallback has been set, forward <code>ugettext()</code> to the fallback. Otherwise, return the translated message as a Unicode string. Overridden in derived classes.</p> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.ngettext">
<code>ngettext(singular, plural, n)</code> </dt> <dd>
<p>If a fallback has been set, forward <code>ngettext()</code> to the fallback. Otherwise, return the translated message. Overridden in derived classes.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.lngettext">
<code>lngettext(singular, plural, n)</code> </dt> <dd>
<p>If a fallback has been set, forward <code>lngettext()</code> to the fallback. Otherwise, return the translated message. Overridden in derived classes.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.ungettext">
<code>ungettext(singular, plural, n)</code> </dt> <dd>
<p>If a fallback has been set, forward <code>ungettext()</code> to the fallback. Otherwise, return the translated message as a Unicode string. Overridden in derived classes.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.info">
<code>info()</code> </dt> <dd>
<p>Return the “protected” <code>_info</code> variable.</p> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.charset">
<code>charset()</code> </dt> <dd>
<p>Return the “protected” <code>_charset</code> variable.</p> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.output_charset">
<code>output_charset()</code> </dt> <dd>
<p>Return the “protected” <code>_output_charset</code> variable, which defines the encoding used to return translated messages.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.set_output_charset">
<code>set_output_charset(charset)</code> </dt> <dd>
<p>Change the “protected” <code>_output_charset</code> variable, which defines the encoding used to return translated messages.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="method"> <dt id="gettext.NullTranslations.install">
<code>install([unicode[, names]])</code> </dt> <dd>
<p>If the <em>unicode</em> flag is false, this method installs <code>self.gettext()</code> into the built-in namespace, binding it to <code>_</code>. If <em>unicode</em> is true, it binds <code>self.ugettext()</code> instead. By default, <em>unicode</em> is false.</p> <p>If the <em>names</em> parameter is given, it must be a sequence containing the names of functions you want to install in the builtins namespace in addition to <code>_()</code>. Supported names are <code>'gettext'</code> (bound to <code>self.gettext()</code> or <code>self.ugettext()</code> according to the <em>unicode</em> flag), <code>'ngettext'</code> (bound to <code>self.ngettext()</code> or <code>self.ungettext()</code> according to the <em>unicode</em> flag), <code>'lgettext'</code> and <code>'lngettext'</code>.</p> <p>Note that this is only one way, albeit the most convenient way, to make the <code>_()</code> function available to your application. Because it affects the entire application globally, and specifically the built-in namespace, localized modules should never install <code>_()</code>. Instead, they should use this code to make <code>_()</code> available to their module:</p> <pre data-language="python">import gettext
t = gettext.translation('mymodule', ...)
_ = t.gettext
</pre> <p>This puts <code>_()</code> only in the module’s global namespace and so only affects calls within this module.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.5: </span>Added the <em>names</em> parameter.</p> </div> </dd>
</dl> </dd>
</dl>   <h3 id="the-gnutranslations-class">2.2. The <code>GNUTranslations</code> class</h3> <p>The <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> module provides one additional class derived from <a class="reference internal" href="#gettext.NullTranslations" title="gettext.NullTranslations"><code>NullTranslations</code></a>: <code>GNUTranslations</code>. This class overrides <code>_parse()</code> to enable reading GNU <strong class="program">gettext</strong> format <code>.mo</code> files in both big-endian and little-endian format. It also coerces both message ids and message strings to Unicode.</p> <p><code>GNUTranslations</code> parses optional meta-data out of the translation catalog. It is convention with GNU <strong class="program">gettext</strong> to include meta-data as the translation for the empty string. This meta-data is in <a class="rfc reference external" href="https://tools.ietf.org/html/rfc822.html" id="index-8"><strong>RFC 822</strong></a>-style <code>key: value</code> pairs, and should contain the <code>Project-Id-Version</code> key. If the key <code>Content-Type</code> is found, then the <code>charset</code> property is used to initialize the “protected” <code>_charset</code> instance variable, defaulting to <code>None</code> if not found. If the charset encoding is specified, then all message ids and message strings read from the catalog are converted to Unicode using this encoding. The <code>ugettext()</code> method always returns a Unicode, while the <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a> returns an encoded 8-bit string. For the message id arguments of both methods, either Unicode strings or 8-bit strings containing only US-ASCII characters are acceptable. Note that the Unicode version of the methods (i.e. <code>ugettext()</code> and <code>ungettext()</code>) are the recommended interface to use for internationalized Python programs.</p> <p>The entire set of key/value pairs are placed into a dictionary and set as the “protected” <code>_info</code> instance variable.</p> <p>If the <code>.mo</code> file’s magic number is invalid, or if other problems occur while reading the file, instantiating a <code>GNUTranslations</code> class can raise <a class="reference internal" href="exceptions#exceptions.IOError" title="exceptions.IOError"><code>IOError</code></a>.</p> <p>The following methods are overridden from the base class implementation:</p> <dl class="method"> <dt id="gettext.GNUTranslations.gettext">
<code>GNUTranslations.gettext(message)</code> </dt> <dd>
<p>Look up the <em>message</em> id in the catalog and return the corresponding message string, as an 8-bit string encoded with the catalog’s charset encoding, if known. If there is no entry in the catalog for the <em>message</em> id, and a fallback has been set, the look up is forwarded to the fallback’s <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a> method. Otherwise, the <em>message</em> id is returned.</p> </dd>
</dl> <dl class="method"> <dt id="gettext.GNUTranslations.lgettext">
<code>GNUTranslations.lgettext(message)</code> </dt> <dd>
<p>Equivalent to <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a>, but the translation is returned in the preferred system encoding, if no other encoding was explicitly set with <code>set_output_charset()</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="method"> <dt id="gettext.GNUTranslations.ugettext">
<code>GNUTranslations.ugettext(message)</code> </dt> <dd>
<p>Look up the <em>message</em> id in the catalog and return the corresponding message string, as a Unicode string. If there is no entry in the catalog for the <em>message</em> id, and a fallback has been set, the look up is forwarded to the fallback’s <a class="reference internal" href="#gettext.GNUTranslations.ugettext" title="gettext.GNUTranslations.ugettext"><code>ugettext()</code></a> method. Otherwise, the <em>message</em> id is returned.</p> </dd>
</dl> <dl class="method"> <dt id="gettext.GNUTranslations.ngettext">
<code>GNUTranslations.ngettext(singular, plural, n)</code> </dt> <dd>
<p>Do a plural-forms lookup of a message id. <em>singular</em> is used as the message id for purposes of lookup in the catalog, while <em>n</em> is used to determine which plural form to use. The returned message string is an 8-bit string encoded with the catalog’s charset encoding, if known.</p> <p>If the message id is not found in the catalog, and a fallback is specified, the request is forwarded to the fallback’s <a class="reference internal" href="#gettext.ngettext" title="gettext.ngettext"><code>ngettext()</code></a> method. Otherwise, when <em>n</em> is 1 <em>singular</em> is returned, and <em>plural</em> is returned in all other cases.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl> <dl class="method"> <dt id="gettext.GNUTranslations.lngettext">
<code>GNUTranslations.lngettext(singular, plural, n)</code> </dt> <dd>
<p>Equivalent to <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a>, but the translation is returned in the preferred system encoding, if no other encoding was explicitly set with <code>set_output_charset()</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </dd>
</dl> <dl class="method"> <dt id="gettext.GNUTranslations.ungettext">
<code>GNUTranslations.ungettext(singular, plural, n)</code> </dt> <dd>
<p>Do a plural-forms lookup of a message id. <em>singular</em> is used as the message id for purposes of lookup in the catalog, while <em>n</em> is used to determine which plural form to use. The returned message string is a Unicode string.</p> <p>If the message id is not found in the catalog, and a fallback is specified, the request is forwarded to the fallback’s <a class="reference internal" href="#gettext.GNUTranslations.ungettext" title="gettext.GNUTranslations.ungettext"><code>ungettext()</code></a> method. Otherwise, when <em>n</em> is 1 <em>singular</em> is returned, and <em>plural</em> is returned in all other cases.</p> <p>Here is an example:</p> <pre data-language="python">n = len(os.listdir('.'))
cat = GNUTranslations(somefile)
message = cat.ungettext(
    'There is %(num)d file in this directory',
    'There are %(num)d files in this directory',
    n) % {'num': n}
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl>   <h3 id="solaris-message-catalog-support">2.3. Solaris message catalog support</h3> <p>The Solaris operating system defines its own binary <code>.mo</code> file format, but since no documentation can be found on this format, it is not supported at this time.</p>   <h3 id="the-catalog-constructor">2.4. The Catalog constructor</h3> <p id="index-9">GNOME uses a version of the <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> module by James Henstridge, but this version has a slightly different API. Its documented usage was:</p> <pre data-language="python">import gettext
cat = gettext.Catalog(domain, localedir)
_ = cat.gettext
print _('hello world')
</pre> <p>For compatibility with this older module, the function <code>Catalog()</code> is an alias for the <a class="reference internal" href="#gettext.translation" title="gettext.translation"><code>translation()</code></a> function described above.</p> <p>One difference between this module and Henstridge’s: his catalog objects supported access through a mapping API, but this appears to be unused and so is not currently supported.</p>    <h2 id="internationalizing-your-programs-and-modules">3. Internationalizing your programs and modules</h2> <p>Internationalization (I18N) refers to the operation by which a program is made aware of multiple languages. Localization (L10N) refers to the adaptation of your program, once internationalized, to the local language and cultural habits. In order to provide multilingual messages for your Python programs, you need to take the following steps:</p> <ol class="arabic simple"> <li>prepare your program or module by specially marking translatable strings</li> <li>run a suite of tools over your marked files to generate raw messages catalogs</li> <li>create language specific translations of the message catalogs</li> <li>use the <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> module so that message strings are properly translated</li> </ol> <p>In order to prepare your code for I18N, you need to look at all the strings in your files. Any string that needs to be translated should be marked by wrapping it in <code>_('...')</code> — that is, a call to the function <code>_()</code>. For example:</p> <pre data-language="python">filename = 'mylog.txt'
message = _('writing a log message')
fp = open(filename, 'w')
fp.write(message)
fp.close()
</pre> <p>In this example, the string <code>'writing a log message'</code> is marked as a candidate for translation, while the strings <code>'mylog.txt'</code> and <code>'w'</code> are not.</p> <p>The Python distribution comes with two tools which help you generate the message catalogs once you’ve prepared your source code. These may or may not be available from a binary distribution, but they can be found in a source distribution, in the <code>Tools/i18n</code> directory.</p> <p>The <strong class="program">pygettext</strong> <a class="footnote-reference brackets" href="#id8" id="id3">3</a> program scans all your Python source code looking for the strings you previously marked as translatable. It is similar to the GNU <strong class="program">gettext</strong> program except that it understands all the intricacies of Python source code, but knows nothing about C or C++ source code. You don’t need GNU <code>gettext</code> unless you’re also going to be translating C code (such as C extension modules).</p> <p><strong class="program">pygettext</strong> generates textual Uniforum-style human readable message catalog <code>.pot</code> files, essentially structured human readable files which contain every marked string in the source code, along with a placeholder for the translation strings. <strong class="program">pygettext</strong> is a command line script that supports a similar command line interface as <strong class="program">xgettext</strong>; for details on its use, run:</p> <pre data-language="python">pygettext.py --help
</pre> <p>Copies of these <code>.pot</code> files are then handed over to the individual human translators who write language-specific versions for every supported natural language. They send you back the filled in language-specific versions as a <code>.po</code> file. Using the <strong class="program">msgfmt.py</strong> <a class="footnote-reference brackets" href="#id9" id="id4">4</a> program (in the <code>Tools/i18n</code> directory), you take the <code>.po</code> files from your translators and generate the machine-readable <code>.mo</code> binary catalog files. The <code>.mo</code> files are what the <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> module uses for the actual translation processing during run-time.</p> <p>How you use the <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> module in your code depends on whether you are internationalizing a single module or your entire application. The next two sections will discuss each case.</p>  <h3 id="localizing-your-module">3.1. Localizing your module</h3> <p>If you are localizing your module, you must take care not to make global changes, e.g. to the built-in namespace. You should not use the GNU <code>gettext</code> API but instead the class-based API.</p> <p>Let’s say your module is called “spam” and the module’s various natural language translation <code>.mo</code> files reside in <code>/usr/share/locale</code> in GNU <strong class="program">gettext</strong> format. Here’s what you would put at the top of your module:</p> <pre data-language="python">import gettext
t = gettext.translation('spam', '/usr/share/locale')
_ = t.lgettext
</pre> <p>If your translators were providing you with Unicode strings in their <code>.po</code> files, you’d instead do:</p> <pre data-language="python">import gettext
t = gettext.translation('spam', '/usr/share/locale')
_ = t.ugettext
</pre>   <h3 id="localizing-your-application">3.2. Localizing your application</h3> <p>If you are localizing your application, you can install the <code>_()</code> function globally into the built-in namespace, usually in the main driver file of your application. This will let all your application-specific files just use <code>_('...')</code> without having to explicitly install it in each file.</p> <p>In the simple case then, you need only add the following bit of code to the main driver file of your application:</p> <pre data-language="python">import gettext
gettext.install('myapplication')
</pre> <p>If you need to set the locale directory or the <em>unicode</em> flag, you can pass these into the <a class="reference internal" href="#gettext.install" title="gettext.install"><code>install()</code></a> function:</p> <pre data-language="python">import gettext
gettext.install('myapplication', '/usr/share/locale', unicode=1)
</pre>   <h3 id="changing-languages-on-the-fly">3.3. Changing languages on the fly</h3> <p>If your program needs to support many languages at the same time, you may want to create multiple translation instances and then switch between them explicitly, like so:</p> <pre data-language="python">import gettext

lang1 = gettext.translation('myapplication', languages=['en'])
lang2 = gettext.translation('myapplication', languages=['fr'])
lang3 = gettext.translation('myapplication', languages=['de'])

# start by using language1
lang1.install()

# ... time goes by, user selects language 2
lang2.install()

# ... more time goes by, user selects language 3
lang3.install()
</pre>   <h3 id="deferred-translations">3.4. Deferred translations</h3> <p>In most coding situations, strings are translated where they are coded. Occasionally however, you need to mark strings for translation, but defer actual translation until later. A classic example is:</p> <pre data-language="python">animals = ['mollusk',
           'albatross',
           'rat',
           'penguin',
           'python', ]
# ...
for a in animals:
    print a
</pre> <p>Here, you want to mark the strings in the <code>animals</code> list as being translatable, but you don’t actually want to translate them until they are printed.</p> <p>Here is one way you can handle this situation:</p> <pre data-language="python">def _(message): return message

animals = [_('mollusk'),
           _('albatross'),
           _('rat'),
           _('penguin'),
           _('python'), ]

del _

# ...
for a in animals:
    print _(a)
</pre> <p>This works because the dummy definition of <code>_()</code> simply returns the string unchanged. And this dummy definition will temporarily override any definition of <code>_()</code> in the built-in namespace (until the <a class="reference internal" href="https://docs.python.org/2.7/reference/simple_stmts.html#del"><code>del</code></a> command). Take care, though if you have a previous definition of <code>_()</code> in the local namespace.</p> <p>Note that the second use of <code>_()</code> will not identify “a” as being translatable to the <strong class="program">pygettext</strong> program, since it is not a string.</p> <p>Another way to handle this is with the following example:</p> <pre data-language="python">def N_(message): return message

animals = [N_('mollusk'),
           N_('albatross'),
           N_('rat'),
           N_('penguin'),
           N_('python'), ]

# ...
for a in animals:
    print _(a)
</pre> <p>In this case, you are marking translatable strings with the function <code>N_()</code>, <a class="footnote-reference brackets" href="#id10" id="id5">5</a> which won’t conflict with any definition of <code>_()</code>. However, you will need to teach your message extraction program to look for translatable strings marked with <code>N_()</code>. <strong class="program">pygettext</strong> and <strong class="program">xpot</strong> both support this through the use of command line switches.</p>   <h3 id="gettext-vs-lgettext">3.5. <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a> vs. <a class="reference internal" href="#gettext.lgettext" title="gettext.lgettext"><code>lgettext()</code></a>
</h3> <p>In Python 2.4 the <a class="reference internal" href="#gettext.lgettext" title="gettext.lgettext"><code>lgettext()</code></a> family of functions were introduced. The intention of these functions is to provide an alternative which is more compliant with the current implementation of GNU gettext. Unlike <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext()</code></a>, which returns strings encoded with the same codeset used in the translation file, <a class="reference internal" href="#gettext.lgettext" title="gettext.lgettext"><code>lgettext()</code></a> will return strings encoded with the preferred system encoding, as returned by <a class="reference internal" href="locale#locale.getpreferredencoding" title="locale.getpreferredencoding"><code>locale.getpreferredencoding()</code></a>. Also notice that Python 2.4 introduces new functions to explicitly choose the codeset used in translated strings. If a codeset is explicitly set, even <a class="reference internal" href="#gettext.lgettext" title="gettext.lgettext"><code>lgettext()</code></a> will return translated strings in the requested codeset, as would be expected in the GNU gettext implementation.</p>    <h2 id="acknowledgements">4. Acknowledgements</h2> <p>The following people contributed code, feedback, design suggestions, previous implementations, and valuable experience to the creation of this module:</p> <ul class="simple"> <li>Peter Funk</li> <li>James Henstridge</li> <li>Juan David Ibáñez Palomar</li> <li>Marc-André Lemburg</li> <li>Martin von Löwis</li> <li>François Pinard</li> <li>Barry Warsaw</li> <li>Gustavo Niemeyer</li> </ul> <h4 class="rubric">Footnotes</h4> <dl class="footnote brackets"> <dt class="label" id="id6">
<code>1</code> </dt> <dd>
<p>The default locale directory is system dependent; for example, on RedHat Linux it is <code>/usr/share/locale</code>, but on Solaris it is <code>/usr/lib/locale</code>. The <a class="reference internal" href="#module-gettext" title="gettext: Multilingual internationalization services."><code>gettext</code></a> module does not try to support these system dependent defaults; instead its default is <code>sys.prefix/share/locale</code>. For this reason, it is always best to call <a class="reference internal" href="#gettext.bindtextdomain" title="gettext.bindtextdomain"><code>bindtextdomain()</code></a> with an explicit absolute path at the start of your application.</p> </dd> <dt class="label" id="id7">
<code>2</code> </dt> <dd>
<p>See the footnote for <a class="reference internal" href="#gettext.bindtextdomain" title="gettext.bindtextdomain"><code>bindtextdomain()</code></a> above.</p> </dd> <dt class="label" id="id8">
<code>3</code> </dt> <dd>
<p>François Pinard has written a program called <strong class="program">xpot</strong> which does a similar job. It is available as part of his <a class="reference external" href="https://github.com/pinard/po-utils">po-utils package</a>.</p> </dd> <dt class="label" id="id9">
<code>4</code> </dt> <dd>
<p><strong class="program">msgfmt.py</strong> is binary compatible with GNU <strong class="program">msgfmt</strong> except that it provides a simpler, all-Python implementation. With this and <strong class="program">pygettext.py</strong>, you generally won’t need to install the GNU <strong class="program">gettext</strong> package to internationalize your Python applications.</p> </dd> <dt class="label" id="id10">
<code>5</code> </dt> <dd>
<p>The choice of <code>N_()</code> here is totally arbitrary; it could have just as easily been <code>MarkThisStringForTranslation()</code>.</p> </dd> </dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2020 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/2.7/library/gettext.html" class="_attribution-link">https://docs.python.org/2.7/library/gettext.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
