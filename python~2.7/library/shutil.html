
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Shutil - Python 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" Source code&#58; Lib&#47;shutil.py ">
  <meta name="keywords" content="shutil, —, high-level, file, operations, python, python~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/python~2.7/library/shutil.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/python~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/python~2.7/" class="_nav-link" title="" style="margin-left:0;">Python 2.7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _python">
				
				
<h1 id="shutil-high-level-file-operations"> shutil — High-level file operations</h1> <p id="module-shutil"><strong>Source code:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/2.7/Lib/shutil.py">Lib/shutil.py</a></p>  <p>The <a class="reference internal" href="#module-shutil" title="shutil: High-level file operations, including copying."><code>shutil</code></a> module offers a number of high-level operations on files and collections of files. In particular, functions are provided which support file copying and removal. For operations on individual files, see also the <a class="reference internal" href="os#module-os" title="os: Miscellaneous operating system interfaces."><code>os</code></a> module.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Even the higher-level file copying functions (<a class="reference internal" href="#shutil.copy" title="shutil.copy"><code>shutil.copy()</code></a>, <a class="reference internal" href="#shutil.copy2" title="shutil.copy2"><code>shutil.copy2()</code></a>) can’t copy all file metadata.</p> <p>On POSIX platforms, this means that file owner and group are lost as well as ACLs. On Mac OS, the resource fork and other metadata are not used. This means that resources will be lost and file type and creator codes will not be correct. On Windows, file owners, ACLs and alternate data streams are not copied.</p> </div>  <h2 id="file-operations">1. Directory and files operations</h2> <dl class="function" id="directory-and-files-operations"> <dt id="shutil.copyfileobj">
<code>shutil.copyfileobj(fsrc, fdst[, length])</code> </dt> <dd>
<p>Copy the contents of the file-like object <em>fsrc</em> to the file-like object <em>fdst</em>. The integer <em>length</em>, if given, is the buffer size. In particular, a negative <em>length</em> value means to copy the data without looping over the source data in chunks; by default the data is read in chunks to avoid uncontrolled memory consumption. Note that if the current file position of the <em>fsrc</em> object is not 0, only the contents from the current file position to the end of the file will be copied.</p> </dd>
</dl> <dl class="function"> <dt id="shutil.copyfile">
<code>shutil.copyfile(src, dst)</code> </dt> <dd>
<p>Copy the contents (no metadata) of the file named <em>src</em> to a file named <em>dst</em>. <em>dst</em> must be the complete target file name; look at <a class="reference internal" href="#shutil.copy" title="shutil.copy"><code>shutil.copy()</code></a> for a copy that accepts a target directory path. If <em>src</em> and <em>dst</em> are the same files, <a class="reference internal" href="#shutil.Error" title="shutil.Error"><code>Error</code></a> is raised. The destination location must be writable; otherwise, an <a class="reference internal" href="exceptions#exceptions.IOError" title="exceptions.IOError"><code>IOError</code></a> exception will be raised. If <em>dst</em> already exists, it will be replaced. Special files such as character or block devices and pipes cannot be copied with this function. <em>src</em> and <em>dst</em> are path names given as strings.</p> </dd>
</dl> <dl class="function"> <dt id="shutil.copymode">
<code>shutil.copymode(src, dst)</code> </dt> <dd>
<p>Copy the permission bits from <em>src</em> to <em>dst</em>. The file contents, owner, and group are unaffected. <em>src</em> and <em>dst</em> are path names given as strings.</p> </dd>
</dl> <dl class="function"> <dt id="shutil.copystat">
<code>shutil.copystat(src, dst)</code> </dt> <dd>
<p>Copy the permission bits, last access time, last modification time, and flags from <em>src</em> to <em>dst</em>. The file contents, owner, and group are unaffected. <em>src</em> and <em>dst</em> are path names given as strings.</p> </dd>
</dl> <dl class="function"> <dt id="shutil.copy">
<code>shutil.copy(src, dst)</code> </dt> <dd>
<p>Copy the file <em>src</em> to the file or directory <em>dst</em>. If <em>dst</em> is a directory, a file with the same basename as <em>src</em> is created (or overwritten) in the directory specified. Permission bits are copied. <em>src</em> and <em>dst</em> are path names given as strings.</p> </dd>
</dl> <dl class="function"> <dt id="shutil.copy2">
<code>shutil.copy2(src, dst)</code> </dt> <dd>
<p>Identical to <a class="reference internal" href="#shutil.copy" title="shutil.copy"><code>copy()</code></a> except that <a class="reference internal" href="#shutil.copy2" title="shutil.copy2"><code>copy2()</code></a> also attempts to preserve file metadata.</p> <p><a class="reference internal" href="#shutil.copy2" title="shutil.copy2"><code>copy2()</code></a> uses <a class="reference internal" href="#shutil.copystat" title="shutil.copystat"><code>copystat()</code></a> to copy the file metadata. Please see <a class="reference internal" href="#shutil.copystat" title="shutil.copystat"><code>copystat()</code></a> for more information.</p> </dd>
</dl> <dl class="function"> <dt id="shutil.ignore_patterns">
<code>shutil.ignore_patterns(*patterns)</code> </dt> <dd>
<p>This factory function creates a function that can be used as a callable for <a class="reference internal" href="#shutil.copytree" title="shutil.copytree"><code>copytree()</code></a>’s <em>ignore</em> argument, ignoring files and directories that match one of the glob-style <em>patterns</em> provided. See the example below.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.6.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="shutil.copytree">
<code>shutil.copytree(src, dst, symlinks=False, ignore=None)</code> </dt> <dd>
<p>Recursively copy an entire directory tree rooted at <em>src</em>. The destination directory, named by <em>dst</em>, must not already exist; it will be created as well as missing parent directories. Permissions and times of directories are copied with <a class="reference internal" href="#shutil.copystat" title="shutil.copystat"><code>copystat()</code></a>, individual files are copied using <a class="reference internal" href="#shutil.copy2" title="shutil.copy2"><code>shutil.copy2()</code></a>.</p> <p>If <em>symlinks</em> is true, symbolic links in the source tree are represented as symbolic links in the new tree, but the metadata of the original links is NOT copied; if false or omitted, the contents and metadata of the linked files are copied to the new tree.</p> <p>If <em>ignore</em> is given, it must be a callable that will receive as its arguments the directory being visited by <a class="reference internal" href="#shutil.copytree" title="shutil.copytree"><code>copytree()</code></a>, and a list of its contents, as returned by <a class="reference internal" href="os#os.listdir" title="os.listdir"><code>os.listdir()</code></a>. Since <a class="reference internal" href="#shutil.copytree" title="shutil.copytree"><code>copytree()</code></a> is called recursively, the <em>ignore</em> callable will be called once for each directory that is copied. The callable must return a sequence of directory and file names relative to the current directory (i.e. a subset of the items in its second argument); these names will then be ignored in the copy process. <a class="reference internal" href="#shutil.ignore_patterns" title="shutil.ignore_patterns"><code>ignore_patterns()</code></a> can be used to create such a callable that ignores names based on glob-style patterns.</p> <p>If exception(s) occur, an <a class="reference internal" href="#shutil.Error" title="shutil.Error"><code>Error</code></a> is raised with a list of reasons.</p> <p>The source code for this should be considered an example rather than the ultimate tool.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.3: </span><a class="reference internal" href="#shutil.Error" title="shutil.Error"><code>Error</code></a> is raised if any exceptions occur during copying, rather than printing a message.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.5: </span>Create intermediate directories needed to create <em>dst</em>, rather than raising an error. Copy permissions and times of directories using <a class="reference internal" href="#shutil.copystat" title="shutil.copystat"><code>copystat()</code></a>.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.6: </span>Added the <em>ignore</em> argument to be able to influence what is being copied.</p> </div> </dd>
</dl> <dl class="function"> <dt id="shutil.rmtree">
<code>shutil.rmtree(path[, ignore_errors[, onerror]])</code> </dt> <dd>
<p id="index-1">Delete an entire directory tree; <em>path</em> must point to a directory (but not a symbolic link to a directory). If <em>ignore_errors</em> is true, errors resulting from failed removals will be ignored; if false or omitted, such errors are handled by calling a handler specified by <em>onerror</em> or, if that is omitted, they raise an exception.</p> <p>If <em>onerror</em> is provided, it must be a callable that accepts three parameters: <em>function</em>, <em>path</em>, and <em>excinfo</em>. The first parameter, <em>function</em>, is the function which raised the exception; it will be <a class="reference internal" href="os.path#os.path.islink" title="os.path.islink"><code>os.path.islink()</code></a>, <a class="reference internal" href="os#os.listdir" title="os.listdir"><code>os.listdir()</code></a>, <a class="reference internal" href="os#os.remove" title="os.remove"><code>os.remove()</code></a> or <a class="reference internal" href="os#os.rmdir" title="os.rmdir"><code>os.rmdir()</code></a>. The second parameter, <em>path</em>, will be the path name passed to <em>function</em>. The third parameter, <em>excinfo</em>, will be the exception information return by <a class="reference internal" href="sys#sys.exc_info" title="sys.exc_info"><code>sys.exc_info()</code></a>. Exceptions raised by <em>onerror</em> will not be caught.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.6: </span>Explicitly check for <em>path</em> being a symbolic link and raise <a class="reference internal" href="exceptions#exceptions.OSError" title="exceptions.OSError"><code>OSError</code></a> in that case.</p> </div> </dd>
</dl> <dl class="function"> <dt id="shutil.move">
<code>shutil.move(src, dst)</code> </dt> <dd>
<p>Recursively move a file or directory (<em>src</em>) to another location (<em>dst</em>).</p> <p>If the destination is an existing directory, then <em>src</em> is moved inside that directory. If the destination already exists but is not a directory, it may be overwritten depending on <a class="reference internal" href="os#os.rename" title="os.rename"><code>os.rename()</code></a> semantics.</p> <p>If the destination is on the current filesystem, then <a class="reference internal" href="os#os.rename" title="os.rename"><code>os.rename()</code></a> is used. Otherwise, <em>src</em> is copied (using <a class="reference internal" href="#shutil.copy2" title="shutil.copy2"><code>shutil.copy2()</code></a>) to <em>dst</em> and then removed.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl> <dl class="exception"> <dt id="shutil.Error">
<code>exception shutil.Error</code> </dt> <dd>
<p>This exception collects exceptions that are raised during a multi-file operation. For <a class="reference internal" href="#shutil.copytree" title="shutil.copytree"><code>copytree()</code></a>, the exception argument is a list of 3-tuples (<em>srcname</em>, <em>dstname</em>, <em>exception</em>).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl>  <h3 id="id1">1.1. copytree example</h3> <p id="copytree-example">This example is the implementation of the <a class="reference internal" href="#shutil.copytree" title="shutil.copytree"><code>copytree()</code></a> function, described above, with the docstring omitted. It demonstrates many of the other functions provided by this module.</p> <pre data-language="python">def copytree(src, dst, symlinks=False, ignore=None):
    names = os.listdir(src)
    if ignore is not None:
        ignored_names = ignore(src, names)
    else:
        ignored_names = set()

    os.makedirs(dst)
    errors = []
    for name in names:
        if name in ignored_names:
            continue
        srcname = os.path.join(src, name)
        dstname = os.path.join(dst, name)
        try:
            if symlinks and os.path.islink(srcname):
                linkto = os.readlink(srcname)
                os.symlink(linkto, dstname)
            elif os.path.isdir(srcname):
                copytree(srcname, dstname, symlinks, ignore)
            else:
                copy2(srcname, dstname)
            # XXX What about devices, sockets etc.?
        except (IOError, os.error) as why:
            errors.append((srcname, dstname, str(why)))
        # catch the Error from the recursive copytree so that we can
        # continue with other files
        except Error as err:
            errors.extend(err.args[0])
    try:
        copystat(src, dst)
    except WindowsError:
        # can't copy file access times on Windows
        pass
    except OSError as why:
        errors.extend((src, dst, str(why)))
    if errors:
        raise Error(errors)
</pre> <p>Another example that uses the <a class="reference internal" href="#shutil.ignore_patterns" title="shutil.ignore_patterns"><code>ignore_patterns()</code></a> helper:</p> <pre data-language="python">from shutil import copytree, ignore_patterns

copytree(source, destination, ignore=ignore_patterns('*.pyc', 'tmp*'))
</pre> <p>This will copy everything except <code>.pyc</code> files and files or directories whose name starts with <code>tmp</code>.</p> <p>Another example that uses the <em>ignore</em> argument to add a logging call:</p> <pre data-language="python">from shutil import copytree
import logging

def _logpath(path, names):
    logging.info('Working in %s' % path)
    return []   # nothing will be ignored

copytree(source, destination, ignore=_logpath)
</pre>    <h2 id="id2">2. Archiving operations</h2> <p id="archiving-operations">High-level utilities to create and read compressed and archived files are also provided. They rely on the <a class="reference internal" href="zipfile#module-zipfile" title="zipfile: Read and write ZIP-format archive files."><code>zipfile</code></a> and <a class="reference internal" href="tarfile#module-tarfile" title="tarfile: Read and write tar-format archive files."><code>tarfile</code></a> modules.</p> <dl class="function"> <dt id="shutil.make_archive">
<code>shutil.make_archive(base_name, format[, root_dir[, base_dir[, verbose[, dry_run[, owner[, group[, logger]]]]]]])</code> </dt> <dd>
<p>Create an archive file (eg. zip or tar) and returns its name.</p> <p><em>base_name</em> is the name of the file to create, including the path, minus any format-specific extension. <em>format</em> is the archive format: one of “zip” (if the <a class="reference internal" href="zlib#module-zlib" title="zlib: Low-level interface to compression and decompression routines compatible with gzip."><code>zlib</code></a> module or external <code>zip</code> executable is available), “tar”, “gztar” (if the <a class="reference internal" href="zlib#module-zlib" title="zlib: Low-level interface to compression and decompression routines compatible with gzip."><code>zlib</code></a> module is available), or “bztar” (if the <a class="reference internal" href="bz2#module-bz2" title="bz2: Interface to compression and decompression routines compatible with bzip2."><code>bz2</code></a> module is available).</p> <p><em>root_dir</em> is a directory that will be the root directory of the archive; ie. we typically chdir into <em>root_dir</em> before creating the archive.</p> <p><em>base_dir</em> is the directory where we start archiving from; ie. <em>base_dir</em> will be the common prefix of all files and directories in the archive.</p> <p><em>root_dir</em> and <em>base_dir</em> both default to the current directory.</p> <p><em>owner</em> and <em>group</em> are used when creating a tar archive. By default, uses the current owner and group.</p> <p><em>logger</em> must be an object compatible with <a class="pep reference external" href="https://www.python.org/dev/peps/pep-0282" id="index-2"><strong>PEP 282</strong></a>, usually an instance of <a class="reference internal" href="logging#logging.Logger" title="logging.Logger"><code>logging.Logger</code></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="shutil.get_archive_formats">
<code>shutil.get_archive_formats()</code> </dt> <dd>
<p>Return a list of supported formats for archiving. Each element of the returned sequence is a tuple <code>(name, description)</code>.</p> <p>By default <a class="reference internal" href="#module-shutil" title="shutil: High-level file operations, including copying."><code>shutil</code></a> provides these formats:</p> <ul class="simple"> <li>
<em>zip</em>: ZIP file (if the <a class="reference internal" href="zlib#module-zlib" title="zlib: Low-level interface to compression and decompression routines compatible with gzip."><code>zlib</code></a> module or external <code>zip</code> executable is available).</li> <li>
<em>tar</em>: uncompressed tar file.</li> <li>
<em>gztar</em>: gzip’ed tar-file (if the <a class="reference internal" href="zlib#module-zlib" title="zlib: Low-level interface to compression and decompression routines compatible with gzip."><code>zlib</code></a> module is available).</li> <li>
<em>bztar</em>: bzip2’ed tar-file (if the <a class="reference internal" href="bz2#module-bz2" title="bz2: Interface to compression and decompression routines compatible with bzip2."><code>bz2</code></a> module is available).</li> </ul> <p>You can register new formats or provide your own archiver for any existing formats, by using <a class="reference internal" href="#shutil.register_archive_format" title="shutil.register_archive_format"><code>register_archive_format()</code></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="shutil.register_archive_format">
<code>shutil.register_archive_format(name, function[, extra_args[, description]])</code> </dt> <dd>
<p>Register an archiver for the format <em>name</em>. <em>function</em> is a callable that will be used to invoke the archiver.</p> <p>If given, <em>extra_args</em> is a sequence of <code>(name, value)</code> that will be used as extra keywords arguments when the archiver callable is used.</p> <p><em>description</em> is used by <a class="reference internal" href="#shutil.get_archive_formats" title="shutil.get_archive_formats"><code>get_archive_formats()</code></a> which returns the list of archivers. Defaults to an empty list.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="shutil.unregister_archive_format">
<code>shutil.unregister_archive_format(name)</code> </dt> <dd>
<p>Remove the archive format <em>name</em> from the list of supported formats.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </dd>
</dl>  <h3 id="id3">2.1. Archiving example</h3> <p id="archiving-example">In this example, we create a gzip’ed tar-file archive containing all files found in the <code>.ssh</code> directory of the user:</p> <pre data-language="python">&gt;&gt;&gt; from shutil import make_archive
&gt;&gt;&gt; import os
&gt;&gt;&gt; archive_name = os.path.expanduser(os.path.join('~', 'myarchive'))
&gt;&gt;&gt; root_dir = os.path.expanduser(os.path.join('~', '.ssh'))
&gt;&gt;&gt; make_archive(archive_name, 'gztar', root_dir)
'/Users/tarek/myarchive.tar.gz'
</pre> <p>The resulting archive contains:</p> <pre data-language="shell">$ tar -tzvf /Users/tarek/myarchive.tar.gz
drwx------ tarek/staff       0 2010-02-01 16:23:40 ./
-rw-r--r-- tarek/staff     609 2008-06-09 13:26:54 ./authorized_keys
-rwxr-xr-x tarek/staff      65 2008-06-09 13:26:54 ./config
-rwx------ tarek/staff     668 2008-06-09 13:26:54 ./id_dsa
-rwxr-xr-x tarek/staff     609 2008-06-09 13:26:54 ./id_dsa.pub
-rw------- tarek/staff    1675 2008-06-09 13:26:54 ./id_rsa
-rw-r--r-- tarek/staff     397 2008-06-09 13:26:54 ./id_rsa.pub
-rw-r--r-- tarek/staff   37192 2010-02-06 18:23:10 ./known_hosts
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2020 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/2.7/library/shutil.html" class="_attribution-link">https://docs.python.org/2.7/library/shutil.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
