
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Hotshot - Python 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.2. ">
  <meta name="keywords" content="hotshot, —, high, performance, logging, profiler, python, python~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/python~2.7/library/hotshot.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/python~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/python~2.7/" class="_nav-link" title="" style="margin-left:0;">Python 2.7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _python">
				
				
<h1 id="hotshot-high-performance-logging-profiler"> hotshot — High performance logging profiler</h1> <div class="versionadded" id="module-hotshot"> <p><span class="versionmodified added">New in version 2.2.</span></p> </div> <p>This module provides a nicer interface to the <code>_hotshot</code> C module. Hotshot is a replacement for the existing <a class="reference internal" href="profile#module-profile" title="profile: Python source profiler."><code>profile</code></a> module. As it’s written mostly in C, it should result in a much smaller performance impact than the existing <a class="reference internal" href="profile#module-profile" title="profile: Python source profiler."><code>profile</code></a> module.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <a class="reference internal" href="#module-hotshot" title="hotshot: High performance logging profiler, mostly written in C."><code>hotshot</code></a> module focuses on minimizing the overhead while profiling, at the expense of long data post-processing times. For common usage it is recommended to use <a class="reference internal" href="profile#module-cProfile" title="cProfile"><code>cProfile</code></a> instead. <a class="reference internal" href="#module-hotshot" title="hotshot: High performance logging profiler, mostly written in C."><code>hotshot</code></a> is not maintained and might be removed from the standard library in the future.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.5: </span>The results should be more meaningful than in the past: the timing core contained a critical bug.</p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <a class="reference internal" href="#module-hotshot" title="hotshot: High performance logging profiler, mostly written in C."><code>hotshot</code></a> profiler does not yet work well with threads. It is useful to use an unthreaded script to run the profiler over the code you’re interested in measuring if at all possible.</p> </div> <dl class="class"> <dt id="hotshot.Profile">
<code>class hotshot.Profile(logfile[, lineevents[, linetimings]])</code> </dt> <dd>
<p>The profiler object. The argument <em>logfile</em> is the name of a log file to use for logged profile data. The argument <em>lineevents</em> specifies whether to generate events for every source line, or just on function call/return. It defaults to <code>0</code> (only log function call/return). The argument <em>linetimings</em> specifies whether to record timing information. It defaults to <code>1</code> (store timing information).</p> </dd>
</dl>  <h2 id="hotshot-objects">1. Profile Objects</h2> <p id="profile-objects">Profile objects have the following methods:</p> <dl class="method"> <dt id="hotshot.Profile.addinfo">
<code>Profile.addinfo(key, value)</code> </dt> <dd>
<p>Add an arbitrary labelled value to the profile output.</p> </dd>
</dl> <dl class="method"> <dt id="hotshot.Profile.close">
<code>Profile.close()</code> </dt> <dd>
<p>Close the logfile and terminate the profiler.</p> </dd>
</dl> <dl class="method"> <dt id="hotshot.Profile.fileno">
<code>Profile.fileno()</code> </dt> <dd>
<p>Return the file descriptor of the profiler’s log file.</p> </dd>
</dl> <dl class="method"> <dt id="hotshot.Profile.run">
<code>Profile.run(cmd)</code> </dt> <dd>
<p>Profile an <a class="reference internal" href="https://docs.python.org/2.7/reference/simple_stmts.html#exec"><code>exec</code></a>-compatible string in the script environment. The globals from the <a class="reference internal" href="__main__#module-__main__" title="__main__: The environment where the top-level script is run."><code>__main__</code></a> module are used as both the globals and locals for the script.</p> </dd>
</dl> <dl class="method"> <dt id="hotshot.Profile.runcall">
<code>Profile.runcall(func, *args, **keywords)</code> </dt> <dd>
<p>Profile a single call of a callable. Additional positional and keyword arguments may be passed along; the result of the call is returned, and exceptions are allowed to propagate cleanly, while ensuring that profiling is disabled on the way out.</p> </dd>
</dl> <dl class="method"> <dt id="hotshot.Profile.runctx">
<code>Profile.runctx(cmd, globals, locals)</code> </dt> <dd>
<p>Evaluate an <a class="reference internal" href="https://docs.python.org/2.7/reference/simple_stmts.html#exec"><code>exec</code></a>-compatible string in a specific environment. The string is compiled before profiling begins.</p> </dd>
</dl> <dl class="method"> <dt id="hotshot.Profile.start">
<code>Profile.start()</code> </dt> <dd>
<p>Start the profiler.</p> </dd>
</dl> <dl class="method"> <dt id="hotshot.Profile.stop">
<code>Profile.stop()</code> </dt> <dd>
<p>Stop the profiler.</p> </dd>
</dl>   <h2 id="using-hotshot-data">2. Using hotshot data</h2> <div class="versionadded" id="module-hotshot.stats"> <p><span class="versionmodified added">New in version 2.2.</span></p> </div> <p>This module loads hotshot profiling data into the standard <a class="reference internal" href="profile#module-pstats" title="pstats: Statistics object for use with the profiler."><code>pstats</code></a> Stats objects.</p> <dl class="function"> <dt id="hotshot.stats.load">
<code>hotshot.stats.load(filename)</code> </dt> <dd>
<p>Load hotshot data from <em>filename</em>. Returns an instance of the <a class="reference internal" href="profile#pstats.Stats" title="pstats.Stats"><code>pstats.Stats</code></a> class.</p> </dd>
</dl> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt>
<code>Module</code> <a class="reference internal" href="profile#module-profile" title="profile: Python source profiler."><code>profile</code></a>
</dt>
<dd>
<p>The <a class="reference internal" href="profile#module-profile" title="profile: Python source profiler."><code>profile</code></a> module’s <code>Stats</code> class</p> </dd> </dl> </div>   <h2 id="hotshot-example">3. Example Usage</h2> <p id="example-usage">Note that this example runs the Python “benchmark” pystones. It can take some time to run, and will produce large output files.</p> <pre data-language="python">&gt;&gt;&gt; import hotshot, hotshot.stats, test.pystone
&gt;&gt;&gt; prof = hotshot.Profile("stones.prof")
&gt;&gt;&gt; benchtime, stones = prof.runcall(test.pystone.pystones)
&gt;&gt;&gt; prof.close()
&gt;&gt;&gt; stats = hotshot.stats.load("stones.prof")
&gt;&gt;&gt; stats.strip_dirs()
&gt;&gt;&gt; stats.sort_stats('time', 'calls')
&gt;&gt;&gt; stats.print_stats(20)
         850004 function calls in 10.090 CPU seconds

   Ordered by: internal time, call count

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    3.295    3.295   10.090   10.090 pystone.py:79(Proc0)
   150000    1.315    0.000    1.315    0.000 pystone.py:203(Proc7)
    50000    1.313    0.000    1.463    0.000 pystone.py:229(Func2)
 .
 .
 .
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2020 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/2.7/library/hotshot.html" class="_attribution-link">https://docs.python.org/2.7/library/hotshot.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
