
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Popen2 - Python 2.7 - W3cubDocs</title>
  
  <meta name="description" content="Deprecated since version 2.6&#58; This module is obsolete. Use the subprocess module. Check especially the Replacing Older Functions with the &hellip;">
  <meta name="keywords" content="popen, —, subprocesses, with, accessible, i, o, streams, python, python~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/python~2.7/library/popen2.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/python~2.7.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/python~2.7/" class="_nav-link" title="" style="margin-left:0;">Python 2.7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _python">
				
				
<h1 id="popen2-subprocesses-with-accessible-i-o-streams"> popen2 — Subprocesses with accessible I/O streams</h1> <div class="deprecated" id="module-popen2"> <p><span class="versionmodified deprecated">Deprecated since version 2.6: </span>This module is obsolete. Use the <a class="reference internal" href="subprocess#module-subprocess" title="subprocess: Subprocess management."><code>subprocess</code></a> module. Check especially the <a class="reference internal" href="subprocess#subprocess-replacements"><span class="std std-ref">Replacing Older Functions with the subprocess Module</span></a> section.</p> </div> <p>This module allows you to spawn processes and connect to their input/output/error pipes and obtain their return codes under Unix and Windows.</p> <p>The <a class="reference internal" href="subprocess#module-subprocess" title="subprocess: Subprocess management."><code>subprocess</code></a> module provides more powerful facilities for spawning new processes and retrieving their results. Using the <a class="reference internal" href="subprocess#module-subprocess" title="subprocess: Subprocess management."><code>subprocess</code></a> module is preferable to using the <a class="reference internal" href="#module-popen2" title="popen2: Subprocesses with accessible standard I/O streams. (deprecated)"><code>popen2</code></a> module.</p> <p>The primary interface offered by this module is a trio of factory functions. For each of these, if <em>bufsize</em> is specified, it specifies the buffer size for the I/O pipes. <em>mode</em>, if provided, should be the string <code>'b'</code> or <code>'t'</code>; on Windows this is needed to determine whether the file objects should be opened in binary or text mode. The default value for <em>mode</em> is <code>'t'</code>.</p> <p>On Unix, <em>cmd</em> may be a sequence, in which case arguments will be passed directly to the program without shell intervention (as with <a class="reference internal" href="os#os.spawnv" title="os.spawnv"><code>os.spawnv()</code></a>). If <em>cmd</em> is a string it will be passed to the shell (as with <a class="reference internal" href="os#os.system" title="os.system"><code>os.system()</code></a>).</p> <p>The only way to retrieve the return codes for the child processes is by using the <code>poll()</code> or <code>wait()</code> methods on the <a class="reference internal" href="#popen2.Popen3" title="popen2.Popen3"><code>Popen3</code></a> and <a class="reference internal" href="#popen2.Popen4" title="popen2.Popen4"><code>Popen4</code></a> classes; these are only available on Unix. This information is not available when using the <a class="reference internal" href="#module-popen2" title="popen2: Subprocesses with accessible standard I/O streams. (deprecated)"><code>popen2()</code></a>, <a class="reference internal" href="#popen2.popen3" title="popen2.popen3"><code>popen3()</code></a>, and <a class="reference internal" href="#popen2.popen4" title="popen2.popen4"><code>popen4()</code></a> functions, or the equivalent functions in the <a class="reference internal" href="os#module-os" title="os: Miscellaneous operating system interfaces."><code>os</code></a> module. (Note that the tuples returned by the <a class="reference internal" href="os#module-os" title="os: Miscellaneous operating system interfaces."><code>os</code></a> module’s functions are in a different order from the ones returned by the <a class="reference internal" href="#module-popen2" title="popen2: Subprocesses with accessible standard I/O streams. (deprecated)"><code>popen2</code></a> module.)</p> <dl class="function"> <dt id="popen2.popen2">
<code>popen2.popen2(cmd[, bufsize[, mode]])</code> </dt> <dd>
<p>Executes <em>cmd</em> as a sub-process. Returns the file objects <code>(child_stdout,
child_stdin)</code>.</p> </dd>
</dl> <dl class="function"> <dt id="popen2.popen3">
<code>popen2.popen3(cmd[, bufsize[, mode]])</code> </dt> <dd>
<p>Executes <em>cmd</em> as a sub-process. Returns the file objects <code>(child_stdout,
child_stdin, child_stderr)</code>.</p> </dd>
</dl> <dl class="function"> <dt id="popen2.popen4">
<code>popen2.popen4(cmd[, bufsize[, mode]])</code> </dt> <dd>
<p>Executes <em>cmd</em> as a sub-process. Returns the file objects <code>(child_stdout_and_stderr, child_stdin)</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.0.</span></p> </div> </dd>
</dl> <p>On Unix, a class defining the objects returned by the factory functions is also available. These are not used for the Windows implementation, and are not available on that platform.</p> <dl class="class"> <dt id="popen2.Popen3">
<code>class popen2.Popen3(cmd[, capturestderr[, bufsize]])</code> </dt> <dd>
<p>This class represents a child process. Normally, <a class="reference internal" href="#popen2.Popen3" title="popen2.Popen3"><code>Popen3</code></a> instances are created using the <a class="reference internal" href="#module-popen2" title="popen2: Subprocesses with accessible standard I/O streams. (deprecated)"><code>popen2()</code></a> and <a class="reference internal" href="#popen2.popen3" title="popen2.popen3"><code>popen3()</code></a> factory functions described above.</p> <p>If not using one of the helper functions to create <a class="reference internal" href="#popen2.Popen3" title="popen2.Popen3"><code>Popen3</code></a> objects, the parameter <em>cmd</em> is the shell command to execute in a sub-process. The <em>capturestderr</em> flag, if true, specifies that the object should capture standard error output of the child process. The default is false. If the <em>bufsize</em> parameter is specified, it specifies the size of the I/O buffers to/from the child process.</p> </dd>
</dl> <dl class="class"> <dt id="popen2.Popen4">
<code>class popen2.Popen4(cmd[, bufsize])</code> </dt> <dd>
<p>Similar to <a class="reference internal" href="#popen2.Popen3" title="popen2.Popen3"><code>Popen3</code></a>, but always captures standard error into the same file object as standard output. These are typically created using <a class="reference internal" href="#popen2.popen4" title="popen2.popen4"><code>popen4()</code></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.0.</span></p> </div> </dd>
</dl>  <h2 id="popen3-objects">1. Popen3 and Popen4 Objects</h2> <p id="popen3-and-popen4-objects">Instances of the <a class="reference internal" href="#popen2.Popen3" title="popen2.Popen3"><code>Popen3</code></a> and <a class="reference internal" href="#popen2.Popen4" title="popen2.Popen4"><code>Popen4</code></a> classes have the following methods:</p> <dl class="method"> <dt id="popen2.Popen3.poll">
<code>Popen3.poll()</code> </dt> <dd>
<p>Returns <code>-1</code> if child process hasn’t completed yet, or its status code (see <a class="reference internal" href="#popen2.Popen3.wait" title="popen2.Popen3.wait"><code>wait()</code></a>) otherwise.</p> </dd>
</dl> <dl class="method"> <dt id="popen2.Popen3.wait">
<code>Popen3.wait()</code> </dt> <dd>
<p>Waits for and returns the status code of the child process. The status code encodes both the return code of the process and information about whether it exited using the <code>exit()</code> system call or died due to a signal. Functions to help interpret the status code are defined in the <a class="reference internal" href="os#module-os" title="os: Miscellaneous operating system interfaces."><code>os</code></a> module; see section <a class="reference internal" href="os#os-process"><span class="std std-ref">Process Management</span></a> for the <code>W*()</code> family of functions.</p> </dd>
</dl> <p>The following attributes are also available:</p> <dl class="attribute"> <dt id="popen2.Popen3.fromchild">
<code>Popen3.fromchild</code> </dt> <dd>
<p>A file object that provides output from the child process. For <a class="reference internal" href="#popen2.Popen4" title="popen2.Popen4"><code>Popen4</code></a> instances, this will provide both the standard output and standard error streams.</p> </dd>
</dl> <dl class="attribute"> <dt id="popen2.Popen3.tochild">
<code>Popen3.tochild</code> </dt> <dd>
<p>A file object that provides input to the child process.</p> </dd>
</dl> <dl class="attribute"> <dt id="popen2.Popen3.childerr">
<code>Popen3.childerr</code> </dt> <dd>
<p>A file object that provides error output from the child process, if <em>capturestderr</em> was true for the constructor, otherwise <code>None</code>. This will always be <code>None</code> for <a class="reference internal" href="#popen2.Popen4" title="popen2.Popen4"><code>Popen4</code></a> instances.</p> </dd>
</dl> <dl class="attribute"> <dt id="popen2.Popen3.pid">
<code>Popen3.pid</code> </dt> <dd>
<p>The process ID of the child process.</p> </dd>
</dl>   <h2 id="popen2-flow-control">2. Flow Control Issues</h2> <p id="flow-control-issues">Any time you are working with any form of inter-process communication, control flow needs to be carefully thought out. This remains the case with the file objects provided by this module (or the <a class="reference internal" href="os#module-os" title="os: Miscellaneous operating system interfaces."><code>os</code></a> module equivalents).</p> <p>When reading output from a child process that writes a lot of data to standard error while the parent is reading from the child’s standard output, a deadlock can occur. A similar situation can occur with other combinations of reads and writes. The essential factors are that more than <code>_PC_PIPE_BUF</code> bytes are being written by one process in a blocking fashion, while the other process is reading from the first process, also in a blocking fashion.</p> <p>There are several ways to deal with this situation.</p> <p>The simplest application change, in many cases, will be to follow this model in the parent process:</p> <pre data-language="python">import popen2

r, w, e = popen2.popen3('python slave.py')
e.readlines()
r.readlines()
r.close()
e.close()
w.close()
</pre> <p>with code like this in the child:</p> <pre data-language="python">import os
import sys

# note that each of these print statements
# writes a single long string

print &gt;&gt;sys.stderr, 400 * 'this is a test\n'
os.close(sys.stderr.fileno())
print &gt;&gt;sys.stdout, 400 * 'this is another test\n'
</pre> <p>In particular, note that <code>sys.stderr</code> must be closed after writing all data, or <code>readlines()</code> won’t return. Also note that <a class="reference internal" href="os#os.close" title="os.close"><code>os.close()</code></a> must be used, as <code>sys.stderr.close()</code> won’t close <code>stderr</code> (otherwise assigning to <code>sys.stderr</code> will silently close it, so no further errors can be printed).</p> <p>Applications which need to support a more general approach should integrate I/O over pipes with their <a class="reference internal" href="select#module-select" title="select: Wait for I/O completion on multiple streams."><code>select()</code></a> loops, or use separate threads to read each of the individual files provided by whichever <code>popen*()</code> function or <code>Popen*</code> class was used.</p> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt>
<code>Module</code> <a class="reference internal" href="subprocess#module-subprocess" title="subprocess: Subprocess management."><code>subprocess</code></a>
</dt>
<dd>
<p>Module for spawning and managing subprocesses.</p> </dd> </dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2020 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/2.7/library/popen2.html" class="_attribution-link">https://docs.python.org/2.7/library/popen2.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
