
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Tempfile - Python 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" Source code&#58; Lib&#47;tempfile.py ">
  <meta name="keywords" content="tempfile, —, generate, temporary, files, and, directories, python, python~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/python~2.7/library/tempfile.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/python~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/python~2.7/" class="_nav-link" title="" style="margin-left:0;">Python 2.7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _python">
				
				
<h1 id="tempfile-generate-temporary-files-and-directories"> tempfile — Generate temporary files and directories</h1> <p id="module-tempfile"><strong>Source code:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/2.7/Lib/tempfile.py">Lib/tempfile.py</a></p>  <p>This module generates temporary files and directories. It works on all supported platforms.</p> <p>In version 2.3 of Python, this module was overhauled for enhanced security. It now provides three new functions, <a class="reference internal" href="#tempfile.NamedTemporaryFile" title="tempfile.NamedTemporaryFile"><code>NamedTemporaryFile()</code></a>, <a class="reference internal" href="#tempfile.mkstemp" title="tempfile.mkstemp"><code>mkstemp()</code></a>, and <a class="reference internal" href="#tempfile.mkdtemp" title="tempfile.mkdtemp"><code>mkdtemp()</code></a>, which should eliminate all remaining need to use the insecure <a class="reference internal" href="#tempfile.mktemp" title="tempfile.mktemp"><code>mktemp()</code></a> function. Temporary file names created by this module no longer contain the process ID; instead a string of six random characters is used.</p> <p>Also, all the user-callable functions now take additional arguments which allow direct control over the location and name of temporary files. It is no longer necessary to use the global <em>tempdir</em> and <em>template</em> variables. To maintain backward compatibility, the argument order is somewhat odd; it is recommended to use keyword arguments for clarity.</p> <p>The module defines the following user-callable functions:</p> <dl class="function"> <dt id="tempfile.TemporaryFile">
<code>tempfile.TemporaryFile([mode='w+b'[, bufsize=-1[, suffix=''[, prefix='tmp'[, dir=None]]]]])</code> </dt> <dd>
<p>Return a file-like object that can be used as a temporary storage area. The file is created using <a class="reference internal" href="#tempfile.mkstemp" title="tempfile.mkstemp"><code>mkstemp()</code></a>. It will be destroyed as soon as it is closed (including an implicit close when the object is garbage collected). Under Unix, the directory entry for the file is removed immediately after the file is created. Other platforms do not support this; your code should not rely on a temporary file created using this function having or not having a visible name in the file system.</p> <p>The <em>mode</em> parameter defaults to <code>'w+b'</code> so that the file created can be read and written without being closed. Binary mode is used so that it behaves consistently on all platforms without regard for the data that is stored. <em>bufsize</em> defaults to <code>-1</code>, meaning that the operating system default is used.</p> <p>The <em>dir</em>, <em>prefix</em> and <em>suffix</em> parameters are passed to <a class="reference internal" href="#tempfile.mkstemp" title="tempfile.mkstemp"><code>mkstemp()</code></a>.</p> <p>The returned object is a true file object on POSIX platforms. On other platforms, it is a file-like object whose <code>file</code> attribute is the underlying true file object. This file-like object can be used in a <a class="reference internal" href="https://docs.python.org/2.7/reference/compound_stmts.html#with"><code>with</code></a> statement, just like a normal file.</p> </dd>
</dl> <dl class="function"> <dt id="tempfile.NamedTemporaryFile">
<code>tempfile.NamedTemporaryFile([mode='w+b'[, bufsize=-1[, suffix=''[, prefix='tmp'[, dir=None[, delete=True]]]]]])</code> </dt> <dd>
<p>This function operates exactly as <a class="reference internal" href="#tempfile.TemporaryFile" title="tempfile.TemporaryFile"><code>TemporaryFile()</code></a> does, except that the file is guaranteed to have a visible name in the file system (on Unix, the directory entry is not unlinked). That name can be retrieved from the <code>name</code> attribute of the returned file-like object. Whether the name can be used to open the file a second time, while the named temporary file is still open, varies across platforms (it can be so used on Unix; it cannot on Windows NT or later). If <em>delete</em> is true (the default), the file is deleted as soon as it is closed.</p> <p>The returned object is always a file-like object whose <code>file</code> attribute is the underlying true file object. This file-like object can be used in a <a class="reference internal" href="https://docs.python.org/2.7/reference/compound_stmts.html#with"><code>with</code></a> statement, just like a normal file.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.6: </span>The <em>delete</em> parameter.</p> </div> </dd>
</dl> <dl class="function"> <dt id="tempfile.SpooledTemporaryFile">
<code>tempfile.SpooledTemporaryFile([max_size=0[, mode='w+b'[, bufsize=-1[, suffix=''[, prefix='tmp'[, dir=None]]]]]])</code> </dt> <dd>
<p>This function operates exactly as <a class="reference internal" href="#tempfile.TemporaryFile" title="tempfile.TemporaryFile"><code>TemporaryFile()</code></a> does, except that data is spooled in memory until the file size exceeds <em>max_size</em>, or until the file’s <code>fileno()</code> method is called, at which point the contents are written to disk and operation proceeds as with <a class="reference internal" href="#tempfile.TemporaryFile" title="tempfile.TemporaryFile"><code>TemporaryFile()</code></a>. Also, it’s <code>truncate</code> method does not accept a <code>size</code> argument.</p> <p>The resulting file has one additional method, <code>rollover()</code>, which causes the file to roll over to an on-disk file regardless of its size.</p> <p>The returned object is a file-like object whose <code>_file</code> attribute is either a <a class="reference internal" href="stringio#StringIO.StringIO" title="StringIO.StringIO"><code>StringIO</code></a> object or a true file object, depending on whether <code>rollover()</code> has been called. This file-like object can be used in a <a class="reference internal" href="https://docs.python.org/2.7/reference/compound_stmts.html#with"><code>with</code></a> statement, just like a normal file.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.6.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="tempfile.mkstemp">
<code>tempfile.mkstemp([suffix=''[, prefix='tmp'[, dir=None[, text=False]]]])</code> </dt> <dd>
<p>Creates a temporary file in the most secure manner possible. There are no race conditions in the file’s creation, assuming that the platform properly implements the <a class="reference internal" href="os#os.O_EXCL" title="os.O_EXCL"><code>os.O_EXCL</code></a> flag for <a class="reference internal" href="os#os.open" title="os.open"><code>os.open()</code></a>. The file is readable and writable only by the creating user ID. If the platform uses permission bits to indicate whether a file is executable, the file is executable by no one. The file descriptor is not inherited by child processes.</p> <p>Unlike <a class="reference internal" href="#tempfile.TemporaryFile" title="tempfile.TemporaryFile"><code>TemporaryFile()</code></a>, the user of <a class="reference internal" href="#tempfile.mkstemp" title="tempfile.mkstemp"><code>mkstemp()</code></a> is responsible for deleting the temporary file when done with it.</p> <p>If <em>suffix</em> is specified, the file name will end with that suffix, otherwise there will be no suffix. <a class="reference internal" href="#tempfile.mkstemp" title="tempfile.mkstemp"><code>mkstemp()</code></a> does not put a dot between the file name and the suffix; if you need one, put it at the beginning of <em>suffix</em>.</p> <p>If <em>prefix</em> is specified, the file name will begin with that prefix; otherwise, a default prefix is used.</p> <p>If <em>dir</em> is specified, the file will be created in that directory; otherwise, a default directory is used. The default directory is chosen from a platform-dependent list, but the user of the application can control the directory location by setting the <em>TMPDIR</em>, <em>TEMP</em> or <em>TMP</em> environment variables. There is thus no guarantee that the generated filename will have any nice properties, such as not requiring quoting when passed to external commands via <code>os.popen()</code>.</p> <p>If <em>text</em> is specified, it indicates whether to open the file in binary mode (the default) or text mode. On some platforms, this makes no difference.</p> <p><a class="reference internal" href="#tempfile.mkstemp" title="tempfile.mkstemp"><code>mkstemp()</code></a> returns a tuple containing an OS-level handle to an open file (as would be returned by <a class="reference internal" href="os#os.open" title="os.open"><code>os.open()</code></a>) and the absolute pathname of that file, in that order.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="tempfile.mkdtemp">
<code>tempfile.mkdtemp([suffix=''[, prefix='tmp'[, dir=None]]])</code> </dt> <dd>
<p>Creates a temporary directory in the most secure manner possible. There are no race conditions in the directory’s creation. The directory is readable, writable, and searchable only by the creating user ID.</p> <p>The user of <a class="reference internal" href="#tempfile.mkdtemp" title="tempfile.mkdtemp"><code>mkdtemp()</code></a> is responsible for deleting the temporary directory and its contents when done with it.</p> <p>The <em>prefix</em>, <em>suffix</em>, and <em>dir</em> arguments are the same as for <a class="reference internal" href="#tempfile.mkstemp" title="tempfile.mkstemp"><code>mkstemp()</code></a>.</p> <p><a class="reference internal" href="#tempfile.mkdtemp" title="tempfile.mkdtemp"><code>mkdtemp()</code></a> returns the absolute pathname of the new directory.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl> <dl class="function"> <dt id="tempfile.mktemp">
<code>tempfile.mktemp([suffix=''[, prefix='tmp'[, dir=None]]])</code> </dt> <dd>
<div class="deprecated"> <p><span class="versionmodified deprecated">Deprecated since version 2.3: </span>Use <a class="reference internal" href="#tempfile.mkstemp" title="tempfile.mkstemp"><code>mkstemp()</code></a> instead.</p> </div> <p>Return an absolute pathname of a file that did not exist at the time the call is made. The <em>prefix</em>, <em>suffix</em>, and <em>dir</em> arguments are the same as for <a class="reference internal" href="#tempfile.mkstemp" title="tempfile.mkstemp"><code>mkstemp()</code></a>.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Use of this function may introduce a security hole in your program. By the time you get around to doing anything with the file name it returns, someone else may have beaten you to the punch. <a class="reference internal" href="#tempfile.mktemp" title="tempfile.mktemp"><code>mktemp()</code></a> usage can be replaced easily with <a class="reference internal" href="#tempfile.NamedTemporaryFile" title="tempfile.NamedTemporaryFile"><code>NamedTemporaryFile()</code></a>, passing it the <code>delete=False</code> parameter:</p> <pre data-language="python">&gt;&gt;&gt; f = NamedTemporaryFile(delete=False)
&gt;&gt;&gt; f
&lt;open file '&lt;fdopen&gt;', mode 'w+b' at 0x384698&gt;
&gt;&gt;&gt; f.name
'/var/folders/5q/5qTPn6xq2RaWqk+1Ytw3-U+++TI/-Tmp-/tmpG7V1Y0'
&gt;&gt;&gt; f.write("Hello World!\n")
&gt;&gt;&gt; f.close()
&gt;&gt;&gt; os.unlink(f.name)
&gt;&gt;&gt; os.path.exists(f.name)
False
</pre> </div> </dd>
</dl> <p>The module uses a global variable that tell it how to construct a temporary name. They are initialized at the first call to any of the functions above. The caller may change them, but this is discouraged; use the appropriate function arguments, instead.</p> <dl class="data"> <dt id="tempfile.tempdir">
<code>tempfile.tempdir</code> </dt> <dd>
<p>When set to a value other than <code>None</code>, this variable defines the default value for the <em>dir</em> argument to all the functions defined in this module.</p> <p>If <code>tempdir</code> is unset or <code>None</code> at any call to any of the above functions, Python searches a standard list of directories and sets <em>tempdir</em> to the first one which the calling user can create files in. The list is:</p> <ol class="arabic simple"> <li>The directory named by the <code id="index-1">TMPDIR</code> environment variable.</li> <li>The directory named by the <code id="index-2">TEMP</code> environment variable.</li> <li>The directory named by the <code id="index-3">TMP</code> environment variable.</li> <li>
<p>A platform-specific location:</p> <ul class="simple"> <li>On RiscOS, the directory named by the <code id="index-4">Wimp$ScrapDir</code> environment variable.</li> <li>On Windows, the directories <code>C:\TEMP</code>, <code>C:\TMP</code>, <code>\TEMP</code>, and <code>\TMP</code>, in that order.</li> <li>On all other platforms, the directories <code>/tmp</code>, <code>/var/tmp</code>, and <code>/usr/tmp</code>, in that order.</li> </ul> </li> <li>As a last resort, the current working directory.</li> </ol> </dd>
</dl> <dl class="function"> <dt id="tempfile.gettempdir">
<code>tempfile.gettempdir()</code> </dt> <dd>
<p>Return the directory currently selected to create temporary files in. If <a class="reference internal" href="#tempfile.tempdir" title="tempfile.tempdir"><code>tempdir</code></a> is not <code>None</code>, this simply returns its contents; otherwise, the search described above is performed, and the result returned.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="tempfile.template">
<code>tempfile.template</code> </dt> <dd>
<div class="deprecated"> <p><span class="versionmodified deprecated">Deprecated since version 2.0: </span>Use <a class="reference internal" href="#tempfile.gettempprefix" title="tempfile.gettempprefix"><code>gettempprefix()</code></a> instead.</p> </div> <p>When set to a value other than <code>None</code>, this variable defines the prefix of the final component of the filenames returned by <a class="reference internal" href="#tempfile.mktemp" title="tempfile.mktemp"><code>mktemp()</code></a>. A string of six random letters and digits is appended to the prefix to make the filename unique. The default prefix is <code>tmp</code>.</p> <p>Older versions of this module used to require that <code>template</code> be set to <code>None</code> after a call to <a class="reference internal" href="os#os.fork" title="os.fork"><code>os.fork()</code></a>; this has not been necessary since version 1.5.2.</p> </dd>
</dl> <dl class="function"> <dt id="tempfile.gettempprefix">
<code>tempfile.gettempprefix()</code> </dt> <dd>
<p>Return the filename prefix used to create temporary files. This does not contain the directory component. Using this function is preferred over reading the <em>template</em> variable directly.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.5.2.</span></p> </div> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2020 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/2.7/library/tempfile.html" class="_attribution-link">https://docs.python.org/2.7/library/tempfile.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
