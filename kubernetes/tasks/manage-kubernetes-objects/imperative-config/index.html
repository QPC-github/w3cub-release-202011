
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Imperative Management of Kubernetes Objects Using Configuration Files - Kubernetes - W3cubDocs</title>
  
  <meta name="description" content="Kubernetes objects can be created, updated, and deleted by using the kubectl command-line tool along with an object configuration file written in &hellip;">
  <meta name="keywords" content="imperative, management, kubernetes, objects, using, configuration, files">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/kubernetes/tasks/manage-kubernetes-objects/imperative-config/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/kubernetes.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/kubernetes/" class="_nav-link" title="" style="margin-left:0;">Kubernetes</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _kubernetes">
				
				
<h1>Imperative Management of Kubernetes Objects Using Configuration Files</h1>  <p>Kubernetes objects can be created, updated, and deleted by using the <code>kubectl</code> command-line tool along with an object configuration file written in YAML or JSON. This document explains how to define and manage objects using configuration files.</p> <h2 id="before-you-begin">Before you begin</h2> <p>Install <a href="../../tools/index"><code>kubectl</code></a>.</p> 
<p>You need to have a Kubernetes cluster, and the kubectl command-line tool must be configured to communicate with your cluster. It is recommended to run this tutorial on a cluster with at least two nodes that are not acting as control plane hosts. If you do not already have a cluster, you can create one by using <a href="https://minikube.sigs.k8s.io/docs/tutorials/multi_node/">minikube</a> or you can use one of these Kubernetes playgrounds:</p> <ul> <li><a href="https://www.katacoda.com/courses/kubernetes/playground">Katacoda</a></li> <li><a href="http://labs.play-with-k8s.com/">Play with Kubernetes</a></li> </ul> To check the version, enter <code>kubectl version</code>.  <h2 id="trade-offs">Trade-offs</h2> <p>The <code>kubectl</code> tool supports three kinds of object management:</p> <ul> <li>Imperative commands</li> <li>Imperative object configuration</li> <li>Declarative object configuration</li> </ul> <p>See <a href="../../../concepts/overview/working-with-objects/object-management/index">Kubernetes Object Management</a> for a discussion of the advantages and disadvantage of each kind of object management.</p> <h2 id="how-to-create-objects">How to create objects</h2> <p>You can use <code>kubectl create -f</code> to create an object from a configuration file. Refer to the <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/">kubernetes API reference</a> for details.</p> <ul> <li><code>kubectl create -f &lt;filename|url&gt;</code></li> </ul> <h2 id="how-to-update-objects">How to update objects</h2> <div class="alert alert-danger warning callout" role="alert"> <strong>Warning:</strong> Updating objects with the <code>replace</code> command drops all parts of the spec not specified in the configuration file. This should not be used with objects whose specs are partially managed by the cluster, such as Services of type <code>LoadBalancer</code>, where the <code>externalIPs</code> field is managed independently from the configuration file. Independently managed fields must be copied to the configuration file to prevent <code>replace</code> from dropping them. </div> <p>You can use <code>kubectl replace -f</code> to update a live object according to a configuration file.</p> <ul> <li><code>kubectl replace -f &lt;filename|url&gt;</code></li> </ul> <h2 id="how-to-delete-objects">How to delete objects</h2> <p>You can use <code>kubectl delete -f</code> to delete an object that is described in a configuration file.</p> <ul> <li><code>kubectl delete -f &lt;filename|url&gt;</code></li> </ul> <div class="alert alert-info note callout" role="alert"> <strong>Note:</strong> <p>If configuration file has specified the <code>generateName</code> field in the <code>metadata</code> section instead of the <code>name</code> field, you cannot delete the object using <code>kubectl delete -f &lt;filename|url&gt;</code>. You will have to use other flags for deleting the object. For example:</p> <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" data-language="shell">kubectl delete &lt;type&gt; &lt;name&gt;
kubectl delete &lt;type&gt; -l &lt;label&gt;
</pre></div> </div> <h2 id="how-to-view-an-object">How to view an object</h2> <p>You can use <code>kubectl get -f</code> to view information about an object that is described in a configuration file.</p> <ul> <li><code>kubectl get -f &lt;filename|url&gt; -o yaml</code></li> </ul> <p>The <code>-o yaml</code> flag specifies that the full object configuration is printed. Use <code>kubectl get -h</code> to see a list of options.</p> <h2 id="limitations">Limitations</h2> <p>The <code>create</code>, <code>replace</code>, and <code>delete</code> commands work well when each object's configuration is fully defined and recorded in its configuration file. However when a live object is updated, and the updates are not merged into its configuration file, the updates will be lost the next time a <code>replace</code> is executed. This can happen if a controller, such as a HorizontalPodAutoscaler, makes updates directly to a live object. Here's an example:</p> <ol> <li>You create an object from a configuration file.</li> <li>Another source updates the object by changing some field.</li> <li>You replace the object from the configuration file. Changes made by the other source in step 2 are lost.</li> </ol> <p>If you need to support multiple writers to the same object, you can use <code>kubectl apply</code> to manage the object.</p> <h2 id="creating-and-editing-an-object-from-a-url-without-saving-the-configuration">Creating and editing an object from a URL without saving the configuration</h2> <p>Suppose you have the URL of an object configuration file. You can use <code>kubectl create --edit</code> to make changes to the configuration before the object is created. This is particularly useful for tutorials and tasks that point to a configuration file that could be modified by the reader.</p> <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" data-language="shell">kubectl create -f &lt;url&gt; --edit
</pre></div>
<h2 id="migrating-from-imperative-commands-to-imperative-object-configuration">Migrating from imperative commands to imperative object configuration</h2> <p>Migrating from imperative commands to imperative object configuration involves several manual steps.</p> <ol> <li> <p>Export the live object to a local object configuration file:</p> <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" data-language="shell">kubectl get &lt;kind&gt;/&lt;name&gt; -o yaml &gt; &lt;kind&gt;_&lt;name&gt;.yaml
</pre></div>
</li> <li> <p>Manually remove the status field from the object configuration file.</p> </li> <li> <p>For subsequent object management, use <code>replace</code> exclusively.</p> <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" data-language="shell">kubectl replace -f &lt;kind&gt;_&lt;name&gt;.yaml
</pre></div>
</li> </ol> <h2 id="defining-controller-selectors-and-podtemplate-labels">Defining controller selectors and PodTemplate labels</h2> <div class="alert alert-danger warning callout" role="alert"> <strong>Warning:</strong> Updating selectors on controllers is strongly discouraged. </div> <p>The recommended approach is to define a single, immutable PodTemplate label used only by the controller selector with no other semantic meaning.</p> <p>Example label:</p> <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" data-language="yaml">selector:
  matchLabels:
      controller-selector: "apps/v1/deployment/nginx"
template:
  metadata:
    labels:
      controller-selector: "apps/v1/deployment/nginx"
</pre></div>
<h2 id="what-s-next">What's next</h2> <ul> <li><a href="../imperative-command/index">Managing Kubernetes Objects Using Imperative Commands</a></li> <li><a href="../declarative-config/index">Managing Kubernetes Objects Using Object Configuration (Declarative)</a></li> <li><a href="../../../reference/generated/kubectl/kubectl-commands/index">Kubectl Command Reference</a></li> <li><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/">Kubernetes API Reference</a></li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2022 The Kubernetes Authors<br>Documentation Distributed under CC BY 4.0.<br>
    <a href="https://kubernetes.io/docs/tasks/manage-kubernetes-objects/imperative-config/" class="_attribution-link">https://kubernetes.io/docs/tasks/manage-kubernetes-objects/imperative-config/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
