
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Module Attributes - Elixir 1.11 - W3cubDocs</title>
  
  <meta name="description" content=" Module attributes in Elixir serve three purposes&#58; ">
  <meta name="keywords" content="module, attributes, elixir, elixir~1.11">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/elixir~1.11/module-attributes.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/elixir~1.11.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/elixir~1.11/" class="_nav-link" title="" style="margin-left:0;">Elixir 1.11</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _elixir">
				
				
<div class="getting-started-title"> <small>Getting Started</small> <h1>Module attributes</h1> </div>  <p>Module attributes in Elixir serve three purposes:</p> <ol> <li>They serve to annotate the module, often with information to be used by the user or the <abbr title="Virtual Machine">VM</abbr>.</li> <li>They work as constants.</li> <li>They work as a temporary module storage to be used during compilation.</li> </ol> <p>Let’s check each case, one by one.</p> <h2 id="as-annotations">As annotations</h2> <p>Elixir brings the concept of module attributes from Erlang. For example:</p> <div class="language-elixir highlighter-rouge"><pre class="highlight" data-language="">defmodule MyServer do
  @vsn 2
end
</pre></div> <p>In the example above, we are explicitly setting the version attribute for that module. <code class="language-plaintext highlighter-rouge">@vsn</code> is used by the code reloading mechanism in the Erlang <abbr title="Virtual Machine">VM</abbr> to check if a module has been updated or not. If no version is specified, the version is set to the MD5 checksum of the module functions.</p> <p>Elixir has a handful of reserved attributes. Here are a few of them, the most commonly used ones:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">@moduledoc</code> - provides documentation for the current module.</li> <li>
<code class="language-plaintext highlighter-rouge">@doc</code> - provides documentation for the function or macro that follows the attribute.</li> <li>
<code class="language-plaintext highlighter-rouge">@behaviour</code> - (notice the British spelling) used for specifying an <abbr title="Open Telecom Platform">OTP</abbr> or user-defined behaviour.</li> <li>
<code class="language-plaintext highlighter-rouge">@before_compile</code> - provides a hook that will be invoked before the module is compiled. This makes it possible to inject functions inside the module exactly before compilation.</li> </ul> <p><code class="language-plaintext highlighter-rouge">@moduledoc</code> and <code class="language-plaintext highlighter-rouge">@doc</code> are by far the most used attributes, and we expect you to use them a lot. Elixir treats documentation as first-class and provides many functions to access documentation. You can read more about <a href="https://hexdocs.pm/elixir/writing-documentation.html">writing documentation in Elixir in our official documentation</a>.</p> <p>Let’s go back to the <code class="language-plaintext highlighter-rouge">Math</code> module defined in the previous chapters, add some documentation and save it to the <code class="language-plaintext highlighter-rouge">math.ex</code> file:</p> <div class="language-elixir highlighter-rouge"><pre class="highlight" data-language="">defmodule Math do
  @moduledoc """
  Provides math-related functions.

  ## Examples

      iex&gt; Math.sum(1, 2)
      3

  """

  @doc """
  Calculates the sum of two numbers.
  """
  def sum(a, b), do: a + b
end
</pre></div> <p>Elixir promotes the use of Markdown with heredocs to write readable documentation. Heredocs are multi-line strings, they start and end with triple double-quotes, keeping the formatting of the inner text. We can access the documentation of any compiled module directly from IEx:</p> <div class="language-console highlighter-rouge"><pre class="highlight" data-language="">$ elixirc math.ex
$ iex
</pre></div> <div class="language-elixir highlighter-rouge"><pre class="highlight" data-language="">iex&gt; h Math # Access the docs for the module Math
...
iex&gt; h Math.sum # Access the docs for the sum function
...
</pre></div> <p>We also provide a tool called <a href="https://github.com/elixir-lang/ex_doc">ExDoc</a> which is used to generate HTML pages from the documentation.</p> <p>You can take a look at the docs for <a href="https://hexdocs.pm/elixir/Module.html">Module</a> for a complete list of supported attributes. Elixir also uses attributes to define <a href="typespecs-and-behaviours">typespecs</a>.</p> <p>This section covers built-in attributes. However, attributes can also be used by developers or extended by libraries to support custom behaviour.</p> <h2 id="as-constants">As “constants”</h2> <p>Elixir developers often use module attributes when they wish to make a value more visible or reusable:</p> <div class="language-elixir highlighter-rouge"><pre class="highlight" data-language="">defmodule MyServer do
  @initial_state %{host: "127.0.0.1", port: 3456}
  IO.inspect @initial_state
end
</pre></div> <blockquote> <p>Note: Unlike Erlang, user defined attributes are not stored in the module by default. The value exists only during compilation time. A developer can configure an attribute to behave closer to Erlang by calling <a href="https://hexdocs.pm/elixir/Module.html#register_attribute/3"><code class="language-plaintext highlighter-rouge">Module.register_attribute/3</code></a>.</p> </blockquote> <p>Trying to access an attribute that was not defined will print a warning:</p> <div class="language-elixir highlighter-rouge"><pre class="highlight" data-language="">defmodule MyServer do
  @unknown
end
warning: undefined module attribute @unknown, please remove access to @unknown or explicitly set it before access
</pre></div> <p>Attributes can also be read inside functions:</p> <div class="language-elixir highlighter-rouge"><pre class="highlight" data-language="">defmodule MyServer do
  @my_data 14
  def first_data, do: @my_data
  @my_data 13
  def second_data, do: @my_data
end

MyServer.first_data #=&gt; 14
MyServer.second_data #=&gt; 13
</pre></div> <p>Every time an attribute is read inside a function, a snapshot of its current value is taken. In other words, the value is read at compilation time and not at runtime. As we are going to see, this also makes attributes useful as storage during module compilation.</p> <p>Normally, repeating a module attribute will cause its value to be reassigned, but there are circumstances where you may want to <a href="https://hexdocs.pm/elixir/Module.html#register_attribute/3">configure the module attribute</a> so that its values are accumulated:</p> <div class="language-elixir highlighter-rouge"><pre class="highlight" data-language="">defmodule Foo do
  Module.register_attribute __MODULE__, :param, accumulate: true

  @param :foo
  @param :bar     
  # here @param == [:bar, :foo]
end
</pre></div> <p>Functions may be called when defining a module attribute, e.g.</p> <div class="language-elixir highlighter-rouge"><pre class="highlight" data-language="">defmodule MyApp.Status do
  @service URI.parse("https://example.com")
  def status(email), do: SomeHttpClient.get(@service)
end
</pre></div> <p>Be careful, however: <em>functions defined in the same module as the attribute itself cannot be called</em> because they have not yet been compiled when the attribute is being defined.</p> <p>When defining an attribute, do not leave a line break between the attribute name and its value.</p> <h2 id="as-temporary-storage">As temporary storage</h2> <p>To see an example of using module attributes as for storage, look no further than Elixir’s unit test framework called <a href="https://hexdocs.pm/ex_unit/">ExUnit</a>. ExUnit uses module attributes for multiple different purposes:</p> <div class="language-elixir highlighter-rouge"><pre class="highlight" data-language="">defmodule MyTest do
  use ExUnit.Case, async: true

  @tag :external
  @tag os: :unix
  test "contacts external service" do
    # ...
  end
end
</pre></div> <p>In the example above, <code class="language-plaintext highlighter-rouge">ExUnit</code> stores the value of <code class="language-plaintext highlighter-rouge">async: true</code> in a module attribute to change how the module is compiled. Tags are also defined as <code class="language-plaintext highlighter-rouge">accumulate: true</code> attributes, and they store tags that can be used to setup and filter tests. For example, you can avoid running external tests on your machine because they are slow and dependent on other services, while they can still be enabled in your build system.</p> <p>In order to understand the underlying code, we’d need macros, so we will revisit this pattern in the meta-programming guide and learn how to use module attributes as storage to allow developers to create DSLs.</p> <p>In the next chapters, we’ll explore structs and protocols before moving to exception handling and other constructs like sigils and comprehensions.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012 Plataformatec<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://elixir-lang.org/getting-started/module-attributes.html" class="_attribution-link">https://elixir-lang.org/getting-started/module-attributes.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
