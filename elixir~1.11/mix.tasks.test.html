
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Mix Test - Elixir 1.11 - W3cubDocs</title>
  
  <meta name="description" content=" Runs the tests for a project. ">
  <meta name="keywords" content="mix, test, elixir, elixir~1.11">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/elixir~1.11/mix.tasks.test.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/elixir~1.11.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/elixir~1.11/" class="_nav-link" title="" style="margin-left:0;">Elixir 1.11</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _elixir">
				
				
<h1> mix test   </h1> <section id="moduledoc"> <p>Runs the tests for a project.</p>
<p>This task starts the current application, loads up <code class="inline">test/test_helper.exs</code> and then requires all files matching the <code class="inline">test/**/*_test.exs</code> pattern in parallel.</p>
<p>A list of files and/or directories can be given after the task name in order to select the files to run:</p>
<pre data-language="elixir">mix test test/some/particular/file_test.exs
mix test test/some/particular/dir</pre>
<p>Tests in umbrella projects can be run from the root by specifying the full suite path, including <code class="inline">apps/my_app/test</code>, in which case recursive tests for other child apps will be skipped completely:</p>
<pre data-language="elixir"># To run all tests for my_app from the umbrella root
mix test apps/my_app/test

# To run a given test file on my_app from the umbrella root
mix test apps/my_app/test/some/particular/file_test.exs</pre>
<h2 id="module-command-line-options" class="section-heading">  Command line options </h2> <ul>
<li>
<code class="inline">--color</code> - enables color in the output</li>
<li>
<code class="inline">--cover</code> - runs coverage tool. See "Coverage" section below</li>
<li>
<code class="inline">--exclude</code> - excludes tests that match the filter</li>
<li>
<code class="inline">--export-coverage</code> - the name of the file to export coverage results too. Only has an effect when used with <code class="inline">--cover</code>
</li>
<li>
<code class="inline">--failed</code> - runs only tests that failed the last time they ran</li>
<li>
<code class="inline">--force</code> - forces compilation regardless of modification times</li>
<li>
<code class="inline">--formatter</code> - sets the formatter module that will print the results. Defaults to ExUnit's built-in CLI formatter</li>
<li>
<code class="inline">--include</code> - includes tests that match the filter</li>
<li>
<code class="inline">--listen-on-stdin</code> - runs tests, and then listens on stdin. Receiving a newline will result in the tests being run again. Very useful when combined with <code class="inline">--stale</code> and external commands which produce output on stdout upon file system modifications</li>
<li>
<code class="inline">--max-cases</code> - sets the maximum number of tests running asynchronously. Only tests from different modules run in parallel. Defaults to twice the number of cores</li>
<li>
<code class="inline">--max-failures</code> - the suite stops evaluating tests when this number of test failures is reached. It runs all tests if omitted</li>
<li>
<code class="inline">--no-archives-check</code> - does not check archives</li>
<li>
<code class="inline">--no-color</code> - disables color in the output</li>
<li>
<code class="inline">--no-compile</code> - does not compile, even if files require compilation</li>
<li>
<code class="inline">--no-deps-check</code> - does not check dependencies</li>
<li>
<code class="inline">--no-elixir-version-check</code> - does not check the Elixir version from <code class="inline">mix.exs</code>
</li>
<li>
<code class="inline">--no-start</code> - does not start applications after compilation</li>
<li>
<code class="inline">--only</code> - runs only tests that match the filter</li>
<li>
<code class="inline">--partitions</code> - sets the amount of partitions to split tests in. This option requires the <code class="inline">MIX_TEST_PARTITION</code> environment variable to be set. See the "Operating system process partitioning" section for more information</li>
<li>
<code class="inline">--preload-modules</code> - preloads all modules defined in applications</li>
<li>
<code class="inline">--raise</code> - raises if the test suite failed</li>
<li>
<code class="inline">--seed</code> - seeds the random number generator used to randomize the order of tests; <code class="inline">--seed 0</code> disables randomization</li>
<li>
<code class="inline">--slowest</code> - prints timing information for the N slowest tests. Automatically sets <code class="inline">--trace</code> and <code class="inline">--preload-modules</code>
</li>
<li>
<code class="inline">--stale</code> - runs only tests which reference modules that changed since the last time tests were ran with <code class="inline">--stale</code>. You can read more about this option in the "The --stale option" section below</li>
<li>
<code class="inline">--timeout</code> - sets the timeout for the tests</li>
<li>
<code class="inline">--trace</code> - runs tests with detailed reporting. Automatically sets <code class="inline">--max-cases</code> to <code class="inline">1</code>. Note that in trace mode test timeouts will be ignored as timeout is set to <code class="inline">:infinity</code>
</li>
</ul>
<h2 id="module-configuration" class="section-heading">  Configuration </h2> <p>These configurations can be set in the <code class="inline">def project</code> section of your <code class="inline">mix.exs</code>:</p>
<ul>
<li><p><code class="inline">:test_paths</code> - list of paths containing test files. Defaults to <code class="inline">["test"]</code> if the <code class="inline">test</code> directory exists; otherwise, it defaults to <code class="inline">[]</code>. It is expected that all test paths contain a <code class="inline">test_helper.exs</code> file</p></li>
<li><p><code class="inline">:test_pattern</code> - a pattern to load test files. Defaults to <code class="inline">*_test.exs</code></p></li>
<li><p><code class="inline">:warn_test_pattern</code> - a pattern to match potentially misnamed test files and display a warning. Defaults to <code class="inline">*_test.ex</code></p></li>
<li><p><code class="inline">:test_coverage</code> - a set of options to be passed down to the coverage mechanism</p></li>
</ul>
<h2 id="module-filters" class="section-heading">  Filters </h2> <p>ExUnit provides tags and filtering functionality that allow developers to select which tests to run. The most common functionality is to exclude some particular tests from running by default in your test helper file:</p>
<pre data-language="elixir"># Exclude all external tests from running
ExUnit.configure(exclude: [external: true])</pre>
<p>Then, whenever desired, those tests could be included in the run via the <code class="inline">--include</code> option:</p>
<pre data-language="elixir">mix test --include external:true</pre>
<p>The example above will run all tests that have the external option set to <code class="inline">true</code>. It is also possible to include all examples that have a given tag, regardless of its value:</p>
<pre data-language="elixir">mix test --include external</pre>
<p>Note that all tests are included by default, so unless they are excluded first (either in the test helper or via the <code class="inline">--exclude</code> option) the <code class="inline">--include</code> option has no effect.</p>
<p>For this reason, Mix also provides an <code class="inline">--only</code> option that excludes all tests and includes only the given ones:</p>
<pre data-language="elixir">mix test --only external</pre>
<p>Which is similar to:</p>
<pre data-language="elixir">mix test --include external --exclude test</pre>
<p>It differs in that the test suite will fail if no tests are executed when the <code class="inline">--only</code> option is used.</p>
<p>In case a single file is being tested, it is possible to pass one or more specific line numbers to run only those given tests:</p>
<pre data-language="elixir">mix test test/some/particular/file_test.exs:12</pre>
<p>Which is equivalent to:</p>
<pre data-language="elixir">mix test --exclude test --include line:12 test/some/particular/file_test.exs</pre>
<p>Or:</p>
<pre data-language="elixir">mix test test/some/particular/file_test.exs:12:24</pre>
<p>Which is equivalent to:</p>
<pre data-language="elixir">mix test --exclude test --include line:12 --include line:24 test/some/particular/file_test.exs</pre>
<p>If a given line starts a <code class="inline">describe</code> block, that line filter runs all tests in it. Otherwise, it runs the closest test on or before the given line number.</p>
<h2 id="module-coverage" class="section-heading">  Coverage </h2> <p>The <code class="inline">:test_coverage</code> configuration accepts the following options:</p>
<ul>
<li>
<code class="inline">:output</code> - the output directory for cover results. Defaults to <code class="inline">"cover"</code>
</li>
<li>
<code class="inline">:tool</code> - the coverage tool</li>
<li>
<code class="inline">:summary</code> - summary output configuration; can be either a boolean or a keyword list. When a keyword list is passed, it can specify a <code class="inline">:threshold</code>, which is a boolean or numeric value that enables coloring of code coverage results in red or green depending on whether the percentage is below or above the specified threshold, respectively. Defaults to <code class="inline">[threshold: 90]</code>
</li>
<li>
<code class="inline">:export</code> - a file name to export results to instead of generating the result on the fly. The <code class="inline">.coverdata</code> extension is automatically added to the given file. This option is automatically set via the <code class="inline">--export-coverage</code> option or when using process partitioning. See <a href="https://hexdocs.pm/mix/Mix.Tasks.Test.Coverage.html"><code class="inline">mix test.coverage</code></a> to compile a report from multiple exports.</li>
<li>
<code class="inline">:ignore_modules</code> - modules to ignore from generating reports and in summaries</li>
</ul>
<p>By default, a very simple wrapper around OTP's <code class="inline">cover</code> is used as a tool, but it can be overridden as follows:</p>
<pre data-language="elixir">def project() do
  [
    ...
    test_coverage: [tool: CoverModule]
    ...
  ]
end</pre>
<p><code class="inline">CoverModule</code> can be any module that exports <code class="inline">start/2</code>, receiving the compilation path and the <code class="inline">test_coverage</code> options as arguments. It must return either <code class="inline">nil</code> or an anonymous function of zero arity that will be run after the test suite is done.</p>
<h2 id="module-operating-system-process-partitioning" class="section-heading">  Operating system process partitioning </h2> <p>While ExUnit supports the ability to run tests concurrently within the same Elixir instance, it is not always possible to run all tests concurrently. For example, some tests may rely on global resources.</p>
<p>For this reason, <a href="#content"><code class="inline">mix test</code></a> supports partitioning the test files across different Elixir instances. This is done by setting the <code class="inline">--partitions</code> option to an integer, with the number of partitions, and setting the <code class="inline">MIX_TEST_PARTITION</code> environment variable to control which test partition that particular instance is running. This can also be useful if you want to distribute testing across multiple machines.</p>
<p>For example, to split a test suite into 4 partitions and run them, you would use the following commands:</p>
<pre data-language="elixir">MIX_TEST_PARTITION=1 mix test --partitions 4
MIX_TEST_PARTITION=2 mix test --partitions 4
MIX_TEST_PARTITION=3 mix test --partitions 4
MIX_TEST_PARTITION=4 mix test --partitions 4</pre>
<p>The test files are sorted upfront in a round-robin fashion. Note the partition itself is given as an environment variable so it can be accessed in config files and test scripts. For example, it can be used to setup a different database instance per partition in <code class="inline">config/test.exs</code>.</p>
<p>If partitioning is enabled and <code class="inline">--cover</code> is used, no cover reports are generated, as they only contain a subset of the coverage data. Instead, the coverage data is exported to files such as <code class="inline">cover/MIX_TEST_PARTITION.coverdata</code>. Once you have the results of all partitions inside <code class="inline">cover/</code>, you can run <a href="https://hexdocs.pm/mix/Mix.Tasks.Test.Coverage.html"><code class="inline">mix test.coverage</code></a> to get the unified report.</p>
<h2 id="module-the-stale-option" class="section-heading">  The --stale option </h2> <p>The <code class="inline">--stale</code> command line option attempts to run only the test files which reference modules that have changed since the last time you ran this task with <code class="inline">--stale</code>.</p>
<p>The first time this task is run with <code class="inline">--stale</code>, all tests are run and a manifest is generated. On subsequent runs, a test file is marked "stale" if any modules it references (and any modules those modules reference, recursively) were modified since the last run with <code class="inline">--stale</code>. A test file is also marked "stale" if it has been changed since the last run with <code class="inline">--stale</code>.</p>
<p>The <code class="inline">--stale</code> option is extremely useful for software iteration, allowing you to run only the relevant tests as you perform changes to the codebase.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2012 Plataformatec<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://hexdocs.pm/mix/1.11.2/Mix.Tasks.Test.html" class="_attribution-link">https://hexdocs.pm/mix/1.11.2/Mix.Tasks.Test.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
