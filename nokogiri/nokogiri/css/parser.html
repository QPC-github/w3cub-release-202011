
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Nokogiri&#58;&#58;CSS&#58;&#58;Parser - Nokogiri - W3cubDocs</title>
  
  <meta name="description" content=" Turn on CSS parse caching ">
  <meta name="keywords" content="class, nokogiri, css, parser">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/nokogiri/nokogiri/css/parser.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/nokogiri.js"></script>
  
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/nokogiri/" class="_nav-link" title="" style="margin-left:0;">Nokogiri</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _rdoc">
				
				
<h1 id="class-Nokogiri::CSS::Parser" class="class"> class Nokogiri::CSS::Parser </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent">Racc::Parser</dd>
</dl>  <section id="5Buntitled-5D" class="documentation-section"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="Racc_arg">Racc_arg </dt>

<dt id="Racc_debug_parser">Racc_debug_parser </dt>

<dt id="Racc_token_to_s_table">Racc_token_to_s_table </dt>

</dl> </section> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-c-cache_on"> <span class="method-name">cache_on</span><span class="attribute-access-type">[RW]</span> </div> <div class="method-description"> <p>Turn on <a href="../css"><code>CSS</code></a> parse caching</p> </div> </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-c-cache_on-3F"> <span class="method-name">cache_on?</span><span class="attribute-access-type">[RW]</span> </div> <div class="method-description"> <p>Turn on <a href="../css"><code>CSS</code></a> parse caching</p> </div> </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-c-set_cache"> <span class="method-name">set_cache</span><span class="attribute-access-type">[RW]</span> </div> <div class="method-description"> <p>Turn on <a href="../css"><code>CSS</code></a> parse caching</p> </div> </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-5B-5D"> <span class="method-name">[]</span><span class="method-args">(string)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 17
def [] string
  return unless @cache_on
  @mutex.synchronize { @cache[string] }
end</pre> </div> <p>Get the css selector in <code>string</code> from the cache</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-5B-5D-3D"> <span class="method-name">[]=</span><span class="method-args">(string, value)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-3D-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 23
def []= string, value
  return value unless @cache_on
  @mutex.synchronize { @cache[string] = value }
end</pre> </div> <p>Set the css selector in <code>string</code> in the cache to <code>value</code></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-clear_cache"> <span class="method-name">clear_cache</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="clear_cache-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 29
def clear_cache
  @mutex.synchronize { @cache = {} }
end</pre> </div> <p>Clear the cache</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(namespaces = {})</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 54
def initialize namespaces = {}
  @tokenizer  = Tokenizer.new
  @namespaces = namespaces
  super()
end</pre> </div> <p>Create a new <a href="../css"><code>CSS</code></a> parser with respect to <code>namespaces</code></p> <div class="method-calls-super"> Calls superclass method </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-parse"> <span class="method-name">parse</span><span class="method-args">(selector)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="parse-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 43
def parse selector
  @warned ||= false
  unless @warned
    $stderr.puts('Nokogiri::CSS::Parser.parse is deprecated, call Nokogiri::CSS.parse(), this will be removed August 1st or version 1.4.0 (whichever is first)')
    @warned = true
  end
  new.parse selector
end</pre> </div> <p>Parse this <a href="../css"><code>CSS</code></a> selector in <code>selector</code>. Returns an AST.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-without_cache"> <span class="method-name">without_cache</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="without_cache-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 34
def without_cache &amp;block
  tmp = @cache_on
  @cache_on = false
  block.call
  @cache_on = tmp
end</pre> </div> <p>Execute <code>block</code> without cache</p>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_1"> <span class="method-name">_reduce_1</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_1-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 334
def _reduce_1(val, _values, result)
        result = [val.first, val.last].flatten
      
    result
end</pre> </div> <p>reduce 0 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_11"> <span class="method-name">_reduce_11</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_11-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 387
def _reduce_11(val, _values, result)
        result = Node.new(:CONDITIONAL_SELECTOR, val)
      
    result
end</pre> </div> <p>reduce 10 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_12"> <span class="method-name">_reduce_12</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_12-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 393
def _reduce_12(val, _values, result)
        result = Node.new(:CONDITIONAL_SELECTOR, val)
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_13"> <span class="method-name">_reduce_13</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_13-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 399
def _reduce_13(val, _values, result)
        result = Node.new(:CONDITIONAL_SELECTOR,
          [Node.new(:ELEMENT_NAME, ['*']), val.first]
        )
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_14"> <span class="method-name">_reduce_14</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_14-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 407
def _reduce_14(val, _values, result)
        result = Node.new(val.first, [nil, val.last])
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_15"> <span class="method-name">_reduce_15</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_15-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 413
def _reduce_15(val, _values, result)
        result = Node.new(val[1], [val.first, val.last])
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_16"> <span class="method-name">_reduce_16</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_16-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 419
def _reduce_16(val, _values, result)
        result = Node.new(:DESCENDANT_SELECTOR, [val.first, val.last])
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_18"> <span class="method-name">_reduce_18</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_18-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 427
def _reduce_18(val, _values, result)
 result = Node.new(:CLASS_CONDITION, [unescape_css_identifier(val[1])]) 
    result
end</pre> </div> <p>reduce 17 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_2"> <span class="method-name">_reduce_2</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_2-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 340
def _reduce_2(val, _values, result)
 result = val.flatten 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_20"> <span class="method-name">_reduce_20</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_20-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 434
def _reduce_20(val, _values, result)
 result = Node.new(:ELEMENT_NAME, val) 
    result
end</pre> </div> <p>reduce 19 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_21"> <span class="method-name">_reduce_21</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_21-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 439
def _reduce_21(val, _values, result)
        result = Node.new(:ELEMENT_NAME,
          [[val.first, val.last].compact.join(':')]
        )
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_22"> <span class="method-name">_reduce_22</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_22-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 447
def _reduce_22(val, _values, result)
        name = @namespaces.key?('xmlns') ? "xmlns:#{val.first}" : val.first
        result = Node.new(:ELEMENT_NAME, [name])
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_23"> <span class="method-name">_reduce_23</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_23-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 454
def _reduce_23(val, _values, result)
 result = val[0] 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_25"> <span class="method-name">_reduce_25</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_25-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 461
def _reduce_25(val, _values, result)
        result = Node.new(:ATTRIBUTE_CONDITION,
          [val[1]] + (val[2] || [])
        )
      
    result
end</pre> </div> <p>reduce 24 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_26"> <span class="method-name">_reduce_26</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_26-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 469
def _reduce_26(val, _values, result)
        result = Node.new(:ATTRIBUTE_CONDITION,
          [val[1]] + (val[2] || [])
        )
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_27"> <span class="method-name">_reduce_27</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_27-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 477
def _reduce_27(val, _values, result)
        # Non standard, but hpricot supports it.
        result = Node.new(:PSEUDO_CLASS,
          [Node.new(:FUNCTION, ['nth-child(', val[1]])]
        )
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_28"> <span class="method-name">_reduce_28</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_28-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 486
def _reduce_28(val, _values, result)
        result = Node.new(:ELEMENT_NAME,
          [[val.first, val.last].compact.join(':')]
        )
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_29"> <span class="method-name">_reduce_29</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_29-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 494
def _reduce_29(val, _values, result)
        # Default namespace is not applied to attributes.
        # So we don't add prefix "xmlns:" as in namespaced_ident.
        result = Node.new(:ELEMENT_NAME, [val.first])
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_3"> <span class="method-name">_reduce_3</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_3-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 345
def _reduce_3(val, _values, result)
 result = [val.last].flatten 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_30"> <span class="method-name">_reduce_30</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_30-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 502
def _reduce_30(val, _values, result)
        result = Node.new(:FUNCTION, [val.first.strip])
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_31"> <span class="method-name">_reduce_31</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_31-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 508
def _reduce_31(val, _values, result)
        result = Node.new(:FUNCTION, [val.first.strip, val[1]].flatten)
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_32"> <span class="method-name">_reduce_32</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_32-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 514
def _reduce_32(val, _values, result)
        result = Node.new(:FUNCTION, [val.first.strip, val[1]].flatten)
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_33"> <span class="method-name">_reduce_33</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_33-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 520
def _reduce_33(val, _values, result)
        result = Node.new(:FUNCTION, [val.first.strip, val[1]].flatten)
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_34"> <span class="method-name">_reduce_34</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_34-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 526
def _reduce_34(val, _values, result)
        result = Node.new(:FUNCTION, [val.first.strip, val[1]].flatten)
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_35"> <span class="method-name">_reduce_35</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_35-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 532
def _reduce_35(val, _values, result)
 result = [val.first, val.last] 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_36"> <span class="method-name">_reduce_36</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_36-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 537
def _reduce_36(val, _values, result)
 result = [val.first, val.last] 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_37"> <span class="method-name">_reduce_37</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_37-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 542
def _reduce_37(val, _values, result)
 result = [val.first, val.last] 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_4"> <span class="method-name">_reduce_4</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_4-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 350
def _reduce_4(val, _values, result)
 result = :DIRECT_ADJACENT_SELECTOR 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_40"> <span class="method-name">_reduce_40</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_40-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 551
def _reduce_40(val, _values, result)
        case val[0]
        when 'even'
          result = Node.new(:NTH, ['2','n','+','0'])
        when 'odd'
          result = Node.new(:NTH, ['2','n','+','1'])
        when 'n'
          result = Node.new(:NTH, ['1','n','+','0'])
        else
          # This is not CSS standard.  It allows us to support this:
          # assert_xpath("//a[foo(., @href)]", @parser.parse('a:foo(@href)'))
          # assert_xpath("//a[foo(., @a, b)]", @parser.parse('a:foo(@a, b)'))
          # assert_xpath("//a[foo(., a, 10)]", @parser.parse('a:foo(a, 10)'))
          result = val
        end
      
    result
end</pre> </div> <p>reduce 39 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_41"> <span class="method-name">_reduce_41</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_41-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 570
def _reduce_41(val, _values, result)
        if val[1] == 'n'
          result = Node.new(:NTH, val)
        else
          raise Racc::ParseError, "parse error on IDENT '#{val[1]}'"
        end
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_42"> <span class="method-name">_reduce_42</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_42-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 580
def _reduce_42(val, _values, result)
               # n+3, -n+3
        if val[0] == 'n'
          val.unshift("1")
          result = Node.new(:NTH, val)
        elsif val[0] == '-n'
          val[0] = 'n'
          val.unshift("-1")
          result = Node.new(:NTH, val)
        else
          raise Racc::ParseError, "parse error on IDENT '#{val[1]}'"
        end
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_43"> <span class="method-name">_reduce_43</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_43-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 596
def _reduce_43(val, _values, result)
                    # 5n, -5n, 10n-1
        n = val[1]
        if n[0, 2] == 'n-'
          val[1] = 'n'
          val &lt;&lt; "-"
          # b is contained in n as n is the string "n-b"
          val &lt;&lt; n[2, n.size]
          result = Node.new(:NTH, val)
        elsif n == 'n'
          val &lt;&lt; "+"
          val &lt;&lt; "0"
          result = Node.new(:NTH, val)
        else
          raise Racc::ParseError, "parse error on IDENT '#{val[1]}'"
        end
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_44"> <span class="method-name">_reduce_44</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_44-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 616
def _reduce_44(val, _values, result)
        result = Node.new(:PSEUDO_CLASS, [val[1]])
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_45"> <span class="method-name">_reduce_45</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_45-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 622
def _reduce_45(val, _values, result)
 result = Node.new(:PSEUDO_CLASS, [val[1]]) 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_48"> <span class="method-name">_reduce_48</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_48-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 631
def _reduce_48(val, _values, result)
        result = Node.new(:COMBINATOR, val)
      
    result
end</pre> </div> <p>reduce 47 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_49"> <span class="method-name">_reduce_49</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_49-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 637
def _reduce_49(val, _values, result)
        result = Node.new(:COMBINATOR, val)
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_5"> <span class="method-name">_reduce_5</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_5-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 355
def _reduce_5(val, _values, result)
 result = :CHILD_SELECTOR 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_50"> <span class="method-name">_reduce_50</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_50-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 643
def _reduce_50(val, _values, result)
        result = Node.new(:COMBINATOR, val)
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_51"> <span class="method-name">_reduce_51</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_51-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 649
def _reduce_51(val, _values, result)
        result = Node.new(:COMBINATOR, val)
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_52"> <span class="method-name">_reduce_52</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_52-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 655
def _reduce_52(val, _values, result)
        result = Node.new(:COMBINATOR, val)
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_58"> <span class="method-name">_reduce_58</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_58-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 671
def _reduce_58(val, _values, result)
 result = Node.new(:ID, [unescape_css_identifier(val.first)]) 
    result
end</pre> </div> <p>reduce 57 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_59"> <span class="method-name">_reduce_59</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_59-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 676
def _reduce_59(val, _values, result)
 result = [val.first, unescape_css_identifier(val[1])] 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_6"> <span class="method-name">_reduce_6</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_6-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 360
def _reduce_6(val, _values, result)
 result = :FOLLOWING_SELECTOR 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_60"> <span class="method-name">_reduce_60</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_60-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 681
def _reduce_60(val, _values, result)
 result = [val.first, unescape_css_string(val[1])] 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_61"> <span class="method-name">_reduce_61</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_61-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 686
def _reduce_61(val, _values, result)
 result = [val.first, val[1]] 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_63"> <span class="method-name">_reduce_63</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_63-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 693
def _reduce_63(val, _values, result)
 result = :equal 
    result
end</pre> </div> <p>reduce 62 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_64"> <span class="method-name">_reduce_64</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_64-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 698
def _reduce_64(val, _values, result)
 result = :prefix_match 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_65"> <span class="method-name">_reduce_65</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_65-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 703
def _reduce_65(val, _values, result)
 result = :suffix_match 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_66"> <span class="method-name">_reduce_66</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_66-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 708
def _reduce_66(val, _values, result)
 result = :substring_match 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_67"> <span class="method-name">_reduce_67</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_67-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 713
def _reduce_67(val, _values, result)
 result = :not_equal 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_68"> <span class="method-name">_reduce_68</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_68-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 718
def _reduce_68(val, _values, result)
 result = :includes 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_69"> <span class="method-name">_reduce_69</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_69-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 723
def _reduce_69(val, _values, result)
 result = :dash_match 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_7"> <span class="method-name">_reduce_7</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_7-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 365
def _reduce_7(val, _values, result)
 result = :DESCENDANT_SELECTOR 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_70"> <span class="method-name">_reduce_70</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_70-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 728
def _reduce_70(val, _values, result)
        result = Node.new(:NOT, [val[1]])
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_8"> <span class="method-name">_reduce_8</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_8-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 370
def _reduce_8(val, _values, result)
 result = :CHILD_SELECTOR 
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_9"> <span class="method-name">_reduce_9</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_9-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 375
def _reduce_9(val, _values, result)
        result =  if val[1].nil?
                    val.first
                  else
                    Node.new(:CONDITIONAL_SELECTOR, [val.first, val[1]])
                  end
      
    result
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-_reduce_none"> <span class="method-name">_reduce_none</span><span class="method-args">(val, _values, result)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="_reduce_none-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 744
def _reduce_none(val, _values, result)
  val[0]
end</pre> </div> <p>reduce 75 omitted</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-next_token"> <span class="method-name">next_token</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="next_token-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 65
def next_token
  @tokenizer.next_token
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-on_error"> <span class="method-name">on_error</span><span class="method-args">(error_token_id, error_value, value_stack)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="on_error-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 85
def on_error error_token_id, error_value, value_stack
  after = value_stack.compact.last
  raise SyntaxError.new("unexpected '#{error_value}' after '#{after}'")
end</pre> </div> <p>On <a href="../css"><code>CSS</code></a> parser error, raise an exception</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-parse"> <span class="method-name">parse</span><span class="method-args">(string)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="parse-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 60
def parse string
  @tokenizer.scan_setup string
  do_parse
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-unescape_css_identifier"> <span class="method-name">unescape_css_identifier</span><span class="method-args">(identifier)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="unescape_css_identifier-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 17
def unescape_css_identifier(identifier)
  identifier.gsub(/\\(?:([^0-9a-fA-F])|([0-9a-fA-F]{1,6})\s?)/){ |m| $1 || [$2.hex].pack('U') }
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-unescape_css_string"> <span class="method-name">unescape_css_string</span><span class="method-args">(str)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="unescape_css_string-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser.rb, line 21
def unescape_css_string(str)
  str.gsub(/\\(?:([^0-9a-fA-F])|([0-9a-fA-F]{1,6})\s?)/) do |m|
    if $1=="\n"
      ''
    else
      $1 || [$2.hex].pack('U')
    end
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-xpath_for"> <span class="method-name">xpath_for</span><span class="method-args">(string, options={})</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="xpath_for-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/css/parser_extras.rb, line 70
def xpath_for string, options={}
  key = "#{string}#{options[:ns]}#{options[:prefix]}"
  v = self.class[key]
  return v if v

  args = [
    options[:prefix] || '//',
    options[:visitor] || XPathVisitor.new
  ]
  self.class[key] = parse(string).map { |ast|
    ast.to_xpath(*args)
  }
end</pre> </div> <p>Get the xpath for <code>string</code> using <code>options</code></p>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2008–2018 Aaron Patterson, Mike Dalessio, Charles Nutter, Sergio Arbeo,<br>Patrick Mahoney, Yoko Harada, Akinori MUSHA, John Shahid, Lars Kanis<br>Licensed under the MIT License.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
