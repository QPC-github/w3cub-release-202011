
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Perltrap - Perl 5.26 - W3cubDocs</title>
  
  <meta name="description" content=" perltrap - Perl traps for the unwary ">
  <meta name="keywords" content="perltrap, perl, perl~5.26">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/perl~5.26/perltrap.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/perl~5.26.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/perl~5.26/" class="_nav-link" title="" style="margin-left:0;">Perl 5.26</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _perl">
				
				
<h1>perltrap</h1>  <ul>
<li><a href="#NAME">NAME</a></li>
<li>
<a href="#DESCRIPTION">DESCRIPTION</a><ul>
<li><a href="#Awk-Traps">Awk Traps</a></li>
<li><a href="#C%2fC%2b%2b-Traps">C/C++ Traps</a></li>
<li><a href="#JavaScript-Traps">JavaScript Traps</a></li>
<li><a href="#Sed-Traps">Sed Traps</a></li>
<li><a href="#Shell-Traps">Shell Traps</a></li>
<li><a href="#Perl-Traps">Perl Traps</a></li>
</ul>
</li>
</ul>
<h2 id="NAME">NAME</h2> <p>perltrap - Perl traps for the unwary</p> <h2 id="DESCRIPTION">DESCRIPTION</h2> <p>The biggest trap of all is forgetting to <code class="inline"><a class="l_k" href="functions/use">use</a> <span class="w">warnings</span></code> or use the <b>-w</b> switch; see <a href="warnings">warnings</a> and <a href="perlrun">perlrun</a>. The second biggest trap is not making your entire program runnable under <code class="inline"><a class="l_k" href="functions/use">use</a> <span class="w">strict</span></code> . The third biggest trap is not reading the list of changes in this version of Perl; see <a href="https://perldoc.perl.org/5.26.0/perldelta.html">perldelta</a>.</p> <h3 id="Awk-Traps">Awk Traps</h3> <p>Accustomed <b>awk</b> users should take special note of the following:</p> <ul> <li> <p>A Perl program executes only once, not once for each input line. You can do an implicit loop with <code class="inline">-<span class="w">n</span></code> or <code class="inline">-p</code> .</p> </li> <li> <p>The English module, loaded via</p> <pre class="verbatim" data-language="perl">use English;
</pre>
<p>allows you to refer to special variables (like <code class="inline"><span class="i">$/</span></code> ) with names (like $RS), as though they were in <b>awk</b>; see <a href="perlvar">perlvar</a> for details.</p> </li> <li> <p>Semicolons are required after all simple statements in Perl (except at the end of a block). Newline is not a statement delimiter.</p> </li> <li> <p>Curly brackets are required on <code class="inline">if</code> s and <code class="inline">while</code> s.</p> </li> <li> <p>Variables begin with "$", "@" or "%" in Perl.</p> </li> <li> <p>Arrays index from 0. Likewise string positions in substr() and index().</p> </li> <li> <p>You have to decide whether your array has numeric or string indices.</p> </li> <li> <p>Hash values do not spring into existence upon mere reference.</p> </li> <li> <p>You have to decide whether you want to use string or numeric comparisons.</p> </li> <li> <p>Reading an input line does not split it for you. You get to split it to an array yourself. And the split() operator has different arguments than <b>awk</b>'s.</p> </li> <li> <p>The current input line is normally in $_, not $0. It generally does not have the newline stripped. ($0 is the name of the program executed.) See <a href="perlvar">perlvar</a>.</p> </li> <li> <p>$&lt;<i>digit</i>&gt; does not refer to fields--it refers to substrings matched by the last match pattern.</p> </li> <li> <p>The print() statement does not add field and record separators unless you set <code class="inline"><span class="i">$,</span></code> and <code class="inline"><span class="i">$\</span></code> . You can set $OFS and $ORS if you're using the English module.</p> </li> <li> <p>You must open your files before you print to them.</p> </li> <li> <p>The range operator is "..", not comma. The comma operator works as in C.</p> </li> <li> <p>The match operator is "=~", not "~". ("~" is the one's complement operator, as in C.)</p> </li> <li> <p>The exponentiation operator is "**", not "^". "^" is the XOR operator, as in C. (You know, one could get the feeling that <b>awk</b> is basically incompatible with C.)</p> </li> <li> <p>The concatenation operator is ".", not the null string. (Using the null string would render <code class="inline"><span class="q">/pat/</span> /<span class="w">pat</span>/</code> unparsable, because the third slash would be interpreted as a division operator--the tokenizer is in fact slightly context sensitive for operators like "/", "?", and "&gt;". And in fact, "." itself can be the beginning of a number.)</p> </li> <li> <p>The <code class="inline"><a class="l_k" href="functions/next">next</a></code>, <code class="inline"><a class="l_k" href="functions/exit">exit</a></code>, and <code class="inline"><a class="l_k" href="functions/continue">continue</a></code> keywords work differently.</p> </li> <li> <p>The following variables work differently:</p> <pre class="verbatim" data-language="perl">Awk	Perl
ARGC	scalar @ARGV (compare with $#ARGV)
ARGV[0]	$0
FILENAME	$ARGV
FNR	$. - something
FS	(whatever you like)
NF	$#Fld, or some such
NR	$.
OFMT	$#
OFS	$,
ORS	$\
RLENGTH	length($&amp;)
RS	$/
RSTART	length($`)
SUBSEP	$;
</pre>
</li> <li> <p>You cannot set $RS to a pattern, only a string.</p> </li> <li> <p>When in doubt, run the <b>awk</b> construct through <b>a2p</b> and see what it gives you.</p> </li> </ul> <h3 id="C%2fC%2b%2b-Traps">C/C++ Traps</h3> <p>Cerebral C and C++ programmers should take note of the following:</p> <ul> <li> <p>Curly brackets are required on <code class="inline">if</code> 's and <code class="inline">while</code> 's.</p> </li> <li> <p>You must use <code class="inline">elsif</code> rather than <code class="inline">else if</code> .</p> </li> <li> <p>The <code class="inline"><span class="w">break</span></code> and <code class="inline"><a class="l_k" href="functions/continue">continue</a></code> keywords from C become in Perl <code class="inline"><a class="l_k" href="functions/last">last</a></code> and <code class="inline"><a class="l_k" href="functions/next">next</a></code>, respectively. Unlike in C, these do <i>not</i> work within a <code class="inline"><a class="l_k" href="functions/do">do</a> <span class="s">{</span> <span class="s">}</span> while</code> construct. See <a href="perlsyn#Loop-Control">Loop Control in perlsyn</a>.</p> </li> <li> <p>The switch statement is called <code class="inline">given/when</code> and only available in perl 5.10 or newer. See <a href="perlsyn#Switch-Statements">Switch Statements in perlsyn</a>.</p> </li> <li> <p>Variables begin with "$", "@" or "%" in Perl.</p> </li> <li> <p>Comments begin with "#", not "/*" or "//". Perl may interpret C/C++ comments as division operators, unterminated regular expressions or the defined-or operator.</p> </li> <li> <p>You can't take the address of anything, although a similar operator in Perl is the backslash, which creates a reference.</p> </li> <li> <p><code class="inline"><span class="w">ARGV</span></code> must be capitalized. <code class="inline"><span class="i">$ARGV</span>[<span class="n">0</span>]</code> is C's <code class="inline"><span class="w">argv</span><span class="s">[</span><span class="n">1</span><span class="s">]</span></code> , and <code class="inline"><span class="w">argv</span><span class="s">[</span><span class="n">0</span><span class="s">]</span></code> ends up in <code class="inline"><span class="i">$0</span></code> .</p> </li> <li> <p>System calls such as link(), unlink(), rename(), etc. return nonzero for success, not 0. (system(), however, returns zero for success.)</p> </li> <li> <p>Signal handlers deal with signal names, not numbers. Use <code class="inline"><a class="l_k" href="functions/kill">kill</a> -l</code> to find their names on your system.</p> </li> </ul> <h3 id="JavaScript-Traps">JavaScript Traps</h3> <p>Judicious JavaScript programmers should take note of the following:</p> <ul> <li> <p>In Perl, binary <code class="inline">+</code> is always addition. <code class="inline"><span class="i">$string1</span> + <span class="i">$string2</span></code> converts both strings to numbers and then adds them. To concatenate two strings, use the <code class="inline">.</code> operator.</p> </li> <li> <p>The <code class="inline">+</code> unary operator doesn't do anything in Perl. It exists to avoid syntactic ambiguities.</p> </li> <li> <p>Unlike <code class="inline"><a class="l_k" href="functions/for">for...in</a></code>, Perl's <code class="inline">for</code> (also spelled <code class="inline">foreach</code> ) does not allow the left-hand side to be an arbitrary expression. It must be a variable:</p> <pre class="verbatim" data-language="perl">   for my $variable (keys %hash) {
...
   }
</pre>
<p>Furthermore, don't forget the <code class="inline"><a class="l_k" href="functions/keys">keys</a></code> in there, as <code class="inline"><a class="l_k" href="functions/foreach">foreach</a> <a class="l_k" href="functions/my">my</a> <span class="i">$kv</span> <span class="s">(</span><span class="i">%hash</span><span class="s">)</span> <span class="s">{</span><span class="s">}</span></code> iterates over the keys and values, and is generally not useful ($kv would be a key, then a value, and so on).</p> </li> <li> <p>To iterate over the indices of an array, use <code class="inline"><a class="l_k" href="functions/foreach">foreach</a> <a class="l_k" href="functions/my">my</a> <span class="i">$i</span> <span class="s">(</span><span class="n">0</span> .. <span class="i">$#array</span><span class="s">)</span>
<span class="s">{</span><span class="s">}</span></code> . <code class="inline"><a class="l_k" href="functions/foreach">foreach</a> <a class="l_k" href="functions/my">my</a> <span class="i">$v</span> <span class="s">(</span><span class="i">@array</span><span class="s">)</span> <span class="s">{</span><span class="s">}</span></code> iterates over the values.</p> </li> <li> <p>Perl requires braces following <code class="inline">if</code> , <code class="inline">while</code> , <code class="inline">foreach</code> , etc.</p> </li> <li> <p>In Perl, <code class="inline">else if</code> is spelled <code class="inline">elsif</code> .</p> </li> <li> <p><code class="inline"><span class="q">? :</span></code> has higher precedence than assignment. In JavaScript, one can write:</p> <pre class="verbatim" data-language="perl">condition ? do_something() : variable = 3
</pre>
<p>and the variable is only assigned if the condition is false. In Perl, you need parentheses:</p> <pre class="verbatim" data-language="perl">$condition ? do_something() : ($variable = 3);
</pre>
<p>Or just use <code class="inline">if</code> .</p> </li> <li> <p>Perl requires semicolons to separate statements.</p> </li> <li> <p>Variables declared with <code class="inline"><a class="l_k" href="functions/my">my</a></code> only affect code <i>after</i> the declaration. You cannot write <code class="inline"><span class="i">$x</span> = <span class="n">1</span><span class="sc">;</span> <a class="l_k" href="functions/my">my</a> <span class="i">$x</span><span class="sc">;</span></code> and expect the first assignment to affect the same variable. It will instead assign to an <code class="inline"><span class="i">$x</span></code> declared previously in an outer scope, or to a global variable.</p> <p>Note also that the variable is not visible until the following <i>statement</i>. This means that in <code class="inline"><a class="l_k" href="functions/my">my</a> <span class="i">$x</span> = <span class="n">1</span> + <span class="i">$x</span></code> the second $x refers to one declared previously.</p> </li> <li> <p><code class="inline"><a class="l_k" href="functions/my">my</a></code> variables are scoped to the current block, not to the current function. If you write <code class="inline"><span class="s">{</span><a class="l_k" href="functions/my">my</a> <span class="i">$x</span><span class="sc">;</span><span class="s">}</span> <span class="i">$x</span><span class="sc">;</span></code> , the second <code class="inline"><span class="i">$x</span></code> does not refer to the one declared inside the block.</p> </li> <li> <p>An object's members cannot be made accessible as variables. The closest Perl equivalent to <code class="inline"><span class="i">with</span><span class="s">(</span><span class="w">object</span><span class="s">)</span> <span class="s">{</span> <span class="i">method</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span></code> is <code class="inline">for</code> , which can alias <code class="inline"><span class="i">$_</span></code> to the object:</p> <pre class="verbatim" data-language="perl">    for ($object) {
$_-&gt;method;
    }
</pre>
</li> <li> <p>The object or class on which a method is called is passed as one of the method's arguments, not as a separate <code class="inline"><span class="w">this</span></code> value.</p> </li> </ul> <h3 id="Sed-Traps">Sed Traps</h3> <p>Seasoned <b>sed</b> programmers should take note of the following:</p> <ul> <li> <p>A Perl program executes only once, not once for each input line. You can do an implicit loop with <code class="inline">-<span class="w">n</span></code> or <code class="inline">-p</code> .</p> </li> <li> <p>Backreferences in substitutions use "$" rather than "\".</p> </li> <li> <p>The pattern matching metacharacters "(", ")", and "|" do not have backslashes in front.</p> </li> <li> <p>The range operator is <code class="inline">...</code> , rather than comma.</p> </li> </ul> <h3 id="Shell-Traps">Shell Traps</h3> <p>Sharp shell programmers should take note of the following:</p> <ul> <li> <p>The backtick operator does variable interpolation without regard to the presence of single quotes in the command.</p> </li> <li> <p>The backtick operator does no translation of the return value, unlike <b>csh</b>.</p> </li> <li> <p>Shells (especially <b>csh</b>) do several levels of substitution on each command line. Perl does substitution in only certain constructs such as double quotes, backticks, angle brackets, and search patterns.</p> </li> <li> <p>Shells interpret scripts a little bit at a time. Perl compiles the entire program before executing it (except for <code class="inline">BEGIN</code> blocks, which execute at compile time).</p> </li> <li> <p>The arguments are available via @ARGV, not $1, $2, etc.</p> </li> <li> <p>The environment is not automatically made available as separate scalar variables.</p> </li> <li> <p>The shell's <code class="inline"><span class="w">test</span></code> uses "=", "!=", "&lt;" etc for string comparisons and "-eq", "-ne", "-lt" etc for numeric comparisons. This is the reverse of Perl, which uses <code class="inline">eq</code> , <code class="inline">ne</code> , <code class="inline">lt</code> for string comparisons, and <code class="inline">==</code> , <code class="inline">!=</code> <code class="inline">&lt;</code> etc for numeric comparisons.</p> </li> </ul> <h3 id="Perl-Traps">Perl Traps</h3> <p>Practicing Perl Programmers should take note of the following:</p> <ul> <li> <p>Remember that many operations behave differently in a list context than they do in a scalar one. See <a href="perldata">perldata</a> for details.</p> </li> <li> <p>Avoid barewords if you can, especially all lowercase ones. You can't tell by just looking at it whether a bareword is a function or a string. By using quotes on strings and parentheses on function calls, you won't ever get them confused.</p> </li> <li> <p>You cannot discern from mere inspection which builtins are unary operators (like chop() and chdir()) and which are list operators (like print() and unlink()). (Unless prototyped, user-defined subroutines can <b>only</b> be list operators, never unary ones.) See <a href="perlop">perlop</a> and <a href="perlsub">perlsub</a>.</p> </li> <li> <p>People have a hard time remembering that some functions default to $_, or @ARGV, or whatever, but that others which you might expect to do not.</p> </li> <li> <p>The &lt;FH&gt; construct is not the name of the filehandle, it is a readline operation on that handle. The data read is assigned to $_ only if the file read is the sole condition in a while loop:</p> <pre class="verbatim" data-language="perl">while (&lt;FH&gt;)      { }
while (defined($_ = &lt;FH&gt;)) { }..
&lt;FH&gt;;  # data discarded!
</pre>
</li> <li> <p>Remember not to use <code class="inline">=</code> when you need <code class="inline">=~</code> ; these two constructs are quite different:</p> <pre class="verbatim" data-language="perl">$x =  /foo/;
$x =~ /foo/;
</pre>
</li> <li> <p>The <code class="inline"><a class="l_k" href="functions/do">do</a> <span class="s">{</span><span class="s">}</span></code> construct isn't a real loop that you can use loop control on.</p> </li> <li> <p>Use <code class="inline"><a class="l_k" href="functions/my">my()</a></code> for local variables whenever you can get away with it (but see <a href="perlform">perlform</a> for where you can't). Using <code class="inline"><a class="l_k" href="functions/local">local()</a></code> actually gives a local value to a global variable, which leaves you open to unforeseen side-effects of dynamic scoping.</p> </li> <li> <p>If you localize an exported variable in a module, its exported value will not change. The local name becomes an alias to a new value but the external name is still an alias for the original.</p> </li> </ul> <p>As always, if any of these are ever officially declared as bugs, they'll be fixed and removed.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 1993–2016 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="https://perldoc.perl.org/5.26.0/perltrap.html" class="_attribution-link">https://perldoc.perl.org/5.26.0/perltrap.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
