
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>File&#58;&#58;Fetch - Perl 5.26 - W3cubDocs</title>
  
  <meta name="description" content=" File&#58;&#58;Fetch - A generic file fetching mechanism ">
  <meta name="keywords" content="file, fetch, perl, perl~5.26">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/perl~5.26/file/fetch.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/perl~5.26.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/perl~5.26/" class="_nav-link" title="" style="margin-left:0;">Perl 5.26</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _perl">
				
				
<h1>File::Fetch</h1>  <ul>
<li><a href="#NAME">NAME</a></li>
<li><a href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a href="#DESCRIPTION">DESCRIPTION</a></li>
<li><a href="#ACCESSORS">ACCESSORS</a></li>
<li>
<a href="#METHODS">METHODS</a><ul>
<li><a href="#%24ff-%3d-File%3a%3aFetch-%3enew(-uri-%3d%3e-'http%3a%2f%2fsome.where.com%2fdir%2ffile.txt'-)%3b">$ff = File::Fetch-&gt;new( uri =&gt; 'http://some.where.com/dir/file.txt' );</a></li>
<li><a href="#%24where-%3d-%24ff-%3efetch(-%5bto-%3d%3e-%2fmy%2foutput%2fdir%2f-%7c-%5c%24scalar%5d-)">$where = $ff-&gt;fetch( [to =&gt; /my/output/dir/ | \$scalar] )</a></li>
<li><a href="#%24ff-%3eerror(%5bBOOL%5d)">$ff-&gt;error([BOOL])</a></li>
</ul>
</li>
<li><a href="#HOW-IT-WORKS">HOW IT WORKS</a></li>
<li>
<a href="#GLOBAL-VARIABLES">GLOBAL VARIABLES</a><ul>
<li><a href="#%24File%3a%3aFetch%3a%3aFROM_EMAIL">$File::Fetch::FROM_EMAIL</a></li>
<li><a href="#%24File%3a%3aFetch%3a%3aUSER_AGENT">$File::Fetch::USER_AGENT</a></li>
<li><a href="#%24File%3a%3aFetch%3a%3aFTP_PASSIVE">$File::Fetch::FTP_PASSIVE</a></li>
<li><a href="#%24File%3a%3aFetch%3a%3aTIMEOUT">$File::Fetch::TIMEOUT</a></li>
<li><a href="#%24File%3a%3aFetch%3a%3aWARN">$File::Fetch::WARN</a></li>
<li><a href="#%24File%3a%3aFetch%3a%3aDEBUG">$File::Fetch::DEBUG</a></li>
<li><a href="#%24File%3a%3aFetch%3a%3aBLACKLIST">$File::Fetch::BLACKLIST</a></li>
<li><a href="#%24File%3a%3aFetch%3a%3aMETHOD_FAIL">$File::Fetch::METHOD_FAIL</a></li>
</ul>
</li>
<li><a href="#MAPPING">MAPPING</a></li>
<li>
<a href="#FREQUENTLY-ASKED-QUESTIONS">FREQUENTLY ASKED QUESTIONS</a><ul>
<li><a href="#So-how-do-I-use-a-proxy-with-File%3a%3aFetch%3f">So how do I use a proxy with File::Fetch?</a></li>
<li><a href="#I-used-'lynx'-to-fetch-a-file%2c-but-its-contents-is-all-wrong!">I used 'lynx' to fetch a file, but its contents is all wrong!</a></li>
<li><a href="#Files-I'm-trying-to-fetch-have-reserved-characters-or-non-ASCII-characters-in-them.-What-do-I-do%3f">Files I'm trying to fetch have reserved characters or non-ASCII characters in them. What do I do?</a></li>
</ul>
</li>
<li><a href="#TODO">TODO</a></li>
<li><a href="#BUG-REPORTS">BUG REPORTS</a></li>
<li><a href="#AUTHOR">AUTHOR</a></li>
<li><a href="#COPYRIGHT">COPYRIGHT</a></li>
</ul>
<h2 id="NAME">NAME</h2> <p>File::Fetch - A generic file fetching mechanism</p> <h2 id="SYNOPSIS">SYNOPSIS</h2> <pre class="verbatim" data-language="perl">use File::Fetch;

### build a File::Fetch object ###
my $ff = File::Fetch-&gt;new(uri =&gt; 'http://some.where.com/dir/a.txt');

### fetch the uri to cwd() ###
my $where = $ff-&gt;fetch() or die $ff-&gt;error;

### fetch the uri to /tmp ###
my $where = $ff-&gt;fetch( to =&gt; '/tmp' );

### parsed bits from the uri ###
$ff-&gt;uri;
$ff-&gt;scheme;
$ff-&gt;host;
$ff-&gt;path;
$ff-&gt;file;
</pre>
<h2 id="DESCRIPTION">DESCRIPTION</h2> <p>File::Fetch is a generic file fetching mechanism.</p> <p>It allows you to fetch any file pointed to by a <code class="inline"><span class="w">ftp</span></code> , <code class="inline"><span class="w">http</span></code> , <code class="inline"><span class="w">file</span></code> , <code class="inline"><span class="w">git</span></code> or <code class="inline"><span class="w">rsync</span></code> uri by a number of different means.</p> <p>See the <code class="inline"><span class="w">HOW</span> <span class="w">IT</span> <span class="w">WORKS</span></code> section further down for details.</p> <h2 id="ACCESSORS">ACCESSORS</h2> <p>A <code class="inline"><span class="w">File::Fetch</span></code> object has the following accessors</p> <ul> <li id="%24ff-%3euri">
<b>$ff-&gt;uri</b> <p>The uri you passed to the constructor</p> </li> <li id="%24ff-%3escheme">
<b>$ff-&gt;scheme</b> <p>The scheme from the uri (like 'file', 'http', etc)</p> </li> <li id="%24ff-%3ehost">
<b>$ff-&gt;host</b> <p>The hostname in the uri. Will be empty if host was originally 'localhost' for a '<a href="#">file://</a>' url.</p> </li> <li id="%24ff-%3evol">
<b>$ff-&gt;vol</b> <p>On operating systems with the concept of a volume the second element of a <a href="#">file://</a> is considered to the be volume specification for the file. Thus on Win32 this routine returns the volume, on other operating systems this returns nothing.</p> <p>On Windows this value may be empty if the uri is to a network share, in which case the 'share' property will be defined. Additionally, volume specifications that use '|' as ':' will be converted on read to use ':'.</p> <p>On VMS, which has a volume concept, this field will be empty because VMS file specifications are converted to absolute UNIX format and the volume information is transparently included.</p> </li> <li id="%24ff-%3eshare">
<b>$ff-&gt;share</b> <p>On systems with the concept of a network share (currently only Windows) returns the sharename from a <a href="file://">file:////</a> url. On other operating systems returns empty.</p> </li> <li id="%24ff-%3epath">
<b>$ff-&gt;path</b> <p>The path from the uri, will be at least a single '/'.</p> </li> <li id="%24ff-%3efile">
<b>$ff-&gt;file</b> <p>The name of the remote file. For the local file name, the result of $ff-&gt;output_file will be used.</p> </li> <li id="%24ff-%3efile_default">
<b>$ff-&gt;file_default</b> <p>The name of the default local file, that $ff-&gt;output_file falls back to if it would otherwise return no filename. For example when fetching a URI like <a href="http://www.abc.net.au/">http://www.abc.net.au/</a> the contents retrieved may be from a remote file called 'index.html'. The default value of this attribute is literally 'file_default'.</p> </li> <li id="%24ff-%3eoutput_file">
<b>$ff-&gt;output_file</b> <p>The name of the output file. This is the same as $ff-&gt;file, but any query parameters are stripped off. For example:</p> <pre class="verbatim" data-language="perl">http://example.com/index.html?x=y
</pre>
<p>would make the output file be <code class="inline"><a class="l_k" href="../functions/index">index.html</a></code> rather than <code class="inline"><a class="l_k" href="../functions/index">index.html?x=y</a></code>.</p> </li> </ul> <h2 id="METHODS">METHODS</h2> <h3 id="%24ff-%3d-File%3a%3aFetch-%3enew(-uri-%3d%3e-'http%3a%2f%2fsome.where.com%2fdir%2ffile.txt'-)%3b">$ff = File::Fetch-&gt;new( uri =&gt; '<a href="http://some.where.com/dir/file.txt">http://some.where.com/dir/file.txt</a>' );</h3> <p>Parses the uri and creates a corresponding File::Fetch::Item object, that is ready to be <code class="inline"><span class="w">fetch</span></code> ed and returns it.</p> <p>Returns false on failure.</p> <h3 id="%24where-%3d-%24ff-%3efetch(-%5bto-%3d%3e-%2fmy%2foutput%2fdir%2f-%7c-%5c%24scalar%5d-)">$where = $ff-&gt;fetch( [to =&gt; /my/output/dir/ | \$scalar] )</h3> <p>Fetches the file you requested and returns the full path to the file.</p> <p>By default it writes to <code class="inline"><span class="i">cwd</span><span class="s">(</span><span class="s">)</span></code> , but you can override that by specifying the <code class="inline"><span class="w">to</span></code> argument:</p> <pre class="verbatim" data-language="perl">### file fetch to /tmp, full path to the file in $where
$where = $ff-&gt;fetch( to =&gt; '/tmp' );

### file slurped into $scalar, full path to the file in $where
### file is downloaded to a temp directory and cleaned up at exit time
$where = $ff-&gt;fetch( to =&gt; \$scalar );
</pre>
<p>Returns the full path to the downloaded file on success, and false on failure.</p> <h3 id="%24ff-%3eerror(%5bBOOL%5d)">$ff-&gt;error([BOOL])</h3> <p>Returns the last encountered error as string. Pass it a true value to get the <code class="inline"><span class="i">Carp::longmess</span><span class="s">(</span><span class="s">)</span></code> output instead.</p> <h2 id="HOW-IT-WORKS">HOW IT WORKS</h2> <p>File::Fetch is able to fetch a variety of uris, by using several external programs and modules.</p> <p>Below is a mapping of what utilities will be used in what order for what schemes, if available:</p> <pre class="verbatim" data-language="perl">file    =&gt; LWP, lftp, file
http    =&gt; LWP, HTTP::Lite, wget, curl, lftp, fetch, lynx, iosock
ftp     =&gt; LWP, Net::FTP, wget, curl, lftp, fetch, ncftp, ftp
rsync   =&gt; rsync
git     =&gt; git
</pre>
<p>If you'd like to disable the use of one or more of these utilities and/or modules, see the <code class="inline"><span class="i">$BLACKLIST</span></code> variable further down.</p> <p>If a utility or module isn't available, it will be marked in a cache (see the <code class="inline"><span class="i">$METHOD_FAIL</span></code> variable further down), so it will not be tried again. The <code class="inline"><span class="w">fetch</span></code> method will only fail when all options are exhausted, and it was not able to retrieve the file.</p> <p>The <code class="inline"><span class="w">fetch</span></code> utility is available on FreeBSD. NetBSD and Dragonfly BSD may also have it from <code class="inline"><span class="w">pkgsrc</span></code> . We only check for <code class="inline"><span class="w">fetch</span></code> on those three platforms.</p> <p><code class="inline"><span class="w">iosock</span></code> is a very limited <a href="../io/socket/inet">IO::Socket::INET</a> based mechanism for retrieving <code class="inline"><span class="w">http</span></code> schemed urls. It doesn't follow redirects for instance.</p> <p><code class="inline"><span class="w">git</span></code> only supports <code class="inline"><span class="j">git:</span><span class="q">//</span></code> style urls.</p> <p>A special note about fetching files from an ftp uri:</p> <p>By default, all ftp connections are done in passive mode. To change that, see the <code class="inline"><span class="i">$FTP_PASSIVE</span></code> variable further down.</p> <p>Furthermore, ftp uris only support anonymous connections, so no named user/password pair can be passed along.</p> <p><code class="inline">/bin/ftp</code> is blacklisted by default; see the <code class="inline"><span class="i">$BLACKLIST</span></code> variable further down.</p> <h2 id="GLOBAL-VARIABLES">GLOBAL VARIABLES</h2> <p>The behaviour of File::Fetch can be altered by changing the following global variables:</p> <h3 id="%24File%3a%3aFetch%3a%3aFROM_EMAIL">$File::Fetch::FROM_EMAIL</h3> <p>This is the email address that will be sent as your anonymous ftp password.</p> <p>Default is <code class="inline"><span class="w">File</span>-<span class="w">Fetch</span><span class="i">@example</span>.<span class="w">com</span></code> .</p> <h3 id="%24File%3a%3aFetch%3a%3aUSER_AGENT">$File::Fetch::USER_AGENT</h3> <p>This is the useragent as <code class="inline"><span class="w">LWP</span></code> will report it.</p> <p>Default is <code class="inline"><span class="w">File::Fetch</span>/<span class="i">$VERSION</span></code> .</p> <h3 id="%24File%3a%3aFetch%3a%3aFTP_PASSIVE">$File::Fetch::FTP_PASSIVE</h3> <p>This variable controls whether the environment variable <code class="inline"><span class="w">FTP_PASSIVE</span></code> and any passive switches to commandline tools will be set to true.</p> <p>Default value is 1.</p> <p>Note: When $FTP_PASSIVE is true, <code class="inline"><span class="w">ncftp</span></code> will not be used to fetch files, since passive mode can only be set interactively for this binary</p> <h3 id="%24File%3a%3aFetch%3a%3aTIMEOUT">$File::Fetch::TIMEOUT</h3> <p>When set, controls the network timeout (counted in seconds).</p> <p>Default value is 0.</p> <h3 id="%24File%3a%3aFetch%3a%3aWARN">$File::Fetch::WARN</h3> <p>This variable controls whether errors encountered internally by <code class="inline"><span class="w">File::Fetch</span></code> should be <code class="inline"><span class="w">carp</span></code> 'd or not.</p> <p>Set to false to silence warnings. Inspect the output of the <code class="inline"><span class="i">error</span><span class="s">(</span><span class="s">)</span></code> method manually to see what went wrong.</p> <p>Defaults to <code class="inline"><span class="w">true</span></code> .</p> <h3 id="%24File%3a%3aFetch%3a%3aDEBUG">$File::Fetch::DEBUG</h3> <p>This enables debugging output when calling commandline utilities to fetch files. This also enables <code class="inline"><span class="w">Carp::longmess</span></code> errors, instead of the regular <code class="inline"><span class="w">carp</span></code> errors.</p> <p>Good for tracking down why things don't work with your particular setup.</p> <p>Default is 0.</p> <h3 id="%24File%3a%3aFetch%3a%3aBLACKLIST">$File::Fetch::BLACKLIST</h3> <p>This is an array ref holding blacklisted modules/utilities for fetching files with.</p> <p>To disallow the use of, for example, <code class="inline"><span class="w">LWP</span></code> and <code class="inline"><span class="w">Net::FTP</span></code> , you could set $File::Fetch::BLACKLIST to:</p> <pre class="verbatim" data-language="perl">$File::Fetch::BLACKLIST = [qw|lwp netftp|]
</pre>
<p>The default blacklist is [qw|ftp|], as <code class="inline">/bin/ftp</code> is rather unreliable.</p> <p>See the note on <code class="inline"><span class="w">MAPPING</span></code> below.</p> <h3 id="%24File%3a%3aFetch%3a%3aMETHOD_FAIL">$File::Fetch::METHOD_FAIL</h3> <p>This is a hashref registering what modules/utilities were known to fail for fetching files (mostly because they weren't installed).</p> <p>You can reset this cache by assigning an empty hashref to it, or individually remove keys.</p> <p>See the note on <code class="inline"><span class="w">MAPPING</span></code> below.</p> <h2 id="MAPPING">MAPPING</h2> <p>Here's a quick mapping for the utilities/modules, and their names for the $BLACKLIST, $METHOD_FAIL and other internal functions.</p> <pre class="verbatim" data-language="perl">LWP         =&gt; lwp
HTTP::Lite  =&gt; httplite
HTTP::Tiny  =&gt; httptiny
Net::FTP    =&gt; netftp
wget        =&gt; wget
lynx        =&gt; lynx
ncftp       =&gt; ncftp
ftp         =&gt; ftp
curl        =&gt; curl
rsync       =&gt; rsync
lftp        =&gt; lftp
fetch       =&gt; fetch
IO::Socket  =&gt; iosock
</pre>
<h2 id="FREQUENTLY-ASKED-QUESTIONS">FREQUENTLY ASKED QUESTIONS</h2> <h3 id="So-how-do-I-use-a-proxy-with-File%3a%3aFetch%3f">So how do I use a proxy with File::Fetch?</h3> <p><code class="inline"><span class="w">File::Fetch</span></code> currently only supports proxies with LWP::UserAgent. You will need to set your environment variables accordingly. For example, to use an ftp proxy:</p> <pre class="verbatim" data-language="perl">$ENV{ftp_proxy} = 'foo.com';
</pre>
<p>Refer to the LWP::UserAgent manpage for more details.</p> <h3 id="I-used-'lynx'-to-fetch-a-file%2c-but-its-contents-is-all-wrong!">I used 'lynx' to fetch a file, but its contents is all wrong!</h3> <p><code class="inline"><span class="w">lynx</span></code> can only fetch remote files by dumping its contents to <code class="inline"><span class="w">STDOUT</span></code> , which we in turn capture. If that content is a 'custom' error file (like, say, a <code class="inline">404 handler</code>), you will get that contents instead.</p> <p>Sadly, <code class="inline"><span class="w">lynx</span></code> doesn't support any options to return a different exit code on non-<code class="inline">200 OK</code> status, giving us no way to tell the difference between a 'successful' fetch and a custom error page.</p> <p>Therefor, we recommend to only use <code class="inline"><span class="w">lynx</span></code> as a last resort. This is why it is at the back of our list of methods to try as well.</p> <h3 id="Files-I'm-trying-to-fetch-have-reserved-characters-or-non-ASCII-characters-in-them.-What-do-I-do%3f">Files I'm trying to fetch have reserved characters or non-ASCII characters in them. What do I do?</h3> <p><code class="inline"><span class="w">File::Fetch</span></code> is relatively smart about things. When trying to write a file to disk, it removes the <code class="inline"><span class="w">query</span> <span class="w">parameters</span></code> (see the <code class="inline"><span class="w">output_file</span></code> method for details) from the file name before creating it. In most cases this suffices.</p> <p>If you have any other characters you need to escape, please install the <code class="inline"><span class="w">URI::Escape</span></code> module from CPAN, and pre-encode your URI before passing it to <code class="inline"><span class="w">File::Fetch</span></code> . You can read about the details of URIs and URI encoding here:</p> <pre class="verbatim" data-language="perl">http://www.faqs.org/rfcs/rfc2396.html
</pre>
<h2 id="TODO">TODO</h2> <ul> <li id="Implement-%24PREFER_BIN">
<b>Implement $PREFER_BIN</b> <p>To indicate to rather use commandline tools than modules</p> </li> </ul> <h2 id="BUG-REPORTS">BUG REPORTS</h2> <p>Please report bugs or other issues to &lt;bug-file-fetch@rt.cpan.org&lt;gt&gt;.</p> <h2 id="AUTHOR">AUTHOR</h2> <p>This module by Jos Boumans &lt;kane@cpan.org&gt;.</p> <h2 id="COPYRIGHT">COPYRIGHT</h2> <p>This library is free software; you may redistribute and/or modify it under the same terms as Perl itself.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 1993–2016 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="https://perldoc.perl.org/5.26.0/File/Fetch.html" class="_attribution-link">https://perldoc.perl.org/5.26.0/File/Fetch.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
