
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>TAP&#58;&#58;Parser&#58;&#58;Aggregator - Perl 5.26 - W3cubDocs</title>
  
  <meta name="description" content=" TAP&#58;&#58;Parser&#58;&#58;Aggregator - Aggregate TAP&#58;&#58;Parser results ">
  <meta name="keywords" content="tap, parser, aggregator, perl, perl~5.26">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/perl~5.26/tap/parser/aggregator.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/perl~5.26.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/perl~5.26/" class="_nav-link" title="" style="margin-left:0;">Perl 5.26</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _perl">
				
				
<h1>TAP::Parser::Aggregator</h1>  <ul>
<li><a href="#NAME">NAME</a></li>
<li><a href="#VERSION">VERSION</a></li>
<li><a href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a href="#DESCRIPTION">DESCRIPTION</a></li>
<li>
<a href="#METHODS">METHODS</a><ul>
<li><a href="#Class-Methods">Class Methods</a></li>
<li><a href="#Instance-Methods">Instance Methods</a></li>
<li><a href="#Summary-methods">Summary methods</a></li>
</ul>
</li>
<li><a href="#See-Also">See Also</a></li>
</ul>
<h2 id="NAME">NAME</h2> <p>TAP::Parser::Aggregator - Aggregate TAP::Parser results</p> <h2 id="VERSION">VERSION</h2> <p>Version 3.35</p> <h2 id="SYNOPSIS">SYNOPSIS</h2> <pre class="verbatim" data-language="perl">use TAP::Parser::Aggregator;

my $aggregate = TAP::Parser::Aggregator-&gt;new;
$aggregate-&gt;add( 't/00-load.t', $load_parser );
$aggregate-&gt;add( 't/10-lex.t',  $lex_parser  );

my $summary = &lt;&lt;'END_SUMMARY';
Passed:  %s
Failed:  %s
Unexpectedly succeeded: %s
END_SUMMARY
printf $summary,
       scalar $aggregate-&gt;passed,
       scalar $aggregate-&gt;failed,
       scalar $aggregate-&gt;todo_passed;
</pre>
<h2 id="DESCRIPTION">DESCRIPTION</h2> <p><code class="inline"><span class="w">TAP::Parser::Aggregator</span></code> collects parser objects and allows reporting/querying their aggregate results.</p> <h2 id="METHODS">METHODS</h2> <h3 id="Class-Methods">Class Methods</h3> <h4 id="new">
<code class="inline"><span class="w">new</span></code> </h4> <pre class="verbatim" data-language="perl">my $aggregate = TAP::Parser::Aggregator-&gt;new;
</pre>
<p>Returns a new <code class="inline"><span class="w">TAP::Parser::Aggregator</span></code> object.</p> <h3 id="Instance-Methods">Instance Methods</h3> <h4 id="add">
<code class="inline"><span class="w">add</span></code> </h4> <pre class="verbatim" data-language="perl">$aggregate-&gt;add( $description =&gt; $parser );
</pre>
<p>The <code class="inline"><span class="i">$description</span></code> is usually a test file name (but only by convention.) It is used as a unique identifier (see e.g. <a href="#parsers">parsers</a>.) Reusing a description is a fatal error.</p> <p>The <code class="inline"><span class="i">$parser</span></code> is a <a href="../parser">TAP::Parser</a> object.</p> <h4 id="parsers">
<code class="inline"><span class="w">parsers</span></code> </h4> <pre class="verbatim" data-language="perl">my $count   = $aggregate-&gt;parsers;
my @parsers = $aggregate-&gt;parsers;
my @parsers = $aggregate-&gt;parsers(@descriptions);
</pre>
<p>In scalar context without arguments, this method returns the number of parsers aggregated. In list context without arguments, returns the parsers in the order they were added.</p> <p>If <code class="inline"><span class="i">@descriptions</span></code> is given, these correspond to the keys used in each call to the add() method. Returns an array of the requested parsers (in the requested order) in list context or an array reference in scalar context.</p> <p>Requesting an unknown identifier is a fatal error.</p> <h4 id="descriptions">
<code class="inline"><span class="w">descriptions</span></code> </h4> <p>Get an array of descriptions in the order in which they were added to the aggregator.</p> <h4 id="start">
<code class="inline"><span class="w">start</span></code> </h4> <p>Call <code class="inline"><span class="w">start</span></code> immediately before adding any results to the aggregator. Among other times it records the start time for the test run.</p> <h4 id="stop">
<code class="inline"><span class="w">stop</span></code> </h4> <p>Call <code class="inline"><span class="w">stop</span></code> immediately after adding all test results to the aggregator.</p> <h4 id="elapsed">
<code class="inline"><span class="w">elapsed</span></code> </h4> <p>Elapsed returns a <a href="../../benchmark">Benchmark</a> object that represents the running time of the aggregated tests. In order for <code class="inline"><span class="w">elapsed</span></code> to be valid you must call <code class="inline"><span class="w">start</span></code> before running the tests and <code class="inline"><span class="w">stop</span></code> immediately afterwards.</p> <h4 id="elapsed_timestr">
<code class="inline"><span class="w">elapsed_timestr</span></code> </h4> <p>Returns a formatted string representing the runtime returned by <code class="inline"><span class="i">elapsed</span><span class="s">(</span><span class="s">)</span></code> . This lets the caller not worry about Benchmark.</p> <h4 id="all_passed">
<code class="inline"><span class="w">all_passed</span></code> </h4> <p>Return true if all the tests passed and no parse errors were detected.</p> <h4 id="get_status">
<code class="inline"><span class="w">get_status</span></code> </h4> <p>Get a single word describing the status of the aggregated tests. Depending on the outcome of the tests returns 'PASS', 'FAIL' or 'NOTESTS'. This token is understood by <a href="http://search.cpan.org/perldoc/CPAN::Reporter">CPAN::Reporter</a>.</p> <h3 id="Summary-methods">Summary methods</h3> <p>Each of the following methods will return the total number of corresponding tests if called in scalar context. If called in list context, returns the descriptions of the parsers which contain the corresponding tests (see <code class="inline"><span class="w">add</span></code> for an explanation of description.</p> <ul> <li id="*-failed">
<b>failed</b> </li> <li id="*-parse_errors">
<b>parse_errors</b> </li> <li id="*-passed">
<b>passed</b> </li> <li id="*-planned">
<b>planned</b> </li> <li id="*-skipped">
<b>skipped</b> </li> <li id="*-todo">
<b>todo</b> </li> <li id="*-todo_passed">
<b>todo_passed</b> </li> <li id="*-wait">
<b>wait</b> </li> <li id="*-exit">
<b>exit</b> </li> </ul> <p>For example, to find out how many tests unexpectedly succeeded (TODO tests which passed when they shouldn't):</p> <pre class="verbatim" data-language="perl">my $count        = $aggregate-&gt;todo_passed;
my @descriptions = $aggregate-&gt;todo_passed;
</pre>
<p>Note that <code class="inline"><a class="l_k" href="../../functions/wait">wait</a></code> and <code class="inline"><a class="l_k" href="../../functions/exit">exit</a></code> are the totals of the wait and exit statuses of each of the tests. These values are totalled only to provide a true value if any of them are non-zero.</p> <h4 id="total">
<code class="inline"><span class="w">total</span></code> </h4> <pre class="verbatim" data-language="perl">my $tests_run = $aggregate-&gt;total;
</pre>
<p>Returns the total number of tests run.</p> <h4 id="has_problems">
<code class="inline"><span class="w">has_problems</span></code> </h4> <pre class="verbatim" data-language="perl">if ( $parser-&gt;has_problems ) {
    ...
}
</pre>
<p>Identical to <code class="inline"><span class="w">has_errors</span></code> , but also returns true if any TODO tests unexpectedly succeeded. This is more akin to "warnings".</p> <h4 id="has_errors">
<code class="inline"><span class="w">has_errors</span></code> </h4> <pre class="verbatim" data-language="perl">if ( $parser-&gt;has_errors ) {
    ...
}
</pre>
<p>Returns true if <i>any</i> of the parsers failed. This includes:</p> <ul> <li id="*-Failed-tests">
<b>Failed tests</b> </li> <li id="*-Parse-errors">
<b>Parse errors</b> </li> <li id="*-Bad-exit-or-wait-status">
<b>Bad exit or wait status</b> </li> </ul> <h4 id="todo_failed">
<code class="inline"><span class="w">todo_failed</span></code> </h4> <pre class="verbatim" data-language="perl"># deprecated in favor of 'todo_passed'.  This method was horribly misnamed.
</pre>
<p>This was a badly misnamed method. It indicates which TODO tests unexpectedly succeeded. Will now issue a warning and call <code class="inline"><span class="w">todo_passed</span></code> .</p> <h2 id="See-Also">See Also</h2> <p><a href="../parser">TAP::Parser</a></p> <p><a href="../harness">TAP::Harness</a></p>
<div class="_attribution">
  <p class="_attribution-p">
    © 1993–2016 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="https://perldoc.perl.org/5.26.0/TAP/Parser/Aggregator.html" class="_attribution-link">https://perldoc.perl.org/5.26.0/TAP/Parser/Aggregator.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
