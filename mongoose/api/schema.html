
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Schema - Mongoose - W3cubDocs</title>
  
  <meta name="description" content=" Schema constructor. ">
  <meta name="keywords" content="schema, mongoose">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/mongoose/api/schema.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/mongoose.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/mongoose/" class="_nav-link" title="" style="margin-left:0;">Mongoose</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>Schema</h1>

<div class="api-content">
<h3 id="schema_Schema">Schema()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">[definition] <span class="method-type">«Object|Schema|Array»</span> Can be one of: object describing schema paths, or schema to copy, or array of objects and schemas </li>
<li class="param">[options] <span class="method-type">«Object»</span> </li>
</ul>
<h5>Inherits:</h5>
<ul><li><span class="method-type">«NodeJS EventEmitter http://nodejs.org/api/events.html#events_class_events_eventemitter»</span></li></ul>
<div>
<p>Schema constructor.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">var</span> child = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> });
<span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, age: <span class="hljs-built_in">Number</span>, children: [child] });
<span class="hljs-keyword">var</span> Tree = mongoose.model(<span class="hljs-string">'Tree'</span>, schema);

<span class="hljs-comment">// setting schema options</span>
<span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> }, { _id: <span class="hljs-literal">false</span>, autoIndex: <span class="hljs-literal">false</span> })</pre> <h4>Options:</h4> <ul> <li>
<a href="../guide#autoIndex">autoIndex</a>: bool - defaults to null (which means use the connection's autoIndex option)</li> <li>
<a href="../guide#autoCreate">autoCreate</a>: bool - defaults to null (which means use the connection's autoCreate option)</li> <li>
<a href="../guide#bufferCommands">bufferCommands</a>: bool - defaults to true</li> <li>
<a href="../guide#capped">capped</a>: bool - defaults to false</li> <li>
<a href="../guide#collection">collection</a>: string - no default</li> <li>
<a href="../guide#id">id</a>: bool - defaults to true</li> <li>
<a href="../guide#_id">_id</a>: bool - defaults to true</li> <li>
<a href="../guide#minimize">minimize</a>: bool - controls <a href="#document_Document-toObject">document#toObject</a> behavior when called manually - defaults to true</li> <li>
<a href="../guide#read">read</a>: string</li> <li>
<a href="../guide#writeConcern">writeConcern</a>: object - defaults to null, use to override <a href="https://docs.mongodb.com/manual/reference/write-concern/">the MongoDB server's default write concern settings</a>
</li> <li>
<a href="../guide#shardKey">shardKey</a>: object - defaults to <code>null</code>
</li> <li>
<a href="../guide#strict">strict</a>: bool - defaults to true</li> <li>
<a href="../guide#strictQuery">strictQuery</a>: bool - defaults to false</li> <li>
<a href="../guide#toJSON">toJSON</a> - object - no default</li> <li>
<a href="../guide#toObject">toObject</a> - object - no default</li> <li>
<a href="../guide#typeKey">typeKey</a> - string - defaults to 'type'</li> <li>
<a href="../guide#typePojoToMixed">typePojoToMixed</a> - boolean - defaults to true. Determines whether a type set to a POJO becomes a Mixed path or a Subdocument</li> <li>
<a href="../guide#useNestedStrict">useNestedStrict</a> - boolean - defaults to false</li> <li>
<a href="../guide#validateBeforeSave">validateBeforeSave</a> - bool - defaults to <code>true</code>
</li> <li>
<a href="../guide#versionKey">versionKey</a>: string - defaults to "__v"</li> <li>
<a href="../guide#collation">collation</a>: object - defaults to null (which means use no collation)</li> <li>
<a href="../guide#selectPopulatedPaths">selectPopulatedPaths</a>: boolean - defaults to <code>true</code>
</li> <li>
<a href="../guide#skipVersioning">skipVersioning</a>: object - paths to exclude from versioning</li> <li>
<a href="../guide#timestamps">timestamps</a>: object or boolean - defaults to <code>false</code>. If true, Mongoose adds <code>createdAt</code> and <code>updatedAt</code> properties to your schema and manages those properties for you.</li> <li>
<a href="../guide#storeSubdocValidationError">storeSubdocValidationError</a>: boolean - Defaults to true. If false, Mongoose will wrap validation errors in single nested document subpaths into a single validation error on the single nested subdoc's path.</li> </ul> <h4>Options for Nested Schemas:</h4> <ul> <li>
<code>excludeIndexes</code>: bool - defaults to <code>false</code>. If <code>true</code>, skip building indexes on this schema's paths.</li> </ul> <h4>Note:</h4> <p><em>When nesting schemas, (<code>children</code> in the example above), always declare the child schema first before passing it into its parent.</em></p> </div>
<h3 id="schema_Schema.Types">Schema.Types</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>The various built-in Mongoose Schema Types.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">var</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);
<span class="hljs-keyword">var</span> ObjectId = mongoose.Schema.Types.ObjectId;</pre> <h4>Types:</h4> <ul> <li><a href="#schema-string-js">String</a></li> <li><a href="#schema-number-js">Number</a></li> <li>
<a href="#schema-boolean-js">Boolean</a> | Bool</li> <li><a href="#schema-array-js">Array</a></li> <li><a href="#schema-buffer-js">Buffer</a></li> <li><a href="#schema-date-js">Date</a></li> <li>
<a href="#schema-objectid-js">ObjectId</a> | Oid</li> <li><a href="#schema-mixed-js">Mixed</a></li> </ul> <p>Using this exposed access to the <code>Mixed</code> SchemaType, we can use them in our schema.</p> <pre data-language="javascript"><span class="hljs-keyword">var</span> Mixed = mongoose.Schema.Types.Mixed;
<span class="hljs-keyword">new</span> mongoose.Schema({ _user: Mixed })</pre> </div>
<h3 id="schema_Schema-indexTypes">Schema.indexTypes</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>The allowed index types</p> </div>
<h3 id="schema_Schema-add">Schema.prototype.add()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">obj <span class="method-type">«Object|Schema»</span> plain object with paths to add, or another schema </li>
<li class="param">[prefix] <span class="method-type">«String»</span> path to prefix the newly added paths with </li>
</ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Schema»</span> the Schema instance </li></ul>
<div>
<p>Adds key path / schema type pairs to this schema.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> ToySchema = <span class="hljs-keyword">new</span> Schema();
ToySchema.add({ name: <span class="hljs-string">'string'</span>, color: <span class="hljs-string">'string'</span>, price: <span class="hljs-string">'number'</span> });

<span class="hljs-keyword">const</span> TurboManSchema = <span class="hljs-keyword">new</span> Schema();
<span class="hljs-comment">// You can also `add()` another schema and copy over all paths, virtuals,</span>
<span class="hljs-comment">// getters, setters, indexes, methods, and statics.</span>
TurboManSchema.add(ToySchema).add({ year: <span class="hljs-built_in">Number</span> });</pre> </div>
<h3 id="schema_Schema-childSchemas">Schema.prototype.childSchemas</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>Array of child schemas (from document arrays and single nested subdocs) and their corresponding compiled models. Each element of the array is an object with 2 properties: <code>schema</code> and <code>model</code>.</p> <p>This property is typically only useful for plugin authors and advanced users. You do not need to interact with this property at all to use mongoose.</p> </div>
<h3 id="schema_Schema-clone">Schema.prototype.clone()</h3>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Schema»</span> the cloned schema </li></ul>
<div>
<p>Returns a deep copy of the schema</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> });
<span class="hljs-keyword">const</span> clone = schema.clone();
clone === schema; <span class="hljs-comment">// false</span>
clone.path(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// SchemaString { ... }</span></pre> </div>
<h3 id="schema_Schema-eachPath">Schema.prototype.eachPath()</h3>
<h5>Parameters</h5>
<ul class="params"><li class="param">fn <span class="method-type">«Function»</span> callback function </li></ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Schema»</span> this </li></ul>
<div>
<p>Iterates the schemas paths similar to Array#forEach.</p> <p>The callback is passed the pathname and the schemaType instance.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, registeredAt: <span class="hljs-built_in">Date</span> });
userSchema.eachPath((pathname, schematype) =&gt; {
  <span class="hljs-comment">// Prints twice:</span>
  <span class="hljs-comment">// name SchemaString { ... }</span>
  <span class="hljs-comment">// registeredAt SchemaDate { ... }</span>
  <span class="hljs-built_in">console</span>.log(pathname, schematype);
});</pre> </div>
<h3 id="schema_Schema-get">Schema.prototype.get()</h3>
<h5>Parameters</h5>
<ul class="params"><li class="param">key <span class="method-type">«String»</span> option name </li></ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Any»</span> the option's value </li></ul>
<div>
<p>Gets a schema option.</p> <h4>Example:</h4> <pre data-language="javascript">schema.get(<span class="hljs-string">'strict'</span>); <span class="hljs-comment">// true</span>
schema.set(<span class="hljs-string">'strict'</span>, <span class="hljs-literal">false</span>);
schema.get(<span class="hljs-string">'strict'</span>); <span class="hljs-comment">// false</span></pre> </div>
<h3 id="schema_Schema-index">Schema.prototype.index()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">fields <span class="method-type">«Object»</span> </li>
<li class="param">[options] <span class="method-type">«Object»</span> Options to pass to <a href="http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#createIndex">MongoDB driver's <code>createIndex()</code> function</a> </li>
<ul style="margin-top: 0.5em"><li>[options.expires=null] <span class="method-type">«String»</span> Mongoose-specific syntactic sugar, uses <a href="https://www.npmjs.com/package/ms">ms</a> to convert <code>expires</code> option into seconds for the <code>expireAfterSeconds</code> in the above link. </li></ul>
</ul>
<div>
<p>Defines an index (most likely compound) for this schema.</p> <h4>Example</h4> <pre data-language="javascript">schema.index({ first: <span class="hljs-number">1</span>, last: <span class="hljs-number">-1</span> })</pre> </div>
<h3 id="schema_Schema-indexes">Schema.prototype.indexes()</h3>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Array»</span> list of indexes defined in the schema </li></ul>
<div>
<p>Returns a list of indexes that this schema declares, via <code>schema.index()</code> or by <code>index: true</code> in a path's options.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> Schema({
  email: { type: <span class="hljs-built_in">String</span>, required: <span class="hljs-literal">true</span>, unique: <span class="hljs-literal">true</span> },
  registeredAt: { type: <span class="hljs-built_in">Date</span>, index: <span class="hljs-literal">true</span> }
});

<span class="hljs-comment">// [ [ { email: 1 }, { unique: true, background: true } ],</span>
<span class="hljs-comment">//   [ { registeredAt: 1 }, { background: true } ] ]</span>
userSchema.indexes();</pre> </div>
<h3 id="schema_Schema-loadClass">Schema.prototype.loadClass()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">model <span class="method-type">«Function»</span> </li>
<li class="param">[virtualsOnly] <span class="method-type">«Boolean»</span> if truthy, only pulls virtuals from the class, not methods or statics </li>
</ul>
<div>
<p>Loads an ES6 class into a schema. Maps <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set">setters</a> + <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get">getters</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static">static methods</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_body_and_method_definitions">instance methods</a> to schema <a href="http://mongoosejs.com/docs/guide.html#virtuals">virtuals</a>, <a href="http://mongoosejs.com/docs/guide.html#statics">statics</a>, and <a href="http://mongoosejs.com/docs/guide.html#methods">methods</a>.</p> <h4>Example:</h4> <div class="highlight"><pre lang="javascript" data-language="javascript">const md5 = require('md5');
const userSchema = new Schema({ email: String });
class UserClass {
  // `gravatarImage` becomes a virtual
  get gravatarImage() {
    const hash = md5(this.email.toLowerCase());
    return `<a href="#">https://www.gravatar.com/avatar/${hash}`</a>;
  }

  // `getProfileUrl()` becomes a document method
  getProfileUrl() {
    return `<a href="#">https://mysite.com/${this.email}`</a>;
  }

  // `findByEmail()` becomes a static
  static findByEmail(email) {
    return this.findOne({ email });
  }
}

// `schema` will now have a `gravatarImage` virtual, a `getProfileUrl()` method,
// and a `findByEmail()` static
userSchema.loadClass(UserClass);
</pre></div> </div>
<h3 id="schema_Schema-method">Schema.prototype.method()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">method <span class="method-type">«String|Object»</span> name </li>
<li class="param">[fn] <span class="method-type">«Function»</span> </li>
</ul>
<div>
<p>Adds an instance method to documents constructed from Models compiled from this schema.</p> <h4>Example</h4> <pre data-language="javascript"><span class="hljs-keyword">var</span> schema = kittySchema = <span class="hljs-keyword">new</span> Schema(..);

schema.method(<span class="hljs-string">'meow'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> () </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'meeeeeoooooooooooow'</span>);
})

<span class="hljs-keyword">var</span> Kitty = mongoose.model(<span class="hljs-string">'Kitty'</span>, schema);

<span class="hljs-keyword">var</span> fizz = <span class="hljs-keyword">new</span> Kitty;
fizz.meow(); <span class="hljs-comment">// meeeeeooooooooooooow</span></pre> <p>If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.</p> <pre data-language="javascript">schema.method({
    purr: <span class="hljs-function"><span class="hljs-keyword">function</span> () </span>{}
  , scratch: <span class="hljs-function"><span class="hljs-keyword">function</span> () </span>{}
});

<span class="hljs-comment">// later</span>
fizz.purr();
fizz.scratch();</pre> <p>NOTE: <code>Schema.method()</code> adds instance methods to the <code>Schema.methods</code> object. You can also add instance methods directly to the <code>Schema.methods</code> object as seen in the <a href="guide#methods">guide</a></p> </div>
<h3 id="schema_Schema-obj">Schema.prototype.obj</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>The original object passed to the schema constructor</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">new</span> Schema({ a: <span class="hljs-built_in">String</span> }).add({ b: <span class="hljs-built_in">String</span> });
schema.obj; <span class="hljs-comment">// { a: String }</span></pre> </div>
<h3 id="schema_Schema-path">Schema.prototype.path()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">path <span class="method-type">«String»</span> </li>
<li class="param">constructor <span class="method-type">«Object»</span> </li>
</ul>
<div>
<p>Gets/sets schema paths.</p> <p>Sets a path (if arity 2) Gets a path (if arity 1)</p> <h4>Example</h4> <pre data-language="javascript">schema.path(<span class="hljs-string">'name'</span>) <span class="hljs-comment">// returns a SchemaType</span>
schema.path(<span class="hljs-string">'name'</span>, <span class="hljs-built_in">Number</span>) <span class="hljs-comment">// changes the schemaType of `name` to Number</span></pre> </div>
<h3 id="schema_Schema-pathType">Schema.prototype.pathType()</h3>
<h5>Parameters</h5>
<ul class="params"><li class="param">path <span class="method-type">«String»</span> </li></ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«String»</span> </li></ul>
<div>
<p>Returns the pathType of <code>path</code> for this schema.</p> <p>Given a path, returns whether it is a real, virtual, nested, or ad-hoc/undefined path.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, nested: { foo: <span class="hljs-built_in">String</span> } });
s.virtual(<span class="hljs-string">'foo'</span>).get(() =&gt; <span class="hljs-number">42</span>);
s.pathType(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// "real"</span>
s.pathType(<span class="hljs-string">'nested'</span>); <span class="hljs-comment">// "nested"</span>
s.pathType(<span class="hljs-string">'foo'</span>); <span class="hljs-comment">// "virtual"</span>
s.pathType(<span class="hljs-string">'fail'</span>); <span class="hljs-comment">// "adhocOrUndefined"</span></pre> </div>
<h3 id="schema_Schema-paths">Schema.prototype.paths</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>The paths defined on this schema. The keys are the top-level paths in this schema, and the values are instances of the SchemaType class.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> }, { _id: <span class="hljs-literal">false</span> });
schema.paths; <span class="hljs-comment">// { name: SchemaString { ... } }</span>

schema.add({ age: <span class="hljs-built_in">Number</span> });
schema.paths; <span class="hljs-comment">// { name: SchemaString { ... }, age: SchemaNumber { ... } }</span></pre> </div>
<h3 id="schema_Schema-pick">Schema.prototype.pick()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">paths <span class="method-type">«Array»</span> list of paths to pick </li>
<li class="param">[options] <span class="method-type">«Object»</span> options to pass to the schema constructor. Defaults to <code>this.options</code> if not set. </li>
</ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Schema»</span> </li></ul>
<div>
<p>Returns a new schema that has the picked <code>paths</code> from this schema.</p> <p>This method is analagous to <a href="https://lodash.com/docs/4.17.15#pick">Lodash's <code>pick()</code> function</a> for Mongoose schemas.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> schema = Schema({ name: <span class="hljs-built_in">String</span>, age: <span class="hljs-built_in">Number</span> });
<span class="hljs-comment">// Creates a new schema with the same `name` path as `schema`,</span>
<span class="hljs-comment">// but no `age` path.</span>
<span class="hljs-keyword">const</span> newSchema = schema.pick([<span class="hljs-string">'name'</span>]);

newSchema.path(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// SchemaString { ... }</span>
newSchema.path(<span class="hljs-string">'age'</span>); <span class="hljs-comment">// undefined</span></pre> </div>
<h3 id="schema_Schema-plugin">Schema.prototype.plugin()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">plugin <span class="method-type">«Function»</span> callback </li>
<li class="param">[opts] <span class="method-type">«Object»</span> </li>
</ul>
<div>
<p>Registers a plugin for this schema.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> });
s.plugin(schema =&gt; <span class="hljs-built_in">console</span>.log(schema.path(<span class="hljs-string">'name'</span>).path));
mongoose.model(<span class="hljs-string">'Test'</span>, s); <span class="hljs-comment">// Prints 'name'</span></pre> </div>
<h3 id="schema_Schema-post">Schema.prototype.post()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">The <span class="method-type">«String|RegExp»</span> method name or regular expression to match method name </li>
<li class="param">[options] <span class="method-type">«Object»</span> </li>
<ul style="margin-top: 0.5em"><li>[options.document] <span class="method-type">«Boolean»</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on document middleware. </li></ul>
<ul style="margin-top: 0.5em"><li>[options.query] <span class="method-type">«Boolean»</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on query middleware. </li></ul>
<li class="param">fn <span class="method-type">«Function»</span> callback </li>
</ul>
<div>
<p>Defines a post hook for the document</p> <pre data-language="javascript">var schema = new Schema(..);
schema.post('save', function (doc) {
  console.log('this fired after a document was saved');
});

schema.post('find', function(docs) {
  console.log('this fired after you ran a find query');
});

schema.post(/Many$/, function(res) {
  console.log('this fired after you ran `updateMany()` or `deleteMany()`);
});

var Model = mongoose.model('Model', schema);

var m = new Model(..);
m.save(function(err) {
  console.log('this fires after the `post` hook');
});

m.find(function(err, docs) {
  console.log('this fires after the post find hook');
});</pre> </div>
<h3 id="schema_Schema-pre">Schema.prototype.pre()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">The <span class="method-type">«String|RegExp»</span> method name or regular expression to match method name </li>
<li class="param">[options] <span class="method-type">«Object»</span> </li>
<ul style="margin-top: 0.5em"><li>[options.document] <span class="method-type">«Boolean»</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on document middleware. </li></ul>
<ul style="margin-top: 0.5em"><li>[options.query] <span class="method-type">«Boolean»</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on query middleware. </li></ul>
<li class="param">callback <span class="method-type">«Function»</span> </li>
</ul>
<div>
<p>Defines a pre hook for the document.</p> <h4>Example</h4> <pre data-language="javascript"><span class="hljs-keyword">var</span> toySchema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, created: <span class="hljs-built_in">Date</span> });

toySchema.pre(<span class="hljs-string">'save'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.created) <span class="hljs-keyword">this</span>.created = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>;
  next();
});

toySchema.pre(<span class="hljs-string">'validate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.name !== <span class="hljs-string">'Woody'</span>) <span class="hljs-keyword">this</span>.name = <span class="hljs-string">'Woody'</span>;
  next();
});

<span class="hljs-comment">// Equivalent to calling `pre()` on `find`, `findOne`, `findOneAndUpdate`.</span>
toySchema.pre(<span class="hljs-regexp">/^find/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.getFilter());
});

<span class="hljs-comment">// Equivalent to calling `pre()` on `updateOne`, `findOneAndUpdate`.</span>
toySchema.pre([<span class="hljs-string">'updateOne'</span>, <span class="hljs-string">'findOneAndUpdate'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.getFilter());
});</pre> </div>
<h3 id="schema_Schema-queue">Schema.prototype.queue()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">name <span class="method-type">«String»</span> name of the document method to call later </li>
<li class="param">args <span class="method-type">«Array»</span> arguments to pass to the method </li>
</ul>
<div>
<p>Adds a method call to the queue.</p> <h4>Example:</h4> <pre data-language="javascript">schema.methods.print = <span class="hljs-function"><span class="hljs-keyword">function</span>() </span>{ <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>); };
schema.queue(<span class="hljs-string">'print'</span>, []); <span class="hljs-comment">// Print the doc every one is instantiated</span>

<span class="hljs-keyword">const</span> Model = mongoose.model(<span class="hljs-string">'Test'</span>, schema);
<span class="hljs-keyword">new</span> Model({ name: <span class="hljs-string">'test'</span> }); <span class="hljs-comment">// Prints '{"_id": ..., "name": "test" }'</span></pre> </div>
<h3 id="schema_Schema-remove">Schema.prototype.remove()</h3>
<h5>Parameters</h5>
<ul class="params"><li class="param">path <span class="method-type">«String|Array»</span> </li></ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Schema»</span> the Schema instance </li></ul>
<div>
<p>Removes the given <code>path</code> (or [<code>paths</code>]).</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, age: <span class="hljs-built_in">Number</span> });
schema.remove(<span class="hljs-string">'name'</span>);
schema.path(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// Undefined</span>
schema.path(<span class="hljs-string">'age'</span>); <span class="hljs-comment">// SchemaNumber { ... }</span></pre> </div>
<h3 id="schema_Schema-requiredPaths">Schema.prototype.requiredPaths()</h3>
<h5>Parameters</h5>
<ul class="params"><li class="param">invalidate <span class="method-type">«Boolean»</span> refresh the cache </li></ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Array»</span> </li></ul>
<div>
<p>Returns an Array of path strings that are required by this schema.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> Schema({
  name: { type: <span class="hljs-built_in">String</span>, required: <span class="hljs-literal">true</span> },
  age: { type: <span class="hljs-built_in">String</span>, required: <span class="hljs-literal">true</span> },
  notes: <span class="hljs-built_in">String</span>
});
s.requiredPaths(); <span class="hljs-comment">// [ 'age', 'name' ]</span></pre> </div>
<h3 id="schema_Schema-set">Schema.prototype.set()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">key <span class="method-type">«String»</span> option name </li>
<li class="param">[value] <span class="method-type">«Object»</span> if not passed, the current option value is returned </li>
</ul>
<div>
<p>Sets/gets a schema option.</p> <h4>Example</h4> <pre data-language="javascript">schema.set(<span class="hljs-string">'strict'</span>); <span class="hljs-comment">// 'true' by default</span>
schema.set(<span class="hljs-string">'strict'</span>, <span class="hljs-literal">false</span>); <span class="hljs-comment">// Sets 'strict' to false</span>
schema.set(<span class="hljs-string">'strict'</span>); <span class="hljs-comment">// 'false'</span></pre> </div>
<h3 id="schema_Schema-static">Schema.prototype.static()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">name <span class="method-type">«String|Object»</span> </li>
<li class="param">[fn] <span class="method-type">«Function»</span> </li>
</ul>
<div>
<p>Adds static "class" methods to Models compiled from this schema.</p> <h4>Example</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema(..);
<span class="hljs-comment">// Equivalent to `schema.statics.findByName = function(name) {}`;</span>
schema.static(<span class="hljs-string">'findByName'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.find({ name: name });
});

<span class="hljs-keyword">const</span> Drink = mongoose.model(<span class="hljs-string">'Drink'</span>, schema);
<span class="hljs-keyword">await</span> Drink.findByName(<span class="hljs-string">'LaCroix'</span>);</pre> <p>If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as statics.</p> </div>
<h3 id="schema_Schema-virtual">Schema.prototype.virtual()</h3>
<h5>Parameters</h5>
<ul class="params">
<li class="param">name <span class="method-type">«String»</span> </li>
<li class="param">[options] <span class="method-type">«Object»</span> </li>
<ul style="margin-top: 0.5em"><li>[options.ref] <span class="method-type">«String|Model»</span> model name or model instance. Marks this as a <a href="populate#populate-virtuals">populate virtual</a>. </li></ul>
<ul style="margin-top: 0.5em"><li>[options.localField] <span class="method-type">«String|Function»</span> Required for populate virtuals. See <a href="populate#populate-virtuals">populate virtual docs</a> for more information. </li></ul>
<ul style="margin-top: 0.5em"><li>[options.foreignField] <span class="method-type">«String|Function»</span> Required for populate virtuals. See <a href="populate#populate-virtuals">populate virtual docs</a> for more information. </li></ul>
<ul style="margin-top: 0.5em"><li>[options.justOne=false] <span class="method-type">«Boolean|Function»</span> Only works with populate virtuals. If <a href="https://masteringjs.io/tutorials/fundamentals/truthy">truthy</a>, will be a single doc or <code>null</code>. Otherwise, the populate virtual will be an array. </li></ul>
<ul style="margin-top: 0.5em"><li>[options.count=false] <span class="method-type">«Boolean»</span> Only works with populate virtuals. If <a href="https://masteringjs.io/tutorials/fundamentals/truthy">truthy</a>, this populate virtual will contain the number of documents rather than the documents themselves when you <code>populate()</code>. </li></ul>
</ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«VirtualType»</span> </li></ul>
<div>
<p>Creates a virtual type with the given name.</p> </div>
<h3 id="schema_Schema-virtualpath">Schema.prototype.virtualpath()</h3>
<h5>Parameters</h5>
<ul class="params"><li class="param">name <span class="method-type">«String»</span> </li></ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«VirtualType»</span> </li></ul>
<div>
<p>Returns the virtual type with the given <code>name</code>.</p> </div>
<h3 id="schema_Schema.reserved">Schema.reserved</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>Reserved document keys.</p> <p>Keys in this object are names that are rejected in schema declarations because they conflict with Mongoose functionality. If you create a schema using <code>new Schema()</code> with one of these property names, Mongoose will throw an error.</p> <ul> <li>prototype</li> <li>emit</li> <li>on</li> <li>once</li> <li>listeners</li> <li>removeListener</li> <li>collection</li> <li>db</li> <li>errors</li> <li>init</li> <li>isModified</li> <li>isNew</li> <li>get</li> <li>modelName</li> <li>save</li> <li>schema</li> <li>toObject</li> <li>validate</li> <li>remove</li> <li>populated</li> <li>_pres</li> <li>_posts</li> </ul> <p><em>NOTE:</em> Use of these terms as method names is permitted, but play at your own risk, as they may be existing mongoose document methods you are stomping on.</p> <pre data-language="javascript"><span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">new</span> Schema(..);
 schema.methods.init = <span class="hljs-function"><span class="hljs-keyword">function</span> () </span>{} <span class="hljs-comment">// potentially breaking</span></pre> </div>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010 LearnBoost<br>Licensed under the MIT License.<br>
    <a href="https://mongoosejs.com/docs/api/schema.html" class="_attribution-link">https://mongoosejs.com/docs/api/schema.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
