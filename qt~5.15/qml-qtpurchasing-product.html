
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Product (QML Type) - Qt 5.15 - W3cubDocs</title>
  
  <meta name="description" content=" A product for in-app purchasing. More... ">
  <meta name="keywords" content="product, qml, type, qt, qt~5.15">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/qt~5.15/qml-qtpurchasing-product.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/qt~5.15.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/qt~5.15/" class="_nav-link" title="" style="margin-left:0;">Qt 5.15</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _qt">
				
				
<h1 class="title">Product QML Type</h1>   <p>A product for in-app purchasing. <a href="#details">More...</a></p>  <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> Import Statement:</td>
<td class="memItemRight bottomAlign"> import QtPurchasing 1.15</td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> Since:</td>
<td class="memItemRight bottomAlign"> QtPurchasing 1.0</td>
</tr>
</table>
<ul> <li><a href="https://doc.qt.io/qt-5.15/qml-qtpurchasing-product-members.html">List of all members, including inherited members</a></li> </ul>  <h2 id="properties">Properties
</h2> <ul> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#description-prop">description</a></b></b> : string</li> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#identifier-prop">identifier</a></b></b> : string</li> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#price-prop">price</a></b></b> : string</li> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#status-prop">status</a></b></b> : enumeration</li> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#store-prop">store</a></b></b> : object</li> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#title-prop">title</a></b></b> : string</li> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#type-prop">type</a></b></b> : string</li> </ul>  <h2 id="signals">Signals
</h2> <ul> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#onPurchaseFailed-signal">onPurchaseFailed</a></b></b>(object <i>transaction</i>)</li> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#onPurchaseRestored-signal">onPurchaseRestored</a></b></b>(object <i>transaction</i>)</li> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#onPurchaseSucceeded-signal">onPurchaseSucceeded</a></b></b>(object <i>transaction</i>)</li> </ul>  <h2 id="methods">Methods
</h2> <ul> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#purchase-method">purchase</a></b></b>()</li> <li class="fn">
<b><b><a href="qml-qtpurchasing-product#resetStatus-method">resetStatus</a></b></b>()</li> </ul>   <h2 id="details">Detailed Description
</h2> <p>Product contains information about a product in the external market place. Once the product's <a href="qml-qtpurchasing-product#identifier-prop">identifier</a> and <a href="qml-qtpurchasing-product#type-prop">type</a> are set, the product will be queried from the external market place. Properties such as <a href="qml-qtpurchasing-product#price-prop">price</a> will then be set, and it will be possible to purchase the product. The <a href="qml-qtpurchasing-product#status-prop">status</a> property holds information on the registration process.</p> <p><b>Note: </b>It is not possible to change the identifier and type once they have both been set and the product has been registered.</p>  <h2>Property Documentation</h2>  <h3 class="qmlproto" id="description-prop"></h3>
<p> <span class="name">description</span> : <span class="type"><a href="qml-string">string</a></span></p> <p>This property holds the description of the product once it has been successfully queried from the external market place. The title is localized if the external market place has defined a description in the current users locale.</p>    <h3 class="qmlproto" id="identifier-prop"></h3>
<p> <span class="name">identifier</span> : <span class="type"><a href="qml-string">string</a></span></p> <p>This property holds the identifier of the product in the external market place. It must match the identifier used to register the product externally before-hand.</p> <p>When both the identifier and <a href="qml-qtpurchasing-product#type-prop">type</a> is set, the product is queried from the external market place, and its other properties are updated asynchronously. At this point, the identifier and type can no longer be changed.</p> <p>The following example queries an unlockable product named "myUnlockableProduct" from the external market place.</p> <pre data-language="qml">Store {
    Product {
      identifier: "myUnlockableProduct"
      type: Product.Unlockable

      // ...
    }
}</pre>    <h3 class="qmlproto" id="price-prop"></h3>
<p> <span class="name">price</span> : <span class="type"><a href="qml-string">string</a></span></p> <p>This property holds the price of the product once it has been successfully queried from the external market place. The price is a string consisting of both currency and value, and is usually localized to the current user.</p> <p>For example, the following example displays the price of the unlockable product named "myUnlockableProduct":</p> <pre data-language="cpp">Store {
    Product {
        id: myUnlockableProduct
        identifier: "myUnlockableProduct"
        type: Product.Unlockable

        // ...
    }
}

Text {
    text: myUnlockableProduct.status === Product.Registered
          ? "Price is " + myUnlockableProduct.price
          : "Price unknown at the moment"
}</pre> <p>When run in a Norwegian locale, this code could for instance display "Price is kr 6,00" for a one-dollar product.</p>    <h3 class="qmlproto" id="status-prop"></h3>
<p> <span class="name">status</span> : <span class="type"><a href="qml-enumeration">enumeration</a></span></p> <p>This property holds the current status of the product in the registration sequence.</p> <ul> <li>Product.Uninitialized - This is initial status, before the identifier property has been set.</li> <li>Product.PendingRegistration - Indicates that the product is currently being queried from the external market place. The product gets this status when its identifier is set.</li> <li>Product.Registered - Indicates that the product was successfully found in the external market place. Its price can now be queried and the product can be purchased.</li> <li>Product.Unknown - The product could not be found in the external market place. This could for example be due to misspelling the product identifier.</li> </ul> <pre data-language="qml">Store {
    Product {
        identifier: "myConsumableProduct"
        type: Product.Consumable
        onStatusChanged: {
            switch (status) {
            case Product.PendingRegistration: console.debug("Registering " + identifier); break
            case Product.Registered: console.debug(identifier + " registered with price " + price); break
            case Product.Unknown: console.debug(identifier + " was not found in the market place"); break
            }
        }

        // ...
    }
}</pre>    <h3 class="qmlproto" id="store-prop"></h3>
<p> <span class="name">store</span> : <span class="type">object</span></p> <p>This property holds the store containing the product. When the product is created as a child of the store, this is set automatically to the parent, as in the following example:</p> <pre data-language="qml">Store {
    Product {
      // No need to set the store explicitly here, as it will automatically be
      // bound to the parent
      identifier: "myConsumableProduct"
      type: Product.Consumable
    }
    Product {
      // No need to set the store explicitly here, as it will automatically be
      // bound to the parent
      identifier: "myUnlockableProduct"
      type: Product.Unlockable
    }
}</pre> <p>However, in some advanced use cases, for example when products are created based on a model, it's also possible to create the product anywhere in the QML document and set the store explicitly, like in the following example:</p> <pre data-language="cpp">ListModel {
    id: productModel
    ListElement {
        productIdentifier: "myConsumableProduct"
        productType: Product.Consumable
    }
    ListElement {
        productIdentifier: "myUnlockableProduct"
        productType: Product.Unlockable
    }
}

Store {
    id: myStore
}

Instantiator {
    model: productModel
    delegate: Product {
                    identifier: productIdentifier
                    type: productType
                    store: myStore
              }
}</pre>    <h3 class="qmlproto" id="title-prop"></h3>
<p> <span class="name">title</span> : <span class="type"><a href="qml-string">string</a></span></p> <p>This property holds the title of the product once it has been successfully queried from the external market place. The title is localized if the external market place has defined a title in the current users locale.</p>    <h3 class="qmlproto" id="type-prop"></h3>
<p> <span class="name">type</span> : <span class="type"><a href="qml-string">string</a></span></p> <p>This property holds the type of the product in the external market place.</p> <p>It can hold one of the following values:</p> <ul> <li>Product.Consumable The product is consumable and can be purchased more than once by the same user, granted that the transaction for the previous purchase has been finalized.</li> <li>Product.Unlockable The product can only be purchased once per user. If the application is uninstalled and reinstalled on the device (or installed on a new device by the same user), purchases of unlockable products can be restored using the store's <a href="qml-qtpurchasing-store#restorePurchases-method">restorePurchases()</a> method.</li> </ul> <p>When both the <a href="qml-qtpurchasing-product#identifier-prop">identifier</a> and type is set, the product is queried from the external market place, and its other properties are updated asynchronously. At this point, the identifier and type can no longer be changed.</p> <p>The following example queries an unlockable product named "myUnlockableProduct" from the external market place.</p> <pre data-language="qml">Store {
    Product {
      identifier: "myUnlockableProduct"
      type: Product.Unlockable

      // ...
    }
}</pre>   <h2>Signal Documentation</h2>  <h3 class="qmlproto" id="onPurchaseFailed-signal"></h3>
<p> <span class="name">onPurchaseFailed</span>(<span class="type">object</span> <i>transaction</i>)</p> <p>This handler is called when a purchase was requested for a given product, but the purchase failed. This will typically happen if the application calls <a href="qml-qtpurchasing-product#purchase-method">purchase()</a> on a product, and the user subsequently cancels the purchase. It could also happen under other circumstances, for example if there is no suitable network connection.</p> <p>All products should have an <code>onPurchaseFailed</code> handler.</p> <p>After a proper reaction is taken, the finalize() function should be called on the <i>transaction</i> object. If this is not done, the handler may be called again the next time the product is registered.</p> <p>The following example reacts to a failed purchase attempt by calling a custom function to display a message to the user.</p> <pre data-language="qml">Store {
    Product {
        id: myConsumableProduct
        identifier: "myConsumableProduct"
        type: Product.Consumable

        onPurchaseFailed: {
            myDisplayHelper.message("Product was not purchased. You have not been charged.")
            transaction.finalize()
        }

        // ...
    }
}</pre> <p><b>Note: </b>The corresponding handler is <code>onOnPurchaseFailed</code>.</p>    <h3 class="qmlproto" id="onPurchaseRestored-signal"></h3>
<p> <span class="name">onPurchaseRestored</span>(<span class="type">object</span> <i>transaction</i>)</p> <p>This handler is called when a previously purchased unlockable product is restored. This can happen when the <a href="qml-qtpurchasing-store#restorePurchases-method">restorePurchases()</a> function in the current <a href="qml-qtpurchasing-store">Store</a> is called. The <code>onPurchaseRestored</code> handler will then be called for each unlockable product which has previously been purchased by the user.</p> <p>Applications which uses the <a href="qml-qtpurchasing-store#restorePurchases-method">restorePurchases()</a> function should include this handler in all unlockable products. In the handler, the application should make sure information about the purchase is stored and call <a href="qml-qtpurchasing-transaction#finalize-method">finalize()</a> on the <i>transaction</i> object if the information has been successfully stored (or has been verified to already be stored).</p> <p>The following example calls a custom function which either saves the information about the purchase or verifies that it is already saved. When the data has been verified, it finalizes the transaction. If it could not be verified, it calls another custom function to display an error message to the user. If the transaction is not finalized, the handler will be called again for the same transaction the next time the product is registered (on application start-up).</p> <pre data-language="qml">Store {
    Product {
        id: myUnlockableProduct
        identifier: "myUnlockableProduct"
        type: Product.Unlockable

        onPurchaseRestored: {
            if (myStorage.savePurchaseInformation(identifier)) {
                transaction.finalize()
            } else {
                myDisplayHelper.message("Failed to store purchase information. Is there available storage?")
            }
        }

        // ...
    }
}</pre> <p><b>Note: </b>The corresponding handler is <code>onOnPurchaseRestored</code>.</p>    <h3 class="qmlproto" id="onPurchaseSucceeded-signal"></h3>
<p> <span class="name">onPurchaseSucceeded</span>(<span class="type">object</span> <i>transaction</i>)</p> <p>This handler is called when a product has been purchased successfully. It is triggered when the application has called <a href="qml-qtpurchasing-product#purchase-method">purchase()</a> on the product and the user has subsequently confirmed the purchase, for example by entering their password.</p> <p>All products should have a handler for onPurchaseSucceeded. This handler should in turn save information about the purchased product and when the information has been stored and verified, it should call finalize() on the <i>transaction</i> object.</p> <p>The handler should support being called multiple times for the same purchase. For example, the application execution might by accident be interrupted after saving the purchase information, but before finalizing the transaction. In this case, the handler should verify that the information is already stored in the persistent storage and then finalize the transaction.</p> <p>The following example attempts to store the purchase state of a consumable product using a custom made function. It only finalizes the transaction if saving the data was successful. Otherwise, it calls another custom function to display an error message to the user.</p> <pre data-language="qml">Store {
    Product {
        id: myConsumableProduct
        identifier: "myConsumableProduct"
        type: Product.Consumable

        onPurchaseSucceeded: {
            if (myStorage.savePurchaseInformation(identifier)) {
                transaction.finalize()
            } else {
                myDisplayHelper.message("Failed to store purchase information. Is there available storage?")
            }
        }

        // ...
    }
}</pre> <p>If the transaction is not finalized, the onPurchaseSucceeded handler will be called again the next time the product is registered (on application startup.) This means that if saving the information failed, the user will have the opportunity of rectifying the problem (for example by deleting something else to make space for the data) and the transaction will be completed once they restart the application and the problem has been solved.</p> <p><b>Note: </b>A purchased, consumable product can not be purchased again until its previous transaction is finalized.</p> <p><b>Note: </b>The corresponding handler is <code>onOnPurchaseSucceeded</code>.</p>   <h2>Method Documentation</h2>  <h3 class="qmlproto" id="purchase-method"></h3>
<p> <span class="name">purchase</span>()</p> <p>Launches the purchasing process for this product. The purchasing process is asynchronous. When it completes, either the <a href="qml-qtpurchasing-product#onPurchaseSucceeded-signal">onPurchaseSucceeded</a> or the <a href="qml-qtpurchasing-product#onPurchaseFailed-signal">onPurchaseFailed</a> handler in the object will be called with the resulting transaction.</p>    <h3 class="qmlproto" id="resetStatus-method"></h3>
<p> <span class="name">resetStatus</span>()</p> <p>Resets the <a href="qml-qtpurchasing-product#status-prop">status</a> of this product and retries querying it from the external market place.</p> <p>This method can be used when querying the product failed for some reason (such as network timeouts).</p> <p>This method was introduced in QtPurchasing 1.0.2.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-5.15/qml-qtpurchasing-product.html" class="_attribution-link">https://doc.qt.io/qt-5.15/qml-qtpurchasing-product.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
