
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CustomMaterial (QML Type) - Qt 5.15 - W3cubDocs</title>
  
  <meta name="description" content=" Base component for creating custom materials used to shade models. More... ">
  <meta name="keywords" content="custommaterial, qml, type, qt, qt~5.15">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/qt~5.15/qml-qtquick3d-materials-custommaterial.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/qt~5.15.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/qt~5.15/" class="_nav-link" title="" style="margin-left:0;">Qt 5.15</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _qt">
				
				
<h1 class="title">CustomMaterial QML Type</h1>   <p>Base component for creating custom materials used to shade models. <a href="#details">More...</a></p>  <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> Import Statement:</td>
<td class="memItemRight bottomAlign"> import QtQuick3D.Materials 1.15</td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> Inherits:</td>
<td class="memItemRight bottomAlign"> <p><a href="qml-qtquick3d-material">Material</a></p> </td>
</tr>
</table>
<ul> <li><a href="https://doc.qt.io/qt-5.15/qml-qtquick3d-materials-custommaterial-members.html">List of all members, including inherited members</a></li> </ul>  <h2 id="properties">Properties
</h2> <ul> <li class="fn">
<b><b><a href="qml-qtquick3d-materials-custommaterial#alwaysDirty-prop">alwaysDirty</a></b></b> : bool</li> <li class="fn">
<b><b><a href="qml-qtquick3d-materials-custommaterial#hasRefraction-prop">hasRefraction</a></b></b> : bool</li> <li class="fn">
<b><b><a href="qml-qtquick3d-materials-custommaterial#hasTransparency-prop">hasTransparency</a></b></b> : bool</li> <li class="fn">
<b><b><a href="qml-qtquick3d-materials-custommaterial#passes-prop">passes</a></b></b> : list</li> <li class="fn">
<b><b><a href="qml-qtquick3d-materials-custommaterial#shaderInfo-prop">shaderInfo</a></b></b> : ShaderInfo</li> </ul>   <h2 id="details">Detailed Description
</h2> <p>The custom material allows the user of <a href="https://doc.qt.io/qt-5.15/qtquick3d-qmlmodule.html">QtQuick3D</a> to access its material library and implement own materials. There are two types of custom materials, which differ on how they are using the material library. First one uses the custom material interface provided by the library to implement materials similarly to many of the materials in the material library without implementing it's own main function. This type of material must implement all the required functions of the material. The second type implements it's own main function, but can still use functionality from the material library. See <a href="custom-material-reference">reference</a> on how to implement the material using the material interface.</p> <pre data-language="qml">CustomMaterial {
    // These properties names need to match the ones in the shader code!
    property bool uEnvironmentMappingEnabled: false
    property bool uShadowMappingEnabled: false
    property real roughness: 0.0
    property vector3d metal_color: Qt.vector3d(0.805, 0.395, 0.305)

    shaderInfo: ShaderInfo {
        version: "330"
        type: "GLSL"
        shaderKey: ShaderInfo.Glossy
    }

    property TextureInput uEnvironmentTexture: TextureInput {
            enabled: uEnvironmentMappingEnabled
            texture: Texture {
                id: envImage
                source: "maps/spherical_checker.png"
            }
    }
    property TextureInput uBakedShadowTexture: TextureInput {
            enabled: uShadowMappingEnabled
            texture: Texture {
                id: shadowImage
                source: "maps/shadow.png"
            }
    }

    Shader {
        id: copperFragShader
        stage: Shader.Fragment
        shader: "shaders/copper.frag"
    }

    passes: [ Pass {
            shaders: copperFragShader
        }
    ]
}</pre> <p>The example here from <a href="qml-qtquick3d-materials-coppermaterial">CopperMaterial</a> shows how the material is built. First, the shader parameters are specified as properties. The names and types must match the names in the shader code. Textures use <a href="qml-qtquick3d-textureinput">TextureInput</a> to assign <a href="qml-qtquick3d-texture">texture</a> into the shader variable. The <a href="qml-qtquick3d-materials-custommaterial#shaderInfo-prop">shaderInfo</a> property specifies more information about the shader and also configures some of its features on or off when the custom material is built by <a href="https://doc.qt.io/qt-5.15/qtquick3d-qmlmodule.html">QtQuick3D</a> shader generator. Then the material can use Shader type to specify shader source and shader stage. These are used with <a href="qml-qtquick3d-pass">passes</a> to create the resulting material. The passes can contain multiple rendering passes and also other commands. Normally only the fragment shader needs to be passed to a pass. The material library generates the vertex shader for the material. The material can also create <a href="qml-qtquick3d-buffer">buffers</a> to store intermediate rendering results. Here is an example from <a href="qml-qtquick3d-materials-glassrefractivematerial">GlassRefractiveMaterial</a>:</p> <pre data-language="qml">Buffer {
    id: tempBuffer
    name: "temp_buffer"
    format: Buffer.Unknown
    textureFilterOperation: Buffer.Linear
    textureCoordOperation: Buffer.ClampToEdge
    sizeMultiplier: 1.0
    bufferFlags: Buffer.None // aka frame
}

passes: [ Pass {
        shaders: simpleGlassRefractiveFragShader
        commands: [ BufferBlit {
                destination: tempBuffer
            }, BufferInput {
                buffer: tempBuffer
                param: "refractiveTexture"
            }, Blending {
                srcBlending: Blending.SrcAlpha
                destBlending: Blending.OneMinusSrcAlpha
            }
        ]
    }
]</pre> <p>Multiple passes can also be specified to create advanced materials. Here is an example from <a href="qml-qtquick3d-materials-frostedglassmaterial">FrostedGlassMaterial</a>.</p> <pre data-language="qml">passes: [ Pass {
        shaders: noopShader
        output: dummyBuffer
        commands: [ BufferBlit {
                destination: frameBuffer
            }
        ]
    }, Pass {
        shaders: preBlurShader
        output: tempBuffer
        commands: [ BufferInput {
                buffer: frameBuffer
                param: "OriginBuffer"
            }
        ]
    }, Pass {
        shaders: blurXShader
        output: blurXBuffer
        commands: [ BufferInput {
                buffer: tempBuffer
                param: "BlurBuffer"
            }
        ]
    }, Pass {
        shaders: blurYShader
        output: blurYBuffer
        commands: [ BufferInput {
                buffer: blurXBuffer
                param: "BlurBuffer"
            }, BufferInput {
                buffer: tempBuffer
                param: "OriginBuffer"
            }
        ]
    }, Pass {
        shaders: mainShader
        commands: [BufferInput {
                buffer: blurYBuffer
                param: "refractiveTexture"
            }, Blending {
                srcBlending: Blending.SrcAlpha
                destBlending: Blending.OneMinusSrcAlpha
            }
        ]
    }
]</pre>  <h2>Property Documentation</h2>  <h3 class="qmlproto" id="alwaysDirty-prop"></h3>
<p> <span class="name">alwaysDirty</span> : <span class="type"><a href="qml-bool">bool</a></span></p> <p>Specifies that the material state is always dirty, which indicates that the material needs to be refreshed every time it is used by the <a href="https://doc.qt.io/qt-5.15/qtquick3d-qmlmodule.html">QtQuick3D</a>.</p>    <h3 class="qmlproto" id="hasRefraction-prop"></h3>
<p> <span class="name">hasRefraction</span> : <span class="type"><a href="qml-bool">bool</a></span></p> <p>Specifies that the material has refraction.</p>    <h3 class="qmlproto" id="hasTransparency-prop"></h3>
<p> <span class="name">hasTransparency</span> : <span class="type"><a href="qml-bool">bool</a></span></p> <p>Specifies that the material has transparency.</p>    <h3 class="qmlproto" id="passes-prop"></h3>
<p> <span class="name">passes</span> : <span class="type"><a href="qml-list">list</a></span></p> <p>Contains a list of render <a href="qml-qtquick3d-pass">passes</a> implemented by the material.</p>    <h3 class="qmlproto" id="shaderInfo-prop"></h3>
<p> <span class="name">shaderInfo</span> : <span class="type"><a href="qml-qtquick3d-shaderinfo">ShaderInfo</a></span></p> <p>Specifies the <a href="qml-qtquick3d-shaderinfo">ShaderInfo</a> of the material.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-5.15/qml-qtquick3d-materials-custommaterial.html" class="_attribution-link">https://doc.qt.io/qt-5.15/qml-qtquick3d-materials-custommaterial.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
