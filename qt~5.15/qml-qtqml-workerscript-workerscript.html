
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>WorkerScript (QML Type) - Qt 5.15 - W3cubDocs</title>
  
  <meta name="description" content=" Enables the use of threads in a Qt Quick application. More... ">
  <meta name="keywords" content="workerscript, qml, type, qt, qt~5.15">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/qt~5.15/qml-qtqml-workerscript-workerscript.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/qt~5.15.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/qt~5.15/" class="_nav-link" title="" style="margin-left:0;">Qt 5.15</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _qt">
				
				
<h1 class="title">WorkerScript QML Type</h1>   <p>Enables the use of threads in a Qt Quick application. <a href="#details">More...</a></p>  <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> Import Statement:</td>
<td class="memItemRight bottomAlign"> import QtQml.WorkerScript 2.15</td>
</tr>
</table>
<ul> <li><a href="https://doc.qt.io/qt-5.15/qml-qtqml-workerscript-workerscript-members.html">List of all members, including inherited members</a></li> </ul>  <h2 id="properties">Properties
</h2> <ul> <li class="fn">
<b><b><a href="qml-qtqml-workerscript-workerscript#ready-prop">ready</a></b></b> : bool</li> <li class="fn">
<b><b><a href="qml-qtqml-workerscript-workerscript#source-prop">source</a></b></b> : url</li> </ul>  <h2 id="signals">Signals
</h2> <ul> <li class="fn">
<b><b><a href="qml-qtqml-workerscript-workerscript#message-signal">message</a></b></b>(jsobject <i>msg</i>)</li> </ul>  <h2 id="methods">Methods
</h2> <ul> <li class="fn">
<b><b><a href="qml-qtqml-workerscript-workerscript#sendMessage-method">sendMessage</a></b></b>(jsobject <i>message</i>)</li> </ul>   <h2 id="details">Detailed Description
</h2> <p>Use WorkerScript to run operations in a new thread. This is useful for running operations in the background so that the main GUI thread is not blocked.</p> <p>Messages can be passed between the new thread and the parent thread using <a href="qml-qtqml-workerscript-workerscript#sendMessage-method">sendMessage()</a> and the <code>onMessage()</code> handler.</p> <p>An example:</p> <pre data-language="qml">import QtQuick 2.0

Rectangle {
    width: 300; height: 300

    Text {
        id: myText
        text: 'Click anywhere'
    }

    WorkerScript {
        id: myWorker
        source: "script.mjs"

        onMessage: myText.text = messageObject.reply
    }

    MouseArea {
        anchors.fill: parent
        onClicked: myWorker.sendMessage({ 'x': mouse.x, 'y': mouse.y })
    }
}</pre> <p>The above worker script specifies a JavaScript file, "script.mjs", that handles the operations to be performed in the new thread. Here is <code>script.mjs</code>:</p> <pre data-language="cpp">WorkerScript.onMessage = function(message) {
    // ... long-running operations and calculations are done here
    WorkerScript.sendMessage({ 'reply': 'Mouse is at ' + message.x + ',' + message.y })
}</pre> <p>When the user clicks anywhere within the rectangle, <code>sendMessage()</code> is called, triggering the <code>WorkerScript.onMessage()</code> handler in <code>script.mjs</code>. This in turn sends a reply message that is then received by the <code>onMessage()</code> handler of <code>myWorker</code>.</p> <p>The example uses a script that is an ECMAScript module, because it has the ".mjs" extension. It can use import statements to access functionality from other modules and it is run in JavaScript strict mode.</p> <p>If a worker script has the extension ".js" instead, then it is considered to contain plain JavaScript statements and it is run in non-strict mode.</p> <p><b>Note: </b>Each WorkerScript element will instantiate a separate JavaScript engine to ensure perfect isolation and thread-safety. If the impact of that results in a memory consumption that is too high for your environment, then consider sharing a WorkerScript element.</p>  <h4 id="restrictions">Restrictions
</h4> <p>Since the <code>WorkerScript.onMessage()</code> function is run in a separate thread, the JavaScript file is evaluated in a context separate from the main QML engine. This means that unlike an ordinary JavaScript file that is imported into QML, the <code>script.mjs</code> in the above example cannot access the properties, methods or other attributes of the QML item, nor can it access any context properties set on the QML object through <a href="qqmlcontext">QQmlContext</a>.</p> <p>Additionally, there are restrictions on the types of values that can be passed to and from the worker script. See the <a href="qml-qtqml-workerscript-workerscript#sendMessage-method">sendMessage()</a> documentation for details.</p> <p>Worker scripts that are plain JavaScript sources can not use <a href="qtqml-javascript-imports">.import</a> syntax. Scripts that are ECMAScript modules can freely use import and export statements.</p> <p><b>See also </b><a href="https://doc.qt.io/qt-5.15/qtquick-threading-example.html">Qt Quick Examples - Threading</a> and <a href="https://doc.qt.io/qt-5.15/qtquick-threading-threadedlistmodel-example.html">Threaded ListModel Example</a>.</p>  <h2>Property Documentation</h2>  <h3 class="qmlproto" id="ready-prop"></h3>
<p> <span class="name">ready</span> : <span class="type"><a href="qml-bool">bool</a></span></p> <p>This holds whether the <a href="qml-qtqml-workerscript-workerscript">WorkerScript</a> has been initialized and is ready for receiving messages via <code>WorkerScript.sendMessage()</code>.</p>    <h3 class="qmlproto" id="source-prop"></h3>
<p> <span class="name">source</span> : <span class="type"><a href="qml-url">url</a></span></p> <p>This holds the url of the JavaScript file that implements the <code>WorkerScript.onMessage()</code> handler for threaded operations.</p> <p>If the file name component of the url ends with ".mjs", then the script is parsed as an ECMAScript module and run in strict mode. Otherwise it is considered to be plain script.</p>   <h2>Signal Documentation</h2>  <h3 class="qmlproto" id="message-signal"></h3>
<p> <span class="name">message</span>(<span class="type">jsobject</span> <i>msg</i>)</p> <p>This signal is emitted when a message <i>msg</i> is received from a worker script in another thread through a call to <a href="qml-qtqml-workerscript-workerscript#sendMessage-method">sendMessage()</a>.</p> <p><b>Note: </b>The corresponding handler is <code>onMessage</code>.</p>   <h2>Method Documentation</h2>  <h3 class="qmlproto" id="sendMessage-method"></h3>
<p> <span class="name">sendMessage</span>(<span class="type">jsobject</span> <i>message</i>)</p> <p>Sends the given <i>message</i> to a worker script handler in another thread. The other worker script handler can receive this message through the onMessage() handler.</p> <p>The <code>message</code> object may only contain values of the following types:</p> <ul> <li>boolean, number, string</li> <li>JavaScript objects and arrays</li> <li>ListModel objects (any other type of <a href="qobject">QObject</a>* is not allowed)</li> </ul> <p>All objects and arrays are copied to the <code>message</code>. With the exception of ListModel objects, any modifications by the other thread to an object passed in <code>message</code> will not be reflected in the original object.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-5.15/qml-qtqml-workerscript-workerscript.html" class="_attribution-link">https://doc.qt.io/qt-5.15/qml-qtqml-workerscript-workerscript.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
