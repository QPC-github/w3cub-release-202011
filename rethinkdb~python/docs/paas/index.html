
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Deploying With PaaS - RethinkDB Python - W3cubDocs</title>
  
  <meta name="description" content=" RethinkDB can be easily deployed on Compose and Amazon Web Services. ">
  <meta name="keywords" content="deploying, with, paas, rethinkdb, python, rethinkdb~python">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/rethinkdb~python/docs/paas/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/rethinkdb~python.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/rethinkdb~python/" class="_nav-link" title="" style="margin-left:0;">RethinkDB Python</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _rethinkdb">
				
				
<h1 class="title">Deploying with PaaS</h1> <p>RethinkDB can be easily deployed on <a href="http://compose.io/">Compose</a> and <a href="http://aws.amazon.com/">Amazon Web Services</a>.</p> <div class="toc">  <ul id="markdown-toc"> <li><a href="#deploying-on-compose" id="markdown-toc-deploying-on-compose">Deploying on Compose</a></li> <li><a href="#deploying-on-aws" id="markdown-toc-deploying-on-aws">Deploying on AWS</a></li> <li><a href="#instance-administration" id="markdown-toc-instance-administration">Instance administration</a></li> <li><a href="#security" id="markdown-toc-security">Security</a></li> </ul> </div> <h2 id="deploying-on-compose">Deploying on Compose</h2> <p>Each deployment provided by Compose is configured as a high-availability cluster with full redundancy. To create a hosted RethinkDB instance:</p> <ol> <li>Click the “Add Deployment” button in the Compose administration panel.</li> <li>Select “RethinkDB.”</li> <li>Enter a name for the deployment.</li> </ol> <p><img src="https://rethinkdb.com/assets/images/docs/compose.png" alt="Deploying on Compose"></p> <p>If you haven’t already added billing information to your Compose account, you’ll be prompted to do so before deployment.</p> <p>You can connect to your hosted cluster on Compose in one of two ways: via SSL or via SSH tunneling. With SSL, you can get a direct Admin URL and driver connection URL to your RethinkDB instance. SSL driver connections are only supported with the official RethinkDB drivers and the community-supported Go driver. For more details, read Compose’s <a href="https://www.compose.io/articles/rethinkdb-and-ssl-think-secure/">RethinkDB and SSL</a> blog post.</p> <p>SSH tunneling lets you connect directly to the virtual private network of your RethinkDB cluster. This is more complicated to set up, but lets you work with the hosted RethinkDB instance the same way you’d work with a local installation, and it can work with any community RethinkDB driver. After your RethinkDB deployment is created, the admin console will give you the host and port information that you need to use to set up the SSH tunnel.</p> <p>Read Compose’s <a href="https://docs.compose.io/getting-started/rethinkdb-deployments.html">overview</a> of RethinkDB support and their <a href="https://help.compose.io/docs/connecting-to-rethinkdb">Connecting to RethinkDB</a> documentation for more information.</p> <h2 id="deploying-on-aws">Deploying on AWS</h2> <h3 id="launching-an-instance">Launching an instance</h3> <p>The smallest recommended instance type is <code class="highlighter-rouge">t2.small</code>. However, <code class="highlighter-rouge">t2.micro</code> works for simple tests. Follow these instructions to set up an AMI:</p> <ol> <li>On the <a href="https://aws.amazon.com/marketplace/pp/B013R60Q8Y">RethinkDB marketplace page</a>, click the <strong>Continue</strong> button.</li> <li>Select the <strong>1-Click Launch</strong> tab, select the size of the instance you wish to configure, and click on the <strong>Launch with 1-Click</strong> button on the right.</li> <li>Click on the link <strong><a href="https://aws.amazon.com/marketplace/library">Your Software</a></strong> in the upper right. RethinkDB should appear as one of your software subscriptions.</li> <li>When the RethinkDB instance is ready, click on its <strong>Access Software</strong> link.</li> <li>You should see a “Setting up a RethinkDB AMI” web page. Click on the <strong>Continue</strong> button to proceed.</li> <li>Accept the self-signed SSL certificate. (How to do this is browser-dependent.)</li> <li>Choose an AMI password.</li> <li>Wait for the instance to initialize.</li> <li>Log in using the username <code class="highlighter-rouge">rethinkdb</code> and the password you chose in step 7.</li> </ol> <p><img src="https://rethinkdb.com/assets/images/docs/aws/ami_setup.png" alt="Shard with the web interface"></p> <blockquote class="infobox ">
<p><strong>Note</strong>: RethinkDB uses a self-signed certificate to encrypt your password. You’ll have to accept the self-signed certificate in your browser to access the instance.</p> </blockquote> <h3 id="ami-configuration">AMI configuration</h3> <p>The RethinkDB AMI is preconfigured with the following options:</p> <ul> <li>Ubuntu Server 12.04 LTS</li> <li>RethinkDB server</li> <li>Official RethinkDB client drivers for Python, JavaScript, Java, and Ruby</li> <li>5 GB of free EBS space for your data</li> </ul> <blockquote class="infobox ">
<p><strong>Note</strong>: it is possible to attach more specialized EBS volumes and have RethinkDB store your data on them, but this option is not yet available out of the box. If you manually attach an EBS volume, you can SSH into the instance and edit the configuration file to point RethinkDB to the custom volume. See the <a href="../cluster-on-startup/index">cluster setup instructions</a> for more details.</p> </blockquote> <h2 id="instance-administration">Instance administration</h2> <p>The primary way to administer a RethinkDB AMI is through the web UI. Advanced tasks can be performed with ReQL administration commands, using the Data Explorer interactively or scripting through any RethinkDB driver. Read <a href="../administration-tools/index">Administration tools</a> for more details about scripting administration tasks.</p> <h3 id="ssh-access">SSH access</h3> <p>To connect to your instance over SSH, log in as the user <code class="highlighter-rouge">ubuntu</code>. Use the private key you chose during the installation process and the public hostname of the instance. For example:</p> <pre data-language="">ssh -i rethinkdb.prv -l ubuntu ec2-184-72-203-271.compute-1.amazonaws.com
</pre>  <h2 id="security">Security</h2> <p>The default security group opens 4 ports:</p> <ul> <li>Port 22 is for SSH. The server uses public key authentication.</li> <li>Port 80 is for HTTP. It is used during the setup process but otherwise redirects to HTTPS.</li> <li>Port 443 is for HTTPS. An Nginx server sits between RethinkDB and the world and provides basic HTTP authentication and secure HTTPS connections for the web UI.</li> <li>Port 28015 is for client driver access. The only form of authentication is a key that is sent in plain text over the network.</li> </ul> <p>To secure your instance more tightly, we recommend that you perform the following steps:</p> <ul> <li> <p><strong>Change the admin user password.</strong></p> <p>Open the RethinkDB Data Explorer in the web UI and execute the following command:</p> <p><code class="highlighter-rouge">js
  r.db('rethinkdb').table('users').get('admin').update({password: 'newpass'})
 </code></p> <p>Where “newpass” is the new password you want to use.</p> </li> <li> <p><strong>Restrict access to port 28015</strong> to allow only IP addresses or security groups that should have driver access.</p> </li> </ul> <h3 id="changing-the-web-ui-password">Changing the web UI password</h3> <p>To change the password used to access the web UI, log in over SSH and run the following command:</p> <pre data-language="">htpasswd /etc/nginx/htpasswd rethinkdb
</pre>  <p>The <code class="highlighter-rouge">htpasswd</code> tool will prompt for your new password.</p> <h3 id="set-a-user-account-and-password-for-your-application">Set a user account and password for your application</h3> <p>For details about this, read <a href="../permissions-and-accounts/index">Permissions and user accounts</a>.</p> <h3 id="setting-up-vpc-security-groups">Setting up VPC security groups</h3> <p>For added security, you can isolate a multi-node RethinkDB cluster on AWS using a Virtual Private Cloud security group. The default security group settings for RethinkDB allow anyone to connect to the database’s driver port, but exclude the intracluster port. Follow the steps below to set up your security groups.</p> <ol> <li>Open the <strong>Security Groups</strong> section of the administration console.</li> <li>Select the security group that your instances belong to and open the <strong>Inbound</strong> tab in the bottom half of the page.</li> <li>Note the id of the security group. It will start with <code class="highlighter-rouge">sg-</code>.</li> <li>Create a new rule to allow instances to connect to one another: <ul> <li>Select <strong>Custom TCP rule</strong>.</li> <li>Enter “29015” as the port range.</li> <li>As the <strong>Source</strong>, enter the id of the security group (see step 3).</li> <li>Click on <strong>Add Rule</strong>, and <strong>Apply rule changes</strong>.</li> </ul> </li> </ol> <p>After the rule has been applied, connect to your instances over SSH and change the RethinkDB configuration file (<code class="highlighter-rouge">/etc/rethinkdb/interfaces.d/default.conf</code>) to join them.</p> <pre data-language="">bind=all
join=&lt;IP address&gt;:29015
</pre>  <p>If you have changed the intracluster port from 29015, use the new number. For more guidance, see RethinkDB’s <a href="../cluster-on-startup/index">cluster setup instructions</a> and Amazon’s documentation on <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_SecurityGroups.html">Security Groups for your VPC</a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © RethinkDB contributors<br>Licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License.<br>
    <a href="https://rethinkdb.com/docs/paas/" class="_attribution-link">https://rethinkdb.com/docs/paas/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
