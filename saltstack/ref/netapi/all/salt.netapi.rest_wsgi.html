
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Rest_wsgi - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" This rest_wsgi module provides a no-frills REST interface for sending commands to the Salt master. There are no dependencies. ">
  <meta name="keywords" content="rest, wsgi, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/netapi/all/salt.netapi.rest_wsgi.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>rest_wsgi</h1> <div class="section" id="a-minimalist-rest-api-for-salt"> <h2>A minimalist REST API for Salt</h2> <p>This <code class="docutils literal notranslate"><span class="pre">rest_wsgi</span></code> module provides a no-frills REST interface for sending commands to the Salt master. There are no dependencies.</p> <p>Extra care must be taken when deploying this module into production. Please read this documentation in entirety.</p> <p>All authentication is done through Salt's <a class="reference internal" href="https://docs.saltstack.com/en/latest/topics/eauth/index.html#acl-eauth"><span class="std std-ref">external auth</span></a> system.</p> </div> <div class="section" id="usage"> <h2>Usage</h2> <ul class="simple"> <li>All requests must be sent to the root URL (<code class="docutils literal notranslate"><span class="pre">/</span></code>).</li> <li>All requests must be sent as a POST request with JSON content in the request body.</li> <li>All responses are in JSON.</li> </ul> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <p><a class="reference internal" href="salt.netapi.rest_cherrypy#module-salt.netapi.rest_cherrypy.app" title="salt.netapi.rest_cherrypy.app"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rest_cherrypy</span></code></a></p> <p class="last">The <a class="reference internal" href="salt.netapi.rest_cherrypy#module-salt.netapi.rest_cherrypy.app" title="salt.netapi.rest_cherrypy.app"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rest_cherrypy</span></code></a> module is more full-featured, production-ready, and has builtin security features.</p> </div> </div> <div class="section" id="deployment"> <h2>Deployment</h2> <p>The <code class="docutils literal notranslate"><span class="pre">rest_wsgi</span></code> netapi module is a standard Python WSGI app. It can be deployed one of two ways.</p> <div class="section" id="using-a-wsgi-compliant-web-server"> <h3>Using a WSGI-compliant web server</h3> <p>This module may be run via any WSGI-compliant production server such as Apache with mod_wsgi or Nginx with FastCGI.</p> <p>It is strongly recommended that this app be used with a server that supports HTTPS encryption since raw Salt authentication credentials must be sent with every request. Any apps that access Salt through this interface will need to manually manage authentication credentials (either username and password or a Salt token). Tread carefully.</p> </div> <div class="section" id="salt-api-using-a-development-only-server"> <h3>
<strong class="program">salt-api</strong> using a development-only server</h3> <p>If run directly via the salt-api daemon it uses the <a class="reference external" href="http://docs.python.org/2/library/wsgiref.html#module-wsgiref.simple_server">wsgiref.simple_server()</a> that ships in the Python standard library. This is a single-threaded server that is intended for testing and development. <strong>This server does not use encryption</strong>; please note that raw Salt authentication credentials must be sent with every HTTP request.</p> <p><strong>Running this module via salt-api is not recommended!</strong></p> <p>In order to start this module via the <code class="docutils literal notranslate"><span class="pre">salt-api</span></code> daemon the following must be put into the Salt master config:</p> <pre class="highlight-default notranslate" data-language="default">rest_wsgi:
    port: 8001</pre> </div> </div> <div class="section" id="usage-examples"> <h2>Usage examples</h2> <dl class="post"> <dt id="post--"> <code class="descname">POST </code><code class="descname">/</code>
</dt> <dd>
<p><strong>Example request</strong> for a basic <code class="docutils literal notranslate"><span class="pre">test.ping</span></code>:</p> <pre class="highlight-default notranslate" data-language="default">% curl -sS -i \
        -H 'Content-Type: application/json' \
        -d '[{"eauth":"pam","username":"saltdev","password":"saltdev","client":"local","tgt":"*","fun":"test.ping"}]' localhost:8001</pre> <p><strong>Example response</strong>:</p> <pre class="highlight-http notranslate" data-language="http">HTTP/1.0 200 OK
Content-Length: 89
Content-Type: application/json

{"return": [{"ms--4": true, "ms--3": true, "ms--2": true, "ms--1": true, "ms--0": true}]}</pre> <p><strong>Example request</strong> for an asynchronous <code class="docutils literal notranslate"><span class="pre">test.ping</span></code>:</p> <pre class="highlight-default notranslate" data-language="default">% curl -sS -i \
        -H 'Content-Type: application/json' \
        -d '[{"eauth":"pam","username":"saltdev","password":"saltdev","client":"local_async","tgt":"*","fun":"test.ping"}]' localhost:8001</pre> <p><strong>Example response</strong>:</p> <pre class="highlight-http notranslate" data-language="http">HTTP/1.0 200 OK
Content-Length: 103
Content-Type: application/json

{"return": [{"jid": "20130412192112593739", "minions": ["ms--4", "ms--3", "ms--2", "ms--1", "ms--0"]}]}</pre> <p><strong>Example request</strong> for looking up a job ID:</p> <pre class="highlight-default notranslate" data-language="default">% curl -sS -i \
        -H 'Content-Type: application/json' \
        -d '[{"eauth":"pam","username":"saltdev","password":"saltdev","client":"runner","fun":"jobs.lookup_jid","jid":"20130412192112593739"}]' localhost:8001</pre> <p><strong>Example response</strong>:</p> <pre class="highlight-http notranslate" data-language="http">HTTP/1.0 200 OK
Content-Length: 89
Content-Type: application/json

{"return": [{"ms--4": true, "ms--3": true, "ms--2": true, "ms--1": true, "ms--0": true}]}</pre> </dd>
</dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">form lowstate:</th>
<td class="field-body">A list of lowstate data appropriate for the <a class="reference internal" href="https://docs.saltstack.com/en/latest/ref/clients/index.html#client-apis"><span class="std std-ref">client</span></a> interface you are calling.</td> </tr> <tr class="field-even field">
<th class="field-name">status 200:</th>
<td class="field-body">success</td> </tr> <tr class="field-odd field">
<th class="field-name">status 401:</th>
<td class="field-body">authentication required</td> </tr> </tbody> </table> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/netapi/all/salt.netapi.rest_wsgi.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/netapi/all/salt.netapi.rest_wsgi.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
