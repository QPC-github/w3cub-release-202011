
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.zpool - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Module for running ZFS zpool command ">
  <meta name="keywords" content="salt, modules, zpool, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.zpool.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.zpool</h1> <p>Module for running ZFS zpool command</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">codeauthor:</th>
<td class="field-body">Nitin Madhok &lt;<a class="reference external" href="mailto:nmadhok%40clemson.edu">nmadhok<span>@</span>clemson<span>.</span>edu</a>&gt;, Jorge Schrauwen &lt;<a class="reference external" href="mailto:sjorge%40blackdot.be">sjorge<span>@</span>blackdot<span>.</span>be</a>&gt;</td> </tr> <tr class="field-even field">
<th class="field-name">maintainer:</th>
<td class="field-body">Jorge Schrauwen &lt;<a class="reference external" href="mailto:sjorge%40blackdot.be">sjorge<span>@</span>blackdot<span>.</span>be</a>&gt;</td> </tr> <tr class="field-odd field">
<th class="field-name">maturity:</th>
<td class="field-body">new</td> </tr> <tr class="field-even field">
<th class="field-name">depends:</th>
<td class="field-body">salt.utils.zfs</td> </tr> <tr class="field-odd field">
<th class="field-name">platform:</th>
<td class="field-body">illumos,freebsd,linux</td> </tr> </tbody> </table> <div class="versionchanged"> <p><span class="versionmodified">Changed in version 2018.3.1: </span>Big refactor to remove duplicate code, better type converions and improved consistancy in output.</p> </div> <dl class="function"> <h3 id="salt.modules.zpool.add"> salt.modules.zpool.add(zpool, *vdevs, **kwargs)</h3> <dd>
<p>Add the specified vdev's to the given storage pool</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>vdevs <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>One or more devices</dd> <dt>force <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Forces use of device</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.add myzpool /path/to/vdev1 /path/to/vdev2 [...]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.attach"> salt.modules.zpool.attach(zpool, device, new_device, force=False)</h3> <dd>
<p>Attach specified device to zpool</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>device <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Existing device name too</dd> <dt>new_device <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>New device name (to be attached to <code class="docutils literal notranslate"><span class="pre">device</span></code>)</dd> <dt>force <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Forces use of device</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.attach myzpool /path/to/vdev1 /path/to/vdev2 [...]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.clear"> salt.modules.zpool.clear(zpool, device=None)</h3> <dd>
<p>Clears device errors in a pool.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">The device must not be part of an active pool configuration.</p> </div> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>name of storage pool</dd> <dt>device <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>(optional) specific device to clear</dd> </dl> <div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.1.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.clear mypool
salt '*' zpool.clear mypool /path/to/dev</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.create"> salt.modules.zpool.create(zpool, *vdevs, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2015.5.0.</span></p> </div> <p>Create a simple zpool, a mirrored zpool, a zpool having nested VDEVs, a hybrid zpool with cache, spare and log drives or a zpool with RAIDZ-1, RAIDZ-2 or RAIDZ-3</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>vdevs <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>One or move devices</dd> <dt>force <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Forces use of vdevs, even if they appear in use or specify a conflicting replication level.</dd> <dt>mountpoint <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Sets the mount point for the root dataset</dd> <dt>altroot <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Equivalent to "-o cachefile=none,altroot=root"</dd> <dt>properties <span class="classifier-delimiter">:</span> <span class="classifier">dict</span>
</dt> <dd>Additional pool properties</dd> <dt>filesystem_properties <span class="classifier-delimiter">:</span> <span class="classifier">dict</span>
</dt> <dd>Additional filesystem properties</dd> <dt>createboot <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>
<p class="first">create a boot partition</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.create myzpool /path/to/vdev1 [...] [force=True|False]
salt '*' zpool.create myzpool mirror /path/to/vdev1 /path/to/vdev2 [...] [force=True|False]
salt '*' zpool.create myzpool raidz1 /path/to/vdev1 /path/to/vdev2 raidz2 /path/to/vdev3 /path/to/vdev4 /path/to/vdev5 [...] [force=True|False]
salt '*' zpool.create myzpool mirror /path/to/vdev1 [...] mirror /path/to/vdev2 /path/to/vdev3 [...] [force=True|False]
salt '*' zpool.create myhybridzpool mirror /tmp/file1 [...] log mirror /path/to/vdev1 [...] cache /path/to/vdev2 [...] spare /path/to/vdev3 [...] [force=True|False]</pre> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>Zpool properties can be specified at the time of creation of the pool by passing an additional argument called "properties" and specifying the properties with their respective values in the form of a python dictionary:</p> <pre class="highlight-text notranslate" data-language="text">properties="{'property1': 'value1', 'property2': 'value2'}"</pre> <p>Filesystem properties can be specified at the time of creation of the pool by passing an additional argument called "filesystem_properties" and specifying the properties with their respective values in the form of a python dictionary:</p> <pre class="highlight-text notranslate" data-language="text">filesystem_properties="{'property1': 'value1', 'property2': 'value2'}"</pre> <p>Example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>salt <span class="s1">'*'</span> zpool.create myzpool /path/to/vdev1 <span class="o">[</span>...<span class="o">]</span> <span class="nv">properties</span><span class="o">=</span><span class="s2">"{'property1': 'value1', 'property2': 'value2'}"</span>
</pre></div> </div> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.create myzpool /path/to/vdev1 [...] [force=True|False]
salt '*' zpool.create myzpool mirror /path/to/vdev1 /path/to/vdev2 [...] [force=True|False]
salt '*' zpool.create myzpool raidz1 /path/to/vdev1 /path/to/vdev2 raidz2 /path/to/vdev3 /path/to/vdev4 /path/to/vdev5 [...] [force=True|False]
salt '*' zpool.create myzpool mirror /path/to/vdev1 [...] mirror /path/to/vdev2 /path/to/vdev3 [...] [force=True|False]
salt '*' zpool.create myhybridzpool mirror /tmp/file1 [...] log mirror /path/to/vdev1 [...] cache /path/to/vdev2 [...] spare /path/to/vdev3 [...] [force=True|False]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.create_file_vdev"> salt.modules.zpool.create_file_vdev(size, *vdevs)</h3> <dd>
<p>Creates file based virtual devices for a zpool</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.create_file_vdev 7G /path/to/vdev1 [/path/to/vdev2] [...]</pre> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Depending on file size, the above command may take a while to return.</p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.destroy"> salt.modules.zpool.destroy(zpool, force=False)</h3> <dd>
<p>Destroys a storage pool</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>force <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Force destroy of pool</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.destroy myzpool</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.detach"> salt.modules.zpool.detach(zpool, device)</h3> <dd>
<p>Detach specified device to zpool</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>device <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Device to detach</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.detach myzpool /path/to/vdev1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.exists"> salt.modules.zpool.exists(zpool)</h3> <dd>
<p>Check if a ZFS storage pool is active</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.exists myzpool</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.export"> salt.modules.zpool.export(*pools, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2015.5.0.</span></p> </div> <p>Export storage pools</p> <dl class="docutils"> <dt>pools <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>One or more storage pools to export</dd> <dt>force <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Force export of storage pools</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.export myzpool ... [force=True|False]
salt '*' zpool.export myzpool2 myzpool2 ... [force=True|False]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.get"> salt.modules.zpool.get(zpool, prop=None, show_source=False, parsable=True)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>Retrieves the given list of properties</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>prop <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Optional name of property to retrieve</dd> <dt>show_source <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Show source of property</dd> <dt>parsable <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>
<p class="first">Display numbers in parsable (exact) values</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.get myzpool</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.healthy"> salt.modules.zpool.healthy()</h3> <dd>
<p>Check if all zpools are healthy</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.healthy</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.history"> salt.modules.zpool.history(zpool=None, internal=False, verbose=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>Displays the command history of the specified pools, or all pools if no pool is specified</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Optional storage pool</dd> <dt>internal <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Toggle display of internally logged ZFS events</dd> <dt>verbose <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Toggle display of the user name, the hostname, and the zone in which the operation was performed</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.upgrade myzpool</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.import_"> salt.modules.zpool.import_(zpool=None, new_name=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2015.5.0.</span></p> </div> <p>Import storage pools or list pools available for import</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Optional name of storage pool</dd> <dt>new_name <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Optional new name for the storage pool</dd> <dt>mntopts <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Comma-separated list of mount options to use when mounting datasets within the pool.</dd> <dt>force <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Forces import, even if the pool appears to be potentially active.</dd> <dt>altroot <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Equivalent to "-o cachefile=none,altroot=root"</dd> <dt>dir <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Searches for devices or files in dir, multiple dirs can be specified as follows: <code class="docutils literal notranslate"><span class="pre">dir="dir1,dir2"</span></code>
</dd> <dt>no_mount <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Import the pool without mounting any file systems.</dd> <dt>only_destroyed <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Imports destroyed pools only. This also sets <code class="docutils literal notranslate"><span class="pre">force=True</span></code>.</dd> <dt>recovery <span class="classifier-delimiter">:</span> <span class="classifier">bool|str</span>
</dt> <dd>
<p class="first">false: do not try to recovery broken pools true: try to recovery the pool by rolling back the latest transactions test: check if a pool can be recovered, but don't import it nolog: allow import without log device, recent transactions might be lost</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">If feature flags are not support this forced to the default of 'false'</p> </div> <div class="last admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">When recovery is set to 'test' the result will be have imported set to True if the pool can be imported. The pool might also be imported if the pool was not broken to begin with.</p> </div> </dd> <dt>properties <span class="classifier-delimiter">:</span> <span class="classifier">dict</span>
</dt> <dd>Additional pool properties</dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>Zpool properties can be specified at the time of creation of the pool by passing an additional argument called "properties" and specifying the properties with their respective values in the form of a python dictionary:</p> <div class="last highlight-text notranslate">
<div class="highlight"><pre>properties="{'property1': 'value1', 'property2': 'value2'}"
</pre></div> </div> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.import [force=True|False]
salt '*' zpool.import myzpool [mynewzpool] [force=True|False]
salt '*' zpool.import myzpool dir='/tmp'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.iostat"> salt.modules.zpool.iostat(zpool=None, sample_time=5, parsable=True)</h3> <dd>
<p>Display I/O statistics for the given pools</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>optional name of storage pool</dd> <dt>sample_time <span class="classifier-delimiter">:</span> <span class="classifier">int</span>
</dt> <dd>seconds to capture data before output default a sample of 5 seconds is used</dd> <dt>parsable <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>display data in pythonc values (True, False, Bytes,...)</dd> </dl> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified">Changed in version 2018.3.1: </span>Added <code class="docutils literal notranslate"><span class="pre">`parsable`</span></code> parameter that defaults to True</p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.iostat myzpool</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.labelclear"> salt.modules.zpool.labelclear(device, force=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <p>Removes ZFS label information from the specified device</p> <dl class="docutils"> <dt>device <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Device name; must not be part of an active pool configuration.</dd> <dt>force <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Treat exported or foreign devices as inactive</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.labelclear /path/to/dev</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.list_"> salt.modules.zpool.list_(properties='size, alloc, free, cap, frag, health', zpool=None, parsable=True)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2015.5.0.</span></p> </div> <p>Return information about (all) storage pools</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>optional name of storage pool</dd> <dt>properties <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>comma-separated list of properties to list</dd> <dt>parsable <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>
<p class="first">display numbers in parsable (exact) values</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> </dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The <code class="docutils literal notranslate"><span class="pre">name</span></code> property will always be included, while the <code class="docutils literal notranslate"><span class="pre">frag</span></code> property will get removed if not available</p> </div> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>optional zpool</dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Multiple storage pool can be provded as a space separated list</p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.list
salt '*' zpool.list zpool=tank
salt '*' zpool.list 'size,free'
salt '*' zpool.list 'size,free' tank</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.offline"> salt.modules.zpool.offline(zpool, *vdevs, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2015.5.0.</span></p> </div> <p>Ensure that the specified devices are offline</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">By default, the <code class="docutils literal notranslate"><span class="pre">OFFLINE</span></code> state is persistent. The device remains offline when the system is rebooted. To temporarily take a device offline, use <code class="docutils literal notranslate"><span class="pre">temporary=True</span></code>.</p> </div> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>name of storage pool</dd> <dt>vdevs <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>One or more devices</dd> <dt>temporary <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Enable temporarily offline</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.offline myzpool /path/to/vdev1 [...] [temporary=True|False]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.online"> salt.modules.zpool.online(zpool, *vdevs, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2015.5.0.</span></p> </div> <p>Ensure that the specified devices are online</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>name of storage pool</dd> <dt>vdevs <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>one or more devices</dd> <dt>expand <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>
<p class="first">Expand the device to use all available space.</p> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">If the device is part of a mirror or raidz then all devices must be expanded before the new space will become available to the pool.</p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.online myzpool /path/to/vdev1 [...]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.reguid"> salt.modules.zpool.reguid(zpool)</h3> <dd>
<p>Generates a new unique identifier for the pool</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">You must ensure that all devices in this pool are online and healthy before performing this action.</p> </div> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>name of storage pool</dd> </dl> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.reguid myzpool</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.reopen"> salt.modules.zpool.reopen(zpool)</h3> <dd>
<p>Reopen all the vdevs associated with the pool</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>name of storage pool</dd> </dl> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.reopen myzpool</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.replace"> salt.modules.zpool.replace(zpool, old_device, new_device=None, force=False)</h3> <dd>
<p>Replaces <code class="docutils literal notranslate"><span class="pre">old_device</span></code> with <code class="docutils literal notranslate"><span class="pre">new_device</span></code></p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>This is equivalent to attaching <code class="docutils literal notranslate"><span class="pre">new_device</span></code>, waiting for it to resilver, and then detaching <code class="docutils literal notranslate"><span class="pre">old_device</span></code>.</p> <p class="last">The size of <code class="docutils literal notranslate"><span class="pre">new_device</span></code> must be greater than or equal to the minimum size of all the devices in a mirror or raidz configuration.</p> </div> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>old_device <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Old device to replace</dd> <dt>new_device <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Optional new device</dd> <dt>force <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>Forces use of new_device, even if its appears to be in use.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.replace myzpool /path/to/vdev1 /path/to/vdev2</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.scrub"> salt.modules.zpool.scrub(zpool, stop=False, pause=False)</h3> <dd>
<p>Scrub a storage pool</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>stop <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, cancel ongoing scrub</dd> <dt>pause <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span>
</dt> <dd>
<p class="first">If <code class="docutils literal notranslate"><span class="pre">True</span></code>, pause ongoing scrub</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p>Pause is only available on recent versions of ZFS.</p> <p class="last">If both <code class="docutils literal notranslate"><span class="pre">pause</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code> are <code class="docutils literal notranslate"><span class="pre">True</span></code>, then <code class="docutils literal notranslate"><span class="pre">stop</span></code> will win.</p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.scrub myzpool</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.set"> salt.modules.zpool.set(zpool, prop, value)</h3> <dd>
<p>Sets the given property on the specified pool</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>prop <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of property to set</dd> <dt>value <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Value to set for the specified property</dd> </dl> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.set myzpool readonly yes</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.split"> salt.modules.zpool.split(zpool, newzpool, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <p>Splits devices off pool creating newpool.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>All vdevs in pool must be mirrors. At the time of the split, <code class="docutils literal notranslate"><span class="pre">newzpool</span></code> will be a replica of <code class="docutils literal notranslate"><span class="pre">zpool</span></code>.</p> <p class="last">After splitting, do not forget to import the new pool!</p> </div> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of storage pool</dd> <dt>newzpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Name of new storage pool</dd> <dt>mountpoint <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Sets the mount point for the root dataset</dd> <dt>altroot <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Sets altroot for newzpool</dd> <dt>properties <span class="classifier-delimiter">:</span> <span class="classifier">dict</span>
</dt> <dd>Additional pool properties for newzpool</dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.split datamirror databackup
salt '*' zpool.split datamirror databackup altroot=/backup</pre> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>Zpool properties can be specified at the time of creation of the pool by passing an additional argument called "properties" and specifying the properties with their respective values in the form of a python dictionary:</p> <pre class="highlight-text notranslate" data-language="text">properties="{'property1': 'value1', 'property2': 'value2'}"</pre> <p>Example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>salt <span class="s1">'*'</span> zpool.split datamirror databackup <span class="nv">properties</span><span class="o">=</span><span class="s2">"{'readonly': 'on'}"</span>
</pre></div> </div> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.split datamirror databackup
salt '*' zpool.split datamirror databackup altroot=/backup</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.status"> salt.modules.zpool.status(zpool=None)</h3> <dd>
<p>Return the status of the named zpool</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>optional name of storage pool</dd> </dl> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.status myzpool</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.zpool.upgrade"> salt.modules.zpool.upgrade(zpool=None, version=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>Enables all supported features on the given pool</p> <dl class="docutils"> <dt>zpool <span class="classifier-delimiter">:</span> <span class="classifier">string</span>
</dt> <dd>Optional storage pool, applies to all otherwize</dd> <dt>version <span class="classifier-delimiter">:</span> <span class="classifier">int</span>
</dt> <dd>Version to upgrade to, if unspecified upgrade to the highest possible</dd> </dl> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">Once this is done, the pool will no longer be accessible on systems that do not support feature flags. See zpool-features(5) for details on compatibility with systems that support feature flags, but do not support all features enabled on the pool.</p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' zpool.upgrade myzpool</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.zpool.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.zpool.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
