
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.napalm_network - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Basic methods for interaction with the network device through the virtual proxy &#39;napalm&#39;. ">
  <meta name="keywords" content="salt, modules, napalm, network, module, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.napalm_network.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.napalm_network module</h1> <div class="section" id="napalm-network"> <h2>NAPALM Network</h2> <p>Basic methods for interaction with the network device through the virtual proxy 'napalm'.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">codeauthor:</th>
<td class="field-body">Mircea Ulinic &lt;<a class="reference external" href="mailto:mircea%40cloudflare.com">mircea<span>@</span>cloudflare<span>.</span>com</a>&gt; &amp; Jerome Fleury &lt;<a class="reference external" href="mailto:jf%40cloudflare.com">jf<span>@</span>cloudflare<span>.</span>com</a>&gt;</td> </tr> <tr class="field-even field">
<th class="field-name">maturity:</th>
<td class="field-body">new</td> </tr> <tr class="field-odd field">
<th class="field-name">depends:</th>
<td class="field-body">napalm</td> </tr> <tr class="field-even field">
<th class="field-name">platform:</th>
<td class="field-body">unix</td> </tr> </tbody> </table> <div class="section" id="dependencies"> <h3>Dependencies</h3> <ul class="simple"> <li><a class="reference internal" href="../../proxy/all/salt.proxy.napalm#module-salt.proxy.napalm" title="salt.proxy.napalm"><code class="xref py py-mod docutils literal notranslate"><span class="pre">napalm</span> <span class="pre">proxy</span> <span class="pre">minion</span></code></a></li> </ul> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.11.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified">Changed in version 2017.7.0.</span></p> </div> <dl class="function"> <h3 id="salt.modules.napalm_network.arp"> salt.modules.napalm_network.arp(interface='', ipaddr='', macaddr='', **kwargs)</h3> <dd>
<p>NAPALM returns a list of dictionaries with details of the ARP entries.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>interface</strong> -- interface name to filter on</li> <li>
<strong>ipaddr</strong> -- IP address to filter on</li> <li>
<strong>macaddr</strong> -- MAC address to filter on</li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first last">List of the entries in the ARP table</p> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.arp
salt '*' net.arp macaddr='5c:5e:ab:da:3c:f0'</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">[
    {
        'interface' : 'MgmtEth0/RSP0/CPU0/0',
        'mac'       : '5c:5e:ab:da:3c:f0',
        'ip'        : '172.17.17.1',
        'age'       : 1454496274.84
    },
    {
        'interface': 'MgmtEth0/RSP0/CPU0/0',
        'mac'       : '66:0e:94:96:e0:ff',
        'ip'        : '172.17.17.2',
        'age'       : 1435641582.49
    }
]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.blockreplace"> salt.modules.napalm_network.blockreplace(marker_start, marker_end, content='', append_if_not_found=False, prepend_if_not_found=False, show_changes=True, append_newline=False, source='running', path=None, test=False, commit=True, debug=False, replace=True)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>Replace content of the configuration source, delimited by the line markers.</p> <p>A block of content delimited by comments can help you manage several lines without worrying about old entries removal.</p> <dl class="docutils"> <dt>marker_start</dt> <dd>The line content identifying a line as the start of the content block. Note that the whole line containing this marker will be considered, so whitespace or extra content before or after the marker is included in final output.</dd> <dt>marker_end</dt> <dd>The line content identifying a line as the end of the content block. Note that the whole line containing this marker will be considered, so whitespace or extra content before or after the marker is included in final output.</dd> <dt>content</dt> <dd>The content to be used between the two lines identified by <code class="docutils literal notranslate"><span class="pre">marker_start</span></code> and <code class="docutils literal notranslate"><span class="pre">marker_stop</span></code>.</dd> <dt>append_if_not_found: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>If markers are not found and set to True then, the markers and content will be appended to the file.</dd> <dt>prepend_if_not_found: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>If markers are not found and set to True then, the markers and content will be prepended to the file.</dd> <dt>append_newline: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>Controls whether or not a newline is appended to the content block. If the value of this argument is <code class="docutils literal notranslate"><span class="pre">True</span></code> then a newline will be added to the content block. If it is <code class="docutils literal notranslate"><span class="pre">False</span></code>, then a newline will not be added to the content block. If it is <code class="docutils literal notranslate"><span class="pre">None</span></code> then a newline will only be added to the content block if it does not already end in a newline.</dd> <dt>show_changes: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>Controls how changes are presented. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, this function will return the of the changes made. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, then it will return a boolean (<code class="docutils literal notranslate"><span class="pre">True</span></code> if any changes were made, otherwise False).</dd> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt> <dd>The configuration source. Choose from: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>, or <code class="docutils literal notranslate"><span class="pre">startup</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>.</dd> <dt>path: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>Save the temporary configuration to a specific path, then read from there. This argument is optional, can be used when you prefers a particular location of the temporary file.</dd> <dt>test: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>Dry run? If set as <code class="docutils literal notranslate"><span class="pre">True</span></code>, will apply the config, discard and return the changes. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> and will commit the changes on the device.</dd> <dt>commit: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>Commit the configuration changes? Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> <dt>debug: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>Debug mode. Will insert a new key in the output dictionary, as <code class="docutils literal notranslate"><span class="pre">loaded_config</span></code> containing the raw configuration loaded on the device.</dd> <dt>replace: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>Load and replace the configuration. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.blockreplace 'ntp' 'interface' ''</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.cancel_commit"> salt.modules.napalm_network.cancel_commit(jid)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>Cancel a commit scheduled to be executed via the <code class="docutils literal notranslate"><span class="pre">commit_in</span></code> and <code class="docutils literal notranslate"><span class="pre">commit_at</span></code> arguments from the <a class="reference internal" href="#salt.modules.napalm_network.load_template" title="salt.modules.napalm_network.load_template"><code class="xref py py-func docutils literal notranslate"><span class="pre">net.load_template</span></code></a> or <a class="reference internal" href="#salt.modules.napalm_network.load_config" title="salt.modules.napalm_network.load_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">net.load_config</span></code></a> execution functions. The commit ID is displayed when the commit is scheduled via the functions named above.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.cancel_commit 20180726083540640360</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.cli"> salt.modules.napalm_network.cli(*commands, **kwargs)</h3> <dd>
<p>Returns a dictionary with the raw output of all commands passed as arguments.</p> <dl class="docutils"> <dt>commands</dt> <dd>List of commands to be executed on the device.</dd> <dt>textfsm_parse: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>
<p class="first">Try parsing the outputs using the TextFSM templates.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">This option can be also specified in the minion configuration file or pillar as <code class="docutils literal notranslate"><span class="pre">napalm_cli_textfsm_parse</span></code>.</p> </div> </dd> <dt>textfsm_path</dt> <dd>
<p class="first">The path where the TextFSM templates can be found. This option implies the usage of the TextFSM index file. <code class="docutils literal notranslate"><span class="pre">textfsm_path</span></code> can be either absolute path on the server, either specified using the following URL mschemes: <code class="docutils literal notranslate"><span class="pre">file://</span></code>, <code class="docutils literal notranslate"><span class="pre">salt://</span></code>, <code class="docutils literal notranslate"><span class="pre">http://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">swift://</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This needs to be a directory with a flat structure, having an index file (whose name can be specified using the <code class="docutils literal notranslate"><span class="pre">index_file</span></code> option) and a number of TextFSM templates.</p> </div> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">This option can be also specified in the minion configuration file or pillar as <code class="docutils literal notranslate"><span class="pre">textfsm_path</span></code>.</p> </div> </dd> <dt>textfsm_template</dt> <dd>
<p class="first">The path to a certain the TextFSM template. This can be specified using the absolute path to the file, or using one of the following URL schemes:</p> <ul class="simple"> <li>
<code class="docutils literal notranslate"><span class="pre">salt://</span></code>, to fetch the template from the Salt fileserver.</li> <li>
<code class="docutils literal notranslate"><span class="pre">http://</span></code> or <code class="docutils literal notranslate"><span class="pre">https://</span></code>
</li> <li><code class="docutils literal notranslate"><span class="pre">ftp://</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">s3://</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">swift://</span></code></li> </ul> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> </dd> <dt>textfsm_template_dict</dt> <dd>
<p class="first">A dictionary with the mapping between a command and the corresponding TextFSM path to use to extract the data. The TextFSM paths can be specified as in <code class="docutils literal notranslate"><span class="pre">textfsm_template</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">This option can be also specified in the minion configuration file or pillar as <code class="docutils literal notranslate"><span class="pre">napalm_cli_textfsm_template_dict</span></code>.</p> </div> </dd> <dt>platform_grain_name: <code class="docutils literal notranslate"><span class="pre">os</span></code>
</dt> <dd>
<p class="first">The name of the grain used to identify the platform name in the TextFSM index file. Default: <code class="docutils literal notranslate"><span class="pre">os</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">This option can be also specified in the minion configuration file or pillar as <code class="docutils literal notranslate"><span class="pre">textfsm_platform_grain</span></code>.</p> </div> </dd> <dt>platform_column_name: <code class="docutils literal notranslate"><span class="pre">Platform</span></code>
</dt> <dd>
<p class="first">The column name used to identify the platform, exactly as specified in the TextFSM index file. Default: <code class="docutils literal notranslate"><span class="pre">Platform</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This is field is case sensitive, make sure to assign the correct value to this option, exactly as defined in the index file.</p> </div> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">This option can be also specified in the minion configuration file or pillar as <code class="docutils literal notranslate"><span class="pre">textfsm_platform_column_name</span></code>.</p> </div> </dd> <dt>index_file: <code class="docutils literal notranslate"><span class="pre">index</span></code>
</dt> <dd>
<p class="first">The name of the TextFSM index file, under the <code class="docutils literal notranslate"><span class="pre">textfsm_path</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">index</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">This option can be also specified in the minion configuration file or pillar as <code class="docutils literal notranslate"><span class="pre">textfsm_index_file</span></code>.</p> </div> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt> <dd>
<p class="first">Salt fileserver envrionment from which to retrieve the file. Ignored if <code class="docutils literal notranslate"><span class="pre">textfsm_path</span></code> is not a <code class="docutils literal notranslate"><span class="pre">salt://</span></code> URL.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> </dd> <dt>include_empty: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>
<p class="first">Include empty files under the <code class="docutils literal notranslate"><span class="pre">textfsm_path</span></code>.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> </dd> <dt>include_pat</dt> <dd>
<p class="first">Glob or regex to narrow down the files cached from the given path. If matching with a regex, the regex must be prefixed with <code class="docutils literal notranslate"><span class="pre">E@</span></code>, otherwise the expression will be interpreted as a glob.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> </dd> <dt>exclude_pat</dt> <dd>
<p class="first">Glob or regex to exclude certain files from being cached from the given path. If matching with a regex, the regex must be prefixed with <code class="docutils literal notranslate"><span class="pre">E@</span></code>, otherwise the expression will be interpreted as a glob.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">If used with <code class="docutils literal notranslate"><span class="pre">include_pat</span></code>, files matching this pattern will be excluded from the subset of files defined by <code class="docutils literal notranslate"><span class="pre">include_pat</span></code>.</p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.cli "show version" "show chassis fan"</pre> <p>CLI Example with TextFSM template:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.cli textfsm_parse=True textfsm_path=salt://textfsm/</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">{
    'show version and haiku':  'Hostname: re0.edge01.arn01
                                  Model: mx480
                                  Junos: 13.3R6.5
                                    Help me, Obi-Wan
                                    I just saw Episode Two
                                    You're my only hope
                                 ',
    'show chassis fan' :   'Item                      Status   RPM     Measurement
                              Top Rear Fan              OK       3840    Spinning at intermediate-speed
                              Bottom Rear Fan           OK       3840    Spinning at intermediate-speed
                              Top Middle Fan            OK       3900    Spinning at intermediate-speed
                              Bottom Middle Fan         OK       3840    Spinning at intermediate-speed
                              Top Front Fan             OK       3810    Spinning at intermediate-speed
                              Bottom Front Fan          OK       3840    Spinning at intermediate-speed
                             '
}</pre> <p>Example output with TextFSM parsing:</p> <pre class="highlight-json notranslate" data-language="json">{
  "comment": "",
  "result": true,
  "out": {
    "sh ver": [
      {
        "kernel": "9.1S3.5",
        "documentation": "9.1S3.5",
        "boot": "9.1S3.5",
        "crypto": "9.1S3.5",
        "chassis": "",
        "routing": "9.1S3.5",
        "base": "9.1S3.5",
        "model": "mx960"
      }
    ]
  }
}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.commit"> salt.modules.napalm_network.commit(inherit_napalm_device=None, **kwargs)</h3> <dd>
<p>Commits the configuration changes made on the network device.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.commit</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.compare_config"> salt.modules.napalm_network.compare_config(inherit_napalm_device=None, **kwargs)</h3> <dd>
<p>Returns the difference between the running config and the candidate config.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.compare_config</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.config"> salt.modules.napalm_network.config(source=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2017.7.0.</span></p> </div> <p>Return the whole configuration of the network device. By default, it will return all possible configuration sources supported by the network device. At most, there will be:</p> <ul class="simple"> <li>running config</li> <li>startup config</li> <li>candidate config</li> </ul> <p>To return only one of the configurations, you can use the <code class="docutils literal notranslate"><span class="pre">source</span></code> argument.</p> <dl class="docutils"> <dt>source</dt> <dd>
<p class="first">Which configuration type you want to display, default is all of them.</p> <p>Options:</p> <ul class="last simple"> <li>running</li> <li>candidate</li> <li>startup</li> </ul> </dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">The object returned is a dictionary with the following keys:<ul class="simple"> <li>running (string): Representation of the native running configuration.</li> <li>
<dl class="first docutils"> <dt>candidate (string): Representation of the native candidate configuration.</dt> <dd>If the device doesn't differentiate between running and startup configuration this will an empty string.</dd> </dl> </li> <li>
<dl class="first docutils"> <dt>startup (string): Representation of the native startup configuration.</dt> <dd>If the device doesn't differentiate between running and startup configuration this will an empty string.</dd> </dl> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.config
salt '*' net.config source=candidate</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.config_changed"> salt.modules.napalm_network.config_changed(inherit_napalm_device=None, **kwargs)</h3> <dd>
<p>Will prompt if the configuration has been changed.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">A tuple with a boolean that specifies if the config was changed on the device. And a string that provides more details of the reason why the configuration was not changed.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.config_changed</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.config_control"> salt.modules.napalm_network.config_control(inherit_napalm_device=None, **kwargs)</h3> <dd>
<p>Will check if the configuration was changed. If differences found, will try to commit. In case commit unsuccessful, will try to rollback.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">A tuple with a boolean that specifies if the config was changed/committed/rollbacked on the device. And a string that provides more details of the reason why the configuration was not committed properly.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.config_control</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.confirm_commit"> salt.modules.napalm_network.confirm_commit(jid)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>Confirm a commit scheduled to be reverted via the <code class="docutils literal notranslate"><span class="pre">revert_in</span></code> and <code class="docutils literal notranslate"><span class="pre">revert_at</span></code> arguments from the <a class="reference internal" href="#salt.modules.napalm_network.load_template" title="salt.modules.napalm_network.load_template"><code class="xref py py-mod docutils literal notranslate"><span class="pre">net.load_template</span></code></a> or <a class="reference internal" href="#salt.modules.napalm_network.load_config" title="salt.modules.napalm_network.load_config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">net.load_config</span></code></a> execution functions. The commit ID is displayed when the commit confirmed is scheduled via the functions named above.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.confirm_commit 20180726083540640360</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.connected"> salt.modules.napalm_network.connected(**kwargs)</h3> <dd>
<p>Specifies if the connection to the device succeeded.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.connected</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.discard_config"> salt.modules.napalm_network.discard_config(inherit_napalm_device=None, **kwargs)</h3> <dd>
<p>Discards the changes applied.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.discard_config</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.environment"> salt.modules.napalm_network.environment(**kwargs)</h3> <dd>
<p>Returns the environment of the device.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.environment</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">{
    'fans': {
        'Bottom Rear Fan': {
            'status': True
        },
        'Bottom Middle Fan': {
            'status': True
        },
        'Top Middle Fan': {
            'status': True
        },
        'Bottom Front Fan': {
            'status': True
        },
        'Top Front Fan': {
            'status': True
        },
        'Top Rear Fan': {
            'status': True
        }
    },
    'memory': {
        'available_ram': 16349,
        'used_ram': 4934
    },
    'temperature': {
       'FPC 0 Exhaust A': {
            'is_alert': False,
            'temperature': 35.0,
            'is_critical': False
        }
    },
    'cpu': {
        '1': {
            '%usage': 19.0
        },
        '0': {
            '%usage': 35.0
        }
    }
}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.facts"> salt.modules.napalm_network.facts(**kwargs)</h3> <dd>
<p>Returns characteristics of the network device. :return: a dictionary with the following keys:</p> <blockquote> <div>
<ul class="simple"> <li>uptime - Uptime of the device in seconds.</li> <li>vendor - Manufacturer of the device.</li> <li>model - Device model.</li> <li>hostname - Hostname of the device</li> <li>fqdn - Fqdn of the device</li> <li>os_version - String with the OS version running on the device.</li> <li>serial_number - Serial number of the device</li> <li>interface_list - List of the interfaces of the device</li> </ul> </div>
</blockquote> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.facts</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">{
    'os_version': '13.3R6.5',
    'uptime': 10117140,
    'interface_list': [
        'lc-0/0/0',
        'pfe-0/0/0',
        'pfh-0/0/0',
        'xe-0/0/0',
        'xe-0/0/1',
        'xe-0/0/2',
        'xe-0/0/3',
        'gr-0/0/10',
        'ip-0/0/10'
    ],
    'vendor': 'Juniper',
    'serial_number': 'JN131356FBFA',
    'model': 'MX480',
    'hostname': 're0.edge05.syd01',
    'fqdn': 're0.edge05.syd01'
}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.interfaces"> salt.modules.napalm_network.interfaces(**kwargs)</h3> <dd>
<p>Returns details of the interfaces on the device.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">Returns a dictionary of dictionaries. The keys for the first dictionary will be the interfaces in the devices.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.interfaces</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">{
    'Management1': {
        'is_up': False,
        'is_enabled': False,
        'description': '',
        'last_flapped': -1,
        'speed': 1000,
        'mac_address': 'dead:beef:dead',
    },
    'Ethernet1':{
        'is_up': True,
        'is_enabled': True,
        'description': 'foo',
        'last_flapped': 1429978575.1554043,
        'speed': 1000,
        'mac_address': 'beef:dead:beef',
    }
}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.ipaddrs"> salt.modules.napalm_network.ipaddrs(**kwargs)</h3> <dd>
<p>Returns IP addresses configured on the device.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">A dictionary with the IPv4 and IPv6 addresses of the interfaces. Returns all configured IP addresses on all interfaces as a dictionary of dictionaries. Keys of the main dictionary represent the name of the interface. Values of the main dictionary represent are dictionaries that may consist of two keys 'ipv4' and 'ipv6' (one, both or none) which are themselvs dictionaries with the IP addresses as keys.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.ipaddrs</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">{
    'FastEthernet8': {
        'ipv4': {
            '10.66.43.169': {
                'prefix_length': 22
            }
        }
    },
    'Loopback555': {
        'ipv4': {
            '192.168.1.1': {
                'prefix_length': 24
            }
        },
        'ipv6': {
            '1::1': {
                'prefix_length': 64
            },
            '2001:DB8:1::1': {
                'prefix_length': 64
            },
            'FE80::3': {
                'prefix_length': 'N/A'
            }
        }
    }
}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.lldp"> salt.modules.napalm_network.lldp(interface='', **kwargs)</h3> <dd>
<p>Returns a detailed view of the LLDP neighbors.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>interface</strong> -- interface name to filter on</td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">A dictionary with the LLDL neighbors. The keys are the interfaces with LLDP activated on.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.lldp
salt '*' net.lldp interface='TenGigE0/0/0/8'</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">{
    'TenGigE0/0/0/8': [
        {
            'parent_interface': 'Bundle-Ether8',
            'interface_description': 'TenGigE0/0/0/8',
            'remote_chassis_id': '8c60.4f69.e96c',
            'remote_system_name': 'switch',
            'remote_port': 'Eth2/2/1',
            'remote_port_description': 'Ethernet2/2/1',
            'remote_system_description': 'Cisco Nexus Operating System (NX-OS) Software 7.1(0)N1(1a)
                  TAC support: http://www.cisco.com/tac
                  Copyright (c) 2002-2015, Cisco Systems, Inc. All rights reserved.',
            'remote_system_capab': 'B, R',
            'remote_system_enable_capab': 'B'
        }
    ]
}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.load_config"> salt.modules.napalm_network.load_config(filename=None, text=None, test=False, commit=True, debug=False, replace=False, commit_in=None, commit_at=None, revert_in=None, revert_at=None, commit_jid=None, inherit_napalm_device=None, saltenv='base', **kwargs)</h3> <dd>
<p>Applies configuration changes on the device. It can be loaded from a file or from inline string. If you send both a filename and a string containing the configuration, the file has higher precedence.</p> <p>By default this function will commit the changes. If there are no changes, it does not commit and the flag <code class="docutils literal notranslate"><span class="pre">already_configured</span></code> will be set as <code class="docutils literal notranslate"><span class="pre">True</span></code> to point this out.</p> <p>To avoid committing the configuration, set the argument <code class="docutils literal notranslate"><span class="pre">test</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> and will discard (dry run).</p> <p>To keep the changes but not commit, set <code class="docutils literal notranslate"><span class="pre">commit</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> <p>To replace the config, set <code class="docutils literal notranslate"><span class="pre">replace</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p> <dl class="docutils"> <dt>filename</dt> <dd>
<p class="first">Path to the file containing the desired configuration. This can be specified using the absolute path to the file, or using one of the following URL schemes:</p> <ul class="simple"> <li>
<code class="docutils literal notranslate"><span class="pre">salt://</span></code>, to fetch the template from the Salt fileserver.</li> <li>
<code class="docutils literal notranslate"><span class="pre">http://</span></code> or <code class="docutils literal notranslate"><span class="pre">https://</span></code>
</li> <li><code class="docutils literal notranslate"><span class="pre">ftp://</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">s3://</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">swift://</span></code></li> </ul> <div class="last versionchanged"> <p><span class="versionmodified">Changed in version 2018.3.0.</span></p> </div> </dd> <dt>text</dt> <dd>String containing the desired configuration. This argument is ignored when <code class="docutils literal notranslate"><span class="pre">filename</span></code> is specified.</dd> <dt>test: False</dt> <dd>Dry run? If set as <code class="docutils literal notranslate"><span class="pre">True</span></code>, will apply the config, discard and return the changes. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> and will commit the changes on the device.</dd> <dt>commit: True</dt> <dd>Commit? Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> <dt>debug: False</dt> <dd>
<p class="first">Debug mode. Will insert a new key under the output dictionary, as <code class="docutils literal notranslate"><span class="pre">loaded_config</span></code> containing the raw configuration loaded on the device.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>replace: False</dt> <dd>
<p class="first">Load and replace the configuration. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>commit_in: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>
<p class="first">Commit the changes in a specific number of minutes / hours. Example of accepted formats: <code class="docutils literal notranslate"><span class="pre">5</span></code> (commit in 5 minutes), <code class="docutils literal notranslate"><span class="pre">2m</span></code> (commit in 2 minutes), <code class="docutils literal notranslate"><span class="pre">1h</span></code> (commit the changes in 1 hour)`, <code class="docutils literal notranslate"><span class="pre">5h30m</span></code> (commit the changes in 5 hours and 30 minutes).</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This feature works on any platforms, as it does not rely on the native features of the network operating system.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">After the command is executed and the <code class="docutils literal notranslate"><span class="pre">diff</span></code> is not satisfactory, or for any other reasons you have to discard the commit, you are able to do so using the <a class="reference internal" href="#salt.modules.napalm_network.cancel_commit" title="salt.modules.napalm_network.cancel_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">net.cancel_commit</span></code></a> execution function, using the commit ID returned by this function.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">Using this feature, Salt will load the exact configuration you expect, however the diff may change in time (i.e., if an user applies a manual configuration change, or a different process or command changes the configuration in the meanwhile).</p> </div> <div class="last versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd> <dt>commit_at: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>
<p class="first">Commit the changes at a specific time. Example of accepted formats: <code class="docutils literal notranslate"><span class="pre">1am</span></code> (will commit the changes at the next 1AM), <code class="docutils literal notranslate"><span class="pre">13:20</span></code> (will commit at 13:20), <code class="docutils literal notranslate"><span class="pre">1:20am</span></code>, etc.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This feature works on any platforms, as it does not rely on the native features of the network operating system.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">After the command is executed and the <code class="docutils literal notranslate"><span class="pre">diff</span></code> is not satisfactory, or for any other reasons you have to discard the commit, you are able to do so using the <a class="reference internal" href="#salt.modules.napalm_network.cancel_commit" title="salt.modules.napalm_network.cancel_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">net.cancel_commit</span></code></a> execution function, using the commit ID returned by this function.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">Using this feature, Salt will load the exact configuration you expect, however the diff may change in time (i.e., if an user applies a manual configuration change, or a different process or command changes the configuration in the meanwhile).</p> </div> <div class="last versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd> <dt>revert_in: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>
<p class="first">Commit and revert the changes in a specific number of minutes / hours. Example of accepted formats: <code class="docutils literal notranslate"><span class="pre">5</span></code> (revert in 5 minutes), <code class="docutils literal notranslate"><span class="pre">2m</span></code> (revert in 2 minutes), <code class="docutils literal notranslate"><span class="pre">1h</span></code> (revert the changes in 1 hour)`, <code class="docutils literal notranslate"><span class="pre">5h30m</span></code> (revert the changes in 5 hours and 30 minutes).</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">To confirm the commit, and prevent reverting the changes, you will have to execute the <a class="reference internal" href="#salt.modules.napalm_network.confirm_commit" title="salt.modules.napalm_network.confirm_commit"><code class="xref py py-mod docutils literal notranslate"><span class="pre">net.confirm_commit</span></code></a> function, using the commit ID returned by this function.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p>This works on any platform, regardless if they have or don't have native capabilities to confirming a commit. However, please be <em>very</em> cautious when using this feature: on Junos (as it is the only NAPALM core platform supporting this natively) it executes a commit confirmed as you would do from the command line. All the other platforms don't have this capability natively, therefore the revert is done via Salt. That means, your device needs to be reachable at the moment when Salt will attempt to revert your changes. Be cautious when pushing configuration changes that would prevent you reach the device.</p> <p class="last">Similarly, if an user or a different process apply other configuration changes in the meanwhile (between the moment you commit and till the changes are reverted), these changes would be equally reverted, as Salt cannot be aware of them.</p> </div> <div class="last versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd> <dt>revert_at: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>
<p class="first">Commit and revert the changes at a specific time. Example of accepted formats: <code class="docutils literal notranslate"><span class="pre">1am</span></code> (will commit and revert the changes at the next 1AM), <code class="docutils literal notranslate"><span class="pre">13:20</span></code> (will commit and revert at 13:20), <code class="docutils literal notranslate"><span class="pre">1:20am</span></code>, etc.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">To confirm the commit, and prevent reverting the changes, you will have to execute the <a class="reference internal" href="#salt.modules.napalm_network.confirm_commit" title="salt.modules.napalm_network.confirm_commit"><code class="xref py py-mod docutils literal notranslate"><span class="pre">net.confirm_commit</span></code></a> function, using the commit ID returned by this function.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p>This works on any platform, regardless if they have or don't have native capabilities to confirming a commit. However, please be <em>very</em> cautious when using this feature: on Junos (as it is the only NAPALM core platform supporting this natively) it executes a commit confirmed as you would do from the command line. All the other platforms don't have this capability natively, therefore the revert is done via Salt. That means, your device needs to be reachable at the moment when Salt will attempt to revert your changes. Be cautious when pushing configuration changes that would prevent you reach the device.</p> <p class="last">Similarly, if an user or a different process apply other configuration changes in the meanwhile (between the moment you commit and till the changes are reverted), these changes would be equally reverted, as Salt cannot be aware of them.</p> </div> <div class="last versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt> <dd>
<p class="first">Specifies the Salt environment name.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.0.</span></p> </div> </dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">a dictionary having the following keys:</td> </tr> </tbody> </table> <ul class="simple"> <li>result (bool): if the config was applied successfully. It is <code class="docutils literal notranslate"><span class="pre">False</span></code> only in case of failure. In case there are no changes to be applied and successfully performs all operations it is still <code class="docutils literal notranslate"><span class="pre">True</span></code> and so will be the <code class="docutils literal notranslate"><span class="pre">already_configured</span></code> flag (example below)</li> <li>comment (str): a message for the user</li> <li>already_configured (bool): flag to check if there were no changes applied</li> <li>loaded_config (str): the configuration loaded on the device. Requires <code class="docutils literal notranslate"><span class="pre">debug</span></code> to be set as <code class="docutils literal notranslate"><span class="pre">True</span></code>
</li> <li>diff (str): returns the config changes applied</li> </ul> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.load_config text='ntp peer 192.168.0.1'
salt '*' net.load_config filename='/absolute/path/to/your/file'
salt '*' net.load_config filename='/absolute/path/to/your/file' test=True
salt '*' net.load_config filename='/absolute/path/to/your/file' commit=False</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">{
    'comment': 'Configuration discarded.',
    'already_configured': False,
    'result': True,
    'diff': '[edit interfaces xe-0/0/5]+   description "Adding a description";'
}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.load_template"> salt.modules.napalm_network.load_template(template_name=None, template_source=None, context=None, defaults=None, template_engine='jinja', saltenv='base', template_hash=None, template_hash_name=None, skip_verify=False, test=False, commit=True, debug=False, replace=False, commit_in=None, commit_at=None, revert_in=None, revert_at=None, inherit_napalm_device=None, **template_vars)</h3> <dd>
<p>Renders a configuration template (default: Jinja) and loads the result on the device.</p> <p>By default this function will commit the changes. If there are no changes, it does not commit, discards he config and the flag <code class="docutils literal notranslate"><span class="pre">already_configured</span></code> will be set as <code class="docutils literal notranslate"><span class="pre">True</span></code> to point this out.</p> <p>To avoid committing the configuration, set the argument <code class="docutils literal notranslate"><span class="pre">test</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> and will discard (dry run).</p> <p>To preserve the changes, set <code class="docutils literal notranslate"><span class="pre">commit</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>. However, this is recommended to be used only in exceptional cases when there are applied few consecutive states and/or configuration changes. Otherwise the user might forget that the config DB is locked and the candidate config buffer is not cleared/merged in the running config.</p> <p>To replace the config, set <code class="docutils literal notranslate"><span class="pre">replace</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p> <dl class="docutils"> <dt>template_name</dt> <dd>
<p class="first">Identifies path to the template source. The template can be either stored on the local machine, either remotely. The recommended location is under the <code class="docutils literal notranslate"><span class="pre">file_roots</span></code> as specified in the master config file. For example, let's suppose the <code class="docutils literal notranslate"><span class="pre">file_roots</span></code> is configured as:</p> <pre class="highlight-yaml notranslate" data-language="yaml">file_roots:
  base:
    - /etc/salt/states</pre> <p>Placing the template under <code class="docutils literal notranslate"><span class="pre">/etc/salt/states/templates/example.jinja</span></code>, it can be used as <code class="docutils literal notranslate"><span class="pre">salt://templates/example.jinja</span></code>. Alternatively, for local files, the user can specify the absolute path. If remotely, the source can be retrieved via <code class="docutils literal notranslate"><span class="pre">http</span></code>, <code class="docutils literal notranslate"><span class="pre">https</span></code> or <code class="docutils literal notranslate"><span class="pre">ftp</span></code>.</p> <p>Examples:</p> <ul class="simple"> <li><code class="docutils literal notranslate"><span class="pre">salt://my_template.jinja</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">/absolute/path/to/my_template.jinja</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">http://example.com/template.cheetah</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">https:/example.com/template.mako</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">ftp://example.com/template.py</span></code></li> </ul> <div class="last versionchanged"> <p><span class="versionmodified">Changed in version 2019.2.0: </span>This argument can now support a list of templates to be rendered. The resulting configuration text is loaded at once, as a single configuration chunk.</p> </div> </dd> <dt>template_source: None</dt> <dd>Inline config template to be rendered and loaded on the device.</dd> <dt>template_hash: None</dt> <dd>
<p class="first">Hash of the template file. Format: <code class="docutils literal notranslate"><span class="pre">{hash_type:</span> <span class="pre">'md5',</span> <span class="pre">'hsum':</span> <span class="pre">&lt;md5sum&gt;}</span></code></p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>context: None</dt> <dd>
<p class="first">Overrides default context variables passed to the template.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd> <dt>template_hash_name: None</dt> <dd>
<p class="first">When <code class="docutils literal notranslate"><span class="pre">template_hash</span></code> refers to a remote file, this specifies the filename to look for in that file.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt> <dd>
<p class="first">Specifies the template environment. This will influence the relative imports inside the templates.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>template_engine: jinja</dt> <dd>
<p class="first">The following templates engines are supported:</p> <ul class="simple"> <li><a class="reference internal" href="../../renderers/all/salt.renderers.cheetah#module-salt.renderers.cheetah" title="salt.renderers.cheetah"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cheetah</span></code></a></li> <li><a class="reference internal" href="../../renderers/all/salt.renderers.genshi#module-salt.renderers.genshi" title="salt.renderers.genshi"><code class="xref py py-mod docutils literal notranslate"><span class="pre">genshi</span></code></a></li> <li><a class="reference internal" href="../../renderers/all/salt.renderers.jinja#module-salt.renderers.jinja" title="salt.renderers.jinja"><code class="xref py py-mod docutils literal notranslate"><span class="pre">jinja</span></code></a></li> <li><a class="reference internal" href="../../renderers/all/salt.renderers.mako#module-salt.renderers.mako" title="salt.renderers.mako"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mako</span></code></a></li> <li><a class="reference internal" href="../../renderers/all/salt.renderers.py#module-salt.renderers.py" title="salt.renderers.py"><code class="xref py py-mod docutils literal notranslate"><span class="pre">py</span></code></a></li> <li><a class="reference internal" href="../../renderers/all/salt.renderers.wempy#module-salt.renderers.wempy" title="salt.renderers.wempy"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wempy</span></code></a></li> </ul> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>skip_verify: True</dt> <dd>
<p class="first">If <code class="docutils literal notranslate"><span class="pre">True</span></code>, hash verification of remote file sources (<code class="docutils literal notranslate"><span class="pre">http://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp://</span></code>) will be skipped, and the <code class="docutils literal notranslate"><span class="pre">source_hash</span></code> argument will be ignored.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>test: False</dt> <dd>Dry run? If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, will apply the config, discard and return the changes. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> and will commit the changes on the device.</dd> <dt>commit: True</dt> <dd>Commit? (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</dd> <dt>debug: False</dt> <dd>
<p class="first">Debug mode. Will insert a new key under the output dictionary, as <code class="docutils literal notranslate"><span class="pre">loaded_config</span></code> containing the raw result after the template was rendered.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>replace: False</dt> <dd>
<p class="first">Load and replace the configuration.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>commit_in: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>
<p class="first">Commit the changes in a specific number of minutes / hours. Example of accepted formats: <code class="docutils literal notranslate"><span class="pre">5</span></code> (commit in 5 minutes), <code class="docutils literal notranslate"><span class="pre">2m</span></code> (commit in 2 minutes), <code class="docutils literal notranslate"><span class="pre">1h</span></code> (commit the changes in 1 hour)`, <code class="docutils literal notranslate"><span class="pre">5h30m</span></code> (commit the changes in 5 hours and 30 minutes).</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This feature works on any platforms, as it does not rely on the native features of the network operating system.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">After the command is executed and the <code class="docutils literal notranslate"><span class="pre">diff</span></code> is not satisfactory, or for any other reasons you have to discard the commit, you are able to do so using the <a class="reference internal" href="#salt.modules.napalm_network.cancel_commit" title="salt.modules.napalm_network.cancel_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">net.cancel_commit</span></code></a> execution function, using the commit ID returned by this function.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">Using this feature, Salt will load the exact configuration you expect, however the diff may change in time (i.e., if an user applies a manual configuration change, or a different process or command changes the configuration in the meanwhile).</p> </div> <div class="last versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd> <dt>commit_at: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>
<p class="first">Commit the changes at a specific time. Example of accepted formats: <code class="docutils literal notranslate"><span class="pre">1am</span></code> (will commit the changes at the next 1AM), <code class="docutils literal notranslate"><span class="pre">13:20</span></code> (will commit at 13:20), <code class="docutils literal notranslate"><span class="pre">1:20am</span></code>, etc.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This feature works on any platforms, as it does not rely on the native features of the network operating system.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">After the command is executed and the <code class="docutils literal notranslate"><span class="pre">diff</span></code> is not satisfactory, or for any other reasons you have to discard the commit, you are able to do so using the <a class="reference internal" href="#salt.modules.napalm_network.cancel_commit" title="salt.modules.napalm_network.cancel_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">net.cancel_commit</span></code></a> execution function, using the commit ID returned by this function.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">Using this feature, Salt will load the exact configuration you expect, however the diff may change in time (i.e., if an user applies a manual configuration change, or a different process or command changes the configuration in the meanwhile).</p> </div> <div class="last versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd> <dt>revert_in: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>
<p class="first">Commit and revert the changes in a specific number of minutes / hours. Example of accepted formats: <code class="docutils literal notranslate"><span class="pre">5</span></code> (revert in 5 minutes), <code class="docutils literal notranslate"><span class="pre">2m</span></code> (revert in 2 minutes), <code class="docutils literal notranslate"><span class="pre">1h</span></code> (revert the changes in 1 hour)`, <code class="docutils literal notranslate"><span class="pre">5h30m</span></code> (revert the changes in 5 hours and 30 minutes).</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">To confirm the commit, and prevent reverting the changes, you will have to execute the <a class="reference internal" href="#salt.modules.napalm_network.confirm_commit" title="salt.modules.napalm_network.confirm_commit"><code class="xref py py-mod docutils literal notranslate"><span class="pre">net.confirm_commit</span></code></a> function, using the commit ID returned by this function.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p>This works on any platform, regardless if they have or don't have native capabilities to confirming a commit. However, please be <em>very</em> cautious when using this feature: on Junos (as it is the only NAPALM core platform supporting this natively) it executes a commit confirmed as you would do from the command line. All the other platforms don't have this capability natively, therefore the revert is done via Salt. That means, your device needs to be reachable at the moment when Salt will attempt to revert your changes. Be cautious when pushing configuration changes that would prevent you reach the device.</p> <p class="last">Similarly, if an user or a different process apply other configuration changes in the meanwhile (between the moment you commit and till the changes are reverted), these changes would be equally reverted, as Salt cannot be aware of them.</p> </div> <div class="last versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd> <dt>revert_at: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>
<p class="first">Commit and revert the changes at a specific time. Example of accepted formats: <code class="docutils literal notranslate"><span class="pre">1am</span></code> (will commit and revert the changes at the next 1AM), <code class="docutils literal notranslate"><span class="pre">13:20</span></code> (will commit and revert at 13:20), <code class="docutils literal notranslate"><span class="pre">1:20am</span></code>, etc.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">To confirm the commit, and prevent reverting the changes, you will have to execute the <a class="reference internal" href="#salt.modules.napalm_network.confirm_commit" title="salt.modules.napalm_network.confirm_commit"><code class="xref py py-mod docutils literal notranslate"><span class="pre">net.confirm_commit</span></code></a> function, using the commit ID returned by this function.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p>This works on any platform, regardless if they have or don't have native capabilities to confirming a commit. However, please be <em>very</em> cautious when using this feature: on Junos (as it is the only NAPALM core platform supporting this natively) it executes a commit confirmed as you would do from the command line. All the other platforms don't have this capability natively, therefore the revert is done via Salt. That means, your device needs to be reachable at the moment when Salt will attempt to revert your changes. Be cautious when pushing configuration changes that would prevent you reach the device.</p> <p class="last">Similarly, if an user or a different process apply other configuration changes in the meanwhile (between the moment you commit and till the changes are reverted), these changes would be equally reverted, as Salt cannot be aware of them.</p> </div> <div class="last versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd> <dt>defaults: None</dt> <dd>
<p class="first">Default variables/context passed to the template.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.2.</span></p> </div> </dd> <dt>template_vars</dt> <dd>
<p class="first">Dictionary with the arguments/context to be used when the template is rendered.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Do not explicitly specify this argument. This represents any other variable that will be sent to the template rendering system. Please see the examples below!</p> </div> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">It is more recommended to use the <code class="docutils literal notranslate"><span class="pre">context</span></code> argument to avoid conflicts between CLI arguments and template variables.</p> </div> </dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">a dictionary having the following keys:</td> </tr> </tbody> </table> <ul class="simple"> <li>result (bool): if the config was applied successfully. It is <code class="docutils literal notranslate"><span class="pre">False</span></code> only in case of failure. In case there are no changes to be applied and successfully performs all operations it is still <code class="docutils literal notranslate"><span class="pre">True</span></code> and so will be the <code class="docutils literal notranslate"><span class="pre">already_configured</span></code> flag (example below)</li> <li>comment (str): a message for the user</li> <li>already_configured (bool): flag to check if there were no changes applied</li> <li>loaded_config (str): the configuration loaded on the device, after rendering the template. Requires <code class="docutils literal notranslate"><span class="pre">debug</span></code> to be set as <code class="docutils literal notranslate"><span class="pre">True</span></code>
</li> <li>diff (str): returns the config changes applied</li> </ul> <p>The template can use variables from the <code class="docutils literal notranslate"><span class="pre">grains</span></code>, <code class="docutils literal notranslate"><span class="pre">pillar</span></code> or <code class="docutils literal notranslate"><span class="pre">opts</span></code>, for example:</p> <pre class="highlight-jinja notranslate" data-language="jinja">{% set router_model = grains.get('model') -%}
{% set router_vendor = grains.get('vendor') -%}
{% set os_version = grains.get('version') -%}
{% set hostname = pillar.get('proxy', {}).get('host') -%}
{% if router_vendor|lower == 'juniper' %}
system {
    host-name {{hostname}};
}
{% elif router_vendor|lower == 'cisco' %}
hostname {{hostname}}
{% endif %}</pre> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.load_template set_ntp_peers peers=[192.168.0.1]  # uses NAPALM default templates

# inline template:
salt -G 'os:junos' net.load_template template_source='system { host-name {{host_name}}; }'         host_name='MX480.lab'

# inline template using grains info:
salt -G 'os:junos' net.load_template         template_source='system { host-name {{grains.model}}.lab; }'
# if the device is a MX480, the command above will set the hostname as: MX480.lab

# inline template using pillar data:
salt -G 'os:junos' net.load_template template_source='system { host-name {{pillar.proxy.host}}; }'

salt '*' net.load_template https://bit.ly/2OhSgqP hostname=example  # will commit
salt '*' net.load_template https://bit.ly/2OhSgqP hostname=example test=True  # dry run

salt '*' net.load_template salt://templates/example.jinja debug=True  # Using the salt:// URI

# render a mako template:
salt '*' net.load_template salt://templates/example.mako template_engine=mako debug=True

# render remote template
salt -G 'os:junos' net.load_template http://bit.ly/2fReJg7 test=True debug=True peers=['192.168.0.1']
salt -G 'os:ios' net.load_template http://bit.ly/2gKOj20 test=True debug=True peers=['192.168.0.1']

# render multiple templates at once
salt '*' net.load_template "['https://bit.ly/2OhSgqP', 'salt://templates/example.jinja']" context="{'hostname': 'example'}"</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">{
    'comment': '',
    'already_configured': False,
    'result': True,
    'diff': '[edit system]+  host-name edge01.bjm01',
    'loaded_config': 'system { host-name edge01.bjm01; }''
}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.mac"> salt.modules.napalm_network.mac(address='', interface='', vlan=0, **kwargs)</h3> <dd>
<p>Returns the MAC Address Table on the device.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>address</strong> -- MAC address to filter on</li> <li>
<strong>interface</strong> -- Interface name to filter on</li> <li>
<strong>vlan</strong> -- VLAN identifier</li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first last">A list of dictionaries representing the entries in the MAC Address Table</p> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.mac
salt '*' net.mac vlan=10</pre> <p>Example output:</p> <pre class="highlight-python notranslate" data-language="python">[
    {
        'mac'       : '00:1c:58:29:4a:71',
        'interface' : 'xe-3/0/2',
        'static'    : False,
        'active'    : True,
        'moves'     : 1,
        'vlan'      : 10,
        'last_move' : 1454417742.58
    },
    {
        'mac'       : '8c:60:4f:58:e1:c1',
        'interface' : 'xe-1/0/1',
        'static'    : False,
        'active'    : True,
        'moves'     : 2,
        'vlan'      : 42,
        'last_move' : 1453191948.11
    }
]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.optics"> salt.modules.napalm_network.optics(**kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2017.7.0.</span></p> </div> <p>Fetches the power usage on the various transceivers installed on the network device (in dBm), and returns a view that conforms with the OpenConfig model openconfig-platform-transceiver.yang.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">
<dl class="docutils"> <dt>Returns a dictionary where the keys are as listed below:</dt> <dd>
<ul class="first last simple"> <li>
<dl class="first docutils"> <dt>intf_name (unicode)</dt> <dd>
<ul class="first last"> <li>
<dl class="first docutils"> <dt>physical_channels</dt> <dd>
<ul class="first last"> <li>
<dl class="first docutils"> <dt>channels (list of dicts)</dt> <dd>
<ul class="first last"> <li>index (int)</li> <li>
<dl class="first docutils"> <dt>state</dt> <dd>
<ul class="first last"> <li>
<dl class="first docutils"> <dt>input_power</dt> <dd>
<ul class="first last"> <li>instant (float)</li> <li>avg (float)</li> <li>min (float)</li> <li>max (float)</li> </ul> </dd> </dl> </li> <li>
<dl class="first docutils"> <dt>output_power</dt> <dd>
<ul class="first last"> <li>instant (float)</li> <li>avg (float)</li> <li>min (float)</li> <li>max (float)</li> </ul> </dd> </dl> </li> <li>
<dl class="first docutils"> <dt>laser_bias_current</dt> <dd>
<ul class="first last"> <li>instant (float)</li> <li>avg (float)</li> <li>min (float)</li> <li>max (float)</li> </ul> </dd> </dl> </li> </ul> </dd> </dl> </li> </ul> </dd> </dl> </li> </ul> </dd> </dl> </li> </ul> </dd> </dl> </li> </ul> </dd> </dl> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.optics</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.patch"> salt.modules.napalm_network.patch(patchfile, options='', saltenv='base', source_hash=None, show_changes=True, source='running', path=None, test=False, commit=True, debug=False, replace=True)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>Apply a patch to the configuration source, and load the result into the running config of the device.</p> <dl class="docutils"> <dt>patchfile</dt> <dd>A patch file to apply to the configuration source.</dd> <dt>options</dt> <dd>Options to pass to patch.</dd> <dt>source_hash</dt> <dd>If the patch file (specified via the <code class="docutils literal notranslate"><span class="pre">patchfile</span></code> argument) is an HTTP(S) or FTP URL and the file exists in the minion's file cache, this option can be passed to keep the minion from re-downloading the file if the cached copy matches the specified hash.</dd> <dt>show_changes: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>Controls how changes are presented. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, this function will return the of the changes made. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, then it will return a boolean (<code class="docutils literal notranslate"><span class="pre">True</span></code> if any changes were made, otherwise False).</dd> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt> <dd>The configuration source. Choose from: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>, or <code class="docutils literal notranslate"><span class="pre">startup</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>.</dd> <dt>path: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt> <dd>Save the temporary configuration to a specific path, then read from there. This argument is optional, can the user prefers a particular location of the temporary file.</dd> <dt>test: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>Dry run? If set as <code class="docutils literal notranslate"><span class="pre">True</span></code>, will apply the config, discard and return the changes. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> and will commit the changes on the device.</dd> <dt>commit: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>Commit the configuration changes? Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> <dt>debug: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>Debug mode. Will insert a new key in the output dictionary, as <code class="docutils literal notranslate"><span class="pre">loaded_config</span></code> containing the raw configuration loaded on the device.</dd> <dt>replace: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>Load and replace the configuration. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.patch https://example.com/running_config.patch</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.ping"> salt.modules.napalm_network.ping(destination, source=None, ttl=None, timeout=None, size=None, count=None, vrf=None, **kwargs)</h3> <dd>
<p>Executes a ping on the network device and returns a dictionary as a result.</p> <dl class="docutils"> <dt>destination</dt> <dd>Hostname or IP address of remote host</dd> <dt>source</dt> <dd>Source address of echo request</dd> <dt>ttl</dt> <dd>IP time-to-live value (IPv6 hop-limit value) (1..255 hops)</dd> <dt>timeout</dt> <dd>Maximum wait time after sending final packet (seconds)</dd> <dt>size</dt> <dd>Size of request packets (0..65468 bytes)</dd> <dt>count</dt> <dd>Number of ping requests to send (1..2000000000 packets)</dd> <dt>vrf</dt> <dd>
<p class="first">VRF (routing instance) for ping attempt</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.4.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.ping 8.8.8.8
salt '*' net.ping 8.8.8.8 ttl=3 size=65468
salt '*' net.ping 8.8.8.8 source=127.0.0.1 timeout=1 count=100</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.replace_pattern"> salt.modules.napalm_network.replace_pattern(pattern, repl, count=0, flags=8, bufsize=1, append_if_not_found=False, prepend_if_not_found=False, not_found_content=None, search_only=False, show_changes=True, backslash_literal=False, source=None, path=None, test=False, replace=True, debug=False, commit=True)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>Replace occurrences of a pattern in the configuration source. If <code class="docutils literal notranslate"><span class="pre">show_changes</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then a diff of what changed will be returned, otherwise a <code class="docutils literal notranslate"><span class="pre">True</span></code> will be returned when changes are made, and <code class="docutils literal notranslate"><span class="pre">False</span></code> when no changes are made. This is a pure Python implementation that wraps Python's <a class="reference external" href="https://docs.python.org/3/library/re.html#re.sub" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sub()</span></code></a>.</p> <dl class="docutils"> <dt>pattern</dt> <dd>A regular expression, to be matched using Python's <a class="reference external" href="https://docs.python.org/3/library/re.html#re.search" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">search()</span></code></a>.</dd> <dt>repl</dt> <dd>The replacement text.</dd> <dt>count: <code class="docutils literal notranslate"><span class="pre">0</span></code>
</dt> <dd>Maximum number of pattern occurrences to be replaced. If count is a positive integer <code class="docutils literal notranslate"><span class="pre">n</span></code>, only <code class="docutils literal notranslate"><span class="pre">n</span></code> occurrences will be replaced, otherwise all occurrences will be replaced.</dd> <dt>flags (list or int): <code class="docutils literal notranslate"><span class="pre">8</span></code>
</dt> <dd>A list of flags defined in the <code class="docutils literal notranslate"><span class="pre">re</span></code> module documentation from the Python standard library. Each list item should be a string that will correlate to the human-friendly flag name. E.g., <code class="docutils literal notranslate"><span class="pre">['IGNORECASE',</span>
<span class="pre">'MULTILINE']</span></code>. Optionally, <code class="docutils literal notranslate"><span class="pre">flags</span></code> may be an int, with a value corresponding to the XOR (<code class="docutils literal notranslate"><span class="pre">|</span></code>) of all the desired flags. Defaults to 8 (which supports 'MULTILINE').</dd> <dt>bufsize (int or str): <code class="docutils literal notranslate"><span class="pre">1</span></code>
</dt> <dd>How much of the configuration to buffer into memory at once. The default value <code class="docutils literal notranslate"><span class="pre">1</span></code> processes one line at a time. The special value <code class="docutils literal notranslate"><span class="pre">file</span></code> may be specified which will read the entire file into memory before processing.</dd> <dt>append_if_not_found: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, and pattern is not found, then the content will be appended to the file.</dd> <dt>prepend_if_not_found: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code> and pattern is not found, then the content will be prepended to the file.</dd> <dt>not_found_content</dt> <dd>Content to use for append/prepend if not found. If None (default), uses <code class="docutils literal notranslate"><span class="pre">repl</span></code>. Useful when <code class="docutils literal notranslate"><span class="pre">repl</span></code> uses references to group in pattern.</dd> <dt>search_only: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>If set to true, this no changes will be performed on the file, and this function will simply return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the pattern was matched, and <code class="docutils literal notranslate"><span class="pre">False</span></code> if not.</dd> <dt>show_changes: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return a diff of changes made. Otherwise, return <code class="docutils literal notranslate"><span class="pre">True</span></code> if changes were made, and <code class="docutils literal notranslate"><span class="pre">False</span></code> if not.</dd> <dt>backslash_literal: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>Interpret backslashes as literal backslashes for the repl and not escape characters. This will help when using append/prepend so that the backslashes are not interpreted for the repl on the second run of the state.</dd> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt> <dd>The configuration source. Choose from: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>, or <code class="docutils literal notranslate"><span class="pre">startup</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>.</dd> <dt>path</dt> <dd>Save the temporary configuration to a specific path, then read from there.</dd> <dt>test: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>Dry run? If set as <code class="docutils literal notranslate"><span class="pre">True</span></code>, will apply the config, discard and return the changes. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> and will commit the changes on the device.</dd> <dt>commit: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>Commit the configuration changes? Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> <dt>debug: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt> <dd>Debug mode. Will insert a new key in the output dictionary, as <code class="docutils literal notranslate"><span class="pre">loaded_config</span></code> containing the raw configuration loaded on the device.</dd> <dt>replace: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>Load and replace the configuration. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> </dl> <p>If an equal sign (<code class="docutils literal notranslate"><span class="pre">=</span></code>) appears in an argument to a Salt command it is interpreted as a keyword argument in the format <code class="docutils literal notranslate"><span class="pre">key=val</span></code>. That processing can be bypassed in order to pass an equal sign through to the remote shell command by manually specifying the kwarg:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.replace_pattern "bind-address\s*=" "bind-address:"</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.replace_pattern PREFIX-LIST_NAME new-prefix-list-name
salt '*' net.replace_pattern bgp-group-name new-bgp-group-name count=1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.rollback"> salt.modules.napalm_network.rollback(inherit_napalm_device=None, **kwargs)</h3> <dd>
<p>Rollbacks the configuration.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.rollback</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.save_config"> salt.modules.napalm_network.save_config(source=None, path=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>Save the configuration to a file on the local file system.</p> <dl class="docutils"> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt> <dd>The configuration source. Choose from: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>.</dd> <dt>path</dt> <dd>Absolute path to file where to save the configuration. To push the files to the Master, use <a class="reference internal" href="salt.modules.cp#salt.modules.cp.push" title="salt.modules.cp.push"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cp.push</span></code></a> Execution function.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.save_config source=running</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.napalm_network.traceroute"> salt.modules.napalm_network.traceroute(destination, source=None, ttl=None, timeout=None, vrf=None, **kwargs)</h3> <dd>
<p>Calls the method traceroute from the NAPALM driver object and returns a dictionary with the result of the traceroute command executed on the device.</p> <dl class="docutils"> <dt>destination</dt> <dd>Hostname or address of remote host</dd> <dt>source</dt> <dd>Source address to use in outgoing traceroute packets</dd> <dt>ttl</dt> <dd>IP maximum time-to-live value (or IPv6 maximum hop-limit value)</dd> <dt>timeout</dt> <dd>Number of seconds to wait for response (seconds)</dd> <dt>vrf</dt> <dd>
<p class="first">VRF (routing instance) for traceroute attempt</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2016.11.4.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' net.traceroute 8.8.8.8
salt '*' net.traceroute 8.8.8.8 source=127.0.0.1 ttl=5 timeout=1</pre> </dd>
</dl> </div> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.napalm_network.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.napalm_network.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
