
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.ebuildpkg - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Support for Portage ">
  <meta name="keywords" content="salt, modules, ebuildpkg, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.ebuildpkg.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.ebuildpkg</h1> <p>Support for Portage</p> <div class="admonition important"> <p class="first admonition-title">Important</p> <p class="last">If you feel that Salt should be using this module to manage packages on a minion, and it is using a different module (or gives an error similar to <em>'pkg.install' is not available</em>), see <a class="reference internal" href="https://docs.saltstack.com/en/latest/ref/modules/index.html#module-provider-override"><span class="std std-ref">here</span></a>.</p> </div> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">optdepends:</th>
<td class="field-body">
<ul class="first last simple"> <li>portage Python adapter</li> </ul> </td> </tr> </tbody> </table> <p>For now all package names <em>MUST</em> include the package category, i.e. <code class="docutils literal notranslate"><span class="pre">'vim'</span></code> will not work, <code class="docutils literal notranslate"><span class="pre">'app-editors/vim'</span></code> will.</p> <dl class="function"> <h3 id="salt.modules.ebuildpkg.check_db"> salt.modules.ebuildpkg.check_db(*names, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 0.17.0.</span></p> </div> <p>Returns a dict containing the following information for each specified package:</p> <ol class="arabic simple"> <li>A key <code class="docutils literal notranslate"><span class="pre">found</span></code>, which will be a boolean value denoting if a match was found in the package database.</li> <li>If <code class="docutils literal notranslate"><span class="pre">found</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, then a second key called <code class="docutils literal notranslate"><span class="pre">suggestions</span></code> will be present, which will contain a list of possible matches. This list will be empty if the package name was specified in <code class="docutils literal notranslate"><span class="pre">category/pkgname</span></code> format, since the suggestions are only intended to disambiguate ambiguous package names (ones submitted without a category).</li> </ol> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.check_db &lt;package1&gt; &lt;package2&gt; &lt;package3&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.check_extra_requirements"> salt.modules.ebuildpkg.check_extra_requirements(pkgname, pkgver)</h3> <dd>
<p>Check if the installed package already has the given requirements.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.check_extra_requirements 'sys-devel/gcc' '~&gt;4.1.2:4.1::gentoo[nls,fortran]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.depclean"> salt.modules.ebuildpkg.depclean(name=None, slot=None, fromrepo=None, pkgs=None)</h3> <dd>
<p>Portage has a function to remove unused dependencies. If a package is provided, it will only removed the package if no other package depends on it.</p> <dl class="docutils"> <dt>name</dt> <dd>The name of the package to be cleaned.</dd> <dt>slot</dt> <dd>Restrict the remove to a specific slot. Ignored if <code class="docutils literal notranslate"><span class="pre">name</span></code> is None.</dd> <dt>fromrepo</dt> <dd>Restrict the remove to a specific slot. Ignored if <code class="docutils literal notranslate"><span class="pre">name</span></code> is None.</dd> <dt>pkgs</dt> <dd>Clean multiple packages. <code class="docutils literal notranslate"><span class="pre">slot</span></code> and <code class="docutils literal notranslate"><span class="pre">fromrepo</span></code> arguments are ignored if this argument is present. Must be passed as a python list.</dd> </dl> <p>Return a list containing the removed packages:</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.depclean &lt;package name&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.ex_mod_init"> salt.modules.ebuildpkg.ex_mod_init(low)</h3> <dd>
<p>If the config option <code class="docutils literal notranslate"><span class="pre">ebuild.enforce_nice_config</span></code> is set to True, this module will enforce a nice tree structure for /etc/portage/package.* configuration files.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 0.17.0: </span>Initial automatic enforcement added when pkg is used on a Gentoo system.</p> </div> <div class="versionchanged"> <p><span class="versionmodified">Changed in version 2014.1.0-Hydrogen: </span>Configure option added to make this behaviour optional, defaulting to off.</p> </div> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <p><code class="docutils literal notranslate"><span class="pre">ebuild.ex_mod_init</span></code> is called automatically when a state invokes a pkg state on a Gentoo system. <code class="xref py py-func docutils literal notranslate"><span class="pre">salt.states.pkg.mod_init()</span></code></p> <p class="last"><code class="docutils literal notranslate"><span class="pre">ebuild.ex_mod_init</span></code> uses <code class="docutils literal notranslate"><span class="pre">portage_config.enforce_nice_config</span></code> to do the lifting. <a class="reference internal" href="salt.modules.portage_config#salt.modules.portage_config.enforce_nice_config" title="salt.modules.portage_config.enforce_nice_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">salt.modules.portage_config.enforce_nice_config()</span></code></a></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.ex_mod_init</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.install"> salt.modules.ebuildpkg.install(name=None, refresh=False, pkgs=None, sources=None, slot=None, fromrepo=None, uses=None, binhost=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands which modify installed packages from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to keep systemd from killing any emerge commands spawned by Salt when the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted. (see <code class="docutils literal notranslate"><span class="pre">KillMode</span></code> in the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html">systemd.kill(5)</a> manpage for more information). If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Install the passed package(s), add refresh=True to sync the portage tree before package is installed.</p> <dl class="docutils"> <dt>name</dt> <dd>
<p class="first">The name of the package to be installed. Note that this parameter is ignored if either "pkgs" or "sources" is passed. Additionally, please note that this option can only be used to emerge a package from the portage tree. To install a tbz2 package manually, use the "sources" option described below.</p> <p>CLI Example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>salt <span class="s1">'*'</span> pkg.install &lt;package name&gt;
</pre></div> </div> </dd> <dt>refresh</dt> <dd>Whether or not to sync the portage tree before installing.</dd> <dt>version</dt> <dd>Install a specific version of the package, e.g. 1.0.9-r1. Ignored if "pkgs" or "sources" is passed.</dd> <dt>slot</dt> <dd>
<p class="first">Similar to version, but specifies a valid slot to be installed. It will install the latest available version in the specified slot. Ignored if "pkgs" or "sources" or "version" is passed.</p> <p>CLI Example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>salt <span class="s1">'*'</span> pkg.install sys-devel/gcc <span class="nv">slot</span><span class="o">=</span><span class="s1">'4.4'</span>
</pre></div> </div> </dd> <dt>fromrepo</dt> <dd>
<p class="first">Similar to slot, but specifies the repository from the package will be installed. It will install the latest available version in the specified repository. Ignored if "pkgs" or "sources" or "version" is passed.</p> <p>CLI Example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>salt <span class="s1">'*'</span> pkg.install salt <span class="nv">fromrepo</span><span class="o">=</span><span class="s1">'gentoo'</span>
</pre></div> </div> </dd> <dt>uses</dt> <dd>
<p class="first">Similar to slot, but specifies a list of use flag. Ignored if "pkgs" or "sources" or "version" is passed.</p> <p>CLI Example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>salt <span class="s1">'*'</span> pkg.install sys-devel/gcc <span class="nv">uses</span><span class="o">=</span><span class="s1">'["nptl","-nossp"]'</span>
</pre></div> </div> </dd> </dl> <p>Multiple Package Installation Options:</p> <dl class="docutils"> <dt>pkgs</dt> <dd>
<p class="first">A list of packages to install from the portage tree. Must be passed as a python list.</p> <p>CLI Example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>salt <span class="s1">'*'</span> pkg.install <span class="nv">pkgs</span><span class="o">=</span><span class="s1">'["foo","bar","~category/package:slot::repository[use]"]'</span>
</pre></div> </div> </dd> <dt>sources</dt> <dd>
<p class="first">A list of tbz2 packages to install. Must be passed as a list of dicts, with the keys being package names, and the values being the source URI or local path to the package.</p> <p>CLI Example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>salt <span class="s1">'*'</span> pkg.install <span class="nv">sources</span><span class="o">=</span><span class="s1">'[{"foo": "salt://foo.tbz2"},{"bar": "salt://bar.tbz2"}]'</span>
</pre></div> </div> </dd> <dt>binhost</dt> <dd>has two options try and force. try - tells emerge to try and install the package from a configured binhost. force - forces emerge to install the package from a binhost otherwise it fails out.</dd> </dl> <p>Returns a dict containing the new package names and versions:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;package&gt;': {'old': '&lt;old-version&gt;',
               'new': '&lt;new-version&gt;'}}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.latest_version"> salt.modules.ebuildpkg.latest_version(*names, **kwargs)</h3> <dd>
<p>Return the latest version of the named package available for upgrade or installation. If more than one package name is specified, a dict of name/version pairs is returned.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.latest_version &lt;package name&gt;
salt '*' pkg.latest_version &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; ...</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.list_pkgs"> salt.modules.ebuildpkg.list_pkgs(versions_as_list=False, **kwargs)</h3> <dd>
<p>List the packages currently installed in a dict:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;package_name&gt;': '&lt;version&gt;'}</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_pkgs</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.list_upgrades"> salt.modules.ebuildpkg.list_upgrades(refresh=True, backtrack=3, **kwargs)</h3> <dd>
<p>List all available package upgrades.</p> <dl class="docutils"> <dt>refresh</dt> <dd>Whether or not to sync the portage tree before checking for upgrades.</dd> <dt>backtrack</dt> <dd>Specifies an integer number of times to backtrack if dependency calculation fails due to a conflict or an unsatisfied dependency (default: ´3´).</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_upgrades</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.porttree_matches"> salt.modules.ebuildpkg.porttree_matches(name)</h3> <dd>
<p>Returns a list containing the matches for a given package name from the portage tree. Note that the specific version of the package will not be provided for packages that have several versions in the portage tree, but rather the name of the package (i.e. "dev-python/paramiko").</p> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.purge"> salt.modules.ebuildpkg.purge(name=None, slot=None, fromrepo=None, pkgs=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands which modify installed packages from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to keep systemd from killing any emerge commands spawned by Salt when the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted. (see <code class="docutils literal notranslate"><span class="pre">KillMode</span></code> in the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html">systemd.kill(5)</a> manpage for more information). If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Portage does not have a purge, this function calls remove followed by depclean to emulate a purge process</p> <dl class="docutils"> <dt>name</dt> <dd>The name of the package to be deleted.</dd> <dt>slot</dt> <dd>Restrict the remove to a specific slot. Ignored if name is None.</dd> <dt>fromrepo</dt> <dd>Restrict the remove to a specific slot. Ignored if <code class="docutils literal notranslate"><span class="pre">name</span></code> is None.</dd> </dl> <p>Multiple Package Options:</p> <dl class="docutils"> <dt>pkgs</dt> <dd>Uninstall multiple packages. <code class="docutils literal notranslate"><span class="pre">slot</span></code> and <code class="docutils literal notranslate"><span class="pre">fromrepo</span></code> arguments are ignored if this argument is present. Must be passed as a python list.</dd> </dl> <div class="versionadded"> <p><span class="versionmodified">New in version 0.16.0.</span></p> </div> <p>Returns a dict containing the changes.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.purge &lt;package name&gt;
salt '*' pkg.purge &lt;package name&gt; slot=4.4
salt '*' pkg.purge &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;
salt '*' pkg.purge pkgs='["foo", "bar"]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.refresh_db"> salt.modules.ebuildpkg.refresh_db()</h3> <dd>
<p>Update the portage tree using the first available method from the following list:</p> <ul class="simple"> <li>emaint sync</li> <li>eix-sync</li> <li>emerge-webrsync</li> <li>emerge --sync</li> </ul> <p>To prevent the portage tree from being synced within one day of the previous sync, add the following pillar data for this minion:</p> <pre class="highlight-yaml notranslate" data-language="yaml">portage:
  sync_wait_one_day: True</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.refresh_db</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.remove"> salt.modules.ebuildpkg.remove(name=None, slot=None, fromrepo=None, pkgs=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands which modify installed packages from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to keep systemd from killing any emerge commands spawned by Salt when the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted. (see <code class="docutils literal notranslate"><span class="pre">KillMode</span></code> in the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html">systemd.kill(5)</a> manpage for more information). If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Remove packages via emerge --unmerge.</p> <dl class="docutils"> <dt>name</dt> <dd>The name of the package to be deleted.</dd> <dt>slot</dt> <dd>Restrict the remove to a specific slot. Ignored if <code class="docutils literal notranslate"><span class="pre">name</span></code> is None.</dd> <dt>fromrepo</dt> <dd>Restrict the remove to a specific slot. Ignored if <code class="docutils literal notranslate"><span class="pre">name</span></code> is None.</dd> </dl> <p>Multiple Package Options:</p> <dl class="docutils"> <dt>pkgs</dt> <dd>Uninstall multiple packages. <code class="docutils literal notranslate"><span class="pre">slot</span></code> and <code class="docutils literal notranslate"><span class="pre">fromrepo</span></code> arguments are ignored if this argument is present. Must be passed as a python list.</dd> </dl> <div class="versionadded"> <p><span class="versionmodified">New in version 0.16.0.</span></p> </div> <p>Returns a dict containing the changes.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.remove &lt;package name&gt;
salt '*' pkg.remove &lt;package name&gt; slot=4.4 fromrepo=gentoo
salt '*' pkg.remove &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;
salt '*' pkg.remove pkgs='["foo", "bar"]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.update"> salt.modules.ebuildpkg.update(pkg, slot=None, fromrepo=None, refresh=False, binhost=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands which modify installed packages from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to keep systemd from killing any emerge commands spawned by Salt when the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted. (see <code class="docutils literal notranslate"><span class="pre">KillMode</span></code> in the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html">systemd.kill(5)</a> manpage for more information). If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Updates the passed package (emerge --update package)</p> <dl class="docutils"> <dt>slot</dt> <dd>Restrict the update to a particular slot. It will update to the latest version within the slot.</dd> <dt>fromrepo</dt> <dd>Restrict the update to a particular repository. It will update to the latest version within the repository.</dd> <dt>binhost</dt> <dd>has two options try and force. try - tells emerge to try and install the package from a configured binhost. force - forces emerge to install the package from a binhost otherwise it fails out.</dd> </dl> <p>Return a dict containing the new package names and versions:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;package&gt;': {'old': '&lt;old-version&gt;',
               'new': '&lt;new-version&gt;'}}</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.update &lt;package name&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.upgrade"> salt.modules.ebuildpkg.upgrade(refresh=True, binhost=None, backtrack=3)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands which modify installed packages from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to keep systemd from killing any emerge commands spawned by Salt when the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted. (see <code class="docutils literal notranslate"><span class="pre">KillMode</span></code> in the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html">systemd.kill(5)</a> manpage for more information). If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Run a full system upgrade (emerge -uDN @world)</p> <dl class="docutils"> <dt>binhost</dt> <dd>has two options try and force. try - tells emerge to try and install the package from a configured binhost. force - forces emerge to install the package from a binhost otherwise it fails out.</dd> <dt>backtrack</dt> <dd>Specifies an integer number of times to backtrack if dependency calculation fails due to a conflict or an unsatisfied dependency (default: ´3´).</dd> </dl> <p>Returns a dictionary containing the changes:</p> <pre class="highlight-python notranslate" data-language="python">{'&lt;package&gt;':  {'old': '&lt;old-version&gt;',
                'new': '&lt;new-version&gt;'}}</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.upgrade</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.upgrade_available"> salt.modules.ebuildpkg.upgrade_available(name)</h3> <dd>
<p>Check whether or not an upgrade is available for a given package</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.upgrade_available &lt;package name&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.version"> salt.modules.ebuildpkg.version(*names, **kwargs)</h3> <dd>
<p>Returns a string representing the package version or an empty string if not installed. If more than one package name is specified, a dict of name/version pairs is returned.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.version &lt;package name&gt;
salt '*' pkg.version &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; ...</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.version_clean"> salt.modules.ebuildpkg.version_clean(version)</h3> <dd>
<p>Clean the version string removing extra data.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.version_clean &lt;version_string&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.ebuildpkg.version_cmp"> salt.modules.ebuildpkg.version_cmp(pkg1, pkg2, **kwargs)</h3> <dd>
<p>Do a cmp-style comparison on two packages. Return -1 if pkg1 &lt; pkg2, 0 if pkg1 == pkg2, and 1 if pkg1 &gt; pkg2. Return None if there was a problem making the comparison.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.version_cmp '0.2.4-0' '0.2.4.1-0'</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.ebuildpkg.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.ebuildpkg.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
