
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.mssql - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Module to provide MS SQL Server compatibility to salt. ">
  <meta name="keywords" content="salt, modules, mssql, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.mssql.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.mssql</h1> <p>Module to provide MS SQL Server compatibility to salt.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">depends:</th>
<td class="field-body">
<ul class="first simple"> <li>FreeTDS</li> <li>pymssql Python module</li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">configuration:</th>
<td class="field-body">
<p class="first">In order to connect to MS SQL Server, certain configuration is required in minion configs/pillars on the relevant minions. Some sample pillars might look like:</p> <pre class="highlight-default notranslate" data-language="default">mssql.server: 'localhost'
mssql.port:   1433
mssql.user:   'sysdba'
mssql.password:   'Some preferable complex password'
mssql.database: ''</pre> <p class="last">The default for the port is '1433' and for the database is '' (empty string); in most cases they can be left at the default setting. Options that are directly passed into functions will overwrite options from configs or pillars.</p> </td> </tr> </tbody> </table> <dl class="function"> <h3 id="salt.modules.mssql.db_create"> salt.modules.mssql.db_create(database, containment='NONE', new_database_options=None, **kwargs)</h3> <dd>
<p>Creates a new database. Does not update options of existing databases. new_database_options can only be a list of strings</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.db_create DB_NAME</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.db_exists"> salt.modules.mssql.db_exists(database_name, **kwargs)</h3> <dd>
<p>Find if a specific database exists on the MS SQL server.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.db_exists database_name='DBNAME'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.db_list"> salt.modules.mssql.db_list(**kwargs)</h3> <dd>
<p>Return the database list created on a MS SQL server.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.db_list</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.db_remove"> salt.modules.mssql.db_remove(database_name, **kwargs)</h3> <dd>
<p>Drops a specific database from the MS SQL server. It will not drop any of 'master', 'model', 'msdb' or 'tempdb'.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.db_remove database_name='DBNAME'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.login_create"> salt.modules.mssql.login_create(login, new_login_password=None, new_login_domain='', new_login_roles=None, new_login_options=None, **kwargs)</h3> <dd>
<p>Creates a new login. Does not update password of existing logins. For Windows authentication, provide <code class="docutils literal notranslate"><span class="pre">new_login_domain</span></code>. For SQL Server authentication, prvide <code class="docutils literal notranslate"><span class="pre">new_login_password</span></code>. Since hashed passwords are <em>varbinary</em> values, if the <code class="docutils literal notranslate"><span class="pre">new_login_password</span></code> is 'int / long', it will be considered to be HASHED.</p> <dl class="docutils"> <dt>new_login_roles</dt> <dd>a list of SERVER roles</dd> <dt>new_login_options</dt> <dd>a list of strings</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.login_create LOGIN_NAME database=DBNAME [new_login_password=PASSWORD]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.login_exists"> salt.modules.mssql.login_exists(login, domain='', **kwargs)</h3> <dd>
<p>Find if a login exists in the MS SQL server. domain, if provided, will be prepended to login</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.login_exists 'LOGIN'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.login_remove"> salt.modules.mssql.login_remove(login, **kwargs)</h3> <dd>
<p>Removes an login.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.login_remove LOGINNAME</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.role_create"> salt.modules.mssql.role_create(role, owner=None, grants=None, **kwargs)</h3> <dd>
<p>Creates a new database role. If no owner is specified, the role will be owned by the user that executes CREATE ROLE, which is the user argument or mssql.user option. grants is list of strings.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.role_create role=product01 owner=sysdba grants='["SELECT", "INSERT", "UPDATE", "DELETE", "EXECUTE"]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.role_exists"> salt.modules.mssql.role_exists(role, **kwargs)</h3> <dd>
<p>Checks if a role exists.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.role_exists db_owner</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.role_list"> salt.modules.mssql.role_list(**kwargs)</h3> <dd>
<p>Lists database roles.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.role_list</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.role_remove"> salt.modules.mssql.role_remove(role, **kwargs)</h3> <dd>
<p>Remove a database role.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.role_create role=test_role01</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.tsql_query"> salt.modules.mssql.tsql_query(query, **kwargs)</h3> <dd>
<p>Run a SQL query and return query result as list of tuples, or a list of dictionaries if as_dict was passed, or an empty list if no data is available.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.tsql_query 'SELECT @@version as version' as_dict=True</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.user_create"> salt.modules.mssql.user_create(username, login=None, domain='', database=None, roles=None, options=None, **kwargs)</h3> <dd>
<p>Creates a new user. If login is not specified, the user will be created without a login. domain, if provided, will be prepended to username. options can only be a list of strings</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.user_create USERNAME database=DBNAME</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.user_exists"> salt.modules.mssql.user_exists(username, domain='', database=None, **kwargs)</h3> <dd>
<p>Find if an user exists in a specific database on the MS SQL server. domain, if provided, will be prepended to username</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.user_exists 'USERNAME' [database='DBNAME']</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.user_list"> salt.modules.mssql.user_list(**kwargs)</h3> <dd>
<p>Get the user list for a specific database on the MS SQL server.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.user_list [database='DBNAME']</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.user_remove"> salt.modules.mssql.user_remove(username, **kwargs)</h3> <dd>
<p>Removes an user.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.user_remove USERNAME database=DBNAME</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mssql.version"> salt.modules.mssql.version(**kwargs)</h3> <dd>
<p>Return the version of a MS SQL server.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion mssql.version</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.mssql.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.mssql.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
