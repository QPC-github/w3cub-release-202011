
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.nix - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2017.7.0. ">
  <meta name="keywords" content="salt, modules, nix, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.nix.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.nix</h1> <div class="section" id="work-with-nix-packages"> <h2>Work with Nix packages</h2> <div class="versionadded"> <p><span class="versionmodified">New in version 2017.7.0.</span></p> </div> <p>Does not require the machine to be Nixos, just have Nix installed and available to use for the user running this command. Their profile must be located in their home, under <code class="docutils literal notranslate"><span class="pre">$HOME/.nix-profile/</span></code>, and the nix store, unless specially set up, should be in <code class="docutils literal notranslate"><span class="pre">/nix</span></code>. To easily use this with multiple users or a root user, set up the <a class="reference external" href="https://nixos.org/nix/manual/#ssec-multi-user">nix-daemon</a>.</p> <p>This module exposes most of the common nix operations. Currently not meant to be run as a <code class="docutils literal notranslate"><span class="pre">pkg</span></code> module, but explicitly as <code class="docutils literal notranslate"><span class="pre">nix.*</span></code>.</p> <p>For more information on nix, see the <a class="reference external" href="https://nixos.org/nix/manual/">nix documentation</a>.</p> <dl class="function"> <h3 id="salt.modules.nix.collect_garbage"> salt.modules.nix.collect_garbage()</h3> <dd>
<p>Completely removed all currently 'uninstalled' packages in the nix store.</p> <p>Tells the user how many store paths were removed and how much space was freed.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">How much space was freed and how many derivations were removed</td> </tr> <tr class="field-even field">
<th class="field-name">Return type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td> </tr> </tbody> </table> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">This is a destructive action on the nix store.</p> </div> <pre class="highlight-bash notranslate" data-language="bash">salt '*' nix.collect_garbage</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.nix.install"> salt.modules.nix.install(*pkgs, **kwargs)</h3> <dd>
<p>Installs a single or multiple packages via nix</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>pkgs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>)</em>) -- packages to update</li> <li>
<strong>attributes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- Pass the list of packages or single package as attribues, not package names. default: False</li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Installed packages. Example element: <code class="docutils literal notranslate"><span class="pre">gcc-3.3.2</span></code></p> </td> </tr> <tr class="field-odd field">
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>)</p> </td> </tr> </tbody> </table> <pre class="highlight-bash notranslate" data-language="bash">salt '*' nix.install package [package2 ...]
salt '*' nix.install attributes=True attr.name [attr.name2 ...]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.nix.list_pkgs"> salt.modules.nix.list_pkgs(installed=True, attributes=True)</h3> <dd>
<p>Lists installed packages. Due to how nix works, it defaults to just doing a <code class="docutils literal notranslate"><span class="pre">nix-env</span> <span class="pre">-q</span></code>.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>installed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- list only installed packages. This can be a very long list (12,000+ elements), so caution is advised. Default: True</li> <li>
<strong>attributes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- show the attributes of the packages when listing all packages. Default: True</li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Packages installed or available, along with their attributes.</p> </td> </tr> <tr class="field-odd field">
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>))</p> </td> </tr> </tbody> </table> <pre class="highlight-bash notranslate" data-language="bash">salt '*' nix.list_pkgs
salt '*' nix.list_pkgs installed=False</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.nix.uninstall"> salt.modules.nix.uninstall(*pkgs)</h3> <dd>
<p>Erases a package from the current nix profile. Nix uninstalls work differently than other package managers, and the symlinks in the profile are removed, while the actual package remains. There is also a <code class="docutils literal notranslate"><span class="pre">nix.purge</span></code> function, to clear the package cache of unused packages.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>pkgs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>)</em>) -- List, single package to uninstall</td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">Packages that have been uninstalled</td> </tr> <tr class="field-odd field">
<th class="field-name">Return type:</th>
<td class="field-body">
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>)</td> </tr> </tbody> </table> <pre class="highlight-bash notranslate" data-language="bash">salt '*' nix.uninstall pkg1 [pkg2 ...]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.nix.upgrade"> salt.modules.nix.upgrade(*pkgs)</h3> <dd>
<p>Runs an update operation on the specified packages, or all packages if none is specified.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>pkgs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>)</em>) -- List of packages to update</td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">The upgraded packages. Example element: <code class="docutils literal notranslate"><span class="pre">['libxslt-1.1.0',</span> <span class="pre">'libxslt-1.1.10']</span></code>
</td> </tr> <tr class="field-odd field">
<th class="field-name">Return type:</th>
<td class="field-body">
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>))</td> </tr> </tbody> </table> <pre class="highlight-bash notranslate" data-language="bash">salt '*' nix.update
salt '*' nix.update pkgs=one,two</pre> </dd>
</dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.nix.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.nix.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
