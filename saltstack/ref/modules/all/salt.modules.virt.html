
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.virt - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Work with virtual machines managed by libvirt ">
  <meta name="keywords" content="salt, modules, virt, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.virt.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.virt</h1> <p>Work with virtual machines managed by libvirt</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">depends:</th>
<td class="field-body">libvirt Python module</td> </tr> </tbody> </table> <div class="section" id="connection"> <h2>Connection</h2> <p>The connection to the virtualization host can be either setup in the minion configuration, pillar data or overridden for each individual call.</p> <p>By default, the libvirt connection URL will be guessed: the first available libvirt hypervisor driver will be used. This can be overridden like this:</p> <pre class="highlight-yaml notranslate" data-language="yaml">virt:
  connection:
    uri: lxc:///</pre> <p>If the connection requires an authentication like for ESXi, this can be defined in the minion pillar data like this:</p> <pre class="highlight-yaml notranslate" data-language="yaml">virt:
  connection:
    uri: esx://10.1.1.101/?no_verify=1&amp;auto_answer=1
    auth:
      username: user
      password: secret</pre> <div class="section" id="connecting-with-ssh-protocol"> <h3>Connecting with SSH protocol</h3> <p>Libvirt can connect to remote hosts using SSH using one of the <code class="docutils literal notranslate"><span class="pre">ssh</span></code>, <code class="docutils literal notranslate"><span class="pre">libssh</span></code> and <code class="docutils literal notranslate"><span class="pre">libssh2</span></code> transports. Note that <code class="docutils literal notranslate"><span class="pre">libssh2</span></code> is likely to fail as it doesn't read the <code class="docutils literal notranslate"><span class="pre">known_hosts</span></code> file. Libvirt may also have been built without <code class="docutils literal notranslate"><span class="pre">libssh</span></code> or <code class="docutils literal notranslate"><span class="pre">libssh2</span></code> support.</p> <p>To use the SSH transport, on the minion setup an SSH agent with a key authorized on the remote libvirt machine.</p> </div> <div class="section" id="per-call-connection-setup"> <h3>Per call connection setup</h3> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>All the calls requiring the libvirt connection configuration as mentioned above can override this configuration using <code class="docutils literal notranslate"><span class="pre">connection</span></code>, <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code> parameters.</p> <p>This means that the following will list the domains on the local LXC libvirt driver, whatever the <code class="docutils literal notranslate"><span class="pre">virt:connection</span></code> is.</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'hypervisor' virt.list_domains connection=lxc:///</pre> <p>The calls not using the libvirt connection setup are:</p> <ul class="simple"> <li><code class="docutils literal notranslate"><span class="pre">seed_non_shared_migrate</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">virt_type</span></code></li> <li><code class="docutils literal notranslate"><span class="pre">is_*hyper</span></code></li> <li>all migration functions</li> <li><a class="reference external" href="http://libvirt.org/drvesx.html#uriformat">libvirt ESX URI format</a></li> <li><a class="reference external" href="http://libvirt.org/uri.html#URI_config">libvirt URI format</a></li> <li><a class="reference external" href="http://libvirt.org/auth.html#Auth_client_config">libvirt authentication configuration</a></li> </ul> <dl class="function"> <h3 id="salt.modules.virt.capabilities"> salt.modules.virt.capabilities(**kwargs)</h3> <dd>
<p>Return the hypervisor connection capabilities.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.capabilities</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.cpu_baseline"> salt.modules.virt.cpu_baseline(full=False, migratable=False, out='libvirt', **kwargs)</h3> <dd>
<p>Return the optimal 'custom' CPU baseline config for VM's on this minion</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>full</strong> -- Return all CPU features rather than the ones on top of the closest CPU model</li> <li>
<strong>migratable</strong> -- Exclude CPU features that are unmigratable (libvirt 2.13+)</li> <li>
<strong>out</strong> -- 'libvirt' (default) for usable libvirt XML definition, 'salt' for nice dict</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.cpu_baseline</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.create_xml_path"> salt.modules.virt.create_xml_path(path, **kwargs)</h3> <dd>
<p>Start a domain based on the XML-file path passed to the function</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>path</strong> -- path to a file containing the libvirt XML definition of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.create_xml_path &lt;path to XML file on the node&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.create_xml_str"> salt.modules.virt.create_xml_str(xml, **kwargs)</h3> <dd>
<p>Start a domain based on the XML passed to the function</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>xml</strong> -- libvirt XML definition of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.create_xml_str &lt;XML in string format&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.ctrl_alt_del"> salt.modules.virt.ctrl_alt_del(vm_, **kwargs)</h3> <dd>
<p>Sends CTRL+ALT+DEL to a VM</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.ctrl_alt_del &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.define_vol_xml_path"> salt.modules.virt.define_vol_xml_path(path, **kwargs)</h3> <dd>
<p>Define a volume based on the XML-file path passed to the function</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>path</strong> -- path to a file containing the libvirt XML definition of the volume</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.define_vol_xml_path &lt;path to XML file on the node&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.define_vol_xml_str"> salt.modules.virt.define_vol_xml_str(xml, **kwargs)</h3> <dd>
<p>Define a volume based on the XML passed to the function</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>xml</strong> -- libvirt XML definition of the storage volume</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.define_vol_xml_str &lt;XML in string format&gt;</pre> <p>The storage pool where the disk image will be defined is <code class="docutils literal notranslate"><span class="pre">default</span></code> unless changed with a configuration like this:</p> <pre class="highlight-yaml notranslate" data-language="yaml">virt:
    storagepool: mine</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.define_xml_path"> salt.modules.virt.define_xml_path(path, **kwargs)</h3> <dd>
<p>Define a domain based on the XML-file path passed to the function</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>path</strong> -- path to a file containing the libvirt XML definition of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.define_xml_path &lt;path to XML file on the node&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.define_xml_str"> salt.modules.virt.define_xml_str(xml, **kwargs)</h3> <dd>
<p>Define a domain based on the XML passed to the function</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>xml</strong> -- libvirt XML definition of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.define_xml_str &lt;XML in string format&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.delete_snapshots"> salt.modules.virt.delete_snapshots(name, *names, **kwargs)</h3> <dd>
<p>Delete one or more snapshots of the given VM.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- domain name</li> <li>
<strong>names</strong> -- names of the snapshots to remove</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.delete_snapshots &lt;domain&gt; all=True
salt '*' virt.delete_snapshots &lt;domain&gt; &lt;snapshot&gt;
salt '*' virt.delete_snapshots &lt;domain&gt; &lt;snapshot1&gt; &lt;snapshot2&gt; ...</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.domain_capabilities"> salt.modules.virt.domain_capabilities(emulator=None, arch=None, machine=None, domain=None, **kwargs)</h3> <dd>
<p>Return the domain capabilities given an emulator, architecture, machine or virtualization type.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>emulator</strong> -- return the capabilities for the given emulator binary</li> <li>
<strong>arch</strong> -- return the capabilities for the given CPU architecture</li> <li>
<strong>machine</strong> -- return the capabilities for the given emulated machine type</li> <li>
<strong>domain</strong> -- return the capabilities for the given virtualization type.</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <p>The list of the possible emulator, arch, machine and domain can be found in the host capabilities output.</p> <p>If none of the parameters is provided the libvirt default domain capabilities will be returned.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.domain_capabilities arch='x86_64' domain='kvm'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.freecpu"> salt.modules.virt.freecpu(**kwargs)</h3> <dd>
<p>Return an int representing the number of unallocated cpus on this hypervisor</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.freecpu</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.freemem"> salt.modules.virt.freemem(**kwargs)</h3> <dd>
<p>Return an int representing the amount of memory (in MB) that has not been given to virtual machines on this node</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.freemem</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.full_info"> salt.modules.virt.full_info(**kwargs)</h3> <dd>
<p>Return the node_info, vm_info and freemem</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.full_info</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_disks"> salt.modules.virt.get_disks(vm_, **kwargs)</h3> <dd>
<p>Return the disks of a named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_disks &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_graphics"> salt.modules.virt.get_graphics(vm_, **kwargs)</h3> <dd>
<p>Returns the information on vnc for a given vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_graphics &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_hypervisor"> salt.modules.virt.get_hypervisor()</h3> <dd>
<p>Returns the name of the hypervisor running on this node or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p> <p>Detected hypervisors:</p> <ul class="simple"> <li>kvm</li> <li>xen</li> </ul> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_hypervisor</pre> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0: </span>the function and the <code class="docutils literal notranslate"><span class="pre">kvm</span></code> and <code class="docutils literal notranslate"><span class="pre">xen</span></code> hypervisors support</p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_macs"> salt.modules.virt.get_macs(vm_, **kwargs)</h3> <dd>
<p>Return a list off MAC addresses from the named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_macs &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_nics"> salt.modules.virt.get_nics(vm_, **kwargs)</h3> <dd>
<p>Return info about the network interfaces of a named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_nics &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_on_crash"> salt.modules.virt.get_on_crash(vm_, **kwargs)</h3> <dd>
<p>Return a on_crash from the named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_on_crash &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_on_poweroff"> salt.modules.virt.get_on_poweroff(vm_, **kwargs)</h3> <dd>
<p>Return a on_poweroff from the named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_on_poweroff &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_on_reboot"> salt.modules.virt.get_on_reboot(vm_, **kwargs)</h3> <dd>
<p>Return a on_reboot from the named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_on_reboot &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_profiles"> salt.modules.virt.get_profiles(hypervisor=None, **kwargs)</h3> <dd>
<p>Return the virt profiles for hypervisor.</p> <p>Currently there are profiles for:</p> <ul class="simple"> <li>nic</li> <li>disk</li> </ul> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>hypervisor</strong> -- override the default machine type.</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_profiles
salt '*' virt.get_profiles hypervisor=esxi</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_uuid"> salt.modules.virt.get_uuid(vm_, **kwargs)</h3> <dd>
<p>Return a uuid from the named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_uuid &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.get_xml"> salt.modules.virt.get_xml(vm_, **kwargs)</h3> <dd>
<p>Returns the XML for a given vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.get_xml &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.init"> salt.modules.virt.init(name, cpu, mem, image=None, nic='default', interfaces=None, hypervisor=None, start=True, disk='default', disks=None, saltenv='base', seed=True, install=True, pub_key=None, priv_key=None, seed_cmd='seed.apply', enable_vnc=False, enable_qcow=False, graphics=None, os_type=None, arch=None, **kwargs)</h3> <dd>
<p>Initialize a new vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- name of the virtual machine to create</li> <li>
<strong>cpu</strong> -- Number of virtual CPUs to assign to the virtual machine</li> <li>
<strong>mem</strong> -- Amount of memory to allocate to the virtual machine in MiB.</li> <li>
<strong>image</strong> -- <p>Path to a disk image to use as the first disk (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>). Deprecated in favor of the <code class="docutils literal notranslate"><span class="pre">disks</span></code> parameter. To set (or change) the image of a disk, add the following to the disks definitions:</p> <pre class="highlight-python notranslate" data-language="python">{
    'name': 'name_of_disk_to_change',
    'image': '/path/to/the/image'
}</pre> </li> <li>
<strong>nic</strong> -- NIC profile to use (Default: <code class="docutils literal notranslate"><span class="pre">'default'</span></code>). The profile interfaces can be customized / extended with the interfaces parameter. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, no profile will be used.</li> <li>
<strong>interfaces</strong> -- <p>List of dictionaries providing details on the network interfaces to create. These data are merged with the ones from the nic profile. The structure of each dictionary is documented in <a class="reference internal" href="#init-nic-def"><span class="std std-ref">Network Interfaces Definitions</span></a>.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>hypervisor</strong> -- the virtual machine type. By default the value will be computed according to the virtual host capabilities.</li> <li>
<strong>start</strong> -- <code class="docutils literal notranslate"><span class="pre">True</span></code> to start the virtual machine after having defined it (Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</li> <li>
<strong>disk</strong> -- Disk profile to use (Default: <code class="docutils literal notranslate"><span class="pre">'default'</span></code>). If set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, no profile will be used.</li> <li>
<strong>disks</strong> -- <p>List of dictionaries providing details on the disk devices to create. These data are merged with the ones from the disk profile. The structure of each dictionary is documented in <a class="reference internal" href="#init-disk-def"><span class="std std-ref">Disks Definitions</span></a>.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>saltenv</strong> -- Fileserver environment (Default: <code class="docutils literal notranslate"><span class="pre">'base'</span></code>). See <a class="reference internal" href="salt.modules.cp#module-salt.modules.cp" title="salt.modules.cp"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cp</span> <span class="pre">module</span> <span class="pre">for</span> <span class="pre">more</span> <span class="pre">details</span></code></a>
</li> <li>
<strong>seed</strong> -- <code class="docutils literal notranslate"><span class="pre">True</span></code> to seed the disk image. Only used when the <code class="docutils literal notranslate"><span class="pre">image</span></code> parameter is provided. (Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</li> <li>
<strong>install</strong> -- install salt minion if absent (Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</li> <li>
<strong>pub_key</strong> -- public key to seed with (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</li> <li>
<strong>priv_key</strong> -- public key to seed with (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</li> <li>
<strong>seed_cmd</strong> -- Salt command to execute to seed the image. (Default: <code class="docutils literal notranslate"><span class="pre">'seed.apply'</span></code>)</li> <li>
<strong>enable_vnc</strong> -- <p><code class="docutils literal notranslate"><span class="pre">True</span></code> to setup a vnc display for the VM (Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p> <p>Deprecated in favor of the <code class="docutils literal notranslate"><span class="pre">graphics</span></code> parameter. Could be replaced with the following:</p> <pre class="highlight-python notranslate" data-language="python">graphics={'type': 'vnc'}</pre> <div class="deprecated"> <p><span class="versionmodified">Deprecated since version 2019.2.0.</span></p> </div> </li> <li>
<strong>graphics</strong> -- <p>Dictionary providing details on the graphics device to create. (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>) See <a class="reference internal" href="#init-graphics-def"><span class="std std-ref">Graphics Definition</span></a> for more details on the possible values.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>os_type</strong> -- <p>type of virtualization as found in the <code class="docutils literal notranslate"><span class="pre">//os/type</span></code> element of the libvirt definition. The default value is taken from the host capabilities, with a preference for <code class="docutils literal notranslate"><span class="pre">hvm</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>arch</strong> -- <p>architecture of the virtual machine. The default value is taken from the host capabilities, but <code class="docutils literal notranslate"><span class="pre">x86_64</span></code> is prefed over <code class="docutils literal notranslate"><span class="pre">i686</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>enable_qcow</strong> -- <p><code class="docutils literal notranslate"><span class="pre">True</span></code> to create a QCOW2 overlay image, rather than copying the image (Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p> <p>Deprecated in favor of <code class="docutils literal notranslate"><span class="pre">disks</span></code> parameter. Add the following to the disks definitions to create an overlay image of a template disk image with an image set:</p> <pre class="highlight-python notranslate" data-language="python">{
    'name': 'name_of_disk_to_change',
    'overlay_image': True
}</pre> <div class="deprecated"> <p><span class="versionmodified">Deprecated since version 2019.2.0.</span></p> </div> </li> <li>
<strong>pool</strong> -- <p>Path of the folder where the image files are located for vmware/esx hypervisors.</p> <p>Deprecated in favor of <code class="docutils literal notranslate"><span class="pre">disks</span></code> parameter. Add the following to the disks definitions to set the vmware datastore of a disk image:</p> <pre class="highlight-python notranslate" data-language="python">{
    'name': 'name_of_disk_to_change',
    'pool': 'mydatastore'
}</pre> <div class="deprecated"> <p><span class="versionmodified">Deprecated since version Flurorine.</span></p> </div> </li> <li>
<strong>dmac</strong> -- <p>Default MAC address to use for the network interfaces. By default MAC addresses are automatically generated.</p> <p>Deprecated in favor of <code class="docutils literal notranslate"><span class="pre">interfaces</span></code> parameter. Add the following to the interfaces definitions to force the mac address of a NIC:</p> <pre class="highlight-python notranslate" data-language="python">{
    'name': 'name_of_nic_to_change',
    'mac': 'MY:MA:CC:ADD:RE:SS'
}</pre> <div class="deprecated"> <p><span class="versionmodified">Deprecated since version 2019.2.0.</span></p> </div> </li> <li>
<strong>config</strong> -- minion configuration to use when seeding. See <a class="reference internal" href="salt.modules.seed#module-salt.modules.seed" title="salt.modules.seed"><code class="xref py py-mod docutils literal notranslate"><span class="pre">seed</span> <span class="pre">module</span> <span class="pre">for</span> <span class="pre">more</span> <span class="pre">details</span></code></a>
</li> <li>
<strong>boot_dev</strong> -- String of space-separated devices to boot from (Default: <code class="docutils literal notranslate"><span class="pre">'hd'</span></code>)</li> <li>
<strong>serial_type</strong> -- Serial device type. One of <code class="docutils literal notranslate"><span class="pre">'pty'</span></code>, <code class="docutils literal notranslate"><span class="pre">'tcp'</span></code> (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</li> <li>
<strong>telnet_port</strong> -- Telnet port to use for serial device of type <code class="docutils literal notranslate"><span class="pre">tcp</span></code>.</li> <li>
<strong>console</strong> -- <code class="docutils literal notranslate"><span class="pre">True</span></code> to add a console device along with serial one (Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p class="rubric" id="init-nic-def">Network Interfaces Definitions</p> <p>Network interfaces dictionaries can contain the following properties:</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the network interface. This is only used as a key to merge with the profile data</dd> <dt>type</dt> <dd>Network type. One of <code class="docutils literal notranslate"><span class="pre">'bridge'</span></code>, <code class="docutils literal notranslate"><span class="pre">'network'</span></code>
</dd> <dt>source</dt> <dd>The network source, typically the bridge or network name</dd> <dt>mac</dt> <dd>The desired mac address, computed if <code class="docutils literal notranslate"><span class="pre">None</span></code> (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>).</dd> <dt>model</dt> <dd>The network card model (Default: depends on the hypervisor)</dd> </dl> <p class="rubric" id="init-disk-def">Disks Definitions</p> <p>Disk dictionaries can contain the following properties:</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the disk. This is mostly used in the name of the disk image and as a key to merge with the profile data.</dd> <dt>format</dt> <dd>Format of the disk image, like <code class="docutils literal notranslate"><span class="pre">'qcow2'</span></code>, <code class="docutils literal notranslate"><span class="pre">'raw'</span></code>, <code class="docutils literal notranslate"><span class="pre">'vmdk'</span></code>. (Default: depends on the hypervisor)</dd> <dt>size</dt> <dd>Disk size in MiB</dd> <dt>pool</dt> <dd>Path to the folder or name of the pool where disks should be created. (Default: depends on hypervisor)</dd> <dt>model</dt> <dd>
<p class="first">One of the disk busses allowed by libvirt (Default: depends on hypervisor)</p> <p class="last">See the libvirt <a class="reference external" href="https://libvirt.org/formatdomain.html#elementsDisks">disk element</a> documentation for the allowed bus types.</p> </dd> <dt>image</dt> <dd>Path to the image to use for the disk. If no image is provided, an empty disk will be created (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</dd> <dt>overlay_image</dt> <dd>
<code class="docutils literal notranslate"><span class="pre">True</span></code> to create a QCOW2 disk image with <code class="docutils literal notranslate"><span class="pre">image</span></code> as backing file. If <code class="docutils literal notranslate"><span class="pre">False</span></code> the file pointed to by the <code class="docutils literal notranslate"><span class="pre">image</span></code> property will simply be copied. (Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</dd> <dt>source_file</dt> <dd>Absolute path to the disk image to use. Not to be confused with <code class="docutils literal notranslate"><span class="pre">image</span></code> parameter. This parameter is useful to use disk images that are created outside of this module. Can also be <code class="docutils literal notranslate"><span class="pre">None</span></code> for devices that have no associated image like cdroms.</dd> <dt>device</dt> <dd>Type of device of the disk. Can be one of 'disk', 'cdrom', 'floppy' or 'lun'. (Default: <code class="docutils literal notranslate"><span class="pre">'disk'</span></code>)</dd> </dl> <p class="rubric" id="init-graphics-def">Graphics Definition</p> <p>The graphics dictionnary can have the following properties:</p> <dl class="docutils"> <dt>type</dt> <dd>
<p class="first">Graphics type. The possible values are <code class="docutils literal notranslate"><span class="pre">none</span></code>, <code class="docutils literal notranslate"><span class="pre">'spice'</span></code>, <code class="docutils literal notranslate"><span class="pre">'vnc'</span></code> and other values allowed as a libvirt graphics type (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p> <p class="last">See the libvirt <a class="reference external" href="https://libvirt.org/formatdomain.html#elementsGraphics">graphics element</a> documentation for more details on the possible types.</p> </dd> <dt>port</dt> <dd>Port to export the graphics on for <code class="docutils literal notranslate"><span class="pre">vnc</span></code>, <code class="docutils literal notranslate"><span class="pre">spice</span></code> and <code class="docutils literal notranslate"><span class="pre">rdp</span></code> types.</dd> <dt>tls_port</dt> <dd>Port to export the graphics over a secured connection for <code class="docutils literal notranslate"><span class="pre">spice</span></code> type.</dd> <dt>listen</dt> <dd>
<p class="first">Dictionary defining on what address to listen on for <code class="docutils literal notranslate"><span class="pre">vnc</span></code>, <code class="docutils literal notranslate"><span class="pre">spice</span></code> and <code class="docutils literal notranslate"><span class="pre">rdp</span></code>. It has a <code class="docutils literal notranslate"><span class="pre">type</span></code> property with <code class="docutils literal notranslate"><span class="pre">address</span></code> and <code class="docutils literal notranslate"><span class="pre">None</span></code> as possible values, and an <code class="docutils literal notranslate"><span class="pre">address</span></code> property holding the IP or hostname to listen on.</p> <p class="last">By default, not setting the <code class="docutils literal notranslate"><span class="pre">listen</span></code> part of the dictionary will default to listen on all addresses.</p> </dd> </dl> <p class="rubric">CLI Example</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'hypervisor' virt.init vm_name 4 512 salt://path/to/image.raw
salt 'hypervisor' virt.init vm_name 4 512 /var/lib/libvirt/images/img.raw
salt 'hypervisor' virt.init vm_name 4 512 nic=profile disk=profile</pre> <p>The disk images will be created in an image folder within the directory defined by the <code class="docutils literal notranslate"><span class="pre">virt:images</span></code> option. Its default value is <code class="docutils literal notranslate"><span class="pre">/srv/salt-images/</span></code> but this can changed with such a configuration:</p> <pre class="highlight-yaml notranslate" data-language="yaml">virt:
    images: /data/my/vm/images/</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.is_hyper"> salt.modules.virt.is_hyper()</h3> <dd>
<p>Returns a bool whether or not this node is a hypervisor of any kind</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.is_hyper</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.is_kvm_hyper"> salt.modules.virt.is_kvm_hyper()</h3> <dd>
<p>Returns a bool whether or not this node is a KVM hypervisor</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.is_kvm_hyper</pre> <div class="deprecated"> <p><span class="versionmodified">Deprecated since version 2019.2.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.is_xen_hyper"> salt.modules.virt.is_xen_hyper()</h3> <dd>
<p>Returns a bool whether or not this node is a XEN hypervisor</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.is_xen_hyper</pre> <div class="deprecated"> <p><span class="versionmodified">Deprecated since version 2019.2.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.list_active_vms"> salt.modules.virt.list_active_vms(**kwargs)</h3> <dd>
<p>Return a list of names for active virtual machine on the minion</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.list_active_vms</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.list_domains"> salt.modules.virt.list_domains(**kwargs)</h3> <dd>
<p>Return a list of available domains.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.list_domains</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.list_inactive_vms"> salt.modules.virt.list_inactive_vms(**kwargs)</h3> <dd>
<p>Return a list of names for inactive virtual machine on the minion</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.list_inactive_vms</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.list_networks"> salt.modules.virt.list_networks(**kwargs)</h3> <dd>
<p>List all virtual networks.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.list_networks</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.list_pools"> salt.modules.virt.list_pools(**kwargs)</h3> <dd>
<p>List all storage pools.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.list_pools</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.list_snapshots"> salt.modules.virt.list_snapshots(domain=None, **kwargs)</h3> <dd>
<p>List available snapshots for certain vm or for all.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>domain</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.list_snapshots
salt '*' virt.list_snapshots &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.migrate"> salt.modules.virt.migrate(vm_, target, ssh=False)</h3> <dd>
<p>Shared storage migration</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>target</strong> -- target libvirt host name</li> <li>
<strong>ssh</strong> -- True to connect over ssh</li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.migrate &lt;domain&gt; &lt;target hypervisor&gt;</pre> <p>A tunnel data migration can be performed by setting this in the configuration:</p> <pre class="highlight-yaml notranslate" data-language="yaml">virt:
    tunnel: True</pre> <p>For more details on tunnelled data migrations, report to <a class="reference external" href="https://libvirt.org/migration.html#transporttunnel">https://libvirt.org/migration.html#transporttunnel</a></p> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.migrate_non_shared"> salt.modules.virt.migrate_non_shared(vm_, target, ssh=False)</h3> <dd>
<p>Attempt to execute non-shared storage "all" migration</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>target</strong> -- target libvirt host name</li> <li>
<strong>ssh</strong> -- True to connect over ssh</li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.migrate_non_shared &lt;vm name&gt; &lt;target hypervisor&gt;</pre> <p>A tunnel data migration can be performed by setting this in the configuration:</p> <pre class="highlight-yaml notranslate" data-language="yaml">virt:
    tunnel: True</pre> <p>For more details on tunnelled data migrations, report to <a class="reference external" href="https://libvirt.org/migration.html#transporttunnel">https://libvirt.org/migration.html#transporttunnel</a></p> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.migrate_non_shared_inc"> salt.modules.virt.migrate_non_shared_inc(vm_, target, ssh=False)</h3> <dd>
<p>Attempt to execute non-shared storage "all" migration</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>target</strong> -- target libvirt host name</li> <li>
<strong>ssh</strong> -- True to connect over ssh</li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.migrate_non_shared_inc &lt;vm name&gt; &lt;target hypervisor&gt;</pre> <p>A tunnel data migration can be performed by setting this in the configuration:</p> <pre class="highlight-yaml notranslate" data-language="yaml">virt:
    tunnel: True</pre> <p>For more details on tunnelled data migrations, report to <a class="reference external" href="https://libvirt.org/migration.html#transporttunnel">https://libvirt.org/migration.html#transporttunnel</a></p> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.network_define"> salt.modules.virt.network_define(name, bridge, forward, **kwargs)</h3> <dd>
<p>Create libvirt network.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- Network name</li> <li>
<strong>bridge</strong> -- Bridge name</li> <li>
<strong>forward</strong> -- Forward mode(bridge, router, nat)</li> <li>
<strong>vport</strong> -- Virtualport type</li> <li>
<strong>tag</strong> -- Vlan tag</li> <li>
<strong>autostart</strong> -- Network autostart (default True)</li> <li>
<strong>start</strong> -- Network start (default True)</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.network_define network main bridge openvswitch</pre> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.network_info"> salt.modules.virt.network_info(name=None, **kwargs)</h3> <dd>
<p>Return informations on a virtual network provided its name.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- virtual network name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <p>If no name is provided, return the infos for all defined virtual networks.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.network_info default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.network_set_autostart"> salt.modules.virt.network_set_autostart(name, state='on', **kwargs)</h3> <dd>
<p>Set the autostart flag on a virtual network so that the network will start with the host system on reboot.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- virtual network name</li> <li>
<strong>state</strong> -- 'on' to auto start the network, anything else to mark the virtual network not to be started when the host boots</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt "*" virt.network_set_autostart &lt;pool&gt; &lt;on | off&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.network_start"> salt.modules.virt.network_start(name, **kwargs)</h3> <dd>
<p>Start a defined virtual network.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- virtual network name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.network_start default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.network_stop"> salt.modules.virt.network_stop(name, **kwargs)</h3> <dd>
<p>Stop a defined virtual network.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- virtual network name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.network_stop default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.network_undefine"> salt.modules.virt.network_undefine(name, **kwargs)</h3> <dd>
<p>Remove a defined virtual network. This does not stop the virtual network.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- virtual network name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.network_undefine default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.node_info"> salt.modules.virt.node_info(**kwargs)</h3> <dd>
<p>Return a dict with information about this node</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.node_info</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pause"> salt.modules.virt.pause(vm_, **kwargs)</h3> <dd>
<p>Pause the named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pause &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_build"> salt.modules.virt.pool_build(name, **kwargs)</h3> <dd>
<p>Build a defined libvirt storage pool.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- libvirt storage pool name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pool_build default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_define"> salt.modules.virt.pool_define(name, ptype, target=None, permissions=None, source_devices=None, source_dir=None, source_adapter=None, source_hosts=None, source_auth=None, source_name=None, source_format=None, transient=False, start=True, **kwargs)</h3> <dd>
<p>Create libvirt pool.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- Pool name</li> <li>
<strong>ptype</strong> -- Pool type. See <a class="reference external" href="https://libvirt.org/storage.html">libvirt documentation</a> for the possible values.</li> <li>
<strong>target</strong> -- Pool full path target</li> <li>
<strong>permissions</strong> -- Permissions to set on the target folder. This is mostly used for filesystem-based pool types. See <a class="reference internal" href="#pool-define-permissions"><span class="std std-ref">Permissions definition</span></a> for more details on this structure.</li> <li>
<strong>source_devices</strong> -- <p>List of source devices for pools backed by physical devices. (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p> <p>Each item in the list is a dictionary with <code class="docutils literal notranslate"><span class="pre">path</span></code> and optionally <code class="docutils literal notranslate"><span class="pre">part_separator</span></code> keys. The path is the qualified name for iSCSI devices.</p> <p>Report to <a class="reference external" href="https://libvirt.org/formatstorage.html#StoragePool">this libvirt page</a> for more informations on the use of <code class="docutils literal notranslate"><span class="pre">part_separator</span></code></p> </li> <li>
<strong>source_dir</strong> -- Path to the source directory for pools of type <code class="docutils literal notranslate"><span class="pre">dir</span></code>, <code class="docutils literal notranslate"><span class="pre">netfs</span></code> or <code class="docutils literal notranslate"><span class="pre">gluster</span></code>. (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</li> <li>
<strong>source_adapter</strong> -- <p>SCSI source definition. The value is a dictionary with <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">parent</span></code>, <code class="docutils literal notranslate"><span class="pre">managed</span></code>, <code class="docutils literal notranslate"><span class="pre">parent_wwnn</span></code>, <code class="docutils literal notranslate"><span class="pre">parent_wwpn</span></code>, <code class="docutils literal notranslate"><span class="pre">parent_fabric_wwn</span></code>, <code class="docutils literal notranslate"><span class="pre">wwnn</span></code>, <code class="docutils literal notranslate"><span class="pre">wwpn</span></code> and <code class="docutils literal notranslate"><span class="pre">parent_address</span></code> keys.</p> <p>The <code class="docutils literal notranslate"><span class="pre">parent_address</span></code> value is a dictionary with <code class="docutils literal notranslate"><span class="pre">unique_id</span></code> and <code class="docutils literal notranslate"><span class="pre">address</span></code> keys. The address represents a PCI address and is itself a dictionary with <code class="docutils literal notranslate"><span class="pre">domain</span></code>, <code class="docutils literal notranslate"><span class="pre">bus</span></code>, <code class="docutils literal notranslate"><span class="pre">slot</span></code> and <code class="docutils literal notranslate"><span class="pre">function</span></code> properties. Report to <a class="reference external" href="https://libvirt.org/formatstorage.html#StoragePool">this libvirt page</a> for the meaning and possible values of these properties.</p> </li> <li>
<strong>source_hosts</strong> -- List of source for pools backed by storage from remote servers. Each item is the hostname optionally followed by the port separated by a colon. (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</li> <li>
<strong>source_auth</strong> -- <p>Source authentication details. (Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p> <p>The value is a dictionary with <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">secret</span></code> keys. The type can be one of <code class="docutils literal notranslate"><span class="pre">ceph</span></code> for Ceph RBD or <code class="docutils literal notranslate"><span class="pre">chap</span></code> for iSCSI sources.</p> <p>The <code class="docutils literal notranslate"><span class="pre">secret</span></code> value links to a libvirt secret object. It is a dictionary with <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code> keys. The type value can be either <code class="docutils literal notranslate"><span class="pre">uuid</span></code> or <code class="docutils literal notranslate"><span class="pre">usage</span></code>.</p> <p>Examples:</p> <pre class="highlight-python notranslate" data-language="python">source_auth={
    'type': 'ceph',
    'username': 'admin',
    'secret': {
        'type': 'uuid',
        'uuid': '2ec115d7-3a88-3ceb-bc12-0ac909a6fd87'
    }
}</pre> <pre class="highlight-python notranslate" data-language="python">source_auth={
    'type': 'chap',
    'username': 'myname',
    'secret': {
        'type': 'usage',
        'uuid': 'mycluster_myname'
    }
}</pre> </li> <li>
<strong>source_name</strong> -- Identifier of name-based sources.</li> <li>
<strong>source_format</strong> -- <p>String representing the source format. The possible values are depending on the source type. See <a class="reference external" href="https://libvirt.org/storage.html">libvirt documentation</a> for the possible values.</p> </li> <li>
<strong>start</strong> -- Pool start (default True)</li> <li>
<strong>transient</strong> -- When <code class="docutils literal notranslate"><span class="pre">True</span></code>, the pool will be automatically undefined after being stopped. Note that a transient pool will force <code class="docutils literal notranslate"><span class="pre">start</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>. (Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <p class="rubric" id="pool-define-permissions">Permissions definition</p> <p>The permissions are described by a dictionary containing the following keys:</p> <dl class="docutils"> <dt>mode</dt> <dd>The octal representation of the permissions. (Default: <cite>0711</cite>)</dd> <dt>owner</dt> <dd>the numeric user ID of the owner. (Default: from the parent folder)</dd> <dt>group</dt> <dd>the numeric ID of the group. (Default: from the parent folder)</dd> <dt>label</dt> <dd>the SELinux label. (Default: <cite>None</cite>)</dd> </dl> <p class="rubric">CLI Example:</p> <p>Local folder pool:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pool_define somepool dir target=/srv/mypool                                   permissions="{'mode': '0744' 'ower': 107, 'group': 107 }"</pre> <p>CIFS backed pool:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pool_define myshare netfs source_format=cifs                                   source_dir=samba_share source_hosts="['example.com']" target=/mnt/cifs</pre> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_delete"> salt.modules.virt.pool_delete(name, fast=True, **kwargs)</h3> <dd>
<p>Delete the resources of a defined libvirt storage pool.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- libvirt storage pool name</li> <li>
<strong>fast</strong> -- if set to False, zeroes out all the data. Default value is True.</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pool_delete default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_info"> salt.modules.virt.pool_info(name=None, **kwargs)</h3> <dd>
<p>Return informations on a storage pool provided its name.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- libvirt storage pool name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <p>If no name is provided, return the infos for all defined storage pools.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pool_info default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_list_volumes"> salt.modules.virt.pool_list_volumes(name, **kwargs)</h3> <dd>
<p>List the volumes contained in a defined libvirt storage pool.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- libvirt storage pool name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt "*" virt.pool_list_volumes &lt;pool&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_refresh"> salt.modules.virt.pool_refresh(name, **kwargs)</h3> <dd>
<p>Refresh a defined libvirt storage pool.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- libvirt storage pool name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pool_refresh default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_set_autostart"> salt.modules.virt.pool_set_autostart(name, state='on', **kwargs)</h3> <dd>
<p>Set the autostart flag on a libvirt storage pool so that the storage pool will start with the host system on reboot.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- libvirt storage pool name</li> <li>
<strong>state</strong> -- 'on' to auto start the pool, anything else to mark the pool not to be started when the host boots</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt "*" virt.pool_set_autostart &lt;pool&gt; &lt;on | off&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_start"> salt.modules.virt.pool_start(name, **kwargs)</h3> <dd>
<p>Start a defined libvirt storage pool.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- libvirt storage pool name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pool_start default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_stop"> salt.modules.virt.pool_stop(name, **kwargs)</h3> <dd>
<p>Stop a defined libvirt storage pool.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- libvirt storage pool name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pool_stop default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.pool_undefine"> salt.modules.virt.pool_undefine(name, **kwargs)</h3> <dd>
<p>Remove a defined libvirt storage pool. The pool needs to be stopped before calling.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- libvirt storage pool name</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.pool_undefine default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.purge"> salt.modules.virt.purge(vm_, dirs=False, removables=None, **kwargs)</h3> <dd>
<p>Recursively destroy and delete a virtual machine, pass True for dir's to also delete the directories containing the virtual machine disk images - USE WITH EXTREME CAUTION!</p> <p>Pass removables=False to avoid deleting cdrom and floppy images. To avoid disruption, the default but dangerous value is True. This will be changed to the safer False default value in Sodium.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>dirs</strong> -- pass True to remove containing directories</li> <li>
<strong>removables</strong> -- <p>pass True to remove removable devices</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.purge &lt;domain&gt; removables=False</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.reboot"> salt.modules.virt.reboot(name, **kwargs)</h3> <dd>
<p>Reboot a domain via ACPI request</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.reboot &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.reset"> salt.modules.virt.reset(vm_, **kwargs)</h3> <dd>
<p>Reset a VM by emulating the reset button on a physical machine</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.reset &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.resume"> salt.modules.virt.resume(vm_, **kwargs)</h3> <dd>
<p>Resume the named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.resume &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.revert_snapshot"> salt.modules.virt.revert_snapshot(name, vm_snapshot=None, cleanup=False, **kwargs)</h3> <dd>
<p>Revert snapshot to the previous from current (if available) or to the specific.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- domain name</li> <li>
<strong>vm_snapshot</strong> -- name of the snapshot to revert</li> <li>
<strong>cleanup</strong> -- Remove all newer than reverted snapshots. Values: True or False (default False).</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.revert &lt;domain&gt;
salt '*' virt.revert &lt;domain&gt; &lt;snapshot&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.seed_non_shared_migrate"> salt.modules.virt.seed_non_shared_migrate(disks, force=False)</h3> <dd>
<p>Non shared migration requires that the disks be present on the migration destination, pass the disks information via this function, to the migration destination before executing the migration.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>disks</strong> -- the list of disk data as provided by virt.get_disks</li> <li>
<strong>force</strong> -- skip checking the compatibility of source and target disk images if True. (default: False)</li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.seed_non_shared_migrate &lt;disks&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.set_autostart"> salt.modules.virt.set_autostart(vm_, state='on', **kwargs)</h3> <dd>
<p>Set the autostart flag on a VM so that the VM will start with the host system on reboot.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>state</strong> -- 'on' to auto start the pool, anything else to mark the pool not to be started when the host boots</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt "*" virt.set_autostart &lt;domain&gt; &lt;on | off&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.setmem"> salt.modules.virt.setmem(vm_, memory, config=False, **kwargs)</h3> <dd>
<p>Changes the amount of memory allocated to VM. The VM must be shutdown for this to work.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>memory</strong> -- memory amount to set in MB</li> <li>
<strong>config</strong> -- if True then libvirt will be asked to modify the config as well</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.setmem &lt;domain&gt; &lt;size&gt;
salt '*' virt.setmem my_domain 768</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.setvcpus"> salt.modules.virt.setvcpus(vm_, vcpus, config=False, **kwargs)</h3> <dd>
<p>Changes the amount of vcpus allocated to VM. The VM must be shutdown for this to work.</p> <p>If config is True then we ask libvirt to modify the config as well</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>vcpus</strong> -- integer representing the number of CPUs to be assigned</li> <li>
<strong>config</strong> -- if True then libvirt will be asked to modify the config as well</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.setvcpus &lt;domain&gt; &lt;amount&gt;
salt '*' virt.setvcpus my_domain 4</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.shutdown"> salt.modules.virt.shutdown(vm_, **kwargs)</h3> <dd>
<p>Send a soft shutdown signal to the named vm</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.shutdown &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.snapshot"> salt.modules.virt.snapshot(domain, name=None, suffix=None, **kwargs)</h3> <dd>
<p>Create a snapshot of a VM.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>domain</strong> -- domain name</li> <li>
<strong>name</strong> -- Name of the snapshot. If the name is omitted, then will be used original domain name with ISO 8601 time as a suffix.</li> <li>
<strong>suffix</strong> -- Add suffix for the new name. Useful in states, where such snapshots can be distinguished from manually created.</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.snapshot &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.start"> salt.modules.virt.start(name, **kwargs)</h3> <dd>
<p>Start a defined domain</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.start &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.stop"> salt.modules.virt.stop(name, **kwargs)</h3> <dd>
<p>Hard power down the virtual machine, this is equivalent to pulling the power.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.stop &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.undefine"> salt.modules.virt.undefine(vm_, **kwargs)</h3> <dd>
<p>Remove a defined vm, this does not purge the virtual machine image, and this only works if the vm is powered down</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.undefine &lt;domain&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.update"> salt.modules.virt.update(name, cpu=0, mem=0, disk_profile=None, disks=None, nic_profile=None, interfaces=None, graphics=None, live=True, **kwargs)</h3> <dd>
<p>Update the definition of an existing domain.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>name</strong> -- Name of the domain to update</li> <li>
<strong>cpu</strong> -- Number of virtual CPUs to assign to the virtual machine</li> <li>
<strong>mem</strong> -- Amount of memory to allocate to the virtual machine in MiB.</li> <li>
<strong>disk_profile</strong> -- disk profile to use</li> <li>
<strong>disks</strong> -- Disk definitions as documented in the <a class="reference internal" href="#salt.modules.virt.init" title="salt.modules.virt.init"><code class="xref py py-func docutils literal notranslate"><span class="pre">init()</span></code></a> function. If neither the profile nor this parameter are defined, the disk devices will not be changed. However to clear disks set this parameter to empty list.</li> <li>
<strong>nic_profile</strong> -- network interfaces profile to use</li> <li>
<strong>interfaces</strong> -- Network interface definitions as documented in the <a class="reference internal" href="#salt.modules.virt.init" title="salt.modules.virt.init"><code class="xref py py-func docutils literal notranslate"><span class="pre">init()</span></code></a> function. If neither the profile nor this parameter are defined, the interface devices will not be changed. However to clear network interfaces set this parameter to empty list.</li> <li>
<strong>graphics</strong> -- The new graphics definition as defined in <a class="reference internal" href="#init-graphics-def"><span class="std std-ref">Graphics Definition</span></a>. If not set, the graphics will not be changed. To remove a graphics device, set this parameter to <code class="docutils literal notranslate"><span class="pre">{'type':</span> <span class="pre">'none'}</span></code>.</li> <li>
<strong>live</strong> -- <code class="docutils literal notranslate"><span class="pre">False</span></code> to avoid trying to live update the definition. In such a case, the new definition is applied at the next start of the virtual machine. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, not all aspects of the definition can be live updated, but as much as possible will be attempted. (Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</li> <li>
<strong>connection</strong> -- libvirt connection URI, overriding defaults</li> <li>
<strong>username</strong> -- username to connect with, overriding defaults</li> <li>
<strong>password</strong> -- password to connect with, overriding defaults</li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">

<p>Returns a dictionary indicating the status of what has been done. It is structured in the following way:</p> <pre class="highlight-python notranslate" data-language="python">{
  'definition': True,
  'cpu': True,
  'mem': True,
  'disks': {'attached': [list of actually attached disks],
            'detached': [list of actually detached disks]},
  'nics': {'attached': [list of actually attached nics],
           'detached': [list of actually detached nics]},
  'errors': ['error messages for failures']
}</pre> </td> </tr> </tbody> </table> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.update domain cpu=2 mem=1024</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.virt_type"> salt.modules.virt.virt_type()</h3> <dd>
<p>Returns the virtual machine type as a string</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.virt_type</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.vm_cputime"> salt.modules.virt.vm_cputime(vm_=None, **kwargs)</h3> <dd>
<p>Return cputime used by the vms on this hyper in a list of dicts:</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <pre class="highlight-python notranslate" data-language="python">[
    'your-vm': {
        'cputime' &lt;int&gt;
        'cputime_percent' &lt;int&gt;
        },
    ...
    ]</pre> <p>If you pass a VM name in as an argument then it will return info for just the named VM, otherwise it will return all VMs.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.vm_cputime</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.vm_diskstats"> salt.modules.virt.vm_diskstats(vm_=None, **kwargs)</h3> <dd>
<p>Return disk usage counters used by the vms on this hyper in a list of dicts:</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <pre class="highlight-python notranslate" data-language="python">[
    'your-vm': {
        'rd_req'   : 0,
        'rd_bytes' : 0,
        'wr_req'   : 0,
        'wr_bytes' : 0,
        'errs'     : 0
        },
    ...
    ]</pre> <p>If you pass a VM name in as an argument then it will return info for just the named VM, otherwise it will return all VMs.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.vm_diskstats</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.vm_info"> salt.modules.virt.vm_info(vm_=None, **kwargs)</h3> <dd>
<p>Return detailed information about the vms on this hyper in a list of dicts:</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <pre class="highlight-python notranslate" data-language="python">[
    'your-vm': {
        'cpu': &lt;int&gt;,
        'maxMem': &lt;int&gt;,
        'mem': &lt;int&gt;,
        'state': '&lt;state&gt;',
        'cputime' &lt;int&gt;
        },
    ...
    ]</pre> <p>If you pass a VM name in as an argument then it will return info for just the named VM, otherwise it will return all VMs.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.vm_info</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.vm_netstats"> salt.modules.virt.vm_netstats(vm_=None, **kwargs)</h3> <dd>
<p>Return combined network counters used by the vms on this hyper in a list of dicts:</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- domain name</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <pre class="highlight-python notranslate" data-language="python">[
    'your-vm': {
        'rx_bytes'   : 0,
        'rx_packets' : 0,
        'rx_errs'    : 0,
        'rx_drop'    : 0,
        'tx_bytes'   : 0,
        'tx_packets' : 0,
        'tx_errs'    : 0,
        'tx_drop'    : 0
        },
    ...
    ]</pre> <p>If you pass a VM name in as an argument then it will return info for just the named VM, otherwise it will return all VMs.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.vm_netstats</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.virt.vm_state"> salt.modules.virt.vm_state(vm_=None, **kwargs)</h3> <dd>
<p>Return list of all the vms and their state.</p> <p>If you pass a VM name in as an argument then it will return info for just the named VM, otherwise it will return all VMs.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>vm</strong> -- name of the domain</li> <li>
<strong>connection</strong> -- <p>libvirt connection URI, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>username</strong> -- <p>username to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> <li>
<strong>password</strong> -- <p>password to connect with, overriding defaults</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> </li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' virt.vm_state &lt;domain&gt;</pre> </dd>
</dl> </div> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.virt.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.virt.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
