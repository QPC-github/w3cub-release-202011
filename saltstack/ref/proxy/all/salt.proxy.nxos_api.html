
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>proxy.nxos_api - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Proxy Minion to manage Cisco Nexus Switches (NX-OS) over the NX-API ">
  <meta name="keywords" content="salt, proxy, nxos, api, module, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/proxy/all/salt.proxy.nxos_api.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.proxy.nxos_api module</h1> <p>Proxy Minion to manage Cisco Nexus Switches (NX-OS) over the NX-API</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>Proxy module for managing Cisco Nexus switches via the NX-API.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">codeauthor:</th>
<td class="field-body">Mircea Ulinic &lt;<a class="reference external" href="mailto:ping%40mirceaulinic.net">ping<span>@</span>mirceaulinic<span>.</span>net</a>&gt;</td> </tr> <tr class="field-even field">
<th class="field-name">maturity:</th>
<td class="field-body">new</td> </tr> <tr class="field-odd field">
<th class="field-name">platform:</th>
<td class="field-body">any</td> </tr> </tbody> </table> <div class="section" id="usage"> <h2>Usage</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>To be able to use this module you need to enable to NX-API on your switch, by executing <code class="docutils literal notranslate"><span class="pre">feature</span> <span class="pre">nxapi</span></code> in configuration mode.</p> <p>Configuration example:</p> <pre class="highlight-bash notranslate" data-language="bash">switch# conf t
switch(config)# feature nxapi</pre> <p>To check that NX-API is properly enabled, execute <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">nxapi</span></code>.</p> <p>Output example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>switch# show nxapi
nxapi enabled
HTTPS Listen on port <span class="m">443</span>
</pre></div> </div> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>NX-API requires modern NXOS distributions, typically at least 7.0 depending on the hardware. Due to reliability reasons it is recommended to run the most recent version.</p> <p class="last">Check <a class="reference external" href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus7000/sw/programmability/guide/b_Cisco_Nexus_7000_Series_NX-OS_Programmability_Guide/b_Cisco_Nexus_7000_Series_NX-OS_Programmability_Guide_chapter_0101.html">https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus7000/sw/programmability/guide/b_Cisco_Nexus_7000_Series_NX-OS_Programmability_Guide/b_Cisco_Nexus_7000_Series_NX-OS_Programmability_Guide_chapter_0101.html</a> for more details.</p> </div> <div class="section" id="pillar"> <h3>Pillar</h3> <p>The <code class="docutils literal notranslate"><span class="pre">nxos_api</span></code> proxy configuration requires the following parameters in order to connect to the network switch:</p> <dl class="docutils"> <dt>transport: <code class="docutils literal notranslate"><span class="pre">https</span></code>
</dt> <dd>Specifies the type of connection transport to use. Valid values for the connection are <code class="docutils literal notranslate"><span class="pre">http</span></code>, and <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>host: <code class="docutils literal notranslate"><span class="pre">localhost</span></code>
</dt> <dd>The IP address or DNS host name of the connection device.</dd> <dt>username: <code class="docutils literal notranslate"><span class="pre">admin</span></code>
</dt> <dd>The username to pass to the device to authenticate the NX-API connection.</dd> <dt>password</dt> <dd>The password to pass to the device to authenticate the NX-API connection.</dd> <dt>port</dt> <dd>The TCP port of the endpoint for the NX-API connection. If this keyword is not specified, the default value is automatically determined by the transport type (<code class="docutils literal notranslate"><span class="pre">80</span></code> for <code class="docutils literal notranslate"><span class="pre">http</span></code>, or <code class="docutils literal notranslate"><span class="pre">443</span></code> for <code class="docutils literal notranslate"><span class="pre">https</span></code>).</dd> <dt>timeout: <code class="docutils literal notranslate"><span class="pre">60</span></code>
</dt> <dd>Time in seconds to wait for the device to respond. Default: 60 seconds.</dd> <dt>verify: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt> <dd>
<p class="first">Either a boolean, in which case it controls whether we verify the NX-API TLS certificate, or a string, in which case it must be a path to a CA bundle to use. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p> <p>When there is no certificate configuration on the device and this option is set as <code class="docutils literal notranslate"><span class="pre">True</span></code> (default), the commands will fail with the following error: <code class="docutils literal notranslate"><span class="pre">SSLError:</span> <span class="pre">[SSL:</span> <span class="pre">CERTIFICATE_VERIFY_FAILED]</span> <span class="pre">certificate</span> <span class="pre">verify</span> <span class="pre">failed</span> <span class="pre">(_ssl.c:581)</span></code>. In this case, you either need to configure a proper certificate on the device (<em>recommended</em>), or bypass the checks setting this argument as <code class="docutils literal notranslate"><span class="pre">False</span></code> with all the security risks considered.</p> <p class="last">Check <a class="reference external" href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus3000/sw/programmability/6_x/b_Cisco_Nexus_3000_Series_NX-OS_Programmability_Guide/b_Cisco_Nexus_3000_Series_NX-OS_Programmability_Guide_chapter_01.html">https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus3000/sw/programmability/6_x/b_Cisco_Nexus_3000_Series_NX-OS_Programmability_Guide/b_Cisco_Nexus_3000_Series_NX-OS_Programmability_Guide_chapter_01.html</a> to see how to properly configure the certificate.</p> </dd> </dl> <p>All the arguments may be optional, depending on your setup.</p> </div> <div class="section" id="proxy-pillar-example"> <h3>Proxy Pillar Example</h3> <pre class="highlight-yaml notranslate" data-language="yaml">proxy:
  proxytype: nxos_api
  host: switch1.example.com
  username: example
  password: example</pre> <dl class="function"> <h3 id="salt.proxy.nxos_api.get_conn_args"> salt.proxy.nxos_api.get_conn_args()</h3> <dd>
<p>Returns the connection arguments of the Proxy Minion.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.proxy.nxos_api.init"> salt.proxy.nxos_api.init(opts)</h3> <dd>
<p>Open the connection to the Nexsu switch over the NX-API.</p> <p>As the communication is HTTP based, there is no connection to maintain, however, in order to test the connectivity and make sure we are able to bring up this Minion, we are executing a very simple command (<code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">clock</span></code>) which doesn't come with much overhead and it's sufficient to confirm we are indeed able to connect to the NX-API endpoint as configured.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.proxy.nxos_api.initialized"> salt.proxy.nxos_api.initialized()</h3> <dd>
<p>Connection finished initializing?</p> </dd>
</dl> <dl class="function"> <h3 id="salt.proxy.nxos_api.ping"> salt.proxy.nxos_api.ping()</h3> <dd>
<p>Connection open successfully?</p> </dd>
</dl> <dl class="function"> <h3 id="salt.proxy.nxos_api.rpc"> salt.proxy.nxos_api.rpc(commands, method='cli', **kwargs)</h3> <dd>
<p>Executes an RPC request over the NX-API.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.proxy.nxos_api.shutdown"> salt.proxy.nxos_api.shutdown(opts)</h3> <dd>
<p>Closes connection with the device.</p> </dd>
</dl> </div> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/proxy/all/salt.proxy.nxos_api.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/proxy/all/salt.proxy.nxos_api.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
