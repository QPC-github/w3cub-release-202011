
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>cloud.clouds.nova - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" OpenStack is an open source project that is in use by a number a cloud providers, each of which have their own ways of using it. ">
  <meta name="keywords" content="salt, cloud, clouds, nova, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/clouds/all/salt.cloud.clouds.nova.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.cloud.clouds.nova</h1> <div class="section" id="openstack-nova-cloud-module"> <h2>OpenStack Nova Cloud Module</h2> <p>OpenStack is an open source project that is in use by a number a cloud providers, each of which have their own ways of using it.</p> <p>The OpenStack Nova module for Salt Cloud was bootstrapped from the OpenStack module for Salt Cloud, which uses a libcloud-based connection. The Nova module is designed to use the nova and glance modules already built into Salt.</p> <p>These modules use the Python novaclient and glanceclient libraries, respectively. In order to use this module, the proper salt configuration must also be in place. This can be specified in the master config, the minion config, a set of grains or a set of pillars.</p> <pre class="highlight-yaml notranslate" data-language="yaml">my_openstack_profile:
  keystone.user: admin
  keystone.password: verybadpass
  keystone.tenant: admin
  keystone.auth_url: 'http://127.0.0.1:5000/v2.0/'</pre> <p>Note that there is currently a dependency upon netaddr. This can be installed on Debian-based systems by means of the python-netaddr package.</p> <p>This module currently requires the latest develop branch of Salt to be installed.</p> <p>This module has been tested to work with HP Cloud and Rackspace. See the documentation for specific options for either of these providers. These examples could be set up in the cloud configuration at <code class="docutils literal notranslate"><span class="pre">/etc/salt/cloud.providers</span></code> or <code class="docutils literal notranslate"><span class="pre">/etc/salt/cloud.providers.d/openstack.conf</span></code>:</p> <pre class="highlight-yaml notranslate" data-language="yaml">my-openstack-config:
  # The name of the configuration profile to use on said minion
  config_profile: my_openstack_profile

  ssh_key_name: mykey

  driver: nova
  userdata_file: /tmp/userdata.txt</pre> <p>To use keystoneauth1 instead of keystoneclient, include the <cite>use_keystoneauth</cite> option in the provider config.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">this is required to use keystone v3 as for authentication.</p> </div> <pre class="highlight-yaml notranslate" data-language="yaml">my-openstack-config:
  use_keystoneauth: True
  identity_url: 'https://controller:5000/v3'
  auth_version: 3
  compute_name: nova
  compute_region: RegionOne
  service_type: compute
  verify: '/path/to/custom/certs/ca-bundle.crt'
  tenant: admin
  user: admin
  password: passwordgoeshere
  driver: nova</pre> <p>Note: by default the nova driver will attempt to verify its connection utilizing the system certificates. If you need to verify against another bundle of CA certificates or want to skip verification altogether you will need to specify the verify option. You can specify True or False to verify (or not) against system certificates, a path to a bundle or CA certs to check against, or None to allow keystoneauth to search for the certificates on its own.(defaults to True)</p> <p>For local installations that only use private IP address ranges, the following option may be useful. Using the old syntax:</p> <p>Note: For api use, you will need an auth plugin. The base novaclient does not support apikeys, but some providers such as rackspace have extended keystone to accept them</p> <pre class="highlight-yaml notranslate" data-language="yaml">my-openstack-config:
  # Ignore IP addresses on this network for bootstrap
  ignore_cidr: 192.168.50.0/24

my-nova:
  identity_url: 'https://identity.api.rackspacecloud.com/v2.0/'
  compute_region: IAD
  user: myusername
  password: mypassword
  tenant: &lt;userid&gt;
  driver: nova

my-api:
  identity_url: 'https://identity.api.rackspacecloud.com/v2.0/'
  compute_region: IAD
  user: myusername
  api_key: &lt;api_key&gt;
  os_auth_plugin: rackspace
  tenant: &lt;userid&gt;
  driver: nova
  networks:
    - net-id: 47a38ff2-fe21-4800-8604-42bd1848e743
    - net-id: 00000000-0000-0000-0000-000000000000
    - net-id: 11111111-1111-1111-1111-111111111111</pre> <p>This is an example profile.</p> <pre class="highlight-yaml notranslate" data-language="yaml">debian8-2-iad-cloudqe4:
  provider: cloudqe4-iad
  size: performance1-2
  image: Debian 8 (Jessie) (PVHVM)
  script_args: -UP -p python-zmq git 2015.8</pre> <p>and one using cinder volumes already attached</p> <pre class="highlight-yaml notranslate" data-language="yaml"># create the block storage device
centos7-2-iad-rackspace:
  provider: rackspace-iad
  size: general1-2
  block_device:
    - source: image
      id: &lt;image_id&gt;
      dest: volume
      size: 100
      shutdown: &lt;preserve/remove&gt;
      bootindex: 0

# with the volume already created
centos7-2-iad-rackspace:
  provider: rackspace-iad
  size: general1-2
  boot_volume: &lt;volume id&gt;

# create the volume from a snapshot
centos7-2-iad-rackspace:
  provider: rackspace-iad
  size: general1-2
  snapshot: &lt;cinder snapshot id&gt;

# create the create an extra ephemeral disk
centos7-2-iad-rackspace:
  provider: rackspace-iad
  size: general1-2
  ephemeral:
    - size: 100
      format: &lt;swap/ext4&gt;

# create the create an extra ephemeral disk
centos7-2-iad-rackspace:
  provider: rackspace-iad
  size: general1-2
  swap: &lt;size&gt;</pre> <p>Block Device can also be used for having more than one block storage device attached</p> <pre class="highlight-yaml notranslate" data-language="yaml">centos7-2-iad-rackspace:
  provider: rackspace-iad
  size: general1-2
  block_device:
    - source: image
      id: &lt;image_id&gt;
      dest: volume
      size: 100
      shutdown: &lt;preserve/remove&gt;
      bootindex: 0
    - source: blank
      dest: volume
      device: xvdc
      size: 100
      shutdown: &lt;preserve/remove&gt;</pre> <p>Floating IPs can be auto assigned and ssh_interface can be set to fixed_ips, floating_ips, public_ips or private_ips</p> <pre class="highlight-yaml notranslate" data-language="yaml">centos7-2-iad-rackspace:
  provider: rackspace-iad
  size: general1-2
  ssh_interface: floating_ips
  floating_ip:
    auto_assign: True
    pool: public</pre> <p>Note: You must include the default net-ids when setting networks or the server will be created without the rest of the interfaces</p> <p>Note: For rackconnect v3, rackconnectv3 needs to be specified with the rackconnect v3 cloud network as its variable.</p> <dl class="function"> <h3 id="salt.cloud.clouds.nova.attach_volume"> salt.cloud.clouds.nova.attach_volume(name, server_name, device='/dev/xvdb', **kwargs)</h3> <dd>
<p>Attach block volume</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.avail_images"> salt.cloud.clouds.nova.avail_images()</h3> <dd>
<p>Return a dict of all available VM images on the cloud provider.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.avail_locations"> salt.cloud.clouds.nova.avail_locations(conn=None, call=None)</h3> <dd>
<p>Return a list of locations</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.avail_sizes"> salt.cloud.clouds.nova.avail_sizes()</h3> <dd>
<p>Return a dict of all available VM sizes on the cloud provider.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.cloudnetwork"> salt.cloud.clouds.nova.cloudnetwork(vm_)</h3> <dd>
<p>Determine if we should use an extra network to bootstrap Either 'False' (default) or 'True'.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.create"> salt.cloud.clouds.nova.create(vm_)</h3> <dd>
<p>Create a single VM from a data dict</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.create_attach_volumes"> salt.cloud.clouds.nova.create_attach_volumes(name, call=None, **kwargs)</h3> <dd>
<p>Create and attach volumes to created node</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.create_volume"> salt.cloud.clouds.nova.create_volume(name, size=100, snapshot=None, voltype=None, **kwargs)</h3> <dd>
<p>Create block storage device</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.destroy"> salt.cloud.clouds.nova.destroy(name, conn=None, call=None)</h3> <dd>
<p>Delete a single VM</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.floating_ip_associate"> salt.cloud.clouds.nova.floating_ip_associate(name, kwargs, call=None)</h3> <dd>
<p>Associate a floating IP address to a server</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.floating_ip_create"> salt.cloud.clouds.nova.floating_ip_create(kwargs, call=None)</h3> <dd>
<p>Allocate a floating IP</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.floating_ip_delete"> salt.cloud.clouds.nova.floating_ip_delete(kwargs, call=None)</h3> <dd>
<p>De-allocate floating IP</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.floating_ip_disassociate"> salt.cloud.clouds.nova.floating_ip_disassociate(name, kwargs, call=None)</h3> <dd>
<p>Disassociate a floating IP from a server</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.floating_ip_list"> salt.cloud.clouds.nova.floating_ip_list(call=None)</h3> <dd>
<p>List floating IPs</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.floating_ip_pool_list"> salt.cloud.clouds.nova.floating_ip_pool_list(call=None)</h3> <dd>
<p>List all floating IP pools</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2016.3.0.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.get_block_mapping_opts"> salt.cloud.clouds.nova.get_block_mapping_opts(vm_)</h3> 
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.get_configured_provider"> salt.cloud.clouds.nova.get_configured_provider()</h3> <dd>
<p>Return the first configured instance.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.get_conn"> salt.cloud.clouds.nova.get_conn()</h3> <dd>
<p>Return a conn object for the passed VM data</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.get_dependencies"> salt.cloud.clouds.nova.get_dependencies()</h3> <dd>
<p>Warn if dependencies aren't met.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.get_image"> salt.cloud.clouds.nova.get_image(conn, vm_)</h3> <dd>
<p>Return the image object to use</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.get_size"> salt.cloud.clouds.nova.get_size(conn, vm_)</h3> <dd>
<p>Return the VM's size object</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.ignore_cidr"> salt.cloud.clouds.nova.ignore_cidr(vm_, ip)</h3> <dd>
<p>Return True if we are to ignore the specified IP. Compatible with IPv4.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.list_nodes"> salt.cloud.clouds.nova.list_nodes(call=None, **kwargs)</h3> <dd>
<p>Return a list of the VMs that in this location</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.list_nodes_full"> salt.cloud.clouds.nova.list_nodes_full(call=None, **kwargs)</h3> <dd>
<p>Return a list of the VMs that in this location</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.list_nodes_min"> salt.cloud.clouds.nova.list_nodes_min(call=None, **kwargs)</h3> <dd>
<p>Return a list of the VMs that in this location</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.list_nodes_select"> salt.cloud.clouds.nova.list_nodes_select(call=None)</h3> <dd>
<p>Return a list of the VMs that are on the provider, with select fields</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.managedcloud"> salt.cloud.clouds.nova.managedcloud(vm_)</h3> <dd>
<p>Determine if we should wait for the managed cloud automation before running. Either 'False' (default) or 'True'.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.network_create"> salt.cloud.clouds.nova.network_create(name, **kwargs)</h3> <dd>
<p>Create private networks</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.network_list"> salt.cloud.clouds.nova.network_list(call=None, **kwargs)</h3> <dd>
<p>List private networks</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.preferred_ip"> salt.cloud.clouds.nova.preferred_ip(vm_, ips)</h3> <dd>
<p>Return the preferred Internet protocol. Either 'ipv4' (default) or 'ipv6'.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.rackconnect"> salt.cloud.clouds.nova.rackconnect(vm_)</h3> <dd>
<p>Determine if we should wait for rackconnect automation before running. Either 'False' (default) or 'True'.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.rackconnectv3"> salt.cloud.clouds.nova.rackconnectv3(vm_)</h3> <dd>
<p>Determine if server is using rackconnectv3 or not Return the rackconnect network name or False</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.reboot"> salt.cloud.clouds.nova.reboot(name, conn=None)</h3> <dd>
<p>Reboot a single VM</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.request_instance"> salt.cloud.clouds.nova.request_instance(vm_=None, call=None)</h3> <dd>
<p>Put together all of the information necessary to request an instance through Novaclient and then fire off the request the instance.</p> <p>Returns data about the instance</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.script"> salt.cloud.clouds.nova.script(vm_)</h3> <dd>
<p>Return the script deployment object</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.show_instance"> salt.cloud.clouds.nova.show_instance(name, call=None)</h3> <dd>
<p>Show the details from the provider concerning an instance</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.ssh_interface"> salt.cloud.clouds.nova.ssh_interface(vm_)</h3> <dd>
<p>Return the ssh_interface type to connect to. Either 'public_ips' (default) or 'private_ips'.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.virtual_interface_create"> salt.cloud.clouds.nova.virtual_interface_create(name, net_name, **kwargs)</h3> <dd>
<p>Create private networks</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.virtual_interface_list"> salt.cloud.clouds.nova.virtual_interface_list(name, **kwargs)</h3> <dd>
<p>Create private networks</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.volume_attach"> salt.cloud.clouds.nova.volume_attach(name, server_name, device='/dev/xvdb', **kwargs)</h3> <dd>
<p>Attach block volume</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.volume_create"> salt.cloud.clouds.nova.volume_create(name, size=100, snapshot=None, voltype=None, **kwargs)</h3> <dd>
<p>Create block storage device</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.volume_create_attach"> salt.cloud.clouds.nova.volume_create_attach(name, call=None, **kwargs)</h3> <dd>
<p>Create and attach volumes to created node</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.volume_delete"> salt.cloud.clouds.nova.volume_delete(name, **kwargs)</h3> <dd>
<p>Delete block storage device</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.volume_detach"> salt.cloud.clouds.nova.volume_detach(name, **kwargs)</h3> <dd>
<p>Detach block volume</p> </dd>
</dl> <dl class="function"> <h3 id="salt.cloud.clouds.nova.volume_list"> salt.cloud.clouds.nova.volume_list(**kwargs)</h3> <dd>
<p>List block devices</p> </dd>
</dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/clouds/all/salt.cloud.clouds.nova.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/clouds/all/salt.cloud.clouds.nova.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
