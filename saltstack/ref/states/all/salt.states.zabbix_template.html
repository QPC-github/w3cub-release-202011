
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>states.zabbix_template - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2017.7. ">
  <meta name="keywords" content="salt, states, zabbix, template, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/states/all/salt.states.zabbix_template.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.states.zabbix_template</h1> <div class="versionadded"> <p><span class="versionmodified">New in version 2017.7.</span></p> </div> <p>Management of Zabbix Template object over Zabbix API.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">codeauthor:</th>
<td class="field-body">Jakub Sliva &lt;<a class="reference external" href="mailto:jakub.sliva%40ultimum.io">jakub<span>.</span>sliva<span>@</span>ultimum<span>.</span>io</a>&gt;</td> </tr> </tbody> </table> <dl class="function"> <h3 id="salt.states.zabbix_template.absent"> salt.states.zabbix_template.absent(name, **kwargs)</h3> <dd>
<p>Makes the Zabbix Template to be absent (either does not exist or delete it).</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- Zabbix Template name</li> <li>
<strong>_connection_user</strong> -- Optional - zabbix user (can also be set in opts or pillar, see module's docstring)</li> <li>
<strong>_connection_password</strong> -- Optional - zabbix password (can also be set in opts or pillar, see module's docstring)</li> <li>
<strong>_connection_url</strong> -- Optional - url of zabbix frontend (can also be set in opts, pillar, see module's docstring)</li> </ul> </td> </tr> </tbody> </table> <pre class="highlight-yaml notranslate" data-language="yaml">zabbix-template-absent:
    zabbix_template.absent:
        - name: Ceph OSD</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.zabbix_template.is_present"> salt.states.zabbix_template.is_present(name, **kwargs)</h3> <dd>
<p>Check if Zabbix Template already exists.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- Zabbix Template name</li> <li>
<strong>_connection_user</strong> -- Optional - zabbix user (can also be set in opts or pillar, see module's docstring)</li> <li>
<strong>_connection_password</strong> -- Optional - zabbix password (can also be set in opts or pillar, see module's docstring)</li> <li>
<strong>_connection_url</strong> -- Optional - url of zabbix frontend (can also be set in opts, pillar, see module's docstring)</li> </ul> </td> </tr> </tbody> </table> <pre class="highlight-yaml notranslate" data-language="yaml">does_zabbix-template-exist:
    zabbix_template.is_present:
        - name: Template OS Linux</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.zabbix_template.present"> salt.states.zabbix_template.present(name, params, static_host_list=True, **kwargs)</h3> <dd>
<p>Creates Zabbix Template object or if differs update it according defined parameters. See Zabbix API documentation.</p> <p>Zabbix API version: &gt;3.0</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> -- Zabbix Template name</li> <li>
<strong>params</strong> -- Additional parameters according to Zabbix API documentation</li> <li>
<strong>static_host_list</strong> -- If hosts assigned to the template are controlled only by this state or can be also assigned externally</li> <li>
<strong>_connection_user</strong> -- Optional - zabbix user (can also be set in opts or pillar, see module's docstring)</li> <li>
<strong>_connection_password</strong> -- Optional - zabbix password (can also be set in opts or pillar, see module's docstring)</li> <li>
<strong>_connection_url</strong> -- Optional - url of zabbix frontend (can also be set in opts, pillar, see module's docstring)</li> </ul> </td> </tr> </tbody> </table> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">If there is a need to get a value from current zabbix online (e.g. ids of host groups you want the template to be associated with), put a dictionary with two keys "query_object" and "query_name" instead of the value. In this example we want to create template named "Testing Template", assign it to hostgroup Templates, link it to two ceph nodes and create a macro.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">IMPORTANT NOTE: Objects (except for template name) are identified by name (or by other key in some exceptional cases) so changing name of object means deleting old one and creating new one with new ID !!!</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <dl class="last docutils"> <dt>NOT SUPPORTED FEATURES:</dt> <dd>
<ul class="first last simple"> <li>linked templates</li> <li>trigger dependencies</li> <li>groups and group prototypes for host prototypes</li> </ul> </dd> </dl> </div> <p>SLS Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">zabbix-template-present:
    zabbix_template.present:
        - name: Testing Template
        # Do not touch existing assigned hosts
        # True will detach all other hosts than defined here
        - static_host_list: False
        - params:
            description: Template for Ceph nodes
            groups:
                # groups must already exist
                # template must be at least in one hostgroup
                - groupid:
                    query_object: hostgroup
                    query_name: Templates
            macros:
                - macro: "{$CEPH_CLUSTER_NAME}"
                  value: ceph
            hosts:
                # hosts must already exist
                - hostid:
                    query_object: host
                    query_name: ceph-osd-01
                - hostid:
                    query_object: host
                    query_name: ceph-osd-02
            # templates:
            # Linked templates - not supported by state module but can be linked manually (will not be touched)

            applications:
                - name: Ceph OSD
            items:
                - name: Ceph OSD avg fill item
                  key_: ceph.osd_avg_fill
                  type: 2
                  value_type: 0
                  delay: 60
                  units: '%'
                  description: 'Average fill of OSD'
                  applications:
                      - applicationid:
                          query_object: application
                          query_name: Ceph OSD
            triggers:
                - description: "Ceph OSD filled more that 90%"
                  expression: "{{'{'}}Testing Template:ceph.osd_avg_fill.last(){{'}'}}&gt;90"
                  priority: 4
            discoveries:
                - name: Mounted filesystem discovery
                  key_: vfs.fs.discovery
                  type: 0
                  delay: 60
                  itemprototypes:
                      - name: Free disk space on {{'{#'}}FSNAME}
                        key_: vfs.fs.size[{{'{#'}}FSNAME},free]
                        type: 0
                        value_type: 3
                        delay: 60
                        applications:
                            - applicationid:
                                query_object: application
                                query_name: Ceph OSD
                  triggerprototypes:
                      - description: "Free disk space is less than 20% on volume {{'{#'}}FSNAME{{'}'}}"
                        expression: "{{'{'}}Testing Template:vfs.fs.size[{{'{#'}}FSNAME},free].last(){{'}'}}&lt;20"
            graphs:
                - name: Ceph OSD avg fill graph
                  width: 900
                  height: 200
                  graphtype: 0
                  gitems:
                      - color: F63100
                        itemid:
                          query_object: item
                          query_name: Ceph OSD avg fill item
            screens:
                - name: Ceph
                  hsize: 1
                  vsize: 1
                  screenitems:
                      - x: 0
                        y: 0
                        resourcetype: 0
                        resourceid:
                            query_object: graph
                            query_name: Ceph OSD avg fill graph</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/states/all/salt.states.zabbix_template.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/states/all/salt.states.zabbix_template.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
