
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>states.test - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Provide test case states that enable easy testing of things to do with state calls, e.g. running, calling, logging, output filtering etc. ">
  <meta name="keywords" content="salt, states, test, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/states/all/salt.states.test.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.states.test</h1> <div class="section" id="test-states"> <h2>Test States</h2> <p>Provide test case states that enable easy testing of things to do with state calls, e.g. running, calling, logging, output filtering etc.</p> <pre class="highlight-yaml notranslate" data-language="yaml">always-passes-with-any-kwarg:
  test.nop:
    - name: foo
    - something: else
    - foo: bar

always-passes:
  test.succeed_without_changes:
    - name: foo

always-fails:
  test.fail_without_changes:
    - name: foo

always-changes-and-succeeds:
  test.succeed_with_changes:
    - name: foo

always-changes-and-fails:
  test.fail_with_changes:
    - name: foo

my-custom-combo:
  test.configurable_test_state:
    - name: foo
    - changes: True
    - result: False
    - comment: bar.baz

is-pillar-foo-present-and-bar-is-int:
  test.check_pillar:
    - present:
        - foo
    - integer:
        - bar</pre> <dl class="function"> <h3 id="salt.states.test.check_pillar"> salt.states.test.check_pillar(name, present=None, boolean=None, integer=None, string=None, listing=None, dictionary=None, verbose=False)</h3> <dd>
<p>Checks the presence and, optionally, the type of given keys in Pillar. Supported kwargs for types are: - boolean (bool) - integer (int) - string (str) - listing (list) - dictionary (dict)</p> <p>Checking for None type pillars is not implemented yet.</p> <pre class="highlight-yaml notranslate" data-language="yaml">is-pillar-foo-present-and-bar-is-int:
  test.check_pillar:
    - present:
        - foo
    - integer:
        - bar</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.test.configurable_test_state"> salt.states.test.configurable_test_state(name, changes=True, result=True, comment='')</h3> <dd>
<p>A configurable test state which determines its output based on the inputs.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2014.7.0.</span></p> </div> <dl class="docutils"> <dt>name:</dt> <dd>A unique string.</dd> <dt>changes:</dt> <dd>Do we return anything in the changes field? Accepts True, False, and 'Random' Default is True</dd> <dt>result:</dt> <dd>Do we return successfully or not? Accepts True, False, and 'Random' Default is True If test is True and changes is True, this will be None. If test is True and and changes is False, this will be True.</dd> <dt>comment:</dt> <dd>String to fill the comment field with. Default is ''</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.states.test.fail_with_changes"> salt.states.test.fail_with_changes(name, **kwargs)</h3> <dd>
<p>Returns failure and changes is not empty.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2014.7.0.</span></p> </div> <dl class="docutils"> <dt>name:</dt> <dd>A unique string.</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.states.test.fail_without_changes"> salt.states.test.fail_without_changes(name, **kwargs)</h3> <dd>
<p>Returns failure.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2014.7.0.</span></p> </div> <dl class="docutils"> <dt>name:</dt> <dd>A unique string.</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.states.test.mod_watch"> salt.states.test.mod_watch(name, sfun=None, **kwargs)</h3> <dd>
<p>Call this function via a watch statement</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2014.7.0.</span></p> </div> <p>Any parameters in the state return dictionary can be customized by adding the keywords <code class="docutils literal notranslate"><span class="pre">result</span></code>, <code class="docutils literal notranslate"><span class="pre">comment</span></code>, and <code class="docutils literal notranslate"><span class="pre">changes</span></code>.</p> <pre class="highlight-yaml notranslate" data-language="yaml">this_state_will_return_changes:
  test.succeed_with_changes

this_state_will_NOT_return_changes:
  test.succeed_without_changes

this_state_is_watching_another_state:
  test.succeed_without_changes:
    - comment: 'This is a custom comment'
    - watch:
      - test: this_state_will_return_changes
      - test: this_state_will_NOT_return_changes

this_state_is_also_watching_another_state:
  test.succeed_without_changes:
    - watch:
      - test: this_state_will_NOT_return_changes</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.test.nop"> salt.states.test.nop(name, **kwargs)</h3> <dd>
<p>A no-op state that does nothing. Useful in conjunction with the <cite>use</cite> requisite, or in templates which could otherwise be empty due to jinja rendering</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2015.8.1.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.states.test.show_notification"> salt.states.test.show_notification(name, text=None, **kwargs)</h3> <dd>
<p>Simple notification using text argument.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2015.8.0.</span></p> </div> <dl class="docutils"> <dt>name</dt> <dd>A unique string.</dd> <dt>text</dt> <dd>Text to return in the comment.</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.states.test.succeed_with_changes"> salt.states.test.succeed_with_changes(name, **kwargs)</h3> <dd>
<p>Returns successful and changes is not empty</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2014.7.0.</span></p> </div> <dl class="docutils"> <dt>name:</dt> <dd>A unique string.</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.states.test.succeed_without_changes"> salt.states.test.succeed_without_changes(name, **kwargs)</h3> <dd>
<p>Returns successful.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2014.7.0.</span></p> </div> <dl class="docutils"> <dt>name</dt> <dd>A unique string.</dd> </dl> </dd>
</dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/states/all/salt.states.test.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/states/all/salt.states.test.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
