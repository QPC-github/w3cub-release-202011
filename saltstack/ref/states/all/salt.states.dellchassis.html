
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>states.dellchassis - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Manage chassis via Salt Proxies. ">
  <meta name="keywords" content="salt, states, dellchassis, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/states/all/salt.states.dellchassis.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.states.dellchassis</h1> <p>Manage chassis via Salt Proxies.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2015.8.2.</span></p> </div> <p>Below is an example state that sets basic parameters:</p> <pre class="highlight-yaml notranslate" data-language="yaml">my-dell-chassis:
  dellchassis.chassis:
    - chassis_name: my-dell-chassis
    - datacenter: dc-1-us
    - location: my-location
    - mode: 2
    - idrac_launch: 1
    - slot_names:
      - server-1: my-slot-name
      - server-2: my-other-slot-name
    - blade_power_states:
      - server-1: on
      - server-2: off
      - server-3: powercycle</pre> <p>However, it is possible to place the entire set of chassis configuration data in pillar. Here's an example pillar structure:</p> <pre class="highlight-yaml notranslate" data-language="yaml">proxy:
  host: 10.27.20.18
  admin_username: root
  fallback_admin_username: root
  passwords:
    - super-secret
    - old-secret
  proxytype: fx2

  chassis:
    name: fx2-1
    username: root
    password: saltstack1
    datacenter: london
    location: rack-1-shelf-3
    management_mode: 2
    idrac_launch: 0
    slot_names:
      - 'server-1': blade1
      - 'server-2': blade2

    servers:
      server-1:
        idrac_password: saltstack1
        ipmi_over_lan: True
        ip: 172.17.17.132
        netmask: 255.255.0.0
        gateway: 172.17.17.1
      server-2:
        idrac_password: saltstack1
        ipmi_over_lan: True
        ip: 172.17.17.2
        netmask: 255.255.0.0
        gateway: 172.17.17.1
      server-3:
        idrac_password: saltstack1
        ipmi_over_lan: True
        ip: 172.17.17.20
        netmask: 255.255.0.0
        gateway: 172.17.17.1
      server-4:
        idrac_password: saltstack1
        ipmi_over_lan: True
        ip: 172.17.17.2
        netmask: 255.255.0.0
        gateway: 172.17.17.1

    switches:
      switch-1:
        ip: 192.168.1.2
        netmask: 255.255.255.0
        gateway: 192.168.1.1
        snmp: nonpublic
        password: saltstack1
      switch-2:
        ip: 192.168.1.3
        netmask: 255.255.255.0
        gateway: 192.168.1.1
        snmp: nonpublic
        password: saltstack1</pre> <p>And to go with it, here's an example state that pulls the data from the pillar stated above:</p> <pre class="highlight-jinja notranslate" data-language="jinja">{% set details = pillar.get('proxy:chassis', {}) %}
standup-step1:
  dellchassis.chassis:
    - name: {{ details['name'] }}
    - location: {{ details['location'] }}
    - mode: {{ details['management_mode'] }}
    - idrac_launch: {{ details['idrac_launch'] }}
    - slot_names:
      {% for entry details['slot_names'] %}
        - {{ entry.keys()[0] }}: {{ entry[entry.keys()[0]]  }}
      {% endfor %}

blade_powercycle:
  dellchassis.chassis:
    - blade_power_states:
      - server-1: powercycle
      - server-2: powercycle
      - server-3: powercycle
      - server-4: powercycle

# Set idrac_passwords for blades.  racadm needs them to be called 'server-x'
{% for k, v in details['servers'].iteritems() %}
{{ k }}:
  dellchassis.blade_idrac:
    - idrac_password: {{ v['idrac_password'] }}
{% endfor %}

# Set management ip addresses, passwords, and snmp strings for switches
{% for k, v in details['switches'].iteritems() %}
{{ k }}-switch-setup:
  dellchassis.switch:
    - name: {{ k }}
    - ip: {{ v['ip'] }}
    - netmask: {{ v['netmask'] }}
    - gateway: {{ v['gateway'] }}
    - password: {{ v['password'] }}
    - snmp: {{ v['snmp'] }}
{% endfor %}</pre> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>This state module relies on the dracr.py execution module, which runs racadm commands on the chassis, blades, etc. The racadm command runs very slowly and, depending on your state, the proxy minion return might timeout before the racadm commands have completed. If you are repeatedly seeing minions timeout after state calls, please use the <code class="docutils literal notranslate"><span class="pre">-t</span></code> CLI argument to increase the timeout variable.</p> <p>For example:</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>salt <span class="s1">'*'</span> state.sls my-dell-chasis-state-name -t <span class="m">60</span>
</pre></div> </div> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The Dell CMC units perform adequately but many iDRACs are <strong>excruciatingly</strong> slow. Some functions can take minutes to execute.</p> </div> <dl class="function"> <h3 id="salt.states.dellchassis.blade_idrac"> salt.states.dellchassis.blade_idrac(name, idrac_password=None, idrac_ipmi=None, idrac_ip=None, idrac_netmask=None, idrac_gateway=None, idrac_dnsname=None, idrac_dhcp=None)</h3> <dd>
<p>Set parameters for iDRAC in a blade.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>idrac_password</strong> -- Password to use to connect to the iDRACs directly (idrac_ipmi and idrac_dnsname must be set directly on the iDRAC. They can't be set through the CMC. If this password is present, use it instead of the CMC password)</li> <li>
<strong>idrac_ipmi</strong> -- Enable/Disable IPMI over LAN</li> <li>
<strong>idrac_ip</strong> -- Set IP address for iDRAC</li> <li>
<strong>idrac_netmask</strong> -- Set netmask for iDRAC</li> <li>
<strong>idrac_gateway</strong> -- Set gateway for iDRAC</li> <li>
<strong>idrac_dhcp</strong> -- Turn on DHCP for iDRAC (True turns on, False does nothing becaause setting a static IP will disable DHCP).</li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first last">A standard Salt changes dictionary</p> </td> </tr> </tbody> </table> <p>NOTE: If any of the IP address settings is configured, all of ip, netmask, and gateway must be present</p> </dd>
</dl> <dl class="function"> <h3 id="salt.states.dellchassis.chassis"> salt.states.dellchassis.chassis(name, chassis_name=None, password=None, datacenter=None, location=None, mode=None, idrac_launch=None, slot_names=None, blade_power_states=None)</h3> <dd>
<p>Manage a Dell Chassis.</p> <dl class="docutils"> <dt>chassis_name</dt> <dd>The name of the chassis.</dd> <dt>datacenter</dt> <dd>The datacenter in which the chassis is located</dd> <dt>location</dt> <dd>The location of the chassis.</dd> <dt>password</dt> <dd>Password for the chassis. Note: If this password is set for the chassis, the current implementation of this state will set this password both on the chassis and the iDrac passwords on any configured blades. If the password for the blades should be distinct, they should be set separately with the blade_idrac function.</dd> <dt>mode</dt> <dd>
<p class="first">The management mode of the chassis. Viable options are:</p> <ul class="last simple"> <li>0: None</li> <li>1: Monitor</li> <li>2: Manage and Monitor</li> </ul> </dd> <dt>idrac_launch</dt> <dd>
<p class="first">The iDRAC launch method of the chassis. Viable options are:</p> <ul class="last simple"> <li>0: Disabled (launch iDRAC using IP address)</li> <li>1: Enabled (launch iDRAC using DNS name)</li> </ul> </dd> <dt>slot_names</dt> <dd>The names of the slots, provided as a list identified by their slot numbers.</dd> <dt>blade_power_states</dt> <dd>
<p class="first">The power states of a blade server, provided as a list and identified by their server numbers. Viable options are:</p> <blockquote class="last"> <div>
<ul class="simple"> <li>on: Ensure the blade server is powered on.</li> <li>off: Ensure the blade server is powered off.</li> <li>powercycle: Power cycle the blade server.</li> </ul> </div>
</blockquote> </dd> </dl> <p>Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">my-dell-chassis:
  dellchassis.chassis:
    - chassis_name: my-dell-chassis
    - location: my-location
    - datacenter: london
    - mode: 2
    - idrac_launch: 1
    - slot_names:
      - 1: my-slot-name
      - 2: my-other-slot-name
    - blade_power_states:
      - server-1: on
      - server-2: off
      - server-3: powercycle</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.dellchassis.firmware_update"> salt.states.dellchassis.firmware_update(hosts=None, directory='')</h3> <dd>
<blockquote> <div>
<p>State to update the firmware on host using the <code class="docutils literal notranslate"><span class="pre">racadm</span></code> command</p> <dl class="docutils"> <dt>firmwarefile</dt> <dd>filename (string) starting with <code class="docutils literal notranslate"><span class="pre">salt://</span></code>
</dd> <dt>host</dt> <dd>string representing the hostname supplied to the <code class="docutils literal notranslate"><span class="pre">racadm</span></code> command</dd> <dt>directory</dt> <dd>Directory name where firmwarefile will be downloaded</dd> </dl> </div>
</blockquote> <pre class="highlight-yaml notranslate" data-language="yaml">dell-chassis-firmware-update:
  dellchassis.firmware_update:
    hosts:
      cmc:
        salt://firmware_cmc.exe
      server-1:
        salt://firmware.exe
    directory: /opt/firmwares</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.dellchassis.switch"> salt.states.dellchassis.switch(name, ip=None, netmask=None, gateway=None, dhcp=None, password=None, snmp=None)</h3> <dd>
<p>Manage switches in a Dell Chassis.</p> <dl class="docutils"> <dt>name</dt> <dd>The switch designation (e.g. switch-1, switch-2)</dd> <dt>ip</dt> <dd>The Static IP Address of the switch</dd> <dt>netmask</dt> <dd>The netmask for the static IP</dd> <dt>gateway</dt> <dd>The gateway for the static IP</dd> <dt>dhcp</dt> <dd>True: Enable DHCP False: Do not change DHCP setup (disabling DHCP is automatic when a static IP is set)</dd> <dt>password</dt> <dd>The access (root) password for the switch</dd> <dt>snmp</dt> <dd>The SNMP community string for the switch</dd> </dl> <p>Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">my-dell-chassis:
  dellchassis.switch:
    - switch: switch-1
    - ip: 192.168.1.1
    - netmask: 255.255.255.0
    - gateway: 192.168.1.254
    - dhcp: True
    - password: secret
    - snmp: public</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/states/all/salt.states.dellchassis.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/states/all/salt.states.dellchassis.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
