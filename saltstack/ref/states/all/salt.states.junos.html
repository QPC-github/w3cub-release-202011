
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>states.junos - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="salt, states, junos, module, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/states/all/salt.states.junos.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.states.junos module</h1> <div class="section" id="state-modules-to-interact-with-junos-devices"> <h2>State modules to interact with Junos devices.</h2> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">maturity:</th>
<td class="field-body">new</td> </tr> <tr class="field-even field">
<th class="field-name">dependencies:</th>
<td class="field-body">junos-eznc, jxmlease</td> </tr> </tbody> </table> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Those who wish to use junos-eznc (PyEZ) version &gt;= 2.1.0, must use the latest salt code from github until the next release.</p> </div> <p>Refer to <a class="reference internal" href="../../proxy/all/salt.proxy.junos#module-salt.proxy.junos" title="salt.proxy.junos"><code class="xref py py-mod docutils literal notranslate"><span class="pre">junos</span></code></a> for information on connecting to junos proxy.</p> <dl class="function"> <h3 id="salt.states.junos.cli"> salt.states.junos.cli(name, **kwargs)</h3> <dd>
<p>Executes the CLI commands and reuturns the text output.</p> <pre class="highlight-yaml notranslate" data-language="yaml">show version:
  junos:
    - cli
    - format: xml</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>Required</strong> -- <ul> <li>command: The command that need to be executed on Junos CLI. (default = None)</li> </ul> </li> <li>
<strong>Optional</strong> -- <ul> <li>
<dl class="first docutils"> <dt>kwargs: Keyworded arguments which can be provided like-</dt> <dd>
<ul class="first last"> <li>format: Format in which to get the CLI output. (text or xml, default = 'text')</li> <li>timeout: Set NETCONF RPC timeout. Can be used for commands which take a while to execute. (default = 30 seconds)</li> <li>dest: The destination file where the CLI output can be stored. (default = None)</li> </ul> </dd> </dl> </li> </ul> </li> </ul> </td> </tr> </tbody> </table> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.commit"> salt.states.junos.commit(name, **kwargs)</h3> <dd>
<p>Commits the changes loaded into the candidate configuration.</p> <pre class="highlight-yaml notranslate" data-language="yaml">commit the changes:
  junos:
    - commit
    - confirm: 10</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>Optional</strong> -- <ul class="simple"> <li>
<dl class="first docutils"> <dt>kwargs: Keyworded arguments which can be provided like-</dt> <dd>
<ul class="first last"> <li>timeout: Set NETCONF RPC timeout. Can be used for commands which take a while to execute. (default = 30 seconds)</li> <li>comment: Provide a comment to the commit. (default = None)</li> <li>confirm: Provide time in minutes for commit confirmation. If this option is specified, the commit will be rollbacked in the given time unless the commit is confirmed.</li> <li>sync: On dual control plane systems, requests that the candidate configuration on one control plane be copied to the other control plane,checked for correct syntax, and committed on both Routing Engines. (default = False)</li> <li>force_sync: On dual control plane systems, force the candidate configuration on one control plane to be copied to the other control plane.</li> <li>full: When set to True requires all the daemons to check and evaluate the new configuration.</li> <li>detail: When true return commit detail.</li> </ul> </dd> </dl> </li> </ul> </td> </tr> </tbody> </table> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.commit_check"> salt.states.junos.commit_check(name)</h3> <dd>
<p>Perform a commit check on the configuration.</p> <pre class="highlight-yaml notranslate" data-language="yaml">perform commit check:
  junos.commit_check</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.diff"> salt.states.junos.diff(name, d_id)</h3> <dd>
<p>Gets the difference between the candidate and the current configuration.</p> <pre class="highlight-yaml notranslate" data-language="yaml">get the diff:
  junos:
    - diff
    - id: 10</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>Optional</strong> -- <ul class="simple"> <li>id: The rollback id value [0-49]. (default = 0)</li> </ul> </td> </tr> </tbody> </table> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.file_copy"> salt.states.junos.file_copy(name, dest=None, **kwargs)</h3> <dd>
<p>Copies the file from the local device to the junos device.</p> <pre class="highlight-yaml notranslate" data-language="yaml">/home/m2/info.txt:
  junos:
    - file_copy
    - dest: info_copy.txt</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>Required</strong> -- <ul class="simple"> <li>src: The sorce path where the file is kept.</li> <li>dest: The destination path where the file will be copied.</li> </ul> </td> </tr> </tbody> </table> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.install_config"> salt.states.junos.install_config(name, **kwargs)</h3> <dd>
<p>Loads and commits the configuration provided.</p> <pre class="highlight-yaml notranslate" data-language="yaml">Install the mentioned config:
  junos:
    - install_config
    - path: salt//configs/interface.set
    - timeout: 100
    - diffs_file: 'var/log/diff'</pre> <pre class="highlight-yaml notranslate" data-language="yaml">Install the mentioned config:
  junos:
    - install_config
    - template_path: salt//configs/interface.set
    - timeout: 100
    - template_vars:
        interface_name: lo0
        description: Creating interface via SaltStack.</pre> <dl class="docutils"> <dt>name</dt> <dd>Path where the configuration/template file is present. If the file has a <code class="docutils literal notranslate"><span class="pre">*.conf</span></code> extension, the content is treated as text format. If the file has a <code class="docutils literal notranslate"><span class="pre">*.xml</span></code> extension, the content is treated as XML format. If the file has a <code class="docutils literal notranslate"><span class="pre">*.set</span></code> extension, the content is treated as Junos OS <code class="docutils literal notranslate"><span class="pre">set</span></code> commands</dd> <dt>template_vars</dt> <dd>The dictionary of data for the jinja variables present in the jinja template</dd> <dt>timeout <span class="classifier-delimiter">:</span> <span class="classifier">30</span>
</dt> <dd>Set NETCONF RPC timeout. Can be used for commands which take a while to execute.</dd> <dt>overwrite <span class="classifier-delimiter">:</span> <span class="classifier">False</span>
</dt> <dd>
<dl class="first last docutils"> <dt>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if you want this file is to completely replace the</dt> <dd>configuration file.</dd> </dl> </dd> <dt>replace <span class="classifier-delimiter">:</span> <span class="classifier">False</span>
</dt> <dd>Specify whether the configuration file uses "replace:" statements. Only those statements under the 'replace' tag will be changed.</dd> <dt>comment</dt> <dd>Provide a comment to the commit. (default = None)</dd> <dt>confirm</dt> <dd>Provide time in minutes for commit confirmation. If this option is specified, the commit will be rolled back in the given time unless the commit is confirmed.</dd> <dt>diffs_file</dt> <dd>
<p class="first">Path to the file where the diff (difference in old configuration and the committed configuration) will be stored.</p> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">The file will be stored on the proxy minion. To push the files to the master use <a class="reference internal" href="../../modules/all/salt.modules.cp#salt.modules.cp.push" title="salt.modules.cp.push"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.push</span></code></a>.</p> </div> </dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.install_os"> salt.states.junos.install_os(name, **kwargs)</h3> <dd>
<p>Installs the given image on the device. After the installation is complete the device is rebooted, if reboot=True is given as a keyworded argument.</p> <pre class="highlight-yaml notranslate" data-language="yaml">salt://images/junos_image.tgz:
  junos:
    - install_os
    - timeout: 100
    - reboot: True</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>Required</strong> -- <ul> <li>path: Path where the image file is present on the pro xy minion.</li> </ul> </li> <li>
<strong>Optional</strong> -- <ul> <li>
<dl class="first docutils"> <dt>kwargs: keyworded arguments to be given such as timeout, reboot etc</dt> <dd>
<ul class="first last"> <li>timeout: Set NETCONF RPC timeout. Can be used to RPCs which take a while to execute. (default = 30 seconds)</li> <li>reboot: Whether to reboot after installation (default = False)</li> <li>no_copy: When True the software package will not be SCP’d to the device. (default = False)</li> </ul> </dd> </dl> </li> </ul> </li> </ul> </td> </tr> </tbody> </table> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.load"> salt.states.junos.load(name, **kwargs)</h3> <dd>
<p>Loads the configuration provided onto the junos device.</p> <pre class="highlight-yaml notranslate" data-language="yaml">Install the mentioned config:
  junos:
    - load
    - path: salt//configs/interface.set</pre> <pre class="highlight-yaml notranslate" data-language="yaml">Install the mentioned config:
  junos:
    - load
    - template_path: salt//configs/interface.set
    - template_vars:
        interface_name: lo0
        description: Creating interface via SaltStack.</pre> <dl class="docutils"> <dt>name</dt> <dd>Path where the configuration/template file is present. If the file has a <code class="docutils literal notranslate"><span class="pre">*.conf</span></code> extension, the content is treated as text format. If the file has a <code class="docutils literal notranslate"><span class="pre">*.xml</span></code> extension, the content is treated as XML format. If the file has a <code class="docutils literal notranslate"><span class="pre">*.set</span></code> extension, the content is treated as Junos OS <code class="docutils literal notranslate"><span class="pre">set</span></code> commands.</dd> <dt>overwrite <span class="classifier-delimiter">:</span> <span class="classifier">False</span>
</dt> <dd>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if you want this file is to completely replace the configuration file.</dd> <dt>replace <span class="classifier-delimiter">:</span> <span class="classifier">False</span>
</dt> <dd>Specify whether the configuration file uses "replace:" statements. Only those statements under the 'replace' tag will be changed.</dd> <dt>format:</dt> <dd>Determines the format of the contents.</dd> <dt>update <span class="classifier-delimiter">:</span> <span class="classifier">False</span>
</dt> <dd>Compare a complete loaded configuration against the candidate configuration. For each hierarchy level or configuration object that is different in the two configurations, the version in the loaded configuration replaces the version in the candidate configuration. When the configuration is later committed, only system processes that are affected by the changed configuration elements parse the new configuration. This action is supported from PyEZ 2.1 (default = False)</dd> <dt>template_vars</dt> <dd>Variables to be passed into the template processing engine in addition to those present in __pillar__, __opts__, __grains__, etc. You may reference these variables in your template like so: {{ template_vars["var_name"] }}</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.lock"> salt.states.junos.lock(name)</h3> <dd>
<p>Attempts an exclusive lock on the candidate configuration. This is a non-blocking call.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Any user who wishes to use lock, must necessarily unlock the configuration too. Ensure <a class="reference internal" href="#salt.states.junos.unlock" title="salt.states.junos.unlock"><code class="xref py py-func docutils literal notranslate"><span class="pre">unlock</span></code></a> is called in the same orchestration run in which the lock is called.</p> </div> <pre class="highlight-yaml notranslate" data-language="yaml">lock the config:
  junos.lock</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.rollback"> salt.states.junos.rollback(name, id, **kwargs)</h3> <dd>
<p>Rollbacks the committed changes.</p> <pre class="highlight-yaml notranslate" data-language="yaml">rollback the changes:
  junos:
    - rollback
    - id: 5</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>Optional</strong> -- <ul class="simple"> <li>id: The rollback id value [0-49]. (default = 0)</li> <li>
<dl class="first docutils"> <dt>kwargs: Keyworded arguments which can be provided like-</dt> <dd>
<ul class="first last"> <li>timeout: Set NETCONF RPC timeout. Can be used for commands which take a while to execute. (default = 30 seconds)</li> <li>comment: Provide a comment to the commit. (default = None)</li> <li>confirm: Provide time in minutes for commit confirmation. If this option is specified, the commit will be rollbacked in the given time unless the commit is confirmed.</li> <li>diffs_file: Path to the file where any diffs will be written. (default = None)</li> </ul> </dd> </dl> </li> </ul> </td> </tr> </tbody> </table> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.rpc"> salt.states.junos.rpc(name, dest=None, format='xml', args=None, **kwargs)</h3> <dd>
<p>Executes the given rpc. The returned data can be stored in a file by specifying the destination path with dest as an argument</p> <pre class="highlight-yaml notranslate" data-language="yaml">get-interface-information:
    junos:
      - rpc
      - dest: /home/user/rpc.log
      - interface_name: lo0</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>Required</strong> -- <ul> <li>cmd: The rpc to be executed. (default = None)</li> </ul> </li> <li>
<strong>Optional</strong> -- <ul> <li>dest: Destination file where the rpc output is stored. (default = None) Note that the file will be stored on the proxy minion. To push the files to the master use the salt's following execution module: <a class="reference internal" href="../../modules/all/salt.modules.cp#salt.modules.cp.push" title="salt.modules.cp.push"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.push</span></code></a>
</li> <li>format: The format in which the rpc reply must be stored in file specified in the dest (used only when dest is specified) (default = xml)</li> <li>
<dl class="first docutils"> <dt>kwargs: keyworded arguments taken by rpc call like-</dt> <dd>
<ul class="first last"> <li>timeout: Set NETCONF RPC timeout. Can be used for commands which take a while to execute. (default= 30 seconds)</li> <li>filter: Only to be used with 'get-config' rpc to get specific configuration.</li> <li>terse: Amount of information you want.</li> <li>interface_name: Name of the interface whose information you want.</li> </ul> </dd> </dl> </li> </ul> </li> </ul> </td> </tr> </tbody> </table> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.set_hostname"> salt.states.junos.set_hostname(name, **kwargs)</h3> <dd>
<p>Changes the hostname of the device.</p> <pre class="highlight-yaml notranslate" data-language="yaml">device_name:
  junos:
    - set_hostname
    - comment: "Host-name set via saltstack."</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>Required</strong> -- <ul> <li>hostname: The name to be set. (default = None)</li> </ul> </li> <li>
<strong>Optional</strong> -- <ul> <li>
<dl class="first docutils"> <dt>kwargs: Keyworded arguments which can be provided like-</dt> <dd>
<ul class="first last"> <li>timeout: Set NETCONF RPC timeout. Can be used for commands which take a while to execute. (default = 30 seconds)</li> <li>comment: Provide a comment to the commit. (default = None)</li> <li>confirm: Provide time in minutes for commit confirmation. If this option is specified, the commit will be rollbacked in the given time unless the commit is confirmed.</li> </ul> </dd> </dl> </li> </ul> </li> </ul> </td> </tr> </tbody> </table> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.shutdown"> salt.states.junos.shutdown(name, **kwargs)</h3> <dd>
<p>Shuts down the device.</p> <pre class="highlight-yaml notranslate" data-language="yaml">shut the device:
  junos:
    - shutdown
    - in_min: 10</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>Optional</strong> -- <ul class="simple"> <li>
<dl class="first docutils"> <dt>kwargs:</dt> <dd>
<ul class="first last"> <li>reboot: Whether to reboot instead of shutdown. (default=False)</li> <li>at: Specify time for reboot. (To be used only if reboot=yes)</li> <li>in_min: Specify delay in minutes for shutdown</li> </ul> </dd> </dl> </li> </ul> </td> </tr> </tbody> </table> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.unlock"> salt.states.junos.unlock(name)</h3> <dd>
<p>Unlocks the candidate configuration.</p> <pre class="highlight-yaml notranslate" data-language="yaml">unlock the config:
  junos.unlock</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.junos.zeroize"> salt.states.junos.zeroize(name)</h3> <dd>
<p>Resets the device to default factory settings.</p> <pre class="highlight-yaml notranslate" data-language="yaml">reset my device:
  junos.zeroize</pre> <p>name: can be anything</p> </dd>
</dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/states/all/salt.states.junos.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/states/all/salt.states.junos.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
