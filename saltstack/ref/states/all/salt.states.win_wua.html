
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>states.win_wua - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Installation of Windows Updates using the Windows Update Agent ">
  <meta name="keywords" content="salt, states, win, wua, module, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/states/all/salt.states.win_wua.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.states.win_wua module</h1> <p>Installation of Windows Updates using the Windows Update Agent</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2017.7.0.</span></p> </div> <p>Salt can manage Windows updates via the "wua" state module. Updates can be installed and removed. Update management declarations are as follows:</p> <p>For installation:</p> <pre class="highlight-yaml notranslate" data-language="yaml"># Install a single update using the KB
KB3194343:
  wua.installed

# Install a single update using the name parameter
install_update:
  wua.installed:
    - name: KB3194343

# Install multiple updates using the updates parameter and a combination of
# KB number and GUID
install_updates:
  wua.installed:
   - updates:
     - KB3194343
     - bb1dbb26-3fb6-45fd-bb05-e3c8e379195c</pre> <p>For removal:</p> <pre class="highlight-yaml notranslate" data-language="yaml"># Remove a single update using the KB
KB3194343:
  wua.removed

# Remove a single update using the name parameter
remove_update:
  wua.removed:
    - name: KB3194343

# Remove multiple updates using the updates parameter and a combination of
# KB number and GUID
remove_updates:
  wua.removed:
   - updates:
     - KB3194343
     - bb1dbb26-3fb6-45fd-bb05-e3c8e379195c</pre> <dl class="function"> <h3 id="salt.states.win_wua.installed"> salt.states.win_wua.installed(name, updates=None)</h3> <dd>
<p>Ensure Microsoft Updates are installed. Updates will be downloaded if needed.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- The identifier of a single update to install.</li> <li>
<strong>updates</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) -- A list of identifiers for updates to be installed. Overrides <code class="docutils literal notranslate"><span class="pre">name</span></code>. Default is None.</li> </ul> </td> </tr> </tbody> </table> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Identifiers can be the GUID, the KB number, or any part of the Title of the Microsoft update. GUIDs and KBs are the preferred method to ensure you're installing the correct update.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">Using a partial KB number or a partial Title could result in more than one update being installed.</p> </div> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">A dictionary containing the results of the update</td> </tr> <tr class="field-even field">
<th class="field-name">Return type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml"># using a GUID
install_update:
  wua.installed:
    - name: 28cf1b09-2b1a-458c-9bd1-971d1b26b211

# using a KB
install_update:
  wua.installed:
    - name: KB3194343

# using the full Title
install_update:
  wua.installed:
    - name: Security Update for Adobe Flash Player for Windows 10 Version 1607 (for x64-based Systems) (KB3194343)

# Install multiple updates
install_updates:
  wua.installed:
    - updates:
      - KB3194343
      - 28cf1b09-2b1a-458c-9bd1-971d1b26b211</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.win_wua.removed"> salt.states.win_wua.removed(name, updates=None)</h3> <dd>
<p>Ensure Microsoft Updates are uninstalled.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- The identifier of a single update to uninstall.</li> <li>
<strong>updates</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) -- A list of identifiers for updates to be removed. Overrides <code class="docutils literal notranslate"><span class="pre">name</span></code>. Default is None.</li> </ul> </td> </tr> </tbody> </table> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Identifiers can be the GUID, the KB number, or any part of the Title of the Microsoft update. GUIDs and KBs are the preferred method to ensure you're uninstalling the correct update.</p> </div> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">Using a partial KB number or a partial Title could result in more than one update being removed.</p> </div> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">A dictionary containing the results of the removal</td> </tr> <tr class="field-even field">
<th class="field-name">Return type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml"># using a GUID
uninstall_update:
  wua.removed:
    - name: 28cf1b09-2b1a-458c-9bd1-971d1b26b211

# using a KB
uninstall_update:
  wua.removed:
    - name: KB3194343

# using the full Title
uninstall_update:
  wua.removed:
    - name: Security Update for Adobe Flash Player for Windows 10 Version 1607 (for x64-based Systems) (KB3194343)

# Install multiple updates
uninstall_updates:
  wua.removed:
    - updates:
      - KB3194343
      - 28cf1b09-2b1a-458c-9bd1-971d1b26b211</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.states.win_wua.uptodate"> salt.states.win_wua.uptodate(name, software=True, drivers=False, skip_hidden=False, skip_mandatory=False, skip_reboot=True, categories=None, severities=None)</h3> <dd>
<p>Ensure Microsoft Updates that match the passed criteria are installed. Updates will be downloaded if needed.</p> <p>This state allows you to update a system without specifying a specific update to apply. All matching updates will be installed.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- The name has no functional value and is only used as a tracking reference</li> <li>
<strong>software</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- Include software updates in the results (default is True)</li> <li>
<strong>drivers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- Include driver updates in the results (default is False)</li> <li>
<strong>skip_hidden</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- Skip updates that have been hidden. Default is False.</li> <li>
<strong>skip_mandatory</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- Skip mandatory updates. Default is False.</li> <li>
<strong>skip_reboot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- Skip updates that require a reboot. Default is True.</li> <li>
<strong>categories</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) -- <p>Specify the categories to list. Must be passed as a list. All categories returned by default.</p> <p>Categories include the following:</p> <ul> <li>Critical Updates</li> <li>Definition Updates</li> <li>Drivers (make sure you set drivers=True)</li> <li>Feature Packs</li> <li>Security Updates</li> <li>Update Rollups</li> <li>Updates</li> <li>Update Rollups</li> <li>Windows 7</li> <li>Windows 8.1</li> <li>Windows 8.1 drivers</li> <li>Windows 8.1 and later drivers</li> <li>Windows Defender</li> </ul> </li> <li>
<strong>severities</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) -- <p>Specify the severities to include. Must be passed as a list. All severities returned by default.</p> <p>Severities include the following:</p> <ul> <li>Critical</li> <li>Important</li> </ul> </li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">A dictionary containing the results of the update</p> </td> </tr> <tr class="field-odd field">
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></p> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml"># Update the system using the state defaults
update_system:
  wua.uptodate

# Update the drivers
update_drivers:
  wua.uptodate:
    - software: False
    - drivers: True
    - skip_reboot: False

# Apply all critical updates
update_critical:
  wua.uptodate:
    - severities:
      - Critical</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/states/all/salt.states.win_wua.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/states/all/salt.states.win_wua.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
