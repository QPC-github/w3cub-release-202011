
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>states.probes - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Configure RPM (JunOS)&#47;SLA (Cisco) probes on the device via NAPALM proxy. ">
  <meta name="keywords" content="salt, states, probes, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/states/all/salt.states.probes.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.states.probes</h1> <div class="section" id="network-probes"> <h2>Network Probes</h2> <p>Configure RPM (JunOS)/SLA (Cisco) probes on the device via NAPALM proxy.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">codeauthor:</th>
<td class="field-body">Mircea Ulinic &lt;<a class="reference external" href="mailto:mircea%40cloudflare.com">mircea<span>@</span>cloudflare<span>.</span>com</a>&gt; &amp; Jerome Fleury &lt;<a class="reference external" href="mailto:jf%40cloudflare.com">jf<span>@</span>cloudflare<span>.</span>com</a>&gt;</td> </tr> <tr class="field-even field">
<th class="field-name">maturity:</th>
<td class="field-body">new</td> </tr> <tr class="field-odd field">
<th class="field-name">depends:</th>
<td class="field-body">napalm</td> </tr> <tr class="field-even field">
<th class="field-name">platform:</th>
<td class="field-body">unix</td> </tr> </tbody> </table> <div class="section" id="dependencies"> <h3>Dependencies</h3> <ul class="simple"> <li><a class="reference internal" href="../../modules/all/salt.modules.napalm_probes#module-salt.modules.napalm_probes" title="salt.modules.napalm_probes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">napalm</span> <span class="pre">probes</span> <span class="pre">management</span> <span class="pre">module</span></code></a></li> </ul> <dl class="function"> <h3 id="salt.states.probes.managed"> salt.states.probes.managed(name, probes, defaults=None)</h3> <dd>
<p>Ensure the networks device is configured as specified in the state SLS file. Probes not specified will be removed, while probes not confiured as expected will trigger config updates.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>probes</strong> -- Defines the probes as expected to be configured on the device. In order to ease the configuration and avoid repeating the same parameters for each probe, the next parameter (defaults) can be used, providing common characteristics.</li> <li>
<strong>defaults</strong> -- Specifies common parameters for the probes.</li> </ul> </td> </tr> </tbody> </table> <p>SLS Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">rpmprobes:
    probes.managed:
        - probes:
            probe_name1:
                probe1_test1:
                    source: 192.168.0.2
                    target: 192.168.0.1
                probe1_test2:
                    target: 172.17.17.1
                probe1_test3:
                    target: 8.8.8.8
                    probe_type: http-ping
            probe_name2:
                probe2_test1:
                    test_interval: 100
        - defaults:
            target: 10.10.10.10
            probe_count: 15
            test_interval: 3
            probe_type: icmp-ping</pre> <p>In the probes configuration, the only mandatory attribute is <em>target</em> (specified either in probes configuration, either in the defaults dictionary). All the other parameters will use the operating system defaults, if not provided:</p> <ul class="simple"> <li>
<code class="docutils literal notranslate"><span class="pre">source</span></code> - Specifies the source IP Address to be used during the tests. If not specified will use the IP Address of the logical interface loopback0.</li> <li>
<code class="docutils literal notranslate"><span class="pre">target</span></code> - Destination IP Address.</li> <li>
<code class="docutils literal notranslate"><span class="pre">probe_count</span></code> - Total number of probes per test (1..15). System defaults: 1 on both JunOS &amp; Cisco.</li> <li>
<code class="docutils literal notranslate"><span class="pre">probe_interval</span></code> - Delay between tests (0..86400 seconds). System defaults: 3 on JunOS, 5 on Cisco.</li> <li>
<code class="docutils literal notranslate"><span class="pre">probe_type</span></code> - Probe request type. Available options:<ul> <li>icmp-ping</li> <li>tcp-ping</li> <li>udp-ping</li> </ul> </li> </ul> <p>Using the example configuration above, after running the state, on the device will be configured 4 probes, with the following properties:</p> <pre class="highlight-yaml notranslate" data-language="yaml">probe_name1:
    probe1_test1:
        source: 192.168.0.2
        target: 192.168.0.1
        probe_count: 15
        test_interval: 3
        probe_type: icmp-ping
    probe1_test2:
        target: 172.17.17.1
        probe_count: 15
        test_interval: 3
        probe_type: icmp-ping
    probe1_test3:
        target: 8.8.8.8
        probe_count: 15
        test_interval: 3
        probe_type: http-ping
probe_name2:
    probe2_test1:
        target: 10.10.10.10
        probe_count: 15
        test_interval: 3
        probe_type: icmp-ping</pre> </dd>
</dl> </div> </div>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/states/all/salt.states.probes.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/states/all/salt.states.probes.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
