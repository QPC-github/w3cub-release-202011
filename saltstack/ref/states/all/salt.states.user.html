
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>states.user - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" The user module is used to create and manage user settings, users can be set as either absent or present ">
  <meta name="keywords" content="salt, states, user, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/states/all/salt.states.user.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.states.user</h1> <div class="section" id="management-of-user-accounts"> <h2>Management of user accounts</h2> <p>The user module is used to create and manage user settings, users can be set as either absent or present</p> <pre class="highlight-yaml notranslate" data-language="yaml">fred:
  user.present:
    - fullname: Fred Jones
    - shell: /bin/zsh
    - home: /home/fred
    - uid: 4000
    - gid: 4000
    - groups:
      - wheel
      - storage
      - games

testuser:
  user.absent</pre> <dl class="function"> <h3 id="salt.states.user.absent"> salt.states.user.absent(name, purge=False, force=False)</h3> <dd>
<p>Ensure that the named user is absent</p> <dl class="docutils"> <dt>name</dt> <dd>The name of the user to remove</dd> <dt>purge</dt> <dd>Set purge to True to delete all of the user's files as well as the user, Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</dd> <dt>force</dt> <dd>If the user is logged in, the absent state will fail. Set the force option to True to remove the user even if they are logged in. Not supported in FreeBSD and Solaris, Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.states.user.present"> salt.states.user.present(name, uid=None, gid=None, gid_from_name=False, groups=None, optional_groups=None, remove_groups=True, home=None, createhome=True, password=None, hash_password=False, enforce_password=True, empty_password=False, shell=None, unique=True, system=False, fullname=None, roomnumber=None, workphone=None, homephone=None, other=None, loginclass=None, date=None, mindays=None, maxdays=None, inactdays=None, warndays=None, expire=None, win_homedrive=None, win_profile=None, win_logonscript=None, win_description=None, nologinit=False, allow_uid_change=False, allow_gid_change=False)</h3> <dd>
<p>Ensure that the named user is present with the specified properties</p> <dl class="docutils"> <dt>name</dt> <dd>The name of the user to manage</dd> <dt>uid</dt> <dd>The user id to assign. If not specified, and the user does not exist, then the next available uid will be assigned.</dd> <dt>gid</dt> <dd>The id of the default group to assign to the user. Either a group name or gid can be used. If not specified, and the user does not exist, then he next available gid will be assigned.</dd> <dt>gid_from_name <span class="classifier-delimiter">:</span> <span class="classifier">False</span>
</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the default group id will be set to the id of the group with the same name as the user. If the group does not exist the state will fail.</dd> <dt>allow_uid_change <span class="classifier-delimiter">:</span> <span class="classifier">False</span>
</dt> <dd>
<p class="first">Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to allow the state to update the uid.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.1.</span></p> </div> </dd> <dt>allow_gid_change <span class="classifier-delimiter">:</span> <span class="classifier">False</span>
</dt> <dd>
<p class="first">Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to allow the state to update the gid.</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2018.3.1.</span></p> </div> </dd> <dt>groups</dt> <dd>A list of groups to assign the user to, pass a list object. If a group specified here does not exist on the minion, the state will fail. If set to the empty list, the user will be removed from all groups except the default group. If unset, salt will assume current groups are still wanted (see issue #28706).</dd> <dt>optional_groups</dt> <dd>A list of groups to assign the user to, pass a list object. If a group specified here does not exist on the minion, the state will silently ignore it.</dd> </dl> <p>NOTE: If the same group is specified in both "groups" and "optional_groups", then it will be assumed to be required and not optional.</p> <dl class="docutils"> <dt>remove_groups</dt> <dd>Remove groups that the user is a member of that weren't specified in the state, Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> <dt>home</dt> <dd>The custom login directory of user. Uses default value of underlying system if not set. Notice that this directory does not have to exist. This also the location of the home directory to create if createhome is set to True.</dd> <dt>createhome <span class="classifier-delimiter">:</span> <span class="classifier">True</span>
</dt> <dd>
<p class="first">If set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the home directory will not be created if it doesn't already exist.</p> <div class="last admonition warning"> <p class="first admonition-title">Warning</p> <p>Not supported on Windows or Mac OS.</p> <p class="last">Additionally, parent directories will <em>not</em> be created. The parent directory for <code class="docutils literal notranslate"><span class="pre">home</span></code> must already exist.</p> </div> </dd> <dt>nologinit <span class="classifier-delimiter">:</span> <span class="classifier">False</span>
</dt> <dd>
<p class="first">If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, it will not add the user to lastlog and faillog databases.</p> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">Not supported on Windows or Mac OS.</p> </div> </dd> <dt>password</dt> <dd>A password hash to set for the user. This field is only supported on Linux, FreeBSD, NetBSD, OpenBSD, and Solaris. If the <code class="docutils literal notranslate"><span class="pre">empty_password</span></code> argument is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> then <code class="docutils literal notranslate"><span class="pre">password</span></code> is ignored. For Windows this is the plain text password. For Linux, the hash can be generated with <code class="docutils literal notranslate"><span class="pre">openssl</span> <span class="pre">passwd</span> <span class="pre">-1</span></code>.</dd> </dl> <div class="versionchanged"> <p><span class="versionmodified">Changed in version 0.16.0: </span>BSD support added.</p> </div> <dl class="docutils"> <dt>hash_password</dt> <dd>Set to True to hash the clear text password. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</dd> <dt>enforce_password</dt> <dd>Set to False to keep the password from being changed if it has already been set and the password hash differs from what is specified in the "password" field. This option will be ignored if "password" is not specified, Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> <dt>empty_password</dt> <dd>Set to True to enable password-less login for user, Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</dd> <dt>shell</dt> <dd>The login shell, defaults to the system default shell</dd> <dt>unique</dt> <dd>Require a unique UID, Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> <dt>system</dt> <dd>Choose UID in the range of FIRST_SYSTEM_UID and LAST_SYSTEM_UID, Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</dd> <dt>loginclass</dt> <dd>The login class, defaults to empty (BSD only)</dd> </dl> <p>User comment field (GECOS) support (currently Linux, BSD, and MacOS only):</p> <p>The below values should be specified as strings to avoid ambiguities when the values are loaded. (Especially the phone and room number fields which are likely to contain numeric data)</p> <dl class="docutils"> <dt>fullname</dt> <dd>The user's full name</dd> <dt>roomnumber</dt> <dd>The user's room number (not supported in MacOS)</dd> <dt>workphone</dt> <dd>The user's work phone number (not supported in MacOS)</dd> <dt>homephone</dt> <dd>The user's home phone number (not supported in MacOS)</dd> <dt>other</dt> <dd>The user's other attribute (not supported in MacOS) If GECOS field contains more than 4 commas, this field will have the rest of 'em</dd> </dl> <div class="versionchanged"> <p><span class="versionmodified">Changed in version 2014.7.0: </span>Shadow attribute support added.</p> </div> <p>Shadow attributes support (currently Linux only):</p> <p>The below values should be specified as integers.</p> <dl class="docutils"> <dt>date</dt> <dd>Date of last change of password, represented in days since epoch (January 1, 1970).</dd> <dt>mindays</dt> <dd>The minimum number of days between password changes.</dd> <dt>maxdays</dt> <dd>The maximum number of days between password changes.</dd> <dt>inactdays</dt> <dd>The number of days after a password expires before an account is locked.</dd> <dt>warndays</dt> <dd>Number of days prior to maxdays to warn users.</dd> <dt>expire</dt> <dd>Date that account expires, represented in days since epoch (January 1, 1970).</dd> </dl> <p>The below parameters apply to windows only:</p> <dl class="docutils"> <dt>win_homedrive (Windows Only)</dt> <dd>
<p class="first">The drive letter to use for the home directory. If not specified the home directory will be a unc path. Otherwise the home directory will be mapped to the specified drive. Must be a letter followed by a colon. Because of the colon, the value must be surrounded by single quotes. ie: - win_homedrive: 'U:</p> <div class="last versionchanged"> <p><span class="versionmodified">Changed in version 2015.8.0.</span></p> </div> </dd> <dt>win_profile (Windows Only)</dt> <dd>
<p class="first">The custom profile directory of the user. Uses default value of underlying system if not set.</p> <div class="last versionchanged"> <p><span class="versionmodified">Changed in version 2015.8.0.</span></p> </div> </dd> <dt>win_logonscript (Windows Only)</dt> <dd>
<p class="first">The full path to the logon script to run when the user logs in.</p> <div class="last versionchanged"> <p><span class="versionmodified">Changed in version 2015.8.0.</span></p> </div> </dd> <dt>win_description (Windows Only)</dt> <dd>
<p class="first">A brief description of the purpose of the users account.</p> <div class="last versionchanged"> <p><span class="versionmodified">Changed in version 2015.8.0.</span></p> </div> </dd> </dl> </dd>
</dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/states/all/salt.states.user.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/states/all/salt.states.user.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
