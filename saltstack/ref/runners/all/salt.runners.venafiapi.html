
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>runners.venafiapi - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Support for Venafi ">
  <meta name="keywords" content="salt, runners, venafiapi, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/runners/all/salt.runners.venafiapi.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.runners.venafiapi</h1> <p>Support for Venafi</p> <p>Before using this module you need to register an account with Venafi, and configure it in your <code class="docutils literal notranslate"><span class="pre">master</span></code> configuration file.</p> <p>First, you need to add a placeholder to the <code class="docutils literal notranslate"><span class="pre">master</span></code> file. This is because the module will not load unless it finds an <code class="docutils literal notranslate"><span class="pre">api_key</span></code> setting, valid or not. Open up <code class="docutils literal notranslate"><span class="pre">/etc/salt/master</span></code> and add:</p> <pre class="highlight-yaml notranslate" data-language="yaml">venafi:
  api_key: None</pre> <p>Then register your email address with Venafi using the following command:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.register &lt;youremail@yourdomain.com&gt;</pre> <p>This command will not return an <code class="docutils literal notranslate"><span class="pre">api_key</span></code> to you; that will be sent to you via email from Venafi. Once you have received that key, open up your <code class="docutils literal notranslate"><span class="pre">master</span></code> file and set the <code class="docutils literal notranslate"><span class="pre">api_key</span></code> to it:</p> <pre class="highlight-yaml notranslate" data-language="yaml">venafi:
  api_key: abcdef01-2345-6789-abcd-ef0123456789</pre> <dl class="function"> <h3 id="salt.runners.venafiapi.del_cached_domain"> salt.runners.venafiapi.del_cached_domain(domains)</h3> <dd>
<p>Delete cached domains from the master</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.del_cached_domain domain1.example.com,domain2.example.com</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.gen_csr"> salt.runners.venafiapi.gen_csr(minion_id, dns_name, zone='default', country=None, state=None, loc=None, org=None, org_unit=None, password=None)</h3> <dd>
<p>Generate a csr using the host's private_key. Analogous to:</p> <pre class="highlight-bash notranslate" data-language="bash">VCert gencsr -cn [CN Value] -o "Beta Organization" -ou "Beta Group"             -l "Palo Alto" -st "California" -c US</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.gen_csr &lt;minion_id&gt; &lt;dns_name&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.gen_key"> salt.runners.venafiapi.gen_key(minion_id, dns_name=None, zone='default', password=None)</h3> <dd>
<p>Generate and return an private_key. If a <code class="docutils literal notranslate"><span class="pre">dns_name</span></code> is passed in, the private_key will be cached under that name. The type of key and the parameters used to generate the key are based on the default certificate use policy associated with the specified zone.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.gen_key &lt;minion_id&gt; [dns_name] [zone] [password]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.get_zone_id"> salt.runners.venafiapi.get_zone_id(zone_name)</h3> <dd>
<p>Get the zone ID for the given zone name</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.get_zone_id default</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.list_domain_cache"> salt.runners.venafiapi.list_domain_cache()</h3> <dd>
<p>List domains that have been cached</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.list_domain_cache</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.pickup"> salt.runners.venafiapi.pickup(id_)</h3> <dd>
<p>Show certificate requests for this API key</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.show_cert 01234567-89ab-cdef-0123-456789abcdef</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.register"> salt.runners.venafiapi.register(email)</h3> <dd>
<p>Register a new user account</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.register email@example.com</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.renew"> salt.runners.venafiapi.renew(minion_id, dns_name=None, zone='default', request_id=None, country='US', state='California', loc='Palo Alto', org='Beta Organization', org_unit='Beta Group', password=None, zone_id=None)</h3> <dd>
<p>Request a new certificate</p> <p>Uses the following command:</p> <pre class="highlight-bash notranslate" data-language="bash">VCert enroll -z &lt;zone&gt; -k &lt;api key&gt; -cn &lt;domain name&gt;</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.request &lt;minion_id&gt; &lt;dns_name&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.request"> salt.runners.venafiapi.request(minion_id, dns_name=None, zone='default', request_id=None, country='US', state='California', loc='Palo Alto', org='Beta Organization', org_unit='Beta Group', password=None, zone_id=None)</h3> <dd>
<p>Request a new certificate</p> <p>Uses the following command:</p> <pre class="highlight-bash notranslate" data-language="bash">VCert enroll -z &lt;zone&gt; -k &lt;api key&gt; -cn &lt;domain name&gt;</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.request &lt;minion_id&gt; &lt;dns_name&gt;</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.show_cert"> salt.runners.venafiapi.show_cert(id_)</h3> <dd>
<p>Show certificate requests for this API key</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.show_cert 01234567-89ab-cdef-0123-456789abcdef</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.show_company"> salt.runners.venafiapi.show_company(domain)</h3> <dd>
<p>Show company information, especially the company id</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.show_company example.com</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.show_csrs"> salt.runners.venafiapi.show_csrs()</h3> <dd>
<p>Show certificate requests for this API key</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.show_csrs</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.show_policies"> salt.runners.venafiapi.show_policies()</h3> <dd>
<p>Show zone details for the API key owner's company</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.show_zones</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.show_rsa"> salt.runners.venafiapi.show_rsa(minion_id, dns_name)</h3> <dd>
<p>Show a private RSA key</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.show_rsa myminion domain.example.com</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.runners.venafiapi.show_zones"> salt.runners.venafiapi.show_zones()</h3> <dd>
<p>Show zone details for the API key owner's company</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run venafi.show_zones</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/runners/all/salt.runners.venafiapi.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/runners/all/salt.runners.venafiapi.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
