
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>returners.elasticsearch_return - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Return data to an elasticsearch server for indexing. ">
  <meta name="keywords" content="salt, returners, elasticsearch, return, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/returners/all/salt.returners.elasticsearch_return.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.returners.elasticsearch_return</h1> <p>Return data to an elasticsearch server for indexing.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">maintainer:</th>
<td class="field-body">Jurnell Cockhren &lt;<a class="reference external" href="mailto:jurnell.cockhren%40sophicware.com">jurnell<span>.</span>cockhren<span>@</span>sophicware<span>.</span>com</a>&gt;, Arnold Bechtoldt &lt;<a class="reference external" href="mailto:mail%40arnoldbechtoldt.com">mail<span>@</span>arnoldbechtoldt<span>.</span>com</a>&gt;</td> </tr> <tr class="field-even field">
<th class="field-name">maturity:</th>
<td class="field-body">New</td> </tr> <tr class="field-odd field">
<th class="field-name">depends:</th>
<td class="field-body"><a class="reference external" href="https://elasticsearch-py.readthedocs.io/en/latest/">elasticsearch-py</a></td> </tr> <tr class="field-even field">
<th class="field-name">platform:</th>
<td class="field-body">all</td> </tr> </tbody> </table> <p>To enable this returner the elasticsearch python client must be installed on the desired minions (all or some subset).</p> <p>Please see documentation of <a class="reference internal" href="../../modules/all/salt.modules.elasticsearch#module-salt.modules.elasticsearch" title="salt.modules.elasticsearch"><code class="xref py py-mod docutils literal notranslate"><span class="pre">elasticsearch</span> <span class="pre">execution</span> <span class="pre">module</span></code></a> for a valid connection configuration.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">The index that you wish to store documents will be created by Elasticsearch automatically if doesn't exist yet. It is highly recommended to create predefined index templates with appropriate mapping(s) that will be used by Elasticsearch upon index creation. Otherwise you will have problems as described in #20826.</p> </div> <p>To use the returner per salt call:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' test.ping --return elasticsearch</pre> <p>In order to have the returner apply to all minions:</p> <pre class="highlight-yaml notranslate" data-language="yaml">ext_job_cache: elasticsearch</pre> <dl class="docutils"> <dt>Minion configuration:</dt> <dd>
<dl class="first docutils"> <dt>debug_returner_payload': False</dt> <dd>Output the payload being posted to the log file in debug mode</dd> <dt>doc_type: 'default'</dt> <dd>Document type to use for normal return messages</dd> <dt>functions_blacklist</dt> <dd>Optional list of functions that should not be returned to elasticsearch</dd> <dt>index_date: False</dt> <dd>Use a dated index (e.g. &lt;index&gt;-2016.11.29)</dd> <dt>master_event_index: 'salt-master-event-cache'</dt> <dd>Index to use when returning master events</dd> <dt>master_event_doc_type: 'efault'</dt> <dd>Document type to use got master events</dd> <dt>master_job_cache_index: 'salt-master-job-cache'</dt> <dd>Index to use for master job cache</dd> <dt>master_job_cache_doc_type: 'default'</dt> <dd>Document type to use for master job cache</dd> <dt>number_of_shards: 1</dt> <dd>Number of shards to use for the indexes</dd> <dt>number_of_replicas: 0</dt> <dd>Number of replicas to use for the indexes</dd> </dl> <p>NOTE: The following options are valid for 'state.apply', 'state.sls' and 'state.highstate' functions only.</p> <dl class="last docutils"> <dt>states_count: False</dt> <dd>Count the number of states which succeeded or failed and return it in top-level item called 'counts'. States reporting None (i.e. changes would be made but it ran in test mode) are counted as successes.</dd> <dt>states_order_output: False</dt> <dd>Prefix the state UID (e.g. file_|-yum_configured_|-/etc/yum.conf_|-managed) with a zero-padded version of the '__run_num__' value to allow for easier sorting. Also store the state function (i.e. file.managed) into a new key '_func'. Change the index to be '&lt;index&gt;-ordered' (e.g. salt-state_apply-ordered).</dd> <dt>states_single_index: False</dt> <dd>Store results for state.apply, state.sls and state.highstate in the salt-state_apply index (or -ordered/-&lt;date&gt;) indexes if enabled</dd> </dl> </dd> </dl> <pre class="highlight-yaml notranslate" data-language="yaml">elasticsearch:
    hosts:
      - "10.10.10.10:9200"
      - "10.10.10.11:9200"
      - "10.10.10.12:9200"
    index_date: True
    number_of_shards: 5
    number_of_replicas: 1
    debug_returner_payload: True
    states_count: True
    states_order_output: True
    states_single_index: True
    functions_blacklist:
      - test.ping
      - saltutil.find_job</pre> <dl class="function"> <h3 id="salt.returners.elasticsearch_return.event_return"> salt.returners.elasticsearch_return.event_return(events)</h3> <dd>
<p>Return events to Elasticsearch</p> <p>Requires that the <cite>event_return</cite> configuration be set in master config.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.returners.elasticsearch_return.get_load"> salt.returners.elasticsearch_return.get_load(jid)</h3> <dd>
<p>Return the load data that marks a specified jid</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2015.8.1.</span></p> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.returners.elasticsearch_return.prep_jid"> salt.returners.elasticsearch_return.prep_jid(nocache=False, passed_jid=None)</h3> <dd>
<p>Do any work necessary to prepare a JID, including sending a custom id</p> </dd>
</dl> <dl class="function"> <h3 id="salt.returners.elasticsearch_return.returner"> salt.returners.elasticsearch_return.returner(ret)</h3> <dd>
<p>Process the return from Salt</p> </dd>
</dl> <dl class="function"> <h3 id="salt.returners.elasticsearch_return.save_load"> salt.returners.elasticsearch_return.save_load(jid, load, minions=None)</h3> <dd>
<p>Save the load to the specified jid id</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2015.8.1.</span></p> </div> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/returners/all/salt.returners.elasticsearch_return.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/returners/all/salt.returners.elasticsearch_return.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
