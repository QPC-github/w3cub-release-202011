
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Chef Server API - Chef 12 - W3cubDocs</title>
  
  <meta name="description" content="The Chef server API is a REST API that provides access to objects on the Chef server, including nodes, environments, roles, cookbooks (and cookbook &hellip;">
  <meta name="keywords" content="chef, server, api, chef~12">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/chef~12/server_12-8/api_chef_server.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/chef~12.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/chef~12/" class="_nav-link" title="" style="margin-left:0;">Chef 12</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="chef-server-api">Chef Server API</h1> <p>The Chef server API is a REST API that provides access to objects on the Chef server, including nodes, environments, roles, cookbooks (and cookbook versions), and to manage an API client list and the associated RSA public key-pairs.</p>  <h2 id="requirements">Requirements</h2> <p>The Chef server API has the following requirements:</p> <ul class="simple"> <li>Access to a Chef server running version 0.10.x or above</li> <li>The <code class="docutils literal">Accept</code> header must be set to <code class="docutils literal">application/json</code>
</li> <li>For <code class="docutils literal">PUT</code> and <code class="docutils literal">POST</code> requests, the <code class="docutils literal">Content-Type</code> header must be set to <code class="docutils literal">application/json</code>
</li> <li>The <code class="docutils literal">X-Chef-Version</code> header must be set to the version of the Chef server API that is being used</li> <li>A request must be signed using <code class="docutils literal">Mixlib::Authentication</code>
</li> <li>A request must be well-formatted. The easiest way to ensure a well-formatted request is to use the <code class="docutils literal">Chef::REST</code> library</li> </ul>   <h2 id="authentication-headers">Authentication Headers</h2> <p>Authentication to the Chef server occurs when a specific set of HTTP headers are signed using a private key that is associated with the machine from which the request is made. The request is authorized if the Chef server can verify the signature using the public key. Only authorized actions are allowed.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Most authentication requests made to the Chef server are abstracted from the user. Such as when using knife or the Chef server user interface. In some cases, such as when using the <code class="docutils literal">knife exec</code> subcommand, the authentication requests need to be made more explicitly, but still in a way that does not require authentication headers. In a few cases, such as when using arbitrary Ruby code or cURL, it may be necessary to include the full authentication header as part of the request to the Chef server.</p> </div>  <h3 id="header-format">Header Format</h3> <p>All hashing is done using SHA-1 and encoded in Base64. Base64 encoding should have line breaks every 60 characters. Each canonical header should be encoded in the following format:</p> <pre class="highlight-none" data-language="none">Method:HTTP_METHOD
Hashed Path:HASHED_PATH
X-Ops-Content-Hash:HASHED_BODY
X-Ops-Timestamp:TIME
X-Ops-UserId:USERID</pre> <p>where:</p> <ul class="simple"> <li>
<code class="docutils literal">HTTP_METHOD</code> is the method used in the API request (<code class="docutils literal">GET</code>, <code class="docutils literal">POST</code>, and so on)</li> <li>
<code class="docutils literal">HASHED_PATH</code> is the path of the request: <code class="docutils literal">/organizations/NAME/name_of_endpoint</code>. The <code class="docutils literal">HASHED_PATH</code> must be hashed using SHA-1 and encoded using Base64, must not have repeated forward slashes (<code class="docutils literal">/</code>), must not end in a forward slash (unless the path is <code class="docutils literal">/</code>), and must not include a query string.</li> <li>The private key must be an RSA key in the SSL .pem file format. This signature is then broken into character strings (of not more than 60 characters per line) and placed in the header.</li> </ul> <p>The Chef server decrypts this header and ensures its content matches the content of the non-encrypted headers that were in the request. The timestamp of the message is checked to ensure the request was received within a reasonable amount of time. One approach generating the signed headers is to use <a class="reference external" href="https://github.com/chef/mixlib-authentication">mixlib-authentication</a>, which is a class-based header signing authentication object similar to the one used by the chef-client.</p>   <h3 id="required-headers">Required Headers</h3> <p>The following authentication headers are required:</p> <table class="docutils"> <colgroup> <col width="25%"> <col width="75%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Feature</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">Accept</code></td> <td>The format in which response data from the Chef server is provided. This header must be set to <code class="docutils literal">application/json</code>.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">Content-Type</code></td> <td>The format in which data is sent to the Chef server. This header is required for <code class="docutils literal">PUT</code> and <code class="docutils literal">POST</code> requests and must be set to <code class="docutils literal">application/json</code>.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">Host</code></td> <td>The host name (and port number) to which a request is sent. (Port number <code class="docutils literal">80</code> does not need to be specified.) For example: <code class="docutils literal">api.opscode.com</code> (which is the same as <code class="docutils literal">api.opscode.com:80</code>) or <code class="docutils literal">api.opscode.com:443</code>.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">X-Chef-Version</code></td> <td>The version of the chef-client executable from which a request is made. This header ensures that responses are in the correct format. For example: <code class="docutils literal">12.0.2</code> or <code class="docutils literal">11.16.x</code>.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">X-Ops-Authorization-N</code></td> <td>One (or more) 60 character segments that comprise the canonical header. A canonical header is signed with the private key used by the client machine from which the request is sent, and is also encoded using Base64. If more than one segment is required, each should be named sequentially, e.g. <code class="docutils literal">X-Ops-Authorization-1</code>, <code class="docutils literal">X-Ops-Authorization-2</code>, <code class="docutils literal">X-Ops-Authorization-N</code>, where <code class="docutils literal">N</code> represents the integer used by the last header that is part of the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">X-Ops-Content-Hash</code></td> <td>The body of the request. The body should be hashed using SHA-1 and encoded using Base64. All hashing is done using SHA-1 and encoded in Base64. Base64 encoding should have line breaks every 60 characters.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">X-Ops-Server-API-Version</code></td> <td>Use <code class="docutils literal">X-Ops-Server-API-Version</code> to specify the version of the Chef server API. For example: <code class="docutils literal">X-Ops-Server-API-Version: 1</code>. <code class="docutils literal">X-Ops-Server-API-Version: 0</code> is supported for use with the version 12 Chef server, but will be deprecated as part of the next major release.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">X-Ops-Sign</code></td> <td>Set this header to the following value: <code class="docutils literal">version=1.0</code>.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">X-Ops-Timestamp</code></td> <td>The timestamp, in ISO-8601 format and with UTC indicated by a trailing <code class="docutils literal">Z</code> and separated by the character <code class="docutils literal">T</code>. For example: <code class="docutils literal">2013-03-10T14:14:44Z</code>.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">X-Ops-UserId</code></td> <td>The name of the API client whose private key will be used to create the authorization header.</td> </tr> </tbody> </table> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Use <code class="docutils literal">X-Ops-Server-API-Info</code> to identify the version of the Chef server API.</p> </div>   <h3 id="example">Example</h3> <p>The following example shows an authentication request:</p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/nodes HTTP/1.1
  Accept: application/json
  Accept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  X-Ops-Sign: algorithm=sha1;version=1.0;
  X-Ops-Userid: user_id
  X-Ops-Timestamp: 2014-12-12T17:13:28Z
  X-Ops-Content-Hash: 2jmj7l5rfasfgSw0ygaVb/vlWAghYkK/YBwk=
  X-Ops-Authorization-1: BE3NnBritishaf3ifuwLSPCCYasdfXaRN5oZb4c6hbW0aefI
  X-Ops-Authorization-2: sL4j1qtEZzi/2WeF67UuytdsdfgbOc5CjgECQwqrym9gCUON
  X-Ops-Authorization-3: yf0p7PrLRCNasdfaHhQ2LWSea+kTcu0dkasdfvaTghfCDC57
  X-Ops-Authorization-4: 155i+ZlthfasfasdffukusbIUGBKUYFjhbvcds3k0i0gqs+V
  X-Ops-Authorization-5: /sLcR7JjQky7sdafIHNfsBQrISktNPower1236hbFIayFBx3
  X-Ops-Authorization-6: nodilAGMb166@haC/fttwlWQ2N1LasdqqGomRedtyhSqXA==
  Host: api.opscode.com:443
  X-Ops-Server-API-Info: 1
  X-Chef-Version: 12.0.2
  User-Agent: Chef Knife/12.0.2 (ruby-2.1.1-p320; ohai-8.0.0; x86_64-darwin12.0.2; +http://chef.io)</pre>   <h3 id="knife-api-requests">Knife API Requests</h3> <p>A knife plugin is a set of one (or more) subcommands that can be added to knife to support additional functionality that is not built-in to the base set of knife subcommands. Many of the knife plugins are built by members of the Chef community and several of them are built and maintained by Chef. A knife plugin is installed to the <code class="docutils literal">~/.chef/plugins/knife/</code> directory, from where it can be run just like any other knife subcommand.</p> <p>A knife plugin can be used to make authenticated API requests to the Chef server using the following methods:</p> <table class="docutils"> <colgroup> <col width="13%"> <col width="88%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Method</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">rest.delete_rest</code></td> <td>Use to delete an object from the Chef server.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">rest.get_rest</code></td> <td>Use to get the details of an object on the Chef server.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">rest.post_rest</code></td> <td>Use to add an object to the Chef server.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">rest.put_rest</code></td> <td>Use to update an object on the Chef server.</td> </tr> </tbody> </table> <p>For example:</p> <pre class="highlight-ruby" data-language="ruby">module MyCommands
  class MyNodeDelete &lt; Chef::Knife
    #An implementation of knife node delete
    banner 'knife my node delete [NODE_NAME]'

  def run
    if name_args.length &lt; 1
      show_usage
      ui.fatal("You must specify a node name.")
      exit 1
    end
    nodename = name_args[0]
       api_endpoint = "nodes/#{nodename}"
       # Again, we could just call rest.delete_rest
       nodey = rest.get_rest(api_endpoint)
       ui.confirm("Do you really want to delete #{nodey}")
       nodey.destroy
     end
   end
end</pre>    <h2 id="global-endpoints">Global Endpoints</h2> <p>A global endpoint may be used to access all of the organizations on the Chef server.</p>  <h3 id="license">/license</h3> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This endpoint is used for information purposes only and to trigger a notification in the Chef management console about the number of licenses owned vs. the number of licenses that should be owned. No other action is taken and the functionality and behavior of the Chef server and any added component does not change.</p> </div> <p>The <code class="docutils literal">/license</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="get">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get license information for the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/license</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "limit_exceeded": "false",
  "node_license": "25",
  "node_count": "12",
  "upgrade_url": "http://www.chef.io/contact/on-premises-simple"
}</pre> <p>When <code class="docutils literal">node_count</code> is greater than <code class="docutils literal">node_license</code>, then <code class="docutils literal">limit_exceeded</code> is <code class="docutils literal">true</code> and the Chef management console will display a notification about this status. The way to resolve this is to visit the upgrade URL, add the appropriate number of licenses, and then update the configuration settings appropriately.</p> <p>The chef-server.rb file contains settings that can be used to edit the number of nodes that are under license:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Setting</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">license['nodes']</code></td> <td>The number of licensed nodes. Default value: <code class="docutils literal">25</code>.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">license['upgrade_url']</code></td> <td>The URL to visit for more information about how to update the number of nodes licensed for an organization. Default value: <code class="docutils literal">"http://www.chef.io/contact/on-premises-simple"</code>.</td> </tr> </tbody> </table> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="organizations">/organizations</h3> <p>The Chef server may contain multiple organizations.</p> <p>The <code class="docutils literal">/organizations</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">This endpoint may only be accessed by the <code class="docutils literal">pivotal</code> user, which is created as part of the installation process for the Chef server. (See the “Query for Users and Orgs” example below for an example of how to access this endpoint with the <code class="docutils literal">pivotal</code> user.)</p> </div>  <h4 id="id1">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of organizations on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/organizations</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-none" data-language="none">{
  "org_name1"=&gt;"https://url/for/org_name1"
  "org_name2"=&gt;"https://url/for/org_name2"
      ...
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>   <h4 id="post">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create an organization on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "chef",
  "full_name": "Chef Software, Inc.",
}</pre> <p>where:</p> <ul class="simple"> <li>
<code class="docutils literal">name</code> must begin with a lower-case letter or digit, may only contain lower-case letters, digits, hyphens, and underscores, and must be between 1 and 255 characters. For example: <code class="docutils literal">chef</code>.</li> <li>
<code class="docutils literal">full_name</code> must begin with a non-white space character and must be between 1 and 1023 characters. For example: <code class="docutils literal">Chef Software, Inc.</code>.</li> </ul> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">An organization isn’t usable until a user that belongs to the <code class="docutils literal">admins</code> group is associated with the organization.</p> </div> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{ "org_name": "https://url/for/org_name" }</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">409</code></td> <td>Unauthorized. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>    <h3 id="organizations-name">/organizations/NAME</h3> <p>An organization is a single instance of a Chef server, including all of the nodes that are managed by that Chef server and each of the workstations that will run knife and access the Chef server using the Chef server API.</p> <p>The <code class="docutils literal">/organizations/NAME</code> endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="delete">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete an organization.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "chef",
  "full_name": "Chef Software, Inc",
  "guid": "f980d1asdfda0331235s00ff36862"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>   <h4 id="id2">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get the details for the named organization.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-none" data-language="none">{
  "name": "chef",
  "full_name": "Chef Software, Inc",
  "guid": "f980d1asdfda0331235s00ff36862"
         ...
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>   <h4 id="put">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to create an organization.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /organizations/NAME</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "chef",
  "full_name": "Chef Software, Inc"
}</pre> <p><strong>Response</strong></p> <p>The response will return the JSON for the updated organization.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">410</code></td> <td>Gone. Unable to update private key.</td> </tr> </tbody> </table>    <h3 id="users">/users</h3> <p>A user is an individual account that is created to allow access to the Chef server. For example:</p> <ul class="simple"> <li>A hosted Chef server account</li> <li>The user that operates the workstation from which a Chef server will be managed</li> </ul> <p>The <code class="docutils literal">/users</code> endpoint has the following methods: <code class="docutils literal">`GET</code> and <code class="docutils literal">POST</code>.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">This endpoint may only be accessed by the <code class="docutils literal">pivotal</code> user, which is created as part of the installation process for the Chef server. (See the “Query for Users and Orgs” example below for an example of how to access this endpoint with the <code class="docutils literal">pivotal</code> user.)</p> </div>  <h4 id="id3">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of users on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /users</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-none" data-language="none">{
  "user1"=&gt; "https://url/for/user1"
  "user2"=&gt; "https://url/for/user2"
      ...
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table> <p><strong>Optional Filtering</strong></p> <blockquote> <div>
<p>Filtering on <code class="docutils literal">/users</code> can be done with the <code class="docutils literal">external_authentication_uid</code>. This is to support SAML authentication.</p> <p>As an example, to retrieve users whos <code class="docutils literal">external_authentication_uid</code> is <code class="docutils literal">jane@doe.com</code>, you would do the following:</p> </div>
</blockquote> <pre class="highlight-none" data-language="none">GET /users?external_authentication_uid=jane%40doe.com</pre> <p>New in Chef server 12.7.</p>   <h4 id="id4">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create a user on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /users</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{ "user_name": "https://url/for/user_name" }</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">409</code></td> <td>Conflict. The object already exists.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="users-name">/users/NAME</h3> <p>The <code class="docutils literal">/users/USER_NAME</code> endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, <code class="docutils literal">POST</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="id5">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete a user.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /users/USER_NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "Grant McLennan",
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id6">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return the details for a user.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /users/USER_NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "Robert Forster",
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>   <h4 id="id7">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create a new user. If a public key is not specified, both public and private keys will be generated and returned. If a public key is specified, only the public key will be returned.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /users/USER_NAME</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "Robert Forster"
}</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "Robert Forster",
  "private_key": "-----BEGIN PRIVATE KEY-----\n
                MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCyVPW9YXa5PR0rgEW1updSxygB\n
                wmVpDnHurgQ7/gbh+PmY49EZsfrZSbKgSKy+rxdsVoSoU+krYtHvYIwVfr2tk0FP\n
                nhAWJaFH654KpuCNG6x6iMLtzGO1Ma/VzHnFqoOeSCKHXDhmHwJAjGDTPAgCJQiI\n
                eau6cDNJRiJ7j0/xBwIDAQAB\n
                -----END PRIVATE KEY-----"
  "admin": true
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">409</code></td> <td>Conflict. The object already exists.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>   <h4 id="id8">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to update a specific user. If values are not specified for the <code class="docutils literal">PUT</code> method, the Chef server will use the existing values rather than assign default values.</p> <p><code class="docutils literal">PUT</code> accepts a boolean: <code class="docutils literal">{ "private_key": "true" }</code>. If this is specified, a new private key is generated.</p> <p>If values are missing, they will not be overwritten. If <code class="docutils literal">public_key</code> is null, the public key will not be overwritten.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last"><code class="docutils literal">PUT</code> supports renames. If <code class="docutils literal">PUT /users/foo</code> is requested with <code class="docutils literal">{ "name: "bar""}</code>, then it will rename <code class="docutils literal">foo</code> to <code class="docutils literal">bar</code> and all of the content previously associated with <code class="docutils literal">foo</code> will be associated with <code class="docutils literal">bar</code>.</p> </div> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /users/NAME</pre> <p>with a request body similar to:</p> <pre class="highlight-none" data-language="none">POST /users { "name": "Grant McLennan" }</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "Grant McLennan",
  "private_key": "-----BEGIN PRIVATE KEY-----\n
                MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCyVPW9YXa5PR0rgEW1updSxygB\n
                wmVpDnHurgQ7/gbh+PmY49EZsfrZSbKgSKy+rxdsVoSoU+krYtHvYIwVfr2tk0FP\n
                nhAWJaFH654KpuCNG6x6iMLtzGO1Ma/VzHnFqoOeSCKHXDhmHwJAjGDTPAgCJQiI\n
                eau6cDNJRiJ7j0/xBwIDAQAB\n
                -----END PRIVATE KEY-----"
  "admin": false
}</pre> <p>If a new private key was generated, both the private and public keys are returned.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created. (This response code is only returned when the user is renamed.)</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">409</code></td> <td>Unauthorized. The user who made the request is not authorized to perform the action. (This response code is only returned when a user is renamed, but a user already exists with that name.)</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="users-user-keys">/users/USER/keys/</h3> <p>The <code class="docutils literal">/users/USER/keys</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p>  <h4 id="id9">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to retrieve all of the named user’s key identifiers, associated URIs, and expiry states.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /users/USER/keys/</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">[
  { "name" : "default",
             "uri" : "https://chef.example/users/USER/keys/default",
             "expired" : false },
  { "name" : "key1",
             "uri" : "https://chef.example/users/USER/keys/key1",
             "expired" : false}
]</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id10">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to add a key for the specified user.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /users/USER/keys/</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "key1",
  "public_key" : "-------- BEGIN PUBLIC KEY ----and a valid key here",
  "expiration_date" : "infinity"
}</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "uri" : "https://chef.example/users/user1/keys/key1"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="users-user-keys-key">/users/USER/keys/KEY</h3> <p>The <code class="docutils literal">/users/USER/keys/KEY</code> endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="id11">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete the specified key for the specified user.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /users/USER/keys/KEY</pre> <p><strong>Response</strong></p> <p>The response returns the information about the deleted key and is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "default",
  "public_key" : "-------- BEGIN PUBLIC KEY --------- ...",
  "expiration_date" : "2020-12-31T00:00:00Z"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id12">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return details for a specific key for a specific user.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /users/USER/keys/KEY</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "default",
  "public_key" : "-------- BEGIN PUBLIC KEY --------- ...",
  "expiration_date" : "2020-12-31T00:00:00Z"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id13">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to update one or more properties for a specific key for a specific user.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /users/USER/keys/KEY</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "new_key_name",
  "public_key" : "-------- BEGIN PUBLIC KEY ----and a valid key here",
  "expiration_date" : "2020-12-31T00:00:00Z"
}</pre> <p><strong>Response</strong></p> <p>The response contains the updated inforamtion for the key, and is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "new_key_name",
  "public_key" : "-------- BEGIN PUBLIC KEY --------- ...",
  "expiration_date" : "2020-12-31T00:00:00Z"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>     <h2 id="organization-endpoints">Organization Endpoints</h2> <p>Each organization-specific authentication request must include <code class="docutils literal">/organizations/NAME</code> as part of the name for the endpoint. For example, the full endpoint for getting a list of roles:</p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/roles</pre> <p>where <code class="docutils literal">ORG_NAME</code> is the name of the organization.</p>  <h3 id="association-requests">/association_requests</h3> <p>Users may be invited to join organizations via the web user interface in the Chef management console or via the <code class="docutils literal">POST</code> endpoint in the Chef server API.</p> <p>The <code class="docutils literal">/association_requests</code> endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, and <code class="docutils literal">POST</code>.</p>  <h4 id="id14">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete a pending invitation.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME/association_requests/ID</pre> <p>This method has no request body.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{

}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id15">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of pending invitations.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/association_requests</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{

}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id16">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create an invitation.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/association_requests</pre> <p><strong>Response</strong></p> <p>This method has no response body.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">409</code></td> <td>Conflict. The object already exists.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="authenticate-user">/authenticate_user</h3> <p>The <code class="docutils literal">/authenticate_user</code> endpoint has the following methods: <code class="docutils literal">POST</code>.</p>  <h4 id="id17">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to authenticate a user. This endpoint is used by the Chef Identity Service to authenticate users of Chef Supermarket and Chef Analytics to the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/authenticate_user</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "username" : "grantmc",
  "password" : "p@ssw0rd"
}</pre> <p><strong>Response</strong></p> <p>This method has no response body.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> </tbody> </table>    <h3 id="client-client-keys">/client/CLIENT/keys/</h3> <p>The <code class="docutils literal">/client/CLIENT/keys</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p>  <h4 id="id18">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to retrieve all of the named client’s key identifiers, associated URIs, and expiry states.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/clients/CLIENT/keys</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">[
  { "name" : "default",
             "uri" : "https://chef.example/organizations/example/clients/client1/keys/default",
             "expired" : false },
  { "name" : "key1",
             "uri" : "https://chef.example/organizations/example/clients/client1/keys/key1",
             "expired" : true }
]</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id19">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to add a key for the specified client.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/clients/CLIENT/keys</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "key1",
  "public_key": "-------- BEGIN PUBLIC KEY ----and a valid key here",
  "expiration_date": "infinity"
}</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "uri": "https://chef.example/organizations/example/clients/client1/keys/key1"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="client-client-keys-key">/client/CLIENT/keys/KEY</h3> <p>The <code class="docutils literal">/clients/CLIENT/keys/KEY</code> endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="id20">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete the specified key for the specified client.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME/clients/CLIENT/keys/KEY</pre> <p><strong>Response</strong></p> <p>The response returns the information about the deleted key and is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "default",
  "public_key" : "-------- BEGIN PUBLIC KEY --------- ...",
  "expiration_date" : "2020-12-31T00:00:00Z"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id21">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return details for a specific key for a specific client.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/clients/CLIENT/keys/KEY</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "default",
  "public_key" : "-------- BEGIN PUBLIC KEY --------- ...",
  "expiration_date" : "2020-12-31T00:00:00Z"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id22">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to update one or more properties for a specific key for a specific client.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /organizations/NAME/clients/CLIENT/keys/KEY</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "new_key_name",
  "public_key" : "-------- BEGIN PUBLIC KEY ----and a valid key here",
  "expiration_date" : "2020-12-31T00:00:00Z"
}</pre> <p><strong>Response</strong></p> <p>The response contains the updated inforamtion for the key, and is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "new_key_name",
  "public_key" : "-------- BEGIN PUBLIC KEY --------- ...",
  "expiration_date" : "2020-12-31T00:00:00Z"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="clients">/clients</h3> <p>Use the <code class="docutils literal">/clients</code> endpoint to manage an API client list and their associated RSA public key-pairs. The <code class="docutils literal">/clients</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">In general, the API client list should be managed using knife or the Chef server management console, as opposed to the Chef server API.</p> </div>  <h4 id="id23">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return the API client list on the Chef server, including nodes that have been registered with the Chef server, the chef-validator clients, and the chef-server-webui clients for the entire organization.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/clients</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "org1-validator" : "https://chef.example/orgaizations/org1/clients/org1-validator",
  "client1" : "https://chef.example/orgaizations/org1/clients/client1"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>   <h4 id="id24">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create a new API client.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/clients</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "name_of_API_client",
  "admin": false,
  "create_key": true
}</pre> <p>where <code class="docutils literal">name_of_API_client</code> is the name of the API client to be created and <code class="docutils literal">admin</code> indicates whether the API client will be run as an admin API client.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "uri": "https://chef.example/orgaizations/org1/clients/client1",
  "chef_key": {
    "name": "default",
    "public_key": "-----BEGIN PUBLIC KEY-----",
    "private_key": "-----BEGIN RSA PRIVATE KEY-----"
}</pre> <p>Store the private key in a safe place. It will be required later (along with the client name) to access the Chef server when using the Chef server API.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">409</code></td> <td>Conflict. The object already exists.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="clients-name">/clients/NAME</h3> <p>The <code class="docutils literal">/clients/NAME</code> endpoint is used to manage a specific API client. This endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="id25">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to remove a specific API client.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME/clients/NAME</pre> <p>This method has no request body.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "client1",
  "validator" : "false"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id26">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a specific API client.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/clients/NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name" : "user1",
  "validator" : "false"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id27">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to update a specific API client. If values are not specified for the <code class="docutils literal">PUT</code> method, the Chef server will use the existing values rather than assign default values.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last"><code class="docutils literal">PUT</code> supports renames. If <code class="docutils literal">PUT /user/foo</code> is requested with <code class="docutils literal">{ "name: "bar""}</code>, then it will rename <code class="docutils literal">foo</code> to <code class="docutils literal">bar</code> and all of the content previously associated with <code class="docutils literal">foo</code> will be associated with <code class="docutils literal">bar</code>.</p> </div> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /organizations/NAME/clients/NAME</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "monkeypants",
  "private_key": true,
  "admin": false
}</pre> <p>where <code class="docutils literal">private_key</code> (when <code class="docutils literal">true</code>) will generate a new RSA private key for the API client. If <code class="docutils literal">admin</code> is set to <code class="docutils literal">true</code> the API client will be promoted to an admin API client.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "uri" : "https://chef.example/orgaizations/org1/clients/client1"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created. (This response code is only returned when the client is renamed.)</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">409</code></td> <td>Unauthorized. The user who made the request is not authorized to perform the action. (This response code is only returned when a client is renamed, but a client already exists with that name.)</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="containers">/containers</h3> <p>The <code class="docutils literal">/containers</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id28">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of containers.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/containers</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "clients": "https://url/for/containers/clients",
  "containers": "https://url/for/containers/containers",
  "cookbooks": "https://url/for/containers/cookbooks",
  "data": "https://url/for/containers/data",
  "environments": "https://url/for/containers/environments",
  "groups": "https://url/for/containers/groups",
  "nodes": "https://url/for/containers/nodes",
  "roles": "https://url/for/containers/roles",
  "sandboxes": "https://url/for/containers/sandboxes"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="cookbooks">/cookbooks</h3> <p>A cookbook is the fundamental unit of configuration and policy distribution. A cookbook defines a scenario and contains everything that is required to support that scenario:</p> <ul class="simple"> <li>Recipes that specify the resources to use and the order in which they are to be applied</li> <li>Attribute values</li> <li>File distributions</li> <li>Templates</li> <li>Extensions to Chef, such as libraries, definitions, and custom resources</li> </ul> <p>When a cookbook is uploaded, only files that are new or updated will be included. This approach minimizes the amount of storage and time that is required during the modify-upload-test cycle. To keep track of which files have already been uploaded, the chef-client uses a checksum and assigns a checksum to each file. These checksums are used in the cookbook version manifest, alongside the same records that store the file description (name, specificity, and so on), as well as the checksum and the URL from which the file’s contents can be retrieved.</p> <p>The <code class="docutils literal">/cookbooks</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id29">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a hash of all cookbooks and cookbook versions.</p> <p>This method has the following parameters:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Parameter</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">num_versions=n</code></td> <td>The number of cookbook versions to include in the response, where <code class="docutils literal">n</code> is the number of cookbook versions. For example: <code class="docutils literal">num_versions=3</code> returns the three latest versions, in descending order (newest to oldest). Use <code class="docutils literal">num_versions=all</code> to return all cookbook versions. If <code class="docutils literal">num_versions</code> is not specified, a single cookbook version is returned. <code class="docutils literal">0</code> is an invalid input (an empty array for the versions of each cookbook is returned).</td> </tr> </tbody> </table> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/cookbooks</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "apache2": {
    "url": "https://localhost/cookbooks/apache2",
    "versions": [
      {"url": "https://localhost/cookbooks/apache2/5.1.0",
       "version": "5.1.0"},
      {"url": "https://localhost/cookbooks/apache2/4.2.0",
       "version": "4.2.0"}
    ]
  },
  "nginx": {
    "url": "https://localhost/cookbooks/nginx",
    "versions": [
      {"url": "https://localhost/cookbooks/nginx/1.0.0",
       "version": "1.0.0"},
      {"url": "https://localhost/cookbooks/nginx/0.3.0",
       "version": "0.3.0"}
    ]
  }
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>    <h3 id="cookbooks-latest">/cookbooks/_latest</h3> <p>The <code class="docutils literal">/cookbooks/_latest</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id30">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a list of the most recent cookbook versions.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/cookbooks/_latest</pre> <p><strong>Response</strong></p> <p>For example, if cookbooks <code class="docutils literal">foo</code> and <code class="docutils literal">bar</code> both exist on the Chef server and both with versions <code class="docutils literal">0.1.0</code> and <code class="docutils literal">0.2.0</code>, the response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "foo": "https://localhost/cookbooks/foo/0.2.0",
  "bar": "https://localhost/cookbooks/bar/0.2.0"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="cookbooks-recipes">/cookbooks/_recipes</h3> <p>The <code class="docutils literal">/cookbooks/_recipes</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id31">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return the names of all recipes in the most recent cookbook versions.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/cookbooks/_recipes</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{

}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="cookbooks-name">/cookbooks/NAME</h3> <p>The <code class="docutils literal">/cookbooks/NAME</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id32">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a hash that contains a key-value pair that corresponds to the specified cookbook, with a URL for the cookbook and for each version of the cookbook.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/cookbooks/NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "apache2": {
    "url": "https://localhost/cookbooks/apache2",
    "versions": [
      {"url": "https://localhost/cookbooks/apache2/5.1.0",
       "version": "5.1.0"},
      {"url": "https://localhost/cookbooks/apache2/4.2.0",
       "version": "4.2.0"}
    ]
  }
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="cookbooks-name-version">/cookbooks/NAME/version</h3> <p>A cookbook version represents a set of functionality that is different from the cookbook on which it is based. A version may exist for many reasons, such as ensuring the correct use of a third-party component, updating a bug fix, or adding an improvement. A cookbook version is defined using syntax and operators, may be associated with environments, cookbook metadata, and/or run-lists, and may be frozen (to prevent unwanted updates from being made).</p> <p>A cookbook version is maintained just like a cookbook, with regard to source control, uploading it to the Chef server, and how the chef-client applies that cookbook when configuring nodes.</p> <p>The <code class="docutils literal">/cookbooks/NAME/VERSION</code> endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="id33">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete a cookbook version.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME/cookbooks/NAME/VERSION</pre> <p><strong>Response</strong></p> <p>This method has no response body. Unused <code class="docutils literal">checksum</code> values will be garbage collected.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id34">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a description of a cookbook, including its metadata and links to component files.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/cookbooks/NAME/VERSION</pre> <p>where <code class="docutils literal">VERSION</code> can be <code class="docutils literal">_latest</code> in order to float to head.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "cookbook_name": "getting-started",
  "files": [

  ],
  "chef_type": "cookbook_version",
  "definitions": [

  ],
  "libraries": [

  ],
  "attributes": [
    {
      "url": "https://domain.com/org_name/(...rest of URL)",
      "path": "attributes/default.rb",
      "specificity": "default",
      "name": "default.rb",
      "checksum": "fa0fc4abf3f6787fdsaasadfrc5c35de667c"
    }
  ],
  "recipes": [
    {
      "url": "https://domain.com/org_name/(...rest of URL)",
      "path": "recipes/default.rb",
      "specificity": "default",
      "name": "default.rb",
      "checksum": "7e79b1ace7728fdsadfsdaf857e60fc69"
    }
  ],
  "providers": [

  ],
  "resources": [

  ],
  "templates": [
    {
      "url": "https://domain.com/org_name/(...rest of URL)",
      "path": "templates/default/chef-getting-started.txt.erb",
      "specificity": "default",
      "name": "chef-getting-started.txt.erb",
      "checksum": "a29d6f2545sdffds1f140c3a78b1fe"
    }
  ],
  "root_files": [
    {
      "url": "https://domain.com/org_name/(...rest of URL)",
      "path": ".DS_Store",
      "specificity": "default",
      "name": ".DS_Store",
      "checksum": "c107b500aafd12asdffdsdf5c2a7d6"
    },
    {
      "url": "https://domain.com/org_name/(...rest of URL)",
      "path": "metadata.json",
      "specificity": "default",
      "name": "metadata.json",
      "checksum": "20f09570e54dasdf0f3ae01e6401c90f"
    },
    {
      "url": "https://domain.com/org_name/(...rest of URL)",
      "path": "metadata.rb",
      "specificity": "default",
      "name": "metadata.rb",
      "checksum": "71027aefasd487fdsa4cb6994b66ed"
    },
    {
      "url": "https://domain.com/org_name/(...rest of URL)",
      "path": "README.rdoc",
      "specificity": "default",
      "name": "README.rdoc",
      "checksum": "8b9275e56fee974easdfasdfbb729"
    }
  ],
  "name": "getting-started-0.4.0",
  "frozen?": false,
  "version": "0.4.0",
  "json_class": "Chef::CookbookVersion",
  "metadata": {
    "maintainer": "Maintainer",
    "attributes": { },
    "suggestions": { },
    "recipes": { "getting-started": "" },
    "dependencies": { },
    "platforms": { },
    "groupings": { },
    "recommendations": { },
    "name": "getting-started",
    "description": "description",
    "version": "0.4.0",
    "maintainer_email": "sysadmin@opscode.com",
    "long_description": "= DESCRIPTION:\n\nThis cookbook is used to do some things.\n\n",
    "providing": { "getting-started": "&gt;= 0.0.0" },
    "replacing": { },
    "conflicting": { },
    "license": "Apache 2.0"
  }
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id35">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to create or update a cookbook version.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /organizations/NAME/cookbooks/NAME/VERSION</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "definitions": [
    {
      "name": "unicorn_config.rb",
      "checksum": "c92b659171552e896074caa58dada0c2",
      "path": "definitions/unicorn_config.rb",
      "specificity": "default"
    }
  ],
  "name": "unicorn-0.1.2",
  "attributes": [],
  "files": [],
  "json_class": "Chef::CookbookVersion",
  "providers": [],
  "metadata": {
    "dependencies": {"ruby": [], "rubygems": []},
    "name": "unicorn",
    "maintainer_email": "ops@opscode.com",
    "attributes": {},
    "license": "Apache 2.0",
    "suggestions": {},
    "platforms": {},
    "maintainer": "Opscode, Inc",
    "long_description": "= LICENSE AND AUTHOR:\n\nAuthor:: Adam Jacob...",
    "recommendations": {},
    "version": "0.1.2",
    "conflicting": {},
    "recipes": {"unicorn": "Installs unicorn rubygem"},
    "groupings": {},
    "replacing": {},
    "description": "Installs/Configures unicorn",
    "providing": {}
  },
  "libraries": [],
  "templates": [
    {
      "name": "unicorn.rb.erb",
      "checksum": "36a1cc1b225708db96d48026c3f624b2",
      "path": "templates/default/unicorn.rb.erb",
      "specificity": "default"
    }
  ],
  "resources": [],
  "cookbook_name": "unicorn",
  "version": "0.1.2",
  "recipes": [
    {
      "name": "default.rb",
      "checksum": "ba0dadcbca26710a521e0e3160cc5e20",
      "path": "recipes/default.rb",
      "specificity": "default"
    }
  ],
  "root_files": [
    {
      "name": "README.rdoc",
      "checksum": "d18c630c8a68ffa4852d13214d0525a6",
      "path": "README.rdoc",
      "specificity": "default"
    },
    {
      "name": "metadata.rb",
      "checksum": "967087a09f48f234028d3aa27a094882",
      "path": "metadata.rb",
      "specificity": "default"
    },
    {
      "name": "metadata.json",
      "checksum": "45b27c78955f6a738d2d42d88056c57c",
      "path": "metadata.json",
      "specificity": "default"
    }
  ],
  "chef_type": "cookbook_version"
}</pre> <p>where the <code class="docutils literal">checksum</code> values must have already been uploaded to the Chef server using the sandbox endpoint. Once a file with a particular checksum has been uploaded by the user, redundant uploads are not necessary. Unused <code class="docutils literal">checksum</code> values will be garbage collected.</p> <p><strong>Response</strong></p> <p>This method has no response body.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="data">/data</h3> <p>A data bag is a global variable that is stored as JSON data and is accessible from a Chef server. A data bag is indexed for searching and can be loaded by a recipe or accessed during a search.</p> <p>The <code class="docutils literal">/data</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p>  <h4 id="id36">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a list of all data bags on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/data</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "users": "https://localhost/data/users",
  "applications": "https://localhost/data/applications"
}</pre> <p>shown as a list of key-value pairs, where (in the example above) <code class="docutils literal">users</code> and <code class="docutils literal">applications</code> are the names of data bags and <code class="docutils literal">https://localhost/data/foo</code> is the path to the data bag.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>   <h4 id="id37">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create a new data bag on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/data</pre> <p>with a request body that contains the key-value pair for the data bag and is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "users"
}</pre> <p>where (in the example above) <code class="docutils literal">name</code> is the key and “users” is the value.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
   "chef_type": "environment",
   "data_bag": "data123",
   "id": "12345"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">409</code></td> <td>Unauthorized. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="data-name">/data/NAME</h3> <p>The <code class="docutils literal">/data/NAME</code> endpoint is used to view and update data for a specific data bag. This endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p>  <h4 id="id38">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete a data bag.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME/data/NAME</pre> <p>This method has no request body.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "id": "adam",
  "real_name": "Adam Brent Jacob"
}</pre> <p>where the key-value pairs represent the last state of the data bag item.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id39">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a hash of all entries in the specified data bag.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/data/NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
   "adam": "https://localhost/data/users/adam"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id40">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create a new data bag item.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/data/NAME</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "id": "adam",
  "real_name": "Adam Jacob"
}</pre> <p>where <code class="docutils literal">id</code> is required.</p> <p><strong>Response</strong></p> <p>This method has no response body.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">409</code></td> <td>Conflict. The object already exists.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="data-name-item">/data/NAME/ITEM</h3> <p>A data bag is a container of related data bag items, where each individual data bag item is a JSON file. knife can load a data bag item by specifying the name of the data bag to which the item belongs and then the filename of the data bag item. The only structural requirement of a data bag item is that it must have an <code class="docutils literal">id</code>:</p> <pre class="highlight-javascript" data-language="javascript">{
  /* This is a supported comment style */
  // This style is also supported
  "id": "ITEM_NAME",
  "key": "value"
}</pre> <p>where</p> <ul class="simple"> <li>
<code class="docutils literal">key</code> and <code class="docutils literal">value</code> are the <code class="docutils literal">key:value</code> pair for each additional attribute within the data bag item</li> <li>
<code class="docutils literal">/* ... */</code> and <code class="docutils literal">// ...</code> show two ways to add comments to the data bag item</li> </ul> <p>The <code class="docutils literal">/data/NAME/ITEM</code> endpoint allows the key-value pairs within a data bag item to be viewed and managed. This endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="id41">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete a key-value pair in a data bag item.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME/data/NAME/ITEM</pre> <p>This method has no request body.</p> <p>For example, run the following command:</p> <pre class="highlight-bash" data-language="bash">$ knife raw /data/dogs</pre> <p>which returns a list of data bags on the server:</p> <pre class="highlight-javascript" data-language="javascript">{
  "pomeranian": "https://api.opscode.com/organizations/ORG_NAME/data/dogs/pomeranian",
  "shihtzu": "https://api.opscode.com/organizations/ORG_NAME/data/dogs/shihtzu",
  "tibetanspaniel": "https://api.opscode.com/organizations/ORG_NAME/data/dogs/tibetanspaniel"
}</pre> <p>Run the following command:</p> <pre class="highlight-bash" data-language="bash">$ knife raw -m DELETE /data/dogs/shihtzu</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "data_bag_item_dogs_shihtzu",
  "json_class": "Chef::DataBagItem",
  "chef_type": "data_bag_item",
  "data_bag": "dogs",
  "raw_data": {
    "description": "small annoying dog that doesn't bark all that often",
    "id": "shihtzu"
  }
}</pre> <p>Run the following command:</p> <pre class="highlight-bash" data-language="bash">$ knife raw /data/dogs</pre> <p>to view an updated list:</p> <pre class="highlight-javascript" data-language="javascript">{
  "pomeranian": "https://api.opscode.com/organizations/ORG_NAME/data/dogs/pomeranian",
  "tibetanspaniel": "https://api.opscode.com/organizations/ORG_NAME/data/dogs/tibetanspaniel"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id42">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to view all of the key-value pairs in a data bag item.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/data/NAME/ITEM</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "real_name": "Adam Jacob",
  "id": "adam"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id43">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to replace the contents of a data bag item with the contents of this request.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /organizations/NAME/data/NAME/ITEM</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "real_name": "Adam Brent Jacob",
  "id": "adam"
}</pre> <p>where <code class="docutils literal">id</code> is required.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "real_name": "Adam Brent Jacob",
  "id": "adam"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="environments">/environments</h3> <p>An environment is a way to map an organization’s real-life workflow to what can be configured and managed when using Chef server. Every organization begins with a single environment called the <code class="docutils literal">_default</code> environment, which cannot be modified (or deleted). Additional environments can be created to reflect each organization’s patterns and workflow. For example, creating <code class="docutils literal">production</code>, <code class="docutils literal">staging</code>, <code class="docutils literal">testing</code>, and <code class="docutils literal">development</code> environments. Generally, an environment is also associated with one (or more) cookbook versions.</p> <p>The <code class="docutils literal">/environments</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p>  <h4 id="id44">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a data structure that contains a link to each available environment.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/environments</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "_default": "https://api.opscode.com/organizations/org_name/environments/_default",
  "webserver": "https://api.opscode.com/organizations/org_name/environments/webserver"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>   <h4 id="id45">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create a new environment.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/environments</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "dev",
  "default_attributes": {},
  "json_class": "Chef::Environment",
  "description": "",
  "cookbook_versions": {},
  "chef_type": "environment"
}</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{ "uri": "https://localhost/environments/dev" }</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">409</code></td> <td>Conflict. The object already exists.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="environments-default">/environments/_default</h3> <p>The <code class="docutils literal">/environments/_default</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id46">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get information about the <code class="docutils literal">_default</code> environment on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/environments/_default</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "_default",
  "description": "The default Chef environment",
  "json_class": "Chef::Environment",
  "chef_type": "environment",
  "default_attributes": {

  },
  "override_attributes": {

  },
  "cookbook_versions": {

  }
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="environments-name">/environments/NAME</h3> <p>The <code class="docutils literal">/environments/NAME</code> endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="id47">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete an environment.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME/environments/NAME</pre> <p><strong>Response</strong></p> <p>The response will return the JSON for the environment that was deleted, similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name":"backend",
  "description":"",
  "cookbook_versions":{},
  "json_class":"Chef::Environment",
  "chef_type":"environment",
  "default_attributes":{},
  "override_attributes":{}
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id48">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return the details for an environment as JSON.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/environments/NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "_default",
  "description": "The default Chef environment",
  "json_class": "Chef::Environment",
  "chef_type": "environment",
  "default_attributes": { }
  "override_attributes": { },
  "cookbook_versions": { },
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id49">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to update the details of an environment on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /organizations/NAME/environments/NAME</pre> <p>with a request body that contains the updated JSON for the environment and is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "dev",
  "attributes": {},
  "json_class": "Chef::Environment",
  "description": "The Dev Environment",
  "cookbook_versions": {},
  "chef_type": "environment"
}</pre> <p><strong>Response</strong></p> <p>The response will return the updated environment.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="environments-name-cookbooks-name">/environments/NAME/cookbooks/NAME</h3> <p>The <code class="docutils literal">/environments/NAME/cookbooks/NAME</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id50">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a hash of key-value pairs for the requested cookbook.</p> <p>This method has the following parameters:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Parameter</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">num_versions=n</code></td> <td>The number of cookbook versions to include in the response, where <code class="docutils literal">n</code> is the number of cookbook versions. For example: <code class="docutils literal">num_versions=3</code> returns the three latest versions, in descending order (newest to oldest). Use <code class="docutils literal">num_versions=all</code> to return all cookbook versions. If <code class="docutils literal">num_versions</code> is not specified, a single cookbook version is returned. <code class="docutils literal">0</code> is an invalid input (an empty array for the versions of each cookbook is returned).</td> </tr> </tbody> </table> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/environments/NAME/cookbooks/NAME</pre> <p>where the first instance of <code class="docutils literal">NAME</code> is the name of the environment, and the second instance is the name of the cookbook.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-none" data-language="none">{
  "apache2": {
    "url": "https://localhost/cookbooks/apache2",
    "versions": [
      {"url": "https://localhost/cookbooks/apache2/5.1.0",
       "version": "5.1.0"},
      {"url": "https://localhost/cookbooks/apache2/4.2.0",
       "version": "4.2.0"}
    ]
  }
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="environments-name-cookbook-versions">/environments/NAME/cookbook_versions</h3> <p>The <code class="docutils literal">/environments/NAME/cookbook_versions</code> endpoint has the following methods: <code class="docutils literal">POST</code>.</p>  <h4 id="id51">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to return a hash of the cookbooks and cookbook versions (including all dependencies) that are required by the <code class="docutils literal">run_list</code> array. Version constraints may be specified using the <code class="docutils literal">@</code> symbol after the cookbook name as a delimiter. Version constraints may also be present when the <code class="docutils literal">cookbook_versions</code> attributes is specified for an environment or when dependencies are specified by a cookbook.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/environments/NAME/cookbook_versions</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "run_list": [
    "zed@0.0.1",
    "bar",
    "mysql",
    "gem",
    "nginx@0.99.2",
    "cron",
    "foo"
  ]
}</pre> <p>where <code class="docutils literal">@x.x.x</code> represents a constraint for a cookbook version.</p> <p><strong>Response</strong></p> <p>The response will return a list of cookbooks that are required by the <code class="docutils literal">run_list</code> array contained in the request. The cookbooks that are returned are often the latest versions of each cookbook. Depending on any constraints present in the request or on dependencies a cookbook may have for specific cookbook versions, a request may not always return the latest cookbook version for each cookbook.</p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "cookbook_name": {
    "recipes": [
      {
        "name": "default.rb",
        "path": "recipes/default.rb",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        "name": "recipe_name.rb",
        "path": "recipes/recipe_name.rb",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        ...
      }
    ],
    "definitions": [

    ],
    "libraries": [

    ],
    "attributes": [

    ],
    "files": [

    ],
    "templates": [
      {
        "name": "template_name.erb",
        "path": "templates/default/template_name.erb",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        ...
      }
    ],
    "resources": [

    ],
    "providers": [

    ],
    "root_files": [
      {
        "name": "metadata.rb",
        "path": "metadata.rb",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      }
    ],
    "cookbook_name": "cookbook_name-1.0.2",
    "metadata": {
      "name": "cookbook_name",
      "description": "description",
      "long_description": "",
      "maintainer": "maintainer",
      "maintainer_email": "maintainer@email.com",
      "license": "license",
      "platforms": {
      },
      "dependencies": {
        "cookbook_name": "&gt;= 0.0.0",
        "cookbook_name": "&gt;= 1.2.3",
        ...
        "cookbook_name": "&gt;= 0.1.0"
      },
      "recommendations": {
      },
      "suggestions": {
      },
      "conflicting": {
      },
      "providing": {
        "cookbook_name": "&gt;= 0.0.0",
        "cookbook_name::recipe_name": "&gt;= 0.0.0",
        "cookbook_name::recipe_name": "&gt;= 1.2.3",
        "cookbook_name::recipe_name": "&gt;= 0.1.0"
      },
      "replacing": {
      },
      "attributes": {
      },
      "groupings": {
      },
      "recipes": {
        "cookbook_name": "description",
        "cookbook_name::recipe_name": "",
        ...
        "cookbook_name::recipe_name": ""
      },
      "version": "0.0.0"
    },
    "version": "0.0.0",
    "name": "cookbook_name-1.0.2",
    "frozen?": false,
    "chef_type": "cookbook_version",
    "json_class": "Chef::CookbookVersion"
  },
  "cookbook_name": {
     "recipes": [
      {
        "name": "default.rb",
        "path": "recipes/default.rb",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
    ],
    "definitions": [

    ],
    "libraries": [
      {
        "name": "library_file.rb",
        "path": "libraries/library_file.rb",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      }
    ],
    "attributes": [
      {
        "name": "default.rb",
        "path": "attributes/default.rb",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      }
    ],
    "files": [

    ],
    "templates": [

    ],
    "resources": [

    ],
    "providers": [

    ],
    "root_files": [
      {
        "name": ".gitignore",
        "path": ".gitignore",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        "name": ".kitchen.yml",
        "path": ".kitchen.yml",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        "name": "CHANGELOG.md",
        "path": "CHANGELOG.md",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        "name": "CONTRIBUTING",
        "path": "CONTRIBUTING",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        "name": "LICENSE",
        "path": "LICENSE",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        "name": "metadata.json",
        "path": "metadata.json",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        "name": "metadata.rb",
        "path": "metadata.rb",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
      {
        "name": "README.md",
        "path": "README.md",
        "checksum": "12345efg78912346abcddefg789",
        "specificity": "default",
        "url": "https://URL"
      },
    ],
    "chef_type": "cookbook_version",
    "name": "cookbook_name-1.0.2",
    "cookbook_name": "cookbook_name",
    "version": "1.0.2",
    "metadata": {
      "name": "cookbook_name",
      "description": "description",
      "long_description": "",
      "maintainer": "maintainer",
      "maintainer_email": "maintainer@email.com",
      "license": "license",
      "platforms": {
      },
      "dependencies": {
      },
      "recommendations": {
      },
      "suggestions": {
      },
      "conflicting": {
      },
      "providing": {
      },
      "replacing": {
      },
      "attributes": {
      },
      "groupings": {
      },
      "recipes": {
      },
      "version": "1.0.2"
    },
    "frozen?": true,
    "json_class": "Chef::CookbookVersion"
  },
  "cookbook_name": {
   ...
  }
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">412</code></td> <td>Not allowed. A set of cookbooks and/or cookbook versions could not be found that met all of the requirements of the run-list. A cookbook in the run-list may not exist. A dependency may be present for a cookbook that does not exist. A constraint on a cookbook made by a run-list, environment, or cookbook version, may not match an available cookbook version.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="environments-name-cookbooks">/environments/NAME/cookbooks</h3> <p>The <code class="docutils literal">/environments/NAME/cookbooks</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id52">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of cookbooks and cookbook versions that are available to the specified environment.</p> <p>This method has the following parameters:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Parameter</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">num_versions=n</code></td> <td>The number of cookbook versions to include in the response, where <code class="docutils literal">n</code> is the number of cookbook versions. For example: <code class="docutils literal">num_versions=3</code> returns the three latest versions, in descending order (newest to oldest). Use <code class="docutils literal">num_versions=all</code> to return all cookbook versions. If <code class="docutils literal">num_versions</code> is not specified, a single cookbook version is returned. <code class="docutils literal">0</code> is an invalid input (an empty array for the versions of each cookbook is returned).</td> </tr> </tbody> </table> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/environments/NAME/cookbooks</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "apache2": {
    "url": "https://localhost/cookbooks/apache2",
    "versions": [
      {"url": "https://localhost/cookbooks/apache2/5.1.0",
       "version": "5.1.0"},
      {"url": "https://localhost/cookbooks/apache2/4.2.0",
       "version": "4.2.0"}
    ]
  },
  "nginx": {
    "url": "https://localhost/cookbooks/nginx",
    "versions": [
      {"url": "https://localhost/cookbooks/nginx/1.0.0",
       "version": "1.0.0"},
      {"url": "https://localhost/cookbooks/nginx/0.3.0",
       "version": "0.3.0"}
    ]
  }
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="environments-name-nodes">/environments/NAME/nodes</h3> <p>The <code class="docutils literal">/environments/NAME/nodes</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id53">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a list of nodes in a given environment.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/environments/NAME/nodes</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "blah": "https://api.opscode.com/org/org_name/nodes/_default",
  "boxer": "https://api.opscode.com/org/org_name/nodes/frontend",
  "blarrrrgh": "https://api.opscode.com/org/org_name/nodes/backend"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="environments-name-recipes">/environments/NAME/recipes</h3> <p>The <code class="docutils literal">/environments/NAME/recipes</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id54">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a list of recipes available to a given environment.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/environments/NAME/recipes</pre> <p>where the first instance of <code class="docutils literal">NAME</code> is the name of the environment, and the second instance is the name of the recipe.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-none" data-language="none">[
  "ant",
  "apache2",
  "apache2::mod_auth_openid",
  "apache2::mod_authnz_ldap",
  "apt",
  "aws",
  "capistrano",
  "chef",
  "chef::bootstrap_client",
  "chef-client::config",
  "chef-client",
  ...
]</pre> <p>The list of recipes will be the default recipes for a given cookbook. If an environment has multiple versions of a cookbook that matches its constraints, only the recipes from the latest version of that cookbook will be reported.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="environments-name-roles-name">/environments/NAME/roles/NAME</h3> <p>The <code class="docutils literal">/environments/NAME/roles/NAME</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id55">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return the <code class="docutils literal">run_list</code> attribute of the role (when the name of the environment is <code class="docutils literal">_default</code>) or to return <code class="docutils literal">env_run_lists[environment_name]</code> (for non-default environments).</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The behavior of this endpoint is identical to <code class="docutils literal">GET /roles/NAME/environments/NAME</code>; it is recommended (but not required) that <code class="docutils literal">GET /roles/NAME/environments/NAME</code> be used instead of this endpoint.</p> </div> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/environments/NAME/roles/NAME</pre> <p>where the first instance of <code class="docutils literal">NAME</code> is the name of the environment, and the second instance is the name of the role.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "run_list": [
    "recipe[recipe_name]",
    "role[role_name]",
    "recipe[recipe_name]",
    "role[role_name]",
    "recipe[recipe_name]",
    "role[role_name]"
  ]
}</pre> <p>The chef-client will pick up the <code class="docutils literal">_default</code> run-list if <code class="docutils literal">env_run_list[environment_name]</code> is null or nonexistent.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="groups">/groups</h3> <p>The <code class="docutils literal">/groups</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p>  <h4 id="id56">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of groups on the Chef server for a single organization.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/groups</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "33a5c28a8efe11e195005fsaes25400298d3f": "https://url/for/group1",
  "admins": "https://url/for/groups/admins",
  "billing-admins": "https://url/for/billing-admins",
  "clients": "https://url/for/clients",
  "developers": "https://url/for/developers",
  "users": "https://url/for/groups/users"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="groups-group-name">/groups/GROUP_NAME</h3> <p>The <code class="docutils literal">/groups/GROUP_NAME</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p>  <h4 id="id57">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of users that belong to a group.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/groups/GROUP_NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "actors": [
    "pivotal",
    "grantmc"
  ],
  "users": [
  "pivotal",
    "grantmc"
  ],
  "clients": [

  ],
  "groups": [

  ],
  "orgname": "inbetweens",
  "name": "admins",
  "groupname": "admins"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="nodes">/nodes</h3> <p>A node is any machine—physical, virtual, cloud, network device, etc.—that is under management by Chef.</p> <p>The <code class="docutils literal">/nodes</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p>  <h4 id="id58">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a hash of URIs for nodes on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/nodes</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "latte": "https://localhost/nodes/latte"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>   <h4 id="id59">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create a new node.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/nodes</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "latte",
  "chef_type": "node",
  "json_class": "Chef::Node",
  "attributes": {
    "hardware_type": "laptop"
  },
  "overrides": {},
  "defaults": {},
  "run_list": [ "recipe[unicorn]" ]
}</pre> <p>where <code class="docutils literal">name</code> is the name of the node. Other attributes are optional. The order of the <code class="docutils literal">run_list</code> attribute matters.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{ "uri": "https://localhost/nodes/latte" }</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">201</code></td> <td>Created. The object was created.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">409</code></td> <td>Conflict. The object already exists.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="nodes-name">/nodes/NAME</h3> <p>The <code class="docutils literal">/nodes/NAME</code> endpoint has the following methods: <code class="docutils literal">DELETE</code>, <code class="docutils literal">GET</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="id60">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete a node.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME/nodes/NAME</pre> <p><strong>Response</strong></p> <p>The response will return the last known state of the node, similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "overrides": {},
  "name": "latte",
  "chef_type": "node",
  "json_class": "Chef::Node",
  "attributes": {
    "hardware_type": "laptop"
  },
  "run_list": [
    "recipe[apache2]"
  ],
  "defaults": {}
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id61">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return the details of a node as JSON.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/nodes/NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "node_name",
  "chef_environment": "_default",
  "run_list": [
    "recipe[recipe_name]"
  ]
  "json_class": "Chef::Node",
  "chef_type": "node",
  "automatic": { ... },
  "normal": { "tags": [ ] },
  "default": { },
  "override": { }
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id62">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to update a node.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /organizations/NAME/nodes/NAME</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "overrides": {},
  "name": "latte",
  "chef_type": "node",
  "json_class": "Chef::Node",
  "attributes": {
    "hardware_type": "laptop"
  },
  "run_list": [
    'recipe[cookbook_name::recipe_name],
    role[role_name]'
  ],
  "defaults": {}
}</pre> <p><strong>Response</strong></p> <p>The response will return the updated node.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="policies">/policies</h3> <p>The <code class="docutils literal">/policies</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id63">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of policies (including policy revisions) from the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/policies</pre> <p><strong>Response</strong></p> <p>The response groups policies by name and revision and is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "aar": {
    "uri": "https://chef.example/organizations/org1/policies/aar",
    "revisions": {
      "37f9b658cdd1d9319bac8920581723efcc2014304b5f3827ee0779e10ffbdcc9": {
      },
      "95040c199302c85c9ccf1bcc6746968b820b1fa25d92477ea2ec5386cd58b9c5": {
      },
      "d81e80ae9bb9778e8c4b7652d29b11d2111e763a840d0cadb34b46a8b2ca4347": {
      }
    }
  },
  "jenkins": {
    "uri": "https://chef.example/organizations/org1/policies/jenkins",
    "revisions": {
      "613f803bdd035d574df7fa6da525b38df45a74ca82b38b79655efed8a189e073": {
      },
      "6fe753184c8946052d3231bb4212116df28d89a3a5f7ae52832ad408419dd5eb": {
      },
      "cc1a0801e75df1d1ea5b0d2c71ba7d31c539423b81478f65e6388b9ee415ad87": {
      }
    }
  }
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>    <h3 id="policy-groups">/policy_groups</h3> <p>The <code class="docutils literal">/policy_groups</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p> <p>Each node has a 1:many relationship with policy settings stored on the Chef server. This relationship is based on the policy group to which the node is associated, and then the policy settings assigned to that group:</p> <ul class="simple"> <li>A policy is typically named after the functional role ahost performs, such as “application server”, “chat server”, “load balancer”, and so on</li> <li>A policy group defines a set of hosts in a deployed units, typically mapped to organizational requirements such as “dev”, “test”, “staging”, and “production”, but can also be mapped to more detailed requirements as needed</li> </ul>   <h3 id="principals-name">/principals/NAME</h3> <p>The <code class="docutils literal">/principals/NAME</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id64">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of public keys for clients and users in order to ensure that enough information is present for authorized requests.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/principals/NAME</pre> <p><strong>Response</strong></p> <p>For a user, the response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "normal_user",
  "type": "user",
  "public_key": "-----BEGIN PUBLIC KEY-----\n
                MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCyVPW9YXa5PR0rgEW1updSxygB\n
                wmVpDnHurgQ7/gbh+PmY49EZsfrZSbKgSKy+rxdsVoSoU+krYtHvYIwVfr2tk0FP\n
                nhAWJaFH654KpuCNG6x6iMLtzGO1Ma/VzHnFqoOeSCKHXDhmHwJAjGDTPAgCJQiI\n
                eau6cDNJRiJ7j0/xBwIDAQAB\n
                -----END PUBLIC KEY-----"
}</pre> <p>and for a client, similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "client_node",
  "type": "client",
  "public_key": "-----BEGIN PUBLIC KEY-----\n
                MIEfGVG0GCSqGSIb3DQEBAQUAA4RRFEDCVgftg67j8dgsdfges0rgEW1updSxygB\n
                wmVpDnHuqwe7/gbh+PmY49EZsfrZSbKgSKy+rxKJHREGJ5tgCtHvYIwVfr2tk0FP\n
                nhAWJaFH654KpuCNG6x6iMLt5FGH1Ma/VzHnFqoOeSCKHDhmHwJAjGDTPAgCJQiI\n
                elk8UFCN45Jj0/xBwIDAQAB\n
                -----END PUBLIC KEY-----"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="roles">/roles</h3> <p>A role is a way to define certain patterns and processes that exist across nodes in an organization as belonging to a single job function. Each role consists of zero (or more) attributes and a run-list. Each node can have zero (or more) roles assigned to it. When a role is run against a node, the configuration details of that node are compared against the attributes of the role, and then the contents of that role’s run-list are applied to the node’s configuration details. When a chef-client runs, it merges its own attributes and run-lists with those contained within each assigned role.</p> <p>The <code class="docutils literal">/roles</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p>  <h4 id="id65">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to get a list of roles along with their associated URIs.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/roles</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "webserver": "https://localhost/roles/webserver"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>   <h4 id="id66">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create a new role on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/roles</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "webserver",
  "chef_type": "role",
  "json_class": "Chef::Role",
  "default_attributes": {},
  "description": "A webserver",
  "run_list": [
    "recipe[unicorn]",
    "recipe[apache2]"
  ],
  "override_attributes": {}
}</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{ "uri": "https://localhost/roles/webserver" }</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">201</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">409</code></td> <td>Conflict. The object already exists.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="roles-name">/roles/NAME</h3> <p>The <code class="docutils literal">/roles/NAME</code> endpoint has the following methods: <code class="docutils literal">GET</code>, <code class="docutils literal">DELETE</code>, and <code class="docutils literal">PUT</code>.</p>  <h4 id="id67">DELETE</h4> <p>The <code class="docutils literal">DELETE</code> method is used to delete a role on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">DELETE /organizations/NAME/roles/NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "webserver",
  "chef_type": "role",
  "json_class": "Chef::Role",
  "default_attributes": {},
  "description": "A webserver",
  "run_list": [
    "recipe[apache2]"
  ],
  "override_attributes": {}
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id68">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return the details for a role as JSON.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/roles/NAME</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "webserver",
  "chef_type": "role",
  "json_class": "Chef::Role",
  "default_attributes": {},
  "description": "A webserver",
  "run_list": [
    "recipe[unicorn]",
    "recipe[apache2]"
  ],
  "override_attributes": {}
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id69">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to update a role on the Chef server.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /organizations/NAME/roles/NAME</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "webserver",
  "chef_type": "role",
  "json_class": "Chef::Role",
  "default_attributes": {},
  "description": "A webserver",
  "run_list": [
    "recipe[apache2]"
  ],
  "override_attributes": {}
}</pre> <p><strong>Response</strong></p> <p>The response will return the JSON for the updated role.</p> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="roles-name-environments">/roles/NAME/environments</h3> <p>The <code class="docutils literal">/roles/NAME/environments</code> endpoint has the following method: <code class="docutils literal">GET</code>.</p>  <h4 id="id70">GET</h4> <p>The <code class="docutils literal">GET</code> method returns a list of the environments that have environment-specific run-lists in the given role as JSON data.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/roles/NAME/environments</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">["_default","production","qa"]</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="roles-name-environments-name">/roles/NAME/environments/NAME</h3> <p>The <code class="docutils literal">/roles/NAME/environments/NAME</code> endpoint has the following method: <code class="docutils literal">GET</code>.</p>  <h4 id="id71">GET</h4> <p>The <code class="docutils literal">GET</code> method returns the environment-specific run-list (<code class="docutils literal">env_run_lists[environment_name]</code>) for a role.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/roles/NAME/environments/NAME</pre> <p>where the first <code class="docutils literal">NAME</code> is the name of the role and the second is the name of the environment.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{"run_list":["recipe[foo]"]}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>    <h3 id="sandboxes">/sandboxes</h3> <p>A sandbox is used to commit files so they only need to be updated one time, as opposed to every time a cookbook is uploaded. The <code class="docutils literal">/sandboxes</code> endpoint has the following methods: <code class="docutils literal">POST</code>.</p>  <h4 id="id72">POST</h4> <p>The <code class="docutils literal">POST</code> method is used to create a new sandbox. This method accepts a list of checksums as input and returns the URLs against which to <code class="docutils literal">PUT</code> files that need to be uploaded.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">POST /organizations/NAME/sandboxes</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{"checksums": {
  "385ea5490c86570c7de71070bce9384a":null,
  "f6f73175e979bd90af6184ec277f760c":null,
  "2e03dd7e5b2e6c8eab1cf41ac61396d5":null
  }
}</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{"uri":
 "https://api.opscode.com/organizations/testorg/sandboxes/eff7b6f8b3ef44c6867216662d5eeb5f",
 "checksums":
   {"385ea5490c86570c7de71070bce9384a":
     {"url":
      "https://s3.amazonaws.com/opscode-platform-production-data/organization-(...)",
       "needs_upload":true},
       "f6f73175e979bd90af6184ec277f760c"=&gt;
     {"url":
       "https://s3.amazonaws.com/opscode-platform-production-data/organization-(...)",
       "needs_upload":true},
       "2e03dd7e5b2e6c8eab1cf41ac61396d5":
     {"url":
       "https://s3.amazonaws.com/opscode-platform-production-data/organization-(...)",
       "needs_upload":true}
   },
 "sandbox_id"=&gt;"eff7b6f8b3ef44c6867216662d5eeb5f"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful. A hash that maps each checksum to a hash that contains a boolean <code class="docutils literal">needs_upload</code> field and a URL if <code class="docutils literal">needs_upload</code> is set to <code class="docutils literal">true</code>.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The object has already been committed or one (or more) of the objects were not properly uploaded. The payload does not contain a well-formed <code class="docutils literal">checksums</code> parameter that is a hash containing a key for each checksum.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="sandboxes-id">/sandboxes/ID</h3> <p>Each sandbox has a unique identifier. The <code class="docutils literal">/sandboxes/ID</code> endpoint has the following methods: <code class="docutils literal">PUT</code>.</p>  <h4 id="id73">PUT</h4> <p>The <code class="docutils literal">PUT</code> method is used to commit files that are in a sandbox to their final location so that changes to cookbooks will not require re-uploading the same data.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">PUT /organizations/NAME/sandboxes/ID</pre> <p>with a request body similar to:</p> <pre class="highlight-javascript" data-language="javascript">{"is_completed":true}</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "guid": guid,
  "name": guid,
  "checksums":
    {"385ea5490c86570c7de71070bce9384a":
    {"url":
      "https://s3.amazonaws.com/opscode-platform-production-data/organization-(...)",
      "needs_upload":true}
  },
  "create_time": &lt;get an example of time format&gt;,
  "is_completed": true
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">400</code></td> <td>Bad request. The contents of the request are not formatted correctly.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="search">/search</h3> <p>Search indexes allow queries to be made for any type of data that is indexed by the Chef server, including data bags (and data bag items), environments, nodes, and roles. A defined query syntax is used to support search patterns like exact, wildcard, range, and fuzzy. A search is a full-text query that can be done from several locations, including from within a recipe, by using the <code class="docutils literal">search</code> subcommand in knife, the <code class="docutils literal">search</code> method in the Recipe DSL, the search box in the Chef management console, and by using the <code class="docutils literal">/search</code> or <code class="docutils literal">/search/INDEX</code> endpoints in the Chef server API. The search engine is based on Apache Solr and is run from the Chef server.</p> <p>The <code class="docutils literal">/search</code> endpoint allows nodes, roles, data bags, environments to be searched. This endpoint has the following methods: <code class="docutils literal">GET</code>.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">At the end of every chef-client run, the node object is saved to the Chef server. From the Chef server, each node object is then added to the Apache Solr search index. This process is asynchronous. By default, node objects are committed to the search index every 60 seconds or per 1000 node objects, whichever occurs first.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This endpoint does not have any ACL restrictions, which means it may be used by any user or client that is able to make the request to the Chef server.</p> </div>  <h4 id="id74">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return a data structure that contains links to each available search index. By default, the <code class="docutils literal">role</code>, <code class="docutils literal">node</code>, <code class="docutils literal">client</code>, and <code class="docutils literal">data bag</code> indexes will always be available (where the <code class="docutils literal">data bag</code> index is the name of the data bag on the Chef server). Search indexes may lag behind the most current data at any given time. If a situation occurs where data needs to be written and then immediately searched, an artificial delay (of at least 10 seconds) is recommended.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/search</pre> <p>This method has no request body.</p> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "node": "https://localhost/search/node",
  "role": "https://localhost/search/role",
  "client": "https://localhost/search/client",
  "users": "https://localhost/search/users"
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> </tbody> </table>    <h3 id="search-index">/search/INDEX</h3> <p>Use the <code class="docutils literal">/search/INDEX</code> endpoint to access the search indexes on the Chef server. The <code class="docutils literal">/search/INDEX</code> endpoint has the following methods: <code class="docutils literal">GET</code> and <code class="docutils literal">POST</code>.</p> <p>A search query is comprised of two parts: the key and the search pattern. A search query has the following syntax:</p> <pre class="highlight-ruby" data-language="ruby">key:search_pattern</pre> <p>where <code class="docutils literal">key</code> is a field name that is found in the JSON description of an indexable object on the Chef server (a role, node, client, environment, or data bag) and <code class="docutils literal">search_pattern</code> defines what will be searched for, using one of the following search patterns: exact, wildcard, range, or fuzzy matching. Both <code class="docutils literal">key</code> and <code class="docutils literal">search_pattern</code> are case-sensitive; <code class="docutils literal">key</code> has limited support for multiple character wildcard matching using an asterisk (“*”) (and as long as it is not the first character).</p>  <h4 id="id75">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return all of the data that matches the query in the <code class="docutils literal">GET</code> request.</p> <p>This method has the following parameters:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Parameter</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">q</code></td> <td>The search query used to identify a list of items on a Chef server. This option uses the same syntax as the <code class="docutils literal">search</code> subcommand.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">rows</code></td> <td>The number of rows to be returned.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">sort</code></td> <td>The order in which search results are to be sorted.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">start</code></td> <td>The row at which return results begin.</td> </tr> </tbody> </table> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/search/INDEX</pre> <p><strong>Response</strong></p> <p>The response contains the total number of rows that match the request and is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
 "total": 1,
 "start": 0,
 "rows": [
    {
     "overrides": {"hardware_type": "laptop"},
     "name": "latte",
     "chef_type": "node",
     "json_class": "Chef::Node",
     "attributes": {"hardware_type": "laptop"},
     "run_list": ["recipe[unicorn]"],
     "defaults": {}
    }
  ]
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>   <h4 id="id76">POST</h4> <p>A partial search query allows a search query to be made against specific attribute keys that are stored on the Chef server. A partial search query can search the same set of objects on the Chef server as a full search query, including specifying an object index and providing a query that can be matched to the relevant index. While a full search query will return an array of objects that match (each object containing a full set of attributes for the node), a partial search query will return only the values for the attributes that match. One primary benefit of using a partial search query is that it requires less memory and network bandwidth while the chef-client processes the search results.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">To use the <code class="docutils literal">partial_search</code> method in a recipe, that recipe must contain a dependency on the <code class="docutils literal">partial_search</code> cookbook.</p> </div> <p>To create a partial search query, use the <code class="docutils literal">partial_search</code> method, and then specify the key paths for the attributes to be returned. Each key path should be specified as an array of strings and is mapped to an arbitrary short name. For example:</p> <pre class="highlight-ruby" data-language="ruby">partial_search(:node, 'role:web',
  :keys =&gt; { 'name' =&gt; [ 'name' ],
             'ip'   =&gt; [ 'ipaddress' ],
             'kernel_version' =&gt; [ 'kernel', 'version' ]
           }
).each do |result|
  puts result['name']
  puts result['ip']
  puts result['kernel_version']
end</pre> <p>In the previous example, two attributes will be extracted (on the Chef server) from any node that matches the search query. The result will be a simple hash with keys <code class="docutils literal">name</code>, <code class="docutils literal">ip</code>, and <code class="docutils literal">kernel_version</code>.</p> <p>The <code class="docutils literal">POST</code> method is used to return partial search results. For example, if a node has the following:</p> <pre class="highlight-none" data-language="none">{
  'x' =&gt; 'foo',
  'kernel' =&gt; { 'a' =&gt; 1, 'foo' =&gt; 'bar', 'version' =&gt; [ 1, 2, 3 ] }
}</pre> <p>a partial search query can be used to return something like:</p> <pre class="highlight-none" data-language="none">{ 'kernel_version' =&gt; [ 1, 2, 3 ] }</pre> <p>This method has the following parameters:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Parameter</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">q</code></td> <td>The search query used to identify a list of items on a Chef server. This option uses the same syntax as the <code class="docutils literal">search</code> subcommand.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">rows</code></td> <td>The number of rows to be returned.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">sort</code></td> <td>The order in which search results are to be sorted.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">start</code></td> <td>The row at which return results begin.</td> </tr> </tbody> </table> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/search</pre> <p>with a request body similar to:</p> <pre class="highlight-none" data-language="none">{
  'name' =&gt; [ 'name' ],
  'ip'   =&gt; [ 'ipaddress' ],
  'kernel_version' =&gt; [ 'kernel', 'version' ]
}</pre> <p><strong>Response</strong></p> <p>The response is similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name": "latte",
  "ip": "123.4.5.6789",
  "kernel_version": {"linux": "1.2.3"}
}</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">413</code></td> <td>Request entity too large. A request may not be larger than 1000000 bytes.</td> </tr> </tbody> </table>    <h3 id="status">_status</h3> <p>The <code class="docutils literal">/_status</code> endpoint can be used to check the status of communications between the front and back end servers. This endpoint is located at <code class="docutils literal">/_status</code> on the front end servers.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">api.get("https://chef_server.front_end.url/_status")</pre> <p>This method has no request body.</p> <p><strong>Response</strong></p> <p>The response will return something like the following:</p> <pre class="highlight-javascript" data-language="javascript">{
  "status": "pong",
  "upstreams":
    {
      "service_name": "pong",
      "service_name": "pong",
      ...
    }
 }</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>All communications are OK.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">500</code></td> <td>
<p class="first">One (or more) services are down. For example:</p> <pre class="last highlight-javascript" data-language="javascript">{
  "status":"fail",
  "upstreams":
    {
      "service_name": "fail",
      "service_name": "pong",
      ...
    }
}</pre> </td> </tr> </tbody> </table>   <h3 id="universe">/universe</h3> <p>Use the <code class="docutils literal">/universe</code> endpoint to retrieve the known collection of cookbooks, and then use it with Berkshelf and Chef Supermarket.</p> <p>The <code class="docutils literal">/universe</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p>  <h4 id="id77">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to retrieve the universe data.</p> <p>This method has no parameters.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /universe</pre> <p><strong>Response</strong></p> <p>The response will return an embedded hash, with the name of each cookbook as a top-level key. Each cookbook will list each version, along with its location information and dependencies:</p> <pre class="highlight-javascript" data-language="javascript">{
  "ffmpeg": {
    "0.1.0": {
      "location_path": "http://supermarket.chef.io/api/v1/cookbooks/ffmpeg/0.1.0/download"
      "location_type": "supermarket",
      "dependencies": {
        "git": "&gt;= 0.0.0",
        "build-essential": "&gt;= 0.0.0",
        "libvpx": "~&gt; 0.1.1",
        "x264": "~&gt; 0.1.1"
      },
    },
    "0.1.1": {
      "location_path": "http://supermarket.chef.io/api/v1/cookbooks/ffmpeg/0.1.1/download"
      "location_type": "supermarket",
      "dependencies": {
        "git": "&gt;= 0.0.0",
        "build-essential": "&gt;= 0.0.0",
        "libvpx": "~&gt; 0.1.1",
        "x264": "~&gt; 0.1.1"
      },
    },
   "pssh": {
    "0.1.0": {
      "location_path": "http://supermarket.chef.io/api/v1/cookbooks/pssh.1.0/download"
      "location_type": "supermarket",
      "dependencies": {},
    }
  }
}</pre> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful. One (or more) cookbooks and associated cookbook version information was returned.</td> </tr> </tbody> </table>    <h3 id="updated-since">/updated_since</h3> <p>The <code class="docutils literal">/updated_since</code> endpoint ensures that replica instances of the Chef server are able to synchronize with the primary Chef server. The <code class="docutils literal">/organizations/NAME/updated_since</code> endpoint has the following methods: <code class="docutils literal">GET</code>.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">This update is available after Chef replication is installed on the Chef server.</p> </div>  <h4 id="id78">GET</h4> <p>The <code class="docutils literal">GET</code> method is used to return the details of an organization as JSON.</p> <p><strong>Request</strong></p> <pre class="highlight-none" data-language="none">GET /organizations/NAME/objects_since?seq=NUM</pre> <p>where <code class="docutils literal">NUM</code> is the largest integer previously returned as an identifier.</p> <p><strong>Response</strong></p> <p>The response will return an array of paths for objects that have been created, updated, or deleted since <code class="docutils literal">NUM</code>, similar to:</p> <pre class="highlight-javascript" data-language="javascript">[
  {
    "action": "create",
    "id": 1,
    "path": "/roles/foo"
  },
  {
    "action": "create",
    "id": 2,
    "path": "/roles/foo2"
  },
  {
    "action": "create",
    "id": 3,
    "path": "/roles/foo3"
  },
  {
    "action": "update",
    "id": 4,
    "path": "/roles/foo3"
  }
]</pre> <p><strong>Response Codes</strong></p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Response Code</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">200</code></td> <td>OK. The request was successful.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">401</code></td> <td>Unauthorized. The user or client who made the request could not be authenticated. Verify the user/client name, and that the correct key was used to sign the request.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">403</code></td> <td>Forbidden. The user who made the request is not authorized to perform the action.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">404</code></td> <td>Not found. The requested object does not exist.</td> </tr> </tbody> </table>     <h2 id="examples">Examples</h2> <p>The following sections show examples of using the Chef server API.</p>  <h3 id="query-for-users-and-orgs">Query for Users and Orgs</h3> <p>The following example shows how to query the Chef server API for a listing of organizations and users. The <code class="docutils literal">/organizations</code> and <code class="docutils literal">/users</code> endpoints may only be accessed by the <code class="docutils literal">pivotal</code> user, which is a user account that is created by Chef during the installation of the Chef server.</p> <p>Run the following from a <code class="docutils literal">.chef</code> directory that contains a <code class="docutils literal">pivotal.rb</code> file:</p> <pre class="highlight-ruby" data-language="ruby">require 'chef'
require 'chef/rest'

Chef::Config.from_file(".chef/pivotal.rb")
rest = Chef::REST.new(Chef::Config[:chef_server_url])
orgs = rest.get_rest("/organizations")

puts "\n=== Listing of organizations"
orgs.each do |org|
  puts org
end

puts "\n=== Listing of Users"
users = rest.get_rest("/users")
users.each do |user|
  puts user
end</pre> <p>An examle of a <code class="docutils literal">.chef/pivotal.rb</code> file is shown below:</p> <pre class="highlight-ruby" data-language="ruby">current_dir = File.dirname(__FILE__)
node_name "pivotal"
chef_server_url "https://192.168.1.2:443"
chef_server_root "https://192.168.1.2:443"
client_key "#{current_dir}/pivotal.pem"</pre> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The <code class="docutils literal">pivotal.pem</code> file must exist in the specified location and the IP addresses must be correct for the Chef server.</p> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef™ Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs-archive.chef.io/release/server_12-8/api_chef_server.html" class="_attribution-link">https://docs-archive.chef.io/release/server_12-8/api_chef_server.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
