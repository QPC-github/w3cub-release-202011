
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Organizations and Groups - Chef 12 - W3cubDocs</title>
  
  <meta name="description" content="The Chef server uses role-based access control (RBAC) to restrict access to objects—nodes, environments, roles, data bags, cookbooks, and so on. &hellip;">
  <meta name="keywords" content="organizations, and, groups, chef, chef~12">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/chef~12/server_12-8/server_orgs.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/chef~12.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/chef~12/" class="_nav-link" title="" style="margin-left:0;">Chef 12</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="organizations-and-groups">Organizations and Groups</h1> <p>The Chef server uses role-based access control (RBAC) to restrict access to objects—nodes, environments, roles, data bags, cookbooks, and so on. This ensures that only authorized user and/or chef-client requests to the Chef server are allowed. Access to objects on the Chef server is fine-grained, allowing access to be defined by object type, object, group, user, and organization. The Chef server uses permissions to define how a user may interact with an object, after they have been authorized to do so.</p> <p>The Chef server uses organizations, groups, and users to define role-based access control:</p> <table class="docutils"> <colgroup> <col width="19%"> <col width="81%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Feature</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>
<img src="https://docs-archive.chef.io/release/server_12-8/_images/icon_server_organization.svg" width="100px">  </td> <td>An organization is the top-level entity for role-based access control in the Chef server. Each organization contains the default groups (<code class="docutils literal">admins</code>, <code class="docutils literal">clients</code>, and <code class="docutils literal">users</code>, plus <code class="docutils literal">billing_admins</code> for the hosted Chef server), at least one user and at least one node (on which the chef-client is installed). The Chef server supports multiple organizations. The Chef server includes a single default organization that is defined during setup. Additional organizations can be created after the initial setup and configuration of the Chef server.</td> </tr> <tr class="row-odd">
<td>
<img src="https://docs-archive.chef.io/release/server_12-8/_images/icon_server_groups.svg" width="100px">  </td> <td>
<p class="first">A group is used to define access to object types and objects in the Chef server and also to assign permissions that determine what types of tasks are available to members of that group who are authorized to perform them. Groups are configured per-organization.</p> <p class="last">Individual users who are members of a group will inherit the permissions assigned to the group. The Chef server includes the following default groups: <code class="docutils literal">admins</code>, <code class="docutils literal">clients</code>, and <code class="docutils literal">users</code>. For users of the hosted Chef server, an additional default group is provided: <code class="docutils literal">billing_admins</code>.</p> </td> </tr> <tr class="row-even">
<td>
<img src="https://docs-archive.chef.io/release/server_12-8/_images/icon_server_users.svg" width="100px">  </td> <td>A user is any non-administrator human being who will manage data that is uploaded to the Chef server from a workstation or who will log on to the Chef management console web user interface. The Chef server includes a single default user that is defined during setup and is automatically assigned to the <code class="docutils literal">admins</code> group.</td> </tr> <tr class="row-odd">
<td>
<img src="https://docs-archive.chef.io/release/server_12-8/_images/icon_chef_client.svg" width="100px">  </td> <td>A client is an actor that has permission to access the Chef server. A client is most often a node (on which the chef-client runs), but is also a workstation (on which knife runs), or some other machine that is configured to use the Chef server API. Each request to the Chef server that is made by a client uses a private key for authentication that must be authorized by the public key on the Chef server.</td> </tr> </tbody> </table> <p>When a user makes a request to the Chef server using the Chef server API, permission to perform that action is determined by the following process:</p> <ol class="arabic simple"> <li>Check if the user has permission to the object type</li> <li>If no, recursively check if the user is a member of a security group that has permission to that object</li> <li>If yes, allow the user to perform the action</li> </ol> <p>Permissions are managed using the Chef management console add-on in the Chef server web user interface.</p>  <h2 id="multiple-organizations">Multiple Organizations</h2> <p>A single instance of the Chef server can support many organizations. Each organization has a unique set of groups and users. Each organization manages a unique set of nodes, on which a chef-client is installed and configured so that it may interact with a single organization on the Chef server.</p> <img alt="_images/server_rbac_orgs_groups_and_users.png" src="https://docs-archive.chef.io/release/server_12-8/_images/server_rbac_orgs_groups_and_users.png"> <p>A user may belong to multiple organizations under the following conditions:</p> <ul class="simple"> <li>Role-based access control is configured per-organization</li> <li>For a single user to interact with the Chef server using knife from the same chef-repo, that user may need to edit their knife.rb file prior to that interaction</li> </ul> <p>Using multiple organizations within the Chef server ensures that the same toolset, coding patterns and practices, physical hardware, and product support effort is being applied across the entire company, even when:</p> <ul class="simple"> <li>Multiple product groups must be supported—each product group can have its own security requirements, schedule, and goals</li> <li>Updates occur on different schedules—the nodes in one organization are managed completely independently from the nodes in another</li> <li>Individual teams have competing needs for object and object types—data bags, environments, roles, and cookbooks are unique to each organization, even if they share the same name</li> </ul>   <h2 id="permissions">Permissions</h2> <p>Permissions are used in the Chef server to define how users and groups can interact with objects on the server. Permissions are configured per-organization.</p>  <h3 id="object-permissions">Object Permissions</h3> <p>The Chef server includes the following object permissions:</p> <table class="docutils"> <colgroup> <col width="13%"> <col width="88%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Permission</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><strong>Delete</strong></td> <td>Use the <strong>Delete</strong> permission to define which users and groups may delete an object. This permission is required for any user who uses the <code class="docutils literal">knife [object] delete [object_name]</code> argument to interact with objects on the Chef server.</td> </tr> <tr class="row-odd">
<td><strong>Grant</strong></td> <td>Use the <strong>Grant</strong> permission to define which users and groups may configure permissions on an object. This permission is required for any user who configures permissions using the <strong>Administration</strong> tab in the Chef management console.</td> </tr> <tr class="row-even">
<td><strong>Read</strong></td> <td>Use the <strong>Read</strong> permission to define which users and groups may view the details of an object. This permission is required for any user who uses the <code class="docutils literal">knife [object] show [object_name]</code> argument to interact with objects on the Chef server.</td> </tr> <tr class="row-odd">
<td><strong>Update</strong></td> <td>Use the <strong>Update</strong> permission to define which users and groups may edit the details of an object. This permission is required for any user who uses the <code class="docutils literal">knife [object] edit [object_name]</code> argument to interact with objects on the Chef server and for any chef-client to save node data to the Chef server at the conclusion of a chef-client run.</td> </tr> </tbody> </table>   <h3 id="global-permissions">Global Permissions</h3> <p>The Chef server includes the following global permissions:</p> <table class="docutils"> <colgroup> <col width="13%"> <col width="88%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Permission</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><strong>Create</strong></td> <td>Use the <strong>Create</strong> global permission to define which users and groups may create the following server object types: cookbooks, data bags, environments, nodes, roles, and tags. This permission is required for any user who uses the <code class="docutils literal">knife [object] create</code> argument to interact with objects on the Chef server.</td> </tr> <tr class="row-odd">
<td><strong>List</strong></td> <td>Use the <strong>List</strong> global permission to define which users and groups may view the following server object types: cookbooks, data bags, environments, nodes, roles, and tags. This permission is required for any user who uses the <code class="docutils literal">knife [object] list</code> argument to interact with objects on the Chef server.</td> </tr> </tbody> </table> <p>These permissions set the default permissions for the following Chef server object types: clients, cookbooks, data bags, environments, groups, nodes, roles, and sandboxes.</p>   <h3 id="client-key-permissions">Client Key Permissions</h3> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This is only necessary after migrating a client from one Chef server to another. Permissions must be reset for client keys after the migration.</p> </div> <p>A client is an actor that has permission to access the Chef server. A client is most often a node (on which the chef-client runs), but is also a workstation (on which knife runs), or some other machine that is configured to use the Chef server API. Each request to the Chef server that is made by a client uses a private key for authentication that must be authorized by the public key on the Chef server.</p> <p>Keys should have <code class="docutils literal">DELETE</code>, <code class="docutils literal">GRANT</code>, <code class="docutils literal">READ</code> and <code class="docutils literal">UPDATE</code> permissions.</p> <p>Use the following code to set the correct permissions:</p> <pre class="highlight-ruby" data-language="ruby">#!/usr/bin/env ruby
require 'rubygems'
require 'chef/knife'

Chef::Config.from_file(File.join(Chef::Knife.chef_config_dir, 'knife.rb'))

rest = Chef::REST.new(Chef::Config[:chef_server_url])

Chef::Node.list.each do |node|
  %w{read update delete grant}.each do |perm|
    ace = rest.get("nodes/#{node[0]}/_acl")[perm]
    ace['actors'] &lt;&lt; node[0] unless ace['actors'].include?(node[0])
    rest.put("nodes/#{node[0]}/_acl/#{perm}", perm =&gt; ace)
    puts "Client \"#{node[0]}\" granted \"#{perm}\" access on node \"#{node[0]}\""
  end
end</pre> <p>Save it as a Ruby script—<code class="docutils literal">chef_server_permissions.rb</code>, for example—in the <code class="docutils literal">.chef/scripts</code> directory located in the chef-repo, and then run a knife command similar to:</p> <pre class="highlight-bash" data-language="bash">$ knife exec chef_server_permissions.rb</pre>   <h3 id="default-permissions">Default Permissions</h3> <p>A group is used to define access to object types and objects in the Chef server and also to assign permissions that determine what types of tasks are available to members of that group who are authorized to perform them. Groups are configured per-organization.</p> <p>Individual users who are members of a group will inherit the permissions assigned to the group. The Chef server includes the following default groups: <code class="docutils literal">admins</code>, <code class="docutils literal">clients</code>, and <code class="docutils literal">users</code>. For users of the hosted Chef server, an additional default group is provided: <code class="docutils literal">billing_admins</code>.</p>    <h2 id="groups">Groups</h2> <p>A group is used to define access to object types and objects in the Chef server and also to assign permissions that determine what types of tasks are available to members of that group who are authorized to perform them. Groups are configured per-organization.</p> <p>Individual users who are members of a group will inherit the permissions assigned to the group. The Chef server includes the following default groups: <code class="docutils literal">admins</code>, <code class="docutils literal">clients</code>, and <code class="docutils literal">users</code>. For users of the hosted Chef server, an additional default group is provided: <code class="docutils literal">billing_admins</code>.</p>  <h3 id="default-groups">Default Groups</h3> <p>The following sections show the default permissions assigned by the Chef server to the <code class="docutils literal">admins</code>, <code class="docutils literal">billing_admins</code>, <code class="docutils literal">clients</code>, and <code class="docutils literal">users</code> groups.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The creator of an object on the Chef server is assigned <code class="docutils literal">create</code>, <code class="docutils literal">delete</code>, <code class="docutils literal">grant</code>, <code class="docutils literal">read</code>, and <code class="docutils literal">update</code> permission to that object.</p> </div>  <h4 id="admins">admins</h4> <p>The <code class="docutils literal">admins</code> group is assigned the following:</p> <table class="docutils"> <colgroup> <col width="24%"> <col width="15%"> <col width="15%"> <col width="15%"> <col width="15%"> <col width="15%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Group</th> <th class="head">Create</th> <th class="head">Delete</th> <th class="head">Grant</th> <th class="head">Read</th> <th class="head">Update</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>admins</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-odd">
<td>clients</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-even">
<td>users</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> </tbody> </table>   <h4 id="billing-admins">billing_admins</h4> <p>The <code class="docutils literal">billing_admins</code> group is assigned the following:</p> <table class="docutils"> <colgroup> <col width="29%"> <col width="18%"> <col width="18%"> <col width="18%"> <col width="18%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Group</th> <th class="head">Create</th> <th class="head">Delete</th> <th class="head">Read</th> <th class="head">Update</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>billing_admins</td> <td>no</td> <td>no</td> <td>yes</td> <td>yes</td> </tr> </tbody> </table>   <h4 id="clients">clients</h4> <p>The <code class="docutils literal">clients</code> group is assigned the following:</p> <table class="docutils"> <colgroup> <col width="29%"> <col width="18%"> <col width="18%"> <col width="18%"> <col width="18%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Object</th> <th class="head">Create</th> <th class="head">Delete</th> <th class="head">Read</th> <th class="head">Update</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>clients</td> <td>no</td> <td>no</td> <td>no</td> <td>no</td> </tr> <tr class="row-odd">
<td>cookbooks</td> <td>no</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-even">
<td>cookbook_artifacts</td> <td>no</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-odd">
<td>data</td> <td>no</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-even">
<td>environments</td> <td>no</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-odd">
<td>nodes</td> <td>yes</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-even">
<td>organization</td> <td>no</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-odd">
<td>policies</td> <td>no</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-even">
<td>policy_groups</td> <td>no</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-odd">
<td>roles</td> <td>no</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-even">
<td>sandboxes</td> <td>no</td> <td>no</td> <td>no</td> <td>no</td> </tr> </tbody> </table>   <h4 id="public-key-read-access">public_key_read_access</h4> <p>The <code class="docutils literal">public_key_read_access</code> group controls which users and clients have <a class="reference internal" href="api_chef_server">read permissions to the following endpoints</a>:</p> <ul class="simple"> <li>GET /clients/CLIENT/keys</li> <li>GET /clients/CLIENT/keys/KEY</li> <li>GET /users/USER/keys</li> <li>GET /users/USER/keys/</li> </ul> <p>By default, the <code class="docutils literal">public_key_read_access</code> assigns all members of the <code class="docutils literal">users</code> and <code class="docutils literal">clients</code> group permission to these endpoints:</p> <table class="docutils"> <colgroup> <col width="24%"> <col width="15%"> <col width="15%"> <col width="15%"> <col width="15%"> <col width="15%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Group</th> <th class="head">Create</th> <th class="head">Delete</th> <th class="head">Grant</th> <th class="head">Read</th> <th class="head">Update</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>admins</td> <td>no</td> <td>no</td> <td>no</td> <td>no</td> <td>no</td> </tr> <tr class="row-odd">
<td>clients</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-even">
<td>users</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> </tbody> </table>   <h4 id="users">users</h4> <p>The <code class="docutils literal">users</code> group is assigned the following:</p> <table class="docutils"> <colgroup> <col width="29%"> <col width="18%"> <col width="18%"> <col width="18%"> <col width="18%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Object</th> <th class="head">Create</th> <th class="head">Delete</th> <th class="head">Read</th> <th class="head">Update</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>clients</td> <td>no</td> <td>yes</td> <td>yes</td> <td>no</td> </tr> <tr class="row-odd">
<td>cookbooks</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-even">
<td>cookbook_artifacts</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-odd">
<td>data</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-even">
<td>environments</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-odd">
<td>nodes</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-even">
<td>organization</td> <td>no</td> <td>no</td> <td>yes</td> <td>no</td> </tr> <tr class="row-odd">
<td>policies</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-even">
<td>policy_groups</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-odd">
<td>roles</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr class="row-even">
<td>sandboxes</td> <td>yes</td> <td>no</td> <td>no</td> <td>no</td> </tr> </tbody> </table>   <h4 id="chef-validator">chef-validator</h4> <p>Every request made by the chef-client to the Chef server must be an authenticated request using the Chef server API and a private key. When the chef-client makes a request to the Chef server, the chef-client authenticates each request using a private key located in <code class="docutils literal">/etc/chef/client.pem</code>.</p> <p>The chef-validator is allowed to do the following at the start of a chef-client run. After the chef-client is registered with Chef server, that chef-client is added to the <code class="docutils literal">clients</code> group:</p> <table class="docutils"> <colgroup> <col width="29%"> <col width="18%"> <col width="18%"> <col width="18%"> <col width="18%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Object</th> <th class="head">Create</th> <th class="head">Delete</th> <th class="head">Read</th> <th class="head">Update</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>clients</td> <td>yes</td> <td>no</td> <td>no</td> <td>no</td> </tr> </tbody> </table>    <h3 id="chef-push-jobs-groups">Chef Push Jobs Groups</h3> <p>Chef push jobs is an extension of the Chef server that allows jobs to be run against nodes independently of a chef-client run. A job is an action or a command to be executed against a subset of nodes; the nodes against which a job is run are determined by the results of a search query made to the Chef server.</p> <p>Chef push jobs uses the Chef server API and a Ruby client to initiate all connections to the Chef server. Connections use the same authentication and authorization model as any other request made to the Chef server. A knife plugin is used to initiate job creation and job tracking.</p> <p>It is possible to initiate jobs from the chef-client, such as from within a recipe based on an action to be determined as the recipe runs. For a chef-client to be able to create, initiate, or read jobs, the chef-client on which Chef push jobs is configured must belong to one (or both) of the following groups:</p> <table class="docutils"> <colgroup> <col width="13%"> <col width="88%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Group</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">pushy_job_readers</code></td> <td>Use to view the status of jobs.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">pushy_job_writers</code></td> <td>Use to create and initiate jobs.</td> </tr> </tbody> </table> <p>These groups do not exist by default, even after Chef push jobs has been installed to the Chef server. If these groups are not created, only members of the <code class="docutils literal">admin</code> security group will be able to create, initiate, and view jobs.</p>   <h3 id="reporting-groups">Reporting Groups</h3> <p>Use Reporting to keep track of what happens during the execution of chef-client runs across all of the machines that are under management by Chef. Reports can be generated for the entire organization and they can be generated for specific nodes.</p> <p>Reporting data is collected during the chef-client run and the results are posted to the Chef server at the end of the chef-client run at the same time the node object is uploaded to the Chef server.</p> <p>A chef-client on which Reporting is configured always sends data to the Chef server. Users of the Chef management console web user interface must belong to the following group:</p> <table class="docutils"> <colgroup> <col width="13%"> <col width="88%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Group</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">reporting_readers</code></td> <td>Use to view and configure reports.</td> </tr> </tbody> </table> <p>This group does not exist by default, even after Reporting has been installed to the Chef server. If this group is not created, all members of the organization will be unable to view reports.</p>    <h2 id="server-admins">Server Admins</h2> <p>The <code class="docutils literal">server-admins</code> group is a global group that grants its members permission to create, read, update, and delete user accounts, with the exception of superuser accounts. The <code class="docutils literal">server-admins</code> group is useful for users who are responsible for day-to-day administration of the Chef server, especially user management via the <code class="docutils literal">knife user</code> subcommand. Before members can be added to the <code class="docutils literal">server-admins</code> group, they must already have a user account on the Chef server.</p>  <h3 id="scenario">Scenario</h3> <p>The following user accounts exist on the Chef server: <code class="docutils literal">pivotal</code> (a superuser account), <code class="docutils literal">alice</code>, <code class="docutils literal">bob</code>, <code class="docutils literal">carol</code>, and <code class="docutils literal">dan</code>. Run the following command to view a list of users on the Chef server:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl user-list</pre> <p>and it returns the same list of users:</p> <pre class="highlight-bash" data-language="bash">pivotal
alice
bob
carol
dan</pre> <p>Alice is a member of the IT team whose responsibilities include day-to-day administration of the Chef server, in particular managing the user accounts on the Chef server that are used by the rest of the organization. From a workstation, Alice runs the following command:</p> <pre class="highlight-bash" data-language="bash">$ knife user list -c ~/.chef/alice.rb</pre> <p>and it returns the following error:</p> <pre class="highlight-bash" data-language="bash">ERROR: You authenticated successfully to &lt;chef_server_url&gt; as alice
       but you are not authorized for this action
Response: Missing read permission</pre> <p>Alice is not a superuser and does not have permissions on other users because user accounts are global to organizations in the Chef server. Let’s add Alice to the <code class="docutils literal">server-admins</code> group:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl grant-server-admin-permissions alice</pre> <p>and it returns the following response:</p> <pre class="highlight-bash" data-language="bash">User alice was added to server-admins.</pre> <p>Alice can now create, read, update, and delete user accounts on the Chef server, even for organizations to which Alice is not a member. From a workstation, Alice re-runs the following command:</p> <pre class="highlight-bash" data-language="bash">$ knife user list -c ~/.chef/alice.rb</pre> <p>which now returns:</p> <pre class="highlight-bash" data-language="bash">pivotal
alice
bob
carol
dan</pre> <p>Alice is now a server administrator and can use the following knife subcommands to manage users on the Chef server:</p> <ul class="simple"> <li><code class="docutils literal">knife user-create</code></li> <li><code class="docutils literal">knife user-delete</code></li> <li><code class="docutils literal">knife user-edit</code></li> <li><code class="docutils literal">knife user-list</code></li> <li><code class="docutils literal">knife user-show</code></li> </ul> <p>For example, Alice runs the following command:</p> <pre class="highlight-bash" data-language="bash">$ knife user edit carol -c ~/.chef/alice.rb</pre> <p>and the $EDITOR opens in which Alice makes changes, and then saves them.</p>  <h4 id="superuser-accounts">Superuser Accounts</h4> <p>Superuser accounts may not be managed by users who belong to the <code class="docutils literal">server-admins</code> group. For example, Alice attempts to delete the <code class="docutils literal">pivotal</code> superuser account:</p> <pre class="highlight-bash" data-language="bash">$ knife user delete pivotal -c ~/.chef/alice.rb</pre> <p>and the following error is returned:</p> <pre class="highlight-bash" data-language="bash">ERROR: You authenticated successfully to &lt;chef_server_url&gt; as user1
       but you are not authorized for this action
Response: Missing read permission</pre> <p>Alice’s action is unauthorized even with membership in the <code class="docutils literal">server-admins</code> group.</p>    <h3 id="manage-server-admins-group">Manage server-admins Group</h3> <p>Membership of the <code class="docutils literal">server-admins</code> group is managed with a set of <code class="docutils literal">chef-server-ctl</code> subcommands:</p> <ul class="simple"> <li><code class="docutils literal">chef-server-ctl grant-server-admin-permissions</code></li> <li><code class="docutils literal">chef-server-ctl list-server-admins</code></li> <li><code class="docutils literal">chef-server-ctl remove-server-admin-permissions</code></li> </ul>  <h4 id="add-members">Add Members</h4> <p>The <code class="docutils literal">grant-server-admin-permissions</code> subcommand is used to add a user to the <code class="docutils literal">server-admins</code> group. Run the command once per user added.</p> <p>This subcommand has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl grant-server-admin-permissions USER_NAME</pre> <p>where <code class="docutils literal">USER_NAME</code> is the user to add to the list of server administrators.</p> <p>For example:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl grant-server-admin-permissions bob</pre> <p>returns:</p> <pre class="highlight-bash" data-language="bash">User bob was added to server-admins. This user can now list,
read, and create users (even for orgs they are not members of)
for this Chef Server.</pre>   <h4 id="remove-members">Remove Members</h4> <p>The <code class="docutils literal">remove-server-admin-permissions</code> subcommand is used to remove a user from the <code class="docutils literal">server-admins</code> group. Run the command once per user removed.</p> <p>This subcommand has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl remove-server-admin-permissions USER_NAME</pre> <p>where <code class="docutils literal">USER_NAME</code> is the user to remove from the list of server administrators.</p> <p>For example:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl remove-server-admin-permissions bob</pre> <p>returns:</p> <pre class="highlight-bash" data-language="bash">User bob was removed from server-admins. This user can no longer
list, read, and create users for this Chef Server except for where
they have default permissions (such as within an org).</pre>   <h4 id="list-membership">List Membership</h4> <p>The <code class="docutils literal">list-server-admins</code> subcommand is used to return a list of users who are members of the <code class="docutils literal">server-admins</code> group.</p> <p>This subcommand has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl list-server-admins</pre> <p>and will return a list of users similar to:</p> <pre class="highlight-bash" data-language="bash">pivotal
alice
bob
carol
dan</pre>     <h2 id="manage-organizations">Manage Organizations</h2> <p>Use the <code class="docutils literal">org-create</code>, <code class="docutils literal">org-delete</code>, <code class="docutils literal">org-list</code>, <code class="docutils literal">org-show</code>, <code class="docutils literal">org-user-add</code> and <code class="docutils literal">org-user-remove</code> commands to manage organizations.</p>  <h3 id="org-create">org-create</h3> <p>The <code class="docutils literal">org-create</code> subcommand is used to create an organization. (The validation key for the organization is returned to <code class="docutils literal">STDOUT</code> when creating an organization with this command.)</p> <p><strong>Syntax</strong></p> <p>This subcommand has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl org-create ORG_NAME "ORG_FULL_NAME" (options)</pre> <p>where:</p> <ul class="simple"> <li>The name must begin with a lower-case letter or digit, may only contain lower-case letters, digits, hyphens, and underscores, and must be between 1 and 255 characters. For example: <code class="docutils literal">chef</code>.</li> <li>The full name must begin with a non-white space character and must be between 1 and 1023 characters. For example: <code class="docutils literal">"Chef Software, Inc."</code>.</li> </ul> <p><strong>Options</strong></p> <p>This subcommand has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-a USER_NAME</code>, <code class="docutils literal">--association_user USER_NAME</code>
</dt> <dd>Associate a user with an organization and add them to the <code class="docutils literal">admins</code> and <code class="docutils literal">billing_admins</code> security groups.</dd> <dt>
<code class="docutils literal">-f FILE_NAME</code>, <code class="docutils literal">--filename FILE_NAME</code>
</dt> <dd>Write the ORGANIZATION-validator.pem to <code class="docutils literal">FILE_NAME</code> instead of printing it to <code class="docutils literal">STDOUT</code>.</dd> </dl>   <h3 id="org-delete">org-delete</h3> <p>The <code class="docutils literal">org-delete</code> subcommand is used to delete an organization.</p> <p><strong>Syntax</strong></p> <p>This subcommand has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl org-delete ORG_NAME</pre>   <h3 id="org-list">org-list</h3> <p>The <code class="docutils literal">org-list</code> subcommand is used to list all of the organizations currently present on the Chef server.</p> <p><strong>Syntax</strong></p> <p>This subcommand has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl org-list (options)</pre> <p><strong>Options</strong></p> <p>This subcommand has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-a</code>, <code class="docutils literal">--all-orgs</code>
</dt> <dd>Show all organizations.</dd> <dt>
<code class="docutils literal">-w</code>, <code class="docutils literal">--with-uri</code>
</dt> <dd>Show the corresponding URIs.</dd> </dl>   <h3 id="org-show">org-show</h3> <p>The <code class="docutils literal">org-show</code> subcommand is used to show the details for an organization.</p> <p><strong>Syntax</strong></p> <p>This subcommand has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl org-show ORG_NAME</pre>   <h3 id="org-user-add">org-user-add</h3> <p>The <code class="docutils literal">org-user-add</code> subcommand is used to add a user to an organization.</p> <p><strong>Syntax</strong></p> <p>This subcommand has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl org-user-add ORG_NAME USER_NAME (options)</pre> <p><strong>Options</strong></p> <p>This subcommand has the following options:</p> <dl class="docutils"> <dt><code class="docutils literal">--admin</code></dt> <dd>Add the user to the <code class="docutils literal">admins</code> group.</dd> </dl>   <h3 id="org-user-remove">org-user-remove</h3> <p>The <code class="docutils literal">org-user-remove</code> subcommand is used to remove a user from an organization.</p> <p><strong>Syntax</strong></p> <p>This subcommand has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ chef-server-ctl org-user-remove ORG_NAME USER_NAME (options)</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef™ Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs-archive.chef.io/release/server_12-8/server_orgs.html" class="_attribution-link">https://docs-archive.chef.io/release/server_12-8/server_orgs.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
