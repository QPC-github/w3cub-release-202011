
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>chef-server.rb Optional Settings - Chef 12 - W3cubDocs</title>
  
  <meta name="description" content="The chef-server.rb file contains all of the non-default configuration settings used by the Chef server. (The default settings are built-in to the &hellip;">
  <meta name="keywords" content="chef-server, rb, optional, settings, chef, chef~12">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/chef~12/server_12-8/config_rb_server_optional_settings.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/chef~12.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/chef~12/" class="_nav-link" title="" style="margin-left:0;">Chef 12</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="chef-server-rb-optional-settings">chef-server.rb Optional Settings</h1> <p>The chef-server.rb file contains all of the non-default configuration settings used by the Chef server. (The default settings are built-in to the Chef server configuration and should only be added to the chef-server.rb file to apply non-default values.) These configuration settings are processed when the <code class="docutils literal">chef-server-ctl reconfigure</code> command is run, such as immediately after setting up the Chef server or after making a change to the underlying configuration settings after the server has been deployed. The chef-server.rb file is a Ruby file, which means that conditional statements can be used in the configuration file.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The chef-server.rb file does not exist by default. To modify the settings for the Chef server, create a file named <code class="docutils literal">chef-server.rb</code> in the <code class="docutils literal">/etc/opscode/</code> directory.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This file was named private-chef.rb in previous versions of Enterprise Chef. After an upgrade to Chef server 12 from Enterprise Chef, the private-chef.rb file is symlinked to chef-server.rb. The private-chef.rb file is deprecated, starting with Chef server 12.</p> </div>  <h2 id="settings">Settings</h2> <p>The following sections describe the various settings that are available in the chef-server.rb file.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>When changes are made to the chef-server.rb file the Chef server must be reconfigured by running the following command:</p> <pre class="last highlight-bash" data-language="bash">$ chef-server-ctl reconfigure</pre> </div>  <h3 id="general">General</h3> <p>This configuration file has the following general settings:</p> <dl class="docutils"> <dt><code class="docutils literal">addons['install']</code></dt> <dd>Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">addons['path']</code></dt> <dd>Default value: <code class="docutils literal">nil</code>.</dd> <dt><code class="docutils literal">addons['packages']</code></dt> <dd>
<p class="first">Default value:</p> <pre class="last highlight-ruby" data-language="ruby">%w{opscode-reporting chef-manage opscode-analytics opscode-push-jobs-server}</pre> </dd> <dt><code class="docutils literal">api_version</code></dt> <dd>The version of the Chef server. Default value: <code class="docutils literal">'12.0.0'</code>.</dd> <dt><code class="docutils literal">default_orgname</code></dt> <dd>The Chef server API used by the Open Source Chef server does not have an <code class="docutils literal">/organizations/ORG_NAME</code> endpoint. Use this setting to ensure that migrated Open Source Chef servers are able to connect to the Chef server API. This value should be the same as the name of the organization that was created during the upgrade from Open Source Chef version 11 to Chef server version 12, which means it will be identical to the <code class="docutils literal">ORG_NAME</code> part of the <code class="docutils literal">/organizations</code> endpoint in Chef server version 12. Default value: the name of the organization specified during the upgrade process from Open Source Chef 11 to Chef server 12.</dd> <dt><code class="docutils literal">flavor</code></dt> <dd>Default value: <code class="docutils literal">'cs'</code>.</dd> <dt><code class="docutils literal">install_path</code></dt> <dd>The directory in which the Chef server is installed. Default value: <code class="docutils literal">'/opt/opscode'</code>.</dd> <dt><code class="docutils literal">from_email</code></dt> <dd>The email address from which invitations to the Chef management console are sent. Default value: <code class="docutils literal">'"Opscode" &lt;donotreply@opscode.com&gt;'</code>.</dd> <dt><code class="docutils literal">license['nodes']</code></dt> <dd>The number of licensed nodes. Default value: <code class="docutils literal">25</code>.</dd> <dt><code class="docutils literal">license['upgrade_url']</code></dt> <dd>The URL to visit for more information about how to update the number of nodes licensed for an organization. Default value: <code class="docutils literal">'http://www.chef.io/contact/on-premises-simple'</code>.</dd> <dt><code class="docutils literal">notification_email</code></dt> <dd>The email addressed to which email notifications are sent. Default value: <code class="docutils literal">'pc-default@opscode.com'</code>.</dd> <dt><code class="docutils literal">role</code></dt> <dd>The configuration type of the Chef server. Possible values: <code class="docutils literal">backend</code>, <code class="docutils literal">frontend</code>, or <code class="docutils literal">standalone</code>. Default value: <code class="docutils literal">'standalone'</code>.</dd> <dt><code class="docutils literal">topology</code></dt> <dd>The topology of the Chef server. Possible values: <code class="docutils literal">ha</code>, <code class="docutils literal">manual</code>, <code class="docutils literal">standalone</code>, and <code class="docutils literal">tier</code>. Default value: <code class="docutils literal">'standalone'</code>.</dd> </dl>   <h3 id="bookshelf">bookshelf</h3> <p>The <strong>bookshelf</strong> service is an Amazon Simple Storage Service (S3)-compatible service that is used to store cookbooks, including all of the files—recipes, templates, and so on—that are associated with each cookbook.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">To <a class="reference internal" href="server_components#server-components-aws-settings">configure the server for external cookbook storage</a>, updates are made to settings for both the <strong>bookshelf</strong> and <strong>opscode-erchef</strong> services.</p> </div> <p>This configuration file has the following settings for <code class="docutils literal">bookshelf</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">bookshelf['access_key_id']</code></dt> <dd>The access key identifier. (This is configurable and may be pointed at external storage locations, such as Amazon EC2. Four settings require configuration when pointing at an external cookbook storage location: <code class="docutils literal">bookshelf['vip']</code>, for the endpoint used by the chef-client; <code class="docutils literal">bookshelf['external_url']</code>, for the endpoint used by the Chef server; <code class="docutils literal">bookshelf['access_key_id']</code>, for user access key; <code class="docutils literal">bookshelf['secret_access_key']</code>, for secret key; and <code class="docutils literal">opscode_erchef['s3_bucket']</code>, for the bucket name. Reconfigure the Chef server after changing these settings. Default value: generated by default.</dd> <dt><code class="docutils literal">bookshelf['data_dir']</code></dt> <dd>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code class="docutils literal">/var/opt/opscode/bookshelf/data</code>.</dd> <dt><code class="docutils literal">bookshelf['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: <code class="docutils literal">/var/opt/opscode/bookshelf</code>.</dd> <dt><code class="docutils literal">bookshelf['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">bookshelf['external_url']</code></dt> <dd>The base URL to which the service is to return links to API resources. Use <code class="docutils literal">:host_header</code> to ensure the URL is derived from the host header of the incoming HTTP request. Default value: <code class="docutils literal">:host_header</code>.</dd> <dt><code class="docutils literal">bookshelf['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">bookshelf['listen']</code></dt> <dd>The IP address on which the service is to listen. Default value: <code class="docutils literal">127.0.0.1</code>.</dd> <dt><code class="docutils literal">bookshelf['log_directory']</code></dt> <dd>The directory in which log data is stored. The default value is the recommended value. Default value: <code class="docutils literal">/var/log/opscode/bookshelf</code>.</dd> <dt><code class="docutils literal">bookshelf['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">bookshelf['port']</code></dt> <dd>The port on which the service is to listen. Default value: <code class="docutils literal">4321</code>.</dd> <dt><code class="docutils literal">bookshelf['secret_access_key']</code></dt> <dd>The secret key. (This is configurable and may be pointed at external storage locations, such as Amazon EC2. Four settings require configuration when pointing at an external cookbook storage location: <code class="docutils literal">bookshelf['vip']</code>, for the endpoint used by the chef-client; <code class="docutils literal">bookshelf['external_url']</code>, for the endpoint used by the Chef server; <code class="docutils literal">bookshelf['access_key_id']</code>, for user access key; <code class="docutils literal">bookshelf['secret_access_key']</code>, for secret key; and <code class="docutils literal">opscode_erchef['s3_bucket']</code>, for the bucket name. Reconfigure the Chef server after changing these settings. Default value: generated by default.</dd> <dt><code class="docutils literal">bookshelf['stream_download']</code></dt> <dd>Enable stream downloading of cookbooks. This setting (when <code class="docutils literal">true</code>) typically results in improved cookbook download performance, especially with the memory usage of the <strong>bookshelf</strong> service and the behavior of load balancers and proxies in-between the chef-client and the Chef server. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">bookshelf['vip']</code></dt> <dd>The virtual IP address. Default value: <code class="docutils literal">127.0.0.1</code>.</dd> </dl>   <h3 id="bootstrap">bootstrap</h3> <p>This configuration file has the following settings for <code class="docutils literal">bootstrap</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">bootstrap['enable']</code></dt> <dd>Indicates whether an attempt to bootstrap the Chef server is made. Generally only enabled on systems that have bootstrap enabled via a <code class="docutils literal">server</code> entry. Default value: <code class="docutils literal">true</code>.</dd> </dl>   <h3 id="dark-launch">dark_launch</h3> <p>This configuration file has the following settings for <code class="docutils literal">dark_launch</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">dark_launch['actions']</code></dt> <dd>Enable Chef actions. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">dark_launch['add_type_and_bag_to_items']</code></dt> <dd>Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">dark_launch['new_theme']</code></dt> <dd>Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">dark_launch['private-chef']</code></dt> <dd>Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">dark_launch['quick_start']</code></dt> <dd>Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">dark_launch['reporting']</code></dt> <dd>Enable Reporting, which performs data collection during a chef-client run. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">dark_launch['sql_users']</code></dt> <dd>Default value: <code class="docutils literal">true</code>.</dd> </dl>   <h3 id="estatsd">estatsd</h3> <p>This configuration file has the following settings for <code class="docutils literal">estatsd</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">estatsd['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: <code class="docutils literal">'/var/opt/opscode/estatsd'</code>.</dd> <dt><code class="docutils literal">estatsd['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">estatsd['log_directory']</code></dt> <dd>The directory in which log data is stored. The default value is the recommended value. Default value: <code class="docutils literal">'/var/log/opscode/estatsd'</code>.</dd> <dt><code class="docutils literal">estatsd['port']</code></dt> <dd>The port on which the service is to listen. Default value: <code class="docutils literal">9466</code>.</dd> <dt><code class="docutils literal">estatsd['protocol']</code></dt> <dd>Use to send application statistics with StatsD protocol formatting. Set this value to <code class="docutils literal">statsd</code> to apply StatsD protocol formatting.</dd> <dt><code class="docutils literal">estatsd['vip']</code></dt> <dd>The virtual IP address. Default value: <code class="docutils literal">'127.0.0.1'</code>.</dd> </dl>   <h3 id="jetty">jetty</h3> <p>This configuration file has the following settings for <code class="docutils literal">jetty</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">jetty['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">'false'</code>. This value should not be modified.</dd> <dt><code class="docutils literal">jetty['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">'false'</code>.</dd> <dt><code class="docutils literal">jetty['log_directory']</code></dt> <dd>
<p class="first">The directory in which log data is stored. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">'/var/opt/opscode/opscode-solr4/jetty/logs'</pre> </dd> </dl>   <h3 id="keepalived">keepalived</h3> <p>The <strong>keepalived</strong> service manages the virtual IP address (VIP) between the backend machines in a high availability topology that uses DRBD.</p> <p>This configuration file has the following settings for <code class="docutils literal">keepalived</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">keepalived['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: <code class="docutils literal">'/var/opt/opscode/keepalived'</code>.</dd> <dt><code class="docutils literal">keepalived['enable']</code></dt> <dd>Enable a service. Enable this setting for backend servers in high availability topologies. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">keepalived['ipv6_on']</code></dt> <dd>Enable Internet Protocol version 6 (IPv6) addresses. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">keepalived['log_directory']</code></dt> <dd>The directory in which log data is stored. The default value is the recommended value. Default value: <code class="docutils literal">'/var/log/opscode/keepalived'</code>.</dd> <dt><code class="docutils literal">keepalived['log_rotation']</code></dt> <dd>The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value: <code class="docutils literal">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code>
</dd> <dt><code class="docutils literal">keepalived['service_posthooks']</code></dt> <dd>
<p class="first">The directory to which Keepalived is to send <code class="docutils literal">POST</code> hooks. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">'{ 'rabbitmq' =&gt; '/opt/opscode/bin/wait-for-rabbit' }'</pre> </dd> <dt><code class="docutils literal">keepalived['smtp_connect_timeout']</code></dt> <dd>The amount of time (in seconds) to wait for a connection to an SMTP server. Default value: <code class="docutils literal">'30'</code>.</dd> <dt><code class="docutils literal">keepalived['smtp_server']</code></dt> <dd>The SMTP server to which a connection is made. Default value: <code class="docutils literal">'127.0.0.1'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_advert_int']</code></dt> <dd>The frequency (in seconds) at which the primary VRRP server is to advertise. Default value: <code class="docutils literal">'1'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_interface']</code></dt> <dd>The interface over which VRRP traffic is sent. Should be set to the name of the dedicated interface for Keepalived. Default value: <code class="docutils literal">'eth0'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_ipaddress']</code></dt> <dd>The virtual IP address to be managed. This is typically set by the <code class="docutils literal">backend_vip</code> option. Default value: <code class="docutils literal">node['ipaddress']</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_ipaddress_dev']</code></dt> <dd>The device to which the virtual IP address is added. Default value: <code class="docutils literal">'eth0'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_nopreempt']</code></dt> <dd>Specify that a lower priority machine maintains the master role, even if a higher priority machine is available. (This setting configures the <code class="docutils literal">noprempt</code> value in VRRP.) Default value: <code class="docutils literal">'true'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_password']</code></dt> <dd>The secret key for VRRP pairs. This value is generated randomly when the bootstrap server is installed and does not need to be set explicitly. Default value: <code class="docutils literal">'sneakybeaky'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_preempt_delay']</code></dt> <dd>The <code class="docutils literal">prempt_delay</code> value for the VRRP instance. Default value: <code class="docutils literal">'30'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_priority']</code></dt> <dd>The priority for this server. By default, all servers have equal priority. The server with the lowest value will have the highest priority. Default value: <code class="docutils literal">'100'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_state']</code></dt> <dd>The state of the VRRP server. This value should be the same for both servers in the backend. Default value: <code class="docutils literal">'BACKUP'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_instance_virtual_router_id']</code></dt> <dd>The virtual router identifier used by the Keepalived pair. This value should be unique within the multicast domain used for Keepalived. Default value: <code class="docutils literal">'1'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_sync_group']</code></dt> <dd>The name of the VRRP synchronization group. Default value: <code class="docutils literal">'PC_GROUP'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_sync_instance']</code></dt> <dd>The name of the VRRP synchronization instance. Default value: <code class="docutils literal">'PC_VI'</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_unicast_bind']</code></dt> <dd>The unicast cluster IP address to which Keepalived binds. To use multicast, leave this value undefined. This value is configured automatically based on settings in private-chef.rb. This setting should not be changed without first consulting a Chef support engineer. Default value: <code class="docutils literal">node['ipaddress']</code>.</dd> <dt><code class="docutils literal">keepalived['vrrp_unicast_peer']</code></dt> <dd>The unicast cluster IP address used by Keepalived to talk to its peer. To use multicast, leave this value undefined. This value is configured automatically based on settings in private-chef.rb. This setting should not be changed without first consulting a Chef support engineer. Default value: <code class="docutils literal">nil</code>.</dd> </dl>   <h3 id="lb-lb-internal">lb / lb_internal</h3> <p>This configuration file has the following settings for <code class="docutils literal">lb</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">lb['api_fqdn']</code></dt> <dd>Default value: <code class="docutils literal">node['fqdn']</code>.</dd> <dt><code class="docutils literal">lb['ban_refresh_interval']</code></dt> <dd>Default value: <code class="docutils literal">600</code>.</dd> <dt><code class="docutils literal">lb['bookshelf']</code></dt> <dd>Default value: <code class="docutils literal">127.0.0.1</code>.</dd> <dt><code class="docutils literal">lb['cache_cookbook_files']</code></dt> <dd>Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">lb['chef_max_version']</code></dt> <dd>The maximum version of the chef-client that is allowed to access the Chef server via the Chef server API. Default value: <code class="docutils literal">11</code>.</dd> <dt><code class="docutils literal">lb['chef_min_version']</code></dt> <dd>The minimum version of the chef-client that is allowed to access the Chef server via the Chef server API. Default value: <code class="docutils literal">10</code>.</dd> <dt><code class="docutils literal">lb['chef_server_webui']</code></dt> <dd>Default value: <code class="docutils literal">127.0.0.1</code>.</dd> <dt><code class="docutils literal">lb['debug']</code></dt> <dd>Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">lb['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">lb['erchef']</code></dt> <dd>Default value: <code class="docutils literal">127.0.0.1</code>.</dd> <dt><code class="docutils literal">lb['maint_refresh_interval']</code></dt> <dd>Default value: <code class="docutils literal">600</code>.</dd> <dt><code class="docutils literal">lb['redis_connection_pool_size']</code></dt> <dd>Default value: <code class="docutils literal">250</code>.</dd> <dt><code class="docutils literal">lb['redis_connection_timeout']</code></dt> <dd>The amount of time (in milliseconds) to wait before timing out. Default value: <code class="docutils literal">1000</code>.</dd> <dt><code class="docutils literal">lb['redis_keepalive_timeout']</code></dt> <dd>The amount of time (in milliseconds) to wait before timing out. Default value: <code class="docutils literal">2000</code>.</dd> <dt><code class="docutils literal">lb['upstream']['bookshelf']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">[ '127.0.0.1' ]</code>.</dd> <dt><code class="docutils literal">lb['upstream']['oc_bifrost']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">[ '127.0.0.1' ]</code>.</dd> <dt><code class="docutils literal">lb['upstream']['opscode_erchef']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">[ '127.0.0.1' ]</code>.</dd> <dt><code class="docutils literal">lb['upstream']['opscode_solr4']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">[ '127.0.0.1' ]</code>.</dd> <dt><code class="docutils literal">lb['vip']</code></dt> <dd>The virtual IP address. Default value: <code class="docutils literal">127.0.0.1</code>.</dd> <dt><code class="docutils literal">lb['web_ui_fqdn']</code></dt> <dd>Default value: <code class="docutils literal">node['fqdn']</code>.</dd> <dt><code class="docutils literal">lb['xdl_defaults']['503_mode']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">lb['xdl_defaults']['couchdb_acls']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">lb['xdl_defaults']['couchdb_association_requests']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">lb['xdl_defaults']['couchdb_associations']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">lb['xdl_defaults']['couchdb_containers']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">lb['xdl_defaults']['couchdb_groups']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">lb['xdl_defaults']['couchdb_organizations']</code></dt> <dd>The default value is the recommended value. Default value: <code class="docutils literal">true</code>.</dd> </dl> <p>And for the internal load balancers:</p> <dl class="docutils"> <dt><code class="docutils literal">lb_internal['account_port']</code></dt> <dd>Default value: <code class="docutils literal">9685</code>.</dd> <dt><code class="docutils literal">lb_internal['chef_port']</code></dt> <dd>Default value: <code class="docutils literal">9680</code>.</dd> <dt><code class="docutils literal">lb_internal['enable']</code></dt> <dd>Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">lb_internal['oc_bifrost_port']</code></dt> <dd>Default value: <code class="docutils literal">9683</code>.</dd> <dt><code class="docutils literal">lb_internal['vip']</code></dt> <dd>The virtual IP address. Default value: <code class="docutils literal">'127.0.0.1'</code>.</dd> </dl>   <h3 id="ldap">ldap</h3> <p>This configuration file has the following settings for <code class="docutils literal">ldap</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">ldap['base_dn']</code></dt> <dd>
<p class="first">The root LDAP node under which all other nodes exist in the directory structure. For Active Directory, this is typically <code class="docutils literal">cn=users</code> and then the domain. For example:</p> <pre class="highlight-ruby" data-language="ruby">'OU=Employees,OU=Domain users,DC=example,DC=com'</pre> <p class="last">Default value: <code class="docutils literal">nil</code>.</p> </dd> <dt><code class="docutils literal">ldap['bind_dn']</code></dt> <dd>
<p class="first">The distinguished name used to bind to the LDAP server. The user the Chef server will use to perform LDAP searches. This is often the administrator or manager user. This user needs to have read access to all LDAP users that require authentication. The Chef server must do an LDAP search before any user can log in. Many Active Directory and LDAP systems do not allow an anonymous bind. If anonymous bind is allowed, leave the <code class="docutils literal">bind_dn</code> and <code class="docutils literal">bind_password</code> settings blank. If anonymous bind is not allowed, a user with <code class="docutils literal">READ</code> access to the directory is required. This user must be specified as an LDAP distinguished name similar to:</p> <pre class="highlight-ruby" data-language="ruby">'CN=user,OU=Employees,OU=Domainuser,DC=example,DC=com'</pre> <p class="last">Default value: <code class="docutils literal">nil</code>.</p> </dd> <dt><code class="docutils literal">ldap['bind_password']</code></dt> <dd>The password for the binding user. The password for the user specified by <code class="docutils literal">ldap['bind_dn']</code>. Leave this value and <code class="docutils literal">ldap['bind_dn']</code> unset if anonymous bind is sufficient. Default value: <code class="docutils literal">nil</code>.</dd> <dt><code class="docutils literal">ldap['group_dn']</code></dt> <dd>
<p class="first">The distinguished name for a group. When set to the distinguished name of a group, only members of that group can log in. This feature filters based on the <code class="docutils literal">memberOf</code> attribute and only works with LDAP servers that provide such an attribute. In OpenLDAP, the <code class="docutils literal">memberOf</code> overlay provides this attribute. For example, if the value of the <code class="docutils literal">memberOf</code> attribute is <code class="docutils literal">CN=abcxyz,OU=users,DC=company,DC=com</code>, then use:</p> <pre class="last highlight-ruby" data-language="ruby">ldap['group_dn'] = 'CN=user,OU=Employees,DC=example,DC=com'</pre> </dd> <dt><code class="docutils literal">ldap['host']</code></dt> <dd>The name (or IP address) of the LDAP server. The hostname of the LDAP or Active Directory server. Be sure the Chef server is able to resolve any host names. Default value: <code class="docutils literal">ldap-server-host</code>.</dd> <dt><code class="docutils literal">ldap['login_attribute']</code></dt> <dd>The LDAP attribute that holds the user’s login name. Use to specify the Chef server user name for an LDAP user. Default value: <code class="docutils literal">sAMAccountName</code>.</dd> <dt><code class="docutils literal">ldap['port']</code></dt> <dd>An integer that specifies the port on which the LDAP server listens. The default value is an appropriate value for most configurations. Default value: <code class="docutils literal">389</code> or <code class="docutils literal">636</code> when <code class="docutils literal">ldap['encryption']</code> is set to <code class="docutils literal">:simple_tls</code>.</dd> <dt><code class="docutils literal">ldap['ssl_enabled']</code></dt> <dd>
<p class="first">Cause the Chef server to connect to the LDAP server using SSL. Default value: <code class="docutils literal">false</code>. Must be <code class="docutils literal">false</code> when <code class="docutils literal">ldap['tls_enabled']</code> is <code class="docutils literal">true</code>.</p> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">Previous versions of the Chef server used the <code class="docutils literal">ldap['ssl_enabled']</code> setting to first enable SSL, and then the <code class="docutils literal">ldap['encryption']</code> setting to specify the encryption type. These settings are deprecated.</p> </div> </dd> <dt><code class="docutils literal">ldap['system_adjective']</code></dt> <dd>
<p class="first">A descriptive name for the login system that is displayed to users in the Chef server management console. If a value like “corporate” is used, then the Chef management console user interface will display strings like “the corporate login server”, “corporate login”, or “corporate password.” Default value: <code class="docutils literal">AD/LDAP</code>.</p> <div class="last admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">This setting is <strong>not</strong> used by the Chef server. It is used only by the Chef management console.</p> </div> </dd> <dt><code class="docutils literal">ldap['timeout']</code></dt> <dd>The amount of time (in seconds) to wait before timing out. Default value: <code class="docutils literal">60000</code>.</dd> <dt><code class="docutils literal">ldap['tls_enabled']</code></dt> <dd>
<p class="first">Enable TLS. When enabled, communication with the LDAP server is done via a secure SSL connection on a dedicated port. When <code class="docutils literal">true</code>, <code class="docutils literal">ldap['port']</code> is also set to <code class="docutils literal">636</code>. Default value: <code class="docutils literal">false</code>. Must be <code class="docutils literal">false</code> when <code class="docutils literal">ldap['ssl_enabled']</code> is <code class="docutils literal">true</code>.</p> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">Previous versions of the Chef server used the <code class="docutils literal">ldap['ssl_enabled']</code> setting to first enable SSL, and then the <code class="docutils literal">ldap['encryption']</code> setting to specify the encryption type. These settings are deprecated.</p> </div> </dd> </dl>   <h3 id="nginx">nginx</h3> <p>This configuration file has the following settings for <code class="docutils literal">nginx</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">nginx['cache_max_size']</code></dt> <dd>The <code class="docutils literal">max_size</code> parameter used by the Nginx cache manager, which is part of the <code class="docutils literal">proxy_cache_path</code> directive. When the size of file storage exceeds this value, the Nginx cache manager removes the least recently used data. Default value: <code class="docutils literal">5000m</code>.</dd> <dt><code class="docutils literal">nginx['client_max_body_size']</code></dt> <dd>The maximum accepted body size for a client request, as indicated by the <code class="docutils literal">Content-Length</code> request header. When the maximum accepted body size is greater than this value, a <code class="docutils literal">413 Request Entity Too Large</code> error is returned. Default value: <code class="docutils literal">250m</code>.</dd> <dt><code class="docutils literal">nginx['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: <code class="docutils literal">/var/opt/opscode/nginx</code>.</dd> <dt><code class="docutils literal">nginx['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">nginx['enable_ipv6']</code></dt> <dd>Enable Internet Protocol version 6 (IPv6) addresses. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">nginx['enable_non_ssl']</code></dt> <dd>Allow port 80 redirects to port 443. When this value is set to <code class="docutils literal">true</code>, load balancers on the front-end hardware are allowed to do SSL termination of the WebUI and API. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">nginx['enable_stub_status']</code></dt> <dd>Enables the Nginx <code class="docutils literal">stub_status</code> module. See <code class="docutils literal">nginx['stub_status']['allow_list']</code>, <code class="docutils literal">nginx['stub_status']['listen_host']</code>, <code class="docutils literal">nginx['stub_status']['listen_port']</code>, and <code class="docutils literal">nginx['stub_status']['location']</code>. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">nginx['gzip']</code></dt> <dd>Enable gzip compression. Default value: <code class="docutils literal">on</code>.</dd> <dt><code class="docutils literal">nginx['gzip_comp_level']</code></dt> <dd>The compression level used with gzip, from least amount of compression (<code class="docutils literal">1</code>, fastest) to the most (<code class="docutils literal">2</code>, slowest). Default value: <code class="docutils literal">2</code>.</dd> <dt><code class="docutils literal">nginx['gzip_http_version']</code></dt> <dd>Enable gzip depending on the version of the HTTP request. Default value: <code class="docutils literal">1.0</code>.</dd> <dt><code class="docutils literal">nginx['gzip_proxied']</code></dt> <dd>The type of compression used based on the request and response. Default value: <code class="docutils literal">any</code>.</dd> <dt><code class="docutils literal">nginx['gzip_types']</code></dt> <dd>
<p class="first">Enable compression for the specified MIME-types. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">[ 'text/plain',
  'text/css',
  'application/x-javascript',
  'text/xml', 'application/xml',
  'application/xml+rss',
  'text/javascript',
  'application/json'
  ]</pre> </dd> <dt><code class="docutils literal">nginx['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">nginx['keepalive_timeout']</code></dt> <dd>The amount of time (in seconds) to wait for requests on a Keepalived connection. Default value: <code class="docutils literal">65</code>.</dd> <dt><code class="docutils literal">nginx['log_directory']</code></dt> <dd>The directory in which log data is stored. The default value is the recommended value. Default value: <code class="docutils literal">/var/log/opscode/nginx</code>.</dd> <dt><code class="docutils literal">nginx['log_rotation']</code></dt> <dd>The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value: <code class="docutils literal">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code>
</dd> <dt><code class="docutils literal">nginx['non_ssl_port']</code></dt> <dd>The port on which the WebUI and API are bound for non-SSL connections. Default value: <code class="docutils literal">80</code>. Use <code class="docutils literal">nginx['enable_non_ssl']</code> to enable or disable SSL redirects on this port number. Set to <code class="docutils literal">false</code> to disable non-SSL connections.</dd> <dt><code class="docutils literal">nginx['sendfile']</code></dt> <dd>Copy data between file descriptors when <code class="docutils literal">sendfile()</code> is used. Default value: <code class="docutils literal">on</code>.</dd> <dt><code class="docutils literal">nginx['server_name']</code></dt> <dd>The FQDN for the server. Default value: <code class="docutils literal">node['fqdn']</code>.</dd> <dt><code class="docutils literal">nginx['ssl_certificate']</code></dt> <dd>The SSL certificate used to verify communication over HTTPS. Default value: <code class="docutils literal">nil</code>.</dd> <dt><code class="docutils literal">nginx['ssl_certificate_key']</code></dt> <dd>The certificate key used for SSL communication. Default value: <code class="docutils literal">nil</code>.</dd> <dt><code class="docutils literal">nginx['ssl_ciphers']</code></dt> <dd>
<p class="first">The list of supported cipher suites that are used to establish a secure connection. To favor AES256 with ECDHE forward security, drop the <code class="docutils literal">RC4-SHA:RC4-MD5:RC4:RSA</code> prefix. See <a class="reference external" href="https://wiki.mozilla.org/Security/Server_Side_TLS">this link</a> for more information. For example:</p> <pre class="last highlight-ruby" data-language="ruby">nginx['ssl_ciphers'] = HIGH: ... :!PSK</pre> </dd> <dt><code class="docutils literal">nginx['ssl_company_name']</code></dt> <dd>The name of your company. Default value: <code class="docutils literal">YouCorp</code>.</dd> <dt><code class="docutils literal">nginx['ssl_country_name']</code></dt> <dd>The country in which your company is located. Default value: <code class="docutils literal">US</code>.</dd> <dt><code class="docutils literal">nginx['ssl_email_address']</code></dt> <dd>The default email address for your company. Default value: <code class="docutils literal">you@example.com</code>.</dd> <dt><code class="docutils literal">nginx['ssl_locality_name']</code></dt> <dd>The city in which your company is located. Default value: <code class="docutils literal">Seattle</code>.</dd> <dt><code class="docutils literal">nginx['ssl_organizational_unit_name']</code></dt> <dd>The organization or group within your company that is running the Chef server. Default value: <code class="docutils literal">Operations</code>.</dd> <dt><code class="docutils literal">nginx['ssl_port']</code></dt> <dd>Default value: <code class="docutils literal">443</code>.</dd> <dt><code class="docutils literal">nginx['ssl_protocols']</code></dt> <dd>
<p class="first">The SSL protocol versions that are enabled. For the highest possible security, disable SSL 3.0 and allow only TLS:</p> <pre class="highlight-ruby" data-language="ruby">nginx['ssl_protocols'] = 'TLSv1 TLSv1.1 TLSv1.2'</pre> <p class="last">Default value: <code class="docutils literal">TLSv1 TLSv1.1 TLSv1.2</code>.</p> </dd> <dt><code class="docutils literal">nginx['ssl_state_name']</code></dt> <dd>The state, province, or region in which your company is located. Default value: <code class="docutils literal">WA</code>.</dd> <dt><code class="docutils literal">nginx['stub_status']['allow_list']</code></dt> <dd>The IP address on which accessing the <code class="docutils literal">stub_status</code> endpoint is allowed. Default value: <code class="docutils literal">["127.0.0.1"]</code>.</dd> <dt><code class="docutils literal">nginx['stub_status']['listen_host']</code></dt> <dd>The host on which the Nginx <code class="docutils literal">stub_status</code> module listens. Default value: <code class="docutils literal">"127.0.0.1"</code>.</dd> <dt><code class="docutils literal">nginx['stub_status']['listen_port']</code></dt> <dd>The port on which the Nginx <code class="docutils literal">stub_status</code> module listens. Default value: <code class="docutils literal">"9999"</code>.</dd> <dt><code class="docutils literal">nginx['stub_status']['location']</code></dt> <dd>The name of the Nginx <code class="docutils literal">stub_status</code> endpoint used to access data generated by the Nginx <code class="docutils literal">stub_status</code> module. Default value: <code class="docutils literal">"/nginx_status"</code>.</dd> <dt><code class="docutils literal">nginx['tcp_nodelay']</code></dt> <dd>Enable the Nagle buffering algorithm. Default value: <code class="docutils literal">on</code>.</dd> <dt><code class="docutils literal">nginx['tcp_nopush']</code></dt> <dd>Enable TCP/IP transactions. Default value: <code class="docutils literal">on</code>.</dd> <dt><code class="docutils literal">nginx['url']</code></dt> <dd>Default value: <code class="docutils literal">https://#{node['fqdn']}</code>.</dd> <dt><code class="docutils literal">nginx['worker_connections']</code></dt> <dd>The maximum number of simultaneous clients. Use with <code class="docutils literal">nginx['worker_processes']</code> to determine the maximum number of allowed clients. Default value: <code class="docutils literal">10240</code>.</dd> <dt><code class="docutils literal">nginx['worker_processes']</code></dt> <dd>The number of allowed worker processes. Use with <code class="docutils literal">nginx['worker_connections']</code> to determine the maximum number of allowed clients. Default value: <code class="docutils literal">node['cpu']['total'].to_i</code>.</dd> <dt><code class="docutils literal">nginx['x_forwarded_proto']</code></dt> <dd>The protocol used to connect to the server. Possible values: <code class="docutils literal">http</code> and <code class="docutils literal">https</code>. This is the protocol used to connect to the Chef server by a chef-client or a workstation. Default value: <code class="docutils literal">'https'</code>.</dd> </dl>   <h3 id="oc-bifrost">oc_bifrost</h3> <p>The <strong>oc_bifrost</strong> service ensures that every request to view or manage objects stored on the Chef server is authorized.</p> <p>This configuration file has the following settings for <code class="docutils literal">oc_bifrost</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">oc_bifrost['db_pool_size']</code></dt> <dd>The number of open connections to PostgreSQL that are maintained by the service. This value should be increased if failures indicate that the <strong>oc_bifrost</strong> service ran out of connections. This value should be tuned in conjunction with the <code class="docutils literal">postgresql['max_connections']</code> setting for PostgreSQL. Default value: <code class="docutils literal">20</code>.</dd> <dt><code class="docutils literal">oc_bifrost['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: <code class="docutils literal">/var/opt/opscode/oc_bifrost</code>.</dd> <dt><code class="docutils literal">oc_bifrost['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">oc_bifrost['extended_perf_log']</code></dt> <dd>Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">oc_bifrost['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">oc_bifrost['listen']</code></dt> <dd>The IP address on which the service is to listen. Default value: <code class="docutils literal">'127.0.0.1'</code>.</dd> <dt><code class="docutils literal">oc_bifrost['log_directory']</code></dt> <dd>The directory in which log data is stored. The default value is the recommended value. Default value: <code class="docutils literal">/var/log/opscode/oc_bifrost</code>.</dd> <dt><code class="docutils literal">oc_bifrost['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">oc_bifrost['port']</code></dt> <dd>The port on which the service is to listen. Default value: <code class="docutils literal">9463</code>.</dd> <dt><code class="docutils literal">oc_bifrost['sql_password']</code></dt> <dd>The password for the <code class="docutils literal">sql_user</code>. Default value: <code class="docutils literal">'challengeaccepted'</code>.</dd> <dt><code class="docutils literal">oc_bifrost['sql_ro_password']</code></dt> <dd>The password for the <code class="docutils literal">sql_ro_user</code>. Default value: <code class="docutils literal">'foreveralone'</code>.</dd> <dt><code class="docutils literal">oc_bifrost['sql_ro_user']</code></dt> <dd>Default value: <code class="docutils literal">'bifrost_ro'</code>.</dd> <dt><code class="docutils literal">oc_bifrost['sql_user']</code></dt> <dd>The user with permission to publish data. Default value: <code class="docutils literal">'bifrost'</code>.</dd> <dt><code class="docutils literal">oc_bifrost['superuser_id']</code></dt> <dd>Default value: <code class="docutils literal">'5ca1ab1ef005ba111abe11eddecafbad'</code>.</dd> <dt><code class="docutils literal">oc_bifrost['vip']</code></dt> <dd>The virtual IP address. Default value: <code class="docutils literal">'127.0.0.1'</code>.</dd> </dl>   <h3 id="oc-chef-authz">oc_chef_authz</h3> <p>The <strong>opscode-authz</strong> service is used to handle authorization requests to the Chef server.</p> <p>This configuration file has the following settings for <code class="docutils literal">oc_chef_authz</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">oc_chef_authz['http_cull_interval']</code></dt> <dd>Default value: <code class="docutils literal">'{1, min}'</code>.</dd> <dt><code class="docutils literal">oc_chef_authz['http_init_count']</code></dt> <dd>Default value: <code class="docutils literal">25</code>.</dd> <dt><code class="docutils literal">oc_chef_authz['http_max_age']</code></dt> <dd>Default value: <code class="docutils literal">'{70, sec}'</code>.</dd> <dt><code class="docutils literal">oc_chef_authz['http_max_connection_duration']</code></dt> <dd>Default value: <code class="docutils literal">'{70, sec}'</code>.</dd> <dt><code class="docutils literal">oc_chef_authz['http_max_count']</code></dt> <dd>Default value: <code class="docutils literal">100</code>.</dd> <dt><code class="docutils literal">oc_chef_authz['ibrowse_options']</code></dt> <dd>The amount of time (in milliseconds) to wait for a connection to be established. Default value: <code class="docutils literal">'[{connect_timeout, 5000}]'</code>.</dd> </dl>   <h3 id="oc-chef-pedant">oc-chef-pedant</h3> <p>This configuration file has the following settings for <code class="docutils literal">oc-chef-pedant</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">oc_chef_pedant['debug_org_creation']</code></dt> <dd>Run tests with full output. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">oc_chef_pedant['dir']</code></dt> <dd>
<p class="first">The working directory. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">'/var/opt/opscode/oc-chef-pedant'</pre> </dd> <dt><code class="docutils literal">oc_chef_pedant['log_directory']</code></dt> <dd>
<p class="first">The directory in which log data is stored. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">'/var/log/opscode/oc-chef-pedant'</pre> </dd> <dt><code class="docutils literal">oc_chef_pedant['log_http_requests']</code></dt> <dd>Log HTTP requests in a file named <code class="docutils literal">http-traffic.log</code> that is located in the path specified by <code class="docutils literal">log_directory</code>. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">oc_chef_pedant['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> </dl>   <h3 id="oc-id">oc-id</h3> <p>The <strong>oc-id</strong> service enables OAuth 2.0 authentication to the Chef server by external applications, including Chef Supermarket and Chef Analytics. OAuth 2.0 uses token-based authentication, where external applications use tokens that are issued by the <strong>oc-id</strong> provider. No special credentials—<code class="docutils literal">webui_priv.pem</code> or privileged keys—are stored on the external application.</p> <p>This configuration file has the following settings for <code class="docutils literal">oc-id</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">oc_id['administrators']</code></dt> <dd>An array of Chef server user names who may add applications to the identity service. For example, <code class="docutils literal">['user1', 'user2']</code>. Default value: <code class="docutils literal">[ ]</code>.</dd> <dt><code class="docutils literal">oc_id['applications']</code></dt> <dd>
<p class="first">A Hash that contains OAuth 2 application information. Default value: <code class="docutils literal">{ }</code>.</p> <p>To define OAuth 2 information for Chef Supermarket, create a Hash similar to:</p> <blockquote> <div>
<pre class="highlight-ruby" data-language="ruby">oc_id['applications'] ||= {}
oc_id['applications']['supermarket'] = {
  'redirect_uri' =&gt; 'https://supermarket.mycompany.com/auth/chef_oauth2/callback'
}</pre> </div>
</blockquote> <p>To define OAuth 2 information for Chef Analytics, create a Hash similar to:</p> <blockquote class="last"> <div>
<pre class="highlight-ruby" data-language="ruby">oc_id['applications'] ||= {}
oc_id['applications']['analytics'] = {
  'redirect_uri' =&gt; 'https://analytics.rhel.aws'
}</pre> </div>
</blockquote> </dd> <dt><code class="docutils literal">oc_id['db_pool_size']</code></dt> <dd>The number of open connections to PostgreSQL that are maintained by the service. Default value: <code class="docutils literal">'20'</code>.</dd> <dt><code class="docutils literal">oc_id['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: none.</dd> <dt><code class="docutils literal">oc_id['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">oc_id['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">oc_id['log_directory']</code></dt> <dd>The directory in which log data is stored. The default value is the recommended value. Default value: <code class="docutils literal">'/var/opt/opscode/oc_id'</code>.</dd> <dt><code class="docutils literal">oc_id['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">oc_id['num_to_keep']</code></dt> <dd>The number of log files to keep. Default value: <code class="docutils literal">10</code>.</dd> <dt><code class="docutils literal">oc_id['port']</code></dt> <dd>The port on which the service is to listen. Default value: <code class="docutils literal">9090</code>.</dd> <dt><code class="docutils literal">oc_id['sql_database']</code></dt> <dd>The name of the database. Default value: <code class="docutils literal">oc_id</code>.</dd> <dt><code class="docutils literal">oc_id['sql_password']</code></dt> <dd>The password for the <code class="docutils literal">sql_user</code>. Default value: <code class="docutils literal">snakepliskin</code>.</dd> <dt><code class="docutils literal">oc_id['sql_user']</code></dt> <dd>The user with permission to write to <code class="docutils literal">sql_database</code>. Default value: <code class="docutils literal">oc_id</code>.</dd> <dt><code class="docutils literal">oc_id['vip']</code></dt> <dd>The virtual IP address. Default value: <code class="docutils literal">'127.0.0.1'</code>.</dd> </dl>   <h3 id="opscode-chef-mover">opscode-chef-mover</h3> <p>This configuration file has the following settings for <code class="docutils literal">opscode-chef-mover</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">opscode_chef_mover['bulk_fetch_batch_size']</code></dt> <dd>Default value: <code class="docutils literal">'5'</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['cache_ttl']</code></dt> <dd>Default value: <code class="docutils literal">'3600'</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['db_pool_size']</code></dt> <dd>The number of open connections to PostgreSQL that are maintained by the service. Default value: <code class="docutils literal">'5'</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['data_dir']</code></dt> <dd>
<p class="first">The directory in which on-disk data is stored. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">'/var/opt/opscode/opscode-chef-mover/data'</pre> </dd> <dt><code class="docutils literal">opscode_chef_mover['dir']</code></dt> <dd>
<p class="first">The working directory. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">'/var/opt/opscode/opscode-chef-mover'</pre> </dd> <dt><code class="docutils literal">opscode_chef_mover['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['ibrowse_max_pipeline_size']</code></dt> <dd>Default value: <code class="docutils literal">1</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['ibrowse_max_sessions']</code></dt> <dd>Default value: <code class="docutils literal">256</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['log_directory']</code></dt> <dd>
<p class="first">The directory in which log data is stored. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">'/var/log/opscode/opscode-chef-mover'</pre> </dd> <dt><code class="docutils literal">opscode_chef_mover['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">opscode_chef_mover['max_cache_size']</code></dt> <dd>Default value: <code class="docutils literal">'10000'</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['solr_http_cull_interval']</code></dt> <dd>Default value: <code class="docutils literal">'{1, min}'</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['solr_http_init_count']</code></dt> <dd>Default value: <code class="docutils literal">25</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['solr_http_max_age']</code></dt> <dd>Default value: <code class="docutils literal">'{70, sec}'</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['solr_http_max_connection_duration']</code></dt> <dd>Default value: <code class="docutils literal">'{70, sec}'</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['solr_http_max_count']</code></dt> <dd>Default value: <code class="docutils literal">100</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['solr_ibrowse_options']</code></dt> <dd>Default value: <code class="docutils literal">'[{connect_timeout, 10000}]'</code>.</dd> <dt><code class="docutils literal">opscode_chef_mover['solr_timeout']</code></dt> <dd>Default value: <code class="docutils literal">30000</code>.</dd> </dl>   <h3 id="opscode-erchef">opscode-erchef</h3> <p>The <strong>opscode-erchef</strong> service is an Erlang-based service that is used to handle Chef server API requests to the following areas within the Chef server:</p> <ul class="simple"> <li>Cookbooks</li> <li>Data bags</li> <li>Environments</li> <li>Nodes</li> <li>Roles</li> <li>Sandboxes</li> <li>Search</li> </ul> <p>This configuration file has the following settings for <code class="docutils literal">opscode-erchef</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">opscode_erchef['auth_skew']</code></dt> <dd>Default value: <code class="docutils literal">900</code>.</dd> <dt><code class="docutils literal">opscode_erchef['authz_fanout']</code></dt> <dd>Default value: <code class="docutils literal">20</code>.</dd> <dt><code class="docutils literal">opscode_erchef['authz_timeout']</code></dt> <dd>The amount of time (in seconds) before a request to the <strong>oc_bifrost</strong> service times out. Default value: <code class="docutils literal">2000</code>.</dd> <dt><code class="docutils literal">opscode_erchef['base_resource_url']</code></dt> <dd>The base URL to which the service is to return links to API resources. Use <code class="docutils literal">:host_header</code> to ensure the URL is derived from the host header of the incoming HTTP request. Default value: <code class="docutils literal">:host_header</code>.</dd> <dt><code class="docutils literal">opscode_erchef['bulk_fetch_batch_size']</code></dt> <dd>The number of nodes that may be deserialized. Currently only applies to the <code class="docutils literal">/search</code> endpoint in the Chef server API. The default value is the recommended value. Default value: <code class="docutils literal">5</code>.</dd> <dt><code class="docutils literal">opscode_erchef['cache_ttl']</code></dt> <dd>Default value: <code class="docutils literal">3600</code>.</dd> <dt><code class="docutils literal">opscode_erchef['cleanup_batch_size']</code></dt> <dd>Default value: <code class="docutils literal">0</code>.</dd> <dt><code class="docutils literal">opscode_erchef['couchdb_max_conn']</code></dt> <dd>Default value: <code class="docutils literal">'100'</code>.</dd> <dt><code class="docutils literal">opscode_erchef['db_pool_size']</code></dt> <dd>The number of open connections to PostgreSQL that are maintained by the service. Default value: <code class="docutils literal">20</code>.</dd> <dt><code class="docutils literal">opscode_erchef['depsolver_timeout']</code></dt> <dd>The amount of time (in milliseconds) to wait for cookbook dependency problems to be solved. Default value: <code class="docutils literal">'5000'</code>.</dd> <dt><code class="docutils literal">opscode_erchef['depsolver_worker_count']</code></dt> <dd>The number of Ruby processes for which cookbook dependency problems are unsolved. Use the <code class="docutils literal">pgrep -fl depselector</code> command to verify the number of depsolver workers that are running. If you are seeing 503 service unavailable errors, increase this value. Default value: <code class="docutils literal">'5'</code>.</dd> <dt><code class="docutils literal">opscode_erchef['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: <code class="docutils literal">/var/opt/opscode/opscode-erchef</code>.</dd> <dt><code class="docutils literal">opscode_erchef['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">opscode_erchef['enable_actionlog']</code></dt> <dd>Use to enable Chef actions, a premium feature of the Chef server. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">opscode_erchef['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">opscode_erchef['ibrowse_max_pipeline_size']</code></dt> <dd>Default value: <code class="docutils literal">1</code>.</dd> <dt><code class="docutils literal">opscode_erchef['ibrowse_max_sessions']</code></dt> <dd>Default value: <code class="docutils literal">256</code>.</dd> <dt><code class="docutils literal">opscode_erchef['listen']</code></dt> <dd>The IP address on which the service is to listen. Default value: <code class="docutils literal">127.0.0.1</code>.</dd> <dt><code class="docutils literal">opscode_erchef['log_directory']</code></dt> <dd>The directory in which log data is stored. The default value is the recommended value. Default value: <code class="docutils literal">/var/log/opscode/opscode-erchef</code>.</dd> <dt><code class="docutils literal">opscode_erchef['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">opscode_erchef['max_cache_size']</code></dt> <dd>Default value: <code class="docutils literal">10000</code>.</dd> <dt><code class="docutils literal">opscode_erchef['max_request_size']</code></dt> <dd>Default value: <code class="docutils literal">1000000</code>.</dd> <dt><code class="docutils literal">opscode_erchef['nginx_bookshelf_caching']</code></dt> <dd>Whether Nginx is used to cache cookbooks. When <code class="docutils literal">:on</code>, Nginx serves up the cached content instead of forwarding the request. Default value: <code class="docutils literal">:off</code>.</dd> <dt><code class="docutils literal">opscode_erchef['port']</code></dt> <dd>The port on which the service is to listen. Default value: <code class="docutils literal">8000</code>.</dd> <dt><code class="docutils literal">opscode_erchef['root_metric_key']</code></dt> <dd>Default value: <code class="docutils literal">chefAPI</code>.</dd> <dt><code class="docutils literal">opscode_erchef['s3_bucket']</code></dt> <dd>The name of the Amazon Simple Storage Service (S3) bucket. (This is configurable and may be pointed at external storage locations, such as Amazon EC2. Four settings require configuration when pointing at an external cookbook storage location: <code class="docutils literal">bookshelf['vip']</code>, for the endpoint used by the chef-client; <code class="docutils literal">bookshelf['external_url']</code>, for the endpoint used by the Chef server; <code class="docutils literal">bookshelf['access_key_id']</code>, for user access key; <code class="docutils literal">bookshelf['secret_access_key']</code>, for secret key; and <code class="docutils literal">opscode_erchef['s3_bucket']</code>, for the bucket name. Reconfigure the Chef server after changing these settings. Default value: <code class="docutils literal">bookshelf</code>.</dd> <dt><code class="docutils literal">opscode_erchef['s3_parallel_ops_fanout']</code></dt> <dd>Default value: <code class="docutils literal">20</code>.</dd> <dt><code class="docutils literal">opscode_erchef['s3_parallel_ops_timeout']</code></dt> <dd>Default value: <code class="docutils literal">5000</code>.</dd> <dt><code class="docutils literal">opscode_erchef['s3_url_expiry_window_size']</code></dt> <dd>The frequency at which unique URLs are generated. This value may be a specific amount of time, i.e. <code class="docutils literal">15m</code> (fifteen minutes) or a percentage of the value of <code class="docutils literal">s3_url_ttl</code>, i.e. <code class="docutils literal">10%</code>. Default value: <code class="docutils literal">:off</code>.</dd> <dt><code class="docutils literal">opscode_erchef['s3_url_ttl']</code></dt> <dd>The amount of time (in seconds) before connections to the server expire. If node bootstraps are timing out, increase this setting. Default value: <code class="docutils literal">28800</code>.</dd> <dt><code class="docutils literal">opscode_erchef['strict_search_result_acls']</code></dt> <dd>
<p class="first">Use to specify that search results only return objects to which an actor (user, client, etc.) has read access, as determined by ACL settings. This affects all searches. When <code class="docutils literal">true</code>, the performance of the Chef management console may increase because it enables the Chef management console to skip redundant ACL checks. To ensure the Chef management console is configured properly, after this setting has been applied with a <code class="docutils literal">chef-server-ctl reconfigure</code> run <code class="docutils literal">chef-manage-ctl reconfigure</code> to ensure the Chef management console also picks up the setting. Default value: <code class="docutils literal">false</code>.</p> <div class="last admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">When <code class="docutils literal">true</code>, <code class="docutils literal">opscode_erchef['strict_search_result_acls']</code> affects all search results and any actor (user, client, etc.) that does not have read access to a search result will not be able to view it. For example, this could affect search results returned during chef-client runs if a chef-client does not have permission to read the information.</p> </div> </dd> <dt><code class="docutils literal">opscode_erchef['udp_socket_pool_size']</code></dt> <dd>Default value: <code class="docutils literal">20</code>.</dd> <dt><code class="docutils literal">opscode_erchef['umask']</code></dt> <dd>Default value: <code class="docutils literal">0022</code>.</dd> <dt><code class="docutils literal">opscode_erchef['validation_client_name']</code></dt> <dd>Default value: <code class="docutils literal">chef-validator</code>.</dd> <dt><code class="docutils literal">opscode_erchef['vip']</code></dt> <dd>The virtual IP address. Default value: <code class="docutils literal">127.0.0.1</code>.</dd> </dl>   <h3 id="opscode-expander">opscode-expander</h3> <p>The <strong>opscode-expander</strong> service is used to process data (pulled from the <strong>rabbitmq</strong> service’s message queue) so that it can be properly indexed by the <strong>opscode-solr4</strong> service.</p> <p>This configuration file has the following settings for <code class="docutils literal">opscode-expander</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">opscode_expander['consumer_id']</code></dt> <dd>The identity of the consumer to which messages are published. Default value: <code class="docutils literal">default</code>.</dd> <dt><code class="docutils literal">opscode_expander['dir']</code></dt> <dd>
<p class="first">The working directory. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/var/opt/opscode/opscode-expander</pre> </dd> <dt><code class="docutils literal">opscode_expander['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">opscode_expander['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">opscode_expander['log_directory']</code></dt> <dd>
<p class="first">The directory in which log data is stored. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/var/log/opscode/opscode-expander</pre> </dd> <dt><code class="docutils literal">opscode_expander['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">opscode_expander['nodes']</code></dt> <dd>The number of allowed worker processes. Default value: <code class="docutils literal">2</code>.</dd> <dt><code class="docutils literal">opscode_expander['reindexer_log_directory']</code></dt> <dd>
<p class="first">The directory in which <code class="docutils literal">opscode-expander-reindexer</code> logs files are located. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/var/log/opscode/opscode-expander-reindexer</pre> </dd> </dl>   <h3 id="opscode-solr4">opscode-solr4</h3> <p>The <strong>opscode-solr4</strong> service is used to create the search indexes used for searching objects like nodes, data bags, and cookbooks. (This service ensures timely search results via the Chef server API; data that is used by the Chef platform is stored in PostgreSQL.)</p> <p>This configuration file has the following settings for <code class="docutils literal">opscode-solr4</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">opscode_solr4['auto_soft_commit']</code></dt> <dd>The maximum number of documents before a soft commit is triggered. Default value: <code class="docutils literal">1000</code>.</dd> <dt><code class="docutils literal">opscode_solr4['commit_interval']</code></dt> <dd>The frequency (in seconds) at which node objects are added to the Apache Solr search index. This value should be tuned carefully. When data is committed to the Apache Solr index, all incoming updates are blocked. If the duration between updates is too short, it is possible for the rate at which updates are asked to occur to be faster than the rate at which objects can be actually committed. Default value: <code class="docutils literal">60000</code> (every 60 seconds).</dd> <dt><code class="docutils literal">opscode_solr4['data_dir']</code></dt> <dd>
<p class="first">The directory in which on-disk data is stored. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/var/opt/opscode/opscode-solr4/data</pre> </dd> <dt><code class="docutils literal">opscode_solr4['dir']</code></dt> <dd>
<p class="first">The working directory. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/var/opt/opscode/opscode-solr4</pre> </dd> <dt><code class="docutils literal">opscode_solr4['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">opscode_solr4['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">opscode_solr4['heap_size']</code></dt> <dd>The amount of memory (in MBs) available to Apache Solr. If there is not enough memory available, search queries made by nodes to Apache Solr may fail. The amount of memory that must be available also depends on the number of nodes in the organization, the frequency of search queries, and other characteristics that are unique to each organization. In general, as the number of nodes increases, so does the amount of memory. The default value should work for many organizations with fewer than 25 nodes. For an organization with several hundred nodes, the amount of memory that is required often exceeds 3GB. Default value: <code class="docutils literal">nil</code>, which is equivalent to 25% of the system memory or 1024 (MB, but this setting is specified as an integer number of MB in EC11), whichever is smaller.</dd> <dt><code class="docutils literal">opscode_solr4['ip_address']</code></dt> <dd>The IP address for the machine on which Apache Solr is running. Default value: <code class="docutils literal">127.0.0.1</code>.</dd> <dt><code class="docutils literal">opscode_solr4['java_opts']</code></dt> <dd>A Hash of <code class="docutils literal">JAVA_OPTS</code> environment variables to be set. (<code class="docutils literal">-XX:NewSize</code> is configured using the <code class="docutils literal">new_size</code> setting.) Default value: <code class="docutils literal">' '</code> (empty).</dd> <dt><code class="docutils literal">opscode_solr4['log_directory']</code></dt> <dd>
<p class="first">The directory in which log data is stored. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/var/log/opscode/opscode-solr4</pre> </dd> <dt><code class="docutils literal">opscode_solr4['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">opscode_solr4['max_commit_docs']</code></dt> <dd>The frequency (in documents) at which node objects are added to the Apache Solr search index. This value should be tuned carefully. When data is committed to the Apache Solr index, all incoming updates are blocked. If the duration between updates is too short, it is possible for the rate at which updates are asked to occur to be faster than the rate at which objects can be actually committed. Default value: <code class="docutils literal">1000</code> (every 1000 documents).</dd> <dt><code class="docutils literal">opscode_solr4['max_field_length']</code></dt> <dd>The maximum field length (in number of tokens/terms). If a field length exceeds this value, Apache Solr may not be able to complete building the index. Default value: <code class="docutils literal">100000</code> (increased from the Apache Solr default value of <code class="docutils literal">10000</code>).</dd> <dt><code class="docutils literal">opscode_solr4['max_merge_docs']</code></dt> <dd>The maximum number of index segments allowed before they are merged into a single index. Default value: <code class="docutils literal">2147483647</code>.</dd> <dt><code class="docutils literal">opscode_solr4['merge_factor']</code></dt> <dd>The maximum number of document updates that can be stored in memory before being flushed and added to the current index segment. Default value: <code class="docutils literal">15</code>.</dd> <dt><code class="docutils literal">opscode_solr4['new_size']</code></dt> <dd>Configure the <code class="docutils literal">-XX:NewSize</code> <code class="docutils literal">JAVA_OPTS</code> environment variable. Default value: <code class="docutils literal">nil</code>.</dd> <dt><code class="docutils literal">opscode_solr4['poll_seconds']</code></dt> <dd>The frequency (in seconds) at which the secondary machine polls the primary. Default value: <code class="docutils literal">20</code>.</dd> <dt><code class="docutils literal">opscode_solr4['port']</code></dt> <dd>The port on which the service is to listen. Default value: <code class="docutils literal">8983</code>.</dd> <dt><code class="docutils literal">opscode_solr4['ram_buffer_size']</code></dt> <dd>The size (in megabytes) of the RAM buffer. When document updates exceed this amout, pending updates are flushed. Default value: <code class="docutils literal">100</code>.</dd> <dt><code class="docutils literal">opscode_solr4['url']</code></dt> <dd>Default value: <code class="docutils literal">'http://localhost:8983/solr'</code>.</dd> <dt><code class="docutils literal">opscode_solr4['vip']</code></dt> <dd>The virtual IP address. Default value: <code class="docutils literal">127.0.0.1</code>.</dd> </dl>   <h3 id="postgresql">postgresql</h3> <p>The <strong>postgresql</strong> service is used to store node, object, and user data.</p> <p>This configuration file has the following settings for <code class="docutils literal">postgresql</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">postgresql['checkpoint_completion_target']</code></dt> <dd>A completion percentage that is used to determine how quickly a checkpoint should finish in relation to the completion status of the next checkpoint. For example, if the value is <code class="docutils literal">0.5</code>, then a checkpoint attempts to finish before 50% of the next checkpoint is done. Default value: <code class="docutils literal">0.5</code>.</dd> <dt><code class="docutils literal">postgresql['checkpoint_segments']</code></dt> <dd>The maximum amount (in megabytes) between checkpoints in log file segments. Default value: <code class="docutils literal">3</code>.</dd> <dt><code class="docutils literal">postgresql['checkpoint_timeout']</code></dt> <dd>The amount of time (in minutes) between checkpoints. Default value: <code class="docutils literal">5min</code>.</dd> <dt><code class="docutils literal">postgresql['checkpoint_warning']</code></dt> <dd>The frequency (in seconds) at which messages are sent to the server log files if checkpoint segments are being filled faster than their currently configured values. Default value: <code class="docutils literal">30s</code>.</dd> <dt><code class="docutils literal">postgresql['data_dir']</code></dt> <dd>
<p class="first">The directory in which on-disk data is stored. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/var/opt/opscode/postgresql/#{node['private_chef']['postgresql']['version']}/data</pre> </dd> <dt><code class="docutils literal">postgresql['db_superuser']</code></dt> <dd>Required when <code class="docutils literal">postgresql['external']</code> is set to <code class="docutils literal">true</code>. The PostgreSQL user name. This user must be granted either the <code class="docutils literal">CREATE ROLE</code> and <code class="docutils literal">CREATE DATABASE</code> permissions in PostgreSQL or be granted <code class="docutils literal">SUPERUSER</code> permission. This user must also have an entry in the host-based authentication configuration file used by PostgreSQL (traditionally named <code class="docutils literal">pg_hba.conf</code>). Default value: <code class="docutils literal">'superuser_userid'</code>.</dd> <dt><code class="docutils literal">postgresql['db_superuser_password']</code></dt> <dd>Required when <code class="docutils literal">postgresql['external']</code> is set to <code class="docutils literal">true</code>. The password for the user specified by <code class="docutils literal">postgresql['db_superuser']</code>. Default value: <code class="docutils literal">'the password'</code>.</dd> <dt><code class="docutils literal">postgresql['dir']</code></dt> <dd>
<p class="first">The working directory. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/var/opt/opscode/postgresql/#{node['private_chef']['postgresql']['version']}</pre> </dd> <dt><code class="docutils literal">postgresql['effective_cache_size']</code></dt> <dd>The size of the disk cache that is used for data files. Default value: 50% of available RAM.</dd> <dt><code class="docutils literal">postgresql['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">postgresql['external']</code></dt> <dd>Required. Set to <code class="docutils literal">true</code> to run PostgreSQL external to the Chef server. Must be set once only on a new installation of the Chef server before the first <code class="docutils literal">chef-server-ctl reconfigure</code> command is run. If this is set after a reconfigure or set to <code class="docutils literal">false</code>, any reconfigure of the Chef server will return an error. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">postgresql['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">postgresql['home']</code></dt> <dd>The home directory for PostgreSQL. Default value: <code class="docutils literal">/var/opt/opscode/postgresql</code>.</dd> <dt><code class="docutils literal">postgresql['keepalives_count']</code></dt> <dd>The maximum number of keepalive proves that should be sent before dropping a connection. Default value: <code class="docutils literal">2</code>.</dd> <dt><code class="docutils literal">postgresql['keepalives_idle']</code></dt> <dd>The amount of time (in seconds) a connection must remain idle before keepalive probes will resume. Default value: <code class="docutils literal">60</code>.</dd> <dt><code class="docutils literal">postgresql['keepalives_interval']</code></dt> <dd>The amount of time (in seconds) between probes. Default value: <code class="docutils literal">15</code>.</dd> <dt><code class="docutils literal">postgresql['listen_address']</code></dt> <dd>The connection source to which PostgreSQL is to respond. Default value: <code class="docutils literal">localhost</code>.</dd> <dt><code class="docutils literal">postgresql['log_directory']</code></dt> <dd>
<p class="first">The directory in which log data is stored. The default value is the recommended value. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/var/log/opscode/postgresql/#{node['private_chef']['postgresql']['version']}</pre> </dd> <dt><code class="docutils literal">postgresql['log_min_duration_statement']</code></dt> <dd>When to log a slow PostgreSQL query statement. Possible values: <code class="docutils literal">-1</code> (disabled, do not log any statements), <code class="docutils literal">0</code> (log every statement), or an integer greater than zero. When the integer is greater than zero, this value is the amount of time (in milliseconds) that a query statement must have run before it is logged. Default value: <code class="docutils literal">-1</code>.</dd> <dt><code class="docutils literal">postgresql['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">postgresql['max_connections']</code></dt> <dd>The maximum number of allowed concurrent connections. Default value: <code class="docutils literal">350</code>.</dd> <dt><code class="docutils literal">postgresql['md5_auth_cidr_addresses']</code></dt> <dd>Use instead of <code class="docutils literal">trust_auth_cidr_addresses</code> to encrypt passwords using MD5 hashes. Default value: <code class="docutils literal">[ '127.0.0.1/32', '::1/128' ]</code>.</dd> <dt><code class="docutils literal">postgresql['port']</code></dt> <dd>Optional when <code class="docutils literal">postgresql['external']</code> is set to <code class="docutils literal">true</code>. The port on which the service is to listen. The port used by PostgreSQL if that port is <strong>not</strong> 5432. Default value: <code class="docutils literal">5432</code>.</dd> <dt><code class="docutils literal">postgresql['shared_buffers']</code></dt> <dd>
<p class="first">The amount of memory that is dedicated to PostgreSQL for data caching. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">#{(node['memory']['total'].to_i / 4) / (1024)}MB</pre> </dd> <dt><code class="docutils literal">postgresql['shell']</code></dt> <dd>Default value: <code class="docutils literal">/bin/sh</code>.</dd> <dt><code class="docutils literal">postgresql['shmall']</code></dt> <dd>The total amount of available shared memory. Default value: <code class="docutils literal">4194304</code>.</dd> <dt><code class="docutils literal">postgresql['shmmax']</code></dt> <dd>The maximum amount of shared memory. Default value: <code class="docutils literal">17179869184</code>.</dd> <dt><code class="docutils literal">postgresql['sql_password']</code></dt> <dd>The password for the PostgreSQL user account. Default value: <code class="docutils literal">snakepliskin</code>.</dd> <dt><code class="docutils literal">postgresql['sql_ro_password']</code></dt> <dd>Default value: <code class="docutils literal">shmunzeltazzen</code>.</dd> <dt><code class="docutils literal">postgresql['sql_ro_user']</code></dt> <dd>Default value: <code class="docutils literal">opscode_chef_ro</code>.</dd> <dt><code class="docutils literal">postgresql['sql_user']</code></dt> <dd>Default value: <code class="docutils literal">opscode_chef</code>.</dd> <dt><code class="docutils literal">postgresql['trust_auth_cidr_addresses']</code></dt> <dd>Use for clear-text passwords. See <code class="docutils literal">md5_auth_cidr_addresses</code>. Default value: <code class="docutils literal">'127.0.0.1/32', '::1/128'</code>.</dd> <dt><code class="docutils literal">postgresql['user_path']</code></dt> <dd>
<p class="first">Default value:</p> <pre class="last highlight-ruby" data-language="ruby">/opt/opscode/embedded/bin:/opt/opscode/bin:$PATH</pre> </dd> <dt><code class="docutils literal">postgresql['username']</code></dt> <dd>The PostgreSQL account user name. Default value: <code class="docutils literal">opscode-pgsql</code>.</dd> <dt><code class="docutils literal">postgresql['version']</code></dt> <dd>The (currently) hardcoded version of PostgreSQL. Default value: <code class="docutils literal">'9.2'</code>.</dd> <dt><code class="docutils literal">postgresql['vip']</code></dt> <dd>Required when <code class="docutils literal">postgresql['external']</code> is set to <code class="docutils literal">true</code>. The virtual IP address. The host for this IP address must be online and reachable from the Chef server via the port specified by <code class="docutils literal">postgresql['port']</code>. Default value: <code class="docutils literal">127.0.0.1</code>. Set this value to the IP address or hostname for the machine on which external PostgreSQL is located when <code class="docutils literal">postgresql['external']</code> is set to <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">postgresql['work_mem']</code></dt> <dd>The size (in megabytes) of allowed in-memory sorting. Default value: <code class="docutils literal">8MB</code>.</dd> </dl>   <h3 id="rabbitmq">rabbitmq</h3> <p>The <strong>rabbitmq</strong> service is used to provide the message queue that is used by the Chef server to get search data to Apache Solr so that it can be indexed for search. When Chef Analytics is confiugred, the <strong>rabbitmq</strong> service is also used to send data from the Chef server to the Chef Analytics server.</p> <p>This configuration file has the following settings for <code class="docutils literal">rabbitmq</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">rabbitmq['actions_exchange']</code></dt> <dd>The name of the exchange to which Chef actions publishes actions data. Default value: <code class="docutils literal">'actions'</code>.</dd> <dt><code class="docutils literal">rabbitmq['actions_password']</code></dt> <dd>The password for the <code class="docutils literal">actions_user</code>. Default value: <code class="docutils literal">'changeme'</code>.</dd> <dt><code class="docutils literal">rabbitmq['actions_user']</code></dt> <dd>The user with permission to publish actions data. Default value: <code class="docutils literal">'actions'</code>.</dd> <dt><code class="docutils literal">rabbitmq['actions_vhost']</code></dt> <dd>The virtual host to which Chef actions publishes actions data. Default value: <code class="docutils literal">'/analytics'</code>.</dd> <dt><code class="docutils literal">rabbitmq['analytics_max_length']</code></dt> <dd>The maximum number of messages that can be queued before RabbitMQ automatically drops messages from the front of the queue to make room for new messages. Default value: <code class="docutils literal">10000</code>.</dd> <dt><code class="docutils literal">rabbitmq['consumer_id']</code></dt> <dd>The identity of the consumer to which messages are published. Default value: <code class="docutils literal">'hotsauce'</code>.</dd> <dt><code class="docutils literal">rabbitmq['data_dir']</code></dt> <dd>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code class="docutils literal">'/var/opt/opscode/rabbitmq/db'</code>.</dd> <dt><code class="docutils literal">rabbitmq['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: <code class="docutils literal">'/var/opt/opscode/rabbitmq'</code>.</dd> <dt><code class="docutils literal">rabbitmq['drop_on_full_capacity']</code></dt> <dd>Specify if messages will stop being sent to the RabbitMQ queue when it is at capacity. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">rabbitmq['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">rabbitmq['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">rabbitmq['jobs_password']</code></dt> <dd>Default value: <code class="docutils literal">'workcomplete'</code>.</dd> <dt><code class="docutils literal">rabbitmq['jobs_user']</code></dt> <dd>Default value: <code class="docutils literal">'jobs'</code>.</dd> <dt><code class="docutils literal">rabbitmq['jobs_vhost']</code></dt> <dd>Default value: <code class="docutils literal">'/jobs'</code>.</dd> <dt><code class="docutils literal">rabbitmq['log_directory']</code></dt> <dd>The directory in which log data is stored. The default value is the recommended value. Default value: <code class="docutils literal">'/var/log/opscode/rabbitmq'</code>.</dd> <dt><code class="docutils literal">rabbitmq['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">rabbitmq['management_enabled']</code></dt> <dd>Specify if the rabbitmq-management plugin is enabled. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">rabbitmq['management_password']</code></dt> <dd>The rabbitmq-management plugin password. Default value: <code class="docutils literal">'chefrocks'</code>.</dd> <dt><code class="docutils literal">rabbitmq['management_port']</code></dt> <dd>The rabbitmq-management plugin port. Default value: <code class="docutils literal">15672</code>.</dd> <dt><code class="docutils literal">rabbitmq['management_user']</code></dt> <dd>The rabbitmq-management plugin user. Default value: <code class="docutils literal">'rabbitmgmt'</code>.</dd> <dt><code class="docutils literal">rabbitmq['node_ip_address']</code></dt> <dd>
<p class="first">The bind IP address for RabbitMQ. Default value: <code class="docutils literal">'127.0.0.1'</code>.</p> <p class="last">Chef Analytics uses the same RabbitMQ service that is configured on the Chef server. When the Chef Analytics server is configured as a standalone server, the default settings for <code class="docutils literal">rabbitmq['node_ip_address']</code> and <code class="docutils literal">rabbitmq['vip']</code> must be updated. When the Chef Analytics server is configured as a standalone server, change this value to <code class="docutils literal">0.0.0.0</code>.</p> </dd> <dt><code class="docutils literal">rabbitmq['node_port']</code></dt> <dd>The port on which the service is to listen. Default value: <code class="docutils literal">'5672'</code>.</dd> <dt><code class="docutils literal">rabbitmq['nodename']</code></dt> <dd>The name of the node. Default value: <code class="docutils literal">'rabbit@localhost'</code>.</dd> <dt><code class="docutils literal">rabbitmq['password']</code></dt> <dd>The password for the RabbitMQ user. Default value: <code class="docutils literal">'chefrocks'</code>.</dd> <dt><code class="docutils literal">rabbitmq['prevent_erchef_startup_on_full_capacity']</code></dt> <dd>Specify if the Chef server will start when the monitored RabbitMQ queue is full. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">rabbitmq['queue_at_capacity_affects_overall_status']</code></dt> <dd>Specify if the <code class="docutils literal">_status</code> endpoint in the Chef server API will fail if the monitored queue is at capacity. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">rabbitmq['queue_length_monitor_enabled']</code></dt> <dd>Specify if the queue length monitor is enabled. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">rabbitmq['queue_length_monitor_millis']</code></dt> <dd>The frequency (in milliseconds) at which the length of the RabbitMQ queue is checked. Default value: <code class="docutils literal">30000</code>.</dd> <dt><code class="docutils literal">rabbitmq['queue_length_monitor_timeout_millis']</code></dt> <dd>The timeout (in milliseconds) at which calls to the queue length monitor will stop if the Chef server is overloaded. Default value: <code class="docutils literal">5000</code>.</dd> <dt><code class="docutils literal">rabbitmq['queue_length_monitor_queue']</code></dt> <dd>The RabbitMQ queue that is observed by queue length monitor. Default value: <code class="docutils literal">'alaska'</code>.</dd> <dt><code class="docutils literal">rabbitmq['queue_length_monitor_vhost']</code></dt> <dd>The virtual host for the RabbitMQ queue that is observed by queue length monitor. Default value: <code class="docutils literal">'/analytics'</code>.</dd> <dt><code class="docutils literal">rabbitmq['rabbit_mgmt_http_cull_interval']</code></dt> <dd>The maximum cull interval (in seconds) for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code class="docutils literal">60</code>.</dd> <dt><code class="docutils literal">rabbitmq['rabbit_mgmt_http_init_count']</code></dt> <dd>The initial worker count for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code class="docutils literal">25</code>.</dd> <dt><code class="docutils literal">rabbitmq['rabbit_mgmt_http_max_age']</code></dt> <dd>The maximum connection worker age (in seconds) for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code class="docutils literal">70</code>.</dd> <dt><code class="docutils literal">rabbitmq['rabbit_mgmt_http_max_connection_duration']</code></dt> <dd>The maximum connection duration (in seconds) for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code class="docutils literal">70</code>.</dd> <dt><code class="docutils literal">rabbitmq['rabbit_mgmt_http_max_count']</code></dt> <dd>The maximum worker count for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code class="docutils literal">100</code>.</dd> <dt><code class="docutils literal">rabbitmq['rabbit_mgmt_ibrowse_options']</code></dt> <dd>An array of comma-separated key-value pairs of ibrowse options for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code class="docutils literal">'{connect_timeout, 10000}'</code>.</dd> <dt><code class="docutils literal">rabbitmq['rabbit_mgmt_timeout']</code></dt> <dd>The timeout for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code class="docutils literal">30000</code>.</dd> <dt><code class="docutils literal">rabbitmq['reindexer_vhost']</code></dt> <dd>Default value: <code class="docutils literal">'/reindexer'</code>.</dd> <dt><code class="docutils literal">rabbitmq['ssl_versions']</code></dt> <dd>The SSL versions used by the rabbitmq-management plugin. (See also <a class="reference external" href="https://www.rabbitmq.com/ssl.html">https://www.rabbitmq.com/ssl.html</a>.) Default value: <code class="docutils literal">['tlsv1.2', 'tlsv1.1']</code>.</dd> <dt><code class="docutils literal">rabbitmq['user']</code></dt> <dd>Default value: <code class="docutils literal">'chef'</code>.</dd> <dt><code class="docutils literal">rabbitmq['vhost']</code></dt> <dd>Default value: <code class="docutils literal">'/chef'</code>.</dd> <dt><code class="docutils literal">rabbitmq['vip']</code></dt> <dd>
<p class="first">The virtual IP address. Default value: <code class="docutils literal">'127.0.0.1'</code>.</p> <p class="last">Chef Analytics uses the same RabbitMQ service that is configured on the Chef server. When the Chef Analytics server is configured as a standalone server, the default settings for <code class="docutils literal">rabbitmq['node_ip_address']</code> and <code class="docutils literal">rabbitmq['vip']</code> must be updated. When the Chef Analytics server is configured as a standalone server, this value should be updated to be the backend VIP address for the Chef server.</p> </dd> </dl>   <h3 id="redis-lb">redis_lb</h3> <p>Key-value store used in conjunction with Nginx to route requests and populate request data used by the Chef server.</p> <p>This configuration file has the following settings for <code class="docutils literal">redis_lb</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">redis_lb['activerehashing']</code></dt> <dd>Enable active rehashing. Default value: <code class="docutils literal">'no'</code>.</dd> <dt><code class="docutils literal">redis_lb['aof_rewrite_min_size']</code></dt> <dd>The minimum size of the append-only file. Only files larger than this value are rewritten. Default value: <code class="docutils literal">'16mb'</code>.</dd> <dt><code class="docutils literal">redis_lb['aof_rewrite_percent']</code></dt> <dd>The size of the current append-only file, as compared to the base size. The append-only file is rewritten when the current file exceeds the base size by this value. Default value: <code class="docutils literal">'50'</code>.</dd> <dt><code class="docutils literal">redis_lb['appendfsync']</code></dt> <dd>The frequency at which the operating system writes data on-disk, instead of waiting for more data. Possible values: <code class="docutils literal">no</code> (don’t fsync, let operating system flush data), <code class="docutils literal">always</code> (fsync after every write to the append-only log file), and <code class="docutils literal">everysec</code> (fsync only once time per second). Default value: <code class="docutils literal">'always'</code>.</dd> <dt><code class="docutils literal">redis_lb['appendonly']</code></dt> <dd>Dump data asynchronously on-disk or to an append-only log file. Set to <code class="docutils literal">yes</code> to dump data to an append-only log file. Default value: <code class="docutils literal">'no'</code>.</dd> <dt><code class="docutils literal">redis_lb['bind']</code></dt> <dd>Bind Redis to the specified IP address. Default value: <code class="docutils literal">'127.0.0.1'</code>.</dd> <dt><code class="docutils literal">redis_lb['data_dir']</code></dt> <dd>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code class="docutils literal">'/var/opt/opscode/redis_lb/data'</code>.</dd> <dt><code class="docutils literal">redis_lb['databases']</code></dt> <dd>The number of databases. Default value: <code class="docutils literal">'16'</code>.</dd> <dt><code class="docutils literal">redis_lb['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: <code class="docutils literal">'/var/opt/opscode/redis_lb'</code>.</dd> <dt><code class="docutils literal">redis_lb['enable']</code></dt> <dd>Enable a service. Default value: <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">redis_lb['ha']</code></dt> <dd>Run the Chef server in a high availability topology. When <code class="docutils literal">topology</code> is set to <code class="docutils literal">ha</code>, this setting defaults to <code class="docutils literal">true</code>. Default value: <code class="docutils literal">false</code>.</dd> <dt><code class="docutils literal">redis_lb['keepalive']</code></dt> <dd>The amount of time (in seconds) to wait for requests on a connection. Default value: <code class="docutils literal">'60'</code>.</dd> <dt><code class="docutils literal">redis_lb['log_directory']</code></dt> <dd>The directory in which log data is stored. The default value is the recommended value. Default value: <code class="docutils literal">'/var/log/opscode/redis_lb'</code>.</dd> <dt><code class="docutils literal">redis_lb['log_rotation']</code></dt> <dd>
<p class="first">The log rotation policy for this service. Log files are rotated when they exceed <code class="docutils literal">file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code class="docutils literal">num_to_keep</code>. Default value:</p> <pre class="last highlight-ruby" data-language="ruby">{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</pre> </dd> <dt><code class="docutils literal">redis_lb['loglevel']</code></dt> <dd>The level of logging to be stored in a log file.. Possible values: <code class="docutils literal">debug</code>, <code class="docutils literal">notice</code>, <code class="docutils literal">verbose</code>, and <code class="docutils literal">warning</code>. Default value: <code class="docutils literal">'notice'</code>.</dd> <dt><code class="docutils literal">redis_lb['maxmemory']</code></dt> <dd>The maximum amount of memory (in bytes). Default value: <code class="docutils literal">'8m'</code>.</dd> <dt><code class="docutils literal">redis_lb['maxmemory_policy']</code></dt> <dd>The policy applied when the maximum amount of memory is reached. Possible values: <code class="docutils literal">allkeys-lru</code> (remove keys, starting with those used least frequently), <code class="docutils literal">allkeys-random</code> (remove keys randomly), <code class="docutils literal">noeviction</code> (don’t expire, return an error on write operation), <code class="docutils literal">volatile-lru</code> (remove expired keys, starting with those used least frequently), <code class="docutils literal">volatile-random</code> (remove expired keys randomly), and <code class="docutils literal">volatile-ttl</code> (remove keys, starting with nearest expired time). Default value: <code class="docutils literal">'noeviction'</code>.</dd> <dt><code class="docutils literal">redis_lb['port']</code></dt> <dd>The port on which the service is to listen. Default value: <code class="docutils literal">'16379'</code>.</dd> <dt><code class="docutils literal">redis_lb['save_frequency']</code></dt> <dd>
<p class="first">Set the save frequency. Pattern: <code class="docutils literal">{ "seconds" =&gt; "keys", "seconds" =&gt; "keys", "seconds" =&gt; "keys" }</code>. Default value:</p> <pre class="highlight-ruby" data-language="ruby">{ '900' =&gt; '1', '300' =&gt; '10', '60' =&gt; '1000' }</pre> <p class="last">Which saves the database every 15 minutes if at least one key changes, every 5 minutes if at least 10 keys change, and every 60 seconds if 10000 keys change.</p> </dd> <dt><code class="docutils literal">redis_lb['timeout']</code></dt> <dd>The amount of time (in seconds) a client may be idle before timeout. Default value: <code class="docutils literal">'300'</code>.</dd> <dt><code class="docutils literal">redis_lb['vip']</code></dt> <dd>The virtual IP address. Default value: <code class="docutils literal">'127.0.0.1'</code>.</dd> </dl>   <h3 id="upgrades">upgrades</h3> <p>This configuration file has the following settings for <code class="docutils literal">upgrades</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">upgrades['dir']</code></dt> <dd>The working directory. The default value is the recommended value. Default value: <code class="docutils literal">'/var/opt/opscode/upgrades'</code>.</dd> </dl>   <h3 id="user">user</h3> <p>This configuration file has the following settings for <code class="docutils literal">user</code>:</p> <dl class="docutils"> <dt><code class="docutils literal">user['home']</code></dt> <dd>The home directory for the user under which Chef server services run. Default value: <code class="docutils literal">/opt/opscode/embedded</code>.</dd> <dt><code class="docutils literal">user['shell']</code></dt> <dd>The shell for the user under which Chef server services run. Default value: <code class="docutils literal">/bin/sh</code>.</dd> <dt><code class="docutils literal">user['username']</code></dt> <dd>The user name under which Chef server services run. Default value: <code class="docutils literal">opscode</code>.</dd> </dl>
<div class="_attribution">
  <p class="_attribution-p">
    © Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef™ Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs-archive.chef.io/release/server_12-8/config_rb_server_optional_settings.html" class="_attribution-link">https://docs-archive.chef.io/release/server_12-8/config_rb_server_optional_settings.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
