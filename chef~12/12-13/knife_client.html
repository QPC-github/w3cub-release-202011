
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Knife Client - Chef 12 - W3cubDocs</title>
  
  <meta name="description" content="The knife client subcommand is used to manage an API client list and their associated RSA public key-pairs. This allows authentication requests to &hellip;">
  <meta name="keywords" content="knife, client, chef, chef~12">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/chef~12/12-13/knife_client.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/chef~12.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/chef~12/" class="_nav-link" title="" style="margin-left:0;">Chef 12</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="knife-client">knife client</h1> <p>The <code class="docutils literal">knife client</code> subcommand is used to manage an API client list and their associated RSA public key-pairs. This allows authentication requests to be made to the Chef server by any entity that uses the Chef server API, such as the chef-client and knife.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Review the list of <a class="reference internal" href="knife_common_options">common options</a> available to this (and all) knife subcommands and plugins.</p> </div>  <h2 id="bulk-delete">bulk delete</h2> <p>Use the <code class="docutils literal">bulk delete</code> argument to delete any API client that matches a pattern defined by a regular expression. The regular expression must be within quotes and not be surrounded by forward slashes (<code class="docutils literal">/</code>).</p>  <h3 id="syntax">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client bulk delete REGEX</pre>   <h3 id="options">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-D</code>, <code class="docutils literal">--delete-validators</code>
</dt> <dd>Force the deletion of the client when it is also a chef-validator.</dd> </dl>   <h3 id="examples">Examples</h3> <p>None.</p>    <h2 id="create">create</h2> <p>Use the <code class="docutils literal">create</code> argument to create a new API client. This process will generate an RSA key pair for the named API client. The public key will be stored on the Chef server and the private key will be displayed on <code class="docutils literal">STDOUT</code> or written to a named file.</p> <ul class="simple"> <li>For the chef-client, the private key should be copied to the system as <code class="docutils literal">/etc/chef/client.pem</code>.</li> <li>For knife, the private key is typically copied to <code class="docutils literal">~/.chef/client_name.pem</code> and referenced in the knife.rb configuration file.</li> </ul>  <h3 id="id1">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client create CLIENT_NAME (options)</pre>   <h3 id="id2">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-a</code>, <code class="docutils literal">--admin</code>
</dt> <dd>Create a client as an admin client. This is required for any user to access Open Source Chef as an administrator. This option only works when used with the open source Chef server and will have no effect when used with Enterprise Chef or Chef server 12.x.</dd> <dt>
<code class="docutils literal">-f FILE</code>, <code class="docutils literal">--file FILE</code>
</dt> <dd>Save a private key to the specified file name.</dd> <dt>
<code class="docutils literal">-k</code>, <code class="docutils literal">--prevent-keygen</code>
</dt> <dd>
<p class="first">Create a user without a public key. This key may be managed later by using the <code class="docutils literal">knife user key</code> subcommands.</p> <div class="last admonition note"> <p class="first admonition-title">Note</p> <p class="last">This option is valid only with Chef server API, version 1.0, which was released with Chef server 12.1. If this option or the <code class="docutils literal">--user-key</code> option are not passed in the command, the Chef server will create a user with a public key named <code class="docutils literal">default</code> and will return the private key. For the Chef server versions earlier than 12.1, this option will not work; a public key is always generated unless <code class="docutils literal">--user-key</code> is passed in the command.</p> </div> </dd> <dt>
<code class="docutils literal">-p FILE</code>, <code class="docutils literal">--public-key FILE</code>
</dt> <dd>The path to a file that contains the public key. This option may not be passed in the same command with <code class="docutils literal">--prevent-keygen</code>. When using Open Source Chef a default key is generated if this option is not passed in the command. For Chef server version 12.x, see the <code class="docutils literal">--prevent-keygen</code> option.</dd> <dt><code class="docutils literal">--validator</code></dt> <dd>Create the client as the chef-validator. Default value: <code class="docutils literal">true</code>.</dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">See <a class="reference internal" href="config_rb_knife_optional_settings">knife.rb</a> for more information about how to add certain knife options as settings in the knife.rb file.</p> </div>   <h3 id="id3">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Create an admin client</strong></p> <p>To create a chef-client that can access the Chef server API as an administrator—sometimes referred to as an “API chef-client”—with the name “exampleorg” and save its private key to a file, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife client create exampleorg -a -f "/etc/chef/client.pem"</pre> <p><strong>Create an admin client for Enterprise Chef</strong></p> <p>When running the <code class="docutils literal">create</code> argument, be sure to omit the <code class="docutils literal">-a</code> option:</p> <pre class="highlight-bash" data-language="bash">$ knife client create exampleorg -f "/etc/chef/client.pem"</pre>    <h2 id="delete">delete</h2> <p>Use the <code class="docutils literal">delete</code> argument to delete a registered API client.</p>  <h3 id="id4">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client delete CLIENT_NAME</pre>   <h3 id="id5">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-D</code>, <code class="docutils literal">--delete-validators</code>
</dt> <dd>Force the deletion of the client when it is also a chef-validator.</dd> </dl>   <h3 id="id6">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Delete a client</strong></p> <p>To delete a client with the name “client_foo”, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife client delete client_foo</pre> <p>Type <code class="docutils literal">Y</code> to confirm a deletion.</p>    <h2 id="edit">edit</h2> <p>Use the <code class="docutils literal">edit</code> argument to edit the details of a registered API client. When this argument is run, knife will open $EDITOR to enable editing of the <code class="docutils literal">admin</code> attribute. (None of the other attributes should be changed using this argument.) When finished, knife will update the Chef server with those changes.</p>  <h3 id="id7">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client edit CLIENT_NAME</pre>   <h3 id="id8">Options</h3> <p>This command does not have any specific options.</p>   <h3 id="id9">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Edit a client</strong></p> <p>To edit a client with the name “exampleorg”, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife client edit exampleorg</pre>    <h2 id="key-create">key create</h2> <p>Use the <code class="docutils literal">key create</code> argument to create a public key.</p>  <h3 id="id10">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client key create CLIENT_NAME (options)</pre>   <h3 id="id11">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-e DATE</code>, <code class="docutils literal">--expiration-date DATE</code>
</dt> <dd>The expiration date for the public key, specified as an ISO 8601 formatted string: <code class="docutils literal">YYYY-MM-DDTHH:MM:SSZ</code>. If this option is not specified, the public key will not have an expiration date. For example: <code class="docutils literal">2013-12-24T21:00:00Z</code>.</dd> <dt>
<code class="docutils literal">-f FILE</code>, <code class="docutils literal">--file FILE</code>
</dt> <dd>Save a private key to the specified file name. If the <code class="docutils literal">--public-key</code> option is not specified the Chef server will generate a private key.</dd> <dt>
<code class="docutils literal">-k NAME</code>, <code class="docutils literal">--key-name NAME</code>
</dt> <dd>The name of the public key.</dd> <dt>
<code class="docutils literal">-p FILE_NAME</code>, <code class="docutils literal">--public-key FILE_NAME</code>
</dt> <dd>The path to a file that contains the public key. If this option is not specified, and only if <code class="docutils literal">--key-name</code> is specified, the Chef server will generate a public/private key pair.</dd> </dl>   <h3 id="id12">Examples</h3> <p>None.</p>    <h2 id="key-delete">key delete</h2> <p>Use the <code class="docutils literal">key delete</code> argument to delete a public key.</p>  <h3 id="id13">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client key delete CLIENT_NAME KEY_NAME</pre>   <h3 id="id14">Examples</h3> <p>None.</p>    <h2 id="key-edit">key edit</h2> <p>Use the <code class="docutils literal">key edit</code> argument to modify or rename a public key.</p>  <h3 id="id15">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client key edit CLIENT_NAME KEY_NAME (options)</pre>   <h3 id="id16">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-c</code>, <code class="docutils literal">--create-key</code>
</dt> <dd>Generate a new public/private key pair and replace an existing public key with the newly-generated public key. To replace the public key with an existing public key, use <code class="docutils literal">--public-key</code> instead.</dd> <dt>
<code class="docutils literal">-e DATE</code>, <code class="docutils literal">--expiration-date DATE</code>
</dt> <dd>The expiration date for the public key, specified as an ISO 8601 formatted string: <code class="docutils literal">YYYY-MM-DDTHH:MM:SSZ</code>. If this option is not specified, the public key will not have an expiration date. For example: <code class="docutils literal">2013-12-24T21:00:00Z</code>.</dd> <dt>
<code class="docutils literal">-f FILE</code>, <code class="docutils literal">--file FILE</code>
</dt> <dd>Save a private key to the specified file name. If the <code class="docutils literal">--public-key</code> option is not specified the Chef server will generate a private key.</dd> <dt>
<code class="docutils literal">-k NAME</code>, <code class="docutils literal">--key-name NAME</code>
</dt> <dd>The name of the public key.</dd> <dt>
<code class="docutils literal">-p FILE_NAME</code>, <code class="docutils literal">--public-key FILE_NAME</code>
</dt> <dd>The path to a file that contains the public key. If this option is not specified, and only if <code class="docutils literal">--key-name</code> is specified, the Chef server will generate a public/private key pair.</dd> </dl>   <h3 id="id17">Examples</h3> <p>None.</p>    <h2 id="key-list">key list</h2> <p>Use the <code class="docutils literal">key list</code> argument to view a list of public keys for the named client.</p>  <h3 id="id18">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client key list CLIENT_NAME (options)</pre>   <h3 id="id19">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-e</code>, <code class="docutils literal">--only-expired</code>
</dt> <dd>Show a list of public keys that have expired.</dd> <dt>
<code class="docutils literal">-n</code>, <code class="docutils literal">--only-non-expired</code>
</dt> <dd>Show a list of public keys that have not expired.</dd> <dt>
<code class="docutils literal">-w</code>, <code class="docutils literal">--with-details</code>
</dt> <dd>Show a list of public keys, including URIs and expiration status.</dd> </dl>   <h3 id="id20">Examples</h3> <p>None.</p>    <h2 id="key-show">key show</h2> <p>Use the <code class="docutils literal">key show</code> argument to view details for a specific public key.</p>  <h3 id="id21">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client key show CLIENT_NAME KEY_NAME</pre>   <h3 id="id22">Examples</h3> <p>None.</p>    <h2 id="list">list</h2> <p>Use the <code class="docutils literal">list</code> argument to view a list of registered API client.</p>  <h3 id="id23">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client list (options)</pre>   <h3 id="id24">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-w</code>, <code class="docutils literal">--with-uri</code>
</dt> <dd>Show the corresponding URIs.</dd> </dl>   <h3 id="id25">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>View a list of clients</strong></p> <p>To verify the API client list for the Chef server, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife client list</pre> <p>to return something similar to:</p> <pre class="highlight-none" data-language="none">exampleorg
i-12345678
rs-123456</pre> <p>To verify that an API client can authenticate to the Chef server correctly, try getting a list of clients using <code class="docutils literal">-u</code> and <code class="docutils literal">-k</code> options to specify its name and private key:</p> <pre class="highlight-bash" data-language="bash">$ knife client list -u ORGNAME -k .chef/ORGNAME.pem</pre>    <h2 id="reregister">reregister</h2> <p>Use the <code class="docutils literal">reregister</code> argument to regenerate an RSA key pair for an API client. The public key will be stored on the Chef server and the private key will be displayed on <code class="docutils literal">STDOUT</code> or written to a named file.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Running this argument will invalidate the previous RSA key pair, making it unusable during authentication to the Chef server.</p> </div>  <h3 id="id26">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client reregister CLIENT_NAME (options)</pre>   <h3 id="id27">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-f FILE_NAME</code>, <code class="docutils literal">--file FILE_NAME</code>
</dt> <dd>Save a private key to the specified file name.</dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">See <a class="reference internal" href="config_rb_knife_optional_settings">knife.rb</a> for more information about how to add certain knife options as settings in the knife.rb file.</p> </div>   <h3 id="id28">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Re-register a client</strong></p> <p>To re-register the RSA key pair for a client named “testclient” and save it to a file named “rsa_key”, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife client reregister testclient -f rsa_key</pre>    <h2 id="show">show</h2> <p>Use the <code class="docutils literal">show</code> argument to show the details of an API client.</p>  <h3 id="id29">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife client show CLIENT_NAME (options)</pre>   <h3 id="id30">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-a ATTR</code>, <code class="docutils literal">--attribute ATTR</code>
</dt> <dd>The attribute (or attributes) to show.</dd> </dl>   <h3 id="id31">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Show clients</strong></p> <p>To view a client named “testclient”, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife client show testclient</pre> <p>to return something like:</p> <pre class="highlight-none" data-language="none">admin:       false
chef_type:   client
json_class:  Chef::ApiClient
name:        testclient
public_key:</pre> <p>To view information in JSON format, use the <code class="docutils literal">-F</code> common option as part of the command like this:</p> <pre class="highlight-bash" data-language="bash">$ knife client show devops -F json</pre> <p>Other formats available include <code class="docutils literal">text</code>, <code class="docutils literal">yaml</code>, and <code class="docutils literal">pp</code>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef™ Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs-archive.chef.io/release/12-13/knife_client.html" class="_attribution-link">https://docs-archive.chef.io/release/12-13/knife_client.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
