
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Deploy - Chef 12 - W3cubDocs</title>
  
  <meta name="description" content="Use the deploy resource to manage and control deployments. This is a popular resource, but is also complex, having the most properties, multiple &hellip;">
  <meta name="keywords" content="deploy, chef, chef~12">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/chef~12/12-13/resource_deploy.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/chef~12.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/chef~12/" class="_nav-link" title="" style="margin-left:0;">Chef 12</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="deploy">deploy</h1> <p>Use the <strong>deploy</strong> resource to manage and control deployments. This is a popular resource, but is also complex, having the most properties, multiple providers, the added complexity of callbacks, plus four attributes that support layout modifications from within a recipe.</p> <p>The <strong>deploy</strong> resource is modeled after Capistrano, a utility and framework for executing commands in parallel on multiple remote machines via SSH. The <strong>deploy</strong> resource is designed to behave in a way that is similar to the <code class="docutils literal">deploy</code> and <code class="docutils literal">deploy:migration</code> tasks in Capistrano.</p>  <h2 id="syntax">Syntax</h2> <p>A <strong>deploy</strong> resource block manages and controls deployments:</p> <pre class="highlight-ruby" data-language="ruby">deploy 'private_repo' do
  repo 'git@github.com:acctname/private-repo.git'
  user 'ubuntu'
  deploy_to '/tmp/private_code'
  ssh_wrapper '/tmp/private_code/wrap-ssh4git.sh'
  action :deploy
end</pre> <p>For example, an application that is deployed to a folder named <code class="docutils literal">"/path/to/application"</code>:</p> <pre class="highlight-ruby" data-language="ruby">deploy_revision '/path/to/application' do
  repo 'ssh://name-of-git-repo/repos/repo.git'
  migrate false
  purge_before_symlink %w{one two folder/three}
  create_dirs_before_symlink []
  symlinks{
    "one"   =&gt; "one",
    "two"   =&gt; "two",
    "three" =&gt; "folder/three"
  }
  before_restart do
    # some Ruby code
  end
  notifies :restart, 'service[foo]'
  notifies :restart, 'service[bar]'
end</pre> <p>For the example shown above:</p> <ul class="simple"> <li>Because an action is not explicitly specified, the chef-client will use the default action: <code class="docutils literal">:deploy</code>
</li> <li>The <code class="docutils literal">purge_before_symlink</code> application layout is an array of paths that will be cleared before the <code class="docutils literal">symlinks</code> property is run</li> <li>The <code class="docutils literal">create_dirs_before_symlink</code> property is empty, which is different from the default</li> <li>The <code class="docutils literal">symlinks</code> property is creating three symbolic links</li> <li>The <code class="docutils literal">before_restart</code> callback is being used to add custom actions that will occur at the end of the deployment process, but before any services have been notified</li> <li>At the end, the recipe is using the <code class="docutils literal">notifies</code> property—a common attribute available to all resources—to alert two services (named “foo” and “bar”) that they should restart.</li> </ul> <p>The full syntax for all of the properties that are available to the <strong>deploy</strong> when used with git is:</p> <pre class="highlight-ruby" data-language="ruby">deploy 'name' do
  after_restart              Proc, String
  before_migrate             Proc, String
  before_restart             Proc, String
  before_symlink             Proc, String
  branch                     String
  create_dirs_before_symlink Array
  deploy_to                  String # defaults to 'name' if not specified
  depth                      Integer
  enable_submodules          TrueClass, FalseClass
  environment                Hash
  git_ssh_wrapper            String
  group                      String
  keep_releases              Integer
  migrate                    TrueClass, FalseClass
  migration_command          String
  notifies                   # see description
  provider                   Chef::Provider::Deploy
  purge_before_symlink       Array
  remote                     String
  repo                       String
  repository                 String
  repository_cache           String
  restart_command            Proc, String
  revision                   String
  rollback_on_error          TrueClass, FalseClass
  scm_provider               Chef::Provider::Git
  shallow_clone              TrueClass, FalseClass
  ssh_wrapper                String
  symlinks                   Hash
  symlink_before_migrate     Hash
  timeout                    Integer
  user                       String
  action                     Symbol # defaults to :create if not specified
end</pre> <p>and the full syntax for all of the properties that are available to the <strong>deploy</strong> when used with Subversion is:</p> <pre class="highlight-ruby" data-language="ruby">deploy 'name' do
  after_restart              Proc, String
  before_migrate             Proc, String
  before_restart             Proc, String
  before_symlink             Proc, String
  branch                     String
  create_dirs_before_symlink Array
  deploy_to                  String # defaults to 'name' if not specified
  environment                Hash
  group                      String
  keep_releases              Integer
  migrate                    TrueClass, FalseClass
  migration_command          String
  notifies                   # see description
  provider                   Chef::Provider::Deploy
  purge_before_symlink       Array
  repo                       String
  repository                 String
  repository_cache           String
  restart_command            Proc, String
  revision                   String
  rollback_on_error          TrueClass, FalseClass
  scm_provider               Chef::Provider::Subversion
  subscribes                 # see description
  svn_arguments              String
  svn_password               String
  svn_username               String
  symlinks                   Hash
  symlink_before_migrate     Hash
  timeout                    Integer
  user                       String
  action                     Symbol # defaults to :create if not specified
end</pre> <p>where</p> <ul class="simple"> <li>
<code class="docutils literal">deploy</code> is the resource</li> <li>
<code class="docutils literal">name</code> is the name of the resource block</li> <li>
<code class="docutils literal">:action</code> identifies the steps the chef-client will take to bring the node into the desired state</li> <li>
<code class="docutils literal">after_restart</code>, <code class="docutils literal">before_migrate</code>, <code class="docutils literal">before_restart</code>, <code class="docutils literal">before_symlink</code>, <code class="docutils literal">branch</code>, <code class="docutils literal">create_dirs_before_symlink</code>, <code class="docutils literal">deploy_to</code>, <code class="docutils literal">depth</code>, <code class="docutils literal">enable_submodules</code>, <code class="docutils literal">environment</code>, <code class="docutils literal">git_ssh_wrapper</code>, <code class="docutils literal">group</code>, <code class="docutils literal">keep_releases</code>, <code class="docutils literal">migrate</code>, <code class="docutils literal">migration_command</code>, <code class="docutils literal">provider</code>, <code class="docutils literal">purge_before_symlink</code>, <code class="docutils literal">remote</code>, <code class="docutils literal">repo</code>, <code class="docutils literal">repository</code>, <code class="docutils literal">repository_cache</code>, <code class="docutils literal">restart_command</code>, <code class="docutils literal">revision</code>, <code class="docutils literal">rollback_on_error</code>, <code class="docutils literal">scm_provider</code>, <code class="docutils literal">shallow_clone</code>, <code class="docutils literal">ssh_wrapper</code>, <code class="docutils literal">svn_arguments</code>, <code class="docutils literal">svn_password</code>, <code class="docutils literal">svn_username</code>, <code class="docutils literal">symlinks</code>, <code class="docutils literal">symlink_before_migrate</code>, <code class="docutils literal">timeout</code>, and <code class="docutils literal">user</code> are properties of this resource, with the Ruby type shown. See “Properties” section below for more information about all of the properties that may be used with this resource.</li> </ul>   <h2 id="deploy-strategies">Deploy Strategies</h2> <p>In the <code class="docutils literal">deploy</code> directory, a sub-directory named <code class="docutils literal">shared</code> must be created. This sub-directory is where configuration and temporary files will be kept. A typical Ruby on Rails application will have <code class="docutils literal">config</code>, <code class="docutils literal">log</code>, <code class="docutils literal">pids</code>, and <code class="docutils literal">system</code> directories within the <code class="docutils literal">shared</code> directory to keep the files stored there independent of the code in the source repository.</p> <p>In addition to the <code class="docutils literal">shared</code> sub-directory, the deploy process will create sub-directories named <code class="docutils literal">releases</code> and <code class="docutils literal">current</code> (also in the <code class="docutils literal">deploy</code> directory). The <code class="docutils literal">release</code> directory holds (up to) five most recently deployed versions of an application. The <code class="docutils literal">current</code> directory holds the currently-released version.</p> <p>For example:</p> <pre class="highlight-python" data-language="python">deploy_directory/
  current/
  releases/
  shared/
    config/
    log/
    pids/
    system/</pre>  <h3 id="deploy-phases">Deploy Phases</h3> <p>A deployment happens in four phases:</p> <ol class="arabic simple"> <li>
<strong>Checkout</strong>—the chef-client uses the <strong>scm</strong> resource to get the specified application revision, placing a clone or checkout in the sub-directory of the <code class="docutils literal">deploy</code> directory named <code class="docutils literal">cached-copy</code>. A copy of the application is then placed in a sub-directory under <code class="docutils literal">releases</code>.</li> <li>
<strong>Migrate</strong>—If a migration is to be run, the chef-client symlinks the database configuration file into the checkout (<code class="docutils literal">config/database.yml</code> by default) and runs the migration command. For a Ruby on Rails application, the <code class="docutils literal">migration_command</code> is usually set to <code class="docutils literal">rake db:migrate</code>.</li> <li>
<strong>Symlink</strong>—Directories for shared and temporary files are removed from the checkout (<code class="docutils literal">log</code>, <code class="docutils literal">tmp/pids</code>, and <code class="docutils literal">public/system</code> by default). After this step, any needed directories (<code class="docutils literal">tmp</code>, <code class="docutils literal">public</code>, and <code class="docutils literal">config</code> by default) are created if they don’t already exist. This step is completed by symlinking shared directories into the current <code class="docutils literal">release</code>, <code class="docutils literal">public/system</code>, <code class="docutils literal">tmp/pids</code>, and <code class="docutils literal">log</code> directories, and then symlinking the <code class="docutils literal">release</code> directory to <code class="docutils literal">current</code>.</li> <li>
<strong>Restart</strong>—The application is restarted according to the restart command set in the recipe.</li> </ol>  <h4 id="deploy-cache-file">Deploy Cache File</h4> <p>The chef-client uses a cache file to keep track of the order in which each revision of an application is deployed. By default, the cache file is located at <code class="docutils literal">/var/chef/cache/revision-deploys/APPNAME/</code>. To force a re-deploy, delete the deployment directory or delete the cache file.</p>    <h3 id="callbacks">Callbacks</h3> <p>In-between each step in a deployment process, callbacks can be run using arbitrary Ruby code, including recipes. All callbacks support embedded recipes given in a block, but each callback assumes a shell command (instead of a deploy hook filename) when given a string.</p> <p>The following callback types are available:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Callback</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">after_restart</code></td> <td>A block of code, or a path to a file that contains code, that is run after restarting. Default value: <code class="docutils literal">deploy/after_restart.rb</code>.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">before_migrate</code></td> <td>A block of code, or a path to a file that contains code, that is run before a migration. Default value: <code class="docutils literal">deploy/before_migrate.rb</code>.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">before_restart</code></td> <td>A block of code, or a path to a file that contains code, that is run before restarting. Default value: <code class="docutils literal">deploy/before_restart.rb</code>.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">before_symlink</code></td> <td>A block of code, or a path to a file that contains code, that is run before symbolic linking. Default value: <code class="docutils literal">deploy/before_symlink.rb</code>.</td> </tr> </tbody> </table> <p>Each of these callback types can be used in one of three ways:</p> <ul class="simple"> <li>To pass a block of code, such as Ruby or Python</li> <li>To specify a file</li> <li>To do neither; the chef-client will look for a callback file named after one of the callback types (<code class="docutils literal">before_migrate.rb</code>, for example) and if the file exists, to evaluate it as if it were a specified file</li> </ul> <p>Within a callback, there are two ways to get access to information about the deployment:</p> <ul class="simple"> <li>
<code class="docutils literal">release_path</code> can be used to get the path to the current release</li> <li>
<code class="docutils literal">new_resource</code> can be used to access the deploy resource, including environment variables that have been set there (using <code class="docutils literal">new_resource</code> is a preferred approach over using the <code class="docutils literal">@configuration</code> variable)</li> </ul> <p>Both of these options must be available at the top-level within the callback, along with any assigned values that will be used later in the callback.</p> <p><strong>Callbacks and Capistrano</strong></p> <p>If you are familiar with Capistrano, the following examples should help you know when to use the various callbacks that are available. If you are not familiar with Capistrano, then follow the semantic names of these callbacks to help you determine when to use each of the callbacks within a recipe that is built with the <strong>deploy</strong> resource.</p> <p>The following example shows where callbacks fit in relation to the steps taken by the <code class="docutils literal">deploy</code> process in Capistrano:</p> <img alt="_images/includes_resource_deploy_strategy_callbacks_example1.png" src="https://docs-archive.chef.io/release/12-13/_images/includes_resource_deploy_strategy_callbacks_example1.png"> <p>and the following example shows the same comparison, but with the <code class="docutils literal">deploy:migrations</code> process:</p> <img alt="_images/includes_resource_deploy_strategy_callbacks_example2.png" src="https://docs-archive.chef.io/release/12-13/_images/includes_resource_deploy_strategy_callbacks_example2.png">   <h3 id="layout-modifiers">Layout Modifiers</h3> <p>The <strong>deploy</strong> resource expects an application to be structured like a Ruby on Rails application, but the layout can be modified to meet custom requirements as needed. Use the following attributes within a recipe to modify the layout of a recipe that is using the <strong>deploy</strong> resource:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Layout Modifiers</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">create_dirs_before_symlink</code></td> <td>Create directories in the release directory before symbolic links are created. This property runs after <code class="docutils literal">purge_before_symlink</code> and before <code class="docutils literal">symlink</code>.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">purge_before_symlink</code></td> <td>An array of directories (relative to the application root) to be removed from a checkout before symbolic links are created. This attribute runs before <code class="docutils literal">create_dirs_before_symlink</code> and before <code class="docutils literal">symlink</code>.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">symlink_before_migrate</code></td> <td>Map files in a shared directory to the current release directory. The symbolic links for these files are created before any migration is run. Use parentheses <code class="docutils literal">( )</code> around curly braces <code class="docutils literal">{ }</code> to ensure the contents within the curly braces are interpreted as a block and not as an empty Hash. Set to <code class="docutils literal">symlink_before_migrate({})</code> to prevent the creation of symbolic links.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">symlinks</code></td> <td>Map files in a shared directory to their paths in the current release directory. This property runs after <code class="docutils literal">create_dirs_before_symlink</code> and <code class="docutils literal">purge_before_symlink</code>.</td> </tr> </tbody> </table>    <h2 id="actions">Actions</h2> <p>This resource has the following actions:</p> <dl class="docutils"> <dt><code class="docutils literal">:deploy</code></dt> <dd>Default. Deploy an application.</dd> <dt><code class="docutils literal">:force_deploy</code></dt> <dd>Remove any existing release of the same code version and re-deploy a new one in its place.</dd> <dt><code class="docutils literal">:nothing</code></dt> <dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd> <dt><code class="docutils literal">:rollback</code></dt> <dd>Roll an application back to the previous release.</dd> </dl>  <h3 id="naming-resources">Naming Resources</h3> <p>The chef-client caches deployment actions as they are taken. In order for the chef-client to be able to apply a subsequent deployment action—rolling back a release using the <code class="docutils literal">:rollback</code> action, for example—all related deployment actions must be contained within resource blocks that have the same name. This ensures that the chef-client will be able to find the correct deployment from within the cached deployment actions.</p> <p>For example, a simple deployment:</p> <pre class="highlight-ruby" data-language="ruby">deploy_revision 'name' do
  ...
  action :deploy
end</pre> <p>In order to use the <code class="docutils literal">:rollback</code> action with this deployment, the <code class="docutils literal">:rollback</code> action must be in a resource block that has the same resource name as the initial deploy action. For example:</p> <pre class="highlight-ruby" data-language="ruby">deploy_revision 'name' do
  ...
  action :rollback
end</pre>    <h2 id="properties">Properties</h2> <p>This resource has the following properties:</p> <dl class="docutils"> <dt><code class="docutils literal">after_restart</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> Proc, String</p> <p class="last">A block of code, or a path to a file that contains code, that is run after restarting. Default value: <code class="docutils literal">deploy/after_restart.rb</code>.</p> </dd> <dt><code class="docutils literal">before_migrate</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> Proc, String</p> <p class="last">A block of code, or a path to a file that contains code, that is run before a migration. Default value: <code class="docutils literal">deploy/before_migrate.rb</code>.</p> </dd> <dt><code class="docutils literal">before_restart</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> Proc, String</p> <p class="last">A block of code, or a path to a file that contains code, that is run before restarting. Default value: <code class="docutils literal">deploy/before_restart.rb</code>.</p> </dd> <dt><code class="docutils literal">before_symlink</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> Proc, String</p> <p class="last">A block of code, or a path to a file that contains code, that is run before symbolic linking. Default value: <code class="docutils literal">deploy/before_symlink.rb</code>.</p> </dd> <dt><code class="docutils literal">branch</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The alias for the revision.</p> </dd> <dt><code class="docutils literal">create_dirs_before_symlink</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Array</p> <p class="last">Create directories in the release directory before symbolic links are created. This property runs after <code class="docutils literal">purge_before_symlink</code> and before <code class="docutils literal">symlink</code>. Default value: <code class="docutils literal">%w{tmp public config}</code> (or the same as <code class="docutils literal">["tmp", "public", "config"]</code>).</p> </dd> <dt><code class="docutils literal">deploy_to</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The “meta root” for the application, if different from the path that is used to specify the name of a resource. Default value: the <code class="docutils literal">name</code> of the resource block See “Syntax” section above for more information.</p> </dd> <dt><code class="docutils literal">environment</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Hash</p> <p class="last">A Hash of environment variables in the form of <code class="docutils literal">({"ENV_VARIABLE" =&gt; "VALUE"})</code>. (These variables must exist for a command to be run successfully.)</p> </dd> <dt><code class="docutils literal">group</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The system group that is responsible for the checked-out code.</p> </dd> <dt><code class="docutils literal">ignore_failure</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p> <p class="last">Continue running a recipe if a resource fails for any reason. Default value: <code class="docutils literal">false</code>.</p> </dd> <dt><code class="docutils literal">keep_releases</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Integer</p> <p class="last">The number of releases for which a backup is kept. Default value: <code class="docutils literal">5</code>.</p> </dd> <dt><code class="docutils literal">migrate</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p> <p class="last">Run a migration command. Default value: <code class="docutils literal">false</code>.</p> </dd> <dt><code class="docutils literal">migration_command</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">A string that contains a shell command that can be executed to run a migration operation.</p> </dd> <dt><code class="docutils literal">notifies</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Symbol, ‘Chef::Resource[String]’</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code class="docutils literal">'resource[name]'</code>, the <code class="docutils literal">:action</code> that resource should take, and then the <code class="docutils literal">:timer</code> for that action. A resource may notifiy more than one resource; use a <code class="docutils literal">notifies</code> statement for each resource to be notified.</p> <p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p> <dl class="docutils"> <dt><code class="docutils literal">:before</code></dt> <dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd> <dt><code class="docutils literal">:delayed</code></dt> <dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd> <dt>
<code class="docutils literal">:immediate</code>, <code class="docutils literal">:immediately</code>
</dt> <dd>Specifies that a notification should be run immediately, per resource notified.</dd> </dl> <p>The syntax for <code class="docutils literal">notifies</code> is:</p> <pre class="last highlight-ruby" data-language="ruby">notifies :action, 'resource[name]', :timer</pre> </dd> <dt><code class="docutils literal">provider</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Chef Class</p> <p class="last">Optional. Explicitly specifies a provider. See “Providers” section below for more information.</p> </dd> <dt><code class="docutils literal">purge_before_symlink</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Array</p> <p class="last">An array of directories (relative to the application root) to be removed from a checkout before symbolic links are created. This attribute runs before <code class="docutils literal">create_dirs_before_symlink</code> and before <code class="docutils literal">symlink</code>. Default value: <code class="docutils literal">%w{log tmp/pids public/system}</code> (or the same as <code class="docutils literal">["log", "tmp/pids", "public/system"]</code>.</p> </dd> <dt><code class="docutils literal">repo</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The alias for the repository.</p> </dd> <dt><code class="docutils literal">repository</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The URI for the repository.</p> </dd> <dt><code class="docutils literal">repository_cache</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The name of the sub-directory in which the pristine copy of an application’s source is kept. Default value: <code class="docutils literal">cached-copy</code>.</p> </dd> <dt><code class="docutils literal">restart_command</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> String, Proc</p> <p class="last">A string that contains a shell command that can be executed to run a restart operation.</p> </dd> <dt><code class="docutils literal">retries</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Integer</p> <p class="last">The number of times to catch exceptions and retry the resource. Default value: <code class="docutils literal">0</code>.</p> </dd> <dt><code class="docutils literal">retry_delay</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Integer</p> <p class="last">The retry delay (in seconds). Default value: <code class="docutils literal">2</code>.</p> </dd> <dt><code class="docutils literal">revision</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">A branch, tag, or commit to be synchronized with git. This can be symbolic, like <code class="docutils literal">HEAD</code> or it can be a source control management-specific revision identifier. Default value: <code class="docutils literal">HEAD</code>.</p> </dd> <dt><code class="docutils literal">rollback_on_error</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p> <p class="last">Roll a resource back to a previously-deployed release if an error occurs when deploying a new release. Default value: <code class="docutils literal">false</code>.</p> </dd> <dt><code class="docutils literal">scm_provider</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Chef Class</p> <p class="last">The name of the source control management provider. Default value: <code class="docutils literal">Chef::Provider::Git</code>. Optional values: <code class="docutils literal">Chef::Provider::Subversion</code>.</p> </dd> <dt><code class="docutils literal">subscribes</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Symbol, ‘Chef::Resource[String]’</p> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code class="docutils literal">'resource[name]'</code>, the <code class="docutils literal">:action</code> to be taken, and then the <code class="docutils literal">:timer</code> for that action.</p> <p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p> <dl class="docutils"> <dt><code class="docutils literal">:before</code></dt> <dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd> <dt><code class="docutils literal">:delayed</code></dt> <dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd> <dt>
<code class="docutils literal">:immediate</code>, <code class="docutils literal">:immediately</code>
</dt> <dd>Specifies that a notification should be run immediately, per resource notified.</dd> </dl> <p>The syntax for <code class="docutils literal">subscribes</code> is:</p> <pre class="last highlight-ruby" data-language="ruby">subscribes :action, 'resource[name]', :timer</pre> </dd> <dt><code class="docutils literal">symlinks</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Hash</p> <p class="last">Map files in a shared directory to their paths in the current release directory. This property runs after <code class="docutils literal">create_dirs_before_symlink</code> and <code class="docutils literal">purge_before_symlink</code>. Default value: <code class="docutils literal">{"system" =&gt; "public/system", "pids" =&gt; "tmp/pids", "log" =&gt; "log"}</code>.</p> </dd> <dt><code class="docutils literal">symlink_before_migrate</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Hash</p> <p class="last">Map files in a shared directory to the current release directory. The symbolic links for these files are created before any migration is run. Use parentheses <code class="docutils literal">( )</code> around curly braces <code class="docutils literal">{ }</code> to ensure the contents within the curly braces are interpreted as a block and not as an empty Hash. Set to <code class="docutils literal">symlink_before_migrate({})</code> to prevent the creation of symbolic links. Default value: <code class="docutils literal">{"config/database.yml" =&gt; "config/database.yml"}</code>.</p> </dd> <dt><code class="docutils literal">timeout</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Integer</p> <p class="last">The amount of time (in seconds) to wait for a command to execute before timing out. When specified, this value is passed from the <strong>deploy</strong> resource to the <strong>git</strong> or <strong>subversion</strong> resources.</p> </dd> <dt><code class="docutils literal">user</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The system user that is responsible for the checked-out code.</p> </dd> </dl> <p>The following properties are for use with git only:</p> <dl class="docutils"> <dt><code class="docutils literal">depth</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Integer</p> <p class="last">The depth of a git repository, truncated to the specified number of revisions. See <code class="docutils literal">shallow_clone</code>.</p> </dd> <dt><code class="docutils literal">enable_submodules</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p> <p class="last">Perform a sub-module initialization and update. Default value: <code class="docutils literal">false</code>.</p> </dd> <dt><code class="docutils literal">git_ssh_wrapper</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The alias for the <code class="docutils literal">ssh_wrapper</code>.</p> </dd> <dt><code class="docutils literal">remote</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The remote repository to use when synchronizing an existing clone. Default value: <code class="docutils literal">origin</code>.</p> </dd> <dt><code class="docutils literal">shallow_clone</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p> <p class="last">Set the clone depth to <code class="docutils literal">5</code>. If a depth other than <code class="docutils literal">5</code> is required, use the <code class="docutils literal">depth</code> property instead of <code class="docutils literal">shallow_clone</code>. Default value: <code class="docutils literal">false</code>.</p> </dd> <dt><code class="docutils literal">ssh_wrapper</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The path to the wrapper script used when running SSH with git. The <code class="docutils literal">GIT_SSH</code> environment variable is set to this.</p> </dd> </dl> <p>The following properties are for use with Subversion only:</p> <dl class="docutils"> <dt><code class="docutils literal">svn_arguments</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The extra arguments that are passed to the Subversion command.</p> </dd> <dt><code class="docutils literal">svn_password</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The password for a user that has access to the Subversion repository.</p> </dd> <dt><code class="docutils literal">svn_username</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The user name for a user that has access to the Subversion repository.</p> </dd> </dl>   <h2 id="providers">Providers</h2> <p>Where a resource represents a piece of the system (and its desired state), a provider defines the steps that are needed to bring that piece of the system from its current state into the desired state.</p> <p>The chef-client will determine the correct provider based on configuration data collected by Ohai at the start of the chef-client run. This configuration data is then mapped to a platform and an associated list of providers.</p> <p>Generally, it’s best to let the chef-client choose the provider, and this is (by far) the most common approach. However, in some cases, specifying a provider may be desirable. There are two approaches:</p> <ul class="simple"> <li>Use a more specific short name—<code class="docutils literal">yum_package "foo" do</code> instead of <code class="docutils literal">package "foo" do</code>, <code class="docutils literal">script "foo" do</code> instead of <code class="docutils literal">bash "foo" do</code>, and so on—when available</li> <li>Use the <code class="docutils literal">provider</code> property within the resource block to specify the long name of the provider as a property of a resource. For example: <code class="docutils literal">provider Chef::Provider::Long::Name</code>
</li> </ul> <p>This resource has the following providers:</p> <dl class="docutils"> <dt>
<code class="docutils literal">Chef::Provider::Deploy</code>, <code class="docutils literal">deploy</code>
</dt> <dd>When this short name is used, the chef-client will determine the correct provider during the chef-client run.</dd> <dt>
<code class="docutils literal">Chef::Provider::Deploy::Branch</code>, <code class="docutils literal">deploy_branch</code>
</dt> <dd>See below for more information.</dd> <dt>
<code class="docutils literal">Chef::Provider::Deploy::Revision</code>, <code class="docutils literal">deploy_revision</code>
</dt> <dd>See below for more information.</dd> <dt>
<code class="docutils literal">Chef::Provider::Deploy::TimestampedDeploy</code>, <code class="docutils literal">timestamped_deploy</code>
</dt> <dd>The default provider for all platforms. See below for more information.</dd> </dl>  <h3 id="deploy-branch">deploy_branch</h3> <p>The <strong>deploy_branch</strong> resource functions identically to the <strong>deploy_revision</strong> resource, in terms of how the chef-client processes the resource during the chef-client run. It uses the same <code class="docutils literal">Deploy::Revision</code> provider, the same set of actions and attributes, and is (outside of the name itself) identical to the <strong>deploy_revision</strong> resource. Using the <strong>deploy_revision</strong> resource is preferred; however, the <strong>deploy_branch</strong> resource exists for those situations where, semantically, it is preferable to refer to a resource as a “branch” instead of a “revision”.</p>   <h3 id="deploy-revision">deploy_revision</h3> <p>The <code class="docutils literal">deploy_revision</code> provider is the recommended provider, even if it is not listed as the default. The <code class="docutils literal">deploy_revision</code> provider is used to ensure that the name of a release sub-directory is based on a revision identifier. For users of git, this will be the familiar SHA checksum. For users of Subversion, it will be the integer revision number. If a name other than a revision identifier is provided—branch names, tags, and so on—the chef-client will ignore the alternate names and will look up the revision identifier and use it to name the release sub-directory. When the <code class="docutils literal">deploy_revision</code> provider is given an exact revision to deploy, it will behave in an idempotent manner.</p> <p>The <code class="docutils literal">deploy_revision</code> provider results in deployed components under the destination location that is owned by the user who runs the application. This is sometimes an issue for certain workflows. If issues arise, consider the following:</p> <ul class="simple"> <li>Incorporate changing permissions to the desired end state from within a recipe</li> <li>Add a <code class="docutils literal">before_restart</code> block to fix up the permissions</li> <li>Have an unprivileged user (for example: <code class="docutils literal">opscode</code>) be the owner of the <code class="docutils literal">deploy</code> directory and another unprivileged user (for example: <code class="docutils literal">opscodeapp</code>) run the application. Most often, this is the solution that works best</li> </ul> <p>When using the <code class="docutils literal">deploy_revision</code> provider, and when the deploy fails for any reason, and when the same code is used to re-deploy, the action should be set manually to <code class="docutils literal">:force_deploy</code>. Forcing the re-deploy will remove the old release directory, after which the deploy can proceed as usual. (Forcing a re-deploy over the current release can cause some downtime.) Deployed revisions are stored in <code class="docutils literal">(file_cache_path)/revision-deploys/(deploy_path)</code>.</p>   <h3 id="timestamped-deploy">timestamped_deploy</h3> <p>The <code class="docutils literal">timestamped_deploy</code> provider is the default <strong>deploy</strong> provider. It is used to name release directories with a timestamp in the form of <code class="docutils literal">YYYYMMDDHHMMSS</code>. For example: <code class="docutils literal">/my/deploy/dir/releases/20121120162342</code>. The <strong>deploy</strong> resource will determine whether or not to deploy code based on the existence of the release directory in which it is attempting to deploy. Because the timestamp is different for every chef-client run, the <code class="docutils literal">timestamped_deploy</code> provider is not idempotent. When the <code class="docutils literal">timestamped_deploy</code> provider is used, it requires that the action setting on a resource be managed manually in order to prevent unintended continuous deployment.</p>    <h2 id="examples">Examples</h2> <p>The following examples demonstrate various approaches for using resources in recipes. If you want to see examples of how Chef uses resources in recipes, take a closer look at the cookbooks that Chef authors and maintains: <a class="reference external" href="https://github.com/chef-cookbooks">https://github.com/chef-cookbooks</a>.</p> <p><strong>Modify the layout of a Ruby on Rails application</strong></p> <p>The layout of the <strong>deploy</strong> resource matches a Ruby on Rails app by default, but this can be customized. To customize the layout, do something like the following:</p> <pre class="highlight-ruby" data-language="ruby">deploy '/my/apps/dir/deploy' do
  # Use a local repo if you prefer
  repo '/path/to/gitrepo/typo/'
  environment 'RAILS_ENV' =&gt; 'production'
  revision 'HEAD'
  action :deploy
  migration_command 'rake db:migrate --trace'
  migrate true
  restart_command 'touch tmp/restart.txt'
  create_dirs_before_symlink  %w{tmp public config deploy}

  # You can use this to customize if your app has extra configuration files
  # such as amqp.yml or app_config.yml
  symlink_before_migrate  'config/database.yml' =&gt; 'config/database.yml'

  # If your app has extra files in the shared folder, specify them here
  symlinks  'system' =&gt; 'public/system',
            'pids' =&gt; 'tmp/pids',
            'log' =&gt; 'log',
            'deploy/before_migrate.rb' =&gt; 'deploy/before_migrate.rb',
            'deploy/before_symlink.rb' =&gt; 'deploy/before_symlink.rb',
            'deploy/before_restart.rb' =&gt; 'deploy/before_restart.rb',
            'deploy/after_restart.rb' =&gt; 'deploy/after_restart.rb'
end</pre> <p><strong>Use resources within callbacks</strong></p> <p>Using resources from within your callbacks as blocks or within callback files distributed with your application’s source code. To use embedded recipes for callbacks:</p> <pre class="highlight-ruby" data-language="ruby">deploy "#{node['tmpdir']}/deploy" do
  repo "#{node['tmpdir']}/gitrepo/typo/"
  environment 'RAILS_ENV' =&gt; 'production'
  revision 'HEAD'
  action :deploy
  migration_command 'rake db:migrate --trace'
  migrate true

  # Callback awesomeness:
  before_migrate do
    current_release = release_path

    directory "#{current_release}/deploy" do
      mode '0755'
    end

    # creates a callback for before_symlink
    template "#{current_release}/deploy/before_symlink_callback.rb" do
      source 'embedded_recipe_before_symlink.rb.erb'
      mode '0755'
    end

  end

  # This file can contain Chef recipe code, plain ruby also works
  before_symlink 'deploy/before_symlink_callback.rb'

  restart do
    current_release = release_path
    file "#{release_path}/tmp/restart.txt" do
      mode '0755'
    end
  end

end</pre> <p><strong>Deploy from a private git repository without using the application cookbook</strong></p> <p>To deploy from a private git repository without using the <code class="docutils literal">application</code> cookbook, first ensure that:</p> <ul class="simple"> <li>the private key does not have a passphrase, as this will pause a chef-client run to wait for input</li> <li>an SSH wrapper is being used</li> <li>a private key has been added to the node</li> </ul> <p>and then remove a passphrase from a private key by using code similar to:</p> <pre class="highlight-bash" data-language="bash">ssh-keygen -p -P 'PASSPHRASE' -N '' -f id_deploy</pre> <p><strong>Use an SSH wrapper</strong></p> <p>To write a recipe that uses an SSH wrapper:</p> <ol class="arabic"> <li>
<p class="first">Create a file in the <code class="docutils literal">cookbooks/COOKBOOK_NAME/files/default</code> directory that is named <code class="docutils literal">wrap-ssh4git.sh</code> and which contains the following:</p> <pre class="highlight-ruby" data-language="ruby">#!/usr/bin/env bash
/usr/bin/env ssh -o "StrictHostKeyChecking=no" -i "/tmp/private_code/.ssh/id_deploy" $1 $2</pre> </li> <li>
<p class="first">Set up the cookbook file.</p> </li> <li>
<p class="first">Add a recipe to the cookbook file similar to the following:</p> <pre class="highlight-ruby" data-language="ruby">directory '/tmp/private_code/.ssh' do
  owner 'ubuntu'
  recursive true
end

cookbook_file '/tmp/private_code/wrap-ssh4git.sh' do
  source 'wrap-ssh4git.sh'
  owner 'ubuntu'
  mode '0755'
end

deploy 'private_repo' do
  repo 'git@github.com:acctname/private-repo.git'
  user 'ubuntu'
  deploy_to '/tmp/private_code'
  action :deploy
  ssh_wrapper '/tmp/private_code/wrap-ssh4git.sh'
end</pre> <p>This will deploy the git repository at <code class="docutils literal">git@github.com:acctname/private-repo.git</code> in the <code class="docutils literal">/tmp/private_code</code> directory.</p> </li> </ol> <p><strong>Use a callback to include a file that will be passed as a code block</strong></p> <p>The code in a file that is included in a recipe using a callback is evaluated exactly as if the code had been put in the recipe as a block. Files are searched relative to the current release.</p> <p>To specify a file that contains code to be used as a block:</p> <pre class="highlight-ruby" data-language="ruby">deploy '/deploy/dir/' do
  # ...

  before_migrate 'callbacks/do_this_before_migrate.rb'
end</pre> <p><strong>Use a callback to pass a code block</strong></p> <p>To pass a block of Python code before a migration is run:</p> <pre class="highlight-ruby" data-language="ruby">deploy_revision '/deploy/dir/' do
  # other attributes
  # ...

  before_migrate do
    # release_path is the path to the timestamp dir
    # for the current release
    current_release = release_path

    # Create a local variable for the node so we'll have access to
    # the attributes
    deploy_node = node

    # A local variable with the deploy resource.
    deploy_resource = new_resource

    python do
      cwd current_release
      user 'myappuser'
      code&lt;&lt;-PYCODE
        # Woah, callbacks in python!
        # ...
        # current_release, deploy_node, and deploy_resource are all available
        # within the deploy hook now.
      PYCODE
    end
  end
end</pre> <p><strong>Use the same API for all recipes using the same gem</strong></p> <p>Any recipes using the <code class="docutils literal">git-deploy</code> gem can continue using the same API. To include this behavior in a recipe, do something like the following:</p> <pre class="highlight-ruby" data-language="ruby">deploy "/srv/#{appname}" do
  repo 'git://github.com/radiant/radiant.git'
  revision 'HEAD'
  user 'railsdev'
  enable_submodules false
  migrate true
  migration_command 'rake db:migrate'
  # Giving a string for environment sets RAILS_ENV, MERB_ENV, RACK_ENV
  environment 'production'
  shallow_clone true
  action :deploy
  restart_command 'touch tmp/restart.txt'
end</pre> <p><strong>Deploy without creating symbolic links to a shared folder</strong></p> <p>To deploy without creating symbolic links to a shared folder:</p> <pre class="highlight-ruby" data-language="ruby">deploy '/my/apps/dir/deploy' do
  symlinks {}
end</pre> <p>When deploying code that is not Ruby on Rails and symbolic links to a shared folder are not wanted, use parentheses <code class="docutils literal">()</code> or <code class="docutils literal">Hash.new</code> to avoid ambiguity. For example, using parentheses:</p> <pre class="highlight-ruby" data-language="ruby">deploy '/my/apps/dir/deploy' do
  symlinks({})
end</pre> <p>or using <code class="docutils literal">Hash.new</code>:</p> <pre class="highlight-ruby" data-language="ruby">deploy '/my/apps/dir/deploy' do
  symlinks Hash.new
end</pre> <p><strong>Clear a layout modifier attribute</strong></p> <p>Using the default property values for the various resources is the recommended starting point when working with recipes. Then, depending on what each node requires, these default values can be overridden with node-, role-, environment-, and cookbook-specific values. The <strong>deploy</strong> resource has four layout modifiers: <code class="docutils literal">create_dirs_before_symlink</code>, <code class="docutils literal">purge_before_symlink</code>, <code class="docutils literal">symlink_before_migrate</code>, and <code class="docutils literal">symlinks</code>. Each of these is a Hash that behaves as a property of the <strong>deploy</strong> resource. When these layout modifiers are used in a recipe, they appear similar to the following:</p> <pre class="highlight-ruby" data-language="ruby">deploy 'name' do
  ...
  symlink_before_migrate       {'config/database.yml' =&gt; 'config/database.yml'}
  create_dirs_before_symlink   %w{tmp public config}
  purge_before_symlink         %w{log tmp/pids public/system}
  symlinks                     { 'system' =&gt; 'public/system',
                                 'pids' =&gt; 'tmp/pids',
                                 'log' =&gt; 'log'
                               }
  ...
end</pre> <p>and then what these layout modifiers look like if they were empty:</p> <pre class="highlight-ruby" data-language="ruby">deploy 'name' do
  ...
  symlink_before_migrate       nil
  create_dirs_before_symlink   []
  purge_before_symlink         []
  symlinks                     nil
  ...
end</pre> <p>In most cases, using the empty values for the layout modifiers will prevent the chef-client from passing symbolic linking information to a node during the chef-client run. However, in some cases, it may be preferable to ensure that one (or more) of these layout modifiers do not pass any symbolic linking information to a node during the chef-client run at all. Because each of these layout modifiers are a Hash, the <code class="docutils literal">clear</code> instance method can be used to clear out these values.</p> <p>To clear the default values for a layout modifier:</p> <pre class="highlight-ruby" data-language="ruby">deploy 'name' do
  ...
  symlink_before_migrate.clear
  create_dirs_before_symlink.clear
  purge_before_symlink.clear
  symlinks.clear
  ...
end</pre> <p>In general, use this approach carefully and only after it is determined that nil or empty values won’t provide the expected result.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef™ Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs-archive.chef.io/release/12-13/resource_deploy.html" class="_attribution-link">https://docs-archive.chef.io/release/12-13/resource_deploy.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
