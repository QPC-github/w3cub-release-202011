
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Python - Chef 12 - W3cubDocs</title>
  
  <meta name="description" content="Use the python resource to execute scripts using the Python interpreter. This resource may also use any of the actions and properties that are &hellip;">
  <meta name="keywords" content="python, chef, chef~12">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/chef~12/12-13/resource_python.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/chef~12.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/chef~12/" class="_nav-link" title="" style="margin-left:0;">Chef 12</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="python">python</h1> <p>Use the <strong>python</strong> resource to execute scripts using the Python interpreter. This resource may also use any of the actions and properties that are available to the <strong>execute</strong> resource. Commands that are executed with this resource are (by their nature) not idempotent, as they are typically unique to the environment in which they are run. Use <code class="docutils literal">not_if</code> and <code class="docutils literal">only_if</code> to guard this resource for idempotence.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The <strong>python</strong> script resource (which is based on the <strong>script</strong> resource) is different from the <strong>ruby_block</strong> resource because Ruby code that is run with this resource is created as a temporary file and executed like other script resources, rather than run inline.</p> </div>  <h2 id="syntax">Syntax</h2> <p>A <strong>python</strong> resource block executes scripts using Python:</p> <pre class="highlight-ruby" data-language="ruby">python 'hello world' do
  code &lt;&lt;-EOH
    print "Hello world! From Chef and Python."
    EOH
end</pre> <p>where</p> <ul class="simple"> <li>
<code class="docutils literal">code</code> specifies the command to run</li> </ul> <p>The full syntax for all of the properties that are available to the <strong>python</strong> resource is:</p> <pre class="highlight-ruby" data-language="ruby">python 'name' do
  code                       String
  creates                    String
  cwd                        String
  environment                Hash
  flags                      String
  group                      String, Integer
  notifies                   # see description
  path                       Array
  provider                   Chef::Provider::Script::Python
  returns                    Integer, Array
  subscribes                 # see description
  timeout                    Integer, Float
  user                       String, Integer
  umask                      String, Integer
  action                     Symbol # defaults to :run if not specified
end</pre> <p>where</p> <ul class="simple"> <li>
<code class="docutils literal">python</code> is the resource</li> <li>
<code class="docutils literal">name</code> is the name of the resource block</li> <li>
<code class="docutils literal">:action</code> identifies the steps the chef-client will take to bring the node into the desired state</li> <li>
<code class="docutils literal">code</code>, <code class="docutils literal">creates</code>, <code class="docutils literal">cwd</code>, <code class="docutils literal">environment</code>, <code class="docutils literal">flags</code>, <code class="docutils literal">group</code>, <code class="docutils literal">path</code>, <code class="docutils literal">provider</code>, <code class="docutils literal">returns</code>, <code class="docutils literal">timeout</code>, <code class="docutils literal">user</code>, and <code class="docutils literal">umask</code> are properties of this resource, with the Ruby type shown. See “Properties” section below for more information about all of the properties that may be used with this resource.</li> </ul>   <h2 id="actions">Actions</h2> <p>This resource has the following actions:</p> <dl class="docutils"> <dt><code class="docutils literal">:nothing</code></dt> <dd>Prevent a command from running. This action is used to specify that a command is run only when another resource notifies it.</dd> <dt><code class="docutils literal">:run</code></dt> <dd>Default. Run a script.</dd> </dl>   <h2 id="properties">Properties</h2> <p>This resource has the following properties:</p> <dl class="docutils"> <dt><code class="docutils literal">code</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">A quoted (” ”) string of code to be executed.</p> </dd> <dt><code class="docutils literal">creates</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">Prevent a command from creating a file when that file already exists.</p> </dd> <dt><code class="docutils literal">cwd</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">The current working directory.</p> </dd> <dt><code class="docutils literal">environment</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Hash</p> <p class="last">A Hash of environment variables in the form of <code class="docutils literal">({"ENV_VARIABLE" =&gt; "VALUE"})</code>. (These variables must exist for a command to be run successfully.)</p> </dd> <dt><code class="docutils literal">flags</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> String</p> <p class="last">One or more command line flags that are passed to the interpreter when a command is invoked.</p> </dd> <dt><code class="docutils literal">group</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> String, Integer</p> <p class="last">The group name or group ID that must be changed before running a command.</p> </dd> <dt><code class="docutils literal">ignore_failure</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p> <p class="last">Continue running a recipe if a resource fails for any reason. Default value: <code class="docutils literal">false</code>.</p> </dd> <dt><code class="docutils literal">notifies</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Symbol, ‘Chef::Resource[String]’</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code class="docutils literal">'resource[name]'</code>, the <code class="docutils literal">:action</code> that resource should take, and then the <code class="docutils literal">:timer</code> for that action. A resource may notifiy more than one resource; use a <code class="docutils literal">notifies</code> statement for each resource to be notified.</p> <p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p> <dl class="docutils"> <dt><code class="docutils literal">:before</code></dt> <dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd> <dt><code class="docutils literal">:delayed</code></dt> <dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd> <dt>
<code class="docutils literal">:immediate</code>, <code class="docutils literal">:immediately</code>
</dt> <dd>Specifies that a notification should be run immediately, per resource notified.</dd> </dl> <p>The syntax for <code class="docutils literal">notifies</code> is:</p> <pre class="last highlight-ruby" data-language="ruby">notifies :action, 'resource[name]', :timer</pre> </dd> <dt><code class="docutils literal">path</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Array</p> <p>An array of paths to use when searching for a command. These paths are not added to the command’s environment $PATH. The default value uses the system path.</p> <div class="last admonition warning"> <p class="first admonition-title">Warning</p> <p>For example:</p> <pre class="last highlight-ruby" data-language="ruby">python 'mycommand' do
  environment 'PATH' =&gt; "/my/path/to/bin:#{ENV['PATH']}"
end</pre> </div> </dd> <dt><code class="docutils literal">provider</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Chef Class</p> <p class="last">Optional. Explicitly specifies a provider. See “Providers” section below for more information.</p> </dd> <dt><code class="docutils literal">retries</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Integer</p> <p class="last">The number of times to catch exceptions and retry the resource. Default value: <code class="docutils literal">0</code>.</p> </dd> <dt><code class="docutils literal">retry_delay</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Integer</p> <p class="last">The retry delay (in seconds). Default value: <code class="docutils literal">2</code>.</p> </dd> <dt><code class="docutils literal">returns</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> Integer, Array</p> <p class="last">The return value for a command. This may be an array of accepted values. An exception is raised when the return value(s) do not match. Default value: <code class="docutils literal">0</code>.</p> </dd> <dt><code class="docutils literal">subscribes</code></dt> <dd>
<p class="first"><strong>Ruby Type:</strong> Symbol, ‘Chef::Resource[String]’</p> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code class="docutils literal">'resource[name]'</code>, the <code class="docutils literal">:action</code> to be taken, and then the <code class="docutils literal">:timer</code> for that action.</p> <p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p> <dl class="docutils"> <dt><code class="docutils literal">:before</code></dt> <dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd> <dt><code class="docutils literal">:delayed</code></dt> <dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd> <dt>
<code class="docutils literal">:immediate</code>, <code class="docutils literal">:immediately</code>
</dt> <dd>Specifies that a notification should be run immediately, per resource notified.</dd> </dl> <p>The syntax for <code class="docutils literal">subscribes</code> is:</p> <pre class="last highlight-ruby" data-language="ruby">subscribes :action, 'resource[name]', :timer</pre> </dd> <dt><code class="docutils literal">timeout</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> Integer, Float</p> <p class="last">The amount of time (in seconds) a command is to wait before timing out. Default value: <code class="docutils literal">3600</code>.</p> </dd> <dt><code class="docutils literal">user</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> String, Integer</p> <p class="last">The user name or user ID that should be changed before running a command.</p> </dd> <dt><code class="docutils literal">umask</code></dt> <dd>
<p class="first"><strong>Ruby Types:</strong> String, Integer</p> <p class="last">The file mode creation mask, or umask.</p> </dd> </dl>  <h3 id="guards">Guards</h3> <p>A guard property can be used to evaluate the state of a node during the execution phase of the chef-client run. Based on the results of this evaluation, a guard property is then used to tell the chef-client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul class="simple"> <li>A string is executed as a shell command. If the command returns <code class="docutils literal">0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code class="docutils literal">true</code> in addition to <code class="docutils literal">0</code>.</li> <li>A block is executed as Ruby code that must return either <code class="docutils literal">true</code> or <code class="docutils literal">false</code>. If the block returns <code class="docutils literal">true</code>, the guard property is applied. If the block returns <code class="docutils literal">false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for the chef-client to do nothing.</p> <p><strong>Attributes</strong></p> <p>The following properties can be used to define a guard that is evaluated during the execution phase of the chef-client run:</p> <dl class="docutils"> <dt><code class="docutils literal">not_if</code></dt> <dd>Prevent a resource from executing when the condition returns <code class="docutils literal">true</code>.</dd> <dt><code class="docutils literal">only_if</code></dt> <dd>Allow a resource to execute only if the condition returns <code class="docutils literal">true</code>.</dd> </dl> <p><strong>Arguments</strong></p> <p>The following arguments can be used with the <code class="docutils literal">not_if</code> or <code class="docutils literal">only_if</code> guard properties:</p> <dl class="docutils"> <dt><code class="docutils literal">:user</code></dt> <dd>
<p class="first">Specify the user that a command will run as. For example:</p> <pre class="last highlight-ruby" data-language="ruby">not_if 'grep adam /etc/passwd', :user =&gt; 'adam'</pre> </dd> <dt><code class="docutils literal">:group</code></dt> <dd>
<p class="first">Specify the group that a command will run as. For example:</p> <pre class="last highlight-ruby" data-language="ruby">not_if 'grep adam /etc/passwd', :group =&gt; 'adam'</pre> </dd> <dt><code class="docutils literal">:environment</code></dt> <dd>
<p class="first">Specify a Hash of environment variables to be set. For example:</p> <pre class="last highlight-ruby" data-language="ruby">not_if 'grep adam /etc/passwd', :environment =&gt; {
  'HOME' =&gt; '/home/adam'
}</pre> </dd> <dt><code class="docutils literal">:cwd</code></dt> <dd>
<p class="first">Set the current working directory before running a command. For example:</p> <pre class="last highlight-ruby" data-language="ruby">not_if 'grep adam passwd', :cwd =&gt; '/etc'</pre> </dd> <dt><code class="docutils literal">:timeout</code></dt> <dd>
<p class="first">Set a timeout for a command. For example:</p> <pre class="last highlight-ruby" data-language="ruby">not_if 'sleep 10000', :timeout =&gt; 10</pre> </dd> </dl>    <h2 id="providers">Providers</h2> <p>Where a resource represents a piece of the system (and its desired state), a provider defines the steps that are needed to bring that piece of the system from its current state into the desired state.</p> <p>The chef-client will determine the correct provider based on configuration data collected by Ohai at the start of the chef-client run. This configuration data is then mapped to a platform and an associated list of providers.</p> <p>Generally, it’s best to let the chef-client choose the provider, and this is (by far) the most common approach. However, in some cases, specifying a provider may be desirable. There are two approaches:</p> <ul class="simple"> <li>Use a more specific short name—<code class="docutils literal">yum_package "foo" do</code> instead of <code class="docutils literal">package "foo" do</code>, <code class="docutils literal">script "foo" do</code> instead of <code class="docutils literal">bash "foo" do</code>, and so on—when available</li> <li>Use the <code class="docutils literal">provider</code> property within the resource block to specify the long name of the provider as a property of a resource. For example: <code class="docutils literal">provider Chef::Provider::Long::Name</code>
</li> </ul> <p>This resource has the following providers:</p> <dl class="docutils"> <dt>
<code class="docutils literal">Chef::Provider::Script</code>, <code class="docutils literal">script</code>
</dt> <dd>When this short name is used, the chef-client will determine the correct provider during the chef-client run.</dd> <dt>
<code class="docutils literal">Chef::Provider::Script::Python</code>, <code class="docutils literal">python</code>
</dt> <dd>The provider for the Python command interpreter.</dd> </dl>   <h2 id="examples">Examples</h2> <p>None.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef™ Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs-archive.chef.io/release/12-13/resource_python.html" class="_attribution-link">https://docs-archive.chef.io/release/12-13/resource_python.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
