
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Knife Data Bag - Chef 12 - W3cubDocs</title>
  
  <meta name="description" content="A data bag is a global variable that is stored as JSON data and is accessible from a Chef server. A data bag is indexed for searching and can be &hellip;">
  <meta name="keywords" content="knife, data, bag, chef, chef~12">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/chef~12/12-13/knife_data_bag.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/chef~12.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/chef~12/" class="_nav-link" title="" style="margin-left:0;">Chef 12</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="knife-data-bag">knife data bag</h1> <p>A data bag is a global variable that is stored as JSON data and is accessible from a Chef server. A data bag is indexed for searching and can be loaded by a recipe or accessed during a search.</p> <p>A data bag item may be encrypted using <a class="reference external" href="https://en.wikipedia.org/wiki/Symmetric-key_algorithm">shared secret encryption</a>. This allows each data bag item to store confidential information (such as a database password) or to be managed in a source control system (without plain-text data appearing in revision history). Each data bag item may be encrypted individually; if a data bag contains multiple encrypted data bag items, these data bag items are not required to share the same encryption keys.</p> <p>The <code class="docutils literal">knife data bag</code> subcommand is used to manage arbitrary stores of globally available JSON data.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Review the list of <a class="reference internal" href="knife_common_options">common options</a> available to this (and all) knife subcommands and plugins.</p> </div>  <h2 id="create">create</h2> <p>Use the <code class="docutils literal">create</code> argument to add a data bag to the Chef server.</p>  <h3 id="syntax">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag create DATA_BAG_NAME [DATA_BAG_ITEM] (options)</pre>   <h3 id="options">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt><code class="docutils literal">DATA_BAG_ITEM</code></dt> <dd>The name of a specific item within a data bag.</dd> <dt><code class="docutils literal">--secret SECRET</code></dt> <dd>The encryption key that is used for values contained within a data bag item. If <code class="docutils literal">secret</code> is not specified, the chef-client looks for a secret at the path specified by the <code class="docutils literal">encrypted_data_bag_secret</code> setting in the client.rb file.</dd> <dt><code class="docutils literal">--secret-file FILE</code></dt> <dd>The path to the file that contains the encryption key.</dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">For encrypted data bag items, use either <code class="docutils literal">--secret</code> or <code class="docutils literal">--secret-file</code>, not both.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">See <a class="reference internal" href="config_rb_knife_optional_settings">knife.rb</a> for more information about how to add certain knife options as settings in the knife.rb file.</p> </div>   <h3 id="examples">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Create a data bag</strong></p> <p>To create a data bag named “admins”, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag create admins</pre> <p>to return:</p> <pre class="highlight-none" data-language="none">Created data_bag[admins]</pre>    <h2 id="delete">delete</h2> <p>Use the <code class="docutils literal">delete</code> argument to delete a data bag or a data bag item from a Chef server.</p>  <h3 id="id1">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag delete DATA_BAG_NAME [DATA_BAG_ITEM] (options)</pre>   <h3 id="id2">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt><code class="docutils literal">DATA_BAG_ITEM</code></dt> <dd>The name of a specific item within a data bag.</dd> </dl>   <h3 id="id3">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Delete a data bag</strong></p> <pre class="highlight-bash" data-language="bash">$ knife data bag delete data_bag_name</pre> <p><strong>Delete a data bag item</strong></p> <p>To delete an item named “charlie”, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag delete admins charlie</pre> <p>Type <code class="docutils literal">Y</code> to confirm a deletion.</p>    <h2 id="edit">edit</h2> <p>Use the <code class="docutils literal">edit</code> argument to edit the data contained in a data bag. If encryption is being used, the data bag will be decrypted, the data will be made available in the $EDITOR, and then encrypted again before saving it to the Chef server.</p>  <h3 id="id4">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag edit DATA_BAG_NAME [DATA_BAG_ITEM] (options)</pre>   <h3 id="id5">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt><code class="docutils literal">DATA_BAG_ITEM</code></dt> <dd>The name of a specific item within a data bag.</dd> <dt><code class="docutils literal">--secret SECRET</code></dt> <dd>The encryption key that is used for values contained within a data bag item. If <code class="docutils literal">secret</code> is not specified, the chef-client looks for a secret at the path specified by the <code class="docutils literal">encrypted_data_bag_secret</code> setting in the client.rb file.</dd> <dt><code class="docutils literal">--secret-file FILE</code></dt> <dd>The path to the file that contains the encryption key.</dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">For encrypted data bag items, use either <code class="docutils literal">--secret</code> or <code class="docutils literal">--secret-file</code>, not both.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">See <a class="reference internal" href="config_rb_knife_optional_settings">knife.rb</a> for more information about how to add certain knife options as settings in the knife.rb file.</p> </div>   <h3 id="id6">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Edit a data bag</strong></p> <p>To edit the contents of a data bag, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag edit dogs tibetanspaniel</pre> <p>where <code class="docutils literal">dogs</code> is the name of the data bag and <code class="docutils literal">tibetanspaniel</code> is the name of the data bag item. This will return something similar to the following in the knife editor:</p> <pre class="highlight-javascript" data-language="javascript">{
  "name":"data_bag_item_dogs_tibetanspaniel",
  "json_class":"Chef::DataBagItem",
  "chef_type":"data_bag_item",
  "data_bag":"dogs",
  "raw_data":
    {
      "description":"small dog that likes to sit in windows",
      "id":"tibetanspaniel"
    }
}</pre> <p>Make the necessary changes to the key-value pairs under <code class="docutils literal">raw_data</code> and save them.</p> <p><strong>Edit a data bag item</strong></p> <p>To edit an item named “charlie” that is contained in a data bag named “admins”, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag edit admins charlie</pre> <p>to open the $EDITOR. Once opened, you can update the data before saving it to the Chef server. For example, by changing:</p> <pre class="highlight-javascript" data-language="javascript">{
   "id": "charlie"
}</pre> <p>to:</p> <pre class="highlight-javascript" data-language="javascript">{
   "id": "charlie",
   "uid": 1005,
   "gid": "ops",
   "shell": "/bin/zsh",
   "comment": "Crazy Charlie"
}</pre>    <h2 id="from-file">from file</h2> <p>Use the <code class="docutils literal">from file</code> argument to:</p> <ul class="simple"> <li>Add a data bag item to a data bag</li> <li>Update the contents of an existing data bag item</li> </ul> <p>The data bag itself must already exist on the Chef server and must be specified as part of the command. The contents of the data bag item are specified using a JSON file. This JSON file may be located at a relative or absolute path; its location must be specified as part of the command. The JSON file that defines the contents of the data bag item must at least contain the name of the data bag item—<code class="docutils literal">"id": "name"</code>.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">A chef-client must be version 11.6 (or higher) when using the <code class="docutils literal">knife data bag from file</code> argument with the Enterprise Chef or Open Source Chef version 11 servers.</p> </div>  <h3 id="id7">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag from file DATA_BAG_NAME_or_PATH</pre>   <h3 id="id8">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-a</code>, <code class="docutils literal">--all</code>
</dt> <dd>Upload all data bags found at the specified path.</dd> <dt><code class="docutils literal">--secret SECRET</code></dt> <dd>The encryption key that is used for values contained within a data bag item. If <code class="docutils literal">secret</code> is not specified, the chef-client looks for a secret at the path specified by the <code class="docutils literal">encrypted_data_bag_secret</code> setting in the client.rb file.</dd> <dt><code class="docutils literal">--secret-file FILE</code></dt> <dd>The path to the file that contains the encryption key.</dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">For encrypted data bag items, use either <code class="docutils literal">--secret</code> or <code class="docutils literal">--secret-file</code>, not both.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">See <a class="reference internal" href="config_rb_knife_optional_settings">knife.rb</a> for more information about how to add certain knife options as settings in the knife.rb file.</p> </div>   <h3 id="id9">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Create a data bag from a file</strong></p> <p>To create a data bag on the Chef server from a file:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag from file "path to JSON file"</pre> <p><strong>Create an encrypted data bag from a file</strong></p> <p>To create a data bag named “devops_data” that contains encrypted data, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag from file devops_data --secret-file "path to decryption file"</pre> <p><strong>Create an encrypted data bag for use with chef-client local mode</strong></p> <p>To generate an encrypted data bag item in a JSON file for use when the chef-client is run in local mode (via the <code class="docutils literal">--local-mode</code> option), enter:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag from file my_data_bag /path/to/data_bag_item.json -z --secret-file /path/to/encrypted_data_bag_secret</pre> <p>this will create an encrypted JSON file in:</p> <pre class="highlight-python" data-language="python">data_bags/my_data_bag/data_bag_item.json</pre>    <h2 id="list">list</h2> <p>Use the <code class="docutils literal">list</code> argument to view a list of data bags that are currently available on the Chef server.</p>  <h3 id="id10">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag list</pre>   <h3 id="id11">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt>
<code class="docutils literal">-w</code>, <code class="docutils literal">--with-uri</code>
</dt> <dd>Show the corresponding URIs.</dd> </dl>   <h3 id="id12">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>View a list of data bags</strong></p> <pre class="highlight-bash" data-language="bash">$ knife data bag list</pre>    <h2 id="show">show</h2> <p>Use the <code class="docutils literal">show</code> argument to view the contents of a data bag.</p>  <h3 id="id13">Syntax</h3> <p>This argument has the following syntax:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag show DATA_BAG_NAME (options)</pre>   <h3 id="id14">Options</h3> <p>This argument has the following options:</p> <dl class="docutils"> <dt><code class="docutils literal">DATA_BAG_ITEM</code></dt> <dd>The name of a specific item within a data bag.</dd> <dt><code class="docutils literal">--secret SECRET</code></dt> <dd>The encryption key that is used for values contained within a data bag item. If <code class="docutils literal">secret</code> is not specified, the chef-client looks for a secret at the path specified by the <code class="docutils literal">encrypted_data_bag_secret</code> setting in the client.rb file.</dd> <dt><code class="docutils literal">--secret-file FILE</code></dt> <dd>The path to the file that contains the encryption key.</dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">For encrypted data bag items, use either <code class="docutils literal">--secret</code> or <code class="docutils literal">--secret-file</code>, not both.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">See <a class="reference internal" href="config_rb_knife_optional_settings">knife.rb</a> for more information about how to add certain knife options as settings in the knife.rb file.</p> </div>   <h3 id="id15">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Show a data bag</strong></p> <pre class="highlight-bash" data-language="bash">$ knife data bag show admins</pre> <p>to return something like:</p> <pre class="highlight-none" data-language="none">charlie</pre> <p><strong>Show a data bag item</strong></p> <p>To show the contents of a specific item within data bag, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag show admins charlie</pre> <p>to return:</p> <pre class="highlight-none" data-language="none">comment:  Crazy Charlie
gid:      ops
id:       charlie
shell:    /bin/zsh
uid:      1005</pre> <p><strong>Show a data bag, encrypted</strong></p> <p>To show the contents of a data bag named <code class="docutils literal">passwords</code> with an item that contains encrypted data named <code class="docutils literal">mysql</code>, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag show passwords mysql</pre> <p>to return:</p> <pre class="highlight-javascript" data-language="javascript">{
  "id": "mysql",
  "pass": "trywgFA6R70NO28PNhMpGhEvKBZuxouemnbnAUQsUyo=\n",
  "user": "e/p+8WJYVHY9fHcEgAAReg==\n"
}</pre> <p><strong>Show a data bag, decrypted</strong></p> <p>To show the decrypted contents of the same data bag, enter:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag show --secret-file /path/to/decryption/file passwords mysql</pre> <p>to return:</p> <pre class="highlight-javascript" data-language="javascript">{
  "id": "mysql",
  "pass": "thesecret123",
  "user": "fred"
}</pre> <p><strong>Show a data bag as JSON</strong></p> <p>To view information in JSON format, use the <code class="docutils literal">-F</code> common option as part of the command like this:</p> <pre class="highlight-bash" data-language="bash">$ knife data bag show admins -F json</pre> <p>Other formats available include <code class="docutils literal">text</code>, <code class="docutils literal">yaml</code>, and <code class="docutils literal">pp</code>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef™ Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs-archive.chef.io/release/12-13/knife_data_bag.html" class="_attribution-link">https://docs-archive.chef.io/release/12-13/knife_data_bag.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
