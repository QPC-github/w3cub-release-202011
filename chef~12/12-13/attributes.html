
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Attributes - Chef 12 - W3cubDocs</title>
  
  <meta name="description" content=" An attribute is a specific detail about a node. Attributes are used by the chef-client to understand&#58; ">
  <meta name="keywords" content="about, attributes, chef, chef~12">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/chef~12/12-13/attributes.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/chef~12.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/chef~12/" class="_nav-link" title="" style="margin-left:0;">Chef 12</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="about-attributes">About Attributes</h1> <p>An attribute is a specific detail about a node. Attributes are used by the chef-client to understand:</p> <ul class="simple"> <li>The current state of the node</li> <li>What the state of the node was at the end of the previous chef-client run</li> <li>What the state of the node should be at the end of the current chef-client run</li> </ul> <p>Attributes are defined by:</p> <ul class="simple"> <li>The state of the node itself</li> <li>Cookbooks (in attribute files and/or recipes)</li> <li>Roles</li> <li>Environments</li> </ul> <p>During every chef-client run, the chef-client builds the attribute list using:</p> <ul class="simple"> <li>Data about the node collected by Ohai</li> <li>The node object that was saved to the Chef server at the end of the previous chef-client run</li> <li>The rebuilt node object from the current chef-client run, after it is updated for changes to cookbooks (attribute files and/or recipes), roles, and/or environments, and updated for any changes to the state of the node itself</li> </ul> <p>After the node object is rebuilt, all of the attributes are compared, and then the node is updated based on attribute precedence. At the end of every chef-client run, the node object that defines the current state of the node is uploaded to the Chef server so that it can be indexed for search.</p> <p>So how does the chef-client determine which value should be applied? Keep reading to learn more about how attributes work, including more about the types of attributes, where attributes are saved, and how the chef-client chooses which attribute to apply.</p>  <h2 id="attribute-persistence">Attribute Persistence</h2> <p>At the beginning of a chef-client run, all attributes are reset. The chef-client rebuilds them using automatic attributes collected by Ohai at the beginning of the chef-client run and then using default and override attributes that are specified in cookbooks or by roles and environments. Normal attributes are never reset. All attributes are then merged and applied to the node according to attribute precedence. At the conclusion of the chef-client run, the attributes that were applied to the node are saved to the Chef server as part of the node object.</p>   <h2 id="attribute-types">Attribute Types</h2> <p>The chef-client uses six types of attributes to determine the value that is applied to a node during the chef-client run. In addition, the chef-client sources attribute values from up to five locations. The combination of attribute types and sources allows for up to 15 different competing values to be available to the chef-client during the chef-client run:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Attribute Type</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">default</code></td> <td>A <code class="docutils literal">default</code> attribute is automatically reset at the start of every chef-client run and has the lowest attribute precedence. Use <code class="docutils literal">default</code> attributes as often as possible in cookbooks.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">force_default</code></td> <td>Use the <code class="docutils literal">force_default</code> attribute to ensure that an attribute defined in a cookbook (by an attribute file or by a recipe) takes precedence over a <code class="docutils literal">default</code> attribute set by a role or an environment.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">normal</code></td> <td>A <code class="docutils literal">normal</code> attribute is a setting that persists in the node object. A <code class="docutils literal">normal</code> attribute has a higher attribute precedence than a <code class="docutils literal">default</code> attribute.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">override</code></td> <td>An <code class="docutils literal">override</code> attribute is automatically reset at the start of every chef-client run and has a higher attribute precedence than <code class="docutils literal">default</code>, <code class="docutils literal">force_default</code>, and <code class="docutils literal">normal</code> attributes. An <code class="docutils literal">override</code> attribute is most often specified in a recipe, but can be specified in an attribute file, for a role, and/or for an environment. A cookbook should be authored so that it uses <code class="docutils literal">override</code> attributes only when required.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">force_override</code></td> <td>Use the <code class="docutils literal">force_override</code> attribute to ensure that an attribute defined in a cookbook (by an attribute file or by a recipe) takes precedence over an <code class="docutils literal">override</code> attribute set by a role or an environment.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">automatic</code></td> <td>An <code class="docutils literal">automatic</code> attribute contains data that is identified by Ohai at the beginning of every chef-client run. An <code class="docutils literal">automatic</code> attribute cannot be modified and always has the highest attribute precedence.</td> </tr> </tbody> </table>   <h2 id="attribute-sources">Attribute Sources</h2> <p>Attributes are provided to the chef-client from the following locations:</p> <ul class="simple"> <li>Nodes (collected by Ohai at the start of each chef-client run)</li> <li>Attribute files (in cookbooks)</li> <li>Recipes (in cookbooks)</li> <li>Environments</li> <li>Roles</li> </ul> <p>If we go back to the <a class="reference internal" href="../index">overview of Chef</a>, but then focus only on where attributes are located, it looks something like this:</p> <img alt="_images/overview_chef_11x_attributes.png" src="https://docs-archive.chef.io/release/12-13/_images/overview_chef_11x_attributes.png"> <p>where</p> <ul class="simple"> <li>Many attributes are maintained in the chef-repo for environments, roles, and cookbooks (attribute files and recipes)</li> <li>Many attributes are collected by Ohai on each individual node at the start of every chef-client run</li> <li>The attributes that are maintained in the chef-repo are uploaded to the Chef server from the workstation, periodically</li> <li>The chef-client will pull down the node object from the Chef server (which contains the attribute data from the previous chef-client run), after which all attributes (except <code class="docutils literal">normal</code> are reset)</li> <li>The chef-client will update the cookbooks on the node (if required), which updates the attributes contained in attribute files and recipes</li> <li>The chef-client will update the role and environment data (if required)</li> <li>The chef-client will rebuild the attribute list and apply attribute precedence while configuring the node</li> <li>The chef-client pushes the node object to the Chef server at the end of the chef-client run; the updated node object on the Chef server is then indexed for search and is stored until the next chef-client run</li> </ul>  <h3 id="automatic-ohai">Automatic (Ohai)</h3> <p>An automatic attribute is a specific detail about a node, such as an IP address, a host name, a list of loaded kernel modules, and so on. Automatic attributes are detected by Ohai and are then used by the chef-client to ensure that they are handled properly during every chef-client run. The most commonly accessed automatic attributes are:</p> <table class="docutils"> <colgroup> <col width="13%"> <col width="88%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Attribute</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">node['platform']</code></td> <td>The platform on which a node is running. This attribute helps determine which providers will be used.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">node['platform_version']</code></td> <td>The version of the platform. This attribute helps determine which providers will be used.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">node['ipaddress']</code></td> <td>The IP address for a node. If the node has a default route, this is the IPV4 address for the interface. If the node does not have a default route, the value for this attribute should be <code class="docutils literal">nil</code>. The IP address for default route is the recommended default value.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">node['macaddress']</code></td> <td>The MAC address for a node, determined by the same interface that detects the <code class="docutils literal">node['ipaddress']</code>.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">node['fqdn']</code></td> <td>The fully qualified domain name for a node. This is used as the name of a node unless otherwise set.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">node['hostname']</code></td> <td>The host name for the node.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">node['domain']</code></td> <td>The domain for the node.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">node['recipes']</code></td> <td>A list of recipes associated with a node (and part of that node’s run-list).</td> </tr> <tr class="row-even">
<td><code class="docutils literal">node['roles']</code></td> <td>A list of roles associated with a node (and part of that node’s run-list).</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">node['ohai_time']</code></td> <td>The time at which Ohai was last run. This attribute is not commonly used in recipes, but it is saved to the Chef server and can be accessed using the <code class="docutils literal">knife status</code> subcommand.</td> </tr> </tbody> </table> <p>The list of automatic attributes that are collected by Ohai at the start of each chef-client run vary from organization to organization, and will often vary between the various server types being configured and the platforms on which those servers are run. All attributes collected by Ohai are unmodifiable by the chef-client. To see which automatic attributes are collected by Ohai for a particular node, run the following command:</p> <pre class="highlight-bash" data-language="bash">ohai$ grep -R "provides" -h lib/ohai/plugins|sed 's/^\s*//g'|sed "s/\\\"/\'/g"|sort|uniq|grep ^provides</pre>   <h3 id="attribute-files">Attribute Files</h3> <p>An attribute file is located in the <code class="docutils literal">attributes/</code> sub-directory for a cookbook. When a cookbook is run against a node, the attributes contained in all attribute files are evaluated in the context of the node object. Node methods (when present) are used to set attribute values on a node. For example, the <code class="docutils literal">apache2</code> cookbook contains an attribute file called <code class="docutils literal">default.rb</code>, which contains the following attributes:</p> <pre class="highlight-ruby" data-language="ruby">default['apache']['dir']          = '/etc/apache2'
default['apache']['listen_ports'] = [ '80','443' ]</pre> <p>The use of the node object (<code class="docutils literal">node</code>) is implicit in the previous example; the following example defines the node object itself as part of the attribute:</p> <pre class="highlight-ruby" data-language="ruby">node.default['apache']['dir']          = '/etc/apache2'
node.default['apache']['listen_ports'] = [ '80','443' ]</pre>   <h3 id="attribute-evaluation-order">Attribute Evaluation Order</h3> <p>The chef-client evaluates attributes in the order defined by the run-list, including any attributes that are in the run-list because of cookbook dependencies.</p>  <h4 id="use-attribute-files">Use Attribute Files</h4> <p>An attribute is a specific detail about a node, such as an IP address, a host name, a list of loaded kernel modules, the version(s) of available programming languages that are available, and so on. An attribute may be unique to a specific node or it can be identical across every node in the organization. Attributes are most commonly set from a cookbook, by using knife, or are retrieved by Ohai from each node prior to every chef-client run. All attributes are indexed for search on the Chef server. Good candidates for attributes include:</p> <ul class="simple"> <li>any cross-platform abstraction for an application, such as the path to a configuration file</li> <li>default values for tunable settings, such as the amount of memory assigned to a process or the number of workers to spawn</li> <li>anything that may need to be persisted in node data between chef-client runs</li> </ul> <p>In general, attribute precedence is set to enable cookbooks and roles to define attribute defaults, for normal attributes to define the values that should be specific for a node, and for override attributes to force a certain value, even when a node already has that value specified.</p> <p>One approach is to set attributes at the same precedence level by setting attributes in a cookbook’s attribute files, and then also setting the same default attributes (but with different values) using a role. The attributes set in the role will be deep merged on top of the attributes from the attribute file, and the attributes set by the role will take precedence over the attributes specified in the cookbook’s attribute files.</p> <p>Another (much less common) approach is to set a value only if an attribute has no value. This can be done by using the <code class="docutils literal">_unless</code> variants of the attribute priority methods:</p> <ul> <li>
<p class="first"><code class="docutils literal">default_unless</code></p> </li> <li>
<p class="first"><code class="docutils literal">set_unless</code> (<code class="docutils literal">normal_unless</code> is an alias of <code class="docutils literal">set_unless</code>; use either alias to set an attribute with a normal attribute precedence.)</p> <blockquote> <div>
<div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This method was deprecated in Chef client 12.12 and will be removed in Chef 14. Please use <code class="docutils literal">default_unless</code> or <code class="docutils literal">override_unless</code> instead.</p> </div> </div>
</blockquote> </li> <li>
<p class="first"><code class="docutils literal">override_unless</code></p> </li> </ul> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Use the <code class="docutils literal">_unless</code> variants carefully (and only when necessary) because when they are used, attributes applied to nodes may become out of sync with the values in the cookbooks as these cookbooks are updated. This approach can create situations where two otherwise identical nodes end up having slightly different configurations and can also be a challenge to debug.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Attributes can be configured in cookbooks (attribute files and recipes), roles, and environments. In addition, Ohai collects attribute data about each node at the start of the chef-client run. See <a class="reference external" href="https://docs.chef.io/attributes.html">https://docs.chef.io/attributes.html</a> for more information about how all of these attributes fit together.</p> </div>  <h5 id="file-methods">File Methods</h5> <p>Use the following methods within the attributes file for a cookbook or within a recipe. These methods correspond to the attribute type of the same name:</p> <ul> <li>
<p class="first"><code class="docutils literal">override</code></p> </li> <li>
<p class="first"><code class="docutils literal">default</code></p> </li> <li>
<p class="first"><code class="docutils literal">normal</code> (or <code class="docutils literal">set</code>, where <code class="docutils literal">set</code> is an alias for <code class="docutils literal">normal</code>)</p>  </li> <li>
<p class="first"><code class="docutils literal">_unless</code></p> </li> <li>
<p class="first"><code class="docutils literal">attribute?</code></p> </li> </ul> <p><strong>attribute?</strong></p> <p>A useful method that is related to attributes is the <code class="docutils literal">attribute?</code> method. This method will check for the existence of an attribute, so that processing can be done in an attributes file or recipe, but only if a specific attribute exists.</p> <p>Using <code class="docutils literal">attribute?()</code> in an attributes file:</p> <pre class="highlight-ruby" data-language="ruby">if attribute?('ec2')
  # ... set stuff related to EC2
end</pre> <p>Using <code class="docutils literal">attribute?()</code> in a recipe:</p> <pre class="highlight-ruby" data-language="ruby">if node.attribute?('ec2')
  # ... do stuff on EC2 nodes
end</pre>     <h3 id="recipes">Recipes</h3> <p>A recipe is the most fundamental configuration element within the organization. A recipe:</p> <ul class="simple"> <li>Is authored using Ruby, which is a programming language designed to read and behave in a predictable manner</li> <li>Is mostly a collection of resources, defined using patterns (resource names, attribute-value pairs, and actions); helper code is added around this using Ruby, when needed</li> <li>Must define everything that is required to configure part of a system</li> <li>Must be stored in a cookbook</li> <li>May be included in a recipe</li> <li>May use the results of a search query and read the contents of a data bag (including an encrypted data bag)</li> <li>May have a dependency on one (or more) recipes</li> <li>May tag a node to facilitate the creation of arbitrary groupings</li> <li>Must be added to a run-list before it can be used by the chef-client</li> <li>Is always executed in the same order as listed in a run-list</li> </ul> <p>An attribute can be defined in a cookbook (or a recipe) and then used to override the default settings on a node. When a cookbook is loaded during a chef-client run, these attributes are compared to the attributes that are already present on the node. Attributes that are defined in attribute files are first loaded according to cookbook order. For each cookbook, attributes in the <code class="docutils literal">default.rb</code> file are loaded first, and then additional attribute files (if present) are loaded in lexical sort order. When the cookbook attributes take precedence over the default attributes, the chef-client will apply those new settings and values during the chef-client run on the node.</p>   <h3 id="roles">Roles</h3> <p>A role is a way to define certain patterns and processes that exist across nodes in an organization as belonging to a single job function. Each role consists of zero (or more) attributes and a run-list. Each node can have zero (or more) roles assigned to it. When a role is run against a node, the configuration details of that node are compared against the attributes of the role, and then the contents of that role’s run-list are applied to the node’s configuration details. When a chef-client runs, it merges its own attributes and run-lists with those contained within each assigned role.</p> <p>An attribute can be defined in a role and then used to override the default settings on a node. When a role is applied during a chef-client run, these attributes are compared to the attributes that are already present on the node. When the role attributes take precedence over the default attributes, the chef-client will apply those new settings and values during the chef-client run on the node.</p> <p>A role attribute can only be set to be a default attribute or an override attribute. A role attribute cannot be set to be a normal attribute. Use the <code class="docutils literal">default_attribute</code> and <code class="docutils literal">override_attribute</code> methods in the Ruby DSL file or the <code class="docutils literal">default_attributes</code> and <code class="docutils literal">override_attributes</code> hashes in a JSON data file.</p>   <h3 id="environments">Environments</h3> <p>An environment is a way to map an organization’s real-life workflow to what can be configured and managed when using Chef server. Every organization begins with a single environment called the <code class="docutils literal">_default</code> environment, which cannot be modified (or deleted). Additional environments can be created to reflect each organization’s patterns and workflow. For example, creating <code class="docutils literal">production</code>, <code class="docutils literal">staging</code>, <code class="docutils literal">testing</code>, and <code class="docutils literal">development</code> environments. Generally, an environment is also associated with one (or more) cookbook versions.</p> <p>An attribute can be defined in an environment and then used to override the default settings on a node. When an environment is applied during a chef-client run, these attributes are compared to the attributes that are already present on the node. When the environment attributes take precedence over the default attributes, the chef-client will apply those new settings and values during the chef-client run on the node.</p> <p>An environment attribute can only be set to be a default attribute or an override attribute. An environment attribute cannot be set to be a <code class="docutils literal">normal</code> attribute. Use the <code class="docutils literal">default_attribute</code> and <code class="docutils literal">override_attribute</code> methods in the Ruby DSL file or the <code class="docutils literal">default_attributes</code> and <code class="docutils literal">override_attributes</code> hashes in a JSON data file.</p>    <h2 id="attribute-precedence">Attribute Precedence</h2> <p>Attributes are always applied by the chef-client in the following order:</p> <ol class="arabic simple"> <li>A <code class="docutils literal">default</code> attribute located in a cookbook attribute file</li> <li>A <code class="docutils literal">default</code> attribute located in a recipe</li> <li>A <code class="docutils literal">default</code> attribute located in an environment</li> <li>A <code class="docutils literal">default</code> attribute located in a role</li> <li>A <code class="docutils literal">force_default</code> attribute located in a cookbook attribute file</li> <li>A <code class="docutils literal">force_default</code> attribute located in a recipe</li> <li>A <code class="docutils literal">normal</code> attribute located in a cookbook attribute file</li> <li>A <code class="docutils literal">normal</code> attribute located in a recipe</li> <li>An <code class="docutils literal">override</code> attribute located in a cookbook attribute file</li> <li>An <code class="docutils literal">override</code> attribute located in a recipe</li> <li>An <code class="docutils literal">override</code> attribute located in a role</li> <li>An <code class="docutils literal">override</code> attribute located in an environment</li> <li>A <code class="docutils literal">force_override</code> attribute located in a cookbook attribute file</li> <li>A <code class="docutils literal">force_override</code> attribute located in a recipe</li> <li>An <code class="docutils literal">automatic</code> attribute identified by Ohai at the start of the chef-client run</li> </ol> <p>where the last attribute in the list is the one that is applied to the node.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The attribute precedence order for roles and environments is reversed for <code class="docutils literal">default</code> and <code class="docutils literal">override</code> attributes. The precedence order for <code class="docutils literal">default</code> attributes is environment, then role. The precedence order for <code class="docutils literal">override</code> attributes is role, then environment. Applying environment <code class="docutils literal">override</code> attributes after role <code class="docutils literal">override</code> attributes allows the same role to be used across multiple environments, yet ensuring that values can be set that are specific to each environment (when required). For example, the role for an application server may exist in all environments, yet one environment may use a database server that is different from other environments.</p> </div> <p>Attribute precedence, viewed from the same perspective as the overview diagram, where the numbers in the diagram match the order of attribute precedence:</p> <img alt="_images/overview_chef_attributes_precedence.png" src="https://docs-archive.chef.io/release/12-13/_images/overview_chef_attributes_precedence.png"> <p>Attribute precedence, when viewed as a table:</p> <img alt="_images/overview_chef_attributes_table.png" src="https://docs-archive.chef.io/release/12-13/_images/overview_chef_attributes_table.png">  <h3 id="whitelist-attributes">Whitelist Attributes</h3> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">When these settings are used, any attribute not defined in a whitelist will not be saved. Each attribute type is whitelisted independently of the other attribute types. For example, if <code class="docutils literal">automatic_attribute_whitelist</code> defines attributes to be saved, but <code class="docutils literal">normal_attribute_whitelist</code>, <code class="docutils literal">default_attribute_whitelist</code>, and <code class="docutils literal">override_attribute_whitelist</code> are not defined, then all normal, default and override attributes are saved, along with only the specified automatic attributes.</p> </div> <p>Attributes that should be saved by a node may be whitelisted in the client.rb file. The whitelist is a Hash of keys that specify each attribute to be saved.</p> <p>Attributes are whitelisted by attribute type, with each attribute type being whitelisted independently. Each attribute type—<code class="docutils literal">automatic</code>, <code class="docutils literal">default</code>, <code class="docutils literal">normal</code>, and <code class="docutils literal">override</code>—may define whitelists by using the following settings in the client.rb file:</p> <table class="docutils"> <colgroup> <col width="40%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Setting</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td><code class="docutils literal">automatic_attribute_whitelist</code></td> <td>A Hash that whitelists <code class="docutils literal">automatic</code> attributes, preventing non-whitelisted attributes from being saved. For example: <code class="docutils literal">['network/interfaces/eth0']</code>. Default value: all attributes are saved. If the Hash is empty, no attributes are saved.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">default_attribute_whitelist</code></td> <td>A Hash that whitelists <code class="docutils literal">default</code> attributes, preventing non-whitelisted attributes from being saved. For example: <code class="docutils literal">['filesystem/dev/disk0s2/size']</code>. Default value: all attributes are saved. If the Hash is empty, no attributes are saved.</td> </tr> <tr class="row-even">
<td><code class="docutils literal">normal_attribute_whitelist</code></td> <td>A Hash that whitelists <code class="docutils literal">normal</code> attributes, preventing non-whitelisted attributes from being saved. For example: <code class="docutils literal">['filesystem/dev/disk0s2/size']</code>. Default value: all attributes are saved. If the Hash is empty, no attributes are saved.</td> </tr> <tr class="row-odd">
<td><code class="docutils literal">override_attribute_whitelist</code></td> <td>A Hash that whitelists <code class="docutils literal">override</code> attributes, preventing non-whitelisted attributes from being saved. For example: <code class="docutils literal">['map - autohome/size']</code>. Default value: all attributes are saved. If the Hash is empty, no attributes are saved.</td> </tr> </tbody> </table> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">It is recommended that only <code class="docutils literal">automatic_attribute_whitelist</code> be used to whitelist attributes. This is primarily because automatic attributes generate the most data, but also that normal, default, and override attributes are typically much more important attributes and are more likely to cause issues if they are whitelisted incorrectly.</p> </div> <p>For example, normal attribute data similar to:</p> <pre class="highlight-javascript" data-language="javascript">{
  "filesystem" =&gt; {
    "/dev/disk0s2" =&gt; {
      "size" =&gt; "10mb"
    },
    "map - autohome" =&gt; {
      "size" =&gt; "10mb"
    }
  },
  "network" =&gt; {
    "interfaces" =&gt; {
      "eth0" =&gt; {...},
      "eth1" =&gt; {...},
    }
  }
}</pre> <p>To whitelist the <code class="docutils literal">network</code> attributes and prevent the other attributes from being saved, update the client.rb file:</p> <pre class="highlight-ruby" data-language="ruby">normal_attribute_whitelist ['network/interfaces/']</pre> <p>When a whitelist is defined, any attribute of that type that is not specified in that attribute whitelist <strong>will not</strong> be saved. So based on the previous whitelist for normal attributes, the <code class="docutils literal">filesystem</code> and <code class="docutils literal">map - autohome</code> attributes will not be saved, but the <code class="docutils literal">network</code> attributes will.</p> <p>Leave the value empty to prevent all attributes of that attribute type from being saved:</p> <pre class="highlight-ruby" data-language="ruby">normal_attribute_whitelist []</pre> <p>For attributes that contain slashes (<code class="docutils literal">/</code>) within the attribute value, such as the <code class="docutils literal">filesystem</code> attribute <code class="docutils literal">'/dev/diskos2'</code>, use an array. For example:</p> <pre class="highlight-ruby" data-language="ruby">automatic_attribute_whitelist [['filesystem','/dev/diskos2']]</pre>   <h3 id="examples">Examples</h3> <p>The following examples are listed from low to high precedence.</p> <p><strong>Default attribute in /attributes/default.rb</strong></p> <pre class="highlight-ruby" data-language="ruby">default['apache']['dir'] = '/etc/apache2'</pre> <p><strong>Default attribute in node object in recipe</strong></p> <pre class="highlight-ruby" data-language="ruby">node.default['apache']['dir'] = '/etc/apache2'</pre> <p><strong>Default attribute in /environments/environment_name.rb</strong></p> <pre class="highlight-ruby" data-language="ruby">default_attributes({ 'apache' =&gt; {'dir' =&gt; '/etc/apache2'}})</pre> <p><strong>Default attribute in /roles/role_name.rb</strong></p> <pre class="highlight-ruby" data-language="ruby">default_attributes({ 'apache' =&gt; {'dir' =&gt; '/etc/apache2'}})</pre> <p><strong>Normal attribute set as a cookbook attribute</strong></p> <pre class="highlight-ruby" data-language="ruby">set['apache']['dir'] = '/etc/apache2'
normal['apache']['dir'] = '/etc/apache2'  #set is an alias of normal.</pre> <p><strong>Normal attribute set in a recipe</strong></p> <pre class="highlight-ruby" data-language="ruby">node.set['apache']['dir'] = '/etc/apache2'

node.normal['apache']['dir'] = '/etc/apache2' # Same as above
node['apache']['dir'] = '/etc/apache2'       # Same as above</pre> <p><strong>Override attribute in /attributes/default.rb</strong></p> <pre class="highlight-ruby" data-language="ruby">override['apache']['dir'] = '/etc/apache2'</pre> <p><strong>Override attribute in /roles/role_name.rb</strong></p> <pre class="highlight-ruby" data-language="ruby">override_attributes({ 'apache' =&gt; {'dir' =&gt; '/etc/apache2'}})</pre> <p><strong>Override attribute in /environments/environment_name.rb</strong></p> <pre class="highlight-ruby" data-language="ruby">override_attributes({ 'apache' =&gt; {'dir' =&gt; '/etc/apache2'}})</pre> <p><strong>Override attribute in a node object (from a recipe)</strong></p> <pre class="highlight-ruby" data-language="ruby">node.override['apache']['dir'] = '/etc/apache2'</pre> <p><strong>Ensure that a default attribute has precedence over other attributes</strong></p> <p>When a default attribute is set like this:</p> <pre class="highlight-ruby" data-language="ruby">default['attribute'] = 'value'</pre> <p>any value set by a role or an environment will replace it. To prevent this value from being replaced, use the <code class="docutils literal">force_default</code> attribute precedence:</p> <pre class="highlight-ruby" data-language="ruby">force_default['attribute'] = 'I will crush you, role or environment attribute'</pre> <p>or:</p> <pre class="highlight-ruby" data-language="ruby">default!['attribute'] = "The '!' means I win!"</pre> <p><strong>Ensure that an override attribute has precedence over other attributes</strong></p> <p>When an override attribute is set like this:</p> <pre class="highlight-ruby" data-language="ruby">override['attribute'] = 'value'</pre> <p>any value set by a role or an environment will replace it. To prevent this value from being replaced, use the <code class="docutils literal">force_override</code> attribute precedence:</p> <pre class="highlight-ruby" data-language="ruby">force_override['attribute'] = 'I will crush you, role or environment attribute'</pre> <p>or:</p> <pre class="highlight-ruby" data-language="ruby">override!['attribute'] = "The '!' means I win!"</pre>    <h2 id="change-attributes">Change Attributes</h2> <p>Starting with chef-client 12.0, attribute precedence levels may be</p> <ul class="simple"> <li>Removed for a specific, named attribute precedence level</li> <li>Removed for all attribute precedence levels</li> <li>Fully assigned attributes</li> </ul>  <h3 id="remove-precedence-level">Remove Precedence Level</h3> <p>A specific attribute precedence level for default, normal, and override attributes may be removed by using one of the following syntax patterns.</p> <p>For default attributes:</p> <ul class="simple"> <li><code class="docutils literal">node.rm_default('foo', 'bar')</code></li> </ul> <p>For normal attributes:</p> <ul class="simple"> <li><code class="docutils literal">node.rm_normal('foo', 'bar')</code></li> </ul> <p>For override attributes:</p> <ul class="simple"> <li><code class="docutils literal">node.rm_override('foo', 'bar')</code></li> </ul> <p>These patterns return the computed value of the key being deleted for the specified precedence level.</p>  <h4 id="id1">Examples</h4> <p>The following examples show how to remove a specific, named attribute precedence level.</p> <p><strong>Delete a default value when only default values exist</strong></p> <p>Given the following code structure under <code class="docutils literal">'foo'</code>:</p> <pre class="highlight-ruby" data-language="ruby">node.default['foo'] = {
  'bar' =&gt; {
    'baz' =&gt; 52,
    'thing' =&gt; 'stuff',
  },
  'bat' =&gt; {
    'things' =&gt; [5, 6],
  },
}</pre> <p>And some role attributes:</p> <pre class="highlight-ruby" data-language="ruby"># Please don't ever do this in real code :)
node.role_default['foo']['bar']['thing'] = 'otherstuff'</pre> <p>And a force attribute:</p> <pre class="highlight-ruby" data-language="ruby">node.force_default['foo']['bar']['thing'] = 'allthestuff'</pre> <p>When the default attribute precedence <code class="docutils literal">node['foo']['bar']</code> is removed:</p> <pre class="highlight-ruby" data-language="ruby">node.rm_default('foo', 'bar') #=&gt; {'baz' =&gt; 52, 'thing' =&gt; 'allthestuff'}</pre> <p>What is left under <code class="docutils literal">'foo'</code> is only <code class="docutils literal">'bat'</code>:</p> <pre class="highlight-ruby" data-language="ruby">node.attributes.combined_default['foo'] #=&gt; {'bat' =&gt; { 'things' =&gt; [5,6] } }</pre> <p><strong>Delete default without touching higher precedence attributes</strong></p> <p>Given the following code structure:</p> <pre class="highlight-ruby" data-language="ruby">node.default['foo'] = {
  'bar' =&gt; {
    'baz' =&gt; 52,
    'thing' =&gt; 'stuff',
  },
  'bat' =&gt; {
    'things' =&gt; [5, 6],
  },
}</pre> <p>And some role attributes:</p> <pre class="highlight-ruby" data-language="ruby"># Please don't ever do this in real code :)
node.role_default['foo']['bar']['thing'] = 'otherstuff'</pre> <p>And a force attribute:</p> <pre class="highlight-ruby" data-language="ruby">node.force_default['foo']['bar']['thing'] = 'allthestuff'</pre> <p>And also some override attributes:</p> <pre class="highlight-ruby" data-language="ruby">node.override['foo']['bar']['baz'] = 99</pre> <p>Same delete as before:</p> <pre class="highlight-ruby" data-language="ruby">node.rm_default('foo', 'bar') #=&gt; { 'baz' =&gt; 52, 'thing' =&gt; 'allthestuff' }</pre> <p>The other attribute precedence levels are unaffected:</p> <pre class="highlight-ruby" data-language="ruby">node.attributes.combined_override['foo'] #=&gt; { 'bar' =&gt; {'baz' =&gt; 99} }
node['foo'] #=&gt; { 'bar' =&gt; {'baz' =&gt; 99}, 'bat' =&gt; { 'things' =&gt; [5,6] }</pre> <p><strong>Delete override without touching lower precedence attributes</strong></p> <p>Given the following code structure, which has an override attribute:</p> <pre class="highlight-ruby" data-language="ruby">node.override['foo'] = {
  'bar' =&gt; {
    'baz' =&gt; 52,
    'thing' =&gt; 'stuff',
  },
  'bat' =&gt; {
    'things' =&gt; [5, 6],
  },
}</pre> <p>with a single default value:</p> <pre class="highlight-ruby" data-language="ruby">node.default['foo']['bar']['baz'] = 11</pre> <p>and a force at each attribute precedence:</p> <pre class="highlight-ruby" data-language="ruby">node.force_default['foo']['bar']['baz'] = 55
node.force_override['foo']['bar']['baz'] = 99</pre> <p>Delete the override:</p> <pre class="highlight-ruby" data-language="ruby">node.rm_override('foo', 'bar') #=&gt; { 'baz' =&gt; 99, 'thing' =&gt; 'stuff' }</pre> <p>The other attribute precedence levels are unaffected:</p> <pre class="highlight-ruby" data-language="ruby">node.attributes.combined_default['foo'] #=&gt; { 'bar' =&gt; {'baz' =&gt; 55} }</pre> <p><strong>Non-existent key deletes return nil</strong></p> <pre class="highlight-ruby" data-language="ruby">node.rm_default("no", "such", "thing") #=&gt; nil</pre>    <h3 id="remove-all-levels">Remove All Levels</h3> <p>All attribute precedence levels may be removed by using the following syntax pattern:</p> <ul class="simple"> <li><code class="docutils literal">node.rm('foo', 'bar')</code></li> </ul> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Using <code class="docutils literal">node['foo'].delete('bar')</code> will throw an exception that points to the new API.</p> </div>  <h4 id="id2">Examples</h4> <p>The following examples show how to remove all attribute precedence levels.</p> <p><strong>Delete all attribute precedence levels</strong></p> <p>Given the following code structure:</p> <pre class="highlight-ruby" data-language="ruby">node.default['foo'] = {
  'bar' =&gt; {
    'baz' =&gt; 52,
    'thing' =&gt; 'stuff',
  },
  'bat' =&gt; {
    'things' =&gt; [5, 6],
  },
}</pre> <p>With override attributes:</p> <pre class="highlight-ruby" data-language="ruby">node.override['foo']['bar']['baz'] = 999</pre> <p>Removing the <code class="docutils literal">'bar'</code> key returns the computed value:</p> <pre class="highlight-ruby" data-language="ruby">node.rm('foo', 'bar') #=&gt; {'baz' =&gt; 999, 'thing' =&gt; 'stuff'}</pre> <p>Looking at <code class="docutils literal">'foo'</code>, all that’s left is the <code class="docutils literal">'bat'</code> entry:</p> <pre class="highlight-ruby" data-language="ruby">node['foo'] #=&gt; {'bat' =&gt; { 'things' =&gt; [5,6] } }</pre> <p><strong>Non-existent key deletes return nil</strong></p> <pre class="highlight-ruby" data-language="ruby">node.rm_default("no", "such", "thing") #=&gt; nil</pre>    <h3 id="full-assignment">Full Assignment</h3> <p>Use <code class="docutils literal">!</code> to clear out the key for the named attribute precedence level, and then complete the write by using one of the following syntax patterns:</p> <ul class="simple"> <li><code class="docutils literal">node.default!['foo']['bar'] = {...}</code></li> <li><code class="docutils literal">node.force_default!['foo']['bar'] = {...}</code></li> <li><code class="docutils literal">node.normal!['foo']['bar'] = {...}</code></li> <li><code class="docutils literal">node.override!['foo']['bar'] = {...}</code></li> <li><code class="docutils literal">node.force_override!['foo']['bar'] = {...}</code></li> </ul>  <h4 id="id3">Examples</h4> <p>The following examples show how to remove all attribute precedence levels.</p> <p><strong>Just one component</strong></p> <p>Given the following code structure:</p> <pre class="highlight-ruby" data-language="ruby">node.default['foo']['bar'] = {'a' =&gt; 'b'}
node.default!['foo']['bar'] = {'c' =&gt; 'd'}</pre> <p>The <code class="docutils literal">'!'</code> caused the entire ‘bar’ key to be overwritten: .. code-block:: ruby</p> <blockquote> <div>node[‘foo’] #=&gt; {‘bar’ =&gt; {‘c’ =&gt; ‘d’}</div>
</blockquote> <p><strong>Multiple components; one “after”</strong></p> <p>Given the following code structure:</p> <pre class="highlight-ruby" data-language="ruby">node.default['foo']['bar'] = {'a' =&gt; 'b'}
# Please don't ever do this in real code :)
node.role_default['foo']['bar'] = {'c' =&gt; 'd'}
node.default!['foo']['bar'] = {'d' =&gt; 'e'}</pre> <p>The <code class="docutils literal">'!'</code> write overwrote the “cookbook-default” value of <code class="docutils literal">'bar'</code>, but since role data is later in the resolution list, it was unaffected:</p> <pre class="highlight-ruby" data-language="ruby">node['foo'] #=&gt; {'bar' =&gt; {'c' =&gt; 'd', 'd' =&gt; 'e'}</pre> <p><strong>Multiple components; all “before”</strong></p> <p>Given the following code structure:</p> <pre class="highlight-ruby" data-language="ruby">node.default['foo']['bar'] = {'a' =&gt; 'b'}
# Please don't ever do this in real code :)
node.role_default['foo']['bar'] = {'c' =&gt; 'd'}
node.force_default!['foo']['bar'] = {'d' =&gt; 'e'}</pre> <p>With <code class="docutils literal">force_default!</code> there is no other data under <code class="docutils literal">'bar'</code>:</p> <pre class="highlight-ruby" data-language="ruby">node['foo'] #=&gt; {'bar' =&gt; {'d' =&gt; 'e'}</pre> <p><strong>Multiple precedence levels</strong></p> <p>Given the following code structure:</p> <pre class="highlight-ruby" data-language="ruby">node.default['foo'] = {
  'bar' =&gt; {
    'baz' =&gt; 52,
    'thing' =&gt; 'stuff',
  },
  'bat' =&gt; {
   'things' =&gt; [5, 6],
  },
}</pre> <p>And some attributes:</p> <pre class="highlight-ruby" data-language="ruby"># Please don't ever do this in real code :)
node.role_default['foo']['bar']['baz'] = 55
node.force_default['foo']['bar']['baz'] = 66</pre> <p>And other precedence levels:</p> <pre class="highlight-ruby" data-language="ruby">node.normal['foo']['bar']['baz'] = 88
node.override['foo']['bar']['baz'] = 99</pre> <p>With a full assignment:</p> <pre class="highlight-ruby" data-language="ruby">node.default!['foo']['bar'] = {}</pre> <p>Role default and force default are left in default, plus other precedence levels:</p> <pre class="highlight-ruby" data-language="ruby">node.attributes.combined_default['foo'] #=&gt; {'bar' =&gt; {'baz' =&gt; 66}, 'bat'=&gt;{'things'=&gt;[5, 6]}}
node.attributes.normal['foo'] #=&gt; {'bar' =&gt; {'baz' =&gt; 88}}
node.attributes.combined_override['foo'] #=&gt; {'bar' =&gt; {'baz' =&gt; 99}}
node['foo']['bar'] #=&gt; {'baz' =&gt; 99}</pre> <p>If <code class="docutils literal">force_default!</code> is written:</p> <pre class="highlight-ruby" data-language="ruby">node.force_default!['foo']['bar'] = {}</pre> <p>the difference is:</p> <pre class="highlight-ruby" data-language="ruby">node.attributes.combined_default['foo'] #=&gt; {'bat'=&gt;{'things'=&gt;[5, 6]}, 'bar' =&gt; {}}
node.attributes.normal['foo'] #=&gt; {'bar' =&gt; {'baz' =&gt; 88}}
node.attributes.combined_override['foo'] #=&gt; {'bar' =&gt; {'baz' =&gt; 99}}
node['foo']['bar'] #=&gt; {'baz' =&gt; 99}</pre>     <h2 id="about-deep-merge">About Deep Merge</h2> <p>Attributes are typically defined in cookbooks, recipes, roles, and environments. These attributes are rolled-up to the node level during a chef-client run. A recipe can store attribute values using a multi-level Hash or array.</p> <p>For example, a group of attributes for web servers might be:</p> <pre class="highlight-ruby" data-language="ruby">override_attributes(
  :apache =&gt; {
    :listen_ports =&gt; [ 80 ],
    :prefork =&gt; {
      :startservers =&gt; 20,
      :minspareservers =&gt; 20,
      :maxspareservers =&gt; 40
    }
  }
)</pre> <p>But what if all of the web servers are not the same? What if some of the web servers required a single attribute to have a different value? You could store these settings in two locations, once just like the preceding example and once just like the following:</p> <pre class="highlight-ruby" data-language="ruby">override_attributes(
  :apache =&gt; {
    :listen_ports =&gt; [ 80 ],
    :prefork =&gt; {
      :startservers =&gt; 30,
      :minspareservers =&gt; 20,
      :maxspareservers =&gt; 40
    }
  }
)</pre> <p>But that is not very efficient, especially because most of them are identical. The deep merge capabilities of the chef-client allows attributes to be layered across cookbooks, recipes, roles, and environments. This allows an attribute to be reused across nodes, making use of default attributes set at the cookbook level, but also providing a way for certain attributes (with a higher attribute precedence) to be applied only when they are supposed to be.</p> <p>For example, a role named <code class="docutils literal">baseline.rb</code>:</p> <pre class="highlight-ruby" data-language="ruby">name "baseline"
description "The most basic role for all configurations"
run_list "recipe[baseline]"

override_attributes(
  :apache =&gt; {
    :listen_ports =&gt; [ 80 ],
    :prefork =&gt; {
      :startservers =&gt; 20,
      :minspareservers =&gt; 20,
      :maxspareservers =&gt; 40
    }
  }
)</pre> <p>and then a role named <code class="docutils literal">web.rb</code>:</p> <pre class="highlight-ruby" data-language="ruby">name 'web'
description 'Web server config'
run_list 'role[baseline]'

override_attributes(
  :apache =&gt; {
    :prefork =&gt; {
      :startservers =&gt; 30
    }
  }
)</pre> <p>Both of these files are similar. They share the same structure. When an attribute is of the same type of data, such as a hash or an array, that data is merged when the attribute precedence levels are the same and is replaced when the attribute precedence levels are different.</p> <p>For example, the <code class="docutils literal">web.rb</code> references the <code class="docutils literal">baseline.rb</code> role. The <code class="docutils literal">web.rb</code> file only provides a value for one attribute: <code class="docutils literal">:startservers</code>. When the chef-client compares these attributes, the deep merge feature will ensure that <code class="docutils literal">:startservers</code> (and its value of <code class="docutils literal">30</code>) will be applied to any node for which the <code class="docutils literal">web.rb</code> attribute structure should be applied.</p> <p>This approach will allow a recipe like this:</p> <pre class="highlight-ruby" data-language="ruby">include_recipe 'apache2'
Chef::Log.info(node['apache']['prefork'].to_hash)</pre> <p>and a <code class="docutils literal">run_list</code> like this:</p> <pre class="highlight-ruby" data-language="ruby">run_list/web.json
{
  "run_list": [ "role[web]" ]
}</pre> <p>to produce results like this:</p> <pre class="highlight-ruby" data-language="ruby">[Tue, 16 Aug 2011 14:44:26 -0700] INFO:
         {
           "startservers"=&gt;30,
           "minspareservers"=&gt;20,
           "maxspareservers"=&gt;40,
           "serverlimit"=&gt;400,
           "maxclients"=&gt;400,
           "maxrequestsperchild"=&gt;10000
         }</pre> <p>Even though the <code class="docutils literal">web.rb</code> file does not contain attributes and values for <code class="docutils literal">minspareservers</code>, <code class="docutils literal">maxspareservers</code>, <code class="docutils literal">serverlimit</code>, <code class="docutils literal">maxclients</code>, and <code class="docutils literal">maxrequestsperchild</code>, the deep merge capabilities pulled them in.</p> <p>The following sections show how the logic works for using deep merge to perform substitutions and additions of attributes.</p>  <h3 id="substitution">Substitution</h3> <p>The following examples show how the logic works for substituting an existing string using a hash:</p> <pre class="highlight-python" data-language="python">role_or_environment 1 { :x =&gt; '1', :y =&gt; '2' }
+
role_or_environment 2 { :y =&gt; '3' }
=
{ :x =&gt; '1', :y =&gt; '3' }</pre> <p>For substituting an existing boolean using a hash:</p> <pre class="highlight-python" data-language="python">role_or_environment 1 { :x =&gt; true, :y =&gt; false }
+
role_or_environment 2 { :y =&gt; true }
=
{ :x =&gt; true, :y =&gt; true }</pre> <p>For substituting an array with a hash:</p> <pre class="highlight-python" data-language="python">role_or_environment 1 [ '1', '2', '3' ]
+
role_or_environment 2 { :x =&gt; '1' , :y =&gt; '2' }
=
{ :x =&gt; '1', :y =&gt; '2' }</pre> <p>When items cannot be merged through substitution, the original data is overwritten.</p>   <h3 id="addition">Addition</h3> <p>The following examples show how the logic works for adding a string using a hash:</p> <pre class="highlight-python" data-language="python">role_or_environment 1 { :x =&gt; '1', :y =&gt; '2' }
+
role_or_environment 2 { :z =&gt; '3' }
=
{ :x =&gt; '1', :y =&gt; '2', :z =&gt; '3' }</pre> <p>For adding a string using an array:</p> <pre class="highlight-python" data-language="python">role_or_environment 1 [ '1', '2' ]
+
role_or_environment 2 [ '3' ]
=
[ '1', '2', '3' ]</pre> <p>For adding a string using a multi-level hash:</p> <pre class="highlight-python" data-language="python">role_or_environment 1 { :x =&gt; { :y =&gt; '2' } }
+
role_or_environment 2 { :x =&gt; { :z =&gt; '3' } }
=
{ :x =&gt; { :y =&gt; '2', :z =&gt; '3' } }</pre> <p>For adding a string using a multi-level array:</p> <pre class="highlight-python" data-language="python">role_or_environment 1 [ [ 1, 2 ] ]
+
role_or_environment 2 [ [ 3 ] ]
=
[ [ 1, 2 ], [ 3 ] ]</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef™ Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs-archive.chef.io/release/12-13/attributes.html" class="_attribution-link">https://docs-archive.chef.io/release/12-13/attributes.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
