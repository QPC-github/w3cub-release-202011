
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Dnf – Manages Packages With the Dnf Package Manager - Ansible 2.10 - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="ansible, builtin, dnf, –, manages, packages, with, package, manager, ansible~2.10">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.10/collections/ansible/builtin/dnf_module.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/ansible~2.10.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.10/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.10</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="ansible-builtin-dnf-manages-packages-with-the-dnf-package-manager">ansible.builtin.dnf – Manages packages with the dnf package manager</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of <code>ansible-base</code> and included in all Ansible installations. In most cases, you can use the short module name dnf even without specifying the <code>collections:</code> keyword. Despite that, we recommend you use the FQCN for easy linking to the module documentation and to avoid conflicting with other collections that may have the same module name.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.9: </span>of ansible.builtin</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Installs, upgrade, removes, and lists packages and groups with the <em>dnf</em> package manager.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.6</li> <li>python-dnf</li> <li>for the autoremove option you need dnf &gt;= 2.0.1”</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>allow_downgrade</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Specify if the named package and version is allowed to downgrade a maybe already installed higher version of that package. Note that setting allow_downgrade=True can make this module behave in a non-idempotent way. The task could end up with a set of packages that does not match the complete list of specified packages to install (because dependencies between the downgraded package and others can cause changes to the packages which were in the earlier transaction).</div> </td> </tr> <tr> <td colspan="1">  <b>allowerasing</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.10 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code> it allows erasing of installed packages to resolve dependencies.</div> </td> </tr> <tr> <td colspan="1">  <b>autoremove</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.4 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, removes all "leaf" packages from the system that were originally installed as dependencies of user-installed packages but which are no longer required by any such package. Should be used alone or when state is <em>absent</em>
</div> </td> </tr> <tr> <td colspan="1">  <b>bugfix</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If set to <code>yes</code>, and <code>state=latest</code> then only installs updates that have been marked bugfix related.</div> </td> </tr> <tr> <td colspan="1">  <b>conf_file</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The remote dnf configuration file to use for the transaction.</div> </td> </tr> <tr> <td colspan="1">  <b>disable_excludes</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> </td> <td> <div>Disable the excludes defined in DNF config files.</div> <div>If set to <code>all</code>, disables all excludes.</div> <div>If set to <code>main</code>, disable excludes defined in [main] in dnf.conf.</div> <div>If set to <code>repoid</code>, disable excludes defined for given repo id.</div> </td> </tr> <tr> <td colspan="1">  <b>disable_gpg_check</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Whether to disable the GPG checking of signatures of packages being installed. Has an effect only if state is <em>present</em> or <em>latest</em>.</div> <div>This setting affects packages installed from a repository as well as "local" packages installed from the filesystem or a URL.</div> </td> </tr> <tr> <td colspan="1">  <b>disable_plugin</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> </td> <td> <div>
<em>Plugin</em> name to disable for the install/update operation. The disabled plugins will not persist beyond the transaction.</div> </td> </tr> <tr> <td colspan="1">  <b>disablerepo</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>
<em>Repoid</em> of repositories to disable for the install/update operation. These repos will not persist beyond the transaction. When specifying multiple repos, separate them with a ",".</div> </td> </tr> <tr> <td colspan="1">  <b>download_dir</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8 of ansible.builtin </div> </td> <td> </td> <td> <div>Specifies an alternate directory to store packages.</div> <div>Has an effect only if <em>download_only</em> is specified.</div> </td> </tr> <tr> <td colspan="1">  <b>download_only</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Only download the packages, do not install them.</div> </td> </tr> <tr> <td colspan="1">  <b>enable_plugin</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> </td> <td> <div>
<em>Plugin</em> name to enable for the install/update operation. The enabled plugin will not persist beyond the transaction.</div> </td> </tr> <tr> <td colspan="1">  <b>enablerepo</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>
<em>Repoid</em> of repositories to enable for the install/update operation. These repos will not persist beyond the transaction. When specifying multiple repos, separate them with a ",".</div> </td> </tr> <tr> <td colspan="1">  <b>exclude</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> </td> <td> <div>Package name(s) to exclude when state=present, or latest. This can be a list or a comma separated string.</div> </td> </tr> <tr> <td colspan="1">  <b>install_repoquery</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>This is effectively a no-op in DNF as it is not needed with DNF, but is an accepted parameter for feature parity/compatibility with the <em>yum</em> module.</div> </td> </tr> <tr> <td colspan="1">  <b>install_weak_deps</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Will also install all packages linked by a weak dependency relation.</div> </td> </tr> <tr> <td colspan="1">  <b>installroot</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.3 of ansible.builtin </div> </td> <td> <b>Default:</b><br><div style="color: blue">"/"</div> </td> <td> <div>Specifies an alternative installroot, relative to which all packages will be installed.</div> </td> </tr> <tr> <td colspan="1">  <b>list</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>Various (non-idempotent) commands for usage with <code>/usr/bin/ansible</code> and <em>not</em> playbooks. See examples.</div> </td> </tr> <tr> <td colspan="1">  <b>lock_timeout</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8 of ansible.builtin </div> </td> <td> <b>Default:</b><br><div style="color: blue">30</div> </td> <td> <div>Amount of time to wait for the dnf lockfile to be freed.</div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>A package name or package specifier with version, like <code>name-1.0</code>. When using state=latest, this can be '*' which means run: dnf -y update. You can also pass a url or a local path to a rpm file. To operate on several packages this can accept a comma separated string of packages or a list of packages.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: pkg</div> </td> </tr> <tr> <td colspan="1">  <b>releasever</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.6 of ansible.builtin </div> </td> <td> </td> <td> <div>Specifies an alternative release from which all packages will be installed.</div> </td> </tr> <tr> <td colspan="1">  <b>security</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If set to <code>yes</code>, and <code>state=latest</code> then only installs updates that have been marked security related.</div> </td> </tr> <tr> <td colspan="1">  <b>skip_broken</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Skip packages with broken dependencies(devsolve) and are causing problems.</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>absent</li> <li>present</li> <li>installed</li> <li>removed</li> <li>latest</li> </ul> </td> <td> <div>Whether to install (<code>present</code>, <code>latest</code>), or remove (<code>absent</code>) a package.</div> <div>Default is <code>None</code>, however in effect the default action is <code>present</code> unless the <code>autoremove</code> option is enabled for this module, then <code>absent</code> is inferred.</div> </td> </tr> <tr> <td colspan="1">  <b>update_cache</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Force dnf to check if cache is out of date and redownload if needed. Has an effect only if state is <em>present</em> or <em>latest</em>.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: expire-cache</div> </td> </tr> <tr> <td colspan="1">  <b>update_only</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>When using latest, only update installed packages. Do not install packages.</div> <div>Has an effect only if state is <em>latest</em>
</div> </td> </tr> <tr> <td colspan="1">  <b>validate_certs</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7 of ansible.builtin </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>This only applies if using a https url as the source of the rpm. e.g. for localinstall. If set to <code>no</code>, the SSL certificates will not be validated.</div> <div>This should only set to <code>no</code> used on personally controlled sites using self-signed certificates as it avoids verifying the source site.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>When used with a <code>loop:</code> each package will be processed individually, it is much more efficient to pass the list directly to the <code>name</code> option.</li> <li>Group removal doesn’t work if the group was installed with Ansible because upstream dnf’s API doesn’t properly mark groups as installed, therefore upon removal the module is unable to detect that the group is installed (<a class="reference external" href="https://bugzilla.redhat.com/show_bug.cgi?id=1620324">https://bugzilla.redhat.com/show_bug.cgi?id=1620324</a>)</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml">- name: Install the latest version of Apache
  dnf:
    name: httpd
    state: latest

- name: Install the latest version of Apache and MariaDB
  dnf:
    name:
      - httpd
      - mariadb-server
    state: latest

- name: Remove the Apache package
  dnf:
    name: httpd
    state: absent

- name: Install the latest version of Apache from the testing repo
  dnf:
    name: httpd
    enablerepo: testing
    state: present

- name: Upgrade all packages
  dnf:
    name: "*"
    state: latest

- name: Install the nginx rpm from a remote repo
  dnf:
    name: 'http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm'
    state: present

- name: Install nginx rpm from a local file
  dnf:
    name: /usr/local/src/nginx-release-centos-6-0.el6.ngx.noarch.rpm
    state: present

- name: Install the 'Development tools' package group
  dnf:
    name: '@Development tools'
    state: present

- name: Autoremove unneeded packages installed as dependencies
  dnf:
    autoremove: yes

- name: Uninstall httpd but keep its dependencies
  dnf:
    name: httpd
    state: absent
    autoremove: no

- name: Install a modularity appstream with defined stream and profile
  dnf:
    name: '@postgresql:9.6/client'
    state: present

- name: Install a modularity appstream with defined stream
  dnf:
    name: '@postgresql:9.6'
    state: present

- name: Install a modularity appstream with defined profile
  dnf:
    name: '@postgresql/client'
    state: present
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Igor Gnatenko (@ignatenkobrain) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#365f101502000d5158574253585d59101502000d5444575f58101505010d101503040d1015020e0d515b575f5a101502000d55595b">i<span>.</span>gnatenko<span>.</span>brain<span>@</span>gmail<span>.</span>com</a>&gt;</li> <li>Cristian van Ee (@DJMuggs) &lt;cristian at cvee.org&gt;</li> <li>Berend De Schouwer (@berenddeschouwer)</li> <li>Adam Miller (@maxamillion) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#82e3e6efebeeeee7f0a4a1b1b5b9a4a1b7b0b9a4a1b6bab9f0e7e6eae3f6a4a1b6b4b9e1edef">admiller<span>@</span>redhat<span>.</span>com</a>&gt;</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2019 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.10/collections/ansible/builtin/dnf_module.html" class="_attribution-link">https://docs.ansible.com/ansible/2.10/collections/ansible/builtin/dnf_module.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
