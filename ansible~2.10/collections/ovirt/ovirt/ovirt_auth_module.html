
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Ovirt_auth – Module to Manage Authentication to oVirt&#47;RHV - Ansible 2.10 - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="ovirt, auth, –, module, manage, authentication, rhv, ansible, ansible~2.10">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.10/collections/ovirt/ovirt/ovirt_auth_module.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/ansible~2.10.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.10/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.10</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="ovirt-ovirt-ovirt-auth-module-to-manage-authentication-to-ovirt-rhv">ovirt.ovirt.ovirt_auth – Module to manage authentication to oVirt/RHV</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/ovirt/ovirt">ovirt.ovirt collection</a>.</p> <p>To install it use: <code>ansible-galaxy collection install ovirt.ovirt</code>.</p> <p>To use it in a playbook, specify: <code>ovirt.ovirt.ovirt_auth</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of ovirt.ovirt</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module authenticates to oVirt/RHV engine and creates SSO token, which should be later used in all other oVirt/RHV modules, so all modules don’t need to perform login and logout. This module returns an Ansible fact called <em>ovirt_auth</em>. Every module can use this fact as <code>auth</code> parameter, to perform authentication.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.7</li> <li>ovirt-engine-sdk-python &gt;= 4.4.0</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>ca_file</b>  <div style="font-size: small"> <span style="color: purple">path</span> </div> </td> <td> </td> <td> <div>A PEM file containing the trusted CA certificates. The certificate presented by the server will be verified using these CA certificates. If <code>ca_file</code> parameter is not set, system wide CA certificate store is used. Default value is set by <em>OVIRT_CAFILE</em> environment variable.</div> </td> </tr> <tr> <td colspan="1">  <b>compress</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>A boolean flag indicating if the SDK should ask the server to send compressed responses. The default is <em>True</em>. Note that this is a hint for the server, and that it may return uncompressed data even when this parameter is set to <em>True</em>.</div> </td> </tr> <tr> <td colspan="1">  <b>headers</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> </td> <td> </td> <td> <div>A dictionary of HTTP headers to be added to each API call.</div> </td> </tr> <tr> <td colspan="1">  <b>hostname</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>A string containing the hostname of the server. For example: <em>server.example.com</em>. Default value is set by <em>OVIRT_HOSTNAME</em> environment variable.</div> <div>Either <code>url</code> or <code>hostname</code> is required.</div> </td> </tr> <tr> <td colspan="1">  <b>insecure</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>A boolean flag that indicates if the server TLS certificate and host name should be checked.</div> </td> </tr> <tr> <td colspan="1">  <b>kerberos</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>A boolean flag indicating if Kerberos authentication should be used instead of the default basic authentication.</div> </td> </tr> <tr> <td colspan="1">  <b>ovirt_auth</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> </td> <td> </td> <td> <div>Previous run of the ovirt_auth used with <code>state</code> absent</div> <div>Closes connection with the engine.</div> </td> </tr> <tr> <td colspan="1">  <b>password</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The password of the user. Default value is set by <em>OVIRT_PASSWORD</em> environment variable.</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>Specifies if a token should be created or revoked.</div> </td> </tr> <tr> <td colspan="1">  <b>timeout</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The maximum total time to wait for the response, in seconds. A value of zero (the default) means wait forever. If the timeout expires before the response is received an exception will be raised.</div> </td> </tr> <tr> <td colspan="1">  <b>token</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>SSO token to be used instead of login with username/password. Default value is set by <em>OVIRT_TOKEN</em> environment variable.</div> </td> </tr> <tr> <td colspan="1">  <b>url</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>A string containing the API URL of the server. For example: <em>https://server.example.com/ovirt-engine/api</em>. Default value is set by <em>OVIRT_URL</em> environment variable.</div> <div>Either <code>url</code> or <code>hostname</code> is required.</div> </td> </tr> <tr> <td colspan="1">  <b>username</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The name of the user. For example: <em>admin@internal</em> Default value is set by <em>OVIRT_USERNAME</em> environment variable.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Everytime you use ovirt_auth module to obtain ticket, you need to also revoke the ticket, when you no longer need it, otherwise the ticket would be revoked by engine when it expires. For an example of how to achieve that, please take a look at <em>examples</em> section.</li> <li>In order to use this module you have to install oVirt/RHV Python SDK. To ensure it’s installed with correct version you can create the following task: <em>pip: name=ovirt-engine-sdk-python version=4.4.0</em>
</li> <li>Note that in oVirt/RHV 4.1 if you want to use a user which is not administrator you must enable the <em>ENGINE_API_FILTER_BY_DEFAULT</em> variable in engine. In oVirt/RHV 4.2 and later it’s enabled by default.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml">  - block:
       # Create a vault with `ovirt_password` variable which store your
       # oVirt/RHV user's password, and include that yaml file with variable:
       - ansible.builtin.include_vars: ovirt_password.yml

       - name: Obtain SSO token with using username/password credentials
         ovirt.ovirt.ovirt_auth:
           url: https://ovirt.example.com/ovirt-engine/api
           username: admin@internal
           ca_file: ca.pem
           password: "{{ ovirt_password }}"

       # Previous task generated I(ovirt_auth) fact, which you can later use
       # in different modules as follows:
       - ovirt.ovirt.ovirt_vm:
           auth: "{{ ovirt_auth }}"
           state: absent
           name: myvm

    always:
      - name: Always revoke the SSO token
        ovirt.ovirt.ovirt_auth:
          state: absent
          ovirt_auth: "{{ ovirt_auth }}"

# When user will set following environment variables:
#   OVIRT_URL = https://fqdn/ovirt-engine/api
#   OVIRT_USERNAME = admin@internal
#   OVIRT_PASSWORD = the_password
# User can login the oVirt using environment variable instead of variables
# in yaml file.
# This is mainly useful when using Ansible Tower or AWX, as it will work
# for Red Hat Virtualization credentials type.
  - name: Obtain SSO token
    ovirt_auth:
      state: present
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="2">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="2">  <b>ovirt_auth</b>  <div style="font-size: small"> <span style="color: purple">complex</span> </div> </td> <td>success</td> <td> <div>Authentication facts, needed to perform authentication to oVirt/RHV.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>ca_file</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>success</td> <td> <div>CA file, which is used to verify SSL/TLS connection.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">ca.pem</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>compress</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td>success</td> <td> <div>Flag indicating if compression is used for connection.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">True</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>headers</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> </td> <td>success</td> <td> <div>Dictionary of HTTP headers to be added to each API call.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>insecure</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td>success</td> <td> <div>Flag indicating if insecure connection is used.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>kerberos</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td>success</td> <td> <div>Flag indicating if kerberos is used for authentication.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>timeout</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td>success</td> <td> <div>Number of seconds to wait for response.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>token</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>success</td> <td> <div>SSO token which is used for connection to oVirt/RHV engine.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">kdfVWp9ZgeewBXV-iq3Js1-xQJZPSEQ334FLb3eksoEPRaab07DhZ8ED8ghz9lJd-MQ2GqtRIeqhvhCkrUWQPw</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>url</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>success</td> <td> <div>URL of the oVirt/RHV engine API endpoint.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">https://ovirt.example.com/ovirt-engine/api</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Ondra Machacek (@machacekondra)</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2019 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.10/collections/ovirt/ovirt/ovirt_auth_module.html" class="_attribution-link">https://docs.ansible.com/ansible/2.10/collections/ovirt/ovirt/ovirt_auth_module.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
