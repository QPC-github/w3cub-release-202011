
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Gce_net – Create&#47;destroy GCE Networks and Firewall Rules - Ansible 2.10 - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="community, general, gce, net, –, create, destroy, networks, and, firewall, rules, ansible, ansible~2.10">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.10/collections/community/general/gce_net_module.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/ansible~2.10.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.10/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.10</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="community-general-gce-net-create-destroy-gce-networks-and-firewall-rules">community.general.gce_net – create/destroy GCE networks and firewall rules</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a>.</p> <p>To install it use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.gce_net</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module can create and destroy Google Compute Engine networks and firewall rules <a class="reference external" href="https://cloud.google.com/compute/docs/networking">https://cloud.google.com/compute/docs/networking</a>. The <em>name</em> parameter is reserved for referencing a network while the <em>fwname</em> parameter is used to reference firewall rules. IPv4 Address ranges must be specified using the CIDR <a class="reference external" href="http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing</a> format. Full install/configuration instructions for the gce* modules can be found in the comments of ansible/test/gce_tests.py.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.6</li> <li>apache-libcloud &gt;= 0.13.3, &gt;= 0.17.0 if using JSON credentials</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>allowed</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>the protocol:ports to allow (<em>tcp:80</em> or <em>tcp:80,443</em> or <em>tcp:80-800;udp:1-25</em>) this parameter is mandatory when creating or updating a firewall rule</div> </td> </tr> <tr> <td colspan="1">  <b>credentials_file</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>path to the JSON file associated with the service account email</div> </td> </tr> <tr> <td colspan="1">  <b>fwname</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>name of the firewall rule</div> <div style="font-size: small; color: darkgreen">
<br>aliases: fwrule</div> </td> </tr> <tr> <td colspan="1">  <b>ipv4_range</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>the IPv4 address range in CIDR notation for the network this parameter is not mandatory when you specified existing network in name parameter, but when you create new network, this parameter is mandatory</div> <div style="font-size: small; color: darkgreen">
<br>aliases: cidr</div> </td> </tr> <tr> <td colspan="1">  <b>mode</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>legacy</b> ←</div></li> <li>auto</li> <li>custom</li> </ul> </td> <td> <div>network mode for Google Cloud <code>legacy</code> indicates a network with an IP address range; <code>auto</code> automatically generates subnetworks in different regions; <code>custom</code> uses networks to group subnets of user specified IP address ranges https://cloud.google.com/compute/docs/networking#network_types</div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>name of the network</div> </td> </tr> <tr> <td colspan="1">  <b>pem_file</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>path to the pem file associated with the service account email This option is deprecated. Use <code>credentials_file</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>project_id</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>your GCE project ID</div> </td> </tr> <tr> <td colspan="1">  <b>service_account_email</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>service account email</div> </td> </tr> <tr> <td colspan="1">  <b>src_range</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <b>Default:</b><br><div style="color: blue">[]</div> </td> <td> <div>the source IPv4 address range in CIDR notation</div> <div style="font-size: small; color: darkgreen">
<br>aliases: src_cidr</div> </td> </tr> <tr> <td colspan="1">  <b>src_tags</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <b>Default:</b><br><div style="color: blue">[]</div> </td> <td> <div>the source instance tags for creating a firewall rule</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>active</li> <li><div style="color: blue">
<b>present</b> ←</div></li> <li>absent</li> <li>deleted</li> </ul> </td> <td> <div>desired state of the network or firewall</div> </td> </tr> <tr> <td colspan="1">  <b>subnet_desc</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>description of subnet to create</div> </td> </tr> <tr> <td colspan="1">  <b>subnet_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>name of subnet to create</div> </td> </tr> <tr> <td colspan="1">  <b>subnet_region</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>region of subnet to create</div> </td> </tr> <tr> <td colspan="1">  <b>target_tags</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <b>Default:</b><br><div style="color: blue">[]</div> </td> <td> <div>the target instance tags for creating a firewall rule</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml"># Create a 'legacy' Network
- name: Create Legacy Network
  community.general.gce_net:
    name: legacynet
    ipv4_range: '10.24.17.0/24'
    mode: legacy
    state: present

# Create an 'auto' Network
- name: Create Auto Network
  community.general.gce_net:
    name: autonet
    mode: auto
    state: present

# Create a 'custom' Network
- name: Create Custom Network
  community.general.gce_net:
    name: customnet
    mode: custom
    subnet_name: "customsubnet"
    subnet_region: us-east1
    ipv4_range: '10.240.16.0/24'
    state: "present"

# Create Firewall Rule with Source Tags
- name: Create Firewall Rule w/Source Tags
  community.general.gce_net:
    name: default
    fwname: "my-firewall-rule"
    allowed: tcp:80
    state: "present"
    src_tags: "foo,bar"

# Create Firewall Rule with Source Range
- name: Create Firewall Rule w/Source Range
  community.general.gce_net:
    name: default
    fwname: "my-firewall-rule"
    allowed: tcp:80
    state: "present"
    src_range: ['10.1.1.1/32']

# Create Custom Subnetwork
- name: Create Custom Subnetwork
  community.general.gce_net:
    name: privatenet
    mode: custom
    subnet_name: subnet_example
    subnet_region: us-central1
    ipv4_range: '10.0.0.0/16'
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>allowed</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>When specified</td> <td> <div>Rules (ports and protocols) specified by this firewall rule.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">tcp:80;icmp</div> </td> </tr> <tr> <td colspan="1">  <b>fwname</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>When specified</td> <td> <div>Name of the firewall rule.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">my-fwname</div> </td> </tr> <tr> <td colspan="1">  <b>ipv4_range</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when specified or when a subnetwork is created</td> <td> <div>IPv4 range of the specified network or subnetwork.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">10.0.0.0/16</div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>always</td> <td> <div>Name of the network.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">my-network</div> </td> </tr> <tr> <td colspan="1">  <b>src_range</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td>when specified</td> <td> <div>IP address blocks a firewall rule applies to.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">['10.1.1.12/8']</div> </td> </tr> <tr> <td colspan="1">  <b>src_tags</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td>when specified while creating a firewall rule</td> <td> <div>Instance Tags firewall rule applies to.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">['foo', 'bar']</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>always</td> <td> <div>State of the item operated on.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">present</div> </td> </tr> <tr> <td colspan="1">  <b>subnet_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when specified or when a subnetwork is created</td> <td> <div>Name of the subnetwork.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">my-subnetwork</div> </td> </tr> <tr> <td colspan="1">  <b>subnet_region</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when specified or when a subnetwork is created</td> <td> <div>Region of the specified subnet.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">us-east1</div> </td> </tr> <tr> <td colspan="1">  <b>target_tags</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td>when specified while creating a firewall rule</td> <td> <div>Instance Tags with these tags receive traffic allowed by firewall rule.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">['foo', 'bar']</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Eric Johnson (@erjohnso) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#a4c1d6cecbcccad7cb828797939f828791969f8287909c9fc3cbcbc3c8c1828790929fc7cbc9">erjohnso<span>@</span>google<span>.</span>com</a>&gt;, Tom Melendez (@supertom) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#06757376637472696b202535313d202533343d2025323e3d616969616a63202532303d65696b">supertom<span>@</span>google<span>.</span>com</a>&gt;</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2019 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.10/collections/community/general/gce_net_module.html" class="_attribution-link">https://docs.ansible.com/ansible/2.10/collections/community/general/gce_net_module.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
