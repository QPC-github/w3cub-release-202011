
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Na_ontap_volume – NetApp ONTAP Manage Volumes - Ansible 2.10 - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="netapp, ontap, na, volume, –, manage, volumes, ansible, ansible~2.10">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.10/collections/netapp/ontap/na_ontap_volume_module.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/ansible~2.10.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.10/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.10</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="netapp-ontap-na-ontap-volume-netapp-ontap-manage-volumes">netapp.ontap.na_ontap_volume – NetApp ONTAP manage volumes.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/netapp/ontap">netapp.ontap collection</a>.</p> <p>To install it use: <code>ansible-galaxy collection install netapp.ontap</code>.</p> <p>To use it in a playbook, specify: <code>netapp.ontap.na_ontap_volume</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.6.0: </span>of netapp.ontap</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Create or destroy or modify volumes on NetApp ONTAP.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>A physical or virtual clustered Data ONTAP system. The modules support Data ONTAP 9.1 and onward.</li> <li>REST support requires ONTAP 9.6 or later.</li> <li>Ansible 2.6</li> <li>Ansible 2.9 or later is strongly recommended as it enables the new collection delivery system.</li> <li>Python2 netapp-lib (2017.10.30) or later. Install using ‘pip install netapp-lib’</li> <li>Python3 netapp-lib (2018.11.13) or later. Install using ‘pip install netapp-lib’</li> <li>netapp-lib 2020.3.12 is strongly recommended as it provides better error reporting for connection issues.</li> <li>To enable http on the cluster you must run the following commands ‘set -privilege advanced;’ ‘system services web modify -http-enabled true;’</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>aggr_list</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> </td> <td> <div>an array of names of aggregates to be used for FlexGroup constituents.</div> </td> </tr> <tr> <td colspan="1">  <b>aggr_list_multiplier</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> </td> <td> <div>The number of times to iterate over the aggregates listed with the aggr_list parameter when creating a FlexGroup.</div> </td> </tr> <tr> <td colspan="1">  <b>aggregate_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The name of the aggregate the flexvol should exist on.</div> <div>Required when <code>state=present</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>atime_update</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>This is an advanced option, the default is True.</div> <div>If false, prevent the update of inode access times when a file is read.</div> <div>This value is useful for volumes with extremely high read traffic, since it prevents writes to the inode file for the volume from contending with reads from other files.</div> <div>This field should be used carefully.</div> <div>That is, use this field when you know in advance that the correct access time for inodes will not be needed for files on that volume.</div> </td> </tr> <tr> <td colspan="1">  <b>auto_provision_as</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>flexgroup</li> </ul> </td> <td> <div>Automatically provision a FlexGroup volume.</div> </td> </tr> <tr> <td colspan="1">  <b>auto_remap_luns</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.6.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Flag to control automatic map of LUNs.</div> </td> </tr> <tr> <td colspan="1">  <b>cert_filepath</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.6.0 of netapp.ontap </div> </td> <td> </td> <td> <div>path to SSL client cert file (.pem).</div> <div>not supported with python 2.6.</div> </td> </tr> <tr> <td colspan="1">  <b>check_interval</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.6.0 of netapp.ontap </div> </td> <td> <b>Default:</b><br><div style="color: blue">30</div> </td> <td> <div>The amount of time in seconds to wait between checks of a volume to see if it has moved successfully.</div> </td> </tr> <tr> <td colspan="1">  <b>comment</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.9.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Sets a comment associated with the volume.</div> </td> </tr> <tr> <td colspan="1">  <b>cutover_action</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.5.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>abort_on_failure</li> <li>defer_on_failure</li> <li>force</li> <li>wait</li> </ul> </td> <td> <div>Specifies the action to be taken for cutover.</div> <div>Possible values are 'abort_on_failure', 'defer_on_failure', 'force' and 'wait'. Default is 'defer_on_failure'.</div> </td> </tr> <tr> <td colspan="1">  <b>efficiency_policy</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Allows a storage efficiency policy to be set on volume creation.</div> </td> </tr> <tr> <td colspan="1">  <b>encrypt</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Whether or not to enable Volume Encryption.</div> </td> </tr> <tr> <td colspan="1">  <b>feature_flags</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.5.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Enable or disable a new feature.</div> <div>This can be used to enable an experimental feature or disable a new feature that breaks backward compatibility.</div> <div>Supported keys and values are subject to change without notice. Unknown keys are ignored.</div> </td> </tr> <tr> <td colspan="1">  <b>force_restore</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.6.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>If this field is set to "true", the Snapshot copy is restored even if the volume has one or more newer Snapshot copies which are currently used as reference Snapshot copy by SnapMirror. If a restore is done in this situation, this will cause future SnapMirror transfers to fail.</div> <div>Option should only be used along with snapshot_restore.</div> </td> </tr> <tr> <td colspan="1">  <b>force_unmap_luns</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.6.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Flag to control automatic unmap of LUNs.</div> </td> </tr> <tr> <td colspan="1">  <b>from_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.7.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Name of the existing volume to be renamed to name.</div> </td> </tr> <tr> <td colspan="1">  <b>from_vserver</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.6.0 of netapp.ontap </div> </td> <td> </td> <td> <div>The source vserver of the volume is rehosted.</div> </td> </tr> <tr> <td colspan="1">  <b>group_id</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.1.0 of netapp.ontap </div> </td> <td> </td> <td> <div>The UNIX group ID for the volume. The default value is 0 ('root').</div> </td> </tr> <tr> <td colspan="1">  <b>hostname</b>  <div style="font-size: small"> <span style="color: purple">string</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>The hostname or IP address of the ONTAP instance.</div> </td> </tr> <tr> <td colspan="1">  <b>http_port</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>Override the default port (80 or 443) with this port</div> </td> </tr> <tr> <td colspan="1">  <b>https</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Enable and disable https.</div> <div>Ignored when using REST as only https is supported.</div> <div>Ignored when using SSL certificate authentication as it requires SSL.</div> </td> </tr> <tr> <td colspan="1">  <b>is_infinite</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Set True if the volume is an Infinite Volume. Deleting an infinite volume is asynchronous.</div> </td> </tr> <tr> <td colspan="1">  <b>is_online</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Whether the specified volume is online, or not.</div> </td> </tr> <tr> <td colspan="1">  <b>junction_path</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>Junction path of the volume.</div> <div>To unmount, use junction path <code>''</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>key_filepath</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.6.0 of netapp.ontap </div> </td> <td> </td> <td> <div>path to SSL client key file.</div> </td> </tr> <tr> <td colspan="1">  <b>language</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Language to use for Volume</div> <div>Default uses SVM language</div> <div>Possible values Language</div> <div>c POSIX</div> <div>ar Arabic</div> <div>cs Czech</div> <div>da Danish</div> <div>de German</div> <div>en English</div> <div>en_us English (US)</div> <div>es Spanish</div> <div>fi Finnish</div> <div>fr French</div> <div>he Hebrew</div> <div>hr Croatian</div> <div>hu Hungarian</div> <div>it Italian</div> <div>ja Japanese euc-j</div> <div>ja_v1 Japanese euc-j</div> <div>ja_jp.pck Japanese PCK (sjis)</div> <div>ja_jp.932 Japanese cp932</div> <div>ja_jp.pck_v2 Japanese PCK (sjis)</div> <div>ko Korean</div> <div>no Norwegian</div> <div>nl Dutch</div> <div>pl Polish</div> <div>pt Portuguese</div> <div>ro Romanian</div> <div>ru Russian</div> <div>sk Slovak</div> <div>sl Slovenian</div> <div>sv Swedish</div> <div>tr Turkish</div> <div>zh Simplified Chinese</div> <div>zh.gbk Simplified Chinese (GBK)</div> <div>zh_tw Traditional Chinese euc-tw</div> <div>zh_tw.big5 Traditional Chinese Big 5</div> <div>To use UTF-8 as the NFS character set, append '.UTF-8' to the language code</div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div style="font-size: small"> <span style="color: purple">string</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>The name of the volume to manage.</div> </td> </tr> <tr> <td colspan="1">  <b>nvfail_enabled</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.9.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>If true, the controller performs additional work at boot and takeover times if it finds that there has been any potential data loss in the volume's constituents due to an NVRAM failure.</div> <div>The volume's constituents would be put in a special state called 'in-nvfailed-state' such that protocol access is blocked.</div> <div>This will cause the client applications to crash and thus prevent access to stale data.</div> <div>To get out of this situation, the admin needs to manually clear the 'in-nvfailed-state' on the volume's constituents.</div> </td> </tr> <tr> <td colspan="1">  <b>ontapi</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The ontap api version to use</div> </td> </tr> <tr> <td colspan="1">  <b>password</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>Password for the specified user.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: pass</div> </td> </tr> <tr> <td colspan="1">  <b>percent_snapshot_space</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>Amount of space reserved for snapshot copies of the volume.</div> </td> </tr> <tr> <td colspan="1">  <b>policy</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>Name of the export policy.</div> </td> </tr> <tr> <td colspan="1">  <b>preserve_lun_ids</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.6.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>If this field is set to "true", LUNs in the volume being restored will remain mapped and their identities preserved such that host connectivity will not be disrupted during the restore operation. I/O's to the LUN will be fenced during the restore operation by placing the LUNs in an unavailable state. Once the restore operation has completed, hosts will be able to resume I/O access to the LUNs.</div> <div>Option should only be used along with snapshot_restore.</div> </td> </tr> <tr> <td colspan="1">  <b>qos_adaptive_policy_group</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.9.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Specifies a QoS adaptive policy group to be set on volume.</div> </td> </tr> <tr> <td colspan="1">  <b>qos_policy_group</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.9.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Specifies a QoS policy group to be set on volume.</div> </td> </tr> <tr> <td colspan="1">  <b>size</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The size of the volume in (size_unit). Required when <code>state=present</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>size_unit</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>bytes</li> <li>b</li> <li>kb</li> <li>mb</li> <li><div style="color: blue">
<b>gb</b> ←</div></li> <li>tb</li> <li>pb</li> <li>eb</li> <li>zb</li> <li>yb</li> </ul> </td> <td> <div>The unit used to interpret the size parameter.</div> </td> </tr> <tr> <td colspan="1">  <b>snapdir_access</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>This is an advanced option, the default is False.</div> <div>Enable the visible '.snapshot' directory that is normally present at system internal mount points.</div> <div>This value also turns on access to all other '.snapshot' directories in the volume.</div> </td> </tr> <tr> <td colspan="1">  <b>snapshot_auto_delete</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.4.0 of netapp.ontap </div> </td> <td> </td> <td> <div>A dictionary for the auto delete options and values.</div> <div>Supported options include 'state', 'commitment', 'trigger', 'target_free_space', 'delete_order', 'defer_delete', 'prefix', 'destroy_list'.</div> <div>Option 'state' determines if the snapshot autodelete is currently enabled for the volume. Possible values are 'on' and 'off'.</div> <div>Option 'commitment' determines the snapshots which snapshot autodelete is allowed to delete to get back space. Possible values are 'try', 'disrupt' and 'destroy'.</div> <div>Option 'trigger' determines the condition which starts the automatic deletion of snapshots. Possible values are 'volume', 'snap_reserve' and DEPRECATED 'space_reserve'.</div> <div>Option 'target_free_space' determines when snapshot autodelete should stop deleting snapshots. Depending on the trigger, snapshots are deleted till we reach the target free space percentage. Accepts int type.</div> <div>Option 'delete_order' determines if the oldest or newest snapshot is deleted first. Possible values are 'newest_first' and 'oldest_first'.</div> <div>Option 'defer_delete' determines which kind of snapshots to delete in the end. Possible values are 'scheduled', 'user_created', 'prefix' and 'none'.</div> <div>Option 'prefix' can be set to provide the prefix string for the 'prefix' value of the 'defer_delete' option. The prefix string length can be 15 char long.</div> <div>Option 'destroy_list' is a comma seperated list of services which can be destroyed if the snapshot backing that service is deleted. For 7-mode, the possible values for this option are a combination of 'lun_clone', 'vol_clone', 'cifs_share', 'file_clone' or 'none'. For cluster-mode, the possible values for this option are a combination of 'lun_clone,file_clone' (for LUN clone and/or file clone), 'lun_clone,sfsr' (for LUN clone and/or sfsr), 'vol_clone', 'cifs_share', or 'none'.</div> </td> </tr> <tr> <td colspan="1">  <b>snapshot_policy</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> </td> <td> <div>The name of the snapshot policy.</div> <div>the default policy name is 'default'.</div> </td> </tr> <tr> <td colspan="1">  <b>snapshot_restore</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.6.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Name of snapshot to restore from.</div> <div>Not supported on Infinite Volume.</div> </td> </tr> <tr> <td colspan="1">  <b>space_guarantee</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>none</li> <li>file</li> <li>volume</li> </ul> </td> <td> <div>Space guarantee style for the volume.</div> </td> </tr> <tr> <td colspan="1">  <b>space_slo</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.9.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>none</li> <li>thick</li> <li>semi-thick</li> </ul> </td> <td> <div>Specifies the space SLO type for the volume. The space SLO type is the Service Level Objective for space management for the volume.</div> <div>The space SLO value is used to enforce existing volume settings so that sufficient space is set aside on the aggregate to meet the space SLO.</div> <div>This parameter is not supported on Infinite Volumes.</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>Whether the specified volume should exist or not.</div> </td> </tr> <tr> <td colspan="1">  <b>tiering_policy</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.9.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>snapshot-only</li> <li>auto</li> <li>backup</li> <li>none</li> </ul> </td> <td> <div>The tiering policy that is to be associated with the volume.</div> <div>This policy decides whether the blocks of a volume will be tiered to the capacity tier.</div> <div>snapshot-only policy allows tiering of only the volume snapshot copies not associated with the active file system.</div> <div>auto policy allows tiering of both snapshot and active file system user data to the capacity tier.</div> <div>backup policy on DP volumes allows all transferred user data blocks to start in the capacity tier.</div> <div>When set to none, the Volume blocks will not be tiered to the capacity tier.</div> <div>If no value specified, the volume is assigned snapshot only by default.</div> <div>Requires ONTAP 9.4 or later.</div> </td> </tr> <tr> <td colspan="1">  <b>time_out</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> <b>Default:</b><br><div style="color: blue">180</div> </td> <td> <div>time to wait for flexGroup creation, modification, or deletion in seconds.</div> <div>Error out if task is not completed in defined time.</div> <div>if 0, the request is asynchronous.</div> <div>default is set to 3 minutes.</div> </td> </tr> <tr> <td colspan="1">  <b>type</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The volume type, either read-write (RW) or data-protection (DP).</div> </td> </tr> <tr> <td colspan="1">  <b>unix_permissions</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Unix permission bits in octal or symbolic format.</div> <div>For example, 0 is equivalent to ------------, 777 is equivalent to ---rwxrwxrwx,both formats are accepted.</div> <div>The valid octal value ranges between 0 and 777 inclusive.</div> </td> </tr> <tr> <td colspan="1">  <b>use_rest</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <b>Default:</b><br><div style="color: blue">"auto"</div> </td> <td> <div>REST API if supported by the target system for all the resources and attributes the module requires. Otherwise will revert to ZAPI.</div> <div>always -- will always use the REST API</div> <div>never -- will always use the ZAPI</div> <div>auto -- will try to use the REST Api</div> </td> </tr> <tr> <td colspan="1">  <b>user_id</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 20.1.0 of netapp.ontap </div> </td> <td> </td> <td> <div>The UNIX user ID for the volume. The default value is 0 ('root').</div> </td> </tr> <tr> <td colspan="1">  <b>username</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>This can be a Cluster-scoped or SVM-scoped account, depending on whether a Cluster-level or SVM-level API is required.</div> <div>For more information, please read the documentation <a href="https://mysupport.netapp.com/NOW/download/software/nmsdk/9.4/">https://mysupport.netapp.com/NOW/download/software/nmsdk/9.4/</a>.</div> <div>Two authentication methods are supported</div> <div>1. basic authentication, using username and password,</div> <div>2. SSL certificate authentication, using a ssl client cert file, and optionally a private key file.</div> <div>To use a certificate, the certificate must have been installed in the ONTAP cluster, and cert authentication must have been enabled.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: user</div> </td> </tr> <tr> <td colspan="1">  <b>validate_certs</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If set to <code>no</code>, the SSL certificates will not be validated.</div> <div>This should only set to <code>False</code> used on personally controlled sites using self-signed certificates.</div> </td> </tr> <tr> <td colspan="1">  <b>volume_security_style</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>mixed</li> <li>ntfs</li> <li>unified</li> <li><div style="color: blue">
<b>unix</b> ←</div></li> </ul> </td> <td> <div>The security style associated with this volume.</div> </td> </tr> <tr> <td colspan="1">  <b>vserver</b>  <div style="font-size: small"> <span style="color: purple">string</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>Name of the vserver to use.</div> </td> </tr> <tr> <td colspan="1">  <b>vserver_dr_protection</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.9.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>protected</li> <li>unprotected</li> </ul> </td> <td> <div>Specifies the protection type for the volume in a Vserver DR setup.</div> </td> </tr> <tr> <td colspan="1">  <b>wait_for_completion</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> <div style="font-style: italic; font-size: small; color: darkgreen"> added in 2.8.0 of netapp.ontap </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Set this parameter to 'true' for synchronous execution during create (wait until volume status is online)</div> <div>Set this parameter to 'false' for asynchronous execution</div> <div>For asynchronous, execution exits as soon as the request is sent, without checking volume status</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>The modules prefixed with na\_ontap are built to support the ONTAP storage platform.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml">- name: Create FlexVol
  na_ontap_volume:
    state: present
    name: ansibleVolume12
    is_infinite: False
    aggregate_name: ansible_aggr
    size: 100
    size_unit: mb
    user_id: 1001
    group_id: 2002
    space_guarantee: none
    tiering_policy: auto
    policy: default
    percent_snapshot_space: 60
    qos_policy_group: max_performance_gold
    vserver: ansibleVServer
    wait_for_completion: True
    space_slo: none
    nvfail_enabled: False
    comment: ansible created volume
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"

- name: Volume Delete
  na_ontap_volume:
    state: absent
    name: ansibleVolume12
    aggregate_name: ansible_aggr
    vserver: ansibleVServer
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"

- name: Make FlexVol offline
  na_ontap_volume:
    state: present
    name: ansibleVolume
    is_infinite: False
    is_online: False
    vserver: ansibleVServer
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"

- name: Create flexGroup volume manually
  na_ontap_volume:
    state: present
    name: ansibleVolume
    is_infinite: False
    aggr_list: "{{ aggr_list }}"
    aggr_list_multiplier: 2
    size: 200
    size_unit: mb
    space_guarantee: none
    policy: default
    vserver: "{{ vserver }}"
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"
    https: False
    unix_permissions: 777
    snapshot_policy: default
    time_out: 0

- name: Create flexGroup volume auto provsion as flex group
  na_ontap_volume:
    state: present
    name: ansibleVolume
    is_infinite: False
    auto_provision_as: flexgroup
    size: 200
    size_unit: mb
    space_guarantee: none
    policy: default
    vserver: "{{ vserver }}"
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"
    https: False
    unix_permissions: 777
    snapshot_policy: default
    time_out: 0

- name: Create FlexVol with QoS adaptive
  na_ontap_volume:
    state: present
    name: ansibleVolume15
    is_infinite: False
    aggregate_name: ansible_aggr
    size: 100
    size_unit: gb
    space_guarantee: none
    policy: default
    percent_snapshot_space: 10
    qos_adaptive_policy_group: extreme
    vserver: ansibleVServer
    wait_for_completion: True
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"

- name: Modify volume dr protection (vserver of the volume must be in a snapmirror relationship)
  na_ontap_volume:
    state: present
    name: ansibleVolume
    vserver_dr_protection: protected
    vserver: "{{ vserver }}"
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"
    https: False

- name: Modify volume with snapshot auto delete options
  na_ontap_volume:
    state: present
    name: vol_auto_delete
    snapshot_auto_delete:
      state: "on"
      commitment: try
      defer_delete: scheduled
      target_free_space: 30
      destroy_list: lun_clone,vol_clone
      delete_order: newest_first
    aggregate_name: "{{ aggr }}"
    vserver: "{{ vserver }}"
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"
    https: False

- name: Move volume with force cutover action
  na_ontap_volume:
    name: ansible_vol
    aggregate_name: aggr_ansible
    cutover_action: force
    vserver: "{{ vserver }}"
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"
    https: false

- name: Rehost volume to another vserver auto remap luns
  na_ontap_volume:
    name: ansible_vol
    from_vserver: ansible
    auto_remap_luns: true
    vserver: "{{ vserver }}"
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"
    https: false

- name: Rehost volume to another vserver force unmap luns
  na_ontap_volume:
    name: ansible_vol
    from_vserver: ansible
    force_unmap_luns: true
    vserver: "{{ vserver }}"
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"
    https: false

- name: Snapshot restore volume
  na_ontap_volume:
    name: ansible_vol
    vserver: ansible
    snapshot_restore: 2020-05-24-weekly
    force_restore: true
    preserve_lun_ids: true
    hostname: "{{ netapp_hostname }}"
    username: "{{ netapp_username }}"
    password: "{{ netapp_password }}"
    https: false
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>NetApp Ansible Team (@carchi8py) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#a0cec78dc1ced3c9c2ccc5d4c5c1cd868393979b868395929b868394989bcec5d4c1d0d0868394969bc3cfcd">ng-ansibleteam<span>@</span>netapp<span>.</span>com</a>&gt;</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2019 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.10/collections/netapp/ontap/na_ontap_volume_module.html" class="_attribution-link">https://docs.ansible.com/ansible/2.10/collections/netapp/ontap/na_ontap_volume_module.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
