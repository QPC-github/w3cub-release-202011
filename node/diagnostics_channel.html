
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Diagnostics_channel - Node.js - W3cubDocs</title>
  
  <meta name="description" content=" Source Code&#58; lib&#47;diagnostics_channel.js ">
  <meta name="keywords" content="diagnostics, channel, node, js">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/node/diagnostics_channel.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/node.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/node/" class="_nav-link" title="" style="margin-left:0;">Node.js</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _node">
				
				
<h1 id="diagnostics_channel_diagnostics_channel">Diagnostics Channel</h1> 
<div class="api_stability api_stability_1">
<a href="https://nodejs.org/dist/latest-v15.x/docs/api/documentation.html#documentation_stability_index">Stability: 1</a> - Experimental</div>
 <p><strong>Source Code:</strong> <a href="https://github.com/nodejs/node/blob/v15.5.0/lib/diagnostics_channel.js">lib/diagnostics_channel.js</a></p> <p>The <code>diagnostics_channel</code> module provides an API to create named channels to report arbitrary message data for diagnostics purposes.</p> <p>It can be accessed using:</p> <pre data-language="js">const diagnostics_channel = require('diagnostics_channel');</pre> <p>It is intended that a module writer wanting to report diagnostics messages will create one or many top-level channels to report messages through. Channels may also be acquired at runtime but it is not encouraged due to the additional overhead of doing so. Channels may be exported for convenience, but as long as the name is known it can be acquired anywhere.</p> <p>If you intend for your module to produce diagnostics data for others to consume it is recommended that you include documentation of what named channels are used along with the shape of the message data. Channel names should generally include the module name to avoid collisions with data from other modules.</p> <h2 id="diagnostics_channel_public_api">Public API</h2> <h3 id="diagnostics_channel_overview">Overview</h3> <p>Following is a simple overview of the public API.</p> <pre data-language="js">const diagnostics_channel = require('diagnostics_channel');

// Get a reusable channel object
const channel = diagnostics_channel.channel('my-channel');

// Subscribe to the channel
channel.subscribe((message, name) =&gt; {
  // Received data
});

// Check if the channel has an active subscriber
if (channel.hasSubscribers) {
  // Publish data to the channel
  channel.publish({
    some: 'data'
  });
}</pre> <h4 id="diagnostics_channel_diagnostics_channel_hassubscribers_name"><code>diagnostics_channel.hasSubscribers(name)</code></h4> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Symbol_type" class="type">&lt;symbol&gt;</a> The channel name</li> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> If there are active subscribers</li> </ul> <p>Check if there are active subscribers to the named channel. This is helpful if the message you want to send might be expensive to prepare.</p> <p>This API is optional but helpful when trying to publish messages from very performance-senstive code.</p> <pre data-language="js">const diagnostics_channel = require('diagnostics_channel');

if (diagnostics_channel.hasSubscribers('my-channel')) {
  // There are subscribers, prepare and publish message
}</pre> <h4 id="diagnostics_channel_diagnostics_channel_channel_name"><code>diagnostics_channel.channel(name)</code></h4> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Symbol_type" class="type">&lt;symbol&gt;</a> The channel name</li> <li>Returns: <a href="diagnostics_channel#diagnostics_channel_class_channel" class="type">&lt;Channel&gt;</a> The named channel object</li> </ul> <p>This is the primary entry-point for anyone wanting to interact with a named channel. It produces a channel object which is optimized to reduce overhead at publish time as much as possible.</p> <pre data-language="js">const diagnostics_channel = require('diagnostics_channel');

const channel = diagnostics_channel.channel('my-channel');</pre> <h3 id="diagnostics_channel_class_channel">Class: <code>Channel</code>
</h3> <p>The class <code>Channel</code> represents an individual named channel within the data pipeline. It is use to track subscribers and to publish messages when there are subscribers present. It exists as a separate object to avoid channel lookups at publish time, enabling very fast publish speeds and allowing for heavy use while incurring very minimal cost. Channels are created with <a href="#diagnostics_channel_diagnostics_channel_channel_name"><code>diagnostics_channel.channel(name)</code></a>, constructing a channel directly with <code>new Channel(name)</code> is not supported.</p> <h4 id="diagnostics_channel_channel_hassubscribers"><code>channel.hasSubscribers</code></h4> <ul> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> If there are active subscribers</li> </ul> <p>Check if there are active subscribers to this channel. This is helpful if the message you want to send might be expensive to prepare.</p> <p>This API is optional but helpful when trying to publish messages from very performance-senstive code.</p> <pre data-language="js">const diagnostics_channel = require('diagnostics_channel');

const channel = diagnostics_channel.channel('my-channel');

if (channel.hasSubscribers) {
  // There are subscribers, prepare and publish message
}</pre> <h4 id="diagnostics_channel_channel_publish_message"><code>channel.publish(message)</code></h4> <ul> <li>
<code>message</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" class="type">&lt;any&gt;</a> The message to send to the channel subscribers</li> </ul> <p>Publish a message to any subscribers to the channel. This will trigger message handlers synchronously so they will execute within the same context.</p> <pre data-language="js">const diagnostics_channel = require('diagnostics_channel');

const channel = diagnostics_channel.channel('my-channel');

channel.publish({
  some: 'message'
});</pre> <h4 id="diagnostics_channel_channel_subscribe_onmessage"><code>channel.subscribe(onMessage)</code></h4> <ul> <li>
<code>onMessage</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> The handler to receive channel messages <ul> <li>
<code>message</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" class="type">&lt;any&gt;</a> The message data</li> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Symbol_type" class="type">&lt;symbol&gt;</a> The name of the channel</li> </ul> </li> </ul> <p>Register a message handler to subscribe to this channel. This message handler will be run synchronously whenever a message is published to the channel. Any errors thrown in the message handler will trigger an <a href="process#process_event_uncaughtexception"><code>'uncaughtException'</code></a>.</p> <pre data-language="js">const diagnostics_channel = require('diagnostics_channel');

const channel = diagnostics_channel.channel('my-channel');

channel.subscribe((message, name) =&gt; {
  // Received data
});</pre> <h4 id="diagnostics_channel_channel_unsubscribe_onmessage"><code>channel.unsubscribe(onMessage)</code></h4> <ul> <li>
<code>onMessage</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> The previous subscribed handler to remove</li> </ul> <p>Remove a message handler previously registered to this channel with <a href="#diagnostics_channel_channel_subscribe_onmessage"><code>channel.subscribe(onMessage)</code></a>.</p> <pre data-language="js">const diagnostics_channel = require('diagnostics_channel');

const channel = diagnostics_channel.channel('my-channel');

function onMessage(message, name) {
  // Received data
}

channel.subscribe(onMessage);

channel.unsubscribe(onMessage);</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © Joyent, Inc. and other Node contributors<br>Licensed under the MIT License.<br>Node.js is a trademark of Joyent, Inc. and is used with its permission.<br>We are not endorsed by or affiliated with Joyent.<br>
    <a href="https://nodejs.org/dist/latest-v15.x/docs/api/diagnostics_channel.html" class="_attribution-link">https://nodejs.org/dist/latest-v15.x/docs/api/diagnostics_channel.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
