
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Varnishhist - Varnish - W3cubDocs</title>
  
  <meta name="description" content=" 1 ">
  <meta name="keywords" content="varnishhist, varnish">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/varnish/reference/varnishhist.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/varnish.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/varnish/" class="_nav-link" title="" style="margin-left:0;">Varnish</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="varnishhist-1">varnishhist</h1>  <h2 id="varnish-request-histogram">Varnish request histogram</h2> <dl class="field-list simple"> <dt class="field-odd">Manual section</dt> <dd class="field-odd">
<p>1</p> </dd> </dl>  <h3 id="synopsis">SYNOPSIS</h3> <p>varnishhist [-B &lt;factor&gt;] [-C] [-d] [-g &lt;request|vxid&gt;] [-h] [-L &lt;limit&gt;] [-n &lt;dir&gt;] [-p &lt;period&gt;] [-P responsetime] [-P reqbodytime] [-P size] [-P Bereqtime] [-P Beresptime] [-P BerespBodytime] [-P Besize] [-P &lt;[cb:]tag:[prefix]:field_num[:min:max]&gt;] [-Q &lt;file&gt;] [-q &lt;query&gt;] [-r &lt;filename&gt;] [-t &lt;seconds|off&gt;] [-T &lt;seconds&gt;] [-V]</p>   <h3 id="description">DESCRIPTION</h3> <p>The varnishhist utility reads varnishd(1) shared memory logs and presents a continuously updated histogram showing the distribution of the last N requests by their processing. The value of N and the vertical scale are displayed in the top left corner. The horizontal scale is logarithmic. Hits are marked with a pipe character (“|”), and misses are marked with a hash character (“#”).</p> <p>The following options are available:</p> <dl class="option-list"> <dt><kbd><span class="option">-B <var>&lt;factor&gt;</var></span></kbd></dt> <dd>
<p>Factor to bend time by. Particularly useful when [-r]eading from a vsl file. =1 process in near real time, &lt;1 slow-motion, &gt;1 time-lapse (useless unless reading from a file). At runtime, &lt; halves and &gt; doubles.</p> </dd> <dt><kbd><span class="option">-C</span></kbd></dt> <dd>
<p>Do all regular expression and string matching caseless.</p> </dd> <dt><kbd><span class="option">-d</span></kbd></dt> <dd>
<p>Process log records at the head of the log and exit.</p> </dd> <dt><kbd><span class="option">-g <var>&lt;request|vxid&gt;</var></span></kbd></dt> <dd>
<p>The grouping of the log records. The default is to group by vxid.</p> </dd> <dt><kbd><span class="option">-h</span></kbd></dt> <dd>
<p>Print program usage and exit</p> </dd> <dt><kbd><span class="option">-L <var>&lt;limit&gt;</var></span></kbd></dt> <dd>
<p>Sets the upper limit of incomplete transactions kept before the oldest transaction is force completed. A warning record is synthesized when this happens. This setting keeps an upper bound on the memory usage of running queries. Defaults to 1000 transactions.</p> </dd> <dt><kbd><span class="option">-n <var>&lt;dir&gt;</var></span></kbd></dt> <dd>
<p>Specify the varnishd working directory (also known as instance name) to get logs from. If -n is not specified, the host name is used.</p> </dd> <dt><kbd><span class="option">-p <var>&lt;period&gt;</var></span></kbd></dt> <dd>
<p>Specified the number of seconds between screen refreshes. Default is 1 second, and can be changed at runtime by pressing the [0-9] keys (powers of 2 in seconds or + and - (double/halve the speed).</p> </dd> <dt><kbd><span class="option">-P <var>responsetime</var></span></kbd></dt> <dd>
<p>Predefined client profile: graph the total time from start of request processing (first byte received) until ready to deliver the client response (field 3 of SLT_Timestamp Process: VSL tag).</p> </dd> <dt><kbd><span class="option">-P <var>reqbodytime</var></span></kbd></dt> <dd>
<p>Predefined client profile: graph the time for reading the request body (field 3 of SLT_Timestamp ReqBody: VSL tag).</p> </dd> <dt><kbd><span class="option">-P <var>size</var></span></kbd></dt> <dd>
<p>Predefined client profile: graph the size of responses (field 5 of SLT_ReqAcct VSL tag).</p> </dd> <dt><kbd><span class="option">-P <var>Bereqtime</var></span></kbd></dt> <dd>
<p>Predefined backend profile: graph the time from beginning of backend processing until a backend request is sent completely (field 3 of SLT_Timestamp Bereq: VSL tag).</p> </dd> <dt><kbd><span class="option">-P <var>Beresptime</var></span></kbd></dt> <dd>
<p>Predefined backend profile: graph the time from beginning of backend processing until the response headers are being received completely (field 3 of SLT_Timestamp Beresp: VSL tag).</p> </dd> <dt><kbd><span class="option">-P <var>BerespBodytime</var></span></kbd></dt> <dd>
<p>Predefined backend profile: graph the time from beginning of backend processing until the response body has been received (field 3 of SLT_Timestamp BerespBody: VSL tag).</p> </dd> <dt><kbd><span class="option">-P <var>Besize</var></span></kbd></dt> <dd>
<p>Predefined backend profile: graph the backend response body size (field 5 of SLT_BereqAcct VSL tag).</p> </dd> <dt><kbd><span class="option">-P <var>&lt;[cb:]tag:[prefix]:field_num[:min:max]&gt;</var></span></kbd></dt> <dd>
<p>Graph the given custom definition defined as: an optional (c)lient or (b)ackend filter (defaults to client), the tag we’ll look for, a prefix to look for (can be empty, but must be terminated by a colon) and the field number of the value we are interested in. min and max are the boundaries of the graph in powers of ten and default to -6 and 3.</p> </dd> <dt><kbd><span class="option">-Q <var>&lt;file&gt;</var></span></kbd></dt> <dd>
<p>Specifies the file containing the VSL query to use. When multiple -Q or -q options are specified, all queries are considered as if the ‘or’ operator was used to combine them.</p> </dd> <dt><kbd><span class="option">-q <var>&lt;query&gt;</var></span></kbd></dt> <dd>
<p>Specifies the VSL query to use. When multiple -q or -Q options are specified, all queries are considered as if the ‘or’ operator was used to combine them.</p> </dd> <dt><kbd><span class="option">-r <var>&lt;filename&gt;</var></span></kbd></dt> <dd>
<p>Read log in binary file format from this file. The file can be created with <code>varnishlog -w filename</code>.</p> </dd> <dt><kbd><span class="option">-t <var>&lt;seconds|off&gt;</var></span></kbd></dt> <dd>
<p>Timeout before returning error on initial VSM connection. If set the VSM connection is retried every 0.5 seconds for this many seconds. If zero the connection is attempted only once and will fail immediately if unsuccessful. If set to “off”, the connection will not fail, allowing the utility to start and wait indefinetely for the Varnish instance to appear. Defaults to 5 seconds.</p> </dd> <dt><kbd><span class="option">-T <var>&lt;seconds&gt;</var></span></kbd></dt> <dd>
<p>Sets the transaction timeout in seconds. This defines the maximum number of seconds elapsed between a Begin tag and the End tag. If the timeout expires, a warning record is synthesized and the transaction is force completed. Defaults to 120 seconds.</p> </dd> <dt><kbd><span class="option">-V</span></kbd></dt> <dd>
<p>Print version information and exit.</p> </dd> <dt><kbd><span class="option">--optstring</span></kbd></dt> <dd>
<p>Print the optstring parameter to <code>getopt(3)</code> to help writing wrapper scripts.</p> </dd> </dl>   <h3 id="see-also">SEE ALSO</h3> <ul class="simple"> <li><a class="reference internal" href="varnishd#varnishd-1"><span class="std std-ref">varnishd</span></a></li> <li><a class="reference internal" href="varnishlog#varnishlog-1"><span class="std std-ref">varnishlog</span></a></li> <li><a class="reference internal" href="varnishncsa#varnishncsa-1"><span class="std std-ref">varnishncsa</span></a></li> <li><a class="reference internal" href="varnishstat#varnishstat-1"><span class="std std-ref">varnishstat</span></a></li> <li><a class="reference internal" href="varnishtop#varnishtop-1"><span class="std std-ref">varnishtop</span></a></li> <li><a class="reference internal" href="vsl#vsl-7"><span class="std std-ref">VSL</span></a></li> </ul>   <h3 id="history">HISTORY</h3> <p>The varnishhist utility was developed by Poul-Henning Kamp in cooperation with Verdens Gang AS and Varnish Software AS. This manual page was written by Dag-Erling Smørgrav.</p>   <h3 id="copyright">COPYRIGHT</h3> <p>This document is licensed under the same licence as Varnish itself. See LICENCE for details.</p> <ul class="simple"> <li>Copyright (c) 2006 Verdens Gang AS</li> <li>Copyright (c) 2006-2015 Varnish Software AS</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright © 2006 Verdens Gang AS<br>Copyright © 2006–2020 Varnish Software AS<br>Licensed under the BSD-2-Clause License.<br>
    <a href="https://varnish-cache.org/docs/6.5/reference/varnishhist.html" class="_attribution-link">https://varnish-cache.org/docs/6.5/reference/varnishhist.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
