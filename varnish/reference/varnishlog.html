
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Varnishlog - Varnish - W3cubDocs</title>
  
  <meta name="description" content=" 1 ">
  <meta name="keywords" content="varnishlog, varnish">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/varnish/reference/varnishlog.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/varnish.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/varnish/" class="_nav-link" title="" style="margin-left:0;">Varnish</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="varnishlog-1">varnishlog</h1>  <h2 id="display-varnish-logs">Display Varnish logs</h2> <dl class="field-list simple"> <dt class="field-odd">Manual section</dt> <dd class="field-odd">
<p>1</p> </dd> </dl>  <h3 id="synopsis">SYNOPSIS</h3> <p>varnishlog [-a] [-A] [-b] [-c] [-C] [-d] [-D] [-g &lt;session|request|vxid|raw&gt;] [-h] [-i &lt;taglist&gt;] [-I &lt;[taglist:]regex&gt;] [-k &lt;num&gt;] [-L &lt;limit&gt;] [-n &lt;dir&gt;] [-P &lt;file&gt;] [-Q &lt;file&gt;] [-q &lt;query&gt;] [-r &lt;filename&gt;] [-R &lt;limit[/duration]&gt;] [-t &lt;seconds|off&gt;] [-T &lt;seconds&gt;] [-v] [-V] [-w &lt;filename&gt;] [-x &lt;taglist&gt;] [-X &lt;[taglist:]regex&gt;]</p>   <h3 id="options">OPTIONS</h3> <p>The following options are available:</p> <dl class="option-list"> <dt><kbd><span class="option">-a</span></kbd></dt> <dd>
<p>When writing output to a file with the -w option, append to it rather than overwrite it.</p> </dd> <dt><kbd><span class="option">-A</span></kbd></dt> <dd>
<p>When writing output to a file with the -w option, output data in ascii format.</p> </dd> <dt><kbd><span class="option">-b</span></kbd></dt> <dd>
<p>Only display transactions and log records coming from backend communication.</p> </dd> <dt><kbd><span class="option">-c</span></kbd></dt> <dd>
<p>Only display transactions and log records coming from client communication.</p> </dd> <dt><kbd><span class="option">-C</span></kbd></dt> <dd>
<p>Do all regular expression and string matching caseless.</p> </dd> <dt><kbd><span class="option">-d</span></kbd></dt> <dd>
<p>Process log records at the head of the log and exit.</p> </dd> <dt><kbd><span class="option">-D</span></kbd></dt> <dd>
<p>Daemonize.</p> </dd> <dt><kbd><span class="option">-g <var>&lt;session|request|vxid|raw&gt;</var></span></kbd></dt> <dd>
<p>The grouping of the log records. The default is to group by vxid.</p> </dd> <dt><kbd><span class="option">-h</span></kbd></dt> <dd>
<p>Print program usage and exit</p> </dd> <dt><kbd><span class="option">-i <var>&lt;taglist&gt;</var></span></kbd></dt> <dd>
<p>Include log records of these tags in output. Taglist is a comma-separated list of tag globs. Multiple -i options may be given.</p> <p>If a tag include option is the first of any tag selection options, all tags are first marked excluded.</p> </dd> <dt><kbd><span class="option">-I <var>&lt;[taglist:]regex&gt;</var></span></kbd></dt> <dd>
<p>Include by regex matching. Output only records matching taglist and regular expression. Applies to any tag if taglist is absent. Multiple -I options may be given.</p> <p>If a tag include option is the first of any tag selection options, all tags are first marked excluded.</p> </dd> <dt><kbd><span class="option">-k <var>&lt;num&gt;</var></span></kbd></dt> <dd>
<p>Process this number of matching log transactions before exiting.</p> </dd> <dt><kbd><span class="option">-L <var>&lt;limit&gt;</var></span></kbd></dt> <dd>
<p>Sets the upper limit of incomplete transactions kept before the oldest transaction is force completed. A warning record is synthesized when this happens. This setting keeps an upper bound on the memory usage of running queries. Defaults to 1000 transactions.</p> </dd> <dt><kbd><span class="option">-n <var>&lt;dir&gt;</var></span></kbd></dt> <dd>
<p>Specify the varnishd working directory (also known as instance name) to get logs from. If -n is not specified, the host name is used.</p> </dd> <dt><kbd><span class="option">-P <var>&lt;file&gt;</var></span></kbd></dt> <dd>
<p>Write the process’ PID to the specified file.</p> </dd> <dt><kbd><span class="option">-Q <var>&lt;file&gt;</var></span></kbd></dt> <dd>
<p>Specifies the file containing the VSL query to use. When multiple -Q or -q options are specified, all queries are considered as if the ‘or’ operator was used to combine them.</p> </dd> <dt><kbd><span class="option">-q <var>&lt;query&gt;</var></span></kbd></dt> <dd>
<p>Specifies the VSL query to use. When multiple -q or -Q options are specified, all queries are considered as if the ‘or’ operator was used to combine them.</p> </dd> <dt><kbd><span class="option">-r <var>&lt;filename&gt;</var></span></kbd></dt> <dd>
<p>Read log in binary file format from this file. The file can be created with <code>varnishlog -w filename</code>.</p> </dd> <dt><kbd><span class="option">-R <var>&lt;limit[/duration]&gt;</var></span></kbd></dt> <dd>
<p>Restrict the output to the specified limit. Transactions exceeding the limit will be suppressed. The limit is specified as the maximum number of transactions (with respect to the chosen grouping method) and an optional time period. If no duration is specified, a default of <code>s</code> is used. The duration field can be formatted as in VCL (e.g. <code>-R 10/2m</code>) or as a simple time period without the prefix (e.g. <code>-R 5/m</code>). When in <code>-g raw</code> grouping mode, this setting can not be used alongside <code>-i</code>, <code>-I</code>, <code>-x</code> or <code>-X</code>, and we advise using <code>-q</code> instead.</p> </dd> <dt><kbd><span class="option">-t <var>&lt;seconds|off&gt;</var></span></kbd></dt> <dd>
<p>Timeout before returning error on initial VSM connection. If set the VSM connection is retried every 0.5 seconds for this many seconds. If zero the connection is attempted only once and will fail immediately if unsuccessful. If set to “off”, the connection will not fail, allowing the utility to start and wait indefinetely for the Varnish instance to appear. Defaults to 5 seconds.</p> </dd> <dt><kbd><span class="option">-T <var>&lt;seconds&gt;</var></span></kbd></dt> <dd>
<p>Sets the transaction timeout in seconds. This defines the maximum number of seconds elapsed between a Begin tag and the End tag. If the timeout expires, a warning record is synthesized and the transaction is force completed. Defaults to 120 seconds.</p> </dd> <dt><kbd><span class="option">-v</span></kbd></dt> <dd>
<p>Use verbose output on record set printing, giving the VXID on every log line. Without this option, the VXID will only be given on the header of that transaction.</p> </dd> <dt><kbd><span class="option">-V</span></kbd></dt> <dd>
<p>Print version information and exit.</p> </dd> <dt><kbd><span class="option">-w <var>&lt;filename&gt;</var></span></kbd></dt> <dd>
<p>Redirect output to file. The file will be overwritten unless the -a option was specified. If the application receives a SIGHUP in daemon mode the file will be reopened allowing the old one to be rotated away. The file can then be read by varnishlog and other tools with the -r option, unless the -A option was specified. This option is required when running in daemon mode.</p> </dd> <dt><kbd><span class="option">-x <var>&lt;taglist&gt;</var></span></kbd></dt> <dd>
<p>Exclude log records of these tags in output. Taglist is a comma-separated list of tag globs. Multiple -x options may be given.</p> </dd> <dt><kbd><span class="option">-X <var>&lt;[taglist:]regex&gt;</var></span></kbd></dt> <dd>
<p>Exclude by regex matching. Do not output records matching taglist and regular expression. Applies to any tag if taglist is absent. Multiple -X options may be given.</p> </dd> <dt><kbd><span class="option">--optstring</span></kbd></dt> <dd>
<p>Print the optstring parameter to <code>getopt(3)</code> to help writing wrapper scripts.</p> </dd> </dl>   <h3 id="signals">SIGNALS</h3> <ul> <li>
<p>SIGHUP</p> <p>Rotate the log file (see -w option) in daemon mode, abort the loop and die gracefully when running in the foreground.</p> </li> <li>
<p>SIGUSR1</p> <p>Flush any outstanding transactions</p> </li> </ul>   <h3 id="see-also">SEE ALSO</h3> <ul class="simple"> <li><a class="reference internal" href="varnishd#varnishd-1"><span class="std std-ref">varnishd</span></a></li> <li><a class="reference internal" href="varnishhist#varnishhist-1"><span class="std std-ref">varnishhist</span></a></li> <li><a class="reference internal" href="varnishncsa#varnishncsa-1"><span class="std std-ref">varnishncsa</span></a></li> <li><a class="reference internal" href="varnishstat#varnishstat-1"><span class="std std-ref">varnishstat</span></a></li> <li><a class="reference internal" href="varnishtop#varnishtop-1"><span class="std std-ref">varnishtop</span></a></li> <li><a class="reference internal" href="vsl#vsl-7"><span class="std std-ref">VSL</span></a></li> <li><a class="reference internal" href="vsl-query#vsl-query-7"><span class="std std-ref">vsl-query</span></a></li> </ul>   <h3 id="history">HISTORY</h3> <p>The varnishlog utility was developed by Poul-Henning Kamp &lt;<a class="reference external" href="mailto:phk%40phk.freebsd.dk">phk<span>@</span>phk<span>.</span>freebsd<span>.</span>dk</a>&gt; in cooperation with Verdens Gang AS and Varnish Software AS. This manual page was initially written by Dag-Erling Smørgrav, and later updated by Per Buer and Martin Blix Grydeland.</p>   <h3 id="copyright">COPYRIGHT</h3> <p>This document is licensed under the same licence as Varnish itself. See LICENCE for details.</p> <ul class="simple"> <li>Copyright (c) 2006 Verdens Gang AS</li> <li>Copyright (c) 2006-2015 Varnish Software AS</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright © 2006 Verdens Gang AS<br>Copyright © 2006–2020 Varnish Software AS<br>Licensed under the BSD-2-Clause License.<br>
    <a href="https://varnish-cache.org/docs/6.5/reference/varnishlog.html" class="_attribution-link">https://varnish-cache.org/docs/6.5/reference/varnishlog.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
