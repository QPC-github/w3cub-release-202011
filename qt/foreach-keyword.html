
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Qt&#39;s Foreach Keyword - Qt - W3cubDocs</title>
  
  <meta name="description" content=" Note&#58; The foreach keyword was introduced before the C++11 range-based loops existed. New code should prefer C++11 range-based loops. ">
  <meta name="keywords" content="qt&#39;s, foreach, keyword, qt">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/qt/foreach-keyword.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-60a6449bb52e9968d95c133a29f066ffcb8dbe4f077d4022e51c991ce30bf256c8e19c508207a4193c414ffd0414826564317669b0f27f9f85c1cb21b84e097e.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/qt.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/qt/" class="_nav-link" title="" style="margin-left:0;">Qt</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _qt">
				
				
<h1 class="title">Qt's foreach Keyword</h1>   <h2 id="the-foreach-keyword">The foreach Keyword
</h2> <div class="admonition note"> <p><b>Note: </b>The foreach keyword was introduced before the C++11 range-based loops existed. New code should prefer C++11 range-based loops.</p> </div> <p>The <code>foreach</code> keyword is a Qt-specific addition to the C++ language, and is implemented using the preprocessor.</p> <p>Its syntax is: <code>foreach</code> (<i>variable</i>, <i>container</i>) <i>statement</i>. For example, here's how to use <code>foreach</code> to iterate over a <a href="qlist">QList</a>&lt;<a href="qstring">QString</a>&gt;:</p> <pre data-language="cpp">QList&lt;QString&gt; values;
...
QString str;
foreach (str, values)
    qDebug() &lt;&lt; str;</pre> <p>The <code>foreach</code> code is significantly shorter than the equivalent code that uses iterators:</p> <pre data-language="cpp">QList&lt;QString&gt; values;
...
QListIterator&lt;QString&gt; i(values);
while (i.hasNext())
    qDebug() &lt;&lt; i.next();</pre> <p>Unless the data type contains a comma (e.g., <code>QPair&lt;int, int&gt;</code>), the variable used for iteration can be defined within the <code>foreach</code> statement:</p> <pre data-language="cpp">QList&lt;QString&gt; values;
...
foreach (const QString &amp;str, values)
    qDebug() &lt;&lt; str;</pre> <p>And like any other C++ loop construct, you can use braces around the body of a <code>foreach</code> loop, and you can use <code>break</code> to leave the loop:</p> <pre data-language="cpp">QList&lt;QString&gt; values;
...
foreach (const QString &amp;str, values) {
    if (str.isEmpty())
        break;
    qDebug() &lt;&lt; str;
}</pre> <p>With <a href="qmap">QMap</a> and <a href="qhash#qhash">QHash</a>, <code>foreach</code> accesses the value component of the (key, value) pairs automatically, so you should not call values() on the container (it would generate an unnecessary copy, see below). If you want to iterate over both the keys and the values, you can use iterators (which are faster), or you can obtain the keys, and use them to get the values too:</p> <pre data-language="cpp">QMap&lt;QString, int&gt; map;
...
foreach (const QString &amp;str, map.keys())
    qDebug() &lt;&lt; str &lt;&lt; ':' &lt;&lt; map.value(str);</pre> <p>For a multi-valued map:</p> <pre data-language="cpp">QMultiMap&lt;QString, int&gt; map;
...
foreach (const QString &amp;str, map.uniqueKeys()) {
    foreach (int i, map.values(str))
        qDebug() &lt;&lt; str &lt;&lt; ':' &lt;&lt; i;
}</pre> <p>Qt automatically takes a copy of the container when it enters a <code>foreach</code> loop. If you modify the container as you are iterating, that won't affect the loop. (If you do not modify the container, the copy still takes place, but thanks to <a href="implicit-sharing">implicit sharing</a> copying a container is very fast.)</p> <p>Since foreach creates a copy of the container, using a non-const reference for the variable does not allow you to modify the original container. It only affects the copy, which is probably not what you want.</p> <p>An alternative to Qt's <code>foreach</code> loop is the range-based <code>for</code> that is part of C++11 and newer. However, keep in mind that the range-based <code>for</code> might force a Qt container to <a href="implicit-sharing">detach</a>, whereas <code>foreach</code> would not. But using <code>foreach</code> always copies the container, which is usually not cheap for STL containers. If in doubt, prefer <code>foreach</code> for Qt containers, and range based <code>for</code> for STL ones.</p>
<div class="_attribution">
  <p class="_attribution-p">
    Â© The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-6.2/foreach-keyword.html" class="_attribution-link">https://doc.qt.io/qt-6.2/foreach-keyword.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
