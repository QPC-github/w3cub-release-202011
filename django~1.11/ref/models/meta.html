
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Model _meta API - Django 1.11 - W3cubDocs</title>
  
  <meta name="description" content="The model _meta API is at the core of the Django ORM. It enables other parts of the system such as lookups, queries, forms, and the admin to &hellip;">
  <meta name="keywords" content="model, meta, api, django, django~1.11">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/django~1.11/ref/models/meta.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/django~1.11.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/django~1.11/" class="_nav-link" title="" style="margin-left:0;">Django 1.11</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="model-meta-api">Model _meta API</h1> <dl class="class" id="s-module-django.db.models.options"> <dt id="django.db.models.options.Options">
<code>class Options</code> <a class="reference internal" href="https://docs.djangoproject.com/en/1.11/_modules/django/db/models/options/#Options"><span class="viewcode-link">[source]</span></a>
</dt> 
</dl> <p>The model <code>_meta</code> API is at the core of the Django ORM. It enables other parts of the system such as lookups, queries, forms, and the admin to understand the capabilities of each model. The API is accessible through the <code>_meta</code> attribute of each model class, which is an instance of an <code>django.db.models.options.Options</code> object.</p> <p>Methods that it provides can be used to:</p> <ul class="simple"> <li>Retrieve all field instances of a model</li> <li>Retrieve a single field instance of a model by name</li> </ul>  <h2 id="model-meta-field-api">Field access API</h2>  <h3 id="retrieving-a-single-field-instance-of-a-model-by-name">Retrieving a single field instance of a model by name</h3> <dl class="method" id="s-field-access-api"> <dt id="django.db.models.options.Options.get_field">
<code>Options.get_field(field_name)</code> <a class="reference internal" href="https://docs.djangoproject.com/en/1.11/_modules/django/db/models/options/#Options.get_field"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Returns the field instance given a name of a field.</p> <p><code>field_name</code> can be the name of a field on the model, a field on an abstract or inherited model, or a field defined on another model that points to the model. In the latter case, the <code>field_name</code> will be the <code>related_name</code> defined by the user or the name automatically generated by Django itself.</p> <p><a class="reference internal" href="fields#django.db.models.Field.hidden" title="django.db.models.Field.hidden"><code>Hidden fields</code></a> cannot be retrieved by name.</p> <p>If a field with the given name is not found a <a class="reference internal" href="../exceptions#django.core.exceptions.FieldDoesNotExist" title="django.core.exceptions.FieldDoesNotExist"><code>FieldDoesNotExist</code></a> exception will be raised.</p> <pre data-language="python">&gt;&gt;&gt; from django.contrib.auth.models import User

# A field on the model
&gt;&gt;&gt; User._meta.get_field('username')
&lt;django.db.models.fields.CharField: username&gt;

# A field from another model that has a relation with the current model
&gt;&gt;&gt; User._meta.get_field('logentry')
&lt;ManyToOneRel: admin.logentry&gt;

# A non existent field
&gt;&gt;&gt; User._meta.get_field('does_not_exist')
Traceback (most recent call last):
    ...
FieldDoesNotExist: User has no field named 'does_not_exist'
</pre> </dd>
</dl>   <h3 id="retrieving-all-field-instances-of-a-model">Retrieving all field instances of a model</h3> <dl class="method" id="s-retrieving-all-field-instances-of-a-model"> <dt id="django.db.models.options.Options.get_fields">
<code>Options.get_fields(include_parents=True, include_hidden=False)</code> <a class="reference internal" href="https://docs.djangoproject.com/en/1.11/_modules/django/db/models/options/#Options.get_fields"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Returns a tuple of fields associated with a model. <code>get_fields()</code> accepts two parameters that can be used to control which fields are returned:</p> <dl class="docutils"> <dt>
<code>include_parents</code> </dt> <dd>
<code>True</code> by default. Recursively includes fields defined on parent classes. If set to <code>False</code>, <code>get_fields()</code> will only search for fields declared directly on the current model. Fields from models that directly inherit from abstract models or proxy classes are considered to be local, not on the parent.</dd> <dt>
<code>include_hidden</code> </dt> <dd>
<code>False</code> by default. If set to <code>True</code>, <code>get_fields()</code> will include fields that are used to back other field’s functionality. This will also include any fields that have a <code>related_name</code> (such as <a class="reference internal" href="fields#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a>, or <a class="reference internal" href="fields#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a>) that start with a “+”.</dd> </dl> <pre data-language="python">&gt;&gt;&gt; from django.contrib.auth.models import User
&gt;&gt;&gt; User._meta.get_fields()
(&lt;ManyToOneRel: admin.logentry&gt;,
 &lt;django.db.models.fields.AutoField: id&gt;,
 &lt;django.db.models.fields.CharField: password&gt;,
 &lt;django.db.models.fields.DateTimeField: last_login&gt;,
 &lt;django.db.models.fields.BooleanField: is_superuser&gt;,
 &lt;django.db.models.fields.CharField: username&gt;,
 &lt;django.db.models.fields.CharField: first_name&gt;,
 &lt;django.db.models.fields.CharField: last_name&gt;,
 &lt;django.db.models.fields.EmailField: email&gt;,
 &lt;django.db.models.fields.BooleanField: is_staff&gt;,
 &lt;django.db.models.fields.BooleanField: is_active&gt;,
 &lt;django.db.models.fields.DateTimeField: date_joined&gt;,
 &lt;django.db.models.fields.related.ManyToManyField: groups&gt;,
 &lt;django.db.models.fields.related.ManyToManyField: user_permissions&gt;)

# Also include hidden fields.
&gt;&gt;&gt; User._meta.get_fields(include_hidden=True)
(&lt;ManyToOneRel: auth.user_groups&gt;,
 &lt;ManyToOneRel: auth.user_user_permissions&gt;,
 &lt;ManyToOneRel: admin.logentry&gt;,
 &lt;django.db.models.fields.AutoField: id&gt;,
 &lt;django.db.models.fields.CharField: password&gt;,
 &lt;django.db.models.fields.DateTimeField: last_login&gt;,
 &lt;django.db.models.fields.BooleanField: is_superuser&gt;,
 &lt;django.db.models.fields.CharField: username&gt;,
 &lt;django.db.models.fields.CharField: first_name&gt;,
 &lt;django.db.models.fields.CharField: last_name&gt;,
 &lt;django.db.models.fields.EmailField: email&gt;,
 &lt;django.db.models.fields.BooleanField: is_staff&gt;,
 &lt;django.db.models.fields.BooleanField: is_active&gt;,
 &lt;django.db.models.fields.DateTimeField: date_joined&gt;,
 &lt;django.db.models.fields.related.ManyToManyField: groups&gt;,
 &lt;django.db.models.fields.related.ManyToManyField: user_permissions&gt;)
</pre> </dd>
</dl>    <h2 id="migrating-old-meta-api">Migrating from the old API</h2> <p id="s-migrating-from-the-old-api">As part of the formalization of the <code>Model._meta</code> API (from the <a class="reference internal" href="#django.db.models.options.Options" title="django.db.models.options.Options"><code>django.db.models.options.Options</code></a> class), a number of methods and properties have been deprecated and will be removed in Django 1.10.</p> <p>These old APIs can be replicated by either:</p> <ul class="simple"> <li>invoking <a class="reference internal" href="#django.db.models.options.Options.get_field" title="django.db.models.options.Options.get_field"><code>Options.get_field()</code></a>, or;</li> <li>invoking <a class="reference internal" href="#django.db.models.options.Options.get_fields" title="django.db.models.options.Options.get_fields"><code>Options.get_fields()</code></a> to retrieve a list of all fields, and then filtering this list using the <a class="reference internal" href="fields#model-field-attributes"><span class="std std-ref">field attributes</span></a> that describe (or retrieve, in the case of <code>_with_model</code> variants) the properties of the desired fields.</li> </ul> <p>Although it’s possible to make strictly equivalent replacements of the old methods, that might not be the best approach. Taking the time to refactor any field loops to make better use of the new API - and possibly include fields that were previously excluded - will almost certainly result in better code.</p> <p>Assuming you have a model named <code>MyModel</code>, the following substitutions can be made to convert your code to the new API:</p> <ul> <li>
<p class="first"><code>MyModel._meta.get_field(name)</code> becomes:</p> <pre data-language="python">f = MyModel._meta.get_field(name)
</pre> <p>then check if:</p> <ul class="simple"> <li>
<code>f.auto_created == False</code>, because the new <code>get_field()</code> API will find “reverse” relations, and:</li> <li>
<code>f.is_relation and f.related_model is None</code>, because the new <code>get_field()</code> API will find <a class="reference internal" href="../contrib/contenttypes#django.contrib.contenttypes.fields.GenericForeignKey" title="django.contrib.contenttypes.fields.GenericForeignKey"><code>GenericForeignKey</code></a> relations.</li> </ul> </li> <li>
<p class="first"><code>MyModel._meta.get_field_by_name(name)</code> returns a tuple of these four values with the following replacements:</p> <ul> <li>
<code>field</code> can be found by <code>MyModel._meta.get_field(name)</code> </li> <li>
<code>model</code> can be found through the <a class="reference internal" href="fields#django.db.models.Field.model" title="django.db.models.Field.model"><code>model</code></a> attribute on the field. </li> <li>
<p class="first"><code>direct</code> can be found by: <code>not field.auto_created or field.concrete</code></p> <p>The <a class="reference internal" href="fields#django.db.models.Field.auto_created" title="django.db.models.Field.auto_created"><code>auto_created</code></a> check excludes all “forward” and “reverse” relations that are created by Django, but this also includes <code>AutoField</code> and <code>OneToOneField</code> on proxy models. We avoid filtering out these attributes using the <a class="reference internal" href="fields#django.db.models.Field.concrete" title="django.db.models.Field.concrete"><code>concrete</code></a> attribute.</p> </li> <li>
<code>m2m</code> can be found through the <a class="reference internal" href="fields#django.db.models.Field.many_to_many" title="django.db.models.Field.many_to_many"><code>many_to_many</code></a> attribute on the field. </li> </ul> </li> <li>
<p class="first"><code>MyModel._meta.get_fields_with_model()</code> becomes:</p> <pre data-language="python">[
    (f, f.model if f.model != MyModel else None)
    for f in MyModel._meta.get_fields()
    if not f.is_relation
        or f.one_to_one
        or (f.many_to_one and f.related_model)
]
</pre> </li> <li>
<p class="first"><code>MyModel._meta.get_concrete_fields_with_model()</code> becomes:</p> <pre data-language="python">[
    (f, f.model if f.model != MyModel else None)
    for f in MyModel._meta.get_fields()
    if f.concrete and (
        not f.is_relation
        or f.one_to_one
        or (f.many_to_one and f.related_model)
    )
]
</pre> </li> <li>
<p class="first"><code>MyModel._meta.get_m2m_with_model()</code> becomes:</p> <pre data-language="python">[
    (f, f.model if f.model != MyModel else None)
    for f in MyModel._meta.get_fields()
    if f.many_to_many and not f.auto_created
]
</pre> </li> <li>
<p class="first"><code>MyModel._meta.get_all_related_objects()</code> becomes:</p> <pre data-language="python">[
    f for f in MyModel._meta.get_fields()
    if (f.one_to_many or f.one_to_one)
    and f.auto_created and not f.concrete
]
</pre> </li> <li>
<p class="first"><code>MyModel._meta.get_all_related_objects_with_model()</code> becomes:</p> <pre data-language="python">[
    (f, f.model if f.model != MyModel else None)
    for f in MyModel._meta.get_fields()
    if (f.one_to_many or f.one_to_one)
    and f.auto_created and not f.concrete
]
</pre> </li> <li>
<p class="first"><code>MyModel._meta.get_all_related_many_to_many_objects()</code> becomes:</p> <pre data-language="python">[
    f for f in MyModel._meta.get_fields(include_hidden=True)
    if f.many_to_many and f.auto_created
]
</pre> </li> <li>
<p class="first"><code>MyModel._meta.get_all_related_m2m_objects_with_model()</code> becomes:</p> <pre data-language="python">[
    (f, f.model if f.model != MyModel else None)
    for f in MyModel._meta.get_fields(include_hidden=True)
    if f.many_to_many and f.auto_created
]
</pre> </li> <li>
<p class="first"><code>MyModel._meta.get_all_field_names()</code> becomes:</p> <pre data-language="python">from itertools import chain
list(set(chain.from_iterable(
    (field.name, field.attname) if hasattr(field, 'attname') else (field.name,)
    for field in MyModel._meta.get_fields()
    # For complete backwards compatibility, you may want to exclude
    # GenericForeignKey from the results.
    if not (field.many_to_one and field.related_model is None)
)))
</pre> <p>This provides a 100% backwards compatible replacement, ensuring that both field names and attribute names <code>ForeignKey</code>s are included, but fields associated with <code>GenericForeignKey</code>s are not. A simpler version would be:</p> <pre data-language="python">[f.name for f in MyModel._meta.get_fields()]
</pre> <p>While this isn’t 100% backwards compatible, it may be sufficient in many situations.</p> </li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © Django Software Foundation and individual contributors<br>Licensed under the BSD License.<br>
    <a href="https://docs.djangoproject.com/en/1.11/ref/models/meta/" class="_attribution-link">https://docs.djangoproject.com/en/1.11/ref/models/meta/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
