
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Daisy - R - W3cubDocs</title>
  
  <meta name="description" content="Compute all the pairwise dissimilarities (distances) between observations in the data set. The original variables may be of mixed types. In that &hellip;">
  <meta name="keywords" content="daisy, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/cluster/html/daisy.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>daisy</code> Dissimilarity Matrix Calculation</h2> <h3>Description</h3> <p>Compute all the pairwise dissimilarities (distances) between observations in the data set. The original variables may be of mixed types. In that case, or whenever <code>metric = "gower"</code> is set, a generalization of Gower's formula is used, see ‘Details’ below. </p> <h3>Usage</h3> <pre data-language="r">
daisy(x, metric = c("euclidean", "manhattan", "gower"),
      stand = FALSE, type = list(), weights = rep.int(1, p),
      warnBin = warnType, warnAsym = warnType, warnConst = warnType,
      warnType = TRUE)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>x</code></td> <td> <p>numeric matrix or data frame, of dimension <i>n x p</i>, say. Dissimilarities will be computed between the rows of <code>x</code>. Columns of mode <code>numeric</code> (i.e. all columns when <code>x</code> is a matrix) will be recognized as interval scaled variables, columns of class <code>factor</code> will be recognized as nominal variables, and columns of class <code>ordered</code> will be recognized as ordinal variables. Other variable types should be specified with the <code>type</code> argument. Missing values (<code><a href="../../base/html/na">NA</a></code>s) are allowed. </p> </td>
</tr> <tr valign="top">
<td><code>metric</code></td> <td> <p>character string specifying the metric to be used. The currently available options are <code>"euclidean"</code> (the default), <code>"manhattan"</code> and <code>"gower"</code>.<br> Euclidean distances are root sum-of-squares of differences, and manhattan distances are the sum of absolute differences. </p> <p>“Gower's distance” is chosen by metric <code>"gower"</code> or automatically if some columns of <code>x</code> are not numeric. Also known as Gower's coefficient (1971), expressed as a dissimilarity, this implies that a particular standardisation will be applied to each variable, and the “distance” between two units is the sum of all the variable-specific distances, see the details section. </p> </td>
</tr> <tr valign="top">
<td><code>stand</code></td> <td> <p>logical flag: if TRUE, then the measurements in <code>x</code> are standardized before calculating the dissimilarities. Measurements are standardized for each variable (column), by subtracting the variable's mean value and dividing by the variable's mean absolute deviation. </p> <p>If not all columns of <code>x</code> are numeric, <code>stand</code> will be ignored and Gower's standardization (based on the <code><a href="../../base/html/range">range</a></code>) will be applied in any case, see argument <code>metric</code>, above, and the details section. </p> </td>
</tr> <tr valign="top">
<td><code>type</code></td> <td> <p>list for specifying some (or all) of the types of the variables (columns) in <code>x</code>. The list may contain the following components: <code>"ordratio"</code> (ratio scaled variables to be treated as ordinal variables), <code>"logratio"</code> (ratio scaled variables that must be logarithmically transformed), <code>"asymm"</code> (asymmetric binary) and <code>"symm"</code> (symmetric binary variables). Each component's value is a vector, containing the names or the numbers of the corresponding columns of <code>x</code>. Variables not mentioned in the <code>type</code> list are interpreted as usual (see argument <code>x</code>). </p> </td>
</tr> <tr valign="top">
<td><code>weights</code></td> <td> <p>an optional numeric vector of length <i>p</i>(=<code>ncol(x)</code>); to be used in “case 2” (mixed variables, or <code>metric = "gower"</code>), specifying a weight for each variable (<code>x[,k]</code>) instead of <i>1</i> in Gower's original formula.</p> </td>
</tr> <tr valign="top">
<td><code>warnBin, warnAsym, warnConst</code></td> <td> <p>logicals indicating if the corresponding type checking warnings should be signalled (when found).</p> </td>
</tr> <tr valign="top">
<td><code>warnType</code></td> <td> <p>logical indicating if <em>all</em> the type checking warnings should be active or not.</p> </td>
</tr> </table> <h3>Details</h3> <p>The original version of <code>daisy</code> is fully described in chapter 1 of Kaufman and Rousseeuw (1990). Compared to <code><a href="../../stats/html/dist">dist</a></code> whose input must be numeric variables, the main feature of <code>daisy</code> is its ability to handle other variable types as well (e.g. nominal, ordinal, (a)symmetric binary) even when different types occur in the same data set. </p> <p>The handling of nominal, ordinal, and (a)symmetric binary data is achieved by using the general dissimilarity coefficient of Gower (1971). If <code>x</code> contains any columns of these data-types, both arguments <code>metric</code> and <code>stand</code> will be ignored and Gower's coefficient will be used as the metric. This can also be activated for purely numeric data by <code>metric = "gower"</code>. With that, each variable (column) is first standardized by dividing each entry by the range of the corresponding variable, after subtracting the minimum value; consequently the rescaled variable has range <i>[0,1]</i>, exactly. </p> <p>Note that setting the type to <code>symm</code> (symmetric binary) gives the same dissimilarities as using <em>nominal</em> (which is chosen for non-ordered factors) only when no missing values are present, and more efficiently. </p> <p>Note that <code>daisy</code> signals a warning when 2-valued numerical variables do not have an explicit <code>type</code> specified, because the reference authors recommend to consider using <code>"asymm"</code>; the warning may be silenced by <code>warnBin = FALSE</code>. </p> <p>In the <code>daisy</code> algorithm, missing values in a row of x are not included in the dissimilarities involving that row. There are two main cases, </p> <ol> <li>
<p> If all variables are interval scaled (and <code>metric</code> is <em>not</em> <code>"gower"</code>), the metric is "euclidean", and <i>n_g</i> is the number of columns in which neither row i and j have NAs, then the dissimilarity d(i,j) returned is <i>sqrt(p/n_g)</i> (<i>p=</i>ncol(x)) times the Euclidean distance between the two vectors of length <i>n_g</i> shortened to exclude NAs. The rule is similar for the "manhattan" metric, except that the coefficient is <i>p/n_g</i>. If <i>n_g = 0</i>, the dissimilarity is NA. </p> </li> <li>
<p> When some variables have a type other than interval scaled, or if <code>metric = "gower"</code> is specified, the dissimilarity between two rows is the weighted mean of the contributions of each variable. Specifically, </p> <p style="text-align: center;"><i>d_ij = d(i,j) = sum(k=1:p; w_k delta(ij;k) d(ij,k)) / sum(k=1:p; w_k delta(ij;k)).</i></p> <p>In other words, <i>d_ij</i> is a weighted mean of <i>d(ij,k)</i> with weights <i>w_k delta(ij;k)</i>, where <i>w_k</i><code>= weigths[k]</code>, <i>delta(ij;k)</i> is 0 or 1, and <i>d(ij,k)</i>, the k-th variable contribution to the total distance, is a distance between <code>x[i,k]</code> and <code>x[j,k]</code>, see below. </p> <p>The 0-1 weight <i>delta(ij;k)</i> becomes zero when the variable <code>x[,k]</code> is missing in either or both rows (i and j), or when the variable is asymmetric binary and both values are zero. In all other situations it is 1. </p> <p>The contribution <i>d(ij,k)</i> of a nominal or binary variable to the total dissimilarity is 0 if both values are equal, 1 otherwise. The contribution of other variables is the absolute difference of both values, divided by the total range of that variable. Note that “standard scoring” is applied to ordinal variables, i.e., they are replaced by their integer codes <code>1:K</code>. Note that this is not the same as using their ranks (since there typically are ties). </p> <p>As the individual contributions <i>d(ij,k)</i> are in <i>[0,1]</i>, the dissimilarity <i>d_ij</i> will remain in this range. If all weights <i>w_k delta(ij;k)</i> are zero, the dissimilarity is set to <code><a href="../../base/html/na">NA</a></code>. </p> </li>
</ol> <h3>Value</h3> <p>an object of class <code>"dissimilarity"</code> containing the dissimilarities among the rows of <code>x</code>. This is typically the input for the functions <code>pam</code>, <code>fanny</code>, <code>agnes</code> or <code>diana</code>. For more details, see <code><a href="dissimilarity.object">dissimilarity.object</a></code>. </p> <h3>Background</h3> <p>Dissimilarities are used as inputs to cluster analysis and multidimensional scaling. The choice of metric may have a large impact. </p> <h3>Author(s)</h3> <p>Anja Struyf, Mia Hubert, and Peter and Rousseeuw, for the original version. <br> Martin Maechler improved the <code><a href="../../base/html/na">NA</a></code> handling and <code>type</code> specification checking, and extended functionality to <code>metric = "gower"</code> and the optional <code>weights</code> argument. </p> <h3>References</h3> <p>Gower, J. C. (1971) A general coefficient of similarity and some of its properties, <em>Biometrics</em> <b>27</b>, 857–874. </p> <p>Kaufman, L. and Rousseeuw, P.J. (1990) <em>Finding Groups in Data: An Introduction to Cluster Analysis</em>. Wiley, New York. </p> <p>Struyf, A., Hubert, M. and Rousseeuw, P.J. (1997) Integrating Robust Clustering Techniques in S-PLUS, <em>Computational Statistics and Data Analysis</em> <b>26</b>, 17–37. </p> <h3>See Also</h3> <p><code><a href="dissimilarity.object">dissimilarity.object</a></code>, <code><a href="../../stats/html/dist">dist</a></code>, <code><a href="pam">pam</a></code>, <code><a href="fanny">fanny</a></code>, <code><a href="clara">clara</a></code>, <code><a href="agnes">agnes</a></code>, <code><a href="diana">diana</a></code>. </p> <h3>Examples</h3> <pre data-language="r">
data(agriculture)
## Example 1 in ref:
##  Dissimilarities using Euclidean metric and without standardization
d.agr &lt;- daisy(agriculture, metric = "euclidean", stand = FALSE)
d.agr
as.matrix(d.agr)[,"DK"] # via as.matrix.dist(.)
## compare with
as.matrix(daisy(agriculture, metric = "gower"))

data(flower)
## Example 2 in ref
summary(dfl1 &lt;- daisy(flower, type = list(asymm = 3)))
summary(dfl2 &lt;- daisy(flower, type = list(asymm = c(1, 3), ordratio = 7)))
## this failed earlier:
summary(dfl3 &lt;- daisy(flower,
        type = list(asymm = c("V1", "V3"), symm= 2,
                    ordratio= 7, logratio= 8)))

</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
