
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>dyn.load - R - W3cubDocs</title>
  
  <meta name="description" content=" Load or unload DLLs (also known as shared objects), and test whether a C function or Fortran subroutine is available. ">
  <meta name="keywords" content="dyn, load, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/base/html/dynload.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>dynload</code> Foreign Function Interface</h2> <h3>Description</h3> <p>Load or unload DLLs (also known as shared objects), and test whether a C function or Fortran subroutine is available. </p> <h3>Usage</h3> <pre data-language="r">
dyn.load(x, local = TRUE, now = TRUE, ...)
dyn.unload(x)

is.loaded(symbol, PACKAGE = "", type = "")
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>x</code></td> <td> <p>a character string giving the pathname to a DLL, also known as a dynamic shared object. (See ‘Details’ for what these terms mean.)</p> </td>
</tr> <tr valign="top">
<td><code>local</code></td> <td> <p>a logical value controlling whether the symbols in the DLL are stored in their own local table and not shared across DLLs, or added to the global symbol table. Whether this has any effect is system-dependent. </p> </td>
</tr> <tr valign="top">
<td><code>now</code></td> <td> <p>a logical controlling whether all symbols are resolved (and relocated) immediately the library is loaded or deferred until they are used. This control is useful for developers testing whether a library is complete and has all the necessary symbols, and for users to ignore missing symbols. Whether this has any effect is system-dependent. </p> </td>
</tr> <tr valign="top">
<td><code>...</code></td> <td> <p>other arguments for future expansion. </p> </td>
</tr> <tr valign="top">
<td><code>symbol</code></td> <td> <p>a character string giving a symbol name.</p> </td>
</tr> <tr valign="top">
<td><code>PACKAGE</code></td> <td> <p>if supplied, confine the search for the <code>name</code> to the DLL given by this argument (plus the conventional extension, ‘<span class="file">.so</span>’, ‘<span class="file">.sl</span>’, ‘<span class="file">.dll</span>’, ...). This is intended to add safety for packages, which can ensure by using this argument that no other package can override their external symbols. This is used in the same way as in <code><a href="foreign">.C</a></code>, <code><a href="callexternal">.Call</a></code>, <code><a href="foreign">.Fortran</a></code> and <code><a href="callexternal">.External</a></code> functions.</p> </td>
</tr> <tr valign="top">
<td><code>type</code></td> <td> <p>The type of symbol to look for: can be any (<code>""</code>, the default), <code>"Fortran"</code>, <code>"Call"</code> or <code>"External"</code>.</p> </td>
</tr> </table> <h3>Details</h3> <p>The objects <code>dyn.load</code> loads are called ‘dynamically loadable libraries’ (abbreviated to ‘DLL’) on all platforms except macOS, which uses the term for a different sort of object. On Unix-alikes they are also called ‘dynamic shared objects’ (‘DSO’), or ‘shared objects’ for short. (The POSIX standards use ‘executable object file’, but no one else does.) </p> <p>See ‘See Also’ and the ‘Writing R Extensions’ and ‘R Installation and Administration’ manuals for how to create and install a suitable DLL. </p> <p>Unfortunately a very few platforms (e.g., Compaq Tru64) do not handle the <code>PACKAGE</code> argument correctly, and may incorrectly find symbols linked into <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. </p> <p>The additional arguments to <code>dyn.load</code> mirror the different aspects of the mode argument to the <code>dlopen()</code> routine on POSIX systems. They are available so that users can exercise greater control over the loading process for an individual library. In general, the default values are appropriate and you should override them only if there is good reason and you understand the implications. </p> <p>The <code>local</code> argument allows one to control whether the symbols in the DLL being attached are visible to other DLLs. While maintaining the symbols in their own namespace is good practice, the ability to share symbols across related ‘chapters’ is useful in many cases. Additionally, on certain platforms and versions of an operating system, certain libraries must have their symbols loaded globally to successfully resolve all symbols. </p> <p>One should be careful of the potential side-effect of using lazy loading via the <code>now</code> argument as <code>FALSE</code>. If a routine is called that has a missing symbol, the process will terminate immediately. The intended use is for library developers to call with value <code>TRUE</code> to check that all symbols are actually resolved and for regular users to call with <code>FALSE</code> so that missing symbols can be ignored and the available ones can be called. </p> <p>The initial motivation for adding these was to avoid such termination in the <code>_init()</code> routines of the Java virtual machine library. However, symbols loaded locally may not be (read probably) available to other DLLs. Those added to the global table are available to all other elements of the application and so can be shared across two different DLLs. </p> <p>Some (very old) systems do not provide (explicit) support for local/global and lazy/eager symbol resolution. This can be the source of subtle bugs. One can arrange to have warning messages emitted when unsupported options are used. This is done by setting either of the options <code>verbose</code> or <code>warn</code> to be non-zero via the <code><a href="options">options</a></code> function. </p> <p>There is a short discussion of these additional arguments with some example code available at <a href="http://www.stat.ucdavis.edu/~duncan/R/dynload/">http://www.stat.ucdavis.edu/~duncan/R/dynload/</a>. </p> <h3>Value</h3> <p>The function <code>dyn.load</code> is used for its side effect which links the specified DLL to the executing <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> image. Calls to <code>.C</code>, <code>.Call</code>, <code>.Fortran</code> and <code>.External</code> can then be used to execute compiled C functions or Fortran subroutines contained in the library. The return value of <code>dyn.load</code> is an object of class <code>DLLInfo</code>. See <code><a href="getloadeddlls">getLoadedDLLs</a></code> for information about this class. </p> <p>The function <code>dyn.unload</code> unlinks the DLL. Note that unloading a DLL and then re-loading a DLL of the same name may or may not work: on Solaris it uses the first version loaded. Note also that some DLLs cannot be safely unloaded at all: unloading a DLL which implements C finalizers but does not unregister them on unload causes R to crash. </p> <p><code>is.loaded</code> checks if the symbol name is loaded <em>and searchable</em> and hence available for use as a character string value for argument <code>.NAME</code> in <code>.C</code> or <code>.Fortran</code> or <code>.Call</code> or <code>.External</code>. It will succeed if any one of the four calling functions would succeed in using the entry point unless <code>type</code> is specified. (See <code><a href="foreign">.Fortran</a></code> for how Fortran symbols are mapped.) Note that symbols in base packages are not searchable, and other packages can be so marked. </p> <h3>Warning</h3> <p>Do not use <code>dyn.unload</code> on a DLL loaded by <code><a href="library.dynam">library.dynam</a></code>: use <code><a href="library.dynam">library.dynam.unload</a></code>. This is needed for system housekeeping. </p> <h3>Note</h3> <p><code>is.loaded</code> requires the name you would give to <code>.C</code> etc and <strong>not</strong> (as in S) that remapped by the defunct functions <code>symbol.C</code> or <code>symbol.For</code>. </p> <p>By default, the maximum number of DLLs that can be loaded is now 614 when the OS limit on the number of open files allows or can be increased, but less otherwise (but it will be at least 100). A specific maximum can be requested <em>via</em> the environment variable <span class="env">R_MAX_NUM_DLLS</span>, which has to be set (to a value between 100 and 1000 inclusive) before starting an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session. If the OS limit on the number of open files does not allow using this maximum and cannot be increased, <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> will fail to start with an error. The maximum is not allowed to be greater than 60% of the OS limit on the number of open files (essentially unlimited on Windows, on Unix typically 1024, but 256 on macOS). The limit can sometimes (including on macOS) be modified using command <code>ulimit -n</code> (<code>sh</code>, <code>bash</code>) or <code>limit descriptors</code> (<code>csh</code>) in the shell used to launch <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. Increasing <span class="env">R_MAX_NUM_DLLS</span> comes with some memory overhead. </p> <p>If the OS limit on the number of open files cannot be determined, the DLL limit is 100 and cannot be changed <em>via</em> <span class="env">R_MAX_NUM_DLLS</span>. </p> <p>The creation of DLLs and the runtime linking of them into executing programs is very platform dependent. In recent years there has been some simplification in the process because the C subroutine call <code>dlopen</code> has become the POSIX standard for doing this. Under Unix-alikes <code>dyn.load</code> uses the <code>dlopen</code> mechanism and should work on all platforms which support it. On Windows it uses the standard mechanism (<code>LoadLibrary</code>) for loading DLLs. </p> <p>The original code for loading DLLs in Unix-alikes was provided by Heiner Schwarte. </p> <h3>References</h3> <p>Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) <em>The New S Language</em>. Wadsworth &amp; Brooks/Cole. </p> <h3>See Also</h3> <p><code><a href="library.dynam">library.dynam</a></code> to be used inside a package's <code><a href="ns-hooks">.onLoad</a></code> initialization. </p> <p><code><a href="../../utils/html/shlib">SHLIB</a></code> for how to create suitable DLLs. </p> <p><code><a href="foreign">.C</a></code>, <code><a href="foreign">.Fortran</a></code>, <code><a href="callexternal">.External</a></code>, <code><a href="callexternal">.Call</a></code>. </p> <h3>Examples</h3> <pre data-language="r">
## expect all of these to be false in R &gt;= 3.0.0.
is.loaded("supsmu") # Fortran entry point in stats
is.loaded("supsmu", "stats", "Fortran")
is.loaded("PDF", type = "External") # pdf() device in grDevices
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
