
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Functions to Access the Function Call Stack - R - W3cubDocs</title>
  
  <meta name="description" content=" These functions provide access to environments (‘frames’ in S terminology) associated with functions further up the calling stack. ">
  <meta name="keywords" content="functions, access, function, call, stack, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/base/html/sys.parent.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>sys.parent</code> Functions to Access the Function Call Stack</h2> <h3>Description</h3> <p>These functions provide access to <code><a href="environment">environment</a></code>s (‘frames’ in S terminology) associated with functions further up the calling stack. </p> <h3>Usage</h3> <pre data-language="r">
sys.call(which = 0)
sys.frame(which = 0)
sys.nframe()
sys.function(which = 0)
sys.parent(n = 1)

sys.calls()
sys.frames()
sys.parents()
sys.on.exit()
sys.status()
parent.frame(n = 1)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>which</code></td> <td> <p>the frame number if non-negative, the number of frames to go back if negative.</p> </td>
</tr> <tr valign="top">
<td><code>n</code></td> <td> <p>the number of generations to go back. (See the ‘Details’ section.)</p> </td>
</tr> </table> <h3>Details</h3> <p><code><a href="environment">.GlobalEnv</a></code> is given number 0 in the list of frames. Each subsequent function evaluation increases the frame stack by 1. The call, function definition and the environment for evaluation of that function are returned by <code>sys.call</code>, <code>sys.function</code> and <code>sys.frame</code> with the appropriate index. </p> <p><code>sys.call</code>, <code>sys.function</code> and <code>sys.frame</code> accept integer values for the argument <code>which</code>. Non-negative values of <code>which</code> are frame numbers starting from <code><a href="environment">.GlobalEnv</a></code> whereas negative values are counted back from the frame number of the current evaluation. </p> <p>The parent frame of a function evaluation is the environment in which the function was called. It is not necessarily numbered one less than the frame number of the current evaluation, nor is it the environment within which the function was defined. <code>sys.parent</code> returns the number of the parent frame if <code>n</code> is 1 (the default), the grandparent if <code>n</code> is 2, and so on. See also the ‘Note’. </p> <p><code>sys.nframe</code> returns an integer, the number of the current frame as described in the first paragraph. </p> <p><code>sys.calls</code> and <code>sys.frames</code> give a pairlist of all the active calls and frames, respectively, and <code>sys.parents</code> returns an integer vector of indices of the parent frames of each of those frames. </p> <p>Notice that even though the <code>sys.</code><em>xxx</em> functions (except <code>sys.status</code>) are interpreted, their contexts are not counted nor are they reported. There is no access to them. </p> <p><code>sys.status()</code> returns a list with components <code>sys.calls</code>, <code>sys.parents</code> and <code>sys.frames</code>, the results of calls to those three functions (which will include the call to <code>sys.status</code>: see the first example). </p> <p><code>sys.on.exit()</code> returns the expression stored for use by <code><a href="on.exit">on.exit</a></code> in the function currently being evaluated. (Note that this differs from S, which returns a list of expressions for the current frame and its parents.) </p> <p><code>parent.frame(n)</code> is a convenient shorthand for <code>sys.frame(sys.parent(n))</code> (implemented slightly more efficiently). </p> <h3>Value</h3> <p><code>sys.call</code> returns a call, <code>sys.function</code> a function definition, and <code>sys.frame</code> and <code>parent.frame</code> return an environment. </p> <p>For the other functions, see the ‘Details’ section. </p> <h3>Note</h3> <p>Strictly, <code>sys.parent</code> and <code>parent.frame</code> refer to the <em>context</em> of the parent interpreted function. So internal functions (which may or may not set contexts and so may or may not appear on the call stack) may not be counted, and S3 methods can also do surprising things. </p> <p>As an effect of lazy evaluation, these functions look at the call stack at the time they are evaluated, not at the time they are called. Passing calls to them as function arguments is unlikely to be a good idea, but these functions still look at the call stack and count frames from the frame of the function evaluation from which they were called. </p> <p>Hence, when these functions are called to provide default values for function arguments, they are evaluated in the evaluation of the called function and they count frames accordingly (see e.g. the <code>envir</code> argument of <code><a href="eval">eval</a></code>). </p> <h3>References</h3> <p>Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) <em>The New S Language</em>. Wadsworth &amp; Brooks/Cole. (Not <code>parent.frame</code>.) </p> <h3>See Also</h3> <p><code><a href="eval">eval</a></code> for a usage of <code>sys.frame</code> and <code>parent.frame</code>. </p> <h3>Examples</h3> <pre data-language="r">
require(utils)

## Note: the first two examples will give different results
## if run by example().
ff &lt;- function(x) gg(x)
gg &lt;- function(y) sys.status()
str(ff(1))

gg &lt;- function(y) {
    ggg &lt;- function() {
        cat("current frame is", sys.nframe(), "\n")
        cat("parents are", sys.parents(), "\n")
        print(sys.function(0)) # ggg
        print(sys.function(2)) # gg
    }
    if(y &gt; 0) gg(y-1) else ggg()
}
gg(3)

t1 &lt;- function() {
  aa &lt;- "here"
  t2 &lt;- function() {
    ## in frame 2 here
    cat("current frame is", sys.nframe(), "\n")
    str(sys.calls()) ## list with two components t1() and t2()
    cat("parents are frame numbers", sys.parents(), "\n") ## 0 1
    print(ls(envir = sys.frame(-1))) ## [1] "aa" "t2"
    invisible()
  }
  t2()
}
t1()

test.sys.on.exit &lt;- function() {
  on.exit(print(1))
  ex &lt;- sys.on.exit()
  str(ex)
  cat("exiting...\n")
}
test.sys.on.exit()
## gives 'language print(1)', prints 1 on exit

## An example where the parent is not the next frame up the stack
## since method dispatch uses a frame.
as.double.foo &lt;- function(x)
{
    str(sys.calls())
    print(sys.frames())
    print(sys.parents())
    print(sys.frame(-1)); print(parent.frame())
    x
}
t2 &lt;- function(x) as.double(x)
a &lt;- structure(pi, class = "foo")
t2(a)
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
