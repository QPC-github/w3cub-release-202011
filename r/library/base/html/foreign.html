
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Foreign - R - W3cubDocs</title>
  
  <meta name="description" content=" Functions to make calls to compiled code that has been loaded into R. ">
  <meta name="keywords" content="foreign, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/base/html/foreign.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>Foreign</code> Foreign Function Interface</h2> <h3>Description</h3> <p>Functions to make calls to compiled code that has been loaded into <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. </p> <h3>Usage</h3> <pre data-language="r">
       .C(.NAME, ..., NAOK = FALSE, DUP = TRUE, PACKAGE, ENCODING)
 .Fortran(.NAME, ..., NAOK = FALSE, DUP = TRUE, PACKAGE, ENCODING)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>.NAME</code></td> <td> <p>a character string giving the name of a C function or Fortran subroutine, or an object of class <code>"<a href="getnativesymbolinfo">NativeSymbolInfo</a>"</code>, <code>"<a href="getnativesymbolinfo">RegisteredNativeSymbol</a>"</code> or <code>"<a href="getnativesymbolinfo">NativeSymbol</a>"</code> referring to such a name.</p> </td>
</tr> <tr valign="top">
<td><code>...</code></td> <td> <p>arguments to be passed to the foreign function. Up to 65.</p> </td>
</tr> <tr valign="top">
<td><code>NAOK</code></td> <td> <p>if <code>TRUE</code> then any <code><a href="na">NA</a></code> or <code><a href="is.finite">NaN</a></code> or <code><a href="is.finite">Inf</a></code> values in the arguments are passed on to the foreign function. If <code>FALSE</code>, the presence of <code>NA</code> or <code>NaN</code> or <code>Inf</code> values is regarded as an error.</p> </td>
</tr> <tr valign="top">
<td><code>PACKAGE</code></td> <td> <p>if supplied, confine the search for a character string <code>.NAME</code> to the DLL given by this argument (plus the conventional extension, ‘<span class="file">.so</span>’, ‘<span class="file">.dll</span>’, ...). </p> <p>This is intended to add safety for packages, which can ensure by using this argument that no other package can override their external symbols, and also speeds up the search (see ‘Note’).</p> </td>
</tr> <tr valign="top">
<td><code>DUP, ENCODING</code></td> <td> <p>For back-compatibility, accepted but ignored.</p> </td>
</tr> </table> <h3>Details</h3> <p>These functions can be used to make calls to compiled C and Fortran code. Later interfaces are <code><a href="callexternal">.Call</a></code> and <code><a href="callexternal">.External</a></code> which are more flexible and have better performance. </p> <p>These functions are <a href="primitive">primitive</a>, and <code>.NAME</code> is always matched to the first argument supplied (which should not be named). The other named arguments follow <code>...</code> and so cannot be abbreviated. For clarity, should avoid using names in the arguments passed to <code>...</code> that match or partially match <code>.NAME</code>. </p> <h3>Value</h3> <p>A list similar to the <code>...</code> list of arguments passed in (including any names given to the arguments), but reflecting any changes made by the C or Fortran code. </p> <h3>Argument types</h3> <p>The mapping of the types of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> arguments to C or Fortran arguments is </p> <table summary="Rd table"> <tr> <td style="text-align: left;"> <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> </td>
<td style="text-align: left;"> C </td>
<td style="text-align: left;"> Fortran</td> </tr> <tr> <td style="text-align: left;"> integer </td>
<td style="text-align: left;"> int * </td>
<td style="text-align: left;"> integer</td> </tr> <tr> <td style="text-align: left;"> numeric </td>
<td style="text-align: left;"> double * </td>
<td style="text-align: left;"> double precision</td> </tr> <tr> <td style="text-align: left;"> -- or -- </td>
<td style="text-align: left;"> float * </td>
<td style="text-align: left;"> real</td> </tr> <tr> <td style="text-align: left;"> complex </td>
<td style="text-align: left;"> Rcomplex * </td>
<td style="text-align: left;"> double complex</td> </tr> <tr> <td style="text-align: left;"> logical </td>
<td style="text-align: left;"> int * </td>
<td style="text-align: left;"> integer </td> </tr> <tr> <td style="text-align: left;"> character </td>
<td style="text-align: left;"> char ** </td>
<td style="text-align: left;"> [see below]</td> </tr> <tr> <td style="text-align: left;"> raw </td>
<td style="text-align: left;"> unsigned char * </td>
<td style="text-align: left;"> not allowed</td> </tr> <tr> <td style="text-align: left;"> list </td>
<td style="text-align: left;"> SEXP *</td>
<td style="text-align: left;"> not allowed</td> </tr> <tr> <td style="text-align: left;"> other </td>
<td style="text-align: left;"> SEXP</td>
<td style="text-align: left;"> not allowed</td> </tr> <tr> <td style="text-align: left;"> </td> </tr> </table> <p><em>Note:</em> The C types corresponding to <code>integer</code> and <code>logical</code> are <code>int</code>, not <code>long</code> as in S. This difference matters on most 64-bit platforms, where <code>int</code> is 32-bit and <code>long</code> is 64-bit (but not on 64-bit Windows). </p> <p><em>Note:</em> The Fortran type corresponding to <code>logical</code> is <code>integer</code>, not <code>logical</code>: the difference matters on some Fortran compilers. </p> <p>Numeric vectors in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> will be passed as type <code>double *</code> to C (and as <code>double precision</code> to Fortran) unless the argument has attribute <code>Csingle</code> set to <code>TRUE</code> (use <code><a href="double">as.single</a></code> or <code><a href="double">single</a></code>). This mechanism is only intended to be used to facilitate the interfacing of existing C and Fortran code. </p> <p>The C type <code>Rcomplex</code> is defined in ‘<span class="file">Complex.h</span>’ as a <code>typedef struct {double r; double i;}</code>. It may or may not be equivalent to the C99 <code>double complex</code> type, depending on the compiler used. </p> <p>Logical values are sent as <code>0</code> (<code>FALSE</code>), <code>1</code> (<code>TRUE</code>) or <code>INT_MIN = -2147483648</code> (<code>NA</code>, but only if <code>NAOK = TRUE</code>), and the compiled code should return one of these three values: however non-zero values other than <code>INT_MIN</code> are mapped to <code>TRUE</code>. </p> <p>Missing (<code>NA</code>) string values are passed to <code>.C</code> as the string "NA". As the C <code>char</code> type can represent all possible bit patterns there appears to be no way to distinguish missing strings from the string <code>"NA"</code>. If this distinction is important use <code><a href="callexternal">.Call</a></code>. </p> <p>Using a character string with <code>.Fortran</code> is deprecated and will give a warning. It passes the first (only) character string of a character vector as a C character array to Fortran: that may be usable as <code>character*255</code> if its true length is passed separately. Only up to 255 characters of the string are passed back. (How well this works, and even if it works at all, depends on the C and Fortran compilers and the platform.) </p> <p>Lists, functions or other <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> objects can (for historical reasons) be passed to <code>.C</code>, but the <code><a href="callexternal">.Call</a></code> interface is much preferred. All inputs apart from atomic vectors should be regarded as read-only, and all apart from vectors (including lists), functions and environments are now deprecated. </p> <h3>Fortran symbol names</h3> <p>All Fortran compilers known to be usable to compile <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> map symbol names to lower case, and so does <code>.Fortran</code>. </p> <p>Symbol names containing underscores are not valid Fortran 77 (although they are valid in Fortran 9x). Many Fortran 77 compilers will allow them but may translate them in a different way to names not containing underscores. Such names will often work with <code>.Fortran</code> (since how they are translated is detected when <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> is built and the information used by <code>.Fortran</code>), but portable code should not use Fortran names containing underscores. </p> <p>Use <code>.Fortran</code> with care for compiled Fortran 9x code: it may not work if the Fortran 9x compiler used differs from the Fortran compiler used when configuring <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, especially if the subroutine name is not lower-case or includes an underscore. It is possible to use <code>.C</code> and do any necessary symbol-name translation yourself. </p> <h3>Copying of arguments</h3> <p>Character vectors are copied before calling the compiled code and to collect the results. For other atomic vectors the argument is copied before calling the compiled code if it is otherwise used in the calling code. </p> <p>Non-atomic-vector objects are read-only to the C code and are never copied. </p> <p>This behaviour can be changed by setting <code><a href="options">options</a>(CBoundsCheck = TRUE)</code>. In that case raw, logical, integer, double and complex vector arguments are copied both before and after calling the compiled code. The first copy made is extended at each end by guard bytes, and on return it is checked that these are unaltered. For <code>.C</code>, each element of a character vector uses guard bytes. </p> <h3>Note</h3> <p>If one of these functions is to be used frequently, do specify <code>PACKAGE</code> (to confine the search to a single DLL) or pass <code>.NAME</code> as one of the native symbol objects. Searching for symbols can take a long time, especially when many namespaces are loaded. </p> <p>You may see <code>PACKAGE = "base"</code> for symbols linked into <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. Do not use this in your own code: such symbols are not part of the API and may be changed without warning. </p> <h3>References</h3> <p>Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) <em>The New S Language</em>. Wadsworth &amp; Brooks/Cole. </p> <h3>See Also</h3> <p><code><a href="dynload">dyn.load</a></code>, <code><a href="callexternal">.Call</a></code>. </p> <p>The ‘Writing R Extensions’ manual. </p>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
