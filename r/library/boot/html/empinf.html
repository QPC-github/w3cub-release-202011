
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Empinf - R - W3cubDocs</title>
  
  <meta name="description" content="This function calculates the empirical influence values for a statistic applied to a data set. It allows four types of calculation, namely the &hellip;">
  <meta name="keywords" content="empinf, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/boot/html/empinf.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>empinf</code>  Empirical Influence Values </h2> <h3>Description</h3> <p>This function calculates the empirical influence values for a statistic applied to a data set. It allows four types of calculation, namely the infinitesimal jackknife (using numerical differentiation), the usual jackknife estimates, the ‘positive’ jackknife estimates and a method which estimates the empirical influence values using regression of bootstrap replicates of the statistic. All methods can be used with one or more samples. </p> <h3>Usage</h3> <pre data-language="r">
empinf(boot.out = NULL, data = NULL, statistic = NULL,
       type = NULL, stype = NULL ,index = 1, t = NULL,
       strata = rep(1, n), eps = 0.001, ...)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>boot.out</code></td> <td> <p>A bootstrap object created by the function <code>boot</code>. If <code>type</code> is <code>"reg"</code> then this argument is required. For any of the other types it is an optional argument. If it is included when optional then the values of <code>data</code>, <code>statistic</code>, <code>stype</code>, and <code>strata</code> are taken from the components of <code>boot.out</code> and any values passed to <code>empinf</code> directly are ignored. </p> </td>
</tr> <tr valign="top">
<td><code>data</code></td> <td> <p>A vector, matrix or data frame containing the data for which empirical influence values are required. It is a required argument if <code>boot.out</code> is not supplied. If <code>boot.out</code> is supplied then <code>data</code> is set to <code>boot.out$data</code> and any value supplied is ignored. </p> </td>
</tr> <tr valign="top">
<td><code>statistic</code></td> <td> <p>The statistic for which empirical influence values are required. It must be a function of at least two arguments, the data set and a vector of weights, frequencies or indices. The nature of the second argument is given by the value of <code>stype</code>. Any other arguments that it takes must be supplied to <code>empinf</code> and will be passed to <code>statistic</code> unchanged. This is a required argument if <code>boot.out</code> is not supplied, otherwise its value is taken from <code>boot.out</code> and any value supplied here will be ignored. </p> </td>
</tr> <tr valign="top">
<td><code>type</code></td> <td> <p>The calculation type to be used for the empirical influence values. Possible values of <code>type</code> are <code>"inf"</code> (infinitesimal jackknife), <code>"jack"</code> (usual jackknife), <code>"pos"</code> (positive jackknife), and <code>"reg"</code> (regression estimation). The default value depends on the other arguments. If <code>t</code> is supplied then the default value of <code>type</code> is <code>"reg"</code> and <code>boot.out</code> should be present so that its frequency array can be found. It <code>t</code> is not supplied then if <code>stype</code> is <code>"w"</code>, the default value of <code>type</code> is <code>"inf"</code>; otherwise, if <code>boot.out</code> is present the default is <code>"reg"</code>. If none of these conditions apply then the default is <code>"jack"</code>. Note that it is an error for <code>type</code> to be <code>"reg"</code> if <code>boot.out</code> is missing or to be <code>"inf"</code> if <code>stype</code> is not <code>"w"</code>. </p> </td>
</tr> <tr valign="top">
<td><code>stype</code></td> <td> <p>A character variable giving the nature of the second argument to <code>statistic</code>. It can take on three values: <code>"w"</code> (weights), <code>"f"</code> (frequencies), or <code>"i"</code> (indices). If <code>boot.out</code> is supplied the value of <code>stype</code> is set to <code>boot.out$stype</code> and any value supplied here is ignored. Otherwise it is an optional argument which defaults to <code>"w"</code>. If <code>type</code> is <code>"inf"</code> then <code>stype</code> MUST be <code>"w"</code>. </p> </td>
</tr> <tr valign="top">
<td><code>index</code></td> <td> <p>An integer giving the position of the variable of interest in the output of <code>statistic</code>. </p> </td>
</tr> <tr valign="top">
<td><code>t</code></td> <td> <p>A vector of length <code>boot.out$R</code> which gives the bootstrap replicates of the statistic of interest. <code>t</code> is used only when <code>type</code> is <code>reg</code> and it defaults to <code>boot.out$t[,index]</code>. </p> </td>
</tr> <tr valign="top">
<td><code>strata</code></td> <td> <p>An integer vector or a factor specifying the strata for multi-sample problems. If <code>boot.out</code> is supplied the value of <code>strata</code> is set to <code>boot.out$strata</code>. Otherwise it is an optional argument which has default corresponding to the single sample situation. </p> </td>
</tr> <tr valign="top">
<td><code>eps</code></td> <td> <p>This argument is used only if <code>type</code> is <code>"inf"</code>. In that case the value of epsilon to be used for numerical differentiation will be <code>eps</code> divided by the number of observations in <code>data</code>. </p> </td>
</tr> <tr valign="top">
<td><code>...</code></td> <td> <p>Any other arguments that <code>statistic</code> takes. They will be passed unchanged to <code>statistic</code> every time that it is called. </p> </td>
</tr> </table> <h3>Details</h3> <p>If <code>type</code> is <code>"inf"</code> then numerical differentiation is used to approximate the empirical influence values. This makes sense only for statistics which are written in weighted form (i.e. <code>stype</code> is <code>"w"</code>). If <code>type</code> is <code>"jack"</code> then the usual leave-one-out jackknife estimates of the empirical influence are returned. If <code>type</code> is <code>"pos"</code> then the positive (include-one-twice) jackknife values are used. If <code>type</code> is <code>"reg"</code> then a bootstrap object must be supplied. The regression method then works by regressing the bootstrap replicates of <code>statistic</code> on the frequency array from which they were derived. The bootstrap frequency array is obtained through a call to <code>boot.array</code>. Further details of the methods are given in Section 2.7 of Davison and Hinkley (1997). </p> <p>Empirical influence values are often used frequently in nonparametric bootstrap applications. For this reason many other functions call <code>empinf</code> when they are required. Some examples of their use are for nonparametric delta estimates of variance, BCa intervals and finding linear approximations to statistics for use as control variates. They are also used for antithetic bootstrap resampling. </p> <h3>Value</h3> <p>A vector of the empirical influence values of <code>statistic</code> applied to <code>data</code>. The values will be in the same order as the observations in data. </p> <h3>Warning</h3> <p>All arguments to <code>empinf</code> must be passed using the <code>name =
    value</code> convention. If this is not followed then unpredictable errors can occur. </p> <h3>References</h3> <p>Davison, A.C. and Hinkley, D.V. (1997) <em>Bootstrap Methods and Their Application</em>. Cambridge University Press. </p> <p>Efron, B. (1982) <em>The Jackknife, the Bootstrap and Other Resampling Plans</em>. CBMS-NSF Regional Conference Series in Applied Mathematics, <b>38</b>, SIAM. </p> <p>Fernholtz, L.T. (1983) <em>von Mises Calculus for Statistical Functionals</em>. Lecture Notes in Statistics, <b>19</b>, Springer-Verlag. </p> <h3>See Also</h3> <p><code><a href="boot">boot</a></code>, <code><a href="boot.array">boot.array</a></code>, <code><a href="boot.ci">boot.ci</a></code>, <code><a href="control">control</a></code>, <code><a href="jack.after.boot">jack.after.boot</a></code>, <code><a href="linear.approx">linear.approx</a></code>, <code><a href="var.linear">var.linear</a></code> </p> <h3>Examples</h3> <pre data-language="r">
# The empirical influence values for the ratio of means in
# the city data.
ratio &lt;- function(d, w) sum(d$x *w)/sum(d$u*w)
empinf(data = city, statistic = ratio)
city.boot &lt;- boot(city, ratio, 499, stype="w")
empinf(boot.out = city.boot, type = "reg")

# A statistic that may be of interest in the difference of means
# problem is the t-statistic for testing equality of means.  In
# the bootstrap we get replicates of the difference of means and
# the variance of that statistic and then want to use this output
# to get the empirical influence values of the t-statistic.
grav1 &lt;- gravity[as.numeric(gravity[,2]) &gt;= 7,]
grav.fun &lt;- function(dat, w) {
     strata &lt;- tapply(dat[, 2], as.numeric(dat[, 2]))
     d &lt;- dat[, 1]
     ns &lt;- tabulate(strata)
     w &lt;- w/tapply(w, strata, sum)[strata]
     mns &lt;- as.vector(tapply(d * w, strata, sum)) # drop names
     mn2 &lt;- tapply(d * d * w, strata, sum)
     s2hat &lt;- sum((mn2 - mns^2)/ns)
     c(mns[2] - mns[1], s2hat)
}

grav.boot &lt;- boot(grav1, grav.fun, R = 499, stype = "w",
                  strata = grav1[, 2])

# Since the statistic of interest is a function of the bootstrap
# statistics, we must calculate the bootstrap replicates and pass
# them to empinf using the t argument.
grav.z &lt;- (grav.boot$t[,1]-grav.boot$t0[1])/sqrt(grav.boot$t[,2])
empinf(boot.out = grav.boot, t = grav.z)
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
