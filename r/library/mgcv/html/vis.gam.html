
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>persp.gam - R - W3cubDocs</title>
  
  <meta name="description" content=" Produces perspective or contour plot views of gam model predictions, fixing all but the values in view to the values supplied in cond. ">
  <meta name="keywords" content="persp, gam, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/mgcv/html/vis.gam.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>vis.gam</code> Visualization of GAM objects</h2> <h3>Description</h3> <p> Produces perspective or contour plot views of <code>gam</code> model predictions, fixing all but the values in <code>view</code> to the values supplied in <code>cond</code>. </p> <h3>Usage</h3> <pre data-language="r">
vis.gam(x,view=NULL,cond=list(),n.grid=30,too.far=0,col=NA,
        color="heat",contour.col=NULL,se=-1,type="link",
        plot.type="persp",zlim=NULL,nCol=50,...)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>x</code></td> <td> <p>a <code>gam</code> object, produced by <code>gam()</code></p> </td>
</tr> <tr valign="top">
<td><code>view</code></td> <td> <p>an array containing the names of the two main effect terms to be displayed on the x and y dimensions of the plot. If omitted the first two suitable terms will be used. Note that variables coerced to factors in the model formula won't work as view variables, and <code>vis.gam</code> can not detect that this has happened when setting defaults. </p> </td>
</tr> <tr valign="top">
<td><code>cond</code></td> <td> <p>a named list of the values to use for the other predictor terms (not in <code>view</code>). Variables omitted from this list will have the closest observed value to the median for continuous variables, or the most commonly occuring level for factors. Parametric matrix variables have all the entries in each column set to the observed column entry closest to the column median. </p> </td>
</tr> <tr valign="top">
<td><code>n.grid</code></td> <td> <p>The number of grid nodes in each direction used for calculating the plotted surface.</p> </td>
</tr> <tr valign="top">
<td><code>too.far</code></td> <td> <p> plot grid nodes that are too far from the points defined by the variables given in <code>view</code> can be excluded from the plot. <code>too.far</code> determines what is too far. The grid is scaled into the unit square along with the <code>view</code> variables and then grid nodes more than <code>too.far</code> from the predictor variables are excluded.</p> </td>
</tr> <tr valign="top">
<td><code>col</code></td> <td> <p>The colours for the facets of the plot. If this is <code>NA</code> then if <code>se</code>&gt;0 the facets are transparent, otherwise the colour scheme specified in <code>color</code> is used. If <code>col</code> is not <code>NA</code> then it is used as the facet colour.</p> </td>
</tr> <tr valign="top">
<td><code>color</code></td> <td> <p> the colour scheme to use for plots when <code>se</code>&lt;=0. One of <code>"topo"</code>, <code>"heat"</code>, <code>"cm"</code>, <code>"terrain"</code>, <code>"gray"</code> or <code>"bw"</code>. Schemes <code>"gray"</code> and <code>"bw"</code> also modify the colors used when <code>se</code>&gt;0.</p> </td>
</tr> <tr valign="top">
<td><code>contour.col</code></td> <td> <p>sets the colour of contours when using <code>plot.type="contour"</code>. Default scheme used if <code>NULL</code>.</p> </td>
</tr> <tr valign="top">
<td><code>se</code></td> <td> <p>if less than or equal to zero then only the predicted surface is plotted, but if greater than zero, then 3 surfaces are plotted, one at the predicted values minus <code>se</code> standard errors, one at the predicted values and one at the predicted values plus <code>se</code> standard errors.</p> </td>
</tr> <tr valign="top">
<td><code>type</code></td> <td> <p><code>"link"</code> to plot on linear predictor scale and <code>"response"</code> to plot on the response scale.</p> </td>
</tr> <tr valign="top">
<td><code>plot.type</code></td> <td> <p>one of <code>"contour"</code> or <code>"persp"</code>.</p> </td>
</tr> <tr valign="top">
<td><code>zlim</code></td> <td> <p>a two item array giving the lower and upper limits for the z-axis scale. <code>NULL</code> to choose automatically.</p> </td>
</tr> <tr valign="top">
<td><code>nCol</code></td> <td> <p>The number of colors to use in color schemes.</p> </td>
</tr> <tr valign="top">
<td><code>...</code></td> <td> <p>other options to pass on to <code><a href="../../graphics/html/persp">persp</a></code>, <code><a href="../../graphics/html/image">image</a></code> or <code><a href="../../graphics/html/contour">contour</a></code>. In particular <code>ticktype="detailed"</code> will add proper axes labelling to the plots. </p> </td>
</tr> </table> <h3>Details</h3> <p> The x and y limits are determined by the ranges of the terms named in <code>view</code>. If <code>se</code>&lt;=0 then a single (height colour coded, by default) surface is produced, otherwise three (by default see-through) meshes are produced at mean and +/- <code>se</code> standard errors. Parts of the x-y plane too far from data can be excluded by setting <code>too.far</code> </p> <p>All options to the underlying graphics functions can be reset by passing them as extra arguments <code>...</code>: such supplied values will always over-ride the default values used by <code>vis.gam</code>. </p> <h3>Value</h3> <p>Simply produces a plot.</p> <h3>WARNINGS</h3> <p>The routine can not detect that a variable has been coerced to factor within a model formula, and will therefore fail if such a variable is used as a <code>view</code> variable. When setting default <code>view</code> variables it can not detect this situation either, which can cause failures if the coerced variables are the first, otherwise suitable, variables encountered. </p> <h3>Author(s)</h3> <p>Simon Wood <a href="mailto:simon.wood@r-project.org">simon.wood@r-project.org</a> </p> <p>Based on an original idea and design by Mike Lonergan.</p> <h3>See Also</h3> <p><code><a href="../../graphics/html/persp">persp</a></code> and <code><a href="gam">gam</a></code>. </p> <h3>Examples</h3> <pre data-language="r">
library(mgcv)
set.seed(0)
n&lt;-200;sig2&lt;-4
x0 &lt;- runif(n, 0, 1);x1 &lt;- runif(n, 0, 1)
x2 &lt;- runif(n, 0, 1)
y&lt;-x0^2+x1*x2 +runif(n,-0.3,0.3)
g&lt;-gam(y~s(x0,x1,x2))
old.par&lt;-par(mfrow=c(2,2))
# display the prediction surface in x0, x1 ....
vis.gam(g,ticktype="detailed",color="heat",theta=-35)  
vis.gam(g,se=2,theta=-35) # with twice standard error surfaces
vis.gam(g, view=c("x1","x2"),cond=list(x0=0.75)) # different view 
vis.gam(g, view=c("x1","x2"),cond=list(x0=.75),theta=210,phi=40,
        too.far=.07)
# ..... areas where there is no data are not plotted

# contour examples....
vis.gam(g, view=c("x1","x2"),plot.type="contour",color="heat")
vis.gam(g, view=c("x1","x2"),plot.type="contour",color="terrain")
vis.gam(g, view=c("x1","x2"),plot.type="contour",color="topo")
vis.gam(g, view=c("x1","x2"),plot.type="contour",color="cm")


par(old.par)

# Examples with factor and "by" variables

fac&lt;-rep(1:4,20)
x&lt;-runif(80)
y&lt;-fac+2*x^2+rnorm(80)*0.1
fac&lt;-factor(fac)
b&lt;-gam(y~fac+s(x))

vis.gam(b,theta=-35,color="heat") # factor example

z&lt;-rnorm(80)*0.4   
y&lt;-as.numeric(fac)+3*x^2*z+rnorm(80)*0.1
b&lt;-gam(y~fac+s(x,by=z))

vis.gam(b,theta=-35,color="heat",cond=list(z=1)) # by variable example

vis.gam(b,view=c("z","x"),theta= -135) # plot against by variable

</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
