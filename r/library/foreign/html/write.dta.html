
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Write Files in Stata Binary Format - R - W3cubDocs</title>
  
  <meta name="description" content=" Writes the data frame to file in the Stata binary format. Does not write array variables unless they can be drop-ed to a vector. ">
  <meta name="keywords" content="write, files, stata, binary, format, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/foreign/html/write.dta.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>write.dta</code> Write Files in Stata Binary Format</h2> <h3>Description</h3> <p>Writes the data frame to file in the Stata binary format. Does not write array variables unless they can be <code><a href="../../base/html/drop">drop</a></code>-ed to a vector. </p> <p>Frozen: will not support Stata formats after 10 (also used by Stata 11). </p> <h3>Usage</h3> <pre data-language="r">
write.dta(dataframe, file, version = 7L,
          convert.dates = TRUE, tz = "GMT",
          convert.factors = c("labels", "string", "numeric", "codes"))
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>dataframe</code></td> <td> <p>a data frame.</p> </td>
</tr> <tr valign="top">
<td><code>file</code></td> <td> <p>character string giving filename.</p> </td>
</tr> <tr valign="top">
<td><code>version</code></td> <td> <p>integer: Stata version: 6, 7, 8 and 10 are supported, and 9 is mapped to 8, 11 to 10.</p> </td>
</tr> <tr valign="top">
<td><code>convert.dates</code></td> <td> <p>logical: convert <code>Date</code> and <code>POSIXct</code> objects: see section ‘Dates’.</p> </td>
</tr> <tr valign="top">
<td><code>tz</code></td> <td> <p>timezone for date conversion.</p> </td>
</tr> <tr valign="top">
<td><code>convert.factors</code></td> <td> <p>how to handle factors.</p> </td>
</tr> </table> <h3>Details</h3> <p>The major difference between supported file formats in Stata versions is that version 7.0 and later allow 32-character variable names (5 and 6 were restricted to 8-character names). The <code>abbreviate</code> function is used to trim variable names to the permitted length. A warning is given if this is needed and it is an error for the abbreviated names not to be unique. Each version of Stata is claimed to be able to read all earlier formats. </p> <p>The columns in the data frame become variables in the Stata data set. Missing values are handled correctly. </p> <p>There are four options for handling factors. The default is to use Stata ‘value labels’ for the factor levels. With <code>convert.factors = "string"</code>, the factor levels are written as strings (the name of the value label is taken from the <code>"val.labels"</code> attribute if it exists or the variable name otherwise). With <code>convert.factors = "numeric"</code> the numeric values of the levels are written, or <code>NA</code> if they cannot be coerced to numeric. Finally, <code>convert.factors = "codes"</code> writes the underlying integer codes of the factors. This last used to be the only available method and is provided largely for backwards compatibility. </p> <p>If the <code>"label.table"</code> attribute contains value labels with names not already attached to a variable (not the variable name or name from <code>"val.labels"</code>) then these will be written out as well. </p> <p>If the <code>"datalabel"</code> attribute contains a string, it is written out as the dataset label otherwise the dataset label is <code>"Written by R."</code>. </p> <p>If the <code>"expansion.table"</code> attribute exists expansion fields are written. This attribute should contain a <code><a href="../../base/html/list">list</a></code> where each element is <code><a href="../../base/html/character">character</a></code> vector of length three. The first vector element contains the name of a variable or "_dta" (meaning the dataset). The second element contains the characeristic name. The third contains the associated data. </p> <p>If the <code>"val.labels"</code> attribute contains a <code><a href="../../base/html/character">character</a></code> vector with a string label for each value then this is written as the value labels. Otherwise the variable names are used. </p> <p>If the <code>"var.labels"</code> attribute contains a <code><a href="../../base/html/character">character</a></code> vector with a string label for each variable then this is written as the variable labels. Otherwise the variable names are repeated as variable labels. </p> <p>For Stata 8 or later use the default <code>version = 7</code> – the only advantage of Stata 8 format over 7 is that it can represent multiple different missing value types, and <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> doesn't have them. Stata 10/11 allows longer format lists, but <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> does not make use of them. </p> <p>Note that the Stata formats are documented to use ASCII strings – <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> does not enforce this, but use of non-ASCII character strings will not be portable as the encoding is not recorded. Up to 244 bytes are allowed in character data, and longer strings will be truncated with a warning. </p> <p>Stata uses some large numerical values to represent missing values. This function does not currently check, and hence integers greater than <code>2147483620</code> and doubles greater than <code>8.988e+307</code> may be misinterpreted by Stata. </p> <h3>Value</h3> <p><code>NULL</code> </p> <h3>Dates</h3> <p>Unless disabled by argument <code>convert.dates = FALSE</code>, <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> date and date-time objects (<code>POSIXt</code> classes) are converted into the Stata date format, the number of days since 1960-01-01. (For date-time objects this may lose information.) Stata can be told that these are dates by </p> <pre data-language="r">format xdate %td;</pre> <p>It is possible to pass objects of class <code>POSIXct</code> to Stata to be treated as one of its versions of date-times. Stata uses the number of milliseconds since 1960-01-01, either excluding (format <code>%tc</code>) or counting (format <code>%tC</code>) leap seconds. So either an object of class <code>POSICct</code> can be passed to Stata with <code>convert.dates = FALSE</code> and converted in Stata, or <code>315619200</code> should be added and then multiplied by <code>1000</code> before passing to <code>write.dta</code> and assigning format <code>%tc</code>. Stata's comments on the first route are at <a href="https://www.stata.com/manuals13/ddatetime.pdf">https://www.stata.com/manuals13/ddatetime.pdf</a>, but at the time of writing were wrong: <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> uses POSIX conventions and hence does not count leap seconds. </p> <h3>Author(s)</h3> <p>Thomas Lumley and R-core members: support for value labels by Brian Quistorff. </p> <h3>References</h3> <p>Stata 6.0 Users Manual, Stata 7.0 Programming manual, Stata online help (version 8 and later, also <a href="https://www.stata.com/help.cgi?dta_114">https://www.stata.com/help.cgi?dta_114</a> and <a href="https://www.stata.com/help.cgi?dta_113">https://www.stata.com/help.cgi?dta_113</a>) describe the file formats. </p> <h3>See Also</h3> <p><code><a href="read.dta">read.dta</a></code>, <code><a href="../../base/html/attributes">attributes</a></code>, <code><a href="../../base/html/datetimeclasses">DateTimeClasses</a></code>, <code><a href="../../base/html/abbreviate">abbreviate</a></code> </p> <h3>Examples</h3> <pre data-language="r">
write.dta(swiss, swissfile &lt;- tempfile())
read.dta(swissfile)
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
