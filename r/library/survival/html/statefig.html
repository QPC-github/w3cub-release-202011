
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Draw a State Space Figure. - R - W3cubDocs</title>
  
  <meta name="description" content="For multi-state survival models it is useful to have a figure that shows the states and the possible transitions between them. This function creates &hellip;">
  <meta name="keywords" content="draw, state, space, figure, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/survival/html/statefig.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>statefig</code> Draw a state space figure.</h2> <h3>Description</h3> <p>For multi-state survival models it is useful to have a figure that shows the states and the possible transitions between them. This function creates a simple "box and arrows" figure. It's goal was simplicity. </p> <h3>Usage</h3> <pre data-language="r">
statefig(layout, connect, margin = 0.03, box = TRUE, cex = 1, col = 1,
  lwd=1, lty=1, bcol=col, acol=col, alwd=lwd, alty=lty, offset=0)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>layout</code></td> <td> <p>describes the layout of the boxes on the page. See the detailed description below. </p> </td>
</tr> <tr valign="top">
<td><code>connect</code></td> <td> <p>a square matrix with one row for each state. If <code>connect[i,j] !=0</code> then an arrow is drawn from state i to state j. The row names of the matrix are used as the labels for the states. </p> </td>
</tr> <tr valign="top">
<td><code>margin</code></td> <td> <p>the fraction of white space between the label and the surrounding box, and between the box and the arrows, as a function of the plot region size. </p> </td>
</tr> <tr valign="top">
<td><code>box</code></td> <td> <p>should boxes be drawn? TRUE or FALSE. </p> </td>
</tr> <tr valign="top">
<td><code>cex, col, lty, lwd</code></td> <td> <p>default graphical parameters used for the text and boxes. The last 3 can be a vector of values. </p> </td>
</tr> <tr valign="top">
<td><code>bcol</code></td> <td> <p>color for the box, if it differs from that used for the text.</p> </td>
</tr> <tr valign="top">
<td><code>acol, alwd, alty</code></td> <td> <p>color, line type and line width for the arrows.</p> </td>
</tr> <tr valign="top">
<td><code>offset</code></td> <td> <p>used to slight offset the arrows between two boxes x and y if there is a transition in both directions. The default of 0 leads to a double headed arrow in this case – to arrows are drawn but they coincide. A positive value causes each arrow to shift to the left, from the view of someone standing at the foot of a arrow and looking towards the arrowhead, a negative offset shifts to the right. A value of 1 corresponds to the size of the plotting region.</p> </td>
</tr> </table> <h3>Details</h3> <p>The arguments for color, line type and line width can all be vectors, in which case they are recycled as needed. Boxes and text are drawn in the order of the rownames of <code>connect</code>, and arrows are drawn in the usual R matrix order. </p> <p>The <code>layout</code> argument is normally a vector of integers, e.g., the vector (1, 3, 2) describes a layout with 3 columns. The first has a single state, the second column has 3 states and the third has 2. The coordinates of the plotting region are 0 to 1 for both x and y. Within a column the centers of the boxes are evenly spaced, with 1/2 a space between the boxes and the margin, e.g., 4 boxes would be at 1/8, 3/8, 5/8 and 7/8. If <code>layout</code> were a 1 column matrix with values of (1, 3, 2) then the layout will have three rows with 1, 3, and 2 boxes per row, respectively. Alternatively, the user can supply a 2 column matrix that directly gives the centers. </p> <p>The values of the connect matrix should be 0 for pairs of states that do not have a transition and values between 0 and 2 for those that do. States are connected by an arc that passes through the centers of the two boxes and a third point that is between them. Specifically, consider a line segment joining the two centers and erect a second segment at right angles to the midpoint of length d times the distance from center to midpoint. The arc passes through this point. A value of d=0 gives a straight line, d=1 a right hand half circle centered on the midpoint and d= -1 a left hand half circle. The <code>connect</code> matrix contains values of d+1 with -1 &lt; d &lt; 1. </p> <p>The connecting arrow are drawn from (center of box 1 + offset) to (center of box 2 + offset), where the the amount of offset (white space) is determined by the <code>box</code> and <code>margin</code> parameters. If a pair of states are too close together this can result in an arrow that points the wrong way. </p> <h3>Value</h3> <p>a matrix containing the centers of the boxes, with the invisible attribute set.</p> <h3>Note</h3> <p>The goal of this function is to make “good enough” figures as simply as possible, and thereby to encourage users to draw them. The <code>layout</code> argument was inspired by the <code>diagram</code> package, which can draw more complex and well decorated figures, e.g., many different shapes, shading, multiple types of connecting lines, etc., but at the price of greater complexity. </p> <p>Because curved lines are drawn as a set of short line segments, line types have almost no effect for that case. </p> <h3>Author(s)</h3> <p>Terry Therneau</p> <h3>Examples</h3> <pre data-language="r">
# Draw a simple competing risks figure
states &lt;- c("Entry", "Complete response", "Relapse", "Death")
connect &lt;- matrix(0, 4, 4, dimnames=list(states, states))
connect[1, -1] &lt;- c(1.1, 1, 0.9)
statefig(c(1, 3), connect)
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
