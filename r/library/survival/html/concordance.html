
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Compute the Concordance Statistic for Data or a Model - R - W3cubDocs</title>
  
  <meta name="description" content="The concordance statistic compute the agreement between an observed response and a predictor. It is closely related to Kendall&#39;s tau-a and tau-b &hellip;">
  <meta name="keywords" content="compute, concordance, statistic, for, data, or, model, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/survival/html/concordance.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>concordance</code> Compute the concordance statistic for data or a model</h2> <h3>Description</h3> <p>The concordance statistic compute the agreement between an observed response and a predictor. It is closely related to Kendall's tau-a and tau-b, Goodman's gamma, and Somers' d, all of which can also be calculated from the results of this function. </p> <h3>Usage</h3> <pre data-language="r">
concordance(object, ...)
## S3 method for class 'formula'
concordance(object, data, weights, subset, na.action,
  cluster, ymin, ymax, timewt= c("n", "S", "S/G", "n/G", "n/G2", "I"),
  influence=0, ranks = FALSE, reverse=FALSE, timefix=TRUE, keepstrata=10, ...)
## S3 method for class 'lm'
concordance(object, ..., newdata, cluster, ymin, ymax,
  influence=0, ranks=FALSE, timefix=TRUE, keepstrata=10)
## S3 method for class 'coxph'
concordance(object, ..., newdata, cluster, ymin, ymax,
  timewt= c("n", "S", "S/G", "n/G", "n/G2", "I"), influence=0,
  ranks=FALSE, timefix=FALSE, keepstrata=10)
## S3 method for class 'survreg'
concordance(object, ..., newdata, cluster, ymin, ymax,
  timewt= c("n", "S", "S/G", "n/G", "n/G2", "I"), influence=0,
  ranks=FALSE, timefix=FALSE, keepstrata=10)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>object</code></td> <td> <p>a fitted model or a formula. The formula should be of the form <code>y ~x</code> or <code>y ~ x + strata(z)</code> with a single numeric or survival response and a single predictor. Counts of concordant, discordant and tied pairs are computed separately per stratum, and then added. </p> </td>
</tr> <tr valign="top">
<td><code>data</code></td> <td> <p>a data.frame in which to interpret the variables named in the <code>formula</code>, or in the <code>subset</code> and the <code>weights</code> argument. Only applicable if <code>object</code> is a formula. </p> </td>
</tr> <tr valign="top">
<td><code>weights</code></td> <td> <p>optional vector of case weights. Only applicable if <code>object</code> is a formula. </p> </td>
</tr> <tr valign="top">
<td><code>subset</code></td> <td> <p>expression indicating which subset of the rows of data should be used in the fit. Only applicable if <code>object</code> is a formula. </p> </td>
</tr> <tr valign="top">
<td><code>na.action</code></td> <td> <p>a missing-data filter function. This is applied to the model.frame after any subset argument has been used. Default is <code>options()\$na.action</code>. Only applicable if <code>object</code> is a formula. </p> </td>
</tr> <tr valign="top">
<td><code>...</code></td> <td> <p>multiple fitted models are allowed. Only applicable if <code>object</code> is a model object.</p> </td>
</tr> <tr valign="top">
<td><code>newdata</code></td> <td> <p>optional, a new data frame in which to evaluate (but not refit) the models</p> </td>
</tr> <tr valign="top">
<td><code>cluster</code></td> <td> <p>optional grouping vector for calculating the robust variance</p> </td>
</tr> <tr valign="top">
<td><code>ymin, ymax</code></td> <td> <p>compute the concordance over the restricted range ymin &lt;= y &lt;= ymax. (For survival data this is a time range.) </p> </td>
</tr> <tr valign="top">
<td><code>timewt</code></td> <td> <p>the weighting to be applied. The overall statistic is a weighted mean over event times. </p> </td>
</tr> <tr valign="top">
<td><code>influence</code></td> <td> <p>1= return the dfbeta vector, 2= return the full influence matrix, 3 = return both </p> </td>
</tr> <tr valign="top">
<td><code>ranks</code></td> <td> <p>if TRUE, return a data frame containing the individual ranks that make up the overall score. </p> </td>
</tr> <tr valign="top">
<td><code>reverse</code></td> <td> <p>if TRUE then assume that larger <code>x</code> values predict smaller response values <code>y</code>; a proportional hazards model is the common example of this. </p> </td>
</tr> <tr valign="top">
<td><code>timefix</code></td> <td> <p>if the response is a Surv object, correct for possible rounding error; otherwise this argument has no effect. See the vignette on tied times for more explanation. For the coxph and survreg methods this issue will have already been addressed in the parent routine, so should not be revisited. </p> </td>
</tr> <tr valign="top">
<td><code>keepstrata</code></td> <td> <p>either TRUE, FALSE, or an integer value. Computations are always done within stratum, then added. If the total number of strata greater than <code>keepstrata</code>, or <code>keepstrata=FALSE</code>, those subtotals are not kept in the output. </p> </td>
</tr> </table> <h3>Details</h3> <p>At each event time, compute the rank of the subject who had the event as compared to all others with a longer survival, where the rank is value between 0 and 1. The concordance is a weighted mean of these values, determined by the <code>timewt</code> option. For uncensored data each unique response value is compared to all those which are larger. </p> <p>Using the default value for <code>timewt</code> gives the area under the receiver operating curve (AUC) for a binary response, and (d+1)/2 when y is continuous, where d is Somers' d. For a survival time, <code>timewt</code> of n gives Harrell's c-statistic, which is closely related to the Gehan-Wilcoxon test, S corresponds to the Peto-Wilcoxon, n/G2 is the weighted advocated by Umo, and S/G the weighting proposed by Schemper. </p> <p>When the number of strata is very large, such as in a conditional logistic regression for instance (<code>clogit</code> function), a much faster computation is available when the individual strata results are not retained. In the more general case the <code>keepstrata = 10</code> default simply keeps the printout managable. </p> <h3>Value</h3> <p>An object of class <code>concordance</code> containing the following components: </p> <table summary="R valueblock"> <tr valign="top">
<td><code>concordance</code></td> <td> <p>the estimated concordance value or values</p> </td>
</tr> <tr valign="top">
<td><code>count</code></td> <td> <p>a vector containing the number of concordant pairs, discordant, tied on x but not y, tied on y but not x, and tied on both x and y</p> </td>
</tr> <tr valign="top">
<td><code>n</code></td> <td> <p>the number of observations</p> </td>
</tr> <tr valign="top">
<td><code>var</code></td> <td> <p>a vector containing the estimated variance of the concordance based on the infinitesimal jackknife (IJ) method. If there are multiple models it contains the estimtated variance/covariance matrix.</p> </td>
</tr> <tr valign="top">
<td><code>cvar</code></td> <td> <p>a vector containing the estimated variance(s) of the concordance values, based on the variance formula for the associated score test from a proportional hazards model. (This was the primary variance used in the <code>survConcordance</code> function.)</p> </td>
</tr> <tr valign="top">
<td><code>dfbeta</code></td> <td> <p>optional, the vector of leverage estimates for the concordance</p> </td>
</tr> <tr valign="top">
<td><code>influence</code></td> <td> <p>optional, the matrix of leverage values for each of the counts, one row per observation</p> </td>
</tr> <tr valign="top">
<td><code>ranks</code></td> <td> <p>optional, a data frame containing the Somers' d rank at each event time, along with the time weight, case weight of the observation with an event, and variance (contribution to the proportional hazards model information matrix). A weighted mean of the ranks equals Somer's d.</p> </td>
</tr> </table> <h3>Author(s)</h3> <p>Terry Therneau</p> <h3>See Also</h3> <p><code><a href="coxph">coxph</a></code></p> <h3>Examples</h3> <pre data-language="r">
fit1 &lt;- coxph(Surv(ptime, pstat) ~ age + sex + mspike, mgus2)
concordance(fit1, timewt="n") 

# logistic regression
fit2 &lt;- glm(pstat ~ age + sex + mspike, binomial, data= mgus2)
concordance(fit2)  # equal to the AUC
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
