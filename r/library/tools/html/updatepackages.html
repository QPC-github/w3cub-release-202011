
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Update Existing PACKAGES Files - R - W3cubDocs</title>
  
  <meta name="description" content="Update an existing repository by reading the PACKAGES file, retaining entries which are still valid, removing entries which are no longer valid, and &hellip;">
  <meta name="keywords" content="update, existing, packages, files, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/tools/html/updatepackages.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>updatePACKAGES</code> Update Existing PACKAGES Files</h2> <h3>Description</h3> <p>Update an existing repository by reading the <code>PACKAGES</code> file, retaining entries which are still valid, removing entries which are no longer valid, and only processing built package tarballs which do not match existing entries. </p> <p><code>update_PACKAGES</code> can be much faster than <code><a href="writepackages">write_PACKAGES</a></code> for small-moderate changes to large repository indexes, particularly in non-strict mode (see Details). </p> <h3>Usage</h3> <pre data-language="r">
update_PACKAGES(dir = ".", fields = NULL, type = c("source",
  "mac.binary", "win.binary"), verbose.level = as.integer(dryrun),
  latestOnly = TRUE, addFiles = FALSE, rds_compress = "xz",
  strict = TRUE, dryrun = FALSE)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>dir</code></td> <td> <p>See <code><a href="writepackages">write_PACKAGES</a></code></p> </td>
</tr> <tr valign="top">
<td><code>fields</code></td> <td> <p>See <code><a href="writepackages">write_PACKAGES</a></code></p> </td>
</tr> <tr valign="top">
<td><code>type</code></td> <td> <p>See <code><a href="writepackages">write_PACKAGES</a></code></p> </td>
</tr> <tr valign="top">
<td><code>verbose.level</code></td> <td> <p>(0, 1, 2) What level of informative messages which should be displayed throughout the process. Defaults to 0 if <code>dryrun</code> is <code>FALSE</code> (the default) and 1 otherwise. See details for more information.</p> </td>
</tr> <tr valign="top">
<td><code>latestOnly</code></td> <td> <p>See <code><a href="writepackages">write_PACKAGES</a></code></p> </td>
</tr> <tr valign="top">
<td><code>addFiles</code></td> <td> <p>See <code><a href="writepackages">write_PACKAGES</a></code></p> </td>
</tr> <tr valign="top">
<td><code>rds_compress</code></td> <td> <p>See <code><a href="writepackages">write_PACKAGES</a></code></p> </td>
</tr> <tr valign="top">
<td><code>strict</code></td> <td> <p>logical. Should 'strict mode' be used when checking existing <code>PACKAGES</code> entries. See details. Defaults to <code>TRUE</code>.</p> </td>
</tr> <tr valign="top">
<td><code>dryrun</code></td> <td> <p>logical. Should the updates to existing <code>PACKAGES</code> files be computed but NOT applied. Defaults to <code>FALSE</code>.</p> </td>
</tr> </table> <h3>Details</h3> <p>Throughout this section, <em>package tarball</em> is defined to mean any archive file in <code>dir</code> whose name can be interpreted as <code>&lt;package&gt;_&lt;version&gt;.&lt;ext&gt;</code> - with <code>&lt;ext&gt;</code> the appropriate extension for built packages of type <code>type</code> - (or that is pointed to by the <code>File</code> field of an existing <code>PACKAGES</code> entry). <em>Novel package tarballs</em> are those which do not match an existing <code>PACKAGES</code> file entry. </p> <p><code>update_PACKAGES</code> calls directly down to <code><a href="writepackages">write_PACKAGES</a></code> with a warning (and thus all package tarballs will be processed), if any of the following conditions hold: </p> <ul> <li> <p><code>type</code> is <code>win.binary</code> and <code>strict</code> is <code>TRUE</code> (no MD5 checksums are included in win.binary <code>PACKAGES</code> files) </p> </li> <li>
<p> No <code>PACKAGES</code> file exists under <code>dir</code> </p> </li> <li>
<p> A <code>PACKAGES</code> file exists under <code>dir</code> but is empty </p> </li> <li> <p><code>fields</code> is not <code>NULL</code> and one or more specified fields are not present in the existing <code>PACKAGES</code> file </p> </li>
</ul> <p><code>update_PACKAGES</code> avoids (re)processing package tarballs in cases where a <code>PACKAGES</code> file entry already exists and appears to remain valid. The logic for detecting still-valid entries is as follows: </p> <p>Any package tarball which was last modified more recently than the existing <code>PACKAGES</code> file is considered novel; existing <code>PACKAGES</code> entries appearing to correspond to such tarballs are <em>always</em> considered stale and replaced by newly generated ones. Similarly, all <code>PACKAGES</code> entries that do not correspond to any package tarball found in <code>dir</code> are considered invalid and are excluded from the resulting updated <code>PACKAGES</code> files. </p> <p>When <code>strict</code> is <code>TRUE</code>, <code>PACKAGES</code> entries that match a package tarball (by package name and version) are confirmed via MD5 checksum; only those that pass are retained as valid. All novel package tarballs are fully processed by the standard machinery underlying <code><a href="writepackages">write_PACKAGES</a></code> and the resulting entries are added. Finally, if <code>latestOnly</code> is <code>TRUE</code>, package-version pruning is performed across the entries. </p> <p>When <code>strict</code> is <code>FALSE</code>, package tarballs are assumed to encode correct metadata in their filenames. <code>PACKAGES</code> entries which appear to match a package tarball are retained as valid (No MD5 checksum testing occurs). If <code>latestOnly</code> is <code>TRUE</code>, package-version pruning is performed across the full set of retained entries and novel package tarballs <em>before</em> the processing of the novel tarballs, at significant computational and time savings in some situations. After the optional pruning, any relevant novel package tarballs are processed via the standard machinery and added to the set of retained entries. </p> <p>In both cases, after the above process concludes, entries are sorted alphabetically by the string concatenation of <code>Package</code> and <code>Version</code>. This should match the entry order <code>write_PACKAGES</code> outputs. </p> <p>The fields within the entries are ordered as follows: canonical fields - i.e., those appearing as columns when <code>available.packages</code> is called on a CRAN mirror - appear first in their canonical order, followed by any non-canonical fields. </p> <p>After entry and field reordering, the final database of <code>PACKAGES</code> entries is written to all three <code>PACKAGES</code> files, overwriting the existing versions. </p> <p>When <code>verbose.level</code> is <code>0</code>, no extra messages are displayed to the user. When it is <code>1</code>, detailed information about what is happening is conveyed via messages, but underlying machinery from <code><a href="writepackages">write_PACKAGES</a></code> is invoked with <code>verbose = FALSE</code>. Behavior when <code>verbose.level</code> is <code>2</code> is identical to <code>verbose.level</code> <code>1</code> with the exception that underlying machinery from <code>write_PACKAGE</code> is invoked with <code>verbose = TRUE</code>, which will individually list every processed tarball. </p> <h3>Note</h3> <p>While both strict and non-strict modes can offer speedups when updating small percentages of large repositories, non-strict mode is <em>much</em> faster and is recommended in situations where the assumption it makes about tarballs' filenames encoding accurate information is safe. </p> <h3>Note</h3> <p> Users should expect significantly smaller speedups over <code>write_PACKAGES</code> in the <code>type == "win.binary"</code> case on at least some operating systems. This is due to <code>write_PACKAGES</code> being significantly faster in this context, rather than <code>update_PACKAGES</code> being slower. </p> <h3>Author(s)</h3> <p>Gabriel Becker (adapted from previous, related work by him in the <code>switchr</code> package which is copyright Genentech, Inc.) </p> <h3>See Also</h3> <p><a href="writepackages">write_PACKAGES</a> </p> <h3>Examples</h3> <pre data-language="r">
## Not run: 
write_PACKAGES("c:/myFolder/myRepository") # on Windows
update_PACKAGES("c:/myFolder/myRepository") # on Windows
write_PACKAGES("/pub/RWin/bin/windows/contrib/2.9",
type = "win.binary") # on Linux
update_PACKAGES("/pub/RWin/bin/windows/contrib/2.9",
type = "win.binary") # on Linux

## End(Not run)</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
