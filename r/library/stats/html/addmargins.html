
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Addmargins - R - W3cubDocs</title>
  
  <meta name="description" content="For a given table one can specify which of the classifying factors to expand by one or more levels to hold margins to be calculated. One may for &hellip;">
  <meta name="keywords" content="addmargins, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/stats/html/addmargins.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>addmargins</code> Puts Arbitrary Margins on Multidimensional Tables or Arrays</h2> <h3>Description</h3> <p>For a given table one can specify which of the classifying factors to expand by one or more levels to hold margins to be calculated. One may for example form sums and means over the first dimension and medians over the second. The resulting table will then have two extra levels for the first dimension and one extra level for the second. The default is to sum over all margins in the table. Other possibilities may give results that depend on the order in which the margins are computed. This is flagged in the printed output from the function. </p> <h3>Usage</h3> <pre data-language="r">
addmargins(A, margin = seq_along(dim(A)), FUN = sum, quiet = FALSE)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>A</code></td> <td> <p>table or array. The function uses the presence of the <code>"dim"</code> and <code>"dimnames"</code> attributes of <code>A</code>.</p> </td>
</tr> <tr valign="top">
<td><code>margin</code></td> <td> <p>vector of dimensions over which to form margins. Margins are formed in the order in which dimensions are specified in <code>margin</code>.</p> </td>
</tr> <tr valign="top">
<td><code>FUN</code></td> <td> <p><code><a href="../../base/html/list">list</a></code> of the same length as <code>margin</code>, each element of the list being either a <code><a href="../../base/html/function">function</a></code> or a list of functions. In the length-1 case, can be a function instead of a list of one. Names of the list elements will appear as levels in dimnames of the result. Unnamed list elements will have names constructed: the name of a function or a constructed name based on the position in the table.</p> </td>
</tr> <tr valign="top">
<td><code>quiet</code></td> <td> <p>logical which suppresses the message telling the order in which the margins were computed.</p> </td>
</tr> </table> <h3>Details</h3> <p>If the functions used to form margins are not commutative the result depends on the order in which margins are computed. Annotation of margins is done via naming the <code>FUN</code> list. </p> <h3>Value</h3> <p>A <code><a href="../../base/html/table">table</a></code> or <code><a href="../../base/html/array">array</a></code> with the same number of dimensions as <code>A</code>, but with extra levels of the dimensions mentioned in <code>margin</code>. The number of levels added to each dimension is the length of the entries in <code>FUN</code>. A message with the order of computation of margins is printed. </p> <h3>Author(s)</h3> <p>Bendix Carstensen, Steno Diabetes Center &amp; Department of Biostatistics, University of Copenhagen, <a href="https://BendixCarstensen.com">https://BendixCarstensen.com</a>, autumn 2003. Margin naming enhanced by Duncan Murdoch. </p> <h3>See Also</h3> <p><code><a href="../../base/html/table">table</a></code>, <code><a href="ftable">ftable</a></code>, <code><a href="../../base/html/marginsums">margin.table</a></code>. </p> <h3>Examples</h3> <pre data-language="r">
Aye &lt;- sample(c("Yes", "Si", "Oui"), 177, replace = TRUE)
Bee &lt;- sample(c("Hum", "Buzz"), 177, replace = TRUE)
Sea &lt;- sample(c("White", "Black", "Red", "Dead"), 177, replace = TRUE)
(A &lt;- table(Aye, Bee, Sea))
(aA &lt;- addmargins(A))

ftable(A)
ftable(aA)

# Non-commutative functions - note differences between resulting tables:
ftable( addmargins(A, c(3, 1),
                   FUN = list(list(Min = min, Max = max),
                              Sum = sum)))
ftable( addmargins(A, c(1, 3),
                   FUN = list(Sum = sum,
                              list(Min = min, Max = max))))

# Weird function needed to return the N when computing percentages
sqsm &lt;- function(x) sum(x)^2/100
B &lt;- table(Sea, Bee)
round(sweep(addmargins(B, 1, list(list(All = sum, N = sqsm))), 2,
            apply(B, 2, sum)/100, "/"), 1)
round(sweep(addmargins(B, 2, list(list(All = sum, N = sqsm))), 1,
            apply(B, 1, sum)/100, "/"), 1)

# A total over Bee requires formation of the Bee-margin first:
mB &lt;-  addmargins(B, 2, FUN = list(list(Total = sum)))
round(ftable(sweep(addmargins(mB, 1, list(list(All = sum, N = sqsm))), 2,
                   apply(mB, 2, sum)/100, "/")), 1)

## Zero.Printing table+margins:
set.seed(1)
x &lt;- sample( 1:7, 20, replace = TRUE)
y &lt;- sample( 1:7, 20, replace = TRUE)
tx &lt;- addmargins( table(x, y) )
print(tx, zero.print = ".")
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
