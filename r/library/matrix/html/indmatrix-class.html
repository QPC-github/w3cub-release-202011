
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Index Matrices - R - W3cubDocs</title>
  
  <meta name="description" content="The &#34;indMatrix&#34; class is the class of index matrices, stored as 1-based integer index vectors. An index matrix is a matrix with exactly one &hellip;">
  <meta name="keywords" content="index, matrices, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/matrix/html/indmatrix-class.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>indMatrix-class</code> Index Matrices</h2> <h3>Description</h3> <p>The <code>"indMatrix"</code> class is the class of index matrices, stored as 1-based integer index vectors. An index matrix is a matrix with exactly one non-zero entry per row. Index matrices are useful for mapping observations to unique covariate values, for example. </p> <p>Matrix (vector) multiplication with index matrices is equivalent to replicating and permuting rows, or “sampling rows with replacement”, and is implemented that way in the <span class="pkg">Matrix</span> package, see the ‘Details’ below. </p> <h3>Details</h3> <p>Matrix (vector) multiplication with index matrices from the left is equivalent to replicating and permuting rows of the matrix on the right hand side. (Similarly, matrix multiplication with the transpose of an index matrix from the right corresponds to selecting <em>columns</em>.) The crossproduct of an index matrix <i>M</i> with itself is a diagonal matrix with the number of entries in each column of <i>M</i> on the diagonal, i.e., <i>M'M=</i><code>Diagonal(x=table(M@perm))</code>. </p> <p>Permutation matrices (of class <code><a href="pmatrix-class">pMatrix</a></code>) are special cases of index matrices: They are square, of dimension, say, <i>n * n</i>, and their index vectors contain exactly all of <code>1:n</code>. </p> <p>While “row-indexing” (of more than one row <em>or</em> using <code>drop=FALSE</code>) stays within the <code>"indMatrix"</code> class, all other subsetting/indexing operations (“column-indexing”, including, <code><a href="../../base/html/diag">diag</a></code>) on <code>"indMatrix"</code> objects treats them as nonzero-pattern matrices (<code>"<a href="nsparsematrix-classes">ngTMatrix</a>"</code> specifically), such that non-matrix subsetting results in <code><a href="../../base/html/logical">logical</a></code> vectors. Sub-assignment (<code>M[i,j] &lt;- v</code>) is not sensible and hence an error for these matrices. </p> <h3>Objects from the Class</h3> <p>Objects can be created by calls of the form <code>new("indMatrix", ...)</code> or by coercion from an integer index vector, see below. </p> <h3>Slots</h3> <dl> <dt>
<code>perm</code>:</dt>
<dd>
<p>An integer, 1-based index vector, i.e. an integer vector of length <code>Dim[1]</code> whose elements are taken from <code>1:Dim[2]</code>.</p> </dd> <dt>
<code>Dim</code>:</dt>
<dd>
<p><code><a href="../../base/html/integer">integer</a></code> vector of length two. In some applications, the matrix will be skinny, i.e., with at least as many rows as columns.</p> </dd> <dt>
<code>Dimnames</code>:</dt>
<dd>
<p>a <code><a href="../../base/html/list">list</a></code> of length two where each component is either <code><a href="../../base/html/null">NULL</a></code> or a <code><a href="../../base/html/character">character</a></code> vector of length equal to the corresponding <code>Dim</code> element.</p> </dd> </dl> <h3>Extends</h3> <p>Class <code>"<a href="sparsematrix-class">sparseMatrix</a>"</code> and <code>"<a href="generalmatrix-class">generalMatrix</a>"</code>, directly. </p> <h3>Methods</h3> <dl> <dt>%*%</dt>
<dd>
<p><code>signature(x = "matrix", y = "indMatrix")</code> and other signatures (use <code>showMethods("%*%", class="indMatrix")</code>): ... </p> </dd> <dt>coerce</dt>
<dd>
<p><code>signature(from = "integer", to = "indMatrix")</code>: This enables typical <code>"indMatrix"</code> construction, given an index vector from elements in <code>1:Dim[2]</code>, see the first example.</p> </dd> <dt>coerce</dt>
<dd>
<p><code>signature(from = "numeric", to = "indMatrix")</code>: a user convenience, to allow <code>as(perm, "indMatrix")</code> for numeric <code>perm</code> with integer values.</p> </dd> <dt>coerce</dt>
<dd>
<p><code>signature(from = "list", to = "indMatrix")</code>: The list must have two (integer-valued) entries: the first giving the index vector with elements in <code>1:Dim[2]</code>, the second giving <code>Dim[2]</code>. This allows <code>"indMatrix"</code> construction for cases in which the values represented by the rightmost column(s) are not associated with any observations, i.e., in which the index does not contain values <code>Dim[2], Dim[2]-1, Dim[2]-2, ...</code></p> </dd> <dt>coerce</dt>
<dd>
<p><code>signature(from = "indMatrix", to = "matrix")</code>: coercion to a traditional FALSE/TRUE <code><a href="../../base/html/matrix">matrix</a></code> of <code><a href="../../base/html/mode">mode</a></code> <code>logical</code>.</p> </dd> <dt>coerce</dt>
<dd>
<p><code>signature(from = "indMatrix", to = "ngTMatrix")</code>: coercion to sparse logical matrix of class <code><a href="nsparsematrix-classes">ngTMatrix</a></code>.</p> </dd> <dt>t</dt>
<dd>
<p><code>signature(x = "indMatrix")</code>: return the transpose of the index matrix (which is no longer an <code>indMatrix</code>, but of class <code><a href="nsparsematrix-classes">ngTMatrix</a></code>.</p> </dd> <dt>colSums, colMeans, rowSums, rowMeans</dt>
<dd>
<p><code>signature(x = "indMatrix")</code>: return the column or row sums or means.</p> </dd> <dt>rbind2</dt>
<dd>
<p><code>signature(x = "indMatrix", y = "indMatrix")</code>: a fast method for rowwise catenation of two index matrices (with the same number of columns).</p> </dd> <dt>kronecker</dt>
<dd>
<p><code>signature(X = "indMatrix", Y = "indMatrix")</code>: return the kronecker product of two index matrices, which corresponds to the index matrix of the interaction of the two.</p> </dd> </dl> <h3>Author(s)</h3> <p>Fabian Scheipl, Uni Muenchen, building on existing <code>"<a href="pmatrix-class">pMatrix</a>"</code>, after a nice hike's conversation with Martin Maechler; diverse tweaks by the latter. The <code><a href="matrix-products">crossprod</a>(x,y)</code> and <code><a href="../../base/html/kronecker">kronecker</a>(x,y)</code> methods when both arguments are <code>"indMatrix"</code> have been made considerably faster thanks to a suggestion by Boris Vaillant. </p> <h3>See Also</h3> <p>The permutation matrices <code><a href="pmatrix-class">pMatrix</a></code> are special index matrices. The “pattern” matrices, <code><a href="nmatrix-class">nMatrix</a></code> and its subclasses. </p> <h3>Examples</h3> <pre data-language="r">
p1 &lt;- as(c(2,3,1), "pMatrix")
(sm1 &lt;- as(rep(c(2,3,1), e=3), "indMatrix"))
stopifnot(all(sm1 == p1[rep(1:3, each=3),]))

## row-indexing of a &lt;pMatrix&gt; turns it into an &lt;indMatrix&gt;:
class(p1[rep(1:3, each=3),])

set.seed(12) # so we know '10' is in sample
## random index matrix for 30 observations and 10 unique values:
(s10 &lt;- as(sample(10, 30, replace=TRUE),"indMatrix"))

## Sample rows of a numeric matrix :
(mm &lt;- matrix(1:10, nrow=10, ncol=3))
s10 %*% mm

set.seed(27)
IM1 &lt;- as(sample(1:20, 100, replace=TRUE), "indMatrix")
IM2 &lt;- as(sample(1:18, 100, replace=TRUE), "indMatrix")
(c12 &lt;- crossprod(IM1,IM2))
## same as cross-tabulation of the two index vectors:
stopifnot(all(c12 - unclass(table(IM1@perm, IM2@perm)) == 0))

# 3 observations, 4 implied values, first does not occur in sample:
as(2:4, "indMatrix")
# 3 observations, 5 values, first and last do not occur in sample:
as(list(2:4, 5), "indMatrix")

as(sm1, "ngTMatrix")
s10[1:7, 1:4] # gives an "ngTMatrix" (most economic!)
s10[1:4, ]  # preserves "indMatrix"-class

I1 &lt;- as(c(5:1,6:4,7:3), "indMatrix")
I2 &lt;- as(7:1, "pMatrix")
(I12 &lt;- rbind(I1, I2))
stopifnot(is(I12, "indMatrix"),
          identical(I12, rbind(I1, I2)),
	  colSums(I12) == c(2L,2:4,4:2))
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
