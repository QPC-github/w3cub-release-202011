
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Sparse Vector Classes - R - W3cubDocs</title>
  
  <meta name="description" content="Sparse Vector Classes&#58; The virtual mother class &#34;sparseVector&#34; has the five actual daughter classes &#34;dsparseVector&#34;, &#34; &hellip;">
  <meta name="keywords" content="sparse, vector, classes, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/matrix/html/sparsevector-class.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>sparseVector-class</code> Sparse Vector Classes</h2> <h3>Description</h3> <p>Sparse Vector Classes: The virtual mother class <code>"sparseVector"</code> has the five actual daughter classes <code>"dsparseVector"</code>, <code>"isparseVector"</code>, <code>"lsparseVector"</code>, <code>"nsparseVector"</code>, and <code>"zsparseVector"</code>, where we've mainly implemented methods for the <code>d*</code>, <code>l*</code> and <code>n*</code> ones. </p> <h3>Slots</h3> <dl> <dt>
<code>length</code>:</dt>
<dd>
<p>class <code>"numeric"</code> - the <code><a href="../../base/html/length">length</a></code> of the sparse vector. Note that <code>"numeric"</code> can be considerably larger than the maximal <code>"integer"</code>, <code><a href="../../base/html/zmachine">.Machine</a>$integer.max</code>, on purpose.</p> </dd> <dt>
<code>i</code>:</dt>
<dd>
<p>class <code>"numeric"</code> - the (1-based) indices of the non-zero entries. Must <em>not</em> be <code>NA</code> and strictly sorted increasingly. </p> <p>Note that <code>"integer"</code> is “part of” <code>"numeric"</code>, and can (and often will) be used for non-huge sparseVectors.</p> </dd> <dt>
<code>x</code>:</dt>
<dd>
<p>(for all but <code>"nsparseVector"</code>): the non-zero entries. This is of class <code>"numeric"</code> for class <code>"dsparseVector"</code>, <code>"logical"</code> for class <code>"lsparseVector"</code>, etc. </p> <p>Note that <code>"nsparseVector"</code>s have no <code>x</code> slot. Further, mainly for ease of method definitions, we've defined the class union (see <code><a href="../../methods/html/setclassunion">setClassUnion</a></code>) of all sparse vector classes which <em>have</em> an <code>x</code> slot, as class <code>"xsparseVector"</code>. </p> </dd> </dl> <h3>Methods</h3> <dl> <dt>length</dt>
<dd>
<p><code>signature(x = "sparseVector")</code>: simply extracts the <code>length</code> slot.</p> </dd> <dt>show</dt>
<dd>
<p><code>signature(object = "sparseVector")</code>: The <code><a href="../../methods/html/show">show</a></code> method for sparse vectors prints <em>“structural”</em> zeroes as <code>"."</code> using the non-exported <code>prSpVector</code> function which allows further customization such as replacing <code>"."</code> by <code>" "</code> (blank). </p> <p>Note that <code><a href="../../base/html/options">options</a>(max.print)</code> will influence how many entries of large sparse vectors are printed at all.</p> </dd> <dt>as.vector</dt>
<dd>
<p><code>signature(x = "sparseVector", mode = "character")</code> coerces sparse vectors to “regular”, i.e., atomic vectors. This is the same as <code>as(x, "vector")</code>.</p> </dd> <dt>as</dt>
<dd>
<p>..: see <code>coerce</code> below</p> </dd> <dt>coerce</dt>
<dd>
<p><code>signature(from = "sparseVector", to = "sparseMatrix")</code>, and</p> </dd> <dt>coerce</dt>
<dd>
<p><code>signature(from = "sparseMatrix", to = "sparseVector")</code>, etc: coercions to and from sparse matrices (<code><a href="sparsematrix-class">sparseMatrix</a></code>) are provided and work analogously as in standard <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, i.e., a vector is coerced to a 1-column matrix.</p> </dd> <dt>dim&lt;-</dt>
<dd>
<p><code>signature(x = "sparseVector", value = "integer")</code> coerces a sparse vector to a sparse Matrix, i.e., an object inheriting from <code><a href="sparsematrix-class">sparseMatrix</a></code>, of the appropriate dimension.</p> </dd> <dt>head</dt>
<dd>
<p><code>signature(x = "sparseVector")</code>: as with <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>'s (package <span class="pkg">util</span>) <code><a href="../../utils/html/head">head</a></code>, <code>head(x,n)</code> (for <i>n &gt;= 1</i>) is equivalent to <code>x[1:n]</code>, but here can be much more efficient, see the example.</p> </dd> <dt>tail</dt>
<dd>
<p><code>signature(x = "sparseVector")</code>: analogous to <code><a href="../../utils/html/head">head</a></code>, see above.</p> </dd> <dt>toeplitz</dt>
<dd>
<p><code>signature(x = "sparseVector")</code>: as <code><a href="../../stats/html/toeplitz">toeplitz</a>(x)</code>, produce the <i>n \times n</i> Toeplitz matrix from <code>x</code>, where <code>n = length(x)</code>.</p> </dd> <dt>rep</dt>
<dd>
<p><code>signature(x = "sparseVector")</code> repeat <code>x</code>, with the same argument list <code>(x, times, length.out, each,
	...)</code> as the default method for rep().</p> </dd> <dt>which</dt>
<dd>
<p><code>signature(x = "nsparseVector")</code> and</p> </dd> <dt>which</dt>
<dd>
<p><code>signature(x = "lsparseVector")</code> return the indices of the non-zero entries (which is trivial for sparse vectors).</p> </dd> <dt>Ops</dt>
<dd>
<p><code>signature(e1 = "sparseVector", e2 = "*")</code>: define arithmetic, compare and logic operations, (see <code><a href="../../methods/html/s4groupgeneric">Ops</a></code>).</p> </dd> <dt>Summary</dt>
<dd>
<p><code>signature(x = "sparseVector")</code>: define all the <code><a href="../../methods/html/s4groupgeneric">Summary</a></code> methods.</p> </dd> <dt>[</dt>
<dd>
<p><code>signature(x = "atomicVector", i = ...)</code>: not only can you subset (aka <em>“index into”</em>) sparseVectors <code>x[i]</code> using sparseVectors <code>i</code>, but we also support efficient subsetting of traditional vectors <code>x</code> by logical sparse vectors (i.e., <code>i</code> of class <code>"nsparseVector"</code> or <code>"lsparseVector"</code>).</p> </dd> <dt>is.na, is.finite, is.infinite</dt>
<dd>
<p><code>(x = "sparseVector")</code>, and</p> </dd> <dt>is.na, is.finite, is.infinite</dt>
<dd>
<p><code>(x = "nsparseVector")</code>: return <code><a href="../../base/html/logical">logical</a></code> or <code>"nsparseVector"</code> of the same length as <code>x</code>, indicating if/where <code>x</code> is <code><a href="../../base/html/na">NA</a></code> (or <code>NaN</code>), finite or infinite, entirely analogously to the corresponding base <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> functions.</p> </dd> </dl> <p><code>c.sparseVector()</code> is an S3 method for all <code>"sparseVector"</code>s, but automatic dispatch only happens for the first argument, so it is useful also as regular <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> function, see the examples. </p> <h3>See Also</h3> <p><code><a href="sparsevector">sparseVector</a>()</code> for friendly construction of sparse vectors (apart from <code>as(*, "sparseVector")</code>). </p> <h3>Examples</h3> <pre data-language="r">
getClass("sparseVector")
getClass("dsparseVector")
getClass("xsparseVector")# those with an 'x' slot

sx &lt;- c(0,0,3, 3.2, 0,0,0,-3:1,0,0,2,0,0,5,0,0)
(ss &lt;- as(sx, "sparseVector"))

ix &lt;- as.integer(round(sx))
(is &lt;- as(ix, "sparseVector")) ## an "isparseVector" (!)
(ns &lt;- sparseVector(i= c(7, 3, 2), length = 10)) # "nsparseVector"
## rep() works too:
(ri &lt;- rep(is, length.out= 25))

## Using `dim&lt;-`  as in base R :
r &lt;- ss
dim(r) &lt;- c(4,5) # becomes a sparse Matrix:
r
## or coercion (as as.matrix() in base R):
as(ss, "Matrix")
stopifnot(all(ss == print(as(ss, "CsparseMatrix"))))

## currently has "non-structural" FALSE -- printing as ":"
(lis &lt;- is &amp; FALSE)
(nn &lt;- is[is == 0]) # all "structural" FALSE

## NA-case
sN &lt;- sx; sN[4] &lt;- NA
(svN &lt;- as(sN, "sparseVector"))

v &lt;- as(c(0,0,3, 3.2, rep(0,9),-3,0,-1, rep(0,20),5,0),
         "sparseVector")
v &lt;- rep(rep(v, 50), 5000)
set.seed(1); v[sample(v@i, 1e6)] &lt;- 0
str(v)




system.time(for(i in 1:4) hv &lt;- head(v, 1e6))
##   user  system elapsed
##  0.033   0.000   0.032
system.time(for(i in 1:4) h2 &lt;- v[1:1e6])
##   user  system elapsed
##  1.317   0.000   1.319

stopifnot(identical(hv, h2),
          identical(is | FALSE, is != 0),
	  validObject(svN), validObject(lis), as.logical(is.na(svN[4])),
	  identical(is^2 &gt; 0,	is &amp; TRUE),
	  all(!lis), !any(lis), length(nn@i) == 0, !any(nn), all(!nn),
	  sum(lis) == 0, !prod(lis), range(lis) == c(0,0))

## create and use the t(.) method:
t(x20 &lt;- sparseVector(c(9,3:1), i=c(1:2,4,7), length=20))
(T20 &lt;- toeplitz(x20))
stopifnot(is(T20, "symmetricMatrix"), is(T20, "sparseMatrix"),
	  identical(unname(as.matrix(T20)),
                    toeplitz(as.vector(x20))))

## c() method for "sparseVector" - also available as regular function
(c1 &lt;- c(x20, 0,0,0, -10*x20))
(c2 &lt;- c(ns, is, FALSE))
(c3 &lt;- c(ns, !ns, TRUE, NA, FALSE))
(c4 &lt;- c(ns, rev(ns)))
## here, c() would produce a list {not dispatching to c.sparseVector()}
(c5 &lt;- c.sparseVector(0,0, x20))

## checking (consistency)
.v &lt;- as.vector
.s &lt;- function(v) as(v, "sparseVector")
stopifnot(
  all.equal(c1, .s(c(.v(x20), 0,0,0, -10*.v(x20))),      tol=0),
  all.equal(c2, .s(c(.v(ns), .v(is), FALSE)),            tol=0),
  all.equal(c3, .s(c(.v(ns), !.v(ns), TRUE, NA, FALSE)), tol=0),
  all.equal(c4, .s(c(.v(ns), rev(.v(ns)))),              tol=0),
  all.equal(c5, .s(c(0,0, .v(x20))),                     tol=0)
)
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
