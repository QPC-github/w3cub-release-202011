
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Logging - Phalcon 2 - W3cubDocs</title>
  
  <meta name="description" content="Phalcon&#92;Logger is a component whose purpose is to provide logging services for applications. It offers logging to different backends using &hellip;">
  <meta name="keywords" content="logging, phalcon, phalcon~2">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/phalcon~2/reference/logging.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/phalcon~2.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/phalcon~2/" class="_nav-link" title="" style="margin-left:0;">Phalcon 2</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _phalcon">
				
				
<h1 id="logging">Logging</h1> <p><a class="reference internal" href="../api/phalcon_logger"><em>Phalcon\Logger</em></a> is a component whose purpose is to provide logging services for applications. It offers logging to different backends using different adapters. It also offers transaction logging, configuration options, different formats and filters. You can use the <a class="reference internal" href="../api/phalcon_logger"><em>Phalcon\Logger</em></a> for every logging need your application has, from debugging processes to tracing application flow.</p>  <h2 id="adapters">Adapters</h2> <p>This component makes use of adapters to store the logged messages. The use of adapters allows for a common interface for logging while switching backends if necessary. The adapters supported are:</p> <table class="docutils"> <colgroup> <col width="8%"> <col width="23%"> <col width="69%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Adapter</th> <th class="head">Description</th> <th class="head">API</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>File</td> <td>Logs to a plain text file</td> <td><a class="reference internal" href="../api/phalcon_logger_adapter_file"><em>Phalcon\Logger\Adapter\File</em></a></td> </tr> <tr class="row-odd">
<td>Stream</td> <td>Logs to a PHP Streams</td> <td><a class="reference internal" href="../api/phalcon_logger_adapter_stream"><em>Phalcon\Logger\Adapter\Stream</em></a></td> </tr> <tr class="row-even">
<td>Syslog</td> <td>Logs to the system logger</td> <td><a class="reference internal" href="../api/phalcon_logger_adapter_syslog"><em>Phalcon\Logger\Adapter\Syslog</em></a></td> </tr> <tr class="row-odd">
<td>Firephp</td> <td>Logs to the FirePHP</td> <td><a class="reference internal" href="../api/phalcon_logger_adapter_firephp"><em>Phalcon\Logger\Adapter\FirePHP</em></a></td> </tr> </tbody> </table>   <h2 id="creating-a-log">Creating a Log</h2> <p>The example below shows how to create a log and add messages to it:</p> <pre class="highlight-php" data-language="php">use Phalcon\Logger\Adapter\File as FileAdapter;

$logger = new FileAdapter("app/logs/test.log");
$logger-&gt;log("This is a message");
$logger-&gt;log("This is an error", \Phalcon\Logger::ERROR);
$logger-&gt;error("This is another error");
</pre> <p>The log generated is below:</p> <pre class="highlight-php" data-language="php">[Tue, 17 Apr 12 22:09:02 -0500][DEBUG] This is a message
[Tue, 17 Apr 12 22:09:02 -0500][ERROR] This is an error
[Tue, 17 Apr 12 22:09:02 -0500][ERROR] This is another error
</pre>   <h2 id="transactions">Transactions</h2> <p>Logging data to an adapter i.e. File (file system) is always an expensive operation in terms of performance. To combat that, you can take advantage of logging transactions. Transactions store log data temporarily in memory and later on write the data to the relevant adapter (File in this case) in a single atomic operation.</p> <pre class="highlight-php" data-language="php">use Phalcon\Logger\Adapter\File as FileAdapter;

// Create the logger
$logger = new FileAdapter("app/logs/test.log");

// Start a transaction
$logger-&gt;begin();

// Add messages
$logger-&gt;alert("This is an alert");
$logger-&gt;error("This is another error");

// Commit messages to file
$logger-&gt;commit();
</pre>   <h2 id="logging-to-multiple-handlers">Logging to Multiple Handlers</h2> <p><a class="reference internal" href="../api/phalcon_logger"><em>Phalcon\Logger</em></a> allows to send messages to multiple handlers with a just single call:</p> <pre class="highlight-php" data-language="php">use Phalcon\Logger,
    Phalcon\Logger\Multiple as MultipleStream,
    Phalcon\Logger\Adapter\File as FileAdapter,
    Phalcon\Logger\Adapter\Stream as StreamAdapter;

$logger = new MultipleStream();

$logger-&gt;push(new FileAdapter('test.log'));
$logger-&gt;push(new StreamAdapter('php://stdout'));

$logger-&gt;log("This is a message");
$logger-&gt;log("This is an error", Logger::ERROR);
$logger-&gt;error("This is another error");
</pre> <p>The messages are sent to the handlers in the order they where registered.</p>   <h2 id="message-formatting">Message Formatting</h2> <p>This component makes use of ‘formatters’ to format messages before sent them to the backend. The formatters available are:</p> <table class="docutils"> <colgroup> <col width="6%"> <col width="34%"> <col width="60%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Adapter</th> <th class="head">Description</th> <th class="head">API</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>Line</td> <td>Formats the messages using an one-line string</td> <td><a class="reference internal" href="../api/phalcon_logger_formatter_line"><em>Phalcon\Logger\Formatter\Line</em></a></td> </tr> <tr class="row-odd">
<td>Json</td> <td>Prepares a message to be encoded with JSON</td> <td><a class="reference internal" href="../api/phalcon_logger_formatter_json"><em>Phalcon\Logger\Formatter\Json</em></a></td> </tr> <tr class="row-even">
<td>Syslog</td> <td>Prepares a message to be sent to syslog</td> <td><a class="reference internal" href="../api/phalcon_logger_formatter_syslog"><em>Phalcon\Logger\Formatter\Syslog</em></a></td> </tr> </tbody> </table>  <h3 id="line-formatter">Line Formatter</h3> <p>Formats the messages using a one-line string. The default logging format is:</p> <p>[%date%][%type%] %message%</p> <p>You can change the default format using setFormat(), this allows you to change the format of the logged messages by defining your own. The log format variables allowed are:</p> <table class="docutils"> <colgroup> <col width="21%"> <col width="79%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Variable</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>%message%</td> <td>The message itself expected to be logged</td> </tr> <tr class="row-odd">
<td>%date%</td> <td>Date the message was added</td> </tr> <tr class="row-even">
<td>%type%</td> <td>Uppercase string with message type</td> </tr> </tbody> </table> <p>The example below shows how to change the log format:</p> <pre class="highlight-php" data-language="php">use Phalcon\Logger\Formatter\Line as LineFormatter;

//Changing the logger format
$formatter = new LineFormatter("%date% - %message%");
$logger-&gt;setFormatter($formatter);
</pre>   <h3 id="implementing-your-own-formatters">Implementing your own formatters</h3> <p>The <a class="reference internal" href="../api/phalcon_logger_formatterinterface"><em>Phalcon\Logger\FormatterInterface</em></a> interface must be implemented in order to create your own logger formatter or extend the existing ones.</p>    <h2 id="id1">Adapters</h2> <p>The following examples show the basic use of each adapter:</p>  <h3 id="stream-logger">Stream Logger</h3> <p>The stream logger writes messages to a valid registered stream in PHP. A list of streams is available <a class="reference external" href="http://php.net/manual/en/wrappers.php">here</a>:</p> <pre class="highlight-php" data-language="php">use Phalcon\Logger\Adapter\Stream as StreamAdapter;

// Opens a stream using zlib compression
$logger = new StreamAdapter("compress.zlib://week.log.gz");

// Writes the logs to stderr
$logger = new StreamAdapter("php://stderr");
</pre>   <h3 id="file-logger">File Logger</h3> <p>This logger uses plain files to log any kind of data. By default all logger files are open using append mode which open the files for writing only; placing the file pointer at the end of the file. If the file does not exist, attempt to create it. You can change this mode passing additional options to the constructor:</p> <pre class="highlight-php" data-language="php">use Phalcon\Logger\Adapter\File as FileAdapter;

// Create the file logger in 'w' mode
$logger = new FileAdapter("app/logs/test.log", array(
    'mode' =&gt; 'w'
));
</pre>   <h3 id="syslog-logger">Syslog Logger</h3> <p>This logger sends messages to the system logger. The syslog behavior may vary from one operating system to another.</p> <pre class="highlight-php" data-language="php">use Phalcon\Logger\Adapter\Syslog as SyslogAdapter;

// Basic Usage
$logger = new SyslogAdapter(null);

// Setting ident/mode/facility
$logger = new SyslogAdapter("ident-name", array(
    'option' =&gt; LOG_NDELAY,
    'facility' =&gt; LOG_MAIL
));
</pre>   <h3 id="firephp-logger">FirePHP Logger</h3> <p>This logger sends messages to the FirePHP.</p> <pre class="highlight-php" data-language="php">use Phalcon\Logger\Adapter\Firephp as Firephp;

$logger = new Firephp("");
    $logger-&gt;log("This is a message");
    $logger-&gt;log("This is an error", \Phalcon\Logger::ERROR);
    $logger-&gt;error("This is another error");
</pre>   <h3 id="implementing-your-own-adapters">Implementing your own adapters</h3> <p>The <a class="reference internal" href="../api/phalcon_logger_adapterinterface"><em>Phalcon\Logger\AdapterInterface</em></a> interface must be implemented in order to create your own logger adapters or extend the existing ones.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2011–2016 Phalcon Framework Team<br>Licensed under the Creative Commons Attribution License 3.0.<br>
    <a href="https://docs.phalconphp.com/en/2.0.0/reference/logging.html" class="_attribution-link">https://docs.phalconphp.com/en/2.0.0/reference/logging.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
