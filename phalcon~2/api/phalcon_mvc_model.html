
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Mvc&#92;Model - Phalcon 2 - W3cubDocs</title>
  
  <meta name="description" content="implements Phalcon&#92;Mvc&#92;ModelInterface, Phalcon&#92;Mvc&#92;Model&#92;ResultInterface, Phalcon&#92;DI&#92;InjectionAwareInterface, &hellip;">
  <meta name="keywords" content="abstract, class, mvc, model, phalcon, phalcon~2">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/phalcon~2/api/phalcon_mvc_model.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/phalcon~2.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/phalcon~2/" class="_nav-link" title="" style="margin-left:0;">Phalcon 2</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _phalcon">
				
				
<h1 id="abstract-class-phalcon-mvc-model">Abstract class <strong>Phalcon\Mvc\Model</strong>
</h1> <p><em>implements</em> <a class="reference internal" href="phalcon_mvc_modelinterface"><em>Phalcon\Mvc\ModelInterface</em></a>, <a class="reference internal" href="phalcon_mvc_model_resultinterface"><em>Phalcon\Mvc\Model\ResultInterface</em></a>, <a class="reference internal" href="phalcon_di_injectionawareinterface"><em>Phalcon\DI\InjectionAwareInterface</em></a>, Serializable</p> <p>Phalcon\Mvc\Model connects business objects and database tables to create a persistable domain model where logic and data are presented in one wrapping. It‘s an implementation of the object-relational mapping (ORM). A model represents the information (data) of the application and the rules to manipulate that data. Models are primarily used for managing the rules of interaction with a corresponding database table. In most cases, each table in your database will correspond to one model in your application. The bulk of your application’s business logic will be concentrated in the models. Phalcon\Mvc\Model is the first ORM written in C-language for PHP, giving to developers high performance when interacting with databases while is also easy to use.</p> <pre class="highlight-php" data-language="php">$robot = new Robots();
 $robot-&gt;type = 'mechanical';
 $robot-&gt;name = 'Astro Boy';
 $robot-&gt;year = 1952;
 if ($robot-&gt;save() == false) {
  echo "Umh, We can store robots: ";
  foreach ($robot-&gt;getMessages() as $message) {
    echo $message;
  }
 } else {
  echo "Great, a new robot was saved successfully!";
 }
</pre>  <h2 id="constants">Constants</h2> <h3 id="op_none" class="method-signature">
<em>integer</em> <strong>OP_NONE</strong>
</h3> <h3 id="op_create" class="method-signature">
<em>integer</em> <strong>OP_CREATE</strong>
</h3> <h3 id="op_update" class="method-signature">
<em>integer</em> <strong>OP_UPDATE</strong>
</h3> <h3 id="op_delete" class="method-signature">
<em>integer</em> <strong>OP_DELETE</strong>
</h3> <h3 id="dirty_state_persistent" class="method-signature">
<em>integer</em> <strong>DIRTY_STATE_PERSISTENT</strong>
</h3> <h3 id="dirty_state_transient" class="method-signature">
<em>integer</em> <strong>DIRTY_STATE_TRANSIENT</strong>
</h3> <h3 id="dirty_state_detached" class="method-signature">
<em>integer</em> <strong>DIRTY_STATE_DETACHED</strong>
</h3>   <h2 id="methods">Methods</h2> <h3 id="__construct" class="method-signature">final public <strong>__construct</strong> ([<a class="reference internal" href="phalcon_diinterface"><em>Phalcon\DiInterface</em></a> $dependencyInjector], [<a class="reference internal" href="phalcon_mvc_model_managerinterface"><em>Phalcon\Mvc\Model\ManagerInterface</em></a> $modelsManager])</h3> <p>Phalcon\Mvc\Model constructor</p> <h3 id="setdi" class="method-signature">public <strong>setDI</strong> (<a class="reference internal" href="phalcon_diinterface"><em>Phalcon\DiInterface</em></a> $dependencyInjector)</h3> <p>Sets the dependency injection container</p> <h3 id="getdi" class="method-signature">public <a class="reference internal" href="phalcon_diinterface"><em>Phalcon\DiInterface</em></a> <strong>getDI</strong> ()</h3> <p>Returns the dependency injection container</p> <h3 id="seteventsmanager" class="method-signature">protected <strong>setEventsManager</strong> ()</h3> <p>Sets a custom events manager</p> <h3 id="geteventsmanager" class="method-signature">protected <a class="reference internal" href="phalcon_events_managerinterface"><em>Phalcon\Events\ManagerInterface</em></a> <strong>getEventsManager</strong> ()</h3> <p>Returns the custom events manager</p> <h3 id="getmodelsmetadata" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model_metadatainterface"><em>Phalcon\Mvc\Model\MetaDataInterface</em></a> <strong>getModelsMetaData</strong> ()</h3> <p>Returns the models meta-data service related to the entity instance</p> <h3 id="getmodelsmanager" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model_managerinterface"><em>Phalcon\Mvc\Model\ManagerInterface</em></a> <strong>getModelsManager</strong> ()</h3> <p>Returns the models manager related to the entity instance</p> <h3 id="settransaction" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>setTransaction</strong> (<a class="reference internal" href="phalcon_mvc_model_transactioninterface"><em>Phalcon\Mvc\Model\TransactionInterface</em></a> $transaction)</h3> <p>Sets a transaction related to the Model instance</p> <pre class="highlight-php" data-language="php">use Phalcon\Mvc\Model\Transaction\Manager as TxManager;
use Phalcon\Mvc\Model\Transaction\Failed as TxFailed;

try {

  $txManager = new TxManager();

  $transaction = $txManager-&gt;get();

  $robot = new Robots();
  $robot-&gt;setTransaction($transaction);
  $robot-&gt;name = 'WALL·E';
  $robot-&gt;created_at = date('Y-m-d');
  if ($robot-&gt;save() == false) {
    $transaction-&gt;rollback("Can't save robot");
  }

  $robotPart = new RobotParts();
  $robotPart-&gt;setTransaction($transaction);
  $robotPart-&gt;type = 'head';
  if ($robotPart-&gt;save() == false) {
    $transaction-&gt;rollback("Robot part cannot be saved");
  }

  $transaction-&gt;commit();

} catch (TxFailed $e) {
  echo 'Failed, reason: ', $e-&gt;getMessage();
}
</pre> <h3 id="setsource" class="method-signature">protected <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>setSource</strong> (<em>string</em> $source)</h3> <p>Sets table name which model should be mapped</p> <h3 id="getsource" class="method-signature">public <em>string</em> <strong>getSource</strong> ()</h3> <p>Returns table name mapped in the model</p> <h3 id="setschema" class="method-signature">protected <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>setSchema</strong> (<em>string</em> $schema)</h3> <p>Sets schema name where table mapped is located</p> <h3 id="getschema" class="method-signature">public <em>string</em> <strong>getSchema</strong> ()</h3> <p>Returns schema name where table mapped is located</p> <h3 id="setconnectionservice" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>setConnectionService</strong> (<em>string</em> $connectionService)</h3> <p>Sets the DependencyInjection connection service name</p> <h3 id="setreadconnectionservice" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>setReadConnectionService</strong> (<em>string</em> $connectionService)</h3> <p>Sets the DependencyInjection connection service name used to read data</p> <h3 id="setwriteconnectionservice" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>setWriteConnectionService</strong> (<em>string</em> $connectionService)</h3> <p>Sets the DependencyInjection connection service name used to write data</p> <h3 id="getreadconnectionservice" class="method-signature">public <em>string</em> <strong>getReadConnectionService</strong> ()</h3> <p>Returns the DependencyInjection connection service name used to read data related the model</p> <h3 id="getwriteconnectionservice" class="method-signature">public <em>string</em> <strong>getWriteConnectionService</strong> ()</h3> <p>Returns the DependencyInjection connection service name used to write data related to the model</p> <h3 id="setdirtystate" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>setDirtyState</strong> (<em>int</em> $dirtyState)</h3> <p>Sets the dirty state of the object using one of the DIRTY_STATE_* constants</p> <h3 id="getdirtystate" class="method-signature">public <em>int</em> <strong>getDirtyState</strong> ()</h3> <p>Returns one of the DIRTY_STATE_* constants telling if the record exists in the database or not</p> <h3 id="getreadconnection" class="method-signature">public <a class="reference internal" href="phalcon_db_adapterinterface"><em>Phalcon\Db\AdapterInterface</em></a> <strong>getReadConnection</strong> ()</h3> <p>Gets the connection used to read data for the model</p> <h3 id="getwriteconnection" class="method-signature">public <a class="reference internal" href="phalcon_db_adapterinterface"><em>Phalcon\Db\AdapterInterface</em></a> <strong>getWriteConnection</strong> ()</h3> <p>Gets the connection used to write data to the model</p> <h3 id="assign" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>assign</strong> (<em>array</em> $data, [<em>array</em> $columnMap])</h3> <p>Assigns values to a model from an array</p> <pre class="highlight-php" data-language="php">$robot-&gt;assign(array(
  'type' =&gt; 'mechanical',
  'name' =&gt; 'Astro Boy',
  'year' =&gt; 1952
));
</pre> <h3 id="cloneresultmap" class="method-signature">public static <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>cloneResultMap</strong> (<a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> $base, <em>array</em> $data, <em>array</em> $columnMap, [<em>int</em> $dirtyState], [<em>boolean</em> $keepSnapshots])</h3> <p>Assigns values to a model from an array returning a new model.</p> <pre class="highlight-php" data-language="php">$robot = \Phalcon\Mvc\Model::cloneResultMap(new Robots(), array(
  'type' =&gt; 'mechanical',
  'name' =&gt; 'Astro Boy',
  'year' =&gt; 1952
));
</pre> <h3 id="cloneresultmaphydrate" class="method-signature">public static <em>mixed</em> <strong>cloneResultMapHydrate</strong> (<em>array</em> $data, <em>array</em> $columnMap, <em>int</em> $hydrationMode)</h3> <p>Returns an hydrated result based on the data and the column map</p> <h3 id="cloneresult" class="method-signature">public static <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>cloneResult</strong> (<a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> $base, <em>array</em> $data, [<em>int</em> $dirtyState])</h3> <p>Assigns values to a model from an array returning a new model</p> <pre class="highlight-php" data-language="php">$robot = Phalcon\Mvc\Model::cloneResult(new Robots(), array(
  'type' =&gt; 'mechanical',
  'name' =&gt; 'Astro Boy',
  'year' =&gt; 1952
));
</pre> <h3 id="find" class="method-signature">public static <a class="reference internal" href="phalcon_mvc_model_resultsetinterface"><em>Phalcon\Mvc\Model\ResultsetInterface</em></a> <strong>find</strong> ([<em>array</em> $parameters])</h3> <p>Allows to query a set of records that match the specified conditions</p> <pre class="highlight-php" data-language="php">//How many robots are there?
 $robots = Robots::find();
 echo "There are ", count($robots), "\n";

 //How many mechanical robots are there?
 $robots = Robots::find("type='mechanical'");
 echo "There are ", count($robots), "\n";

 //Get and print virtual robots ordered by name
 $robots = Robots::find(array("type='virtual'", "order" =&gt; "name"));
 foreach ($robots as $robot) {
   echo $robot-&gt;name, "\n";
 }

 //Get first 100 virtual robots ordered by name
 $robots = Robots::find(array("type='virtual'", "order" =&gt; "name", "limit" =&gt; 100));
 foreach ($robots as $robot) {
   echo $robot-&gt;name, "\n";
 }
</pre> <h3 id="findfirst" class="method-signature">public static <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>findFirst</strong> ([<em>array</em> $parameters])</h3> <p>Allows to query the first record that match the specified conditions</p> <pre class="highlight-php" data-language="php">//What's the first robot in robots table?
 $robot = Robots::findFirst();
 echo "The robot name is ", $robot-&gt;name;

 //What's the first mechanical robot in robots table?
 $robot = Robots::findFirst("type='mechanical'");
 echo "The first mechanical robot name is ", $robot-&gt;name;

 //Get first virtual robot ordered by name
 $robot = Robots::findFirst(array("type='virtual'", "order" =&gt; "name"));
 echo "The first virtual robot name is ", $robot-&gt;name;
</pre> <h3 id="query" class="method-signature">public static <a class="reference internal" href="phalcon_mvc_model_criteria"><em>Phalcon\Mvc\Model\Criteria</em></a> <strong>query</strong> ([<a class="reference internal" href="phalcon_diinterface"><em>Phalcon\DiInterface</em></a> $dependencyInjector])</h3> <p>Create a criteria for a specific model</p> <h3 id="_exists" class="method-signature">protected <em>boolean</em> <strong>_exists</strong> ()</h3> <p>Checks if the current record already exists or not</p> <h3 id="_groupresult" class="method-signature">protected static <a class="reference internal" href="phalcon_mvc_model_resultsetinterface"><em>Phalcon\Mvc\Model\ResultsetInterface</em></a> <strong>_groupResult</strong> ()</h3> <p>Generate a PHQL SELECT statement for an aggregate</p> <h3 id="count" class="method-signature">public static <em>int</em> <strong>count</strong> ([<em>array</em> $parameters])</h3> <p>Allows to count how many records match the specified conditions</p> <pre class="highlight-php" data-language="php">//How many robots are there?
 $number = Robots::count();
 echo "There are ", $number, "\n";

 //How many mechanical robots are there?
 $number = Robots::count("type='mechanical'");
 echo "There are ", $number, " mechanical robots\n";
</pre> <h3 id="sum" class="method-signature">public static <em>double</em> <strong>sum</strong> ([<em>array</em> $parameters])</h3> <p>Allows to calculate a summatory on a column that match the specified conditions</p> <pre class="highlight-php" data-language="php">//How much are all robots?
 $sum = Robots::sum(array('column' =&gt; 'price'));
 echo "The total price of robots is ", $sum, "\n";

 //How much are mechanical robots?
 $sum = Robots::sum(array("type='mechanical'", 'column' =&gt; 'price'));
 echo "The total price of mechanical robots is  ", $sum, "\n";
</pre> <h3 id="maximum" class="method-signature">public static <em>mixed</em> <strong>maximum</strong> ([<em>array</em> $parameters])</h3> <p>Allows to get the maximum value of a column that match the specified conditions</p> <pre class="highlight-php" data-language="php">//What is the maximum robot id?
 $id = Robots::maximum(array('column' =&gt; 'id'));
 echo "The maximum robot id is: ", $id, "\n";

 //What is the maximum id of mechanical robots?
 $sum = Robots::maximum(array("type='mechanical'", 'column' =&gt; 'id'));
 echo "The maximum robot id of mechanical robots is ", $id, "\n";
</pre> <h3 id="minimum" class="method-signature">public static <em>mixed</em> <strong>minimum</strong> ([<em>array</em> $parameters])</h3> <p>Allows to get the minimum value of a column that match the specified conditions</p> <pre class="highlight-php" data-language="php">//What is the minimum robot id?
 $id = Robots::minimum(array('column' =&gt; 'id'));
 echo "The minimum robot id is: ", $id;

 //What is the minimum id of mechanical robots?
 $sum = Robots::minimum(array("type='mechanical'", 'column' =&gt; 'id'));
 echo "The minimum robot id of mechanical robots is ", $id;
</pre> <h3 id="average" class="method-signature">public static <em>double</em> <strong>average</strong> ([<em>array</em> $parameters])</h3> <p>Allows to calculate the average value on a column matching the specified conditions</p> <pre class="highlight-php" data-language="php">//What's the average price of robots?
 $average = Robots::average(array('column' =&gt; 'price'));
 echo "The average price is ", $average, "\n";

 //What's the average price of mechanical robots?
 $average = Robots::average(array("type='mechanical'", 'column' =&gt; 'price'));
 echo "The average price of mechanical robots is ", $average, "\n";
</pre> <h3 id="fireevent" class="method-signature">public <em>boolean</em> <strong>fireEvent</strong> (<em>string</em> $eventName)</h3> <p>Fires an event, implicitly calls behaviors and listeners in the events manager are notified</p> <h3 id="fireeventcancel" class="method-signature">public <em>boolean</em> <strong>fireEventCancel</strong> (<em>string</em> $eventName)</h3> <p>Fires an event, implicitly calls behaviors and listeners in the events manager are notified This method stops if one of the callbacks/listeners returns boolean false</p> <h3 id="_canceloperation" class="method-signature">protected <em>boolean</em> <strong>_cancelOperation</strong> ()</h3> <p>Cancel the current operation</p> <h3 id="appendmessage" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>appendMessage</strong> (<a class="reference internal" href="phalcon_mvc_model_messageinterface"><em>Phalcon\Mvc\Model\MessageInterface</em></a> $message)</h3> <p>Appends a customized message on the validation process</p> <pre class="highlight-php" data-language="php">use \Phalcon\Mvc\Model\Message as Message;

 class Robots extends Phalcon\Mvc\Model
 {

   public function beforeSave()
   {
     if ($this-&gt;name == 'Peter') {
        $message = new Message("Sorry, but a robot cannot be named Peter");
        $this-&gt;appendMessage($message);
     }
   }
 }
</pre> <h3 id="validate" class="method-signature">protected <a class="reference internal" href="phalcon_mvc_model"><em>Phalcon\Mvc\Model</em></a> <strong>validate</strong> (<a class="reference internal" href="phalcon_mvc_model_validatorinterface"><em>Phalcon\Mvc\Model\ValidatorInterface</em></a> $validator)</h3> <p>Executes validators on every validation call</p> <pre class="highlight-php" data-language="php">use Phalcon\Mvc\Model\Validator\ExclusionIn as ExclusionIn;

class Subscriptors extends Phalcon\Mvc\Model
{

public function validation()
  {
            $this-&gt;validate(new ExclusionIn(array(
            'field' =&gt; 'status',
            'domain' =&gt; array('A', 'I')
    )));
    if ($this-&gt;validationHasFailed() == true) {
            return false;
    }
}

}
</pre> <h3 id="validationhasfailed" class="method-signature">public <em>boolean</em> <strong>validationHasFailed</strong> ()</h3> <p>Check whether validation process has generated any messages</p> <pre class="highlight-php" data-language="php">use Phalcon\Mvc\Model\Validator\ExclusionIn as ExclusionIn;

class Subscriptors extends Phalcon\Mvc\Model
{

public function validation()
  {
            $this-&gt;validate(new ExclusionIn(array(
            'field' =&gt; 'status',
            'domain' =&gt; array('A', 'I')
    )));
    if ($this-&gt;validationHasFailed() == true) {
            return false;
    }
}

}
</pre> <h3 id="getmessages" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model_messageinterface"><em>Phalcon\Mvc\Model\MessageInterface</em></a> [] <strong>getMessages</strong> ([<em>unknown</em> $filter])</h3> <p>Returns all the validation messages</p> <pre class="highlight-php" data-language="php">$robot = new Robots();
$robot-&gt;type = 'mechanical';
$robot-&gt;name = 'Astro Boy';
$robot-&gt;year = 1952;
if ($robot-&gt;save() == false) {
    echo "Umh, We can't store robots right now ";
    foreach ($robot-&gt;getMessages() as $message) {
            echo $message;
    }
} else {
    echo "Great, a new robot was saved successfully!";
}
</pre> <h3 id="_checkforeignkeysrestrict" class="method-signature">protected <em>boolean</em> <strong>_checkForeignKeysRestrict</strong> ()</h3> <p>Reads “belongs to” relations and check the virtual foreign keys when inserting or updating records to verify that inserted/updated values are present in the related entity</p> <h3 id="_checkforeignkeysreverserestrict" class="method-signature">protected <em>boolean</em> <strong>_checkForeignKeysReverseRestrict</strong> ()</h3> <p>Reads both “hasMany” and “hasOne” relations and checks the virtual foreign keys (restrict) when deleting records</p> <h3 id="_checkforeignkeysreversecascade" class="method-signature">protected <em>boolean</em> <strong>_checkForeignKeysReverseCascade</strong> ()</h3> <p>Reads both “hasMany” and “hasOne” relations and checks the virtual foreign keys (cascade) when deleting records</p> <h3 id="_presave" class="method-signature">protected <em>boolean</em> <strong>_preSave</strong> ()</h3> <p>Executes internal hooks before save a record</p> <h3 id="_postsave" class="method-signature">protected <em>boolean</em> <strong>_postSave</strong> ()</h3> <p>Executes internal events after save a record</p> <h3 id="_dolowinsert" class="method-signature">protected <em>boolean</em> <strong>_doLowInsert</strong> ()</h3> <p>Sends a pre-build INSERT SQL statement to the relational database system</p> <h3 id="_dolowupdate" class="method-signature">protected <em>boolean</em> <strong>_doLowUpdate</strong> ()</h3> <p>Sends a pre-build UPDATE SQL statement to the relational database system</p> <h3 id="_presaverelatedrecords" class="method-signature">protected <em>boolean</em> <strong>_preSaveRelatedRecords</strong> ()</h3> <p>Saves related records that must be stored prior to save the master record</p> <h3 id="_postsaverelatedrecords" class="method-signature">protected <em>boolean</em> <strong>_postSaveRelatedRecords</strong> ()</h3> <p>Save the related records assigned in the has-one/has-many relations</p> <h3 id="save" class="method-signature">public <em>boolean</em> <strong>save</strong> ([<em>array</em> $data], [<em>array</em> $whiteList])</h3> <p>Inserts or updates a model instance. Returning true on success or false otherwise.</p> <pre class="highlight-php" data-language="php">//Creating a new robot
$robot = new Robots();
$robot-&gt;type = 'mechanical';
$robot-&gt;name = 'Astro Boy';
$robot-&gt;year = 1952;
$robot-&gt;save();

//Updating a robot name
$robot = Robots::findFirst("id=100");
$robot-&gt;name = "Biomass";
$robot-&gt;save();
</pre> <h3 id="create" class="method-signature">public <em>boolean</em> <strong>create</strong> ([<em>array</em> $data], [<em>array</em> $whiteList])</h3> <p>Inserts a model instance. If the instance already exists in the persistance it will throw an exception Returning true on success or false otherwise.</p> <pre class="highlight-php" data-language="php">//Creating a new robot
$robot = new Robots();
$robot-&gt;type = 'mechanical';
$robot-&gt;name = 'Astro Boy';
$robot-&gt;year = 1952;
$robot-&gt;create();

  //Passing an array to create
  $robot = new Robots();
  $robot-&gt;create(array(
      'type' =&gt; 'mechanical',
      'name' =&gt; 'Astroy Boy',
      'year' =&gt; 1952
  ));
</pre> <h3 id="update" class="method-signature">public <em>boolean</em> <strong>update</strong> ([<em>array</em> $data], [<em>array</em> $whiteList])</h3> <p>Updates a model instance. If the instance doesn’t exist in the persistance it will throw an exception Returning true on success or false otherwise.</p> <pre class="highlight-php" data-language="php">//Updating a robot name
$robot = Robots::findFirst("id=100");
$robot-&gt;name = "Biomass";
$robot-&gt;update();
</pre> <h3 id="delete" class="method-signature">public <em>boolean</em> <strong>delete</strong> ()</h3> <p>Deletes a model instance. Returning true on success or false otherwise.</p> <pre class="highlight-php" data-language="php">$robot = Robots::findFirst("id=100");
$robot-&gt;delete();

foreach (Robots::find("type = 'mechanical'") as $robot) {
   $robot-&gt;delete();
}
</pre> <h3 id="getoperationmade" class="method-signature">public <em>int</em> <strong>getOperationMade</strong> ()</h3> <p>Returns the type of the latest operation performed by the ORM Returns one of the OP_* class constants</p> <h3 id="refresh" class="method-signature">public <strong>refresh</strong> ()</h3> <p>Refreshes the model attributes re-querying the record from the database</p> <h3 id="skipoperation" class="method-signature">public <strong>skipOperation</strong> (<em>boolean</em> $skip)</h3> <p>Skips the current operation forcing a success state</p> <h3 id="readattribute" class="method-signature">public <em>mixed</em> <strong>readAttribute</strong> (<em>string</em> $attribute)</h3> <p>Reads an attribute value by its name</p> <pre class="highlight-php" data-language="php">echo $robot-&gt;readAttribute('name');
</pre> <h3 id="writeattribute" class="method-signature">public <strong>writeAttribute</strong> (<em>string</em> $attribute, <em>mixed</em> $value)</h3> <p>Writes an attribute value by its name</p> <pre class="highlight-php" data-language="php">$robot-&gt;writeAttribute('name', 'Rosey');
</pre> <h3 id="skipattributes" class="method-signature">protected <strong>skipAttributes</strong> (<em>array</em> $attributes, [<em>boolean</em> $replace])</h3> <p>Sets a list of attributes that must be skipped from the generated INSERT/UPDATE statement</p> <pre class="highlight-php" data-language="php">class Robots extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
       $this-&gt;skipAttributes(array('price'));
   }

}
</pre> <h3 id="skipattributesoncreate" class="method-signature">protected <strong>skipAttributesOnCreate</strong> (<em>array</em> $attributes, [<em>boolean</em> $replace])</h3> <p>Sets a list of attributes that must be skipped from the generated INSERT statement</p> <pre class="highlight-php" data-language="php">class Robots extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
       $this-&gt;skipAttributesOnCreate(array('created_at'));
   }

}
</pre> <h3 id="skipattributesonupdate" class="method-signature">protected <strong>skipAttributesOnUpdate</strong> (<em>array</em> $attributes, [<em>boolean</em> $replace])</h3> <p>Sets a list of attributes that must be skipped from the generated UPDATE statement</p> <pre class="highlight-php" data-language="php">class Robots extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
       $this-&gt;skipAttributesOnUpdate(array('modified_in'));
   }

}
</pre> <h3 id="hasone" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model_relation"><em>Phalcon\Mvc\Model\Relation</em></a> <strong>hasOne</strong> (<em>mixed</em> $fields, <em>string</em> $referenceModel, <em>mixed</em> $referencedFields, [<em>array</em> $options])</h3> <p>Setup a 1-1 relation between two models</p> <pre class="highlight-php" data-language="php">class Robots extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
       $this-&gt;hasOne('id', 'RobotsDescription', 'robots_id');
   }

}
</pre> <h3 id="belongsto" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model_relation"><em>Phalcon\Mvc\Model\Relation</em></a> <strong>belongsTo</strong> (<em>mixed</em> $fields, <em>string</em> $referenceModel, <em>mixed</em> $referencedFields, [<em>array</em> $options])</h3> <p>Setup a relation reverse 1-1 between two models</p> <pre class="highlight-php" data-language="php">class RobotsParts extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
       $this-&gt;belongsTo('robots_id', 'Robots', 'id');
   }

}
</pre> <h3 id="hasmany" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model_relation"><em>Phalcon\Mvc\Model\Relation</em></a> <strong>hasMany</strong> (<em>mixed</em> $fields, <em>string</em> $referenceModel, <em>mixed</em> $referencedFields, [<em>array</em> $options])</h3> <p>Setup a relation 1-n between two models</p> <pre class="highlight-php" data-language="php">class Robots extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
       $this-&gt;hasMany('id', 'RobotsParts', 'robots_id');
   }

}
</pre> <h3 id="hasmanytomany" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model_relation"><em>Phalcon\Mvc\Model\Relation</em></a> <strong>hasManyToMany</strong> (<em>string</em> $fields, <em>string</em> $intermediateModel, <em>string</em> $intermediateFields, <em>string</em> $intermediateReferencedFields, <em>unknown</em> $referenceModel, <em>string</em> $referencedFields, [<em>array</em> $options])</h3> <p>Setup a relation n-n between two models through an intermediate relation</p> <pre class="highlight-php" data-language="php">class Robots extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
       //Setup a many-to-many relation to Parts through RobotsParts
       $this-&gt;hasManyToMany(
            'id',
            'RobotsParts',
            'robots_id',
            'parts_id',
            'Parts',
            'id'
    );
   }

}
</pre> <h3 id="addbehavior" class="method-signature">public <strong>addBehavior</strong> (<a class="reference internal" href="phalcon_mvc_model_behaviorinterface"><em>Phalcon\Mvc\Model\BehaviorInterface</em></a> $behavior)</h3> <p>Setups a behavior in a model</p> <pre class="highlight-php" data-language="php">use Phalcon\Mvc\Model\Behavior\Timestampable;

class Robots extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
    $this-&gt;addBehavior(new Timestampable(array(
            'onCreate' =&gt; array(
                    'field' =&gt; 'created_at',
                    'format' =&gt; 'Y-m-d'
            )
    )));
   }

}
</pre> <h3 id="keepsnapshots" class="method-signature">protected <strong>keepSnapshots</strong> (<em>boolean</em> $keepSnapshots)</h3> <p>Sets if the model must keep the original record snapshot in memory</p> <pre class="highlight-php" data-language="php">class Robots extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
    $this-&gt;keepSnapshots(true);
   }

}
</pre> <h3 id="setsnapshotdata" class="method-signature">public <strong>setSnapshotData</strong> (<em>array</em> $data, [<em>array</em> $columnMap])</h3> <p>Sets the record’s snapshot data. This method is used internally to set snapshot data when the model was set up to keep snapshot data</p> <h3 id="hassnapshotdata" class="method-signature">public <em>boolean</em> <strong>hasSnapshotData</strong> ()</h3> <p>Checks if the object has internal snapshot data</p> <h3 id="getsnapshotdata" class="method-signature">public <em>array</em> <strong>getSnapshotData</strong> ()</h3> <p>Returns the internal snapshot data</p> <h3 id="haschanged" class="method-signature">public <strong>hasChanged</strong> ([<em>boolean</em> $fieldName])</h3> <p>Check if a specific attribute has changed This only works if the model is keeping data snapshots</p> <h3 id="getchangedfields" class="method-signature">public <em>array</em> <strong>getChangedFields</strong> ()</h3> <p>Returns a list of changed values</p> <h3 id="usedynamicupdate" class="method-signature">protected <strong>useDynamicUpdate</strong> (<em>boolean</em> $dynamicUpdate)</h3> <p>Sets if a model must use dynamic update instead of the all-field update</p> <pre class="highlight-php" data-language="php">class Robots extends \Phalcon\Mvc\Model
{

   public function initialize()
   {
    $this-&gt;useDynamicUpdate(true);
   }

}
</pre> <h3 id="getrelated" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model_resultsetinterface"><em>Phalcon\Mvc\Model\ResultsetInterface</em></a> <strong>getRelated</strong> (<em>string</em> $alias, [<em>array</em> $arguments])</h3> <p>Returns related records based on defined relations</p> <h3 id="_getrelatedrecords" class="method-signature">protected <em>mixed</em> <strong>_getRelatedRecords</strong> ()</h3> <p>Returns related records defined relations depending on the method name</p> <h3 id="__call" class="method-signature">public <em>mixed</em> <strong>__call</strong> (<em>string</em> $method, [<em>array</em> $arguments])</h3> <p>Handles method calls when a method is not implemented</p> <h3 id="__callstatic" class="method-signature">public static <em>mixed</em> <strong>__callStatic</strong> (<em>string</em> $method, [<em>array</em> $arguments])</h3> <p>Handles method calls when a static method is not implemented</p> <h3 id="__set" class="method-signature">public <strong>__set</strong> (<em>string</em> $property, <em>mixed</em> $value)</h3> <p>Magic method to assign values to the the model</p> <h3 id="__get" class="method-signature">public <a class="reference internal" href="phalcon_mvc_model_resultset"><em>Phalcon\Mvc\Model\Resultset</em></a> <strong>__get</strong> (<em>string</em> $property)</h3> <p>Magic method to get related records using the relation alias as a property</p> <h3 id="__isset" class="method-signature">public <strong>__isset</strong> (<em>string</em> $property)</h3> <p>Magic method to check if a property is a valid relation</p> <h3 id="serialize" class="method-signature">public <em>string</em> <strong>serialize</strong> ()</h3> <p>Serializes the object ignoring connections, services, related objects or static properties</p> <h3 id="unserialize" class="method-signature">public <strong>unserialize</strong> (<em>string</em> $data)</h3> <p>Unserializes the object from a serialized string</p> <h3 id="dump" class="method-signature">public <em>array</em> <strong>dump</strong> ()</h3> <p>Returns a simple representation of the object that can be used with var_dump</p> <pre class="highlight-php" data-language="php">var_dump($robot-&gt;dump());
</pre> <h3 id="toarray" class="method-signature">public <em>array</em> <strong>toArray</strong> ([<em>array</em> $columns])</h3> <p>Returns the instance as an array representation</p> <pre class="highlight-php" data-language="php">print_r($robot-&gt;toArray());
</pre> <h3 id="setup" class="method-signature">public static <strong>setup</strong> (<em>array</em> $options)</h3> <p>Enables/disables options in the ORM Available options: events — Enables/Disables globally the internal events virtualForeignKeys — Enables/Disables virtual foreign keys columnRenaming — Enables/Disables column renaming notNullValidations — Enables/Disables automatic not null validation exceptionOnFailedSave — Enables/Disables throws an exception if the saving process fails phqlLiterals — Enables/Disables literals in PHQL this improves the security of applications</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2011–2016 Phalcon Framework Team<br>Licensed under the Creative Commons Attribution License 3.0.<br>
    <a href="https://docs.phalconphp.com/en/2.0.0/api/Phalcon_Mvc_Model.html" class="_attribution-link">https://docs.phalconphp.com/en/2.0.0/api/Phalcon_Mvc_Model.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
