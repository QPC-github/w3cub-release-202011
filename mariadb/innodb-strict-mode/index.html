
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>InnoDB Strict Mode - MariaDB - W3cubDocs</title>
  
  <meta name="description" content=" InnoDB strict mode is similar to SQL strict mode. When it is enabled, certain InnoDB warnings become errors instead. ">
  <meta name="keywords" content="innodb, strict, mode, mariadb">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/mariadb/innodb-strict-mode/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/mariadb.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/mariadb/" class="_nav-link" title="" style="margin-left:0;">MariaDB</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mariadb">
				
				
<h1>InnoDB Strict Mode</h1> <div> <div class="node creole"> <div class="answer formatted">  <p><a href="../innodb/index">InnoDB</a> strict mode is similar to <a href="../sql-mode/index#strict-mode">SQL strict mode</a>. When it is enabled, certain InnoDB warnings become errors instead.</p> <h2 class="anchored_heading" id="configuring-innodb-strict-mode">Configuring InnoDB Strict Mode</h2> <div class="mariadb_from_10_2_2 mariadb from_10_2_2 product">
<strong class="product_title">MariaDB starting with <a href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">10.2.2</a></strong><p>In <a href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a> and later, InnoDB strict mode is enabled by default.</p> </div>
<p>InnoDB strict mode can be enabled or disabled by configuring the <code><a href="../xtradbinnodb-server-system-variables/index#innodb_strict_mode">innodb_strict_mode</a></code> server system variable.</p> <p>Its global value can be changed dynamically with <code><a href="../set/index#global-session">SET GLOBAL</a></code>. For example:</p> <pre class="fixed" data-language="sql">SET GLOBAL innodb_strict_mode=ON;
</pre>
<p>Its value for the current session can also be changed dynamically with <code><a href="../set/index#global-session">SET SESSION</a></code>. For example:</p> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;
</pre>
<p>It can also be set in a server <a href="../configuring-mariadb-with-option-files/index#option-groups">option group</a> in an <a href="../configuring-mariadb-with-option-files/index">option file</a> prior to starting up the server. For example:</p> <pre class="fixed" data-language="sql">[mariadb]
...
innodb_strict_mode=ON
</pre>
<h2 class="anchored_heading" id="innodb-strict-mode-errors">InnoDB Strict Mode Errors</h2> <h3 class="anchored_heading" id="wrong-create-options">Wrong Create Options</h3> <p>If InnoDB strict mode is enabled, and if a DDL statement is executed and invalid or conflicting <a href="../create-table/index#table-options">table options</a> are specified, then an error is raised. The error will only be a generic error that says the following:</p> <pre class="fixed" data-language="sql">ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")
</pre>
<p>However, more details about the error can be found by executing <code><a href="../show-warnings/index">SHOW WARNINGS</a></code>.</p> <p>For example, the error is raised in the following cases:</p> <ul start="1"><li>The <code><a href="../create-table/index#key_block_size">KEY_BLOCK_SIZE</a></code> table option is set to a non-zero value, but the <code><a href="../create-table/index#row_format">ROW_FORMAT</a></code> table option is set to some row format other than the <code><a href="../innodb-compressed-row-format/index">COMPRESSED</a></code> row format. For example: </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=4
ROW_FORMAT=DYNAMIC;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: cannot specify ROW_FORMAT = DYNAMIC with KEY_BLOCK_SIZE.   |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#key_block_size">KEY_BLOCK_SIZE</a></code> table option is set to a non-zero value, but the configured value is larger than either <code>16</code> or the value of the <code><a href="../innodb-system-variables/index#innodb_page_size">innodb_page_size</a></code> system variable, whichever is smaller. </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=16;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: KEY_BLOCK_SIZE=16 cannot be larger than 8.                 |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#key_block_size">KEY_BLOCK_SIZE</a></code> table option is set to a non-zero value, but the <code><a href="../innodb-system-variables/index#innodb_file_per_table">innodb_file_per_table</a></code> system variable is not set to <code>ON</code>. </li></ul> <pre class="fixed" data-language="sql">SET GLOBAL innodb_file_per_table=OFF;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=4;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: KEY_BLOCK_SIZE requires innodb_file_per_table.             |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#key_block_size">KEY_BLOCK_SIZE</a></code> table option is set to a non-zero value, but it is not set to one of the supported values: [1, 2, 4, 8, 16]. </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=5;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+-----------------------------------------------------------------------+
| Level   | Code | Message                                                               |
+---------+------+-----------------------------------------------------------------------+
| Warning | 1478 | InnoDB: invalid KEY_BLOCK_SIZE = 5. Valid values are [1, 2, 4, 8, 16] |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options")    |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB       |
+---------+------+-----------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#row_format">ROW_FORMAT</a></code> table option is set to the <code><a href="../innodb-compressed-row-format/index">COMPRESSED</a></code> row format, but the <code><a href="../innodb-system-variables/index#innodb_file_per_table">innodb_file_per_table</a></code> system variable is not set to <code>ON</code>. </li></ul> <pre class="fixed" data-language="sql">SET GLOBAL innodb_file_per_table=OFF;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
ROW_FORMAT=COMPRESSED;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: ROW_FORMAT=COMPRESSED requires innodb_file_per_table.      |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#row_format">ROW_FORMAT</a></code> table option is set to a value, but it is not set to one of the values supported by InnoDB: <code><a href="../innodb-redundant-row-format/index">REDUNDANT</a></code>, <code><a href="../innodb-compact-row-format/index">COMPACT</a></code>, <code><a href="../innodb-dynamic-row-format/index">DYNAMIC</a></code>, and <code><a href="../innodb-compressed-row-format/index">COMPRESSED</a></code>. </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
ROW_FORMAT=PAGE;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: invalid ROW_FORMAT specifier.                              |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>Either the <code><a href="../create-table/index#key_block_size">KEY_BLOCK_SIZE</a></code> table option is set to a non-zero value or the <code><a href="../create-table/index#row_format">ROW_FORMAT</a></code> table option is set to the <code><a href="../innodb-compressed-row-format/index">COMPRESSED</a></code> row format, but the <code><a href="../innodb-system-variables/index#innodb_page_size">innodb_page_size</a></code> system variable is set to a value greater than <code>16k</code>. </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
ROW_FORMAT=COMPRESSED;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+-----------------------------------------------------------------------+
| Level   | Code | Message                                                               |
+---------+------+-----------------------------------------------------------------------+
| Warning | 1478 | InnoDB: Cannot create a COMPRESSED table when innodb_page_size &gt; 16k. |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options")    |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB       |
+---------+------+-----------------------------------------------------------------------+
3 rows in set (0.00 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#data-directoryindex-directory">DATA DIRECTORY</a></code> table option is set, but the <code><a href="../innodb-system-variables/index#innodb_file_per_table">innodb_file_per_table</a></code> system variable is not set to <code>ON</code>. </li></ul> <pre class="fixed" data-language="sql">SET GLOBAL innodb_file_per_table=OFF;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
DATA DIRECTORY='/mariadb';
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: DATA DIRECTORY requires innodb_file_per_table.             |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#data-directoryindex-directory">DATA DIRECTORY</a></code> table option is set, but the table is a <a href="../create-table/index#create-temporary-table">temporary table</a>. </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TEMPORARY TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
DATA DIRECTORY='/mariadb';
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: DATA DIRECTORY cannot be used for TEMPORARY tables.        |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#data-directoryindex-directory">INDEX DIRECTORY</a></code> table option is set. </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
INDEX DIRECTORY='/mariadb';
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: INDEX DIRECTORY is not supported                           |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="#page_compressed">PAGE_COMPRESSED</a></code> table option is set to <code>1</code>, so <a href="../compression/index">InnoDB page compression</a> is enabled, but the <code><a href="../create-table/index#row_format">ROW_FORMAT</a></code> table option is set to some row format other than the <code><a href="../innodb-compact-row-format/index">COMPACT</a></code> or <code><a href="../innodb-dynamic-row-format/index">DYNAMIC</a></code> row formats. </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=1
ROW_FORMAT=COMPRESSED;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSED table can't have ROW_TYPE=COMPRESSED       |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="#page_compressed">PAGE_COMPRESSED</a></code> table option is set to <code>1</code>, so <a href="../compression/index">InnoDB page compression</a> is enabled, but the <code><a href="../innodb-system-variables/index#innodb_file_per_table">innodb_file_per_table</a></code> system variable is not set to <code>ON</code>. </li></ul> <pre class="fixed" data-language="sql">SET GLOBAL innodb_file_per_table=OFF;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=1;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSED requires innodb_file_per_table.            |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="#page_compressed">PAGE_COMPRESSED</a></code> table option is set to <code>1</code>, so <a href="../compression/index">InnoDB page compression</a> is enabled, but the <code><a href="../create-table/index#key_block_size">KEY_BLOCK_SIZE</a></code> table option is also specified. </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=1
KEY_BLOCK_SIZE=4;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSED table can't have key_block_size            |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#page_compression_level">PAGE_COMPRESSION_LEVEL</a></code> table option is set, but the <code><a href="#page_compressed">PAGE_COMPRESSED</a></code> table option is set to <code>0</code>, so <a href="../compression/index">InnoDB page compression</a> is disabled. </li></ul> <pre class="fixed" data-language="sql">SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=0
PAGE_COMPRESSION_LEVEL=9;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSION_LEVEL requires PAGE_COMPRESSED            |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
</pre>
<div class="mariadb_to_10_2 mariadb to_10_2 product">
<strong class="product_title">MariaDB until <a href="../what-is-mariadb-102/index">10.2</a></strong><p>In <a href="../what-is-mariadb-102/index">MariaDB 10.2</a> and before, the error is raised in the following additional cases:</p> <ul start="1"><li>The <code><a href="../create-table/index#key_block_size">KEY_BLOCK_SIZE</a></code> table option is set to a non-zero value, but the <code><a href="../innodb-system-variables/index#innodb_file_format">innodb_file_format</a></code> system variable is not set to <code>Barracuda</code>. </li></ul> <pre class="fixed" data-language="sql">SET GLOBAL innodb_file_format='Antelope';
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=4;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: KEY_BLOCK_SIZE requires innodb_file_format &gt; Antelope.     |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.00 sec)
</pre>
<ul start="1"><li>The <code><a href="../create-table/index#row_format">ROW_FORMAT</a></code> table option is set to either the <code><a href="../innodb-compressed-row-format/index">COMPRESSED</a></code> or the <code><a href="../innodb-dynamic-row-format/index">DYNAMIC</a></code> row format, but the <code><a href="../innodb-system-variables/index#innodb_file_format">innodb_file_format</a></code> system variable is not set to <code>Barracuda</code>. </li></ul> <pre class="fixed" data-language="sql">SET GLOBAL innodb_file_format='Antelope';
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
ROW_FORMAT=COMPRESSED;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+-----------------------------------------------------------------------+
| Level   | Code | Message                                                               |
+---------+------+-----------------------------------------------------------------------+
| Warning | 1478 | InnoDB: ROW_FORMAT=COMPRESSED requires innodb_file_format &gt; Antelope. |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options")    |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB       |
+---------+------+-----------------------------------------------------------------------+
3 rows in set (0.00 sec)
</pre>
<ul start="1"><li>The <code><a href="#page_compressed">PAGE_COMPRESSED</a></code> table option is set to <code>1</code>, so <a href="../compression/index">InnoDB page compression</a> is enabled, but the <code><a href="../innodb-system-variables/index#innodb_file_format">innodb_file_format</a></code> system variable is not set to <code>Barracuda</code>. </li></ul> <pre class="fixed" data-language="sql">SET GLOBAL innodb_file_format='Antelope';
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=1;
SHOW WARNINGS;
ERROR 1005 (HY000): Can't create table `db1`.`tab` (errno: 140 "Wrong create options")

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSED requires innodb_file_format &gt; Antelope.    |
| Error   | 1005 | Can't create table `db1`.`tab` (errno: 140 "Wrong create options") |
| Warning | 1030 | Got error 140 "Wrong create options" from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.00 sec)
</pre>
</div>
<h3 class="anchored_heading" id="compressed-row-format">COMPRESSED Row Format</h3> <p>If InnoDB strict mode is enabled, and if a table uses the <code><a href="../innodb-compressed-row-format/index">COMPRESSED</a></code> row format, and if the table's <code><a href="../create-table/index#key_block_size">KEY_BLOCK_SIZE</a></code> is too small to contain a row, then an error is returned by the statement.</p> <h3 class="anchored_heading" id="row-size-too-large">Row Size Too Large</h3> <p>If InnoDB strict mode is enabled, and if a table exceeds its row format's <a href="../innodb-row-formats-overview/index#maximum-row-size">maximum row size</a>, then InnoDB will return an error.</p> <pre class="fixed" data-language="sql">ERROR 1118 (42000): Row size too large (&gt; 8126). Changing some columns to 
TEXT or BLOB may help. In current row format, BLOB prefix of 0 bytes is stored inline.
</pre>
<p>See <a href="../troubleshooting-row-size-too-large-errors-with-innodb/index">Troubleshooting Row Size Too Large Errors with InnoDB</a> for more information.</p> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/innodb-strict-mode/" class="_attribution-link">https://mariadb.com/kb/en/innodb-strict-mode/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
