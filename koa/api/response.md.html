
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Response - Koa - W3cubDocs</title>
  
  <meta name="description" content="A Koa Response object is an abstraction on top of node&#39;s vanilla response object, providing additional functionality that is useful for every &hellip;">
  <meta name="keywords" content="response, koa">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/koa/api/response.md.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/koa.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/koa/" class="_nav-link" title="" style="margin-left:0;">Koa</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _github">
				
				
<h1 id="response">Response</h1> <p>A Koa <code>Response</code> object is an abstraction on top of node's vanilla response object, providing additional functionality that is useful for every day HTTP server development.</p> <h2 id="api">API</h2> <h3 id="responseheader">response.header</h3> <p>Response header object.</p> <h3 id="responseheaders">response.headers</h3> <p>Response header object. Alias as <code>response.header</code>.</p> <h3 id="responsesocket">response.socket</h3> <p>Request socket.</p> <h3 id="responsestatus">response.status</h3> <p>Get response status. By default, <code>response.status</code> is set to <code>404</code> unlike node's <code>res.statusCode</code> which defaults to <code>200</code>.</p> <h3 id="responsestatus-1">response.status=</h3> <p>Set response status via numeric code:</p> <ul> <li>100 "continue"</li> <li>101 "switching protocols"</li> <li>102 "processing"</li> <li>200 "ok"</li> <li>201 "created"</li> <li>202 "accepted"</li> <li>203 "non-authoritative information"</li> <li>204 "no content"</li> <li>205 "reset content"</li> <li>206 "partial content"</li> <li>207 "multi-status"</li> <li>208 "already reported"</li> <li>226 "im used"</li> <li>300 "multiple choices"</li> <li>301 "moved permanently"</li> <li>302 "found"</li> <li>303 "see other"</li> <li>304 "not modified"</li> <li>305 "use proxy"</li> <li>307 "temporary redirect"</li> <li>308 "permanent redirect"</li> <li>400 "bad request"</li> <li>401 "unauthorized"</li> <li>402 "payment required"</li> <li>403 "forbidden"</li> <li>404 "not found"</li> <li>405 "method not allowed"</li> <li>406 "not acceptable"</li> <li>407 "proxy authentication required"</li> <li>408 "request timeout"</li> <li>409 "conflict"</li> <li>410 "gone"</li> <li>411 "length required"</li> <li>412 "precondition failed"</li> <li>413 "payload too large"</li> <li>414 "uri too long"</li> <li>415 "unsupported media type"</li> <li>416 "range not satisfiable"</li> <li>417 "expectation failed"</li> <li>418 "I'm a teapot"</li> <li>422 "unprocessable entity"</li> <li>423 "locked"</li> <li>424 "failed dependency"</li> <li>426 "upgrade required"</li> <li>428 "precondition required"</li> <li>429 "too many requests"</li> <li>431 "request header fields too large"</li> <li>500 "internal server error"</li> <li>501 "not implemented"</li> <li>502 "bad gateway"</li> <li>503 "service unavailable"</li> <li>504 "gateway timeout"</li> <li>505 "http version not supported"</li> <li>506 "variant also negotiates"</li> <li>507 "insufficient storage"</li> <li>508 "loop detected"</li> <li>510 "not extended"</li> <li>511 "network authentication required"</li> </ul> <p><strong>NOTE</strong>: don't worry too much about memorizing these strings, if you have a typo an error will be thrown, displaying this list so you can make a correction.</p> <h3 id="responsemessage">response.message</h3> <p>Get response status message. By default, <code>response.message</code> is associated with <code>response.status</code>.</p> <h3 id="responsemessage-1">response.message=</h3> <p>Set response status message to the given value.</p> <h3 id="responselength">response.length=</h3> <p>Set response Content-Length to the given value.</p> <h3 id="responselength-1">response.length</h3> <p>Return response Content-Length as a number when present, or deduce from <code>ctx.body</code> when possible, or <code>undefined</code>.</p> <h3 id="responsebody">response.body</h3> <p>Get response body.</p> <h3 id="responsebody-1">response.body=</h3> <p>Set response body to one of the following:</p> <ul> <li>
<code>string</code> written</li> <li>
<code>Buffer</code> written</li> <li>
<code>Stream</code> piped</li> <li>
<code>Object</code> || <code>Array</code> json-stringified</li> <li>
<code>null</code> no content response</li> </ul> <p>If <code>response.status</code> has not been set, Koa will automatically set the status to <code>200</code> or <code>204</code>.</p> <h4 id="string">String</h4> <p>The Content-Type is defaulted to text/html or text/plain, both with a default charset of utf-8. The Content-Length field is also set.</p> <h4 id="buffer">Buffer</h4> <p>The Content-Type is defaulted to application/octet-stream, and Content-Length is also set.</p> <h4 id="stream">Stream</h4> <p>The Content-Type is defaulted to application/octet-stream.</p> <p>Whenever a stream is set as the response body, <code>.onerror</code> is automatically added as a listener to the <code>error</code> event to catch any errors. In addition, whenever the request is closed (even prematurely), the stream is destroyed. If you do not want these two features, do not set the stream as the body directly. For example, you may not want this when setting the body as an HTTP stream in a proxy as it would destroy the underlying connection.</p> <p>See: <a href="https://github.com/koajs/koa/pull/612">https://github.com/koajs/koa/pull/612</a> for more information.</p> <p>Here's an example of stream error handling without automatically destroying the stream:</p> <pre data-language="js">const PassThrough = require('stream').PassThrough;

app.use(async ctx =&gt; {
  ctx.body = someHTTPStream.on('error', ctx.onerror).pipe(PassThrough());
});</pre> <h4 id="object">Object</h4> <p>The Content-Type is defaulted to application/json. This includes plain objects <code>{ foo: 'bar' }</code> and arrays <code>['foo', 'bar']</code>.</p> <h3 id="responsegetfield">response.get(field)</h3> <p>Get a response header field value with case-insensitive <code>field</code>.</p> <pre data-language="js">const etag = ctx.response.get('ETag');</pre> <h3 id="responsesetfield-value">response.set(field, value)</h3> <p>Set response header <code>field</code> to <code>value</code>:</p> <pre data-language="js">ctx.set('Cache-Control', 'no-cache');</pre> <h3 id="responseappendfield-value">response.append(field, value)</h3> <p>Append additional header <code>field</code> with value <code>val</code>.</p> <pre data-language="js">ctx.append('Link', '&lt;http://127.0.0.1/&gt;');</pre> <h3 id="responsesetfields">response.set(fields)</h3> <p>Set several response header <code>fields</code> with an object:</p> <pre data-language="js">ctx.set({
  'Etag': '1234',
  'Last-Modified': date
});</pre> <h3 id="responseremovefield">response.remove(field)</h3> <p>Remove header <code>field</code>.</p> <h3 id="responsetype">response.type</h3> <p>Get response <code>Content-Type</code> void of parameters such as "charset".</p> <pre data-language="js">const ct = ctx.type;
// =&gt; "image/png"</pre> <h3 id="responsetype-1">response.type=</h3> <p>Set response <code>Content-Type</code> via mime string or file extension.</p> <pre data-language="js">ctx.type = 'text/plain; charset=utf-8';
ctx.type = 'image/png';
ctx.type = '.png';
ctx.type = 'png';</pre> <p>Note: when appropriate a <code>charset</code> is selected for you, for example <code>response.type = 'html'</code> will default to "utf-8". If you need to overwrite <code>charset</code>, use <code>ctx.set('Content-Type', 'text/html')</code> to set response header field to value directly.</p> <h3 id="responseistypes">response.is(types...)</h3> <p>Very similar to <code>ctx.request.is()</code>. Check whether the response type is one of the supplied types. This is particularly useful for creating middleware that manipulate responses.</p> <p>For example, this is a middleware that minifies all HTML responses except for streams.</p> <pre data-language="js">const minify = require('html-minifier');

app.use(async (ctx, next) =&gt; {
  await next();

  if (!ctx.response.is('html')) return;

  let body = ctx.body;
  if (!body || body.pipe) return;

  if (Buffer.isBuffer(body)) body = body.toString();
  ctx.body = minify(body);
});</pre> <h3 id="responseredirecturl-alt">response.redirect(url, [alt])</h3> <p>Perform a [302] redirect to <code>url</code>.</p> <p>The string "back" is special-cased to provide Referrer support, when Referrer is not present <code>alt</code> or "/" is used.</p> <pre data-language="js">ctx.redirect('back');
ctx.redirect('back', '/index.html');
ctx.redirect('/login');
ctx.redirect('http://google.com');</pre> <p>To alter the default status of <code>302</code>, simply assign the status before or after this call. To alter the body, assign it after this call:</p> <pre data-language="js">ctx.status = 301;
ctx.redirect('/cart');
ctx.body = 'Redirecting to shopping cart';</pre> <h3 id="responseattachmentfilename-options">response.attachment([filename], [options])</h3> <p>Set <code>Content-Disposition</code> to "attachment" to signal the client to prompt for download. Optionally specify the <code>filename</code> of the download and some <a href="https://github.com/jshttp/content-disposition#options">options</a>.</p> <h3 id="responseheadersent">response.headerSent</h3> <p>Check if a response header has already been sent. Useful for seeing if the client may be notified on error.</p> <h3 id="responselastmodified">response.lastModified</h3> <p>Return the <code>Last-Modified</code> header as a <code>Date</code>, if it exists.</p> <h3 id="responselastmodified-1">response.lastModified=</h3> <p>Set the <code>Last-Modified</code> header as an appropriate UTC string. You can either set it as a <code>Date</code> or date string.</p> <pre data-language="js">ctx.response.lastModified = new Date();</pre> <h3 id="responseetag">response.etag=</h3> <p>Set the ETag of a response including the wrapped <code>"</code>s. Note that there is no corresponding <code>response.etag</code> getter.</p> <pre data-language="js">ctx.response.etag = crypto.createHash('md5').update(ctx.body).digest('hex');</pre> <h3 id="responsevaryfield">response.vary(field)</h3> <p>Vary on <code>field</code>.</p> <h3 id="responseflushheaders">response.flushHeaders()</h3> <p>Flush any set headers, and begin the body.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2018 Koa contributors<br>Licensed under the MIT License.<br>
    <a href="https://github.com/koajs/koa/blob/master/docs/api/response.md" class="_attribution-link">https://github.com/koajs/koa/blob/master/docs/api/response.md</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
