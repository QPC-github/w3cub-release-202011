
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Deployment Checklist - Django 2.2 - W3cubDocs</title>
  
  <meta name="description" content="The Internet is a hostile environment. Before deploying your Django project, you should take some time to review your settings, with security, &hellip;">
  <meta name="keywords" content="deployment, checklist, django, django~2.2">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/django~2.2/howto/deployment/checklist.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/django~2.2.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/django~2.2/" class="_nav-link" title="" style="margin-left:0;">Django 2.2</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="deployment-checklist">Deployment checklist</h1> <p id="s-deployment-checklist">The Internet is a hostile environment. Before deploying your Django project, you should take some time to review your settings, with security, performance, and operations in mind.</p> <p>Django includes many <a class="reference internal" href="../../topics/security"><span class="doc">security features</span></a>. Some are built-in and always enabled. Others are optional because they aren’t always appropriate, or because they’re inconvenient for development. For example, forcing HTTPS may not be suitable for all websites, and it’s impractical for local development.</p> <p>Performance optimizations are another category of trade-offs with convenience. For instance, caching is useful in production, less so for local development. Error reporting needs are also widely different.</p> <p>The following checklist includes settings that:</p> <ul class="simple"> <li>must be set properly for Django to provide the expected level of security;</li> <li>are expected to be different in each environment;</li> <li>enable optional security features;</li> <li>enable performance optimizations;</li> <li>provide error reporting.</li> </ul> <p>Many of these settings are sensitive and should be treated as confidential. If you’re releasing the source code for your project, a common practice is to publish suitable settings for development, and to use a private settings module for production.</p>  <h2 id="run-manage-py-check-deploy">Run <code>manage.py check --deploy</code>
</h2> <p id="s-run-manage-py-check-deploy">Some of the checks described below can be automated using the <a class="reference internal" href="../../ref/django-admin#cmdoption-check-deploy"><code>check
--deploy</code></a> option. Be sure to run it against your production settings file as described in the option’s documentation.</p>   <h2 id="critical-settings">Critical settings</h2>  <h3 id="secret-key"><a class="reference internal" href="../../ref/settings#std:setting-SECRET_KEY"><code>SECRET_KEY</code></a></h3> <p id="s-critical-settings"><strong>The secret key must be a large random value and it must be kept secret.</strong></p> <p>Make sure that the key used in production isn’t used anywhere else and avoid committing it to source control. This reduces the number of vectors from which an attacker may acquire the key.</p> <p>Instead of hardcoding the secret key in your settings module, consider loading it from an environment variable:</p> <pre data-language="python">import os
SECRET_KEY = os.environ['SECRET_KEY']
</pre> <p>or from a file:</p> <pre data-language="python">with open('/etc/secret_key.txt') as f:
    SECRET_KEY = f.read().strip()
</pre>   <h3 id="debug"><a class="reference internal" href="../../ref/settings#std:setting-DEBUG"><code>DEBUG</code></a></h3> <p id="s-debug"><strong>You must never enable debug in production.</strong></p> <p>You’re certainly developing your project with <a class="reference internal" href="../../ref/settings#std:setting-DEBUG"><code>DEBUG = True</code></a>, since this enables handy features like full tracebacks in your browser.</p> <p>For a production environment, though, this is a really bad idea, because it leaks lots of information about your project: excerpts of your source code, local variables, settings, libraries used, etc.</p>    <h2 id="environment-specific-settings">Environment-specific settings</h2>  <h3 id="allowed-hosts"><a class="reference internal" href="../../ref/settings#std:setting-ALLOWED_HOSTS"><code>ALLOWED_HOSTS</code></a></h3> <p id="s-environment-specific-settings">When <a class="reference internal" href="../../ref/settings#std:setting-DEBUG"><code>DEBUG = False</code></a>, Django doesn’t work at all without a suitable value for <a class="reference internal" href="../../ref/settings#std:setting-ALLOWED_HOSTS"><code>ALLOWED_HOSTS</code></a>.</p> <p>This setting is required to protect your site against some CSRF attacks. If you use a wildcard, you must perform your own validation of the <code>Host</code> HTTP header, or otherwise ensure that you aren’t vulnerable to this category of attacks.</p> <p>You should also configure the Web server that sits in front of Django to validate the host. It should respond with a static error page or ignore requests for incorrect hosts instead of forwarding the request to Django. This way you’ll avoid spurious errors in your Django logs (or emails if you have error reporting configured that way). For example, on nginx you might setup a default server to return “444 No Response” on an unrecognized host:</p> <pre data-language="nginx">server {
    listen 80 default_server;
    return 444;
}
</pre>   <h3 id="caches"><a class="reference internal" href="../../ref/settings#std:setting-CACHES"><code>CACHES</code></a></h3> <p id="s-caches">If you’re using a cache, connection parameters may be different in development and in production. Django defaults to per-process <a class="reference internal" href="../../topics/cache#local-memory-caching"><span class="std std-ref">local-memory caching</span></a> which may not be desirable.</p> <p>Cache servers often have weak authentication. Make sure they only accept connections from your application servers.</p> <p>If you’re using Memcached, consider using <a class="reference internal" href="../../topics/http/sessions#cached-sessions-backend"><span class="std std-ref">cached sessions</span></a> to improve performance.</p>   <h3 id="databases"><a class="reference internal" href="../../ref/settings#std:setting-DATABASES"><code>DATABASES</code></a></h3> <p id="s-databases">Database connection parameters are probably different in development and in production.</p> <p>Database passwords are very sensitive. You should protect them exactly like <a class="reference internal" href="../../ref/settings#std:setting-SECRET_KEY"><code>SECRET_KEY</code></a>.</p> <p>For maximum security, make sure database servers only accept connections from your application servers.</p> <p>If you haven’t set up backups for your database, do it right now!</p>   <h3 id="email-backend-and-related-settings">
<a class="reference internal" href="../../ref/settings#std:setting-EMAIL_BACKEND"><code>EMAIL_BACKEND</code></a> and related settings</h3> <p id="s-email-backend-and-related-settings">If your site sends emails, these values need to be set correctly.</p> <p>By default, Django sends email from <a class="reference external" href="mailto:webmaster%40localhost">webmaster<span>@</span>localhost</a> and <a class="reference external" href="mailto:root%40localhost">root<span>@</span>localhost</a>. However, some mail providers reject email from these addresses. To use different sender addresses, modify the <a class="reference internal" href="../../ref/settings#std:setting-DEFAULT_FROM_EMAIL"><code>DEFAULT_FROM_EMAIL</code></a> and <a class="reference internal" href="../../ref/settings#std:setting-SERVER_EMAIL"><code>SERVER_EMAIL</code></a> settings.</p>   <h3 id="static-root-and-static-url">
<a class="reference internal" href="../../ref/settings#std:setting-STATIC_ROOT"><code>STATIC_ROOT</code></a> and <a class="reference internal" href="../../ref/settings#std:setting-STATIC_URL"><code>STATIC_URL</code></a>
</h3> <p id="s-static-root-and-static-url">Static files are automatically served by the development server. In production, you must define a <a class="reference internal" href="../../ref/settings#std:setting-STATIC_ROOT"><code>STATIC_ROOT</code></a> directory where <a class="reference internal" href="../../ref/contrib/staticfiles#django-admin-collectstatic"><code>collectstatic</code></a> will copy them.</p> <p>See <a class="reference internal" href="../static-files/index"><span class="doc">Managing static files (e.g. images, JavaScript, CSS)</span></a> for more information.</p>   <h3 id="media-root-and-media-url">
<a class="reference internal" href="../../ref/settings#std:setting-MEDIA_ROOT"><code>MEDIA_ROOT</code></a> and <a class="reference internal" href="../../ref/settings#std:setting-MEDIA_URL"><code>MEDIA_URL</code></a>
</h3> <p id="s-media-root-and-media-url">Media files are uploaded by your users. They’re untrusted! Make sure your web server never attempts to interpret them. For instance, if a user uploads a <code>.php</code> file, the web server shouldn’t execute it.</p> <p>Now is a good time to check your backup strategy for these files.</p>   <h3 id="file-upload-permissions"><a class="reference internal" href="../../ref/settings#std:setting-FILE_UPLOAD_PERMISSIONS"><code>FILE_UPLOAD_PERMISSIONS</code></a></h3> <p id="s-file-upload-permissions">With the default file upload settings, files smaller than <a class="reference internal" href="../../ref/settings#std:setting-FILE_UPLOAD_MAX_MEMORY_SIZE"><code>FILE_UPLOAD_MAX_MEMORY_SIZE</code></a> may be stored with a different mode than larger files as described in <a class="reference internal" href="../../ref/settings#std:setting-FILE_UPLOAD_PERMISSIONS"><code>FILE_UPLOAD_PERMISSIONS</code></a>.</p> <p>Setting <a class="reference internal" href="../../ref/settings#std:setting-FILE_UPLOAD_PERMISSIONS"><code>FILE_UPLOAD_PERMISSIONS</code></a> ensures all files are uploaded with the same permissions.</p>    <h2 id="https">HTTPS</h2> <p id="s-https">Any website which allows users to log in should enforce site-wide HTTPS to avoid transmitting access tokens in clear. In Django, access tokens include the login/password, the session cookie, and password reset tokens. (You can’t do much to protect password reset tokens if you’re sending them by email.)</p> <p>Protecting sensitive areas such as the user account or the admin isn’t sufficient, because the same session cookie is used for HTTP and HTTPS. Your web server must redirect all HTTP traffic to HTTPS, and only transmit HTTPS requests to Django.</p> <p>Once you’ve set up HTTPS, enable the following settings.</p>  <h3 id="csrf-cookie-secure"><a class="reference internal" href="../../ref/settings#std:setting-CSRF_COOKIE_SECURE"><code>CSRF_COOKIE_SECURE</code></a></h3> <p id="s-csrf-cookie-secure">Set this to <code>True</code> to avoid transmitting the CSRF cookie over HTTP accidentally.</p>   <h3 id="session-cookie-secure"><a class="reference internal" href="../../ref/settings#std:setting-SESSION_COOKIE_SECURE"><code>SESSION_COOKIE_SECURE</code></a></h3> <p id="s-session-cookie-secure">Set this to <code>True</code> to avoid transmitting the session cookie over HTTP accidentally.</p>    <h2 id="performance-optimizations">Performance optimizations</h2> <p id="s-performance-optimizations">Setting <a class="reference internal" href="../../ref/settings#std:setting-DEBUG"><code>DEBUG = False</code></a> disables several features that are only useful in development. In addition, you can tune the following settings.</p>  <h3 id="conn-max-age"><a class="reference internal" href="../../ref/settings#std:setting-CONN_MAX_AGE"><code>CONN_MAX_AGE</code></a></h3> <p id="s-conn-max-age">Enabling <a class="reference internal" href="../../ref/databases#persistent-database-connections"><span class="std std-ref">persistent database connections</span></a> can result in a nice speed-up when connecting to the database accounts for a significant part of the request processing time.</p> <p>This helps a lot on virtualized hosts with limited network performance.</p>   <h3 id="templates"><a class="reference internal" href="../../ref/settings#std:setting-TEMPLATES"><code>TEMPLATES</code></a></h3> <p id="s-templates">Enabling the cached template loader often improves performance drastically, as it avoids compiling each template every time it needs to be rendered. See the <a class="reference internal" href="../../ref/templates/api#template-loaders"><span class="std std-ref">template loaders docs</span></a> for more information.</p>    <h2 id="error-reporting">Error reporting</h2> <p id="s-error-reporting">By the time you push your code to production, it’s hopefully robust, but you can’t rule out unexpected errors. Thankfully, Django can capture errors and notify you accordingly.</p>  <h3 id="logging"><a class="reference internal" href="../../ref/settings#std:setting-LOGGING"><code>LOGGING</code></a></h3> <p id="s-logging">Review your logging configuration before putting your website in production, and check that it works as expected as soon as you have received some traffic.</p> <p>See <a class="reference internal" href="../../topics/logging"><span class="doc">Logging</span></a> for details on logging.</p>   <h3 id="admins-and-managers">
<a class="reference internal" href="../../ref/settings#std:setting-ADMINS"><code>ADMINS</code></a> and <a class="reference internal" href="../../ref/settings#std:setting-MANAGERS"><code>MANAGERS</code></a>
</h3> <p id="s-admins-and-managers"><a class="reference internal" href="../../ref/settings#std:setting-ADMINS"><code>ADMINS</code></a> will be notified of 500 errors by email.</p> <p><a class="reference internal" href="../../ref/settings#std:setting-MANAGERS"><code>MANAGERS</code></a> will be notified of 404 errors. <a class="reference internal" href="../../ref/settings#std:setting-IGNORABLE_404_URLS"><code>IGNORABLE_404_URLS</code></a> can help filter out spurious reports.</p> <p>See <a class="reference internal" href="../error-reporting"><span class="doc">Error reporting</span></a> for details on error reporting by email.</p> <div class="admonition-error-reporting-by-email-doesn-t-scale-very-well admonition"> <p class="first admonition-title">Error reporting by email doesn’t scale very well</p> <p class="last">Consider using an error monitoring system such as <a class="reference external" href="https://docs.sentry.io/">Sentry</a> before your inbox is flooded by reports. Sentry can also aggregate logs.</p> </div>   <h3 id="customize-the-default-error-views">Customize the default error views</h3> <p id="s-customize-the-default-error-views">Django includes default views and templates for several HTTP error codes. You may want to override the default templates by creating the following templates in your root template directory: <code>404.html</code>, <code>500.html</code>, <code>403.html</code>, and <code>400.html</code>. The <a class="reference internal" href="../../ref/views#error-views"><span class="std std-ref">default error views</span></a> that use these templates should suffice for 99% of Web applications, but you can <a class="reference internal" href="../../topics/http/views#customizing-error-views"><span class="std std-ref">customize them</span></a> as well.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © Django Software Foundation and individual contributors<br>Licensed under the BSD License.<br>
    <a href="https://docs.djangoproject.com/en/2.2/howto/deployment/checklist/" class="_attribution-link">https://docs.djangoproject.com/en/2.2/howto/deployment/checklist/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
