
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>4. HTTP Server - Erlang 21 - W3cubDocs</title>
  
  <meta name="description" content="The HTTP server, also referred to as httpd, handles HTTP requests as described in RFC 2616 with a few exceptions, such as gateway and proxy &hellip;">
  <meta name="keywords" content="http, server, erlang, erlang~21">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/erlang~21/lib/inets-7.0/doc/html/http_server.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/erlang~21.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/erlang~21/" class="_nav-link" title="" style="margin-left:0;">Erlang 21</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _erlang">
				
				
<h1>4 HTTP server</h1> <h2><span onmouseover="document.getElementById('ghlink-configuration-id61464').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-configuration-id61464').style.visibility = 'hidden';" id="configuration">4.1 Configuration</span></h2>  <p id="config">The HTTP server, also referred to as httpd, handles HTTP requests as described in <code><a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a></code> with a few exceptions, such as gateway and proxy functionality. The server supports IPv6 as long as the underlying mechanisms also do so.</p> <p>The server implements numerous features, such as:</p> <ul> <li>Secure Sockets Layer (SSL)</li> <li>Erlang Scripting Interface (ESI)</li> <li>Common Gateway Interface (CGI)</li> <li>User Authentication (using Mnesia, Dets or plain text database)</li> <li>Common Logfile Format (with or without disk_log(3) support)</li> <li>URL Aliasing</li> <li>Action Mappings</li> <li>Directory Listings</li> </ul> <p>The configuration of the server is provided as an Erlang property list. For backwards compatibility, a configuration file using apache-style configuration directives is supported.</p> <p>As of <code class="code">Inets</code> 5.0 the HTTP server is an easy to start/stop and customize web server providing the most basic web server functionality. Inets is designed for embedded systems and if you want a full-fledged web server there are exists other erlang open source alternatives.</p> <p>Almost all server functionality has been implemented using an especially crafted server API, which is described in the Erlang Web Server API. This API can be used to enhance the core server functionality, for example with custom logging and authentication.</p> <p>The following is to be put in the Erlang node application configuration file to start an HTTP server at application startup:</p> <pre data-language="erlang">[{inets, [{services, [{httpd, [{proplist_file,
           "/var/tmp/server_root/conf/8888_props.conf"}]},
          {httpd, [{proplist_file,
           "/var/tmp/server_root/conf/8080_props.conf"}]}]}]}].</pre> <p>The server is configured using an Erlang property list. For the available properties, see <code><a href="httpd">httpd(3)</a></code>. For backwards compatibility, apache-like configuration files are also supported. </p> <p>The available configuration properties are as follows:</p> <pre data-language="erlang">httpd_service() -&gt; {httpd, httpd()}
httpd()         -&gt; [httpd_config()] 
httpd_config()  -&gt; {file, file()} |
                   {proplist_file, file()}
                   {debug, debug()} |
                   {accept_timeout, integer()}
debug()         -&gt; disable | [debug_options()]
debug_options() -&gt; {all_functions, modules()} | 
                   {exported_functions, modules()} |
                   {disable, modules()}
modules()       -&gt; [atom()]</pre> <p>Here:</p> <dl> <dt><strong><code class="code">{file, file()}</code></strong></dt> <dd><p>If you use an old apace-like configuration file.</p></dd> <dt><strong><code class="code">{proplist_file, file()}</code></strong></dt> <dd><p>File containing an Erlang property list, followed by a full stop, describing the HTTP server configuration.</p></dd> <dt><strong><code class="code">{debug, debug()}</code></strong></dt> <dd><p>Can enable trace on all functions or only exported functions on chosen modules.</p></dd> <dt><strong><code class="code">{accept_timeout, integer()}</code></strong></dt> <dd><p>Sets the wanted time-out value for the server to set up a request connection.</p></dd> </dl> <h2><span onmouseover="document.getElementById('ghlink-getting-started-id63765').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-getting-started-id63765').style.visibility = 'hidden';" id="getting-started">4.2 Getting Started</span></h2>  <p id="using_http_server_api">Start <code class="code">Inets</code>:</p> <pre data-language="erlang">1 &gt; inets:start().
ok</pre> <p>Start an HTTP server with minimal required configuration. If you specify port <code class="code">0</code>, an arbitrary available port is used, and you can use function <code class="code">info</code> to find which port number that was picked:</p> <pre data-language="erlang">2 &gt; {ok, Pid} = inets:start(httpd, [{port, 0},
{server_name,"httpd_test"}, {server_root,"/tmp"},
{document_root,"/tmp/htdocs"}, {bind_address, "localhost"}]).
{ok, 0.79.0}      </pre> <p>Call <code class="code">info</code>:</p> <pre data-language="erlang">3 &gt;  httpd:info(Pid).
[{mime_types,[{"html","text/html"},{"htm","text/html"}]},
{server_name,"httpd_test"},
{bind_address, {127,0,0,1}},
{server_root,"/tmp"},
{port,59408},
{document_root,"/tmp/htdocs"}]</pre> <p>Reload the configuration without restarting the server: </p> <pre data-language="erlang">4 &gt; httpd:reload_config([{port, 59408},
  {server_name,"httpd_test"}, {server_root,"/tmp/www_test"},
  {document_root,"/tmp/www_test/htdocs"},
  {bind_address, "localhost"}], non_disturbing).
ok.</pre> <div class="note"> <div class="label">Note</div> <div class="content">

<p><code class="code">port</code> and <code class="code">bind_address</code> cannot be changed. Clients trying to access the server during the reload get a service temporary unavailable answer.</p>
</div> </div> <pre data-language="erlang">5 &gt;  httpd:info(Pid, [server_root, document_root]).
[{server_root,"/tmp/www_test"},{document_root,"/tmp/www_test/htdocs"}] </pre> <pre data-language="erlang">6 &gt; ok = inets:stop(httpd, Pid).</pre> <p>Alternative:</p> <pre data-language="erlang">6 &gt; ok = inets:stop(httpd, {{127,0,0,1}, 59408}).</pre> <p>Notice that <code class="code">bind_address</code> must be the IP address reported by function <code class="code">info</code> and cannot be the hostname that is allowed when putting in <code class="code">bind_address</code>.</p> <h2><span onmouseover="document.getElementById('ghlink-htaccess---user-configurable-authentication-id62643').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-htaccess---user-configurable-authentication-id62643').style.visibility = 'hidden';" id="htaccess---user-configurable-authentication">4.3 Htaccess - User Configurable Authentication</span></h2>  <p id="htaccess">Web server users without server administrative privileges that need to manage authentication of web pages that are local to their user can use the per-directory runtime configurable user-authentication scheme <code class="code">htaccess</code>. It works as follows:</p> <ul> <li>Each directory in the path to the requested asset is searched for an access file (default is <code class="code">.htaccess</code>), which restricts the web servers rights to respond to a request. If an access file is found, the rules in that file is applied to the request.</li> <li>The rules in an access file apply to files in the same directory and in subdirectories. If there exists more than one access file in the path to an asset, the rules in the access file nearest the requested asset is applied.</li> <li>To change the rules that restrict the use of an asset, the user only needs write access to the directory where the asset is.</li> <li>All access files in the path to a requested asset are read once per request. This means that the load on the server increases when <code class="code">htaccess</code> is used.</li> <li>If a directory is limited both by authentication directives in the HTTP server configuration file and by the <code class="code">htaccess</code> files, the user must be allowed to get access to the file by both methods for the request to succeed.</li> </ul> <h4><span onmouseover="document.getElementById('ghlink-access-files-directives-id64675').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-access-files-directives-id64675').style.visibility = 'hidden';" id="access-files-directives">Access Files Directives</span></h4> <p>In every directory under <code class="code">DocumentRoot</code> or under an <code class="code">Alias</code> a user can place an access file. An access file is a plain text file that specifies the restrictions to consider before the web server answers to a request. If there are more than one access file in the path to the requested asset, the directives in the access file in the directory nearest the asset is used.</p> <dl> <dt><strong><strong>"allow"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">Allow</code> from subnet <code class="code">subnet | from all</code></p> <p><strong>Default:</strong> <code class="code">from all</code></p> <p>Same as directive <code class="code">allow</code> for the server configuration file.</p> </dd> <dt><strong><strong>"AllowOverRide"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">AllowOverRide</code> <code class="code">all | none | Directives</code></p> <p><strong>Default:</strong> <code class="code">none</code></p> <p><code class="code">AllowOverRide</code> specifies the parameters that access files in subdirectories are not allowed to alter the value for. If the parameter is set to <code class="code">none</code>, no further access files is parsed. </p> <p>If only one access file exists, setting this parameter to <code class="code">none</code> can ease the burden on the server as the server then stops looking for access files.</p> </dd> <dt><strong><strong>"AuthGroupfile"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">AuthGroupFile</code> Filename</p> <p><strong>Default:</strong> <code class="code">none</code></p> <p><code class="code">AuthGroupFile</code> indicates which file that contains the list of groups. The filename must contain the absolute path to the file. The format of the file is one group per row and every row contains the name of the group and the members of the group, separated by a space, for example:</p> <pre data-language="erlang">
GroupName: Member1 Member2 .... MemberN</pre> </dd> <dt><strong><strong>"AuthName"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">AuthName</code> auth-domain</p> <p><strong>Default:</strong> <code class="code">none</code></p> <p>Same as directive <code class="code">AuthName</code> for the server configuration file.</p> </dd> <dt><strong><strong>"AuthType"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">AuthType</code> <code class="code">Basic</code></p> <p><strong>Default:</strong> <code class="code">Basic</code></p> <p><code class="code">AuthType</code> specifies which authentication scheme to be used. Only Basic Authenticating using UUEncoding of the password and user ID is implemented.</p> </dd> <dt><strong><strong>"AuthUserFile"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">AuthUserFile</code> Filename</p> <p><strong>Default:</strong><code class="code">none</code></p> <p><code class="code">AuthUserFile</code> indicates which file that contains the list of users. The filename must contain the absolute path to the file. The username and password are not encrypted so do not place the file with users in a directory that is accessible through the web server. The format of the file is one user per row. Every row contains <code class="code">UserName</code> and <code class="code">Password</code> separated by a colon, for example:</p> <pre data-language="erlang">
UserName:Password
UserName:Password</pre> </dd> <dt><strong><strong>"deny"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">deny</code> from subnet <code class="code">subnet | from all</code></p> <p><strong>Context:</strong> Limit</p> <p>Same as directive <code class="code">deny</code> for the server configuration file.</p> </dd> <dt><strong><strong>"Limit"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">&lt;Limit</code> RequestMethods<code class="code">&gt;</code></p> <p><strong>Default:</strong> <code class="code">none</code></p> <p><code class="code">&lt;Limit&gt;</code> and <code class="code">&lt;/Limit&gt;</code> are used to enclose a group of directives applying only to requests using the specified methods. If no request method is specified, all request methods are verified against the restrictions.</p> <p>Example:</p> <pre data-language="erlang">
&lt;Limit POST GET HEAD&gt;
  order allow deny
  require group group1
  allow from 123.145.244.5
&lt;/Limit&gt;</pre> </dd> <dt><strong><strong>"order"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">order</code> <code class="code">allow deny | deny allow</code></p> <p><strong>Default:</strong> <code class="code">allow deny</code></p> <p><code class="code">order</code> defines if the deny or allow control is to be performed first.</p> <p>If the order is set to <code class="code">allow deny</code>, the users network address is first controlled to be in the allow subset. If the user network address is not in the allowed subset, the user is denied to get the asset. If the network address is in the allowed subset, a second control is performed. That is, the user network address is not in the subset of network addresses to be denied as specified by parameter <code class="code">deny</code>.</p> <p>If the order is set to <code class="code">deny allow</code>, only users from networks specified to be in the allowed subset succeeds to request assets in the limited area.</p> </dd> <dt><strong><strong>"require"</strong></strong></dt> <dd> <p><strong>Syntax:</strong> <code class="code">require</code> <code class="code">group group1 group2... | user user1 user2...</code></p> <p><strong>Default:</strong> <code class="code">none</code></p> <p><strong>Context:</strong> Limit</p> <p>For more information, see directive <code class="code">require</code> in <code><a href="mod_auth">mod_auth(3)</a></code>.</p> </dd> </dl> <h2><span onmouseover="document.getElementById('ghlink-dynamic-web-pages-id64415').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-dynamic-web-pages-id64415').style.visibility = 'hidden';" id="dynamic-web-pages">4.4 Dynamic Web Pages</span></h2>  <p id="dynamic_we_pages"><code class="code">Inets</code> HTTP server provides two ways of creating dynamic web pages, each with its own advantages and disadvantages:</p> <dl> <dt><strong><strong>CGI scripts</strong></strong></dt> <dd><p>Common Gateway Interface (CGI) scripts can be written in any programming language. CGI scripts are standardized and supported by most web servers. The drawback with CGI scripts is that they are resource-intensive because of their design. CGI requires the server to fork a new OS process for each executable it needs to start. </p></dd> <dt><strong><strong>ESI-functions</strong></strong></dt> <dd><p>Erlang Server Interface (ESI) functions provide a tight and efficient interface to the execution of Erlang functions. This interface, on the other hand, is <code class="code">Inets</code> specific.</p></dd> </dl> <h4><span onmouseover="document.getElementById('ghlink-cgi-version-1.1,-rfc-3875-id64466').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-cgi-version-1.1,-rfc-3875-id64466').style.visibility = 'hidden';" id="cgi-version-1.1,-rfc-3875">CGI Version 1.1, RFC 3875</span></h4> <p>The module <code class="code">mod_cgi</code> enables execution of <code><a href="http://www.ietf.org/rfc/rfc3875.txt">CGI scripts</a></code> on the server. A file matching the definition of a ScriptAlias config directive is treated as a CGI script. A CGI script is executed by the server and its output is returned to the client.</p> <p>The CGI script response comprises a message header and a message body, separated by a blank line. The message header contains one or more header fields. The body can be empty.</p> <p>Example:</p> <pre data-language="erlang">"Content-Type:text/plain\nAccept-Ranges:none\n\nsome very
	plain text"</pre> <p>The server interprets the message headers and most of them are transformed into HTTP headers and sent back to the client together with the message-body.</p> <p>Support for CGI-1.1 is implemented in accordance with <code><a href="http://www.ietf.org/rfc/rfc3875.txt">RFC 3875</a></code>.</p> <h4><span onmouseover="document.getElementById('ghlink-esi-id63517').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-esi-id63517').style.visibility = 'hidden';" id="esi">ESI</span></h4> <p>The Erlang server interface is implemented by module <code class="code">mod_esi</code>.</p> <h5>ERL Scheme</h5> <p>The erl scheme is designed to mimic plain CGI, but without the extra overhead. An URL that calls an Erlang <code class="code">erl</code> function has the following syntax (regular expression): </p> <pre data-language="erlang">http://your.server.org/***/Module[:/]Function(?QueryString|/PathInfo)</pre> <p>*** depends on how the ErlScriptAlias config directive has been used.</p> <p>The module <code class="code">Module</code> referred to must be found in the code path, and it must define a function <code class="code">Function</code> with an arity of two or three. It is preferable to implement a function with arity three, as it permits to send chunks of the web page to the client during the generation phase instead of first generating the whole web page and then sending it to the client. The option to implement a function with arity two is only kept for backwards compatibility reasons. For implementation details of the ESI callback function, see <code><a href="mod_esi">mod_esi(3)</a></code>.</p> <h5>EVAL Scheme</h5> <p>The eval scheme is straight-forward and does not mimic the behavior of plain CGI. An URL that calls an Erlang <code class="code">eval</code> function has the following syntax:</p> <pre data-language="erlang">http://your.server.org/***/Mod:Func(Arg1,...,ArgN)</pre> <p>*** depends on how the ErlScriptAlias config directive has been used.</p> <p>The module <code class="code">Mod</code> referred to must be found in the code path and data returned by the function <code class="code">Func</code> is passed back to the client. Data returned from the function must take the form as specified in the CGI specification. For implementation details of the ESI callback function, see <code><a href="mod_esi">mod_esi(3)</a></code>.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The eval scheme can seriously threaten the integrity of the Erlang node housing a web server, for example:</p> <pre data-language="erlang">http://your.server.org/eval?httpd_example:print(atom_to_list(apply(erlang,halt,[])))</pre> <p>This effectively closes down the Erlang node. Therefore, use the erl scheme instead, until this security breach is fixed.</p> <p>Today there are no good ways of solving this problem and therefore the eval scheme can be removed in future release of <code class="code">Inets</code>.</p> </div> </div> <h2><span onmouseover="document.getElementById('ghlink-logging-id59238').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-logging-id59238').style.visibility = 'hidden';" id="logging">4.5 Logging</span></h2>  <p id="logging">Three types of logs are supported: transfer logs, security logs, and error logs. The de-facto standard Common Logfile Format is used for the transfer and security logging. There are numerous statistics programs available to analyze Common Logfile Format. The Common Logfile Format looks as follows: </p> <p><strong>remotehost rfc931 authuser [date] "request" status bytes</strong></p> <p>Here:</p> <dl> <dt><strong><strong>remotehost</strong></strong></dt> <dd>Remote hostname.</dd> <dt><strong><strong>rfc931</strong></strong></dt> <dd>The client remote username (<code><a href="http://www.ietf.org/rfc/rfc931.txt">RFC 931</a></code>).</dd> <dt><strong><strong>authuser</strong></strong></dt> <dd>The username used for authentication.</dd> <dt><strong><strong>[date]</strong></strong></dt> <dd>Date and time of the request (<code><a href="http://www.ietf.org/rfc/rfc1123.txt">RFC 1123</a></code>).</dd> <dt><strong><strong>"request"</strong></strong></dt> <dd>The request line exactly as it came from the client (<code><a href="http://www.ietf.org/rfc/rfc1945.txt">RFC 1945</a></code>).</dd> <dt><strong><strong>status</strong></strong></dt> <dd>The HTTP status code returned to the client (<code><a href="http://www.ietf.org/rfc/rfc1945.txt">RFC 1945</a></code>).</dd> <dt><strong><strong>bytes</strong></strong></dt> <dd>The content-length of the document transferred. </dd> </dl> <p>Internal server errors are recorded in the error log file. The format of this file is a more unplanned format than the logs using Common Logfile Format, but conforms to the following syntax: </p> <p><strong>[date]</strong> access to <strong>path</strong> failed for <strong>remotehost</strong>, reason: <strong>reason</strong></p> <h2><span onmouseover="document.getElementById('ghlink-erlang-web-server-api-id64575').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-erlang-web-server-api-id64575').style.visibility = 'hidden';" id="erlang-web-server-api">4.6 Erlang Web Server API</span></h2> <p>The process of handling an HTTP request involves several steps, such as:</p> <ul> <li>Setting up connections, sending and receiving data.</li> <li>URI to filename translation.</li> <li>Authentication/access checks.</li> <li>Retrieving/generating the response.</li> <li>Logging.</li> </ul> <p>To provide customization and extensibility of the request handling of the HTTP servers, most of these steps are handled by one or more modules. These modules can be replaced or removed at runtime and new ones can be added. For each request, all modules are traversed in the order specified by the module directive in the server configuration file. Some parts, mainly the communication- related steps, are considered server core functionality and are not implemented using the Erlang web server API. A description of functionality implemented by the Erlang webserver API is described in <code><a href="#Inets_Web_Server_Modules">Section Inets Web Server Modules</a></code>.</p> <p>A module can use data generated by previous modules in the Erlang webserver API module sequence or generate data to be used by consecutive Erlang Web Server API modules. This is possible owing to an internal list of key-value tuples, referred to as interaction data.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Interaction data enforces module dependencies and is to be avoided if possible. This means that the order of modules in the modules property is significant.</p> </div> </div> <h4><span onmouseover="document.getElementById('ghlink-api-description-id64842').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-api-description-id64842').style.visibility = 'hidden';" id="api-description">API Description</span></h4> <p>Each module that implements server functionality using the Erlang web server API is to implement the following call back functions:</p> <ul> <li> <code class="code">do/1</code> (mandatory) - the function called when a request is to be handled</li> <li><code class="code">load/2</code></li> <li><code class="code">store/2</code></li> <li><code class="code">remove/1</code></li> </ul> <p>The latter functions are needed only when new config directives are to be introduced. For details, see <code><a href="httpd">httpd(3)</a></code>.</p> <h2><span onmouseover="document.getElementById('ghlink-inets-web-server-modules-id64896').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-inets-web-server-modules-id64896').style.visibility = 'hidden';" id="inets-web-server-modules">4.7 Inets Web Server Modules</span></h2>  <p id="Inets_Web_Server_Modules">The convention is that all modules implementing some web server functionality has the name <code class="code">mod_*</code>. When configuring the web server, an appropriate selection of these modules is to be present in the module directive. Notice that there are some interaction dependencies to take into account, so the order of the modules cannot be random.</p> <h4><span onmouseover="document.getElementById('ghlink-mod_action---filetype-method-based-script-execution-id64920').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_action---filetype-method-based-script-execution-id64920').style.visibility = 'hidden';" id="mod_action---filetype-method-based-script-execution">mod_action - Filetype/Method-Based Script Execution</span></h4> <p>This module runs CGI scripts whenever a file of a certain type or HTTP method (see <code><a href="http://tools.ietf.org/html/rfc1945">RFC 1945</a></code>) is requested. </p> <p>Uses the following Erlang Web Server API interaction data: </p> <ul> <li> <code class="code">real_name</code> - from <code><a href="mod_alias">mod_alias</a></code>.</li> </ul> <p>Exports the following Erlang Web Server API interaction data, if possible: </p> <dl> <dt><strong><code class="code">{new_request_uri, RequestURI}</code></strong></dt> <dd>An alternative <code class="code">RequestURI</code> has been generated.</dd> </dl> <h4><span onmouseover="document.getElementById('ghlink-mod_alias---url-aliasing-id64983').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_alias---url-aliasing-id64983').style.visibility = 'hidden';" id="mod_alias---url-aliasing">mod_alias - URL Aliasing</span></h4> <p>The <code><a href="mod_alias">mod_alias</a></code> module makes it possible to map different parts of the host file system into the document tree, that is, creates aliases and redirections.</p> <p>Exports the following Erlang Web Server API interaction data, if possible: </p> <dl> <dt><strong><code class="code">{real_name, PathData}</code></strong></dt> <dd> <code class="code">PathData</code> is the argument used for API function <code><a href="mod_alias#path-3">mod_alias:path/3</a></code>.</dd> </dl> <h4><span onmouseover="document.getElementById('ghlink-mod_auth---user-authentication-id62784').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_auth---user-authentication-id62784').style.visibility = 'hidden';" id="mod_auth---user-authentication">mod_auth - User Authentication</span></h4> <p>The <code><a href="mod_auth">mod_auth(3)</a></code> module provides for basic user authentication using textual files, Dets databases as well as Mnesia databases.</p> <p>Uses the following Erlang Web Server API interaction data: </p> <ul> <li> <code class="code">real_name</code> - from <code><a href="mod_alias">mod_alias</a></code> </li> </ul> <p>Exports the following Erlang Web Server API interaction data: </p> <dl> <dt><strong><code class="code">{remote_user, User}</code></strong></dt> <dd>The username used for authentication.</dd> </dl> <h5>Mnesia As Authentication Database</h5> <p>If Mnesia is used as storage method, Mnesia must be started before the HTTP server. The first time Mnesia is started, the schema and the tables must be created before Mnesia is started. A simple example of a module with two functions that creates and start Mnesia is provided here. Function <code class="code">first_start/0</code> is to be used the first time. It creates the schema and the tables. <code class="code">start/0</code> is to be used in consecutive startups. <code class="code">start/0</code> starts Mnesia and waits for the tables to be initiated. This function must only be used when the schema and the tables are already created.</p> <pre data-language="erlang">-module(mnesia_test).
-export([start/0,load_data/0]).
-include_lib("mod_auth.hrl").

first_start() -&gt;
    mnesia:create_schema([node()]),
    mnesia:start(),
    mnesia:create_table(httpd_user,
                        [{type, bag},
                         {disc_copies, [node()]},
                         {attributes, record_info(fields, 
                                                  httpd_user)}]),
    mnesia:create_table(httpd_group,
                        [{type, bag},
                         {disc_copies, [node()]},          
                         {attributes, record_info(fields, 
                                                  httpd_group)}]),
    mnesia:wait_for_tables([httpd_user, httpd_group], 60000).

start() -&gt;
    mnesia:start(),
    mnesia:wait_for_tables([httpd_user, httpd_group], 60000).  </pre> <p>To create the Mnesia tables, we use two records defined in <code class="code">mod_auth.hrl</code>, so that file must be included. <code class="code">first_start/0</code> creates a schema that specifies on which nodes the database is to reside. Then it starts Mnesia and creates the tables. The first argument is the name of the tables, the second argument is a list of options of how to create the table, see <code><span class="code">mnesia(3)</span></code>, documentation for more information. As the implementation of the <code class="code">mod_auth_mnesia</code> saves one row for each user, the type must be <code class="code">bag</code>. When the schema and the tables are created, function <code>mnesia:start/0</code> is used to start Mnesia and waits for the tables to be loaded. Mnesia uses the directory specified as <code class="code">mnesia_dir</code> at startup if specified, otherwise Mnesia uses the current directory. For security reasons, ensure that the Mnesia tables are stored outside the document tree of the HTTP server. If they are placed in the directory which it protects, clients can download the tables. Only the Dets and Mnesia storage methods allow writing of dynamic user data to disk. <code class="code">plain</code> is a read only method.</p> <h4><span onmouseover="document.getElementById('ghlink-mod_cgi---cgi-scripts-id62931').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_cgi---cgi-scripts-id62931').style.visibility = 'hidden';" id="mod_cgi---cgi-scripts">mod_cgi - CGI Scripts</span></h4> <p>This module handles invoking of CGI scripts.</p> <h4><span onmouseover="document.getElementById('ghlink-mod_dir---directories-id62945').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_dir---directories-id62945').style.visibility = 'hidden';" id="mod_dir---directories">mod_dir - Directories</span></h4> <p>This module generates an HTML directory listing (Apache-style) if a client sends a request for a directory instead of a file. This module must be removed from the Modules config directive if directory listings is unwanted.</p> <p>Uses the following Erlang Web Server API interaction data: </p> <ul> <li> <code class="code">real_name</code> - from <code><a href="mod_alias">mod_alias</a></code> </li> </ul> <p>Exports the following Erlang Web Server API interaction data: </p> <dl> <dt><strong><code class="code">{mime_type, MimeType}</code></strong></dt> <dd>The file suffix of the incoming URL mapped into a <code class="code">MimeType</code>.</dd> </dl> <h4><span onmouseover="document.getElementById('ghlink-mod_disk_log---logging-using-disk_log.-id64072').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_disk_log---logging-using-disk_log.-id64072').style.visibility = 'hidden';" id="mod_disk_log---logging-using-disk_log.">mod_disk_log - Logging Using Disk_Log.</span></h4> <p>Standard logging using the "Common Logfile Format" and <code>disk_log(3)</code>.</p> <p>Uses the following Erlang Web Server API interaction data: </p> <ul> <li> <code class="code">remote_user</code> - from <code class="code">mod_auth</code> </li> </ul> <h4><span onmouseover="document.getElementById('ghlink-mod_esi---erlang-server-interface-id64110').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_esi---erlang-server-interface-id64110').style.visibility = 'hidden';" id="mod_esi---erlang-server-interface">mod_esi - Erlang Server Interface</span></h4> <p>The <code><a href="mod_esi">mod_esi(3)</a></code> module implements the Erlang Server Interface (ESI) providing a tight and efficient interface to the execution of Erlang functions.</p> <p>Uses the following Erlang web server API interaction data: </p> <ul> <li> <code class="code">remote_user</code> - from <code class="code">mod_auth</code> </li> </ul> <p>Exports the following Erlang web server API interaction data: </p> <dl> <dt><strong><code class="code">{mime_type, MimeType}</code></strong></dt> <dd>The file suffix of the incoming URL mapped into a <code class="code">MimeType</code> </dd> </dl> <h4><span onmouseover="document.getElementById('ghlink-mod_get---regular-get-requests-id64169').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_get---regular-get-requests-id64169').style.visibility = 'hidden';" id="mod_get---regular-get-requests">mod_get - Regular GET Requests</span></h4> <p>This module is responsible for handling GET requests to regular files. GET requests for parts of files is handled by <code class="code">mod_range</code>.</p> <p>Uses the following Erlang web server API interaction data: </p> <ul> <li> <code class="code">real_name</code> - from <code><a href="mod_alias">mod_alias</a></code> </li> </ul> <h4><span onmouseover="document.getElementById('ghlink-mod_head---regular-head-requests-id64209').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_head---regular-head-requests-id64209').style.visibility = 'hidden';" id="mod_head---regular-head-requests">mod_head - Regular HEAD Requests</span></h4> <p>This module is responsible for handling HEAD requests to regular files. HEAD requests for dynamic content is handled by each module responsible for dynamic content.</p> <p>Uses the following Erlang Web Server API interaction data: </p> <ul> <li> <code class="code">real_name</code> - from <code><a href="mod_alias">mod_alias</a></code> </li> </ul> <h4><span onmouseover="document.getElementById('ghlink-mod_htaccess---user-configurable-access-id64245').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_htaccess---user-configurable-access-id64245').style.visibility = 'hidden';" id="mod_htaccess---user-configurable-access">mod_htaccess - User Configurable Access</span></h4> <p>This module provides per-directory user configurable access control.</p> <p>Uses the following Erlang Web Server API interaction data: </p> <ul> <li> <code class="code">real_name</code> - from <code><a href="mod_alias">mod_alias</a></code> </li> </ul> <p>Exports the following Erlang Web Server API interaction data: </p> <dl> <dt><strong><code class="code">{remote_user_name, User}</code></strong></dt> <dd>The username used for authentication.</dd> </dl> <h4><span onmouseover="document.getElementById('ghlink-mod_log---logging-using-text-files.-id65044').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_log---logging-using-text-files.-id65044').style.visibility = 'hidden';" id="mod_log---logging-using-text-files.">mod_log - Logging Using Text Files.</span></h4> <p>Standard logging using the "Common Logfile Format" and text files.</p> <p>Uses the following Erlang Web Server API interaction data: </p> <ul> <li> <code class="code">remote_user</code> - from <code class="code">mod_auth</code> </li> </ul> <h4><span onmouseover="document.getElementById('ghlink-mod_range---requests-with-range-headers-id65077').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_range---requests-with-range-headers-id65077').style.visibility = 'hidden';" id="mod_range---requests-with-range-headers">mod_range - Requests with Range Headers</span></h4> <p>This module responses to requests for one or many ranges of a file. This is especially useful when downloading large files, as a broken download can be resumed.</p> <p>Notice that request for multiple parts of a document report a size of zero to the log file.</p> <p>Uses the following Erlang Web Server API interaction data: </p> <ul> <li> <code class="code">real_name</code> - from <code><a href="mod_alias">mod_alias</a></code> </li> </ul> <h4><span onmouseover="document.getElementById('ghlink-mod_response_control---requests-with-if*-headers-id65117').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_response_control---requests-with-if*-headers-id65117').style.visibility = 'hidden';" id="mod_response_control---requests-with-if*-headers">mod_response_control - Requests with If* Headers</span></h4> <p>This module controls that the conditions in the requests are fulfilled. For example, a request can specify that the answer only is of interest if the content is unchanged since the last retrieval. If the content is changed, the range request is to be converted to a request for the whole file instead.</p> <p>If a client sends more than one of the header fields that restricts the servers right to respond, the standard does not specify how this is to be handled. <code><a href="httpd">httpd(3)</a></code> controls each field in the following order and if one of the fields does not match the current state, the request is rejected with a proper response:</p> <p><code class="code">If-modified</code></p> <p><code class="code">If-Unmodified</code></p> <p><code class="code">If-Match</code></p> <p><code class="code">If-Nomatch</code></p> <p>Uses the following Erlang Web Server API interaction data: </p> <ul> <li> <code class="code">real_name</code> - from <code><a href="mod_alias">mod_alias</a></code> </li> </ul> <p>Exports the following Erlang Web Server API interaction data: </p> <dl> <dt><strong><code class="code">{if_range, send_file}</code></strong></dt> <dd>The conditions for the range request are not fulfilled. The response must not be treated as a range request, instead it must be treated as an ordinary get request.</dd> </dl> <h4><span onmouseover="document.getElementById('ghlink-mod_security---security-filter-id65203').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_security---security-filter-id65203').style.visibility = 'hidden';" id="mod_security---security-filter">mod_security - Security Filter</span></h4> <p>The <code><a href="mod_security">mod_security</a></code> module serves as a filter for authenticated requests handled in <code><a href="mod_auth">mod_auth(3)</a></code>. It provides a possibility to restrict users from access for a specified amount of time if they fail to authenticate several times. It logs failed authentication as well as blocking of users, and it calls a configurable callback module when the events occur.</p> <p>There is also an API to block or unblock users manually. This API can also list blocked users or users who have been authenticated within a configurable amount of time.</p> <h4><span onmouseover="document.getElementById('ghlink-mod_trace---trace-request-id65237').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-mod_trace---trace-request-id65237').style.visibility = 'hidden';" id="mod_trace---trace-request">mod_trace - TRACE Request</span></h4> <p><code class="code">mod_trace</code> is responsible for handling of TRACE requests. Trace is a new request method in HTTP/1.1. The intended use of trace requests is for testing. The body of the trace response is the request message that the responding web server or proxy received.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2017 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
