
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>11. Definition of Instrumentation Functions - Erlang 21 - W3cubDocs</title>
  
  <meta name="description" content=" The section Definition of Instrumentation Functions describes the user defined functions, which the agent calls at different times. ">
  <meta name="keywords" content="definition, instrumentation, functions, erlang, erlang~21">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/erlang~21/lib/snmp-5.2.11/doc/html/snmp_def_instr_functions.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/erlang~21.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/erlang~21/" class="_nav-link" title="" style="margin-left:0;">Erlang 21</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _erlang">
				
				
<h1>11 Definition of Instrumentation Functions</h1> <p>The section <strong>Definition of Instrumentation Functions</strong> describes the user defined functions, which the agent calls at different times. </p> <h2><span onmouseover="document.getElementById('ghlink-variable-instrumentation-id87964').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-variable-instrumentation-id87964').style.visibility = 'hidden';" id="variable-instrumentation">11.1 Variable Instrumentation</span></h2> <p>For scalar variables, a function <code class="code">f(Operation, ...)</code> must be defined. </p> <p>The <code class="code">Operation</code> can be <code class="code">new</code>, <code class="code">delete</code>, <code class="code">get</code>, <code class="code">is_set_ok</code>, <code class="code">set</code>, or <code class="code">undo</code>. </p> <p>In case of an error, all instrumentation functions may return either an SNMPv1 or an SNMPv2 error code. If it returns an SNMPv2 code, it is converted into an SNMPv1 code before it is sent to a SNMPv1 manager. It is recommended to use the SNMPv2 error codes for all instrumentation functions, as these provide more details. See <code><a href="snmp_app_a">Appendix A</a></code> for a description of error code conversions. </p> <h4><span onmouseover="document.getElementById('ghlink-f-new-[,-extraargs]--id88023').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-new-[,-extraargs]--id88023').style.visibility = 'hidden';" id="f-new-%5B,-extraargs%5D-">f(new [, ExtraArgs])</span></h4> <p>The function <code class="code">f(new [, ExtraArgs])</code> is called for each variable in the MIB when the MIB is loaded into the agent. This makes it possible to perform necessary initialization. </p> <p>This function is optional. The return value is discarded.</p> <h4><span onmouseover="document.getElementById('ghlink-f-delete-[,-extraargs]--id88046').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-delete-[,-extraargs]--id88046').style.visibility = 'hidden';" id="f-delete-%5B,-extraargs%5D-">f(delete [, ExtraArgs])</span></h4> <p>The function <code class="code">f(delete [, ExtraArgs])</code> is called for each object in an MIB when the MIB is unloaded from the agent. This makes it possible to perform necessary clean-up. </p> <p>This function is optional. The return value is discarded.</p> <h4><span onmouseover="document.getElementById('ghlink-f-get-[,-extraargs]--id88069').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-get-[,-extraargs]--id88069').style.visibility = 'hidden';" id="f-get-%5B,-extraargs%5D-">f(get [, ExtraArgs])</span></h4> <p>The function <code class="code">f(get [, ExtraArgs])</code> is called when a get-request or a get-next request refers to the variable. </p> <p>This function is mandatory. </p> <h5>Valid Return Values</h5> <ul> <li> <code class="code">{value, Value}</code>. The <code class="code">Value</code> must be of correct type, length and within ranges, otherwise <code class="code">genErr</code> is returned in the response PDU. If the object is an enumerated integer, the symbolic enum value may be used as an atom. If the object is of type BITS, the return value shall be an integer or a list of bits that are set. </li> <li> <code class="code">{noValue, noSuchName}</code>(SNMPv1) </li> <li> <code class="code">{noValue, noSuchObject | noSuchInstance}</code>(SNMPv2) </li> <li> <code class="code">genErr</code>. Used if an error occurred. Note, this should be an internal processing error, e.g. a caused by a programing fault somewhere. If the variable does not exist, use <code class="code">{noValue, noSuchName}</code> or <code class="code">{noValue, noSuchInstance}</code>. </li> </ul> <h4><span onmouseover="document.getElementById('ghlink-f-is_set_ok,-newvalue-[,-extraargs]--id88151').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-is_set_ok,-newvalue-[,-extraargs]--id88151').style.visibility = 'hidden';" id="f-is_set_ok,-newvalue-%5B,-extraargs%5D-">f(is_set_ok, NewValue [, ExtraArgs])</span></h4> <p>The function <code class="code">f(is_set_ok, NewValue [, ExtraArgs])</code> is called in phase one of the set-request processing so that the new value can be checked for inconsistencies. </p> <p><code class="code">NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. </p> <p>This function is optional. </p> <p>If this function is called, it will be called again, either with <code class="code">undo</code> or with <code class="code">set</code> as first argument. </p> <h5>Valid return values</h5> <ul> <li><code class="code">noError</code></li> <li> <code class="code">badValue | noSuchName | genErr</code>(SNMPv1) </li> <li> <code class="code">noAccess | noCreation | inconsistentValue | resourceUnavailable | inconsistentName | genErr</code>(SNMPv2)</li> </ul> <h4><span onmouseover="document.getElementById('ghlink-f-undo,-newvalue-[,-extraargs]--id88227').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-undo,-newvalue-[,-extraargs]--id88227').style.visibility = 'hidden';" id="f-undo,-newvalue-%5B,-extraargs%5D-">f(undo, NewValue [, ExtraArgs])</span></h4> <p>If an error occurred, this function is called after the <code class="code">is_set_ok</code> function is called. If <code class="code">set</code> is called for this object, <code class="code">undo</code> is not called. </p> <p><code class="code">NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. </p> <p>This function is optional. </p> <h5>Valid return values</h5> <ul> <li><code class="code">noError</code></li> <li> <code class="code">genErr</code>(SNMPv1) </li> <li> <code class="code">undoFailed | genErr</code>(SNMPv2)</li> </ul> <h4><span onmouseover="document.getElementById('ghlink-f-set,-newvalue-[,-extraargs]--id88298').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-set,-newvalue-[,-extraargs]--id88298').style.visibility = 'hidden';" id="f-set,-newvalue-%5B,-extraargs%5D-">f(set, NewValue [, ExtraArgs])</span></h4> <p>This function is called to perform the set in phase two of the set-request processing. It is only called if the corresponding <code class="code">is_set_ok</code> function is present and returns <code class="code">noError</code>. </p> <p><code class="code">NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. </p> <p>This function is mandatory. </p> <h5>Valid return values</h5> <ul> <li><code class="code">noError</code></li> <li> <code class="code">genErr</code>(SNMPv1) </li> <li> <code class="code">commitFailed | undoFailed | genErr</code>(SNMPv2)</li> </ul> <h2><span onmouseover="document.getElementById('ghlink-table-instrumentation-id88367').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-table-instrumentation-id88367').style.visibility = 'hidden';" id="table-instrumentation">11.2 Table Instrumentation</span></h2> <p>For tables, a <code class="code">f(Operation, ...)</code> function should be defined (the function shown is exemplified with <code class="code">f</code>). </p> <p>The <code class="code">Operation</code> can be <code class="code">new</code>, <code class="code">delete</code>, <code class="code">get</code>, <code class="code">next</code>, <code class="code">is_set_ok</code>, <code class="code">undo</code> or <code class="code">set</code>. </p> <p>In case of an error, all instrumentation functions may return either an SNMPv1 or an SNMPv2 error code. If it returns an SNMPv2 code, it is converted into an SNMPv1 code before it is sent to a SNMPv1 manager. It is recommended to use the SNMPv2 error codes for all instrumentation functions, as these provide more details. See <code><a href="snmp_app_a">Appendix A</a></code> for a description of error code conversions.</p> <h4><span onmouseover="document.getElementById('ghlink-f-new-[,-extraargs]--id88434').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-new-[,-extraargs]--id88434').style.visibility = 'hidden';" id="f-new-%5B,-extraargs%5D-">f(new [, ExtraArgs])</span></h4> <p>The function <code class="code">f(new [, ExtraArgs])</code> is called for each object in an MIB when the MIB is loaded into the agent. This makes it possible to perform the necessary initialization. </p> <p>This function is optional. The return value is discarded.</p> <h4><span onmouseover="document.getElementById('ghlink-f-delete-[,-extraargs]--id88457').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-delete-[,-extraargs]--id88457').style.visibility = 'hidden';" id="f-delete-%5B,-extraargs%5D-">f(delete [, ExtraArgs])</span></h4> <p>The function <code class="code">f(delete [, ExtraArgs])</code> is called for each object in an MIB when the MIB is unloaded from the agent. This makes it possible to perform any necessary clean-up. </p> <p>This function is optional. The return value is discarded.</p> <h4><span onmouseover="document.getElementById('ghlink-f-get,-rowindex,-cols-[,-extraargs]--id88480').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-get,-rowindex,-cols-[,-extraargs]--id88480').style.visibility = 'hidden';" id="f-get,-rowindex,-cols-%5B,-extraargs%5D-">f(get, RowIndex, Cols [, ExtraArgs])</span></h4> <p>The function <code class="code">f(get, RowIndex, Cols [, ExtraArgs])</code> is called when a get-request refers to a table. </p> <p>This function is mandatory. </p> <h5>Arguments</h5> <ul> <li> <code class="code">RowIndex</code> is a list of integers which define the key values for the row. The <code class="code">RowIndex</code> is the list representation (list of integers) which follow the <code class="code">Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code class="code">Cols</code> is a list of integers which represent the column numbers. The <code class="code">Cols</code> are sorted by increasing value and are guaranteed to be valid column numbers.</li> </ul> <h5>Valid Return Values</h5> <ul> <li> <p>A list with as many elements as the <code class="code">Cols</code> list, where each element is the value of the corresponding column. Each element can be:</p> <ul> <li> <code class="code">{value, Value}</code>. The <code class="code">Value</code> must be of correct type, length and within ranges, otherwise <code class="code">genErr</code> is returned in the response PDU. If the object is an enumerated integer, the symbolic enum value may be used (as an atom). If the object is of type BITS, the return value shall be an integer or a list of bits that are set. </li> <li> <code class="code">{noValue, noSuchName}</code>(SNMPv1) </li> <li> <code class="code">{noValue, noSuchObject | noSuchInstance}</code>(SNMPv2) </li> </ul> </li> <li> <code class="code">{noValue, Error}</code>. If the row does not exist, because all columns have <code class="code">{noValue, Error}</code>), the single tuple <code class="code">{noValue, Error}</code> can be returned. This is a shorthand for a list with all elements <code class="code">{noValue, Error}</code>. </li> <li> <code class="code">genErr</code>. Used if an error occurred. Note that this should be an internal processing error, e.g. a caused by a programing fault somewhere. If some column does not exist, use <code class="code">{noValue, noSuchName}</code> or <code class="code">{noValue, noSuchInstance}</code>. </li> </ul> <h4><span onmouseover="document.getElementById('ghlink-f-get_next,-rowindex,-cols-[,-extraargs]--id88641').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-get_next,-rowindex,-cols-[,-extraargs]--id88641').style.visibility = 'hidden';" id="f-get_next,-rowindex,-cols-%5B,-extraargs%5D-">f(get_next, RowIndex, Cols [, ExtraArgs])</span></h4> <p>The function <code class="code">f(get_next, RowIndex, Cols [, ExtraArgs])</code> is called when a get-next- or a get-bulk-request refers to the table. </p> <p>The <code class="code">RowIndex</code> argument may refer to an existing row or a non-existing row, or it may be unspecified. The <code class="code">Cols</code> list may refer to inaccessible columns or non-existing columns. For each column in the <code class="code">Cols</code> list, the corresponding next instance is determined, and the last part of its OBJECT IDENTIFIER and its value is returned. </p> <p>This function is mandatory. </p> <h5>Arguments</h5> <ul> <li> <code class="code">RowIndex</code> is a list of integers (possibly empty) that defines the key values for a row. The <code class="code">RowIndex</code> is the list representation (list of integers), which follow the <code class="code">Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code class="code">Cols</code> is a list of integers, greater than or equal to zero, which represents the column numbers.</li> </ul> <h5>Valid Return Values</h5> <ul> <li> <p>A list with as many elements as the <code class="code">Cols</code> list Each element can be:</p> <ul> <li> <code class="code">{NextOid, NextValue}</code>, where <code class="code">NextOid</code> is the lexicographic next OBJECT IDENTIFIER for the corresponding column. This should be specified as the OBJECT IDENTIFER part following the table entry. This means that the first integer is the column number and the rest is a specification of the keys. <code class="code">NextValue</code> is the value of this element. </li> <li> <code class="code">endOfTable</code> if there are no accessible elements after this one. </li> </ul> </li> <li> <code class="code">{genErr, Column}</code> where <code class="code">Column</code> denotes the column that caused the error. <code class="code">Column</code> must be one of the columns in the <code class="code">Cols</code> list. Note that this should be an internal processing error, e.g. a caused by a programing fault somewhere. If some column does not exist, you must return the next accessible element (or <code class="code">endOfTable</code>). </li> </ul> <h4><span onmouseover="document.getElementById('ghlink-f-is_set_ok,-rowindex,-cols-[,-extraargs]--id88800').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-is_set_ok,-rowindex,-cols-[,-extraargs]--id88800').style.visibility = 'hidden';" id="f-is_set_ok,-rowindex,-cols-%5B,-extraargs%5D-">f(is_set_ok, RowIndex, Cols [, ExtraArgs])</span></h4> <p>The function <code class="code">f(is_set_ok, RowIndex, Cols [, ExtraArgs])</code> is called in phase one of the set-request processing so that new values can be checked for inconsistencies. </p> <p>If the function is called, it will be called again with <code class="code">undo</code>, or with <code class="code">set</code> as first argument. </p> <p>This function is optional. </p> <h5>Arguments</h5> <ul> <li> <code class="code">RowIndex</code> is a list of integers which define the key values for the row. The <code class="code">RowIndex</code> is the list representation (list of integers) which follow the <code class="code">Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code class="code">Cols</code> is a list of <code class="code">{Column, NewValue}</code>, where <code class="code">Column</code> is an integer, and <code class="code">NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. The list is sorted by <code class="code">Column</code> (increasing) and each <code class="code">Column</code> is guaranteed to be a valid column number.</li> </ul> <h5>Valid Return Values</h5> <ul> <li><code class="code">{noError, 0}</code></li> <li> <code class="code">{Error, Column}</code>, where <code class="code">Error</code> is the same as for <code class="code">is_set_ok</code> for variables, and <code class="code">Column</code> denotes the faulty column. <code class="code">Column</code> must be one of the columns in the <code class="code">Cols</code> list.</li> </ul> <h4><span onmouseover="document.getElementById('ghlink-f-undo,-rowindex,-cols-[,-extraargs]--id88939').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-undo,-rowindex,-cols-[,-extraargs]--id88939').style.visibility = 'hidden';" id="f-undo,-rowindex,-cols-%5B,-extraargs%5D-">f(undo, RowIndex, Cols [, ExtraArgs])</span></h4> <p>If an error occurs, The function <code class="code">f(undo, RowIndex, Cols [, ExtraArgs])</code> is called after the <code class="code">is_set_ok</code> function. If <code class="code">set</code> is called for this object, <code class="code">undo</code> is not called. </p> <p>This function is optional. </p> <h5>Arguments</h5> <ul> <li> <code class="code">RowIndex</code> is a list of integers which define the key values for the row. The <code class="code">RowIndex</code> is the list representation (list of integers) which follow the <code class="code">Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code class="code">Cols</code> is a list of <code class="code">{Column, NewValue}</code>, where <code class="code">Column</code> is an integer, and <code class="code">NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. The list is sorted by <code class="code">Column</code> (increasing) and each <code class="code">Column</code> is guaranteed to be a valid column number. </li> </ul> <h5>Valid Return Values</h5> <ul> <li><code class="code">{noError, 0}</code></li> <li> <code class="code">{Error, Column}</code> where <code class="code">Error</code> is the same as for <code class="code">undo</code> for variables, and <code class="code">Column</code> denotes the faulty column. <code class="code">Column</code> must be one of the columns in the <code class="code">Cols</code> list. </li> </ul> <h4><span onmouseover="document.getElementById('ghlink-f-set,-rowindex,-cols-[,-extraargs]--id89078').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-f-set,-rowindex,-cols-[,-extraargs]--id89078').style.visibility = 'hidden';" id="f-set,-rowindex,-cols-%5B,-extraargs%5D-">f(set, RowIndex, Cols [, ExtraArgs])</span></h4> <p>The function <code class="code">f(set, RowIndex, Cols [, ExtraArgs])</code> is called to perform the set in phase two of the set-request processing. It is only called if the corresponding <code class="code">is_set_ok</code> function did not exist, or returned <code class="code">{noError, 0}</code>. </p> <p>This function is mandatory. </p> <h5>Arguments</h5> <ul> <li> <code class="code">RowIndex</code> is a list of integers that define the key values for the row. The <code class="code">RowIndex</code> is the list representation (list of integers) which follow the <code class="code">Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code class="code">Cols</code> is a list of <code class="code">{Column, NewValue}</code>, where <code class="code">Column</code> is an integer, and <code class="code">NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. The list is sorted by <code class="code">Column</code> (increasing) and each <code class="code">Column</code> is guaranteed to be a valid column number. </li> </ul> <h5>Valid Return Values</h5> <ul> <li><code class="code">{noError, 0}</code></li> <li> <code class="code">{Error, Column}</code> where <code class="code">Error</code> is the same as <code class="code">set</code> for variables, and <code class="code">Column</code> denotes the faulty column. <code class="code">Column</code> must be one of the columns in the <code class="code">Cols</code> list.</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2017 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
