
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Erl_marshal - Erlang 21 - W3cubDocs</title>
  
  <meta name="description" content=" erl_marshal ">
  <meta name="keywords" content="erl, marshal, erlang, erlang~21">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/erlang~21/lib/erl_interface-3.10.3/doc/html/erl_marshal.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/erlang~21.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/erlang~21/" class="_nav-link" title="" style="margin-left:0;">Erlang 21</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _erlang">
				
				
<h1>erl_marshal</h1> <h2><span onmouseover="document.getElementById('ghlink-c-library-id92886').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-c-library-id92886').style.visibility = 'hidden';" id="c-library">C Library</span></h2> <p class="REFBODY c-library-body">erl_marshal</p> <h2><span onmouseover="document.getElementById('ghlink-library-summary-id92890').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-library-summary-id92890').style.visibility = 'hidden';" id="library-summary">Library Summary</span></h2> <p class="REFBODY library-summary-body">Encoding and decoding of Erlang terms.</p> <h2><span onmouseover="document.getElementById('ghlink-description-id92894').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-id92894').style.visibility = 'hidden';" id="description">Description</span></h2> 
<p>This module contains functions for encoding Erlang terms into a sequence of bytes, and for decoding Erlang terms from a sequence of bytes.</p>  <h2><span onmouseover="document.getElementById('ghlink-exports-id92905').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-id92905').style.visibility = 'hidden';" id="exports">Exports</span></h2> <div class="exports-body"> <h3><code>int erl_compare_ext(bufp1, bufp2)</code></h3>  <h2 class="func-types-title">Types</h2>   
<p>Compares two encoded terms.</p> <ul> <li> <code class="code">bufp1</code> is a buffer containing an encoded Erlang term term1.</li> <li> <code class="code">bufp2</code> is a buffer containing an encoded Erlang term term2.</li> </ul> <p>Returns <code class="code">0</code> if the terms are equal, <code class="code">-1</code> if <code class="code">term1</code> &lt; <code class="code">term2</code>, or <code class="code">1</code> if <code class="code">term2</code> &lt; <code class="code">term1</code>.</p>  <h3>
<code>ETERM *erl_decode(bufp)</code><code>ETERM *erl_decode_buf(bufpp)</code>
</h3>  <h2 class="func-types-title">Types</h2>    
<p><code class="code">erl_decode()</code> and <code class="code">erl_decode_buf()</code> decode the contents of a buffer and return the corresponding Erlang term. <code class="code">erl_decode_buf()</code> provides a simple mechanism for dealing with several encoded terms stored consecutively in the buffer.</p> <ul> <li> <p><code class="code">bufp</code> is a pointer to a buffer containing one or more encoded Erlang terms.</p> </li> <li> <p><code class="code">bufpp</code> is the address of a buffer pointer. The buffer contains one or more consecutively encoded Erlang terms. Following a successful call to <code class="code">erl_decode_buf()</code>, <code class="code">bufpp</code> is updated so that it points to the next encoded term.</p> </li> </ul> <p><code class="code">erl_decode()</code> returns an Erlang term corresponding to the contents of <code class="code">bufp</code> on success, otherwise <code class="code">NULL</code>. <code class="code">erl_decode_buf()</code> returns an Erlang term corresponding to the first of the consecutive terms in <code class="code">bufpp</code> and moves <code class="code">bufpp</code> forward to point to the next term in the buffer. On failure, each of the functions return <code class="code">NULL</code>.</p>  <h3>
<code>int erl_encode(term, bufp)</code><code>int erl_encode_buf(term, bufpp)</code>
</h3>  <h2 class="func-types-title">Types</h2>     
<p><code class="code">erl_encode()</code> and <code class="code">erl_encode_buf()</code> encode Erlang terms into external format for storage or transmission. <code class="code">erl_encode_buf()</code> provides a simple mechanism for encoding several terms consecutively in the same buffer.</p> <ul> <li> <p><code class="code">term</code> is an Erlang term to be encoded.</p> </li> <li> <p><code class="code">bufp</code> is a pointer to a buffer containing one or more encoded Erlang terms.</p> </li> <li> <p><code class="code">bufpp</code> is a pointer to a pointer to a buffer containing one or more consecutively encoded Erlang terms. Following a successful call to <code class="code">erl_encode_buf()</code>, <code class="code">bufpp</code> is updated so that it points to the position for the next encoded term.</p> </li> </ul> <p>These functions return the number of bytes written to buffer on success, otherwise <code class="code">0</code>.</p> <p>Notice that no bounds checking is done on the buffer. It is the caller's responsibility to ensure that the buffer is large enough to hold the encoded terms. You can either use a static buffer that is large enough to hold the terms you expect to need in your program, or use <code class="code">erl_term_len()</code> to determine the exact requirements for a given term.</p> <p>The following can help you estimate the buffer requirements for a term. Notice that this information is implementation-specific, and can change in future versions. If you are unsure, use <code class="code">erl_term_len()</code>.</p> <p>Erlang terms are encoded with a 1 byte tag that identifies the type of object, a 2- or 4-byte length field, and then the data itself. Specifically:</p> <dl> <dt><strong><code class="code">Tuples</code></strong></dt> <dd>Need 5 bytes, plus the space for each element.</dd> <dt><strong><code class="code">Lists</code></strong></dt> <dd>Need 5 bytes, plus the space for each element, and 1 more byte for the empty list at the end.</dd> <dt><strong><code class="code">Strings and atoms</code></strong></dt> <dd>Need 3 bytes, plus 1 byte for each character (the terminating 0 is not encoded). Really long strings (more than 64k characters) are encoded as lists. Atoms cannot contain more than 256 characters.</dd> <dt><strong><code class="code">Integers</code></strong></dt> <dd>Need 5 bytes.</dd> <dt><strong><code class="code">Characters</code></strong></dt> <dd>(Integers &lt; 256) need 2 bytes.</dd> <dt><strong><code class="code">Floating point numbers</code></strong></dt> <dd>Need 32 bytes.</dd> <dt><strong><code class="code">Pids</code></strong></dt> <dd>Need 10 bytes, plus the space for the node name, which is an atom.</dd> <dt><strong><code class="code">Ports and Refs</code></strong></dt> <dd>Need 6 bytes, plus the space for the node name, which is an atom.</dd> </dl> <p>The total space required is the result calculated from the information above, plus 1 more byte for a version identifier.</p>  <h3><code>int erl_ext_size(bufp)</code></h3>  <h2 class="func-types-title">Types</h2>   
<p>Returns the number of elements in an encoded term.</p>  <h3><code>unsigned char erl_ext_type(bufp)</code></h3>  <h2 class="func-types-title">Types</h2>   
<p>Identifies and returns the type of Erlang term encoded in a buffer. It skips a trailing <strong>magic</strong> identifier.</p> <p>Returns <code class="code">0</code> if the type cannot be determined or one of:</p> <ul> <li> <code class="code">ERL_INTEGER</code> </li> <li> <code class="code">ERL_ATOM</code> </li> <li> <code class="code">ERL_PID</code> (Erlang process identifier) </li> <li> <code class="code">ERL_PORT</code> </li> <li> <code class="code">ERL_REF</code> (Erlang reference) </li> <li> <code class="code">ERL_EMPTY_LIST</code> </li> <li> <code class="code">ERL_LIST</code> </li> <li> <code class="code">ERL_TUPLE</code> </li> <li> <code class="code">ERL_FLOAT</code> </li> <li> <code class="code">ERL_BINARY</code> </li> <li> <code class="code">ERL_FUNCTION</code> </li> </ul>  <h3><code>unsigned char *erl_peek_ext(bufp, pos)</code></h3>  <h2 class="func-types-title">Types</h2>    
<p>This function is used for stepping over one or more encoded terms in a buffer, to directly access later term.</p> <ul> <li> <code class="code">bufp</code> is a pointer to a buffer containing one or more encoded Erlang terms.</li> <li> <code class="code">pos</code> indicates how many terms to step over in the buffer.</li> </ul> <p>Returns a pointer to a subterm that can be used in a later call to <code class="code">erl_decode()</code> to retrieve the term at that position. If there is no term, or <code class="code">pos</code> would exceed the size of the terms in the buffer, <code class="code">NULL</code> is returned.</p>  <h3><code>int erl_term_len(t)</code></h3>  <h2 class="func-types-title">Types</h2>   
<p>Determines the buffer space that would be needed by <code class="code">t</code> if it were encoded into Erlang external format by <code class="code">erl_encode()</code>.</p> <p>Returns the size in bytes.</p>  </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2017 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
