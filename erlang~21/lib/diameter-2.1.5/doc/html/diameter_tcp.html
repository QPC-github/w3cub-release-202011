
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Diameter_tcp - Erlang 21 - W3cubDocs</title>
  
  <meta name="description" content=" diameter_tcp ">
  <meta name="keywords" content="diameter, tcp, erlang, erlang~21">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/erlang~21/lib/diameter-2.1.5/doc/html/diameter_tcp.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/erlang~21.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/erlang~21/" class="_nav-link" title="" style="margin-left:0;">Erlang 21</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _erlang">
				
				
<h1>diameter_tcp</h1> <h2><span onmouseover="document.getElementById('ghlink-module-id91937').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-id91937').style.visibility = 'hidden';" id="module">Module</span></h2> <p class="REFBODY module-body">diameter_tcp</p> <h2><span onmouseover="document.getElementById('ghlink-module-summary-id91941').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-id91941').style.visibility = 'hidden';" id="module-summary">Module Summary</span></h2> <p class="REFBODY module-summary-body">Diameter transport over TCP.</p> <h2><span onmouseover="document.getElementById('ghlink-description-id91945').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-id91945').style.visibility = 'hidden';" id="description">Description</span></h2> 
<p> This module implements diameter transport over TCP using <code>gen_tcp(3)</code>. It can be specified as the value of a <code class="code">transport_module</code> option to <code><a href="diameter#add_transport-2">diameter:add_transport/2</a></code> and implements the behaviour documented in <code><a href="diameter_transport">diameter_transport(3)</a></code>. TLS security is supported, either as an upgrade following capabilities exchange or at connection establishment.</p> <p> Note that the ssl application is required for TLS and must be started before configuring TLS capability on diameter transports.</p>   <h2><span onmouseover="document.getElementById('ghlink-exports-id91991').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-id91991').style.visibility = 'hidden';" id="exports">Exports</span></h2> <div class="exports-body"> 
<div><span onmouseover="document.getElementById('ghlink-start-3-id91998').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-start-3-id91998').style.visibility = 'hidden';" id="start-3">start({Type, Ref}, Svc, [Opt]) -&gt; {ok, Pid} | {ok, Pid, [LAddr]} | {error, Reason}</span></div>  <h2 class="func-types-title">Types</h2>             
<p> The start function required by <code><a href="diameter_transport">diameter_transport(3)</a></code>.</p> <p> Options <code class="code">raddr</code> and <code class="code">rport</code> specify the remote address and port for a connecting transport and are not valid for a listening transport.</p> <p> Option <code class="code">accept</code> specifies remote addresses for a listening transport and is not valid for a connecting transport. If specified, a remote address that does not match one of the specified addresses causes the connection to be aborted. Multiple <code class="code">accept</code> options can be specified. A string-valued <code class="code">Match</code> that does not parse as an address is interpreted as a regular expression.</p> <p> Option <code class="code">ssl_options</code> must be specified for a transport that should support TLS: a value of <code class="code">true</code> results in a TLS handshake immediately upon connection establishment while <code class="code">list()</code> specifies options to be passed to <code>ssl:connect/2</code> or <code>ssl:ssl_accept/2</code> after capabilities exchange if TLS is negotiated.</p> <p> Option <code class="code">fragment_timer</code> specifies the timeout, in milliseconds, of a timer used to flush messages from the incoming byte stream even if the number of bytes indicated in the Message Length field of its Diameter Header have not yet been accumulated: such a message is received over the transport interface after two successive timeouts without the reception of additional bytes. Defaults to 1000.</p>  <p id="sender"> Option <code class="code">sender</code> specifies whether or not to use a dedicated process for sending outgoing messages, which avoids the possibility of send blocking reception. Defaults to <code class="code">false</code>. If set to <code class="code">true</code> then a <code class="code">message_cb</code> that avoids the possibility of messages being queued in the sender process without bound should be configured.</p> <p> Option <code class="code">message_cb</code> specifies a callback that is invoked on incoming and outgoing messages, that can be used to implement flow control. It is applied to two arguments: an atom indicating the reason for the callback (<code class="code">send</code>, <code class="code">recv</code>, or <code class="code">ack</code> after a completed send), and the message in question (binary() on <code class="code">recv</code>, binary() or diameter_packet record on <code class="code">send</code> or <code class="code">ack</code>, or <code class="code">false</code> on <code class="code">ack</code> when an incoming request has been discarded). It should return a list of actions and a new callback as tail; eg. <code class="code">[fun cb/3, State]</code>. Valid actions are the atoms <code class="code">send</code> or <code class="code">recv</code>, to cause a following message-valued action to be sent/received, a message to send/receive (binary() or diameter_packet record), or a boolean() to enable/disable reading on the socket. More than one <code class="code">send</code>/<code class="code">recv</code>/message sequence can be returned from the same callback, and an initial <code class="code">send</code>/<code class="code">recv</code> can be omitted if the same as the value passed as the callback's first argument. Reading is initially enabled, and returning <code class="code">false</code> does not imply there cannot be subsequent <code class="code">recv</code> callbacks since messages may already have been read. An empty tail is equivalent to the prevailing callback. Defaults to a callback equivalent to <code class="code">fun(ack, _) -&gt; []; (_, Msg) -&gt; [Msg] end</code>.</p> <p> Remaining options are any accepted by <code>ssl:connect/3</code> or <code>gen_tcp:connect/3</code> for a connecting transport, or <code>ssl:listen/2</code> or <code>gen_tcp:listen/2</code> for a listening transport, depending on whether or not <code class="code">{ssl_options, true}</code> has been specified. Options <code class="code">binary</code>, <code class="code">packet</code> and <code class="code">active</code> cannot be specified. Also, option <code class="code">port</code> can be specified for a listening transport to specify the local listening port, the default being the standardized 3868. Note that the option <code class="code">ip</code> specifies the local address.</p> <p> An <code class="code">ssl_options</code> list must be specified if and only if the transport in question has set <code class="code">Inband-Security-Id</code> to 1 (<code class="code">TLS</code>), as specified to either <code><a href="diameter#start_service-2">diameter:start_service/2</a></code> or <code><a href="diameter#add_transport-2">diameter:add_transport/2</a></code>, so that the transport process will receive notification of whether or not to commence with a TLS handshake following capabilities exchange. Failing to specify an options list on a TLS-capable transport for which TLS is negotiated will cause TLS handshake to fail. Failing to specify TLS capability when <code class="code">ssl_options</code> has been specified will cause the transport process to wait for a notification that will not be forthcoming, which will eventually cause the RFC 3539 watchdog to take down the connection.</p> <p> The first element of a non-empty <code class="code">Host-IP-Address</code> list in <code class="code">Svc</code> provides the local IP address if an <code class="code">ip</code> option is not specified. The local address is either returned from<code><a href="#start-3">start/3</a></code> or passed in a <code class="code">connected</code> message over the transport interface.</p>  </div> <h2>See also</h2>  <p> <code><a href="diameter">diameter(3)</a></code>, <code><a href="diameter_transport">diameter_transport(3)</a></code>, <code>gen_tcp(3)</code>, <code>inet(3)</code>, <code>ssl(3)</code></p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2017 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
