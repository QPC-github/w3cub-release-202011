
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>tf.keras.layers.LocallyConnected2D - TensorFlow 2.3 - W3cubDocs</title>
  
  <meta name="description" content=" Locally-connected layer for 2D inputs. ">
  <meta name="keywords" content="tf, keras, layers, locallyconnected, d, tensorflow, tensorflow~2.3">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tensorflow~2.3/keras/layers/locallyconnected2d.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/tensorflow~2.3.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~2.3/" class="_nav-link" title="" style="margin-left:0;">TensorFlow 2.3</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tensorflow">
				
				
<h1 class="devsite-page-title">tf.keras.layers.LocallyConnected2D</h1>      <table class="tfo-notebook-buttons tfo-api" align="left">  <td> <a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/v2.3.0/tensorflow/python/keras/layers/local.py#L338-L661">  View source on GitHub </a> </td> </table> <p>Locally-connected layer for 2D inputs.</p> <p>Inherits From: <a href="layer"><code translate="no" dir="ltr">Layer</code></a></p> <section class="expandable"> <h4 class="showalways" id="view-aliases" data-text="View aliases" tabindex="0">View aliases</h4> <p> <b>Compat aliases for migration</b> </p>
<p>See <a href="https://www.tensorflow.org/guide/migrate">Migration guide</a> for more details.</p> <p><a href="https://www.tensorflow.org/api_docs/python/tf/keras/layers/LocallyConnected2D"><code translate="no" dir="ltr">tf.compat.v1.keras.layers.LocallyConnected2D</code></a></p> </section> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.keras.layers.LocallyConnected2D(
    filters, kernel_size, strides=(1, 1), padding='valid', data_format=None,
    activation=None, use_bias=True, kernel_initializer='glorot_uniform',
    bias_initializer='zeros', kernel_regularizer=None, bias_regularizer=None,
    activity_regularizer=None, kernel_constraint=None, bias_constraint=None,
    implementation=1, **kwargs
)
</pre>  <p>The <code translate="no" dir="ltr">LocallyConnected2D</code> layer works similarly to the <code translate="no" dir="ltr">Conv2D</code> layer, except that weights are unshared, that is, a different set of filters is applied at each different patch of the input.</p> <blockquote class="note">
<strong>Note:</strong><span> layer attributes cannot be modified after the layer has been called once (except the <code translate="no" dir="ltr">trainable</code> attribute).</span>
</blockquote> <h4 id="examples" data-text="Examples:" tabindex="0">Examples:</h4> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python"># apply a 3x3 unshared weights convolution with 64 output filters on a
32x32 image
# with `data_format="channels_last"`:
model = Sequential()
model.add(LocallyConnected2D(64, (3, 3), input_shape=(32, 32, 3)))
# now model.output_shape == (None, 30, 30, 64)
# notice that this layer will consume (30*30)*(3*3*3*64) + (30*30)*64
parameters

# add a 3x3 unshared weights convolution on top, with 32 output filters:
model.add(LocallyConnected2D(32, (3, 3)))
# now model.output_shape == (None, 28, 28, 32)
</pre>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Arguments</th></tr> 
<tr> <td> <code translate="no" dir="ltr">filters</code> </td> <td> Integer, the dimensionality of the output space (i.e. the number of output filters in the convolution). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">kernel_size</code> </td> <td> An integer or tuple/list of 2 integers, specifying the width and height of the 2D convolution window. Can be a single integer to specify the same value for all spatial dimensions. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">strides</code> </td> <td> An integer or tuple/list of 2 integers, specifying the strides of the convolution along the width and height. Can be a single integer to specify the same value for all spatial dimensions. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">padding</code> </td> <td> Currently only support <code translate="no" dir="ltr">"valid"</code> (case-insensitive). <code translate="no" dir="ltr">"same"</code> will be supported in future. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">data_format</code> </td> <td> A string, one of <code translate="no" dir="ltr">channels_last</code> (default) or <code translate="no" dir="ltr">channels_first</code>. The ordering of the dimensions in the inputs. <code translate="no" dir="ltr">channels_last</code> corresponds to inputs with shape <code translate="no" dir="ltr">(batch, height, width, channels)</code> while <code translate="no" dir="ltr">channels_first</code> corresponds to inputs with shape <code translate="no" dir="ltr">(batch, channels, height, width)</code>. It defaults to the <code translate="no" dir="ltr">image_data_format</code> value found in your Keras config file at <code translate="no" dir="ltr">~/.keras/keras.json</code>. If you never set it, then it will be "channels_last". </td> </tr>
<tr> <td> <code translate="no" dir="ltr">activation</code> </td> <td> Activation function to use. If you don't specify anything, no activation is applied (ie. "linear" activation: <code translate="no" dir="ltr">a(x) = x</code>). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">use_bias</code> </td> <td> Boolean, whether the layer uses a bias vector. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">kernel_initializer</code> </td> <td> Initializer for the <code translate="no" dir="ltr">kernel</code> weights matrix. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">bias_initializer</code> </td> <td> Initializer for the bias vector. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">kernel_regularizer</code> </td> <td> Regularizer function applied to the <code translate="no" dir="ltr">kernel</code> weights matrix. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">bias_regularizer</code> </td> <td> Regularizer function applied to the bias vector. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">activity_regularizer</code> </td> <td> Regularizer function applied to the output of the layer (its "activation"). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">kernel_constraint</code> </td> <td> Constraint function applied to the kernel matrix. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">bias_constraint</code> </td> <td> Constraint function applied to the bias vector. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">implementation</code> </td> <td> implementation mode, either <code translate="no" dir="ltr">1</code>, <code translate="no" dir="ltr">2</code>, or <code translate="no" dir="ltr">3</code>. <code translate="no" dir="ltr">1</code> loops over input spatial locations to perform the forward pass. It is memory-efficient but performs a lot of (small) ops. <p><code translate="no" dir="ltr">2</code> stores layer weights in a dense but sparsely-populated 2D matrix and implements the forward pass as a single matrix-multiply. It uses a lot of RAM but performs few (large) ops.</p> <p><code translate="no" dir="ltr">3</code> stores layer weights in a sparse tensor and implements the forward pass as a single sparse matrix-multiply.</p> <p>How to choose:</p> <p><code translate="no" dir="ltr">1</code>: large, dense models, <code translate="no" dir="ltr">2</code>: small models, <code translate="no" dir="ltr">3</code>: large, sparse models,</p> <p>where "large" stands for large input/output activations (i.e. many <code translate="no" dir="ltr">filters</code>, <code translate="no" dir="ltr">input_filters</code>, large <code translate="no" dir="ltr">np.prod(input_size)</code>, <code translate="no" dir="ltr">np.prod(output_size)</code>), and "sparse" stands for few connections between inputs and outputs, i.e. small ratio `filters * input_filters * np.prod(kernel_size) / (np.prod(input_size)</p> <ul> <li>np.prod(strides))<code translate="no" dir="ltr">, where inputs to and outputs of the layer are assumed to have shapes</code>input_size + (input_filters,)<code translate="no" dir="ltr">,</code>output_size + (filters,)` respectively.</li> </ul> <p>It is recommended to benchmark each in the setting of interest to pick the most efficient one (in terms of speed and memory usage). Correct choice of implementation can lead to dramatic speed improvements (e.g. 50X), potentially at the expense of RAM.</p> <p>Also, only <code translate="no" dir="ltr">padding="valid"</code> is supported by <code translate="no" dir="ltr">implementation=1</code>. </p>
</td> </tr> </table> <h4 id="input_shape" data-text="Input shape:" tabindex="0">Input shape:</h4> <p>4D tensor with shape: <code translate="no" dir="ltr">(samples, channels, rows, cols)</code> if data_format='channels_first' or 4D tensor with shape: <code translate="no" dir="ltr">(samples, rows, cols, channels)</code> if data_format='channels_last'.</p> <h4 id="output_shape" data-text="Output shape:" tabindex="0">Output shape:</h4> <p>4D tensor with shape: <code translate="no" dir="ltr">(samples, filters, new_rows, new_cols)</code> if data_format='channels_first' or 4D tensor with shape: <code translate="no" dir="ltr">(samples, new_rows, new_cols, filters)</code> if data_format='channels_last'. <code translate="no" dir="ltr">rows</code> and <code translate="no" dir="ltr">cols</code> values might have changed due to padding.</p>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    © 2020 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r2.3/api_docs/python/tf/keras/layers/LocallyConnected2D" class="_attribution-link">https://www.tensorflow.org/versions/r2.3/api_docs/python/tf/keras/layers/LocallyConnected2D</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
