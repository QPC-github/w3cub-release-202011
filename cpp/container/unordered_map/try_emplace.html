
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Std&#58;&#58;unordered_map&#58;&#58;try_emplace - C++ - W3cubDocs</title>
  
  <meta name="description" content="If rehashing occurs due to the insertion, all iterators are invalidated. Otherwise iterators are not affected. References are not invalidated. &hellip;">
  <meta name="keywords" content="std, unordered, map, key, t, hash, keyequal, allocator, try, emplace, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/container/unordered_map/try_emplace.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _c">
				
				
<h1 id="firstHeading" class="firstHeading">std::unordered_map&lt;Key,T,Hash,KeyEqual,Allocator&gt;::try_emplace</h1>             <table class="t-dcl-begin"> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">template &lt;class... Args&gt;
pair&lt;iterator, bool&gt; try_emplace(const key_type&amp; k, Args&amp;&amp;... args);</pre>
</td> <td> (1) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">template &lt;class... Args&gt;
pair&lt;iterator, bool&gt; try_emplace(key_type&amp;&amp; k, Args&amp;&amp;... args);</pre>
</td> <td> (2) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">template &lt;class... Args&gt;
iterator try_emplace(const_iterator hint, const key_type&amp; k, Args&amp;&amp;... args);</pre>
</td> <td> (3) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">template &lt;class... Args&gt;
iterator try_emplace(const_iterator hint, key_type&amp;&amp; k, Args&amp;&amp;... args);</pre>
</td> <td> (4) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr>  </table> <div class="t-li1">
<span class="t-li">1)</span> If a key equivalent to <code>k</code> already exists in the container, does nothing. Otherwise, behaves like <a href="emplace" title="cpp/container/unordered map/emplace">emplace</a> except that the element is constructed as <code>value_type(std::piecewise_construct, std::forward_as_tuple(k), std::forward_as_tuple(std::forward&lt;Args&gt;(args)...))</code>
</div> <div class="t-li1">
<span class="t-li">2)</span> If a key equivalent to <code>k</code> already exists in the container, does nothing. Otherwise, behaves like <a href="emplace" title="cpp/container/unordered map/emplace">emplace</a> except that the element is constructed as <code>value_type(std::piecewise_construct, std::forward_as_tuple(std::move(k)), std::forward_as_tuple(std::forward&lt;Args&gt;(args)...))</code>
</div> <div class="t-li1">
<span class="t-li">3)</span> If a key equivalent to <code>k</code> already exists in the container, does nothing. Otherwise, behaves like <a href="emplace_hint" title="cpp/container/unordered map/emplace hint">emplace_hint</a> except that the element is constructed as <code>value_type(std::piecewise_construct, std::forward_as_tuple(k), std::forward_as_tuple(std::forward&lt;Args&gt;(args)...))</code>
</div> <div class="t-li1">
<span class="t-li">4)</span> If a key equivalent to <code>k</code> already exists in the container, does nothing. Otherwise, behaves like <a href="emplace_hint" title="cpp/container/unordered map/emplace hint">emplace_hint</a> except that the element is constructed as <code>value_type(std::piecewise_construct, std::forward_as_tuple(std::move(k)), std::forward_as_tuple(std::forward&lt;Args&gt;(args)...))</code>
</div> <p>If rehashing occurs due to the insertion, all iterators are invalidated. Otherwise iterators are not affected. References are not invalidated. Rehashing occurs only if the new number of elements is greater than <code>max_load_factor()*bucket_count()</code>.</p>
<h3 id="Parameters">Parameters</h3> <table class="t-par-begin"> <tr class="t-par"> <td> k </td> <td> - </td> <td> the key used both to look up and to insert if not found </td>
</tr> <tr class="t-par"> <td> hint </td> <td> - </td> <td> iterator to the position before which the new element will be inserted </td>
</tr> <tr class="t-par"> <td> args </td> <td> - </td> <td> arguments to forward to the constructor of the element </td>
</tr>
</table> <h3 id="Return_value">Return value</h3> <div class="t-li1">
<span class="t-li">1,2)</span> Same as for <a href="emplace" title="cpp/container/unordered map/emplace">emplace</a>
</div> <div class="t-li1">
<span class="t-li">3,4)</span> Same as for <a href="emplace_hint" title="cpp/container/unordered map/emplace hint">emplace_hint</a>
</div> <h3 id="Complexity">Complexity</h3> <div class="t-li1">
<span class="t-li">1,2)</span> Same as for <a href="emplace" title="cpp/container/unordered map/emplace">emplace</a>
</div> <div class="t-li1">
<span class="t-li">3,4)</span> Same as for <a href="emplace_hint" title="cpp/container/unordered map/emplace hint">emplace_hint</a>
</div> <h3 id="Notes">Notes</h3> <p>Unlike <a href="insert" title="cpp/container/unordered map/insert">insert</a> or <a href="emplace" title="cpp/container/unordered map/emplace">emplace</a>, these functions do not move from rvalue arguments if the insertion does not happen, which makes it easy to manipulate maps whose values are move-only types, such as <code>std::unordered_map&lt;std::string, std::unique_ptr&lt;foo&gt;&gt;</code>. In addition, <code>try_emplace</code> treats the key and the arguments to the <code>mapped_type</code> separately, unlike <a href="emplace" title="cpp/container/unordered map/emplace">emplace</a>, which requires the arguments to construct a <code>value_type</code> (that is, a <code>std::pair</code>).</p>
<h3 id="Example">Example</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
 
#include &lt;unordered_map&gt;
int main()
{
    using namespace std::literals;
    std::unordered_map&lt;std::string, std::string&gt; m;
 
    m.try_emplace("a", "a"s);
    m.try_emplace("b", "abcd");
    m.try_emplace("c", 10, 'c');
    m.try_emplace("c", "Won't be inserted");
 
    for (const auto &amp;p : m) {
        std::cout &lt;&lt; p.first &lt;&lt; " =&gt; " &lt;&lt; p.second &lt;&lt; '\n';
    }
}</pre></div> <p>Possible output:</p>
<div class="text source-text"><pre data-language="c">a =&gt; a
b =&gt; abcd
c =&gt; cccccccccc</pre></div> </div> <h3 id="See_also">See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="emplace" title="cpp/container/unordered map/emplace"> <span class="t-lines"><span>emplace</span></span></a></div> </td> <td> constructs element in-place <br> <span class="t-mark">(public member function)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="emplace_hint" title="cpp/container/unordered map/emplace hint"> <span class="t-lines"><span>emplace_hint</span></span></a></div> </td> <td> constructs elements in-place using a hint <br> <span class="t-mark">(public member function)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="insert" title="cpp/container/unordered map/insert"> <span class="t-lines"><span>insert</span></span></a></div> </td> <td> inserts elements <span class="t-rev-inl t-since-cxx17"><span>or nodes</span> <span><span class="t-mark-rev t-since-cxx17">(since C++17)</span></span></span> <br> <span class="t-mark">(public member function)</span> </td>
</tr> </table>          <div class="_attribution">
  <p class="_attribution-p">
    © cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="http://en.cppreference.com/w/cpp/container/unordered_map/try_emplace" class="_attribution-link">http://en.cppreference.com/w/cpp/container/unordered_map/try_emplace</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
