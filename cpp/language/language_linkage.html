
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Language Linkage - C++ - W3cubDocs</title>
  
  <meta name="description" content=" Provides for linkage between modules written in different programming languages. ">
  <meta name="keywords" content="language, linkage, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/language/language_linkage.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _c">
				
				
<h1 id="firstHeading" class="firstHeading">Language linkage</h1>            <p>Provides for linkage between modules written in different programming languages.</p>
<table class="t-sdsc-begin">  <tr class="t-sdsc"> <td> <code>extern</code> <span class="t-spar">string-literal</span> <code>{</code> <span class="t-spar">declaration-seq</span><span class="t-mark">(optional)</span> <code>} </code> </td> <td> (1) </td> <td class="t-sdsc-nopad"> </td>
</tr>  <tr class="t-sdsc"> <td> <code>extern</code> <span class="t-spar">string-literal</span> <span class="t-spar">declaration</span> </td> <td> (2) </td> <td class="t-sdsc-nopad"> </td>
</tr> 
</table> <div class="t-li1">
<span class="t-li">1)</span> Applies the language specification <span class="t-spar">string-literal</span> to all function types, function names with external linkage and variables with external linkage declared in <span class="t-spar">declaration-seq</span>.</div> <div class="t-li1">
<span class="t-li">2)</span> Applies the language specification <span class="t-spar">string-literal</span> to a single declaration or definition.</div> <table class="t-par-begin"> <tr class="t-par"> <td> <span class="t-spar">string-literal</span> </td> <td> - </td> <td> The name of the required language linkage </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">declaration-seq</span> </td> <td> - </td> <td> a sequence of declarations, which may include nested linkage specifications </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">declaration</span> </td> <td> - </td> <td> a declaration </td>
</tr>
</table> <h3 id="Explanation">Explanation</h3> <p>Every function type, every function name with <a href="storage_duration" title="cpp/language/storage duration">external linkage</a>, and every variable name with <a href="storage_duration" title="cpp/language/storage duration">external linkage</a>, has a property called <i>language linkage</i>. Language linkage encapsulates the set of requirements necessary to link with a module written in another programming language: <a href="https://en.wikipedia.org/wiki/Calling_convention" class="extiw" title="enwiki:Calling convention">calling convention</a>, <a href="https://en.wikipedia.org/wiki/Name_mangling" class="extiw" title="enwiki:Name mangling">name mangling</a> algorithm, etc.</p>
<p>Only two language linkages are guaranteed to be supported:</p>
<div class="t-li1">
<span class="t-li">1)</span> <code>"C++"</code>, the default language linkage.</div> <div class="t-li1">
<span class="t-li">2)</span> <code>"C"</code>, which makes it possible to link with functions written in the C programming language, and to define, in a C++ program, functions that can be called from the modules written in C.</div> <div class="cpp source-cpp"><pre data-language="cpp">extern "C" {
    int open(const char *pathname, int flags); // C function declaration
}
 
int main()
{
    int fd = open("test.txt", 0); // calls a C function from a C++ program
}
 
// This C++ function can be called from C code
extern "C" void handler(int) {
    std::cout &lt;&lt; "Callback invoked\n"; // It can use C++
}</pre></div> <p>Since language linkage is part of every function type, pointers to functions maintain language linkage as well. Language linkage of function types (which represents calling convention) and language linkage of function names (which represents name mangling) are independent of each other:</p>
<div class="cpp source-cpp"><pre data-language="cpp">extern "C" void f1(void(*pf)()); // declares a function f1 with C linkage,
                             // which returns void and takes a pointer to a C function
                             // which returns void and takes no parameters
extern "C" typedef void FUNC(); // declares FUNC as a C function type that returns void
                                // and takes no parameters
FUNC f2;            // the name f2 has C++ linkage, but its type is C function
extern "C" FUNC f3; // the name f3 has C linkage and its type is C function void()
void (*pf2)(FUNC*); // the name pf2 has C++ linkage, and its type is
                    // "pointer to a C++ function which returns void and takes one
                    // argument of type 'pointer to the C function which returns void
                    // and takes no parameters'"
extern "C" {
    static void f4();  // the name of the function f4 has internal linkage (no language)
                      // but the function's type has C language linkage
}</pre></div> <p>Two functions with the same name and the same parameter list in the same namespace cannot have two different language linkages (note, however, that linkage of a parameter may permit such overloading, as in the case of <code><a href="../algorithm/qsort" title="cpp/algorithm/qsort">std::qsort</a></code> and <code><a href="../algorithm/bsearch" title="cpp/algorithm/bsearch">std::bsearch</a></code>). Likewise, two variables in the same namespace cannot have two different language linkages.</p>
<h4 id="Special_rules_for_.22C.22_linkage">Special rules for "C" linkage</h4> <div class="t-li1">
<span class="t-li">1)</span> When class member declarations and member function type declarations appear in a <code>"C"</code> language block, their linkage remains <code>"C++"</code>.</div> <div class="t-li1">
<span class="t-li">2)</span> When two functions with the same unqualified name are declared in different namespaces, and both have <code>"C"</code> language linkage, the declarations refer to the same function.</div> <div class="t-li1">
<span class="t-li">3)</span> When two variables with <code>"C"</code> language linkage and the same name that appear in different namespaces, they refer to the same variable.</div> <div class="t-li1">
<span class="t-li">4)</span> A <code>"C"</code> variable and a <code>"C"</code> function cannot have the same name, regardless if they are defined in the same or different namespaces.</div> <h3 id="Notes">Notes</h3> <p>Language specifications can only appear in <a href="scope#Namespace_scope" title="cpp/language/scope">namespace scope</a>.</p>
<p>The braces of the language specification do not establish a scope.</p>
<p>When language specifications nest, the innermost specification is the one that is in effect.</p>
<p>A function can be re-declared without a linkage specification after it was declared with a language specification, the second declaration will reuse the first language linkage. The opposite is not true: if the first declaration has no language linkage, it is assumed <code>"C++"</code>, and redeclaring with another language is an error.</p>
<p>A declaration directly contained in a language linkage specification is treated as if it contains the <a href="storage_duration" title="cpp/language/storage duration">extern specifier</a> for the purpose of determining the <a href="storage_duration#Linkage" title="cpp/language/storage duration">linkage</a> of the declared name and whether it is a <a href="definition" title="cpp/language/definition">definition</a>.</p>
<div class="cpp source-cpp"><pre data-language="cpp">extern "C" int x; // a declaration and not a definition
// The above line is equivalent to extern "C" { extern int x; }
 
extern "C" { int x; } // a declaration and definition</pre></div> <p><code>extern "C"</code> makes it possible to include header files containing declarations of C library functions in a C++ program, but if the same header file is shared with a C program, <code>extern "C"</code> (which is not allowed in C) must be hidden with an appropriate <a href="../preprocessor/conditional" title="cpp/preprocessor/conditional"><code> #ifdef</code></a>, typically <a href="../preprocessor/replace#Predefined_macros" title="cpp/preprocessor/replace"><code>__cplusplus</code></a>:</p>
<div class="cpp source-cpp"><pre data-language="cpp">#ifdef __cplusplus
extern "C" int foo(int, int); // C++ compiler sees this
#else
int foo(int, int);            // C compiler sees this
#endif</pre></div> <h3 id="References">References</h3>  <ul>
<li> C++14 standard (ISO/IEC 14882:2014): </li>
<ul><li> 7.5 Linkage specifications [dcl.link] </li></ul>
<li> C++11 standard (ISO/IEC 14882:2011): </li>
<ul><li> 7.5 Linkage specifications [dcl.link] </li></ul>
</ul>                <div class="_attribution">
  <p class="_attribution-p">
    © cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="http://en.cppreference.com/w/cpp/language/language_linkage" class="_attribution-link">http://en.cppreference.com/w/cpp/language/language_linkage</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
