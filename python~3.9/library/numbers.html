
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Numbers - Python 3.9 - W3cubDocs</title>
  
  <meta name="description" content=" Source code&#58; Lib&#47;numbers.py ">
  <meta name="keywords" content="numbers, —, numeric, abstract, base, classes, python, python~3.9">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/python~3.9/library/numbers.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/python~3.9.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/python~3.9/" class="_nav-link" title="" style="margin-left:0;">Python 3.9</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _python">
				
				
<h1 id="numbers-numeric-abstract-base-classes">numbers — Numeric abstract base classes</h1> <p id="module-numbers"><strong>Source code:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.9/Lib/numbers.py">Lib/numbers.py</a></p>  <p>The <a class="reference internal" href="#module-numbers" title="numbers: Numeric abstract base classes (Complex, Real, Integral, etc.)."><code>numbers</code></a> module (<a class="pep reference external" href="https://www.python.org/dev/peps/pep-3141" id="index-0"><strong>PEP 3141</strong></a>) defines a hierarchy of numeric <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-abstract-base-class"><span class="xref std std-term">abstract base classes</span></a> which progressively define more operations. None of the types defined in this module can be instantiated.</p> <dl class="class"> <dt id="numbers.Number">
<code>class numbers.Number</code> </dt> <dd>
<p>The root of the numeric hierarchy. If you just want to check if an argument <em>x</em> is a number, without caring what kind, use <code>isinstance(x, Number)</code>.</p> </dd>
</dl>  <h2 id="the-numeric-tower">The numeric tower</h2> <dl class="class"> <dt id="numbers.Complex">
<code>class numbers.Complex</code> </dt> <dd>
<p>Subclasses of this type describe complex numbers and include the operations that work on the built-in <a class="reference internal" href="functions#complex" title="complex"><code>complex</code></a> type. These are: conversions to <a class="reference internal" href="functions#complex" title="complex"><code>complex</code></a> and <a class="reference internal" href="functions#bool" title="bool"><code>bool</code></a>, <a class="reference internal" href="#numbers.Complex.real" title="numbers.Complex.real"><code>real</code></a>, <a class="reference internal" href="#numbers.Complex.imag" title="numbers.Complex.imag"><code>imag</code></a>, <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <a class="reference internal" href="functions#abs" title="abs"><code>abs()</code></a>, <a class="reference internal" href="#numbers.Complex.conjugate" title="numbers.Complex.conjugate"><code>conjugate()</code></a>, <code>==</code>, and <code>!=</code>. All except <code>-</code> and <code>!=</code> are abstract.</p> <dl class="attribute"> <dt id="numbers.Complex.real">
<code>real</code> </dt> <dd>
<p>Abstract. Retrieves the real component of this number.</p> </dd>
</dl> <dl class="attribute"> <dt id="numbers.Complex.imag">
<code>imag</code> </dt> <dd>
<p>Abstract. Retrieves the imaginary component of this number.</p> </dd>
</dl> <dl class="method"> <dt id="numbers.Complex.conjugate">
<code>abstractmethod conjugate()</code> </dt> <dd>
<p>Abstract. Returns the complex conjugate. For example, <code>(1+3j).conjugate()
== (1-3j)</code>.</p> </dd>
</dl> </dd>
</dl> <dl class="class"> <dt id="numbers.Real">
<code>class numbers.Real</code> </dt> <dd>
<p>To <a class="reference internal" href="#numbers.Complex" title="numbers.Complex"><code>Complex</code></a>, <a class="reference internal" href="#numbers.Real" title="numbers.Real"><code>Real</code></a> adds the operations that work on real numbers.</p> <p>In short, those are: a conversion to <a class="reference internal" href="functions#float" title="float"><code>float</code></a>, <a class="reference internal" href="math#math.trunc" title="math.trunc"><code>math.trunc()</code></a>, <a class="reference internal" href="functions#round" title="round"><code>round()</code></a>, <a class="reference internal" href="math#math.floor" title="math.floor"><code>math.floor()</code></a>, <a class="reference internal" href="math#math.ceil" title="math.ceil"><code>math.ceil()</code></a>, <a class="reference internal" href="functions#divmod" title="divmod"><code>divmod()</code></a>, <code>//</code>, <code>%</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, and <code>&gt;=</code>.</p> <p>Real also provides defaults for <a class="reference internal" href="functions#complex" title="complex"><code>complex()</code></a>, <a class="reference internal" href="#numbers.Complex.real" title="numbers.Complex.real"><code>real</code></a>, <a class="reference internal" href="#numbers.Complex.imag" title="numbers.Complex.imag"><code>imag</code></a>, and <a class="reference internal" href="#numbers.Complex.conjugate" title="numbers.Complex.conjugate"><code>conjugate()</code></a>.</p> </dd>
</dl> <dl class="class"> <dt id="numbers.Rational">
<code>class numbers.Rational</code> </dt> <dd>
<p>Subtypes <a class="reference internal" href="#numbers.Real" title="numbers.Real"><code>Real</code></a> and adds <a class="reference internal" href="#numbers.Rational.numerator" title="numbers.Rational.numerator"><code>numerator</code></a> and <a class="reference internal" href="#numbers.Rational.denominator" title="numbers.Rational.denominator"><code>denominator</code></a> properties, which should be in lowest terms. With these, it provides a default for <a class="reference internal" href="functions#float" title="float"><code>float()</code></a>.</p> <dl class="attribute"> <dt id="numbers.Rational.numerator">
<code>numerator</code> </dt> <dd>
<p>Abstract.</p> </dd>
</dl> <dl class="attribute"> <dt id="numbers.Rational.denominator">
<code>denominator</code> </dt> <dd>
<p>Abstract.</p> </dd>
</dl> </dd>
</dl> <dl class="class"> <dt id="numbers.Integral">
<code>class numbers.Integral</code> </dt> <dd>
<p>Subtypes <a class="reference internal" href="#numbers.Rational" title="numbers.Rational"><code>Rational</code></a> and adds a conversion to <a class="reference internal" href="functions#int" title="int"><code>int</code></a>. Provides defaults for <a class="reference internal" href="functions#float" title="float"><code>float()</code></a>, <a class="reference internal" href="#numbers.Rational.numerator" title="numbers.Rational.numerator"><code>numerator</code></a>, and <a class="reference internal" href="#numbers.Rational.denominator" title="numbers.Rational.denominator"><code>denominator</code></a>. Adds abstract methods for <code>**</code> and bit-string operations: <code>&lt;&lt;</code>, <code>&gt;&gt;</code>, <code>&amp;</code>, <code>^</code>, <code>|</code>, <code>~</code>.</p> </dd>
</dl>   <h2 id="notes-for-type-implementors">Notes for type implementors</h2> <p>Implementors should be careful to make equal numbers equal and hash them to the same values. This may be subtle if there are two different extensions of the real numbers. For example, <a class="reference internal" href="fractions#fractions.Fraction" title="fractions.Fraction"><code>fractions.Fraction</code></a> implements <a class="reference internal" href="functions#hash" title="hash"><code>hash()</code></a> as follows:</p> <pre data-language="python">def __hash__(self):
    if self.denominator == 1:
        # Get integers right.
        return hash(self.numerator)
    # Expensive check, but definitely correct.
    if self == float(self):
        return hash(float(self))
    else:
        # Use tuple's hash to avoid a high collision rate on
        # simple fractions.
        return hash((self.numerator, self.denominator))
</pre>  <h3 id="adding-more-numeric-abcs">Adding More Numeric ABCs</h3> <p>There are, of course, more possible ABCs for numbers, and this would be a poor hierarchy if it precluded the possibility of adding those. You can add <code>MyFoo</code> between <a class="reference internal" href="#numbers.Complex" title="numbers.Complex"><code>Complex</code></a> and <a class="reference internal" href="#numbers.Real" title="numbers.Real"><code>Real</code></a> with:</p> <pre data-language="python">class MyFoo(Complex): ...
MyFoo.register(Real)
</pre>   <h3 id="id1">Implementing the arithmetic operations</h3> <p id="implementing-the-arithmetic-operations">We want to implement the arithmetic operations so that mixed-mode operations either call an implementation whose author knew about the types of both arguments, or convert both to the nearest built in type and do the operation there. For subtypes of <a class="reference internal" href="#numbers.Integral" title="numbers.Integral"><code>Integral</code></a>, this means that <a class="reference internal" href="https://docs.python.org/3.9/reference/datamodel.html#object.__add__" title="object.__add__"><code>__add__()</code></a> and <a class="reference internal" href="https://docs.python.org/3.9/reference/datamodel.html#object.__radd__" title="object.__radd__"><code>__radd__()</code></a> should be defined as:</p> <pre data-language="python">class MyIntegral(Integral):

    def __add__(self, other):
        if isinstance(other, MyIntegral):
            return do_my_adding_stuff(self, other)
        elif isinstance(other, OtherTypeIKnowAbout):
            return do_my_other_adding_stuff(self, other)
        else:
            return NotImplemented

    def __radd__(self, other):
        if isinstance(other, MyIntegral):
            return do_my_adding_stuff(other, self)
        elif isinstance(other, OtherTypeIKnowAbout):
            return do_my_other_adding_stuff(other, self)
        elif isinstance(other, Integral):
            return int(other) + int(self)
        elif isinstance(other, Real):
            return float(other) + float(self)
        elif isinstance(other, Complex):
            return complex(other) + complex(self)
        else:
            return NotImplemented
</pre> <p>There are 5 different cases for a mixed-type operation on subclasses of <a class="reference internal" href="#numbers.Complex" title="numbers.Complex"><code>Complex</code></a>. I’ll refer to all of the above code that doesn’t refer to <code>MyIntegral</code> and <code>OtherTypeIKnowAbout</code> as “boilerplate”. <code>a</code> will be an instance of <code>A</code>, which is a subtype of <a class="reference internal" href="#numbers.Complex" title="numbers.Complex"><code>Complex</code></a> (<code>a : A &lt;: Complex</code>), and <code>b : B &lt;:
Complex</code>. I’ll consider <code>a + b</code>:</p>  <ol class="arabic simple"> <li>If <code>A</code> defines an <a class="reference internal" href="https://docs.python.org/3.9/reference/datamodel.html#object.__add__" title="object.__add__"><code>__add__()</code></a> which accepts <code>b</code>, all is well.</li> <li>If <code>A</code> falls back to the boilerplate code, and it were to return a value from <a class="reference internal" href="https://docs.python.org/3.9/reference/datamodel.html#object.__add__" title="object.__add__"><code>__add__()</code></a>, we’d miss the possibility that <code>B</code> defines a more intelligent <a class="reference internal" href="https://docs.python.org/3.9/reference/datamodel.html#object.__radd__" title="object.__radd__"><code>__radd__()</code></a>, so the boilerplate should return <a class="reference internal" href="constants#NotImplemented" title="NotImplemented"><code>NotImplemented</code></a> from <a class="reference internal" href="https://docs.python.org/3.9/reference/datamodel.html#object.__add__" title="object.__add__"><code>__add__()</code></a>. (Or <code>A</code> may not implement <a class="reference internal" href="https://docs.python.org/3.9/reference/datamodel.html#object.__add__" title="object.__add__"><code>__add__()</code></a> at all.)</li> <li>Then <code>B</code>’s <a class="reference internal" href="https://docs.python.org/3.9/reference/datamodel.html#object.__radd__" title="object.__radd__"><code>__radd__()</code></a> gets a chance. If it accepts <code>a</code>, all is well.</li> <li>If it falls back to the boilerplate, there are no more possible methods to try, so this is where the default implementation should live.</li> <li>If <code>B &lt;: A</code>, Python tries <code>B.__radd__</code> before <code>A.__add__</code>. This is ok, because it was implemented with knowledge of <code>A</code>, so it can handle those instances before delegating to <a class="reference internal" href="#numbers.Complex" title="numbers.Complex"><code>Complex</code></a>.</li> </ol>  <p>If <code>A &lt;: Complex</code> and <code>B &lt;: Real</code> without sharing any other knowledge, then the appropriate shared operation is the one involving the built in <a class="reference internal" href="functions#complex" title="complex"><code>complex</code></a>, and both <a class="reference internal" href="https://docs.python.org/3.9/reference/datamodel.html#object.__radd__" title="object.__radd__"><code>__radd__()</code></a> s land there, so <code>a+b
== b+a</code>.</p> <p>Because most of the operations on any given type will be very similar, it can be useful to define a helper function which generates the forward and reverse instances of any given operator. For example, <a class="reference internal" href="fractions#fractions.Fraction" title="fractions.Fraction"><code>fractions.Fraction</code></a> uses:</p> <pre data-language="python">def _operator_fallbacks(monomorphic_operator, fallback_operator):
    def forward(a, b):
        if isinstance(b, (int, Fraction)):
            return monomorphic_operator(a, b)
        elif isinstance(b, float):
            return fallback_operator(float(a), b)
        elif isinstance(b, complex):
            return fallback_operator(complex(a), b)
        else:
            return NotImplemented
    forward.__name__ = '__' + fallback_operator.__name__ + '__'
    forward.__doc__ = monomorphic_operator.__doc__

    def reverse(b, a):
        if isinstance(a, Rational):
            # Includes ints.
            return monomorphic_operator(a, b)
        elif isinstance(a, numbers.Real):
            return fallback_operator(float(a), float(b))
        elif isinstance(a, numbers.Complex):
            return fallback_operator(complex(a), complex(b))
        else:
            return NotImplemented
    reverse.__name__ = '__r' + fallback_operator.__name__ + '__'
    reverse.__doc__ = monomorphic_operator.__doc__

    return forward, reverse

def _add(a, b):
    """a + b"""
    return Fraction(a.numerator * b.denominator +
                    b.numerator * a.denominator,
                    a.denominator * b.denominator)

__add__, __radd__ = _operator_fallbacks(_add, operator.add)

# ...
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2020 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/3.9/library/numbers.html" class="_attribution-link">https://docs.python.org/3.9/library/numbers.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
