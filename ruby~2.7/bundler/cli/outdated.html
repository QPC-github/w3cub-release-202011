
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Bundler&#58;&#58;CLI&#58;&#58;Outdated - Ruby 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" Ruby Core © 1993–2017 Yukihiro MatsumotoLicensed under the Ruby License.Ruby Standard Library © contributorsLicensed under their own licenses. ">
  <meta name="keywords" content="class, bundler, cli, outdated, ruby, ruby~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ruby~2.7/bundler/cli/outdated.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/ruby~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ruby~2.7/" class="_nav-link" title="" style="margin-left:0;">Ruby 2.7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _rdoc">
				
				
<h1 id="class-Bundler::CLI::Outdated" class="class"> class Bundler::CLI::Outdated </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../../object">Object</a></dd>
</dl>  <section id="5Buntitled-5D" class="documentation-section"> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-filter_options_patch"> <span class="method-name">filter_options_patch</span><span class="attribute-access-type">[R]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-gems"> <span class="method-name">gems</span><span class="attribute-access-type">[R]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-options"> <span class="method-name">options</span><span class="attribute-access-type">[R]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-options_include_groups"> <span class="method-name">options_include_groups</span><span class="attribute-access-type">[R]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-outdated_gems_by_groups"> <span class="method-name">outdated_gems_by_groups</span><span class="attribute-access-type">[RW]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-outdated_gems_list"> <span class="method-name">outdated_gems_list</span><span class="attribute-access-type">[RW]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-sources"> <span class="method-name">sources</span><span class="attribute-access-type">[R]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-strict"> <span class="method-name">strict</span><span class="attribute-access-type">[R]</span> </div>  </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(options, gems)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 8
def initialize(options, gems)
  @options = options
  @gems = gems
  @sources = Array(options[:source])

  @filter_options_patch = options.keys &amp;
    %w[filter-major filter-minor filter-patch]

  @outdated_gems_by_groups = {}
  @outdated_gems_list = []

  @options_include_groups = [:group, :groups].any? do |v|
    options.keys.include?(v.to_s)
  end

  # the patch level options imply strict is also true. It wouldn't make
  # sense otherwise.
  @strict = options["filter-strict"] ||
    Bundler::CLI::Common.patch_level_options(options).any?
end</pre> </div>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-run"> <span class="method-name">run</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="run-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 29
def run
  check_for_deployment_mode!

  gems.each do |gem_name|
    Bundler::CLI::Common.select_spec(gem_name)
  end

  Bundler.definition.validate_runtime!
  current_specs = Bundler.ui.silence { Bundler.definition.resolve }

  current_dependencies = Bundler.ui.silence do
    Bundler.load.dependencies.map {|dep| [dep.name, dep] }.to_h
  end

  definition = if gems.empty? &amp;&amp; sources.empty?
    # We're doing a full update
    Bundler.definition(true)
  else
    Bundler.definition(:gems =&gt; gems, :sources =&gt; sources)
  end

  Bundler::CLI::Common.configure_gem_version_promoter(
    Bundler.definition,
    options
  )

  definition_resolution = proc do
    options[:local] ? definition.resolve_with_cache! : definition.resolve_remotely!
  end

  if options[:parseable]
    Bundler.ui.silence(&amp;definition_resolution)
  else
    definition_resolution.call
  end

  Bundler.ui.info ""

  # Loop through the current specs
  gemfile_specs, dependency_specs = current_specs.partition do |spec|
    current_dependencies.key? spec.name
  end

  specs = if options["only-explicit"]
    gemfile_specs
  else
    gemfile_specs + dependency_specs
  end

  specs.sort_by(&amp;:name).each do |current_spec|
    next if !gems.empty? &amp;&amp; !gems.include?(current_spec.name)

    dependency = current_dependencies[current_spec.name]
    active_spec = retrieve_active_spec(definition, current_spec)

    next if active_spec.nil?
    next if filter_options_patch.any? &amp;&amp;
      !update_present_via_semver_portions(current_spec, active_spec, options)

    gem_outdated = Gem::Version.new(active_spec.version) &gt; Gem::Version.new(current_spec.version)
    next unless gem_outdated || (current_spec.git_version != active_spec.git_version)
    groups = nil
    if dependency &amp;&amp; !options[:parseable]
      groups = dependency.groups.join(", ")
    end

    outdated_gems_list &lt;&lt; { :active_spec =&gt; active_spec,
                            :current_spec =&gt; current_spec,
                            :dependency =&gt; dependency,
                            :groups =&gt; groups }

    outdated_gems_by_groups[groups] ||= []
    outdated_gems_by_groups[groups] &lt;&lt; outdated_gems_list[-1]
  end

  if outdated_gems_list.empty?
    display_nothing_outdated_message
  else
    unless options[:parseable]
      Bundler.ui.info(header_outdated_message)
    end

    if options_include_groups
      ordered_groups = outdated_gems_by_groups.keys.compact.sort
      ordered_groups.insert(0, nil).each do |groups|
        gems = outdated_gems_by_groups[groups]
        contains_group = if groups
          groups.split(", ").include?(options[:group])
        else
          options[:group] == "group"
        end

        next if (!options[:groups] &amp;&amp; !contains_group) || gems.nil?

        unless options[:parseable]
          Bundler.ui.info(header_group_message(groups))
        end

        print_gems(gems)
      end
    else
      print_gems(outdated_gems_list)
    end

    exit 1
  end
end</pre> </div>  </div> </div> </section> <section id="private-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Private Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-check_for_deployment_mode-21"> <span class="method-name">check_for_deployment_mode!</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="check_for_deployment_mode-21-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 225
def check_for_deployment_mode!
  return unless Bundler.frozen_bundle?
  suggested_command = if Bundler.settings.locations("frozen")[:global]
    "bundle config unset frozen"
  elsif Bundler.settings.locations("deployment").keys.&amp;([:global, :local]).any?
    "bundle config unset deployment"
  else
    "bundle install --no-deployment"
  end
  raise ProductionError, "You are trying to check outdated gems in " \
    "deployment mode. Run `bundle outdated` elsewhere.\n" \
    "\nIf this is a development machine, remove the " \
    "#{Bundler.default_gemfile} freeze" \
    "\nby running `#{suggested_command}`."
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-display_nothing_outdated_message"> <span class="method-name">display_nothing_outdated_message</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="display_nothing_outdated_message-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 185
def display_nothing_outdated_message
  unless options[:parseable]
    Bundler.ui.info(nothing_outdated_message)
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-get_version_semver_portion_value"> <span class="method-name">get_version_semver_portion_value</span><span class="method-args">(spec, version_portion_index)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="get_version_semver_portion_value-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 265
def get_version_semver_portion_value(spec, version_portion_index)
  version_section = spec.version.segments[version_portion_index, 1]
  version_section.to_a[0].to_i
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-groups_text"> <span class="method-name">groups_text</span><span class="method-args">(group_text, groups)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="groups_text-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 139
def groups_text(group_text, groups)
  "#{group_text}#{groups.split(",").size &gt; 1 ? "s" : ""} \"#{groups}\""
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-header_group_message"> <span class="method-name">header_group_message</span><span class="method-args">(groups)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="header_group_message-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 151
def header_group_message(groups)
  if groups
    "===== #{groups_text("Group", groups)} ====="
  else
    "===== Without group ====="
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-header_outdated_message"> <span class="method-name">header_outdated_message</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="header_outdated_message-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 143
def header_outdated_message
  if options[:pre]
    "Outdated gems included in the bundle (including pre-releases):"
  else
    "Outdated gems included in the bundle:"
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-nothing_outdated_message"> <span class="method-name">nothing_outdated_message</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="nothing_outdated_message-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 159
def nothing_outdated_message
  if filter_options_patch.any?
    display = filter_options_patch.map do |o|
      o.sub("filter-", "")
    end.join(" or ")

    "No #{display} updates to display.\n"
  else
    "Bundle up to date!\n"
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-print_gem"> <span class="method-name">print_gem</span><span class="method-args">(current_spec, active_spec, dependency, groups)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="print_gem-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 202
def print_gem(current_spec, active_spec, dependency, groups)
  spec_version = "#{active_spec.version}#{active_spec.git_version}"
  spec_version += " (from #{active_spec.loaded_from})" if Bundler.ui.debug? &amp;&amp; active_spec.loaded_from
  current_version = "#{current_spec.version}#{current_spec.git_version}"

  if dependency &amp;&amp; dependency.specific?
    dependency_version = %(, requested #{dependency.requirement})
  end

  spec_outdated_info = "#{active_spec.name} (newest #{spec_version}, " \
    "installed #{current_version}#{dependency_version})"

  output_message = if options[:parseable]
    spec_outdated_info.to_s
  elsif options_include_groups || !groups
    "  * #{spec_outdated_info}"
  else
    "  * #{spec_outdated_info} in #{groups_text("group", groups)}"
  end

  Bundler.ui.info output_message.rstrip
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-print_gems"> <span class="method-name">print_gems</span><span class="method-args">(gems_list)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="print_gems-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 191
def print_gems(gems_list)
  gems_list.each do |gem|
    print_gem(
      gem[:current_spec],
      gem[:active_spec],
      gem[:dependency],
      gem[:groups],
    )
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-retrieve_active_spec"> <span class="method-name">retrieve_active_spec</span><span class="method-args">(definition, current_spec)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="retrieve_active_spec-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 171
def retrieve_active_spec(definition, current_spec)
  if strict
    active_spec = definition.find_resolved_spec(current_spec)
  else
    active_specs = definition.find_indexed_specs(current_spec)
    if !current_spec.version.prerelease? &amp;&amp; !options[:pre] &amp;&amp; active_specs.size &gt; 1
      active_specs.delete_if {|b| b.respond_to?(:version) &amp;&amp; b.version.prerelease? }
    end
    active_spec = active_specs.last
  end

  active_spec
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-update_present_via_semver_portions"> <span class="method-name">update_present_via_semver_portions</span><span class="method-args">(current_spec, active_spec, options)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="update_present_via_semver_portions-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/cli/outdated.rb, line 241
def update_present_via_semver_portions(current_spec, active_spec, options)
  current_major = current_spec.version.segments.first
  active_major = active_spec.version.segments.first

  update_present = false
  update_present = active_major &gt; current_major if options["filter-major"]

  if !update_present &amp;&amp; (options["filter-minor"] || options["filter-patch"]) &amp;&amp; current_major == active_major
    current_minor = get_version_semver_portion_value(current_spec, 1)
    active_minor = get_version_semver_portion_value(active_spec, 1)

    update_present = active_minor &gt; current_minor if options["filter-minor"]

    if !update_present &amp;&amp; options["filter-patch"] &amp;&amp; current_minor == active_minor
      current_patch = get_version_semver_portion_value(current_spec, 2)
      active_patch = get_version_semver_portion_value(active_spec, 2)

      update_present = active_patch &gt; current_patch
    end
  end

  update_present
end</pre> </div>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core © 1993–2017 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library © contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
