
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Guides&#58; Writing Shards - Crystal - W3cubDocs</title>
  
  <meta name="description" content=" How to write and release Crystal Shards. ">
  <meta name="keywords" content="writing, shards, guides, crystal">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/crystal/docs/guides/writing_shards.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/crystal.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/crystal/" class="_nav-link" title="" style="margin-left:0;">Crystal</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _crystal">
				
				
<h1 id="writing-shards">Writing Shards</h1> <p>How to write and release Crystal Shards.</p> <h2 id="whats-a-shard"><em>What's a Shard?</em></h2> <p>Simply put, a Shard is a package of Crystal code, made to be shared-with and used-by other projects.</p> <p>See <a href="../the_shards_command/index">the Shards command</a> for details.</p> <h2 id="introduction">Introduction</h2> <p>In this tutorial, we'll be making a Crystal library called <em>palindrome-example</em>.</p> <blockquote> <p>For those who don't know, a palindrome is a word which is spelled the same way forwards as it is backwards. e.g. racecar, mom, dad, kayak, madam</p> </blockquote> <h3 id="requirements">Requirements</h3> <p>In order to release a Crystal Shard, and follow along with this tutorial, you will need the following:</p> <ul> <li>A working installation of the <a href="../using_the_compiler/index">Crystal compiler</a>
</li> <li>A working installation of <a href="https://git-scm.com" target="_blank">Git</a>
</li> <li>A <a href="https://github.com" target="_blank">GitHub</a> or <a href="https://gitlab.com/" target="_blank">GitLab</a> account</li> </ul> <h3 id="creating-the-project">Creating the Project</h3> <p>Begin by using <a href="../using_the_compiler/index">the Crystal compiler</a>'s <code>init lib</code> command to create a Crystal library with the standard directory structure.</p> <p>In your terminal: <code>crystal init lib &lt;YOUR-SHARD-NAME&gt;</code></p> <p>e.g.</p> <pre data-language="session">$ crystal init lib palindrome-example
    create  palindrome-example/.gitignore
    create  palindrome-example/.editorconfig
    create  palindrome-example/LICENSE
    create  palindrome-example/README.md
    create  palindrome-example/.travis.yml
    create  palindrome-example/shard.yml
    create  palindrome-example/src/palindrome-example.cr
    create  palindrome-example/src/palindrome-example/version.cr
    create  palindrome-example/spec/spec_helper.cr
    create  palindrome-example/spec/palindrome-example_spec.cr
Initialized empty Git repository in /&lt;YOUR-DIRECTORY&gt;/.../palindrome-example/.git/
</pre> <p>...and <code>cd</code> into the directory:</p> <p>e.g.</p> <pre data-language="bash">cd palindrome-example
</pre> <p>Then <code>add</code> &amp; <code>commit</code> to start tracking the files with Git:</p> <pre data-language="session">$  git add -A
$  git commit -am "First Commit"
[master (root-commit) 77bad84] First Commit
10 files changed, 102 insertions(+)
create mode 100644 .editorconfig
create mode 100644 .gitignore
create mode 100644 .travis.yml
create mode 100644 LICENSE
create mode 100644 README.md
create mode 100644 shard.yml
create mode 100644 spec/palindrome-example_spec.cr
create mode 100644 spec/spec_helper.cr
create mode 100644 src/palindrome-example.cr
create mode 100644 src/palindrome-example/version.cr
</pre> <h3 id="writing-the-code">Writing the Code</h3> <p>The code you write is up to you, but how you write it impacts whether people want to use your library and/or help you maintain it.</p> <h4 id="testing-the-code">Testing the Code</h4> <ul> <li>Test your code. All of it. It's the only way for anyone, including you, to know if it works.</li> <li>Crystal has <a href="https://crystal-lang.org/api/Spec.html" target="_blank">a built-in testing library</a>. Use it!</li> </ul> <h4 id="documentation">Documentation</h4> <ul> <li>Document your code with comments. All of it. Even the private methods.</li> <li>Crystal has <a href="../conventions/documenting_code">a built-in documentation generator</a>. Use it!</li> </ul> <p>Run <code>crystal docs</code> to convert your code and comments into interlinking API documentation. Open the files in the <code>/docs/</code> directory with a web browser to see how your documentation is looking along the way.</p> <p>See below for instructions on hosting your compiler-generated docs on GitHub/GitLab Pages.</p> <p>Once your documentation is ready and available, you can add a documentation badge to your repository so users know that it exists. In GitLab this badge belongs to the project so we'll cover it in the GitLab instructions below, for GitHub it is common to place it below the description in your README.md like so: (Be sure to replace <code>&lt;LINK-TO-YOUR-DOCUMENTATION&gt;</code> accordingly)</p> <pre data-language="Markdown">[![Docs](https://img.shields.io/badge/docs-available-brightgreen.svg)](&lt;LINK-TO-YOUR-DOCUMENTATION&gt;)
</pre> <h3 id="writing-a-readme">Writing a README</h3> <p>A good README can make or break your project. <a href="https://github.com/matiassingers/awesome-readme" target="_blank">Awesome README</a> is a nice curation of examples and resources on the topic.</p> <p>Most importantly, your README should explain:</p> <ol> <li>What your library is</li> <li>What it does</li> <li>How to use it</li> </ol> <p>This explanation should include a few examples along with subheadings.</p> <p>NOTE: Be sure to replace all instances of <code>[your-github-name]</code> in the Crystal-generated README template with your GitHub/GitLab username. If you're using GitLab, you'll also want to change all instances of <code>github</code> with <code>gitlab</code>.</p> <h4 id="coding-style">Coding Style</h4> <ul> <li>It's fine to have your own style, but sticking to <a href="../conventions/coding_style">some core rubrics defined by the Crystal team</a> can help keep your code consistent, readable and usable for other developers.</li> <li>Utilize Crystal's <a href="../conventions/documenting_code">built-in code formatter</a> to automatically format all <code>.cr</code> files in a directory.</li> </ul> <p>e.g.</p> <pre>crystal tool format
</pre>
<p>To check if your code is formatted correctly, or to check if using the formatter wouldn't produce any changes, simply add <code>--check</code> to the end of this command.</p> <p>e.g.</p> <pre>crystal tool format --check
</pre>
<p>See the Travis CI section below to implement this in your build.</p> <h3 id="writing-a-shardyml">Writing a <code>shard.yml</code>
</h3> <p><a href="https://github.com/crystal-lang/shards/blob/master/SPEC.md" target="_blank">The spec</a> is your rulebook. Follow it.</p> <h4 id="name">Name</h4> <p>Your <code>shard.yml</code>'s <code>name</code> property should be concise and descriptive.</p> <ul> <li>Search <a href="https://crystalshards.xyz/" target="_blank">crystalshards.xyz</a> to check if your name is already taken.</li> </ul> <p>e.g.</p> <pre data-language="YAML">name: palindrome-example
</pre> <h4 id="description">Description</h4> <p>Add a <code>description</code> to your <code>shard.yml</code>.</p> <p>A <code>description</code> is a single line description used to search for and find your shard.</p> <p>A description should be:</p> <ol> <li>Informative</li> <li>Discoverable</li> </ol> <h4 id="optimizing">Optimizing</h4> <p>It's hard for anyone to use your project if they can't find it. <a href="https://crystalshards.xyz/" target="_blank">crystalshards.xyz</a> is currently the go-to place for Crystal libraries, so that's what we'll optimize for.</p> <p>There are people looking for the <em>exact</em> functionality of our library and the <em>general</em> functionality of our library. e.g. Bob needs a palindrome library, but Felipe is just looking for libraries involving text and Susan is looking for libraries involving spelling.</p> <p>Our <code>name</code> is already descriptive enough for Bob's search of "palindrome". We don't need to repeat the <em>palindrome</em> keyword. Instead, we'll catch Susan's search for "spelling" and Felipe's search for "text".</p> <pre data-language="YAML">description: |
  A textual algorithm to tell if a word is spelled the same way forwards as it is backwards.
</pre> <h3 id="hosting">Hosting</h3> <p>From here the guide differs depending on whether you are hosting your repo on GitHub or GitLab. If you're hosting somewhere else, please feel free to write up a guide and add it to this book!</p> <ul> <li><a href="hosting/github">Hosting on GitHub</a></li> <li><a href="hosting/gitlab">Hosting on GitLab</a></li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    To the extent possible under law, the persons who contributed to this workhave waived<br>all copyright and related or neighboring rights to this workby associating CC0 with it.<br>
    <a href="https://crystal-lang.org/docs/guides/writing_shards.html" class="_attribution-link">https://crystal-lang.org/docs/guides/writing_shards.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
