
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>hub.Module - TensorFlow Python - W3cubDocs</title>
  
  <meta name="description" content=" Part of a TensorFlow model that can be transferred between models. ">
  <meta name="keywords" content="hub, module, tensorflow, python, tensorflow~python">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tensorflow~python/hub/module.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/tensorflow~python.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~python/" class="_nav-link" title="" style="margin-left:0;">TensorFlow Python</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tensorflow">
				
				
<h1 itemprop="name" class="devsite-page-title"> hub.Module </h1>      <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="hub.Module"> <meta itemprop="path" content="master"> <meta itemprop="property" content="variable_map"> <meta itemprop="property" content="__call__"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="export"> <meta itemprop="property" content="get_input_info_dict"> <meta itemprop="property" content="get_output_info_dict"> <meta itemprop="property" content="get_signature_names"> </div> <h2 id="class_module">Class <code>Module</code>
</h2> <p>Part of a TensorFlow model that can be transferred between models.</p> <p>A Module represents a part of a TensorFlow graph that can be exported to disk (based on the SavedModel format) and later re-loaded. A Module has a defined interface that allows it to be used in a replaceable way, with little or no knowledge of its internals and its serialization format. Example:</p> <pre class="prettyprint lang-python" data-language="python">m = hub.Module("/tmp/text-embedding")
embeddings = m(sentences)
</pre> <p>The module to instantiate is defined by its spec (a <code>ModuleSpec</code> or a path where to load it from) which contains the module weights, assets and signatures.</p> <p>During instantiation the Module adds the state (e.g. variables and tables ops) to the current graph. Afterwards, the method <code>__call__()</code> allows to apply the module <code>signatures</code> multiple times, which adds ops for the computation.</p> <p>A Module may provide different variants of its graph for different purposes (say, training or serving, which may behave differently, e.g., for batch normalization). Graph variants are identified by sets of string-valued tags. The graph variant used to create a module that is exported must define all the variables needed by any other graph variant that is subsequently used.</p> <p>To make it possible to easily replace a module with another, they all assume that they will be used with common TensorFlow conventions such as session initialization and restore, use of collections for variables, regularization losses and updates, etc.</p> <h2 id="properties">Properties</h2> <h3 id="variable_map"><code>variable_map</code></h3> <p>Map from original variable names into tf.Variables (or lists of them).</p> <p>This map translates between variable names relative to the module and the corresponding Variable objects that have been created by instantiating it in the current graph (with the applicable scoping added). Each key in the map is a variable name as created by running the module's defining <code>module_fn</code> in the root scope of an empty graph. Each value in the map is a Variable object, or in case of partitioned variables a list of Variable objects.</p> <p>This property can be used with <code>tf.init_from_checkpoint</code> as <code>assignment_map</code> in order to restore a pre-trained checkpoint into a Module before calling <code>Module.export()</code>.</p> <h4 id="returns">Returns:</h4> <p>A dict from the variable names in the Module to the instantiated tf.Variables or list of tf.Variables (if partitioned). The keys of this map are the same regardless of the scope of where the Module was instantiated.</p> <h2 id="methods">Methods</h2> <h3 id="__init__"><code>__init__</code></h3> <pre class="prettyprint lang-python" data-language="python">__init__(
    spec,
    trainable=False,
    name='module',
    tags=None
)
</pre> <p>Constructs a Module to be used in the current graph.</p> <p>This creates the module <code>state-graph</code> under an unused variable_scope based on <code>name</code>. During this call a Module will:</p> <ul> <li> <p>Add GLOBAL_VARIABLES under its scope. Those variables may be added to to the TRAINABLE_VARIABLES collection (depending on <code>trainable</code> parameter) and to the MODEL_VARIABLES. The variables must be initialized before use, and can be checkpointed as usual.</p> </li> <li> <p>Add ops to the INIT_TABLE_OPS collection, which must be run during session initialization and add constant tensors to ASSET_FILEPATHS that are needed during the execution of such ops.</p> </li> <li> <p>Add tensors to the REGULARIZATION_LOSSES collection (depending on <code>trainable</code> parameter).</p> </li> </ul> <h4 id="args">Args:</h4> <ul> <li>
<b><code>spec</code></b>: A ModuleSpec defining the Module to instantiate or a path where to load a ModuleSpec from via <code>load_module_spec</code>.</li> <li>
<b><code>trainable</code></b>: whether the Module is trainable. If False, no variables are added to TRAINABLE_VARIABLES collection, and no tensors are added to REGULARIZATION_LOSSES collection.</li> <li>
<b><code>name</code></b>: A string, the variable scope name under which to create the Module. It will be uniquified and the equivalent name scope must be unused.</li> <li>
<b><code>tags</code></b>: A set of strings specifying the graph variant to use.</li> </ul> <h4 id="raises">Raises:</h4> <ul> <li>
<b><code>RuntimeError</code></b>: explaning the reason why it failed to instantiate the Module.</li> <li>
<b><code>ValueError</code></b>: if the requested graph variant does not exists.</li> </ul> <h3 id="__call__"><code>__call__</code></h3> <pre class="prettyprint lang-python" data-language="python">__call__(
    inputs=None,
    _sentinel=None,
    signature=None,
    as_dict=None
)
</pre> <p>Instantiates a module signature in the graph.</p> <p>Example calls:</p> <pre class="prettyprint lang-python" data-language="python"># Use default signature with one input and default output.
embeddings = m(["hello world", "good morning"])

# Use "encode" signature with one input and default output.
encodings = m(["hello world"], signature="encode")

# Use default signature with input dict and output dict.
dict_outputs = m({"text": [...], "lang": [...]}, as_dict=True)
</pre> <p>The method <strong>call</strong>() allows to create the graph ops that compute a signature outputs given the inputs and using this module instance state. Each signature can be applied multiple times with different inputs and they all share the same module state.</p> <p>A Module may define multiple signatures. Use <code>signature=&lt;name&gt;</code> to identify the specific signature to instantiate. If omitted or None, the default signature is used.</p> <p>A signature may define various outputs. Use <code>as_dict=True</code> to return a dict of all outputs. If omitted or False, the output named 'default' is returned.</p> <p>During this call a Module will:</p> <ul> <li> <p>Add ops in the current name scope to convert the inputs in tensors to feed to the signature.</p> </li> <li> <p>Add ops to the UPDATE_OPS collection which depend on at least one of the provided inputs if the Module was constructed with <code>trainable=True</code>.</p> </li> <li> <p>Add constant tensors to ASSET_FILEPATHS, even if those are not needed directly needed for the signature.</p> </li> </ul> <h4 id="args_1">Args:</h4> <ul> <li>
<b><code>inputs</code></b>: Inputs to the signature. A dict from input names to tensor values. If the signature only expects one input, one may pass a single value. If the signature has no inputs, it may be omitted.</li> <li>
<b><code>_sentinel</code></b>: Used to prevent positional parameters besides <code>inputs</code>.</li> <li>
<b><code>signature</code></b>: A string with the signature name to apply. If none, the default signature is used.</li> <li>
<b><code>as_dict</code></b>: A boolean indicating whether to the return all the outputs of the signature as a dict or return only the default output.</li> </ul> <h4 id="returns_1">Returns:</h4> <p>A tensor (single or sparse) if the signature defines a default output or a dict from strings (output names) to tensors if <code>as_dict=True</code> is used.</p> <h4 id="raises_1">Raises:</h4> <ul> <li>
<b><code>TypeError</code></b>: If there is a mismatch on arguments, inputs or outputs of the module signature.</li> <li>
<b><code>RuntimeError</code></b>: If there are errors during creation of the signature graph.</li> </ul> <h3 id="export"><code>export</code></h3> <pre class="prettyprint lang-python" data-language="python">export(
    path,
    session
)
</pre> <p>Exports the module with the variables from the session in <code>path</code>.</p> <p>Note that it is the module definition in the ModuleSpec used to create this module that gets exported. The session is only used to provide the value of variables.</p> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code>path</code></b>: path where to export the module to.</li> <li>
<b><code>session</code></b>: session where to export the variables from.</li> </ul> <h4 id="raises_2">Raises:</h4> <ul> <li>
<b><code>RuntimeError</code></b>: if there is an issue during the export.</li> </ul> <h3 id="get_input_info_dict"><code>get_input_info_dict</code></h3> <pre class="prettyprint lang-python" data-language="python">get_input_info_dict(signature=None)
</pre> <p>Describes the inputs required by a signature.</p> <h4 id="args_3">Args:</h4> <ul> <li>
<b><code>signature</code></b>: A string with the signature to get inputs information for. If None, the default signature is used if defined.</li> </ul> <h4 id="returns_2">Returns:</h4> <p>The result of ModuleSpec.get_input_info_dict() for the given signature, and the graph variant selected by <code>tags</code> when this Module was initialized.</p> <h4 id="raises_3">Raises:</h4> <ul> <li>
<b><code>KeyError</code></b>: if there is no such signature.</li> </ul> <h3 id="get_output_info_dict"><code>get_output_info_dict</code></h3> <pre class="prettyprint lang-python" data-language="python">get_output_info_dict(signature=None)
</pre> <p>Describes the outputs provided by a signature.</p> <h4 id="args_4">Args:</h4> <ul> <li>
<b><code>signature</code></b>: A string with the signature to get ouputs information for. If None, the default signature is used if defined.</li> </ul> <h4 id="returns_3">Returns:</h4> <p>The result of ModuleSpec.get_input_info_dict() for the given signature, and the graph variant selected by <code>tags</code> when this Module was initialized.</p> <h4 id="raises_4">Raises:</h4> <ul> <li>
<b><code>KeyError</code></b>: if there is no such signature.</li> </ul> <h3 id="get_signature_names"><code>get_signature_names</code></h3> <pre class="prettyprint lang-python" data-language="python">get_signature_names()
</pre> <p>Returns the module's signature names as an iterable of strings.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2018 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/hub/Module" class="_attribution-link">https://www.tensorflow.org/api_docs/python/hub/Module</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
