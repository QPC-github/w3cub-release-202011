
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>tf.saved_model.builder.SavedModelBuilder - TensorFlow Python - W3cubDocs</title>
  
  <meta name="description" content=" Defined in tensorflow&#47;python&#47;saved_model&#47;builder_impl.py. ">
  <meta name="keywords" content="tf, saved, model, builder, savedmodelbuilder, tensorflow, python, tensorflow~python">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tensorflow~python/tf/saved_model/builder/savedmodelbuilder.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/tensorflow~python.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~python/" class="_nav-link" title="" style="margin-left:0;">TensorFlow Python</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tensorflow">
				
				
<h1 itemprop="name" class="devsite-page-title"> tf.saved_model.builder.SavedModelBuilder </h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.saved_model.builder.SavedModelBuilder"> <meta itemprop="path" content="r1.8"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="add_meta_graph"> <meta itemprop="property" content="add_meta_graph_and_variables"> <meta itemprop="property" content="save"> </div> <h2 id="class_savedmodelbuilder">Class <code>SavedModelBuilder</code>
</h2> <p>Defined in <a href="https://www.github.com/tensorflow/tensorflow/blob/r1.8/tensorflow/python/saved_model/builder_impl.py"><code>tensorflow/python/saved_model/builder_impl.py</code></a>.</p> <p>Builds the <code>SavedModel</code> protocol buffer and saves variables and assets.</p> <p>The <code>SavedModelBuilder</code> class provides functionality to build a <code>SavedModel</code> protocol buffer. Specifically, this allows multiple meta graphs to be saved as part of a single language-neutral <code>SavedModel</code>, while sharing variables and assets.</p> <p>To build a SavedModel, the first meta graph must be saved with variables. Subsequent meta graphs will simply be saved with their graph definitions. If assets need to be saved and written or copied to disk, they can be provided when the meta graph def is added. If multiple meta graph defs are associated an asset of the same name, only the first version is retained.</p> <p>Each meta graph added to the SavedModel must be annotated with tags. The tags provide a means to identify the specific meta graph to load and restore, along with the shared set of variables and assets.</p> <p>Typical usage for the <code>SavedModelBuilder</code>:</p> <pre class="prettyprint lang-python" data-language="python">...
builder = tf.saved_model.builder.SavedModelBuilder(export_dir)

with tf.Session(graph=tf.Graph()) as sess:
  ...
  builder.add_meta_graph_and_variables(sess,
                                  ["foo-tag"],
                                  signature_def_map=foo_signatures,
                                  assets_collection=foo_assets)
...

with tf.Session(graph=tf.Graph()) as sess:
  ...
  builder.add_meta_graph(["bar-tag", "baz-tag"])
...

builder.save()
</pre> <h2 id="methods">Methods</h2> <h3 id="__init__"><code>__init__</code></h3> <pre class="prettyprint lang-python" data-language="python">__init__(export_dir)
</pre> <p>Initialize self. See help(type(self)) for accurate signature.</p> <h3 id="add_meta_graph"><code>add_meta_graph</code></h3> <pre class="prettyprint lang-python" data-language="python">add_meta_graph(
    tags,
    signature_def_map=None,
    assets_collection=None,
    legacy_init_op=None,
    clear_devices=False,
    main_op=None,
    strip_default_attrs=False
)
</pre> <p>Adds the current meta graph to the SavedModel.</p> <p>Creates a Saver in the current scope and uses the Saver to export the meta graph def. Invoking this API requires the <code>add_meta_graph_and_variables()</code> API to have been invoked before.</p> <h4 id="args">Args:</h4> <ul> <li>
<b><code>tags</code></b>: The set of tags to annotate the meta graph def with.</li> <li>
<b><code>signature_def_map</code></b>: The map of signature defs to be added to the meta graph def.</li> <li>
<b><code>assets_collection</code></b>: Assets collection to be saved with SavedModel. Note that this collection should be a subset of the assets saved as part of the first meta graph in the SavedModel.</li> <li>
<b><code>legacy_init_op</code></b>: Legacy support for op or group of ops to execute after the restore op upon a load.</li> <li>
<b><code>clear_devices</code></b>: Set to true if the device info on the default graph should be cleared.</li> <li>
<b><code>main_op</code></b>: Op or group of ops to execute when the graph is loaded. Note that when the main_op is specified it is run after the restore op at load-time.</li> <li>
<b><code>strip_default_attrs</code></b>: Boolean. If <code>True</code>, default-valued attributes will be removed from the NodeDefs. For a detailed guide, see <a href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/saved_model/README.md#stripping-default-valued-attributes">Stripping Default-Valued Attributes</a>.</li> </ul> <h4 id="raises">Raises:</h4> <ul> <li>
<b><code>AssertionError</code></b>: If the variables for the SavedModel have not been saved yet, or if the graph already contains one or more legacy init ops.</li> </ul> <h3 id="add_meta_graph_and_variables"><code>add_meta_graph_and_variables</code></h3> <pre class="prettyprint lang-python" data-language="python">add_meta_graph_and_variables(
    sess,
    tags,
    signature_def_map=None,
    assets_collection=None,
    legacy_init_op=None,
    clear_devices=False,
    main_op=None,
    strip_default_attrs=False
)
</pre> <p>Adds the current meta graph to the SavedModel and saves variables.</p> <p>Creates a Saver to save the variables from the provided session. Exports the corresponding meta graph def. This function assumes that the variables to be saved have been initialized. For a given <code>SavedModelBuilder</code>, this API must be called exactly once and for the first meta graph to save. For subsequent meta graph defs to be added, the <code>add_meta_graph()</code> API must be used.</p> <h4 id="args_1">Args:</h4> <ul> <li>
<b><code>sess</code></b>: The TensorFlow session from which to save the meta graph and variables.</li> <li>
<b><code>tags</code></b>: The set of tags with which to save the meta graph.</li> <li>
<b><code>signature_def_map</code></b>: The map of signature def map to add to the meta graph def.</li> <li>
<b><code>assets_collection</code></b>: Assets collection to be saved with SavedModel.</li> <li>
<b><code>legacy_init_op</code></b>: Legacy support for op or group of ops to execute after the restore op upon a load.</li> <li>
<b><code>clear_devices</code></b>: Set to true if the device info on the default graph should be cleared.</li> <li>
<b><code>main_op</code></b>: Op or group of ops to execute when the graph is loaded. Note that when the main_op is specified it is run after the restore op at load-time.</li> <li>
<b><code>strip_default_attrs</code></b>: Boolean. If <code>True</code>, default-valued attributes will be removed from the NodeDefs. For a detailed guide, see <a href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/saved_model/README.md#stripping-default-valued-attributes">Stripping Default-Valued Attributes</a>.</li> </ul> <h3 id="save"><code>save</code></h3> <pre class="prettyprint lang-python" data-language="python">save(as_text=False)
</pre> <p>Writes a <code>SavedModel</code> protocol buffer to disk.</p> <p>The function writes the SavedModel protocol buffer to the export directory in serialized format.</p> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code>as_text</code></b>: Writes the SavedModel protocol buffer in text format to disk.</li> </ul> <h4 id="returns">Returns:</h4> <p>The path to which the SavedModel protocol buffer was written.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2018 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/saved_model/builder/SavedModelBuilder" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/saved_model/builder/SavedModelBuilder</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
