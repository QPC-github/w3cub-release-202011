
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>contrib.tpu.TPUEstimatorSpec - TensorFlow Python - W3cubDocs</title>
  
  <meta name="description" content=" Defined in tensorflow&#47;contrib&#47;tpu&#47;python&#47;tpu&#47;tpu_estimator.py. ">
  <meta name="keywords" content="tf, contrib, tpu, tpuestimatorspec, tensorflow, python, tensorflow~python">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tensorflow~python/tf/contrib/tpu/tpuestimatorspec.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/tensorflow~python.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~python/" class="_nav-link" title="" style="margin-left:0;">TensorFlow Python</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tensorflow">
				
				
<h1 itemprop="name" class="devsite-page-title"> tf.contrib.tpu.TPUEstimatorSpec </h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.contrib.tpu.TPUEstimatorSpec"> <meta itemprop="path" content="r1.8"> <meta itemprop="property" content="eval_metrics"> <meta itemprop="property" content="export_outputs"> <meta itemprop="property" content="host_call"> <meta itemprop="property" content="loss"> <meta itemprop="property" content="mode"> <meta itemprop="property" content="predictions"> <meta itemprop="property" content="scaffold_fn"> <meta itemprop="property" content="train_op"> <meta itemprop="property" content="__new__"> <meta itemprop="property" content="as_estimator_spec"> </div> <h2 id="class_tpuestimatorspec">Class <code>TPUEstimatorSpec</code>
</h2> <p>Defined in <a href="https://www.github.com/tensorflow/tensorflow/blob/r1.8/tensorflow/contrib/tpu/python/tpu/tpu_estimator.py"><code>tensorflow/contrib/tpu/python/tpu/tpu_estimator.py</code></a>.</p> <p>Ops and objects returned from a <code>model_fn</code> and passed to <code>TPUEstimator</code>.</p> <p>See <code>EstimatorSpec</code> for <code>mode</code>, 'predictions, 'loss', 'train_op', and 'export_outputs`.</p> <p>For evaluation, <code>eval_metrics</code>is a tuple of <code>metric_fn</code> and <code>tensors</code>, where <code>metric_fn</code> runs on CPU to generate metrics and <code>tensors</code> represents the <code>Tensor</code>s transferred from TPU system to CPU host and passed to <code>metric_fn</code>. To be precise, TPU evaluation expects a slightly different signature from the <a href="../../estimator/estimator"><code>tf.estimator.Estimator</code></a>. While <code>EstimatorSpec.eval_metric_ops</code> expects a dict, <code>TPUEstimatorSpec.eval_metrics</code> is a tuple of <code>metric_fn</code> and <code>tensors</code>. The <code>tensors</code> could be a list of <code>Tensor</code>s or dict of names to <code>Tensor</code>s. The <code>tensors</code> usually specify the model logits, which are transferred back from TPU system to CPU host. All tensors must have be batch-major, i.e., the batch size is the first dimension. Once all tensors are available at CPU host from all shards, they are concatenated (on CPU) and passed as positional arguments to the <code>metric_fn</code> if <code>tensors</code> is list or keyword arguments if <code>tensors</code> is dict. <code>metric_fn</code> takes the <code>tensors</code> and returns a dict from metric string name to the result of calling a metric function, namely a <code>(metric_tensor, update_op)</code> tuple. See <code>TPUEstimator</code> for MNIST example how to specify the <code>eval_metrics</code>.</p> <p><code>scaffold_fn</code> is a function running on CPU to generate the <code>Scaffold</code>. This function should not capture any Tensors in <code>model_fn</code>.</p> <p><code>host_call</code> is a tuple of a <code>function</code> and a list or dictionary of <code>tensors</code> to pass to that function and returns a list of Tensors. <code>host_call</code> currently works for train() and evaluate(). The Tensors returned by the function is executed on the CPU on every step, so there is communication overhead when sending tensors from TPU to CPU. To reduce the overhead, try reducing the size of the tensors. The <code>tensors</code> are concatenated along their major (batch) dimension, and so must be &gt;= rank 1. The <code>host_call</code> is useful for writing summaries with <a href="../summary/create_file_writer"><code>tf.contrib.summary.create_file_writer</code></a>.</p> <h2 id="properties">Properties</h2> <h3 id="eval_metrics"><code>eval_metrics</code></h3> <p>Alias for field number 4</p> <h3 id="export_outputs"><code>export_outputs</code></h3> <p>Alias for field number 5</p> <h3 id="host_call"><code>host_call</code></h3> <p>Alias for field number 7</p> <h3 id="loss"><code>loss</code></h3> <p>Alias for field number 2</p> <h3 id="mode"><code>mode</code></h3> <p>Alias for field number 0</p> <h3 id="predictions"><code>predictions</code></h3> <p>Alias for field number 1</p> <h3 id="scaffold_fn"><code>scaffold_fn</code></h3> <p>Alias for field number 6</p> <h3 id="train_op"><code>train_op</code></h3> <p>Alias for field number 3</p> <h2 id="methods">Methods</h2> <h3 id="__new__"><code>__new__</code></h3> <pre class="prettyprint lang-python" data-language="python">@staticmethod
__new__(
    cls,
    mode,
    predictions=None,
    loss=None,
    train_op=None,
    eval_metrics=None,
    export_outputs=None,
    scaffold_fn=None,
    host_call=None
)
</pre> <p>Creates a validated <code>TPUEstimatorSpec</code> instance.</p> <h3 id="as_estimator_spec"><code>as_estimator_spec</code></h3> <pre class="prettyprint lang-python" data-language="python">as_estimator_spec()
</pre> <p>Creates an equivalent <code>EstimatorSpec</code> used by CPU train/eval.</p>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2018 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/contrib/tpu/TPUEstimatorSpec" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/contrib/tpu/TPUEstimatorSpec</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
