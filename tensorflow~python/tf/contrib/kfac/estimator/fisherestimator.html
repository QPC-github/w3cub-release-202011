
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>contrib.kfac.estimator.FisherEstimator - TensorFlow Python - W3cubDocs</title>
  
  <meta name="description" content=" Defined in tensorflow&#47;contrib&#47;kfac&#47;python&#47;ops&#47;estimator.py. ">
  <meta name="keywords" content="tf, contrib, kfac, estimator, fisherestimator, tensorflow, python, tensorflow~python">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tensorflow~python/tf/contrib/kfac/estimator/fisherestimator.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/tensorflow~python.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~python/" class="_nav-link" title="" style="margin-left:0;">TensorFlow Python</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tensorflow">
				
				
<h1 itemprop="name" class="devsite-page-title"> tf.contrib.kfac.estimator.FisherEstimator </h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.contrib.kfac.estimator.FisherEstimator"> <meta itemprop="path" content="r1.8"> <meta itemprop="property" content="blocks"> <meta itemprop="property" content="damping"> <meta itemprop="property" content="factors"> <meta itemprop="property" content="name"> <meta itemprop="property" content="variables"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="create_ops_and_vars_thunks"> <meta itemprop="property" content="made_vars"> <meta itemprop="property" content="make_ops_and_vars"> <meta itemprop="property" content="make_vars_and_create_op_thunks"> <meta itemprop="property" content="multiply"> <meta itemprop="property" content="multiply_inverse"> <meta itemprop="property" content="multiply_matpower"> </div> <h2 id="class_fisherestimator">Class <code>FisherEstimator</code>
</h2> <p>Defined in <a href="https://www.github.com/tensorflow/tensorflow/blob/r1.8/tensorflow/contrib/kfac/python/ops/estimator.py"><code>tensorflow/contrib/kfac/python/ops/estimator.py</code></a>.</p> <p>Fisher estimator class supporting various approximations of the Fisher.</p> <p>This is an abstract base class which does not implement a strategy for placing covariance variables, covariance update ops and inverse update ops. The placement strategies are implemented in <code>placement.py</code>. See <code>FisherEstimatorRoundRobin</code> for example of a concrete subclass with a round-robin placement strategy.</p> <h2 id="properties">Properties</h2> <h3 id="blocks"><code>blocks</code></h3> <p>All registered FisherBlocks.</p> <h3 id="damping"><code>damping</code></h3> <h3 id="factors"><code>factors</code></h3> <p>All registered FisherFactors.</p> <h3 id="name"><code>name</code></h3> <h3 id="variables"><code>variables</code></h3> <h2 id="methods">Methods</h2> <h3 id="__init__"><code>__init__</code></h3> <pre class="prettyprint lang-python" data-language="python">__init__(
    variables,
    cov_ema_decay,
    damping,
    layer_collection,
    exps=(-1,),
    estimation_mode='gradients',
    colocate_gradients_with_ops=True,
    name='FisherEstimator'
)
</pre> <p>Create a FisherEstimator object.</p> <h4 id="args">Args:</h4> <ul> <li>
<b><code>variables</code></b>: A <code>list</code> of variables or <code>callable</code> which returns the variables for which to estimate the Fisher. This must match the variables registered in layer_collection (if it is not None).</li> <li>
<b><code>cov_ema_decay</code></b>: The decay factor used when calculating the covariance estimate moving averages.</li> <li>
<b><code>damping</code></b>: float. The damping factor used to stabilize training due to errors in the local approximation with the Fisher information matrix, and to regularize the update direction by making it closer to the gradient. (Higher damping means the update looks more like a standard gradient update - see Tikhonov regularization.)</li> <li>
<b><code>layer_collection</code></b>: The layer collection object, which holds the fisher blocks, kronecker factors, and losses associated with the graph.</li> <li>
<b><code>exps</code></b>: List of floats or ints. These represent the different matrix powers of the approximate Fisher that the FisherEstimator will be able to multiply vectors by. If the user asks for a matrix power other one of these (or 1, which is always supported), there will be a failure. (Default: (-1,))</li> <li>
<b><code>estimation_mode</code></b>: The type of estimator to use for the Fishers. Can be 'gradients', 'empirical', 'curvature_prop', or 'exact'. (Default: 'gradients'). 'gradients' is the basic estimation approach from the original K-FAC paper. 'empirical' computes the 'empirical' Fisher information matrix (which uses the data's distribution for the targets, as opposed to the true Fisher which uses the model's distribution) and requires that each registered loss have specified targets. 'curvature_propagation' is a method which estimates the Fisher using self-products of random 1/-1 vectors times "half-factors" of the Fisher, as described here: https://arxiv.org/abs/1206.6464 . Finally, 'exact' is the obvious generalization of Curvature Propagation to compute the exact Fisher (modulo any additional diagonal or Kronecker approximations) by looping over one-hot vectors for each coordinate of the output instead of using 1/-1 vectors. It is more expensive to compute than the other three options by a factor equal to the output dimension, roughly speaking.</li> <li>
<b><code>colocate_gradients_with_ops</code></b>: Whether we should request gradients be colocated with their respective ops. (Default: True)</li> <li>
<b><code>name</code></b>: A string. A name given to this estimator, which is added to the variable scope when constructing variables and ops. (Default: "FisherEstimator")</li> </ul> <h4 id="raises">Raises:</h4> <ul> <li>
<b><code>ValueError</code></b>: If no losses have been registered with layer_collection.</li> </ul> <h3 id="create_ops_and_vars_thunks"><code>create_ops_and_vars_thunks</code></h3> <pre class="prettyprint lang-python" data-language="python">create_ops_and_vars_thunks(scope=None)
</pre> <p>Create thunks that make the ops and vars on demand.</p> <p>This function returns 4 lists of thunks: cov_variable_thunks, cov_update_thunks, inv_variable_thunks, and inv_update_thunks.</p> <p>The length of each list is the number of factors and the i-th element of each list corresponds to the i-th factor (given by the "factors" property).</p> <p>Note that the execution of these thunks must happen in a certain partial order. The i-th element of cov_variable_thunks must execute before the i-th element of cov_update_thunks (and also the i-th element of inv_update_thunks). Similarly, the i-th element of inv_variable_thunks must execute before the i-th element of inv_update_thunks.</p> <p>TL;DR (oversimplified): Execute the thunks according to the order that they are returned.</p> <h4 id="args_1">Args:</h4> <ul> <li>
<b><code>scope</code></b>: A string or None. If None it will be set to the name of this estimator (given by the name property). All thunks will execute inside of a variable scope of the given name. (Default: None)</li> </ul> <h4 id="returns">Returns:</h4> <ul> <li>
<b><code>cov_variable_thunks</code></b>: A list of thunks that make the cov variables.</li> <li>
<b><code>cov_update_thunks</code></b>: A list of thunks that make the cov update ops.</li> <li>
<b><code>inv_variable_thunks</code></b>: A list of thunks that make the inv variables.</li> <li>
<b><code>inv_update_thunks</code></b>: A list of thunks that make the inv update ops.</li> </ul> <h3 id="made_vars"><code>made_vars</code></h3> <pre class="prettyprint lang-python" data-language="python">made_vars()
</pre> <h3 id="make_ops_and_vars"><code>make_ops_and_vars</code></h3> <pre class="prettyprint lang-python" data-language="python">make_ops_and_vars(scope=None)
</pre> <p>Make ops and vars with a specific placement strategy.</p> <p>For each factor, all of that factor's cov variables and their associated update ops will be placed on a particular device. For example in case of round robin placement a new device is chosen for each factor by cycling through list of devices in the cov_devices argument. If cov_devices is None then no explicit device placement occurs.</p> <p>An analogous strategy is followed for inverse update ops, with the list of devices being given by the inv_devices argument.</p> <p>Inverse variables on the other hand are not placed on any specific device (they will just use the current the device placement context, whatever that happens to be). The idea is that the inverse variable belong where they will be accessed most often, which is the device that actually applies the preconditioner to the gradient. The user will be responsible for setting the device context for this.</p> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code>scope</code></b>: A string or None. If None it will be set to the name of this estimator (given by the name property). All variables will be created, and all ops will execute, inside of a variable scope of the given name. (Default: None)</li> </ul> <h4 id="returns_1">Returns:</h4> <ul> <li>
<b><code>cov_update_ops</code></b>: List of ops that compute the cov updates. Corresponds one-to-one with the list of factors given by the "factors" property.</li> <li>
<b><code>cov_update_op</code></b>: cov_update_ops grouped into a single op.</li> <li>
<b><code>inv_update_ops</code></b>: List of ops that compute the inv updates. Corresponds one-to-one with the list of factors given by the "factors" property.</li> <li>
<b><code>inv_update_op</code></b>: inv_update_ops grouped into a single op.</li> <li>
<b><code>cov_update_thunks</code></b>: Thunks that make the ops in cov_update_ops.</li> <li>
<b><code>inv_update_thunks</code></b>: Thunks that make the ops in inv_update_ops.</li> </ul> <h3 id="make_vars_and_create_op_thunks"><code>make_vars_and_create_op_thunks</code></h3> <pre class="prettyprint lang-python" data-language="python">make_vars_and_create_op_thunks(scope=None)
</pre> <p>Make vars and create op thunks with a specific placement strategy.</p> <p>For each factor, all of that factor's cov variables and their associated update ops will be placed on a particular device. A new device is chosen for each factor by cycling through list of devices in the cov_devices argument. If cov_devices is None then no explicit device placement occurs.</p> <p>An analogous strategy is followed for inverse update ops, with the list of devices being given by the inv_devices argument.</p> <p>Inverse variables on the other hand are not placed on any specific device (they will just use the current the device placement context, whatever that happens to be). The idea is that the inverse variable belong where they will be accessed most often, which is the device that actually applies the preconditioner to the gradient. The user will be responsible for setting the device context for this.</p> <h4 id="args_3">Args:</h4> <ul> <li>
<b><code>scope</code></b>: A string or None. If None it will be set to the name of this estimator (given by the name property). All variables will be created, and all thunks will execute, inside of a variable scope of the given name. (Default: None)</li> </ul> <h4 id="returns_2">Returns:</h4> <ul> <li>
<b><code>cov_update_thunks</code></b>: List of cov update thunks. Corresponds one-to-one with the list of factors given by the "factors" property.</li> <li>
<b><code>inv_update_thunks</code></b>: List of inv update thunks. Corresponds one-to-one with the list of factors given by the "factors" property.</li> </ul> <h3 id="multiply"><code>multiply</code></h3> <pre class="prettyprint lang-python" data-language="python">multiply(vecs_and_vars)
</pre> <p>Multiplies the vectors by the corresponding (damped) blocks.</p> <h4 id="args_4">Args:</h4> <ul> <li>
<b><code>vecs_and_vars</code></b>: List of (vector, variable) pairs.</li> </ul> <h4 id="returns_3">Returns:</h4> <p>A list of (transformed vector, var) pairs in the same order as vecs_and_vars.</p> <h3 id="multiply_inverse"><code>multiply_inverse</code></h3> <pre class="prettyprint lang-python" data-language="python">multiply_inverse(vecs_and_vars)
</pre> <p>Multiplies the vecs by the corresponding (damped) inverses of the blocks.</p> <h4 id="args_5">Args:</h4> <ul> <li>
<b><code>vecs_and_vars</code></b>: List of (vector, variable) pairs.</li> </ul> <h4 id="returns_4">Returns:</h4> <p>A list of (transformed vector, var) pairs in the same order as vecs_and_vars.</p> <h3 id="multiply_matpower"><code>multiply_matpower</code></h3> <pre class="prettyprint lang-python" data-language="python">multiply_matpower(
    exp,
    vecs_and_vars
)
</pre> <p>Multiplies the vecs by the corresponding matrix powers of the blocks.</p> <h4 id="args_6">Args:</h4> <ul> <li>
<b><code>exp</code></b>: A float representing the power to raise the blocks by before multiplying it by the vector.</li> <li>
<b><code>vecs_and_vars</code></b>: List of (vector, variable) pairs.</li> </ul> <h4 id="returns_5">Returns:</h4> <p>A list of (transformed vector, var) pairs in the same order as vecs_and_vars.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2018 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/contrib/kfac/estimator/FisherEstimator" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/contrib/kfac/estimator/FisherEstimator</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
