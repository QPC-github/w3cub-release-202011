
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>contrib.learn.Experiment - TensorFlow Python - W3cubDocs</title>
  
  <meta name="description" content=" Defined in tensorflow&#47;contrib&#47;learn&#47;python&#47;learn&#47;experiment.py. ">
  <meta name="keywords" content="tf, contrib, learn, experiment, tensorflow, python, tensorflow~python">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tensorflow~python/tf/contrib/learn/experiment.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/tensorflow~python.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~python/" class="_nav-link" title="" style="margin-left:0;">TensorFlow Python</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tensorflow">
				
				
<h1 itemprop="name" class="devsite-page-title"> tf.contrib.learn.Experiment </h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.contrib.learn.Experiment"> <meta itemprop="path" content="r1.8"> <meta itemprop="property" content="estimator"> <meta itemprop="property" content="eval_metrics"> <meta itemprop="property" content="eval_steps"> <meta itemprop="property" content="train_steps"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="continuous_eval"> <meta itemprop="property" content="continuous_eval_on_train_data"> <meta itemprop="property" content="continuous_train_and_eval"> <meta itemprop="property" content="evaluate"> <meta itemprop="property" content="extend_train_hooks"> <meta itemprop="property" content="local_run"> <meta itemprop="property" content="reset_export_strategies"> <meta itemprop="property" content="run_std_server"> <meta itemprop="property" content="test"> <meta itemprop="property" content="train"> <meta itemprop="property" content="train_and_evaluate"> </div> <h2 id="class_experiment">Class <code>Experiment</code>
</h2> <p>Defined in <a href="https://www.github.com/tensorflow/tensorflow/blob/r1.8/tensorflow/contrib/learn/python/learn/experiment.py"><code>tensorflow/contrib/learn/python/learn/experiment.py</code></a>.</p> <p>See the guide: <a href="https://www.tensorflow.org/api_guides/python/contrib.learn#Distributed_training_utilities">Learn (contrib) &gt; Distributed training utilities</a></p> <p>Experiment is a class containing all information needed to train a model.</p> <p>THIS CLASS IS DEPRECATED. See <a href="https://www.github.com/tensorflow/tensorflow/blob/r1.8/tensorflow/contrib/learn/README.md">contrib/learn/README.md</a> for general migration instructions.</p> <p>After an experiment is created (by passing an Estimator and inputs for training and evaluation), an Experiment instance knows how to invoke training and eval loops in a sensible fashion for distributed training.</p> <h2 id="properties">Properties</h2> <h3 id="estimator"><code>estimator</code></h3> <h3 id="eval_metrics"><code>eval_metrics</code></h3> <h3 id="eval_steps"><code>eval_steps</code></h3> <h3 id="train_steps"><code>train_steps</code></h3> <h2 id="methods">Methods</h2> <h3 id="__init__"><code>__init__</code></h3> <pre class="prettyprint lang-python" data-language="python">__init__(
    estimator,
    train_input_fn,
    eval_input_fn,
    eval_metrics=None,
    train_steps=None,
    eval_steps=100,
    train_monitors=None,
    eval_hooks=None,
    local_eval_frequency=None,
    eval_delay_secs=120,
    continuous_eval_throttle_secs=60,
    min_eval_frequency=None,
    delay_workers_by_global_step=False,
    export_strategies=None,
    train_steps_per_iteration=None,
    checkpoint_and_export=False,
    saving_listeners=None,
    check_interval_secs=5
)
</pre> <p>Constructor for <code>Experiment</code>. (deprecated)</p> <p>THIS FUNCTION IS DEPRECATED. It will be removed in a future version. Instructions for updating: Please switch to tf.estimator.train_and_evaluate. You will also have to convert to a tf.estimator.Estimator.</p> <p>Creates an Experiment instance. None of the functions passed to this constructor are executed at construction time. They are stored and used when a method is executed which requires it.</p> <h4 id="args">Args:</h4> <ul> <li>
<b><code>estimator</code></b>: Object implementing Estimator interface, which could be a combination of <a href="trainable"><code>tf.contrib.learn.Trainable</code></a> and <a href="evaluable"><code>tf.contrib.learn.Evaluable</code></a> (deprecated), or <a href="../../estimator/estimator"><code>tf.estimator.Estimator</code></a>.</li> <li>
<b><code>train_input_fn</code></b>: function, returns features and labels for training.</li> <li>
<b><code>eval_input_fn</code></b>: function, returns features and labels for evaluation. If <code>eval_steps</code> is <code>None</code>, this should be configured only to produce for a finite number of batches (generally, 1 epoch over the evaluation data).</li> <li>
<b><code>eval_metrics</code></b>: <code>dict</code> of string, metric function. If <code>None</code>, default set is used. This should be <code>None</code> if the <code>estimator</code> is <a href="../../estimator/estimator"><code>tf.estimator.Estimator</code></a>. If metrics are provided they will be <em>appended</em> to the default set.</li> <li>
<b><code>train_steps</code></b>: Perform this many steps of training. <code>None</code>, the default, means train forever.</li> <li>
<b><code>eval_steps</code></b>: <code>evaluate</code> runs until input is exhausted (or another exception is raised), or for <code>eval_steps</code> steps, if specified.</li> <li>
<b><code>train_monitors</code></b>: A list of monitors to pass to the <code>Estimator</code>'s <code>fit</code> function.</li> <li>
<b><code>eval_hooks</code></b>: A list of <code>SessionRunHook</code> hooks to pass to the <code>Estimator</code>'s <code>evaluate</code> function.</li> <li>
<b><code>local_eval_frequency</code></b>: (applies only to local_run) Frequency of running eval in steps. If <code>None</code>, runs evaluation only at the end of training.</li> <li>
<b><code>eval_delay_secs</code></b>: Start evaluating after waiting for this many seconds.</li> <li>
<b><code>continuous_eval_throttle_secs</code></b>: Do not re-evaluate unless the last evaluation was started at least this many seconds ago for continuous_eval().</li> <li>
<b><code>min_eval_frequency</code></b>: (applies only to train_and_evaluate). the minimum number of steps between evaluations. Of course, evaluation does not occur if no new snapshot is available, hence, this is the minimum. If 0, the evaluation will only happen after training. If None, defaults to 1. To avoid checking for new checkpoints too frequent, the interval is further limited to be at least check_interval_secs between checks.</li> <li>
<b><code>delay_workers_by_global_step</code></b>: if <code>True</code> delays training workers based on global step instead of time.</li> <li>
<b><code>export_strategies</code></b>: Iterable of <code>ExportStrategy</code>s, or a single one, or <code>None</code>.</li> <li>
<b><code>train_steps_per_iteration</code></b>: (applies only to continuous_train_and_eval). Perform this many (integer) number of train steps for each training-evaluation iteration. With a small value, the model will be evaluated more frequently with more checkpoints saved. If <code>None</code>, will use a default value (which is smaller than <code>train_steps</code> if provided).</li> <li>
<b><code>checkpoint_and_export</code></b>: (applies only to train_and_evaluate). If <code>True</code>, performs intermediate model checkpoints and exports during the training process, rather than only once model training is complete. This parameter is experimental and may be changed or removed in the future. Setting this parameter leads to the following: the value of <code>min_eval_frequency</code> will be ignored, and the number of steps between evaluations and exports will instead be determined by the Estimator configuration parameters <code>save_checkpoints_secs</code> and <code>save_checkpoints_steps</code>. Also, this parameter leads to the creation of a default <code>CheckpointSaverHook</code> instead of a <code>ValidationMonitor</code>, so the provided <code>train_monitors</code> will need to be adjusted accordingly.</li> <li>
<b><code>saving_listeners</code></b>: list of <code>CheckpointSaverListener</code> objects. Used by tf.estimator.Estimator for callbacks that run immediately before or after checkpoint savings.</li> <li>
<b><code>check_interval_secs</code></b>: Minimum time between subsequent checks for a new checkpoint. This mostly applies if both min_eval_frequency and the time spent per training step is low.</li> </ul> <h4 id="raises">Raises:</h4> <ul> <li>
<b><code>ValueError</code></b>: if <code>estimator</code> does not implement Estimator interface, or if export_strategies has the wrong type.</li> </ul> <h3 id="continuous_eval"><code>continuous_eval</code></h3> <pre class="prettyprint lang-python" data-language="python">continuous_eval(
    delay_secs=None,
    throttle_delay_secs=None,
    evaluate_checkpoint_only_once=True,
    continuous_eval_predicate_fn=None,
    name='continuous'
)
</pre> <h3 id="continuous_eval_on_train_data"><code>continuous_eval_on_train_data</code></h3> <pre class="prettyprint lang-python" data-language="python">continuous_eval_on_train_data(
    delay_secs=None,
    throttle_delay_secs=None,
    continuous_eval_predicate_fn=None,
    name='continuous_on_train_data'
)
</pre> <h3 id="continuous_train_and_eval"><code>continuous_train_and_eval</code></h3> <pre class="prettyprint lang-python" data-language="python">continuous_train_and_eval(
    *args,
    **kwargs
)
</pre> <p>Interleaves training and evaluation. (experimental)</p> <p>THIS FUNCTION IS EXPERIMENTAL. It may change or be removed at any time, and without warning.</p> <p>The frequency of evaluation is controlled by the <code>train_steps_per_iteration</code> (via constructor). The model will be first trained for <code>train_steps_per_iteration</code>, and then be evaluated in turns.</p> <p>This method is intended for single machine usage.</p> <p>This differs from <code>train_and_evaluate</code> as follows:</p> <ol> <li> <p>The procedure will have train and evaluation in turns. The model will be trained for a number of steps (usually smaller than <code>train_steps</code> if provided) and then be evaluated. <code>train_and_evaluate</code> will train the model for <code>train_steps</code> (no small training iterations).</p> </li> <li> <p>Due to the different approach this schedule takes, it leads to two differences in resource control. First, the resources (e.g., memory) used by training will be released before evaluation (<code>train_and_evaluate</code> takes double resources). Second, more checkpoints will be saved as a checkpoint is generated at the end of each training iteration.</p> </li> <li> <p>As the estimator.train starts from scratch (new graph, new states for input, etc) at each iteration, it is recommended to have the <code>train_steps_per_iteration</code> larger. It is also recommended to shuffle your input.</p> </li> </ol> <h4 id="args_1">Args:</h4> <ul> <li>
<b><code>continuous_eval_predicate_fn</code></b>: A predicate function determining whether to continue eval after each iteration. A <code>predicate_fn</code> has one of the following signatures:<ul> <li>(eval_results) -&gt; boolean</li> <li>(eval_results, checkpoint_path) -&gt; boolean Where <code>eval_results</code> is the dictionary of metric evaluations and checkpoint_path is the path to the checkpoint containing the parameters on which that evaluation was based. At the beginning of evaluation, the passed <code>eval_results</code> and <code>checkpoint_path</code> will be None so it's expected that the predicate function handles that gracefully. When <code>predicate_fn</code> is not specified, continuous eval will run in an infinite loop (if <code>train_steps</code> is None). or exit once global step reaches <code>train_steps</code>.</li> </ul> </li> </ul> <h4 id="returns">Returns:</h4> <p>A tuple of the result of the <code>evaluate</code> call to the <code>Estimator</code> and the export results using the specified <code>ExportStrategy</code>.</p> <h4 id="raises_1">Raises:</h4> <ul> <li>
<b><code>ValueError</code></b>: if <code>continuous_eval_predicate_fn</code> is neither None nor callable.</li> </ul> <h3 id="evaluate"><code>evaluate</code></h3> <pre class="prettyprint lang-python" data-language="python">evaluate(
    delay_secs=None,
    name=None
)
</pre> <p>Evaluate on the evaluation data.</p> <p>Runs evaluation on the evaluation data and returns the result. Runs for <code>self._eval_steps</code> steps, or if it's <code>None</code>, then run until input is exhausted or another exception is raised. Start the evaluation after <code>delay_secs</code> seconds, or if it's <code>None</code>, defaults to using <code>self._eval_delay_secs</code> seconds.</p> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code>delay_secs</code></b>: Start evaluating after this many seconds. If <code>None</code>, defaults to using <code>self._eval_delays_secs</code>.</li> <li>
<b><code>name</code></b>: Gives the name to the evauation for the case multiple evaluation is run for the same experiment.</li> </ul> <h4 id="returns_1">Returns:</h4> <p>The result of the <code>evaluate</code> call to the <code>Estimator</code>.</p> <h3 id="extend_train_hooks"><code>extend_train_hooks</code></h3> <pre class="prettyprint lang-python" data-language="python">extend_train_hooks(additional_hooks)
</pre> <p>Extends the hooks for training.</p> <h3 id="local_run"><code>local_run</code></h3> <pre class="prettyprint lang-python" data-language="python">local_run()
</pre> <p>DEPRECATED FUNCTION</p> <p>THIS FUNCTION IS DEPRECATED. It will be removed after 2016-10-23. Instructions for updating: local_run will be renamed to train_and_evaluate and the new default behavior will be to run evaluation every time there is a new checkpoint.</p> <h3 id="reset_export_strategies"><code>reset_export_strategies</code></h3> <pre class="prettyprint lang-python" data-language="python">reset_export_strategies(new_export_strategies=None)
</pre> <p>Resets the export strategies with the <code>new_export_strategies</code>.</p> <h4 id="args_3">Args:</h4> <ul> <li>
<b><code>new_export_strategies</code></b>: A new list of <code>ExportStrategy</code>s, or a single one, or None.</li> </ul> <h4 id="returns_2">Returns:</h4> <p>The old export strategies.</p> <h3 id="run_std_server"><code>run_std_server</code></h3> <pre class="prettyprint lang-python" data-language="python">run_std_server()
</pre> <p>Starts a TensorFlow server and joins the serving thread.</p> <p>Typically used for parameter servers.</p> <h4 id="raises_2">Raises:</h4> <ul> <li>
<b><code>ValueError</code></b>: if not enough information is available in the estimator's config to create a server.</li> </ul> <h3 id="test"><code>test</code></h3> <pre class="prettyprint lang-python" data-language="python">test()
</pre> <p>Tests training, evaluating and exporting the estimator for a single step.</p> <h4 id="returns_3">Returns:</h4> <p>The result of the <code>evaluate</code> call to the <code>Estimator</code>.</p> <h3 id="train"><code>train</code></h3> <pre class="prettyprint lang-python" data-language="python">train(delay_secs=None)
</pre> <p>Fit the estimator using the training data.</p> <p>Train the estimator for <code>self._train_steps</code> steps, after waiting for <code>delay_secs</code> seconds. If <code>self._train_steps</code> is <code>None</code>, train forever.</p> <h4 id="args_4">Args:</h4> <ul> <li>
<b><code>delay_secs</code></b>: Start training after this many seconds.</li> </ul> <h4 id="returns_4">Returns:</h4> <p>The trained estimator.</p> <h3 id="train_and_evaluate"><code>train_and_evaluate</code></h3> <pre class="prettyprint lang-python" data-language="python">train_and_evaluate()
</pre> <p>Interleaves training and evaluation.</p> <p>The frequency of evaluation is controlled by the constructor arg <code>min_eval_frequency</code>. When this parameter is 0, evaluation happens only after training has completed. Note that evaluation cannot happen more frequently than checkpoints are taken. If no new snapshots are available when evaluation is supposed to occur, then evaluation doesn't happen for another <code>min_eval_frequency</code> steps (assuming a checkpoint is available at that point). Thus, settings <code>min_eval_frequency</code> to 1 means that the model will be evaluated everytime there is a new checkpoint.</p> <p>This is particular useful for a "Master" task in the cloud, whose responsibility it is to take checkpoints, evaluate those checkpoints, and write out summaries. Participating in training as the supervisor allows such a task to accomplish the first and last items, while performing evaluation allows for the second.</p> <h4 id="returns_5">Returns:</h4> <p>The result of the <code>evaluate</code> call to the <code>Estimator</code> as well as the export results using the specified <code>ExportStrategy</code>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2018 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/Experiment" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/contrib/learn/Experiment</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
