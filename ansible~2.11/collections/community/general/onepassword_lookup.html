
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>community.general.onepassword – Fetch Field Values From 1Password - Ansible 2.11 - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="community, general, onepassword, –, fetch, field, values, from, password, ansible, ansible~2.11">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.11/collections/community/general/onepassword_lookup.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9352e6910fe51dd10a2c4166dc5a7847892ebc84c0bb52d7e40dcdccbf262592790483d09e6dbfd62c689609a706227727ca9acb967a718e944c111f43ca96a0.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/ansible~2.11.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.11/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.11</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="community-general-onepassword-fetch-field-values-from-1password">community.general.onepassword – fetch field values from 1Password</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a> (version 2.0.1).</p> <p>To install it use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.onepassword</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>
<code>onepassword</code> wraps the <code>op</code> command line utility to fetch specific field values from 1Password.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the local controller node that executes this lookup.</p> <ul class="simple"> <li>
<code>op</code> 1Password command line utility. See <a class="reference external" href="https://support.1password.com/command-line/">https://support.1password.com/command-line/</a>
</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th>Configuration</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>_terms</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> </td> <td> <div>identifier(s) (UUID, name, or subdomain; case-insensitive) of item(s) to retrieve.</div> </td> </tr> <tr> <td colspan="1">  <b>field</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"password"</div> </td> <td> </td> <td> <div>field to return from each matching item (case-insensitive).</div> </td> </tr> <tr> <td colspan="1">  <b>master_password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> </td> <td> <div>The password used to unlock the specified vault.</div> <div>
<br>aliases: vault_password</div> </td> </tr> <tr> <td colspan="1">  <b>secret_key</b>  <div> <span>string</span> </div> </td> <td> </td> <td> </td> <td> <div>The secret key used when performing an initial sign in.</div> </td> </tr> <tr> <td colspan="1">  <b>section</b>  <div> <span>string</span> </div> </td> <td> </td> <td> </td> <td> <div>Item section containing the field to retrieve (case-insensitive). If absent will return first match from any section.</div> </td> </tr> <tr> <td colspan="1">  <b>subdomain</b>  <div> <span>string</span> </div> </td> <td> </td> <td> </td> <td> <div>The 1Password subdomain to authenticate against.</div> </td> </tr> <tr> <td colspan="1">  <b>username</b>  <div> <span>string</span> </div> </td> <td> </td> <td> </td> <td> <div>The username used to sign in.</div> </td> </tr> <tr> <td colspan="1">  <b>vault</b>  <div> <span>string</span> </div> </td> <td> </td> <td> </td> <td> <div>Vault containing the item to retrieve (case-insensitive). If absent will search all vaults.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>This lookup will use an existing 1Password session if one exists. If not, and you have already performed an initial sign in (meaning <code>~/.op/config exists</code>), then only the <code>master_password</code> is required. You may optionally specify <code>subdomain</code> in this scenario, otherwise the last used subdomain will be used by <code>op</code>.</li> <li>This lookup can perform an initial login by providing <code>subdomain</code>, <code>username</code>, <code>secret_key</code>, and <code>master_password</code>.</li> <li>Due to the <strong>very</strong> sensitive nature of these credentials, it is <strong>highly</strong> recommended that you only pass in the minimal credentials needed at any given time. Also, store these credentials in an Ansible Vault using a key that is equal to or greater in strength to the 1Password master password.</li> <li>This lookup stores potentially sensitive data from 1Password as Ansible facts. Facts are subject to caching if enabled, which means this data could be stored in clear text on disk or in a database.</li> <li>Tested with <code>op</code> version 0.5.3</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja"># These examples only work when already signed in to 1Password
- name: Retrieve password for KITT when already signed in to 1Password
  ansible.builtin.debug:
    var: lookup('community.general.onepassword', 'KITT')

- name: Retrieve password for Wintermute when already signed in to 1Password
  ansible.builtin.debug:
    var: lookup('community.general.onepassword', 'Tessier-Ashpool', section='Wintermute')

- name: Retrieve username for HAL when already signed in to 1Password
  ansible.builtin.debug:
    var: lookup('community.general.onepassword', 'HAL 9000', field='username', vault='Discovery')

- name: Retrieve password for HAL when not signed in to 1Password
  ansible.builtin.debug:
    var: lookup('community.general.onepassword'
                'HAL 9000'
                subdomain='Discovery'
                master_password=vault_master_password)

- name: Retrieve password for HAL when never signed in to 1Password
  ansible.builtin.debug:
    var: lookup('community.general.onepassword'
                'HAL 9000'
                subdomain='Discovery'
                master_password=vault_master_password
                username='tweety@acme.com'
                secret_key=vault_secret_key)
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this lookup:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>_raw</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>field data requested</div> <br> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Scott Buchanan (@scottsb)</li> <li>Andrew Zenk (@azenk)</li> <li>Sam Doran (@samdoran)</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.11/collections/community/general/onepassword_lookup.html" class="_attribution-link">https://docs.ansible.com/ansible/2.11/collections/community/general/onepassword_lookup.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
