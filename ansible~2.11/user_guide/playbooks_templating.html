
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Templating (Jinja2) - Ansible 2.11 - W3cubDocs</title>
  
  <meta name="description" content="Ansible uses Jinja2 templating to enable dynamic expressions and access to variables. Ansible includes a lot of specialized filters and tests for &hellip;">
  <meta name="keywords" content="templating, jinja, ansible, ansible~2.11">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.11/user_guide/playbooks_templating.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/ansible~2.11.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.11/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.11</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="playbooks-templating">Templating (Jinja2)</h1> <p id="templating-jinja2">Ansible uses Jinja2 templating to enable dynamic expressions and access to variables. Ansible includes a lot of specialized filters and tests for templating. You can use all the <a class="reference external" href="https://jinja.palletsprojects.com/en/2.11.x/templates/#builtin-filters" title="(in Jinja v2.11.x)"><span class="xref std std-ref">standard filters and tests</span></a> included in Jinja2 as well. Ansible also offers a new plugin type: <a class="reference internal" href="../plugins/lookup#lookup-plugins"><span class="std std-ref">Lookup Plugins</span></a>.</p> <p>All templating happens on the Ansible controller <strong>before</strong> the task is sent and executed on the target machine. This approach minimizes the package requirements on the target (jinja2 is only required on the controller). It also limits the amount of data Ansible passes to the target machine. Ansible parses templates on the controller and passes only the information needed for each task to the target machine, instead of passing all the data on the controller and parsing it on the target.</p>     <ul> <li class="toctree-l1">
<a class="reference internal" href="playbooks_filters">Using filters to manipulate data</a><ul> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#handling-undefined-variables">Handling undefined variables</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#defining-different-values-for-true-false-null-ternary">Defining different values for true/false/null (ternary)</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#managing-data-types">Managing data types</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#formatting-data-yaml-and-json">Formatting data: YAML and JSON</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#combining-and-selecting-data">Combining and selecting data</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#randomizing-data">Randomizing data</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#managing-list-variables">Managing list variables</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#selecting-from-sets-or-lists-set-theory">Selecting from sets or lists (set theory)</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#calculating-numbers-math">Calculating numbers (math)</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#managing-network-interactions">Managing network interactions</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#encrypting-and-checksumming-strings-and-passwords">Encrypting and checksumming strings and passwords</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#manipulating-text">Manipulating text</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#manipulating-strings">Manipulating strings</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#managing-uuids">Managing UUIDs</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#handling-dates-and-times">Handling dates and times</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_filters#getting-kubernetes-resource-names">Getting Kubernetes resource names</a></li> </ul> </li> <li class="toctree-l1">
<a class="reference internal" href="playbooks_tests">Tests</a><ul> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#test-syntax">Test syntax</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#testing-strings">Testing strings</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#vault">Vault</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#testing-truthiness">Testing truthiness</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#comparing-versions">Comparing versions</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#set-theory-tests">Set theory tests</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#testing-if-a-list-contains-a-value">Testing if a list contains a value</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#testing-if-a-list-value-is-true">Testing if a list value is True</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#testing-paths">Testing paths</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#testing-size-formats">Testing size formats</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_tests#testing-task-results">Testing task results</a></li> </ul> </li> <li class="toctree-l1">
<a class="reference internal" href="playbooks_lookups">Lookups</a><ul> <li class="toctree-l2"><a class="reference internal" href="playbooks_lookups#using-lookups-in-variables">Using lookups in variables</a></li> </ul> </li> <li class="toctree-l1">
<a class="reference internal" href="playbooks_python_version">Python3 in templates</a><ul> <li class="toctree-l2"><a class="reference internal" href="playbooks_python_version#dictionary-views">Dictionary views</a></li> <li class="toctree-l2"><a class="reference internal" href="playbooks_python_version#dict-iteritems">dict.iteritems()</a></li> </ul> </li> </ul>   <h2 id="templating-now">Get the current time</h2> <div class="versionadded" id="get-the-current-time"> <p><span class="versionmodified added">New in version 2.8.</span></p> </div> <p>The <code>now()</code> Jinja2 function retrieves a Python datetime object or a string representation for the current time.</p> <p>The <code>now()</code> function supports 2 arguments:</p> <dl class="simple"> <dt>utc</dt>
<dd>
<p>Specify <code>True</code> to get the current time in UTC. Defaults to <code>False</code>.</p> </dd> <dt>fmt</dt>
<dd>
<p>Accepts a <a class="reference external" href="https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior">strftime</a> string that returns a formatted date time string.</p> </dd> </dl> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="playbooks_intro#playbooks-intro"><span class="std std-ref">Intro to playbooks</span></a></dt>
<dd>
<p>An introduction to playbooks</p> </dd> <dt><a class="reference internal" href="playbooks_conditionals#playbooks-conditionals"><span class="std std-ref">Conditionals</span></a></dt>
<dd>
<p>Conditional statements in playbooks</p> </dd> <dt><a class="reference internal" href="playbooks_loops#playbooks-loops"><span class="std std-ref">Loops</span></a></dt>
<dd>
<p>Looping in playbooks</p> </dd> <dt><a class="reference internal" href="playbooks_reuse_roles#playbooks-reuse-roles"><span class="std std-ref">Roles</span></a></dt>
<dd>
<p>Playbook organization by roles</p> </dd> <dt><a class="reference internal" href="playbooks_best_practices#playbooks-best-practices"><span class="std std-ref">Tips and tricks</span></a></dt>
<dd>
<p>Tips and tricks for playbooks</p> </dd> <dt><a class="reference external" href="https://groups.google.com/group/ansible-devel">User Mailing List</a></dt>
<dd>
<p>Have a question? Stop by the google group!</p> </dd> <dt><a class="reference external" href="http://irc.freenode.net">irc.freenode.net</a></dt>
<dd>
<p>#ansible IRC chat channel</p> </dd> </dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.11/user_guide/playbooks_templating.html" class="_attribution-link">https://docs.ansible.com/ansible/2.11/user_guide/playbooks_templating.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
