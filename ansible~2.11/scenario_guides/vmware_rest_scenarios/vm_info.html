
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Retrieve Information From a Specific VM - Ansible 2.11 - W3cubDocs</title>
  
  <meta name="description" content=" How to collect virtual machine information ">
  <meta name="keywords" content="retrieve, information, from, specific, vm, ansible, ansible~2.11">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.11/scenario_guides/vmware_rest_scenarios/vm_info.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/ansible~2.11.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.11/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.11</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="vmware-rest-vm-info">Retrieve information from a specific VM</h1>  <ul class="simple" id="retrieve-information-from-a-specific-vm"> <li><a class="reference internal" href="#introduction" id="id8">Introduction</a></li> <li><a class="reference internal" href="#scenario-requirements" id="id9">Scenario requirements</a></li> <li>
<p><a class="reference internal" href="#how-to-collect-virtual-machine-information" id="id10">How to collect virtual machine information</a></p> <ul> <li><a class="reference internal" href="#list-the-vm" id="id11">List the VM</a></li> <li><a class="reference internal" href="#result" id="id12">Result</a></li> <li><a class="reference internal" href="#collect-the-details-about-a-specific-vm" id="id13">Collect the details about a specific VM</a></li> <li><a class="reference internal" href="#id1" id="id14">Result</a></li> <li><a class="reference internal" href="#get-the-hardware-version-of-a-specific-vm" id="id15">Get the hardware version of a specific VM</a></li> <li><a class="reference internal" href="#id2" id="id16">Result</a></li> <li><a class="reference internal" href="#list-the-scsi-adapter-s-of-a-specific-vm" id="id17">List the SCSI adapter(s) of a specific VM</a></li> <li><a class="reference internal" href="#id3" id="id18">Result</a></li> <li><a class="reference internal" href="#list-the-cdrom-drive-s-of-a-specific-vm" id="id19">List the CDROM drive(s) of a specific VM</a></li> <li><a class="reference internal" href="#id4" id="id20">Result</a></li> <li><a class="reference internal" href="#get-the-memory-information-of-the-vm" id="id21">Get the memory information of the VM</a></li> <li>
<p><a class="reference internal" href="#id5" id="id22">Result</a></p> <ul> <li><a class="reference internal" href="#get-the-storage-policy-of-the-vm" id="id23">Get the storage policy of the VM</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#id6" id="id24">Result</a></p> <ul> <li><a class="reference internal" href="#get-the-disk-information-of-the-vm" id="id25">Get the disk information of the VM</a></li> </ul> </li> <li><a class="reference internal" href="#id7" id="id26">Result</a></li> </ul> </li> </ul>   <h2 id="introduction">Introduction</h2> <p>This section shows you how to use Ansible to retrieve information about a specific virtual machine.</p>   <h2 id="scenario-requirements">Scenario requirements</h2> <p>You’ve already followed <a class="reference internal" href="create_vm#vmware-rest-create-vm"><span class="std std-ref">How to create a Virtual Machine</span></a> and you’ve got create a new VM called <code>test_vm1</code>.</p>   <h2 id="how-to-collect-virtual-machine-information">How to collect virtual machine information</h2>  <h3 id="list-the-vm">List the VM</h3> <p>In this example, we use the <code>vcenter_vm_info</code> module to collect information about our new VM.</p> <p>In this example, we start by asking for a list of VMs. We use a filter to limit the results to just the VM called <code>test_vm1</code>. So we are in a list context, with one single entry in the <code>value</code> key.</p> <pre data-language="YAML+Jinja">- name: Look up the VM called test_vm1 in the inventory
  register: search_result
  vmware.vmware_rest.vcenter_vm_info:
    filter_names:
    - test_vm1
</pre>   <h3 id="result">Result</h3> <p>As expected, we get a list. And thanks to our filter, we just get one entry.</p> <pre data-language="YAML+Jinja">{
    "value": [
        {
            "memory_size_MiB": 1024,
            "vm": "vm-1650",
            "name": "test_vm1",
            "power_state": "POWERED_OFF",
            "cpu_count": 1
        }
    ],
    "changed": false
}
</pre>   <h3 id="collect-the-details-about-a-specific-vm">Collect the details about a specific VM</h3> <p>For the next steps, we pass the ID of the VM through the <code>vm</code> parameter. This allow us to collect more details about this specific VM.</p> <pre data-language="YAML+Jinja">- name: Collect information about a specific VM
  vmware.vmware_rest.vcenter_vm_info:
    vm: '{{ search_result.value[0].vm }}'
  register: test_vm1_info
</pre>   <h3 id="id1">Result</h3> <p>The result is a structure with all the details about our VM. You will note this is actually the same information that we get when we created the VM.</p> <pre data-language="YAML+Jinja">{
    "value": {
        "instant_clone_frozen": false,
        "cdroms": [],
        "memory": {
            "size_MiB": 1024,
            "hot_add_enabled": true
        },
        "disks": [
            {
                "value": {
                    "scsi": {
                        "bus": 0,
                        "unit": 0
                    },
                    "backing": {
                        "vmdk_file": "[local] test_vm1_8/test_vm1.vmdk",
                        "type": "VMDK_FILE"
                    },
                    "label": "Hard disk 1",
                    "type": "SCSI",
                    "capacity": 17179869184
                },
                "key": "2000"
            }
        ],
        "parallel_ports": [],
        "sata_adapters": [],
        "cpu": {
            "hot_remove_enabled": false,
            "count": 1,
            "hot_add_enabled": false,
            "cores_per_socket": 1
        },
        "scsi_adapters": [
            {
                "value": {
                    "scsi": {
                        "bus": 0,
                        "unit": 7
                    },
                    "label": "SCSI controller 0",
                    "sharing": "NONE",
                    "type": "PVSCSI"
                },
                "key": "1000"
            }
        ],
        "power_state": "POWERED_OFF",
        "floppies": [],
        "identity": {
            "name": "test_vm1",
            "instance_uuid": "5033c296-6954-64df-faca-d001de53763d",
            "bios_uuid": "42330d17-e603-d925-fa4b-18827dbc1409"
        },
        "nvme_adapters": [],
        "name": "test_vm1",
        "nics": [],
        "boot": {
            "delay": 0,
            "retry_delay": 10000,
            "enter_setup_mode": false,
            "type": "BIOS",
            "retry": false
        },
        "serial_ports": [],
        "boot_devices": [],
        "guest_OS": "DEBIAN_8_64",
        "hardware": {
            "upgrade_policy": "NEVER",
            "upgrade_status": "NONE",
            "version": "VMX_11"
        }
    },
    "id": "vm-1650",
    "changed": false
}
</pre>   <h3 id="get-the-hardware-version-of-a-specific-vm">Get the hardware version of a specific VM</h3> <p>We can also use all the <code>vcenter_vm_*_info</code> modules to retrieve a smaller amount of information. Here we use <code>vcenter_vm_hardware_info</code> to know the hardware version of the VM.</p> <pre data-language="YAML+Jinja">- name: Collect the hardware information
  vmware.vmware_rest.vcenter_vm_hardware_info:
    vm: '{{ search_result.value[0].vm }}'
  register: my_vm1_hardware_info
</pre>   <h3 id="id2">Result</h3> <pre data-language="YAML+Jinja">{
    "value": {
        "upgrade_policy": "NEVER",
        "upgrade_status": "NONE",
        "version": "VMX_11"
    },
    "changed": false
}
</pre>   <h3 id="list-the-scsi-adapter-s-of-a-specific-vm">List the SCSI adapter(s) of a specific VM</h3> <p>Here for instance, we list the SCSI adapter(s) of the VM:</p> <pre data-language="YAML+Jinja">- name: List the SCSI adapter of a given VM
  vmware.vmware_rest.vcenter_vm_hardware_adapter_scsi_info:
    vm: '{{ test_vm1_info.id }}'
  register: _result
</pre> <p>You can do the same for the SATA controllers with <code>vcenter_vm_adapter_sata_info</code>.</p>   <h3 id="id3">Result</h3> <pre data-language="YAML+Jinja">{
    "value": [
        {
            "scsi": {
                "bus": 0,
                "unit": 7
            },
            "label": "SCSI controller 0",
            "type": "PVSCSI",
            "sharing": "NONE"
        }
    ],
    "changed": false
}
</pre>   <h3 id="list-the-cdrom-drive-s-of-a-specific-vm">List the CDROM drive(s) of a specific VM</h3> <p>And we list its CDROM drives.</p> <pre data-language="YAML+Jinja">- name: List the cdrom devices on the guest
  vmware.vmware_rest.vcenter_vm_hardware_cdrom_info:
    vm: '{{ test_vm1_info.id }}'
  register: _result
</pre>   <h3 id="id4">Result</h3> <pre data-language="YAML+Jinja">{
    "value": [],
    "changed": false
}
</pre>   <h3 id="get-the-memory-information-of-the-vm">Get the memory information of the VM</h3> <p>Here we collect the memory information of the VM:</p> <pre data-language="YAML+Jinja">- name: Retrieve the memory information from the VM
  vmware.vmware_rest.vcenter_vm_hardware_memory_info:
    vm: '{{ test_vm1_info.id }}'
  register: _result
</pre>   <h3 id="id5">Result</h3> <pre data-language="YAML+Jinja">{
    "value": {
        "size_MiB": 1024,
        "hot_add_enabled": true
    },
    "changed": false
}
</pre>  <h4 id="get-the-storage-policy-of-the-vm">Get the storage policy of the VM</h4> <p>We use the <code>vcenter_vm_storage_policy_info</code> module for that:</p> <pre data-language="YAML+Jinja">- name: Get VM storage policy
  vmware.vmware_rest.vcenter_vm_storage_policy_info:
    vm: '{{ test_vm1_info.id }}'
  register: _result
</pre>    <h3 id="id6">Result</h3> <pre data-language="YAML+Jinja">{
    "value": {
        "disks": []
    },
    "changed": false
}
</pre>  <h4 id="get-the-disk-information-of-the-vm">Get the disk information of the VM</h4> <p>We use the <code>vcenter_vm_hardware_disk_info</code> for this operation:</p> <pre data-language="YAML+Jinja">- name: Retrieve the disk information from the VM
  vmware.vmware_rest.vcenter_vm_hardware_disk_info:
    vm: '{{ test_vm1_info.id }}'
  register: _result
</pre>    <h3 id="id7">Result</h3> <pre data-language="YAML+Jinja">{
    "value": [
        {
            "scsi": {
                "bus": 0,
                "unit": 0
            },
            "backing": {
                "vmdk_file": "[local] test_vm1_8/test_vm1.vmdk",
                "type": "VMDK_FILE"
            },
            "label": "Hard disk 1",
            "type": "SCSI",
            "capacity": 17179869184
        }
    ],
    "changed": false
}
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.11/scenario_guides/vmware_rest_scenarios/vm_info.html" class="_attribution-link">https://docs.ansible.com/ansible/2.11/scenario_guides/vmware_rest_scenarios/vm_info.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
