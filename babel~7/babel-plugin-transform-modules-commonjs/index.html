
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>&#64;babel&#47;plugin-transform-modules-commonjs - Babel 7 - W3cubDocs</title>
  
  <meta name="description" content="This plugin transforms ECMAScript modules to CommonJS. Note that only the syntax of import&#47;export statements (import &#34;.&#47;mod.js&#34;) and &hellip;">
  <meta name="keywords" content="babel, plugin-transform-modules-commonjs, babel~7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/babel~7/babel-plugin-transform-modules-commonjs/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/babel~7.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/babel~7/" class="_nav-link" title="" style="margin-left:0;">Babel 7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<div class="navPusher"><div class="docMainWrapper wrapper">
<div class="container mainContainer docsContainer"><div class="wrapper"><div class="post">
<header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">@babel/plugin-transform-modules-commonjs</h1></header><article><div><span><p>This plugin transforms ECMAScript modules to <a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS</a>. Note that only the <em>syntax</em> of import/export statements (<code>import "./mod.js"</code>) and import expressions (<code>import('./mod.js')</code>) is transformed, as Babel is unaware of different resolution algorithms between implementations of ECMAScript modules and CommonJS.</p> <h2>
Example</h2> <p><strong>In</strong></p> <pre><code class="hljs css language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-number">42</span>;
</code></pre> <p><strong>Out</strong></p> <pre><code class="hljs css language-javascript"><span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
});

exports.default = <span class="hljs-number">42</span>;
</code></pre> <h2>
Installation</h2> <pre><code class="hljs css language-sh">npm install --save-dev @babel/plugin-transform-modules-commonjs
</code></pre> <h2>
Usage</h2> <h3>
With a configuration file (Recommended)</h3> <pre><code class="hljs css language-js"><span class="hljs-comment">// without options</span>
{
  <span class="hljs-string">"plugins"</span>: [<span class="hljs-string">"@babel/plugin-transform-modules-commonjs"</span>]
}

<span class="hljs-comment">// with options</span>
{
  <span class="hljs-string">"plugins"</span>: [
    [<span class="hljs-string">"@babel/plugin-transform-modules-commonjs"</span>, {
      <span class="hljs-string">"allowTopLevelThis"</span>: <span class="hljs-literal">true</span>
    }]
  ]
}
</code></pre> <h3>
Via CLI</h3> <pre><code class="hljs css language-sh">babel --plugins @babel/plugin-transform-modules-commonjs script.js
</code></pre> <h3>
Via Node API</h3> <pre><code class="hljs css language-javascript"><span class="hljs-built_in">require</span>(<span class="hljs-string">"@babel/core"</span>).transform(<span class="hljs-string">"code"</span>, {
  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">"@babel/plugin-transform-modules-commonjs"</span>]
});
</code></pre> <h2>
Options</h2> <h3>
<code>loose</code>
</h3> <p><code>boolean</code>, defaults to <code>false</code>.</p> <p>By default, when using exports with babel a non-enumerable <code>__esModule</code> property is exported.</p> <pre><code class="hljs css language-javascript"><span class="hljs-keyword">var</span> foo = exports.foo = <span class="hljs-number">5</span>;

<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
});
</code></pre> <p>In environments that don't support this you can enable loose mode on <code>@babel/plugin-transform-modules-commonjs</code> and instead of using <code>Object.defineProperty</code> an assignment will be used instead.</p> <pre><code class="hljs css language-javascript"><span class="hljs-keyword">var</span> foo = exports.foo = <span class="hljs-number">5</span>;
exports.__esModule = <span class="hljs-literal">true</span>;
</code></pre> <h3>
<code>strict</code>
</h3> <p><code>boolean</code>, defaults to <code>false</code></p> <p>By default, when using exports with babel a non-enumerable <code>__esModule</code> property is exported. In some cases this property is used to determine if the import <em>is</em> the default export or if it <em>contains</em> the default export.</p> <pre><code class="hljs css language-javascript"><span class="hljs-keyword">var</span> foo = exports.foo = <span class="hljs-number">5</span>;

<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
});
</code></pre> <p>In order to prevent the <code>__esModule</code> property from being exported, you can set the <code>strict</code> option to <code>true</code>.</p> <h3>
<code>noInterop</code>
</h3> <p><code>boolean</code>, defaults to <code>false</code></p> <p>By default, when using exports with babel a non-enumerable <code>__esModule</code> property is exported. This property is then used to determine if the import <em>is</em> the default export or if it <em>contains</em> the default export.</p> <pre><code class="hljs css language-javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-keyword">var</span> _foo = _interopRequireDefault(<span class="hljs-built_in">require</span>(<span class="hljs-string">"foo"</span>));

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_interopRequireDefault</span>(<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">return</span> obj &amp;&amp; obj.__esModule ? obj : { <span class="hljs-attr">default</span>: obj };
}
</code></pre> <p>In cases where the auto-unwrapping of <code>default</code> is not needed, you can set the <code>noInterop</code> option to <code>true</code> to avoid the usage of the <code>interopRequireDefault</code> helper (shown in inline form above).</p> <h3>
<code>lazy</code>
</h3> <p><code>boolean</code>, <code>Array&lt;string&gt;</code>, or <code>(string) =&gt; boolean</code>, defaults to <code>false</code></p> <p>Changes Babel's compiled <code>import</code> statements to be lazily evaluated when their imported bindings are used for the first time.</p> <p>This can improve initial load time of your module because evaluating dependencies up front is sometimes entirely un-necessary. This is especially the case when implementing a library module.</p> <p>The value of <code>lazy</code> has a few possible effects:</p> <ul> <li><p><code>false</code> - No lazy initialization of any imported module.</p></li> <li>
<p><code>true</code> - Do not lazy-initialize local <code>./foo</code> imports, but lazy-init <code>foo</code> dependencies.</p> <p>Local paths are much more likely to have circular dependencies, which may break if loaded lazily, so they are not lazy by default, whereas dependencies between independent modules are rarely cyclical.</p>
</li> <li><p><code>Array&lt;string&gt;</code> - Lazy-initialize all imports with source matching one of the given strings.</p></li> <li><p><code>(string) =&gt; boolean</code> - Pass a callback that will be called to decide if a given source string should be lazy-loaded.</p></li> </ul> <p>The two cases where imports can never be lazy are:</p> <ul> <li>
<p><code>import "foo";</code></p> <p>Side-effect imports are automatically non-lazy since their very existence means that there is no binding to later kick off initialization.</p>
</li> <li>
<p><code>export * from "foo"</code></p> <p>Re-exporting all names requires up-front execution because otherwise there is no way to know what names need to be exported.</p>
</li> </ul> <blockquote> <p>You can read more about configuring plugin options <a href="../plugins/index#plugin-options">here</a></p> </blockquote> </span></div></article>
</div></div></div>

</div></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2020 Sebastian McKenzie<br>Licensed under the MIT License.<br>
    <a href="https://babeljs.io/docs/en/babel-plugin-transform-modules-commonjs/" class="_attribution-link">https://babeljs.io/docs/en/babel-plugin-transform-modules-commonjs/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
