
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Configuring Vitest - Vitest - W3cubDocs</title>
  
  <meta name="description" content="vitest will read your root vite.config.ts when it is present to match with the plugins and setup as your Vite app. If you want to have a different &hellip;">
  <meta name="keywords" content="configuring, vitest">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/vitest/config/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-f16eecbe420d8b2925d31ffbb21d05646497ecbd9515f08ffe69e9bba7332f5657accc7003c7f6c72cb4a132171acf171b359ae3bae4ae5660ddfb1718f88c67.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/vitest.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/vitest/" class="_nav-link" title="" style="margin-left:0;">Vitest</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 id="configuring-vitest" tabindex="-1">Configuring Vitest </h1>
<h2 id="configuration" tabindex="-1">Configuration </h2>
<p><code>vitest</code> will read your root <code>vite.config.ts</code> when it is present to match with the plugins and setup as your Vite app. If you want to have a different configuration for testing or your main app doesn't rely on Vite specifically, you could either:</p>
<ul>
<li>Create <code>vitest.config.ts</code>, which will have the higher priority and will override the configuration from <code>vite.config.ts</code>
</li>
<li>Pass <code>--config</code> option to CLI, e.g. <code>vitest --config ./path/to/vitest.config.ts</code>
</li>
<li>Use <code>p<wbr>rocess.env.VITEST</wbr></code> or <code>mode</code> property on <code>defineConfig</code> (will be set to <code>test</code>/<code>benchmark</code> if not overridden) to conditionally apply different configuration in <code>vite.config.ts</code>
</li>
</ul>
<p>To configure <code>vitest</code> itself, add <code>test</code> property in your Vite config. You'll also need to add a reference to Vitest types using a <a href="https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html#-reference-types-" target="_blank" rel="noreferrer">triple slash command</a> at the top of your config file, if you are importing <code>defineConfig</code> from <code>vite</code> itself.</p>
<p>using <code>defineConfig</code> from <code>vite</code> you should follow this:</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">/// &lt;reference types="vitest" /&gt;
import { defineConfig } from 'vite'

export default defineConfig({
  test: {
    // ...
  },
})</pre>
<pre class="vp-code-light" data-language="javascript">/// &lt;reference types="vitest" /&gt;
import { defineConfig } from 'vite'

export default defineConfig({
  test: {
    // ...
  },
})</pre>
</div>
<p>using <code>defineConfig</code> from <code>vitest/config</code> you should follow this:</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    // ...
  },
})</pre>
<pre class="vp-code-light" data-language="javascript">import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    // ...
  },
})</pre>
</div>
<p>You can retrieve Vitest's default options to expand them if needed:</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">import { configDefaults, defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    exclude: [...configDefaults.exclude, 'packages/template/*'],
  },
})</pre>
<pre class="vp-code-light" data-language="javascript">import { configDefaults, defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    exclude: [...configDefaults.exclude, 'packages/template/*'],
  },
})</pre>
</div>
<p>When using a separate <code>vitest.config.js</code>, you can also extend Vite's options from another config file if needed:</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">import { mergeConfig } from 'vite'
import { defineConfig } from 'vitest/config'
import viteConfig from './vite.config'

export default mergeConfig(viteConfig, defineConfig({
  test: {
    exclude: ['packages/template/*'],
  },
}))</pre>
<pre class="vp-code-light" data-language="javascript">import { mergeConfig } from 'vite'
import { defineConfig } from 'vitest/config'
import viteConfig from './vite.config'

export default mergeConfig(viteConfig, defineConfig({
  test: {
    exclude: ['packages/template/*'],
  },
}))</pre>
</div>
<h2 id="options" tabindex="-1">Options </h2>
<div class="tip custom-block">
<strong class="custom-block-title">TIP</strong><p>In addition to the following options, you can also use any configuration option from <a href="https://vitejs.dev/config/" target="_blank" rel="noreferrer">Vite</a>. For example, <code>define</code> to define global variables, or <code>resolve.alias</code> to define aliases.</p>
</div>
<h3 id="include" tabindex="-1">include </h3>
<ul>
<li>
<strong>Type:</strong> <code>string[]</code>
</li>
<li>
<strong>Default:</strong> <code>['**/*.{test,spec}.{js,mjs,cjs,ts,mts,cts,jsx,tsx}']</code>
</li>
</ul>
<p>Files to include in the test run, using glob pattern.</p>
<h3 id="exclude" tabindex="-1">exclude </h3>
<ul>
<li>
<strong>Type:</strong> <code>string[]</code>
</li>
<li>
<strong>Default:</strong> <code>['**/node_modules/**', '**/dist/**', '**/cypress/**', '**/.{idea,git,cache,output,temp}/**']</code>
</li>
</ul>
<p>Files to exclude from the test run, using glob pattern.</p>
<h3 id="deps" tabindex="-1">deps </h3>
<ul><li>
<strong>Type:</strong> <code>{ external?, inline? }</code>
</li></ul>
<p>Handling for dependencies inlining or externalizing</p>
<h4 id="deps-external" tabindex="-1">deps.external </h4>
<ul>
<li>
<strong>Type:</strong> <code>(string | RegExp)[]</code>
</li>
<li>
<strong>Default:</strong> <code>['**/node_modules/**', '**/dist/**']</code>
</li>
</ul>
<p>Externalize means that Vite will bypass the package to native Node. Externalized dependencies will not be applied Vite's transformers and resolvers, so they do not support HMR on reload. Typically, packages under <code>node_modules</code> are externalized.</p>
<h4 id="deps-inline" tabindex="-1">deps.inline </h4>
<ul>
<li>
<strong>Type:</strong> <code>(string | RegExp)[] | true</code>
</li>
<li>
<strong>Default:</strong> <code>[]</code>
</li>
</ul>
<p>Vite will process inlined modules. This could be helpful to handle packages that ship <code>.js</code> in ESM format (that Node can't handle).</p>
<p>If <code>true</code>, every dependency will be inlined. All dependencies, specified in <a href="https://vitejs.dev/guide/ssr.html#ssr-externals" target="_blank" rel="noreferrer"><code>ssr.noExternal</code></a> will be inlined by default.</p>
<h4 id="deps-fallbackcjs" tabindex="-1">deps.fallbackCJS </h4>
<ul>
<li>
<strong>Type</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>When a dependency is a valid ESM package, try to guess the cjs version based on the path. This might be helpful, if a dependency has the wrong ESM file.</p>
<p>This might potentially cause some misalignment if a package has different logic in ESM and CJS mode.</p>
<h4 id="deps-registernodeloader" tabindex="-1">deps.registerNodeLoader </h4>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Use <a href="https://nodejs.org/api/esm.html#loaders" target="_blank" rel="noreferrer">experimental Node loader</a> to resolve imports inside <code>node_modules</code>, using Vite resolve algorithm.</p>
<p>If disabled, your <code>alias</code> and <code>&lt;plugin&gt;.resolveId</code> won't affect imports inside <code>node_modules</code> or <code>deps.external</code>.</p>
<h4 id="deps-interopdefault" tabindex="-1">deps.interopDefault </h4>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>true</code>
</li>
</ul>
<p>Interpret CJS module's default as named exports.</p>
<h3 id="benchmark" tabindex="-1">benchmark </h3>
<ul><li>
<strong>Type:</strong> <code>{ include?, exclude?, ... }</code>
</li></ul>
<p>Options used when running <code>vitest bench</code>.</p>
<h3 id="benchmark-include" tabindex="-1">benchmark.include </h3>
<ul>
<li>
<strong>Type:</strong> <code>string[]</code>
</li>
<li>
<strong>Default:</strong> <code>['**/*.{bench,benchmark}.{js,mjs,cjs,ts,mts,cts,jsx,tsx}']</code>
</li>
</ul>
<p>Include globs for benchmark test files</p>
<h3 id="benchmark-exclude" tabindex="-1">benchmark.exclude </h3>
<ul>
<li>
<strong>Type:</strong> <code>string[]</code>
</li>
<li>
<strong>Default:</strong> <code>['node_modules', 'dist', '.idea', '.git', '.cache']</code>
</li>
</ul>
<p>Exclude globs for benchmark test files</p>
<h3 id="benchmark-includesource" tabindex="-1">benchmark.includeSource </h3>
<ul>
<li>
<strong>Type:</strong> <code>string[]</code>
</li>
<li>
<strong>Default:</strong> <code>[]</code>
</li>
</ul>
<p>Include globs for in-source benchmark test files. This option is similar to <a href="#includesource"><code>includeSource</code></a>.</p>
<p>When defined, Vitest will run all matched files with <code>i<wbr>mport.meta.vitest</wbr></code> inside.</p>
<h3 id="benchmark-reporters" tabindex="-1">benchmark.reporters </h3>
<ul>
<li>
<strong>Type:</strong> <code>Arrayable&lt;BenchmarkBuiltinReporters | Reporter&gt;</code>
</li>
<li>
<strong>Default:</strong> <code>'default'</code>
</li>
</ul>
<p>Custom reporter for output. Can contain one or more built-in report names, reporter instances, and/or paths to custom reporters.</p>
<h3 id="benchmark-outputfile" tabindex="-1">benchmark.outputFile </h3>
<ul><li>
<strong>Type:</strong> <code>string | Record&lt;string, string&gt;</code>
</li></ul>
<p>Write benchmark results to a file when the <code>--reporter=json</code> option is also specified. By providing an object instead of a string you can define individual outputs when using multiple reporters.</p>
<p>To provide object via CLI command, use the following syntax: <code>--outputFile.json=./path --outputFile.junit=./other-path</code>.</p>
<h3 id="alias" tabindex="-1">alias </h3>
<ul><li>
<strong>Type:</strong> <code>Record&lt;string, string&gt; | Array&lt;{ find: string | RegExp, replacement: string, customResolver?: ResolverFunction | ResolverObject }&gt;</code>
</li></ul>
<p>Define custom aliases when running inside tests. They will be merged with aliases from <code>resolve.alias</code>.</p>
<h3 id="globals" tabindex="-1">globals </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>By default, <code>vitest</code> does not provide global APIs for explicitness. If you prefer to use the APIs globally like Jest, you can pass the <code>--globals</code> option to CLI or add <code>globals: true</code> in the config.</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">// vite.config.ts
import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    globals: true,
  },
})</pre>
<pre class="vp-code-light" data-language="javascript">// vite.config.ts
import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    globals: true,
  },
})</pre>
</div>
<p>To get TypeScript working with the global APIs, add <code>vitest/globals</code> to the <code>types</code> field in your <code>tsconfig.json</code></p>
<div class="language-json">
<span class="lang">json</span><pre class="vp-code-dark" data-language="javascript">// tsconfig.json
{
  "compilerOptions": {
    "types": ["vitest/globals"]
  }
}</pre>
<pre class="vp-code-light" data-language="javascript">// tsconfig.json
{
  "compilerOptions": {
    "types": ["vitest/globals"]
  }
}</pre>
</div>
<p>If you are already using <a href="https://github.com/antfu/unplugin-vue-components" target="_blank" rel="noreferrer"><code>unplugin-auto-import</code></a> in your project, you can also use it directly for auto importing those APIs.</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">// vite.config.ts
import { defineConfig } from 'vitest/config'
import AutoImport from 'unplugin-auto-import/vite'

export default defineConfig({
  plugins: [
    AutoImport({
      imports: ['vitest'],
      dts: true, // generate TypeScript declaration
    }),
  ],
})</pre>
<pre class="vp-code-light" data-language="javascript">// vite.config.ts
import { defineConfig } from 'vitest/config'
import AutoImport from 'unplugin-auto-import/vite'

export default defineConfig({
  plugins: [
    AutoImport({
      imports: ['vitest'],
      dts: true, // generate TypeScript declaration
    }),
  ],
})</pre>
</div>
<h3 id="environment" tabindex="-1">environment </h3>
<ul>
<li>
<strong>Type:</strong> <code>'node' | 'jsdom' | 'happy-dom' | 'edge-runtime' | string</code>
</li>
<li>
<strong>Default:</strong> <code>'node'</code>
</li>
</ul>
<p>The environment that will be used for testing. The default environment in Vitest is a Node.js environment. If you are building a web application, you can use browser-like environment through either <a href="https://github.com/jsdom/jsdom" target="_blank" rel="noreferrer"><code>jsdom</code></a> or <a href="https://github.com/capricorn86/happy-dom" target="_blank" rel="noreferrer"><code>happy-dom</code></a> instead. If you are building edge functions, you can use <a href="https://edge-runtime.vercel.app/packages/vm" target="_blank" rel="noreferrer"><code>edge-runtime</code></a> environment</p>
<p>By adding a <code>@vitest-environment</code> docblock or comment at the top of the file, you can specify another environment to be used for all tests in that file:</p>
<p>Docblock style:</p>
<div class="language-js">
<span class="lang">js</span><pre class="vp-code-dark" data-language="javascript">/**
 * @vitest-environment jsdom
 */

test('use jsdom in this test file', () =&gt; {
  const element = document.createElement('div')
  expect(element).not.toBeNull()
})</pre>
<pre class="vp-code-light" data-language="javascript">/**
 * @vitest-environment jsdom
 */

test('use jsdom in this test file', () =&gt; {
  const element = document.createElement('div')
  expect(element).not.toBeNull()
})</pre>
</div>
<p>Comment style:</p>
<div class="language-js">
<span class="lang">js</span><pre class="vp-code-dark" data-language="javascript">// @vitest-environment happy-dom

test('use happy-dom in this test file', () =&gt; {
  const element = document.createElement('div')
  expect(element).not.toBeNull()
})</pre>
<pre class="vp-code-light" data-language="javascript">// @vitest-environment happy-dom

test('use happy-dom in this test file', () =&gt; {
  const element = document.createElement('div')
  expect(element).not.toBeNull()
})</pre>
</div>
<p>For compatibility with Jest, there is also a <code>@jest-environment</code>:</p>
<div class="language-js">
<span class="lang">js</span><pre class="vp-code-dark" data-language="javascript">/**
 * @jest-environment jsdom
 */

test('use jsdom in this test file', () =&gt; {
  const element = document.createElement('div')
  expect(element).not.toBeNull()
})</pre>
<pre class="vp-code-light" data-language="javascript">/**
 * @jest-environment jsdom
 */

test('use jsdom in this test file', () =&gt; {
  const element = document.createElement('div')
  expect(element).not.toBeNull()
})</pre>
</div>
<p>If you are running Vitest with <a href="#threads"><code>--no-threads</code></a> flag, your tests will be run in this order: <code>node</code>, <code>jsdom</code>, <code>happy-dom</code>, <code>edge-runtime</code>, <code>custom environments</code>. Meaning, that every test with the same environment is grouped together, but is still running sequentially.</p>
<p>Starting from 0.23.0, you can also define custom environment. When non-builtin environment is used, Vitest will try to load package <code>vitest-environment-${name}</code>. That package should export an object with the shape of <code>Environment</code>:</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">import type { Environment } from 'vitest'

export default &lt;Environment&gt;{
  name: 'custom',
  setup() {
    // custom setup
    return {
      teardown() {
        // called after all tests with this env have been run
      }
    }
  }
}</pre>
<pre class="vp-code-light" data-language="javascript">import type { Environment } from 'vitest'

export default &lt;Environment&gt;{
  name: 'custom',
  setup() {
    // custom setup
    return {
      teardown() {
        // called after all tests with this env have been run
      }
    }
  }
}</pre>
</div>
<p>Vitest also exposes <code>builtinEnvironments</code> through <code>vitest/environments</code> entry, in case you just want to extend it. You can read more about extending environments in <a href="../guide/environment">our guide</a>.</p>
<h3 id="environmentoptions" tabindex="-1">environmentOptions </h3>
<ul>
<li>
<strong>Type:</strong> <code>Record&lt;'jsdom' | string, unknown&gt;</code>
</li>
<li>
<strong>Default:</strong> <code>{}</code>
</li>
</ul>
<p>These options are passed down to <code>setup</code> method of current <a href="#environment"><code>environment</code></a>. By default, you can configure only JSDOM options, if you are using it as your test environment.</p>
<h3 id="update" tabindex="-1">update </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Update snapshot files. This will update all changed snapshots and delete obsolete ones.</p>
<h3 id="watch" tabindex="-1">watch </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>true</code>
</li>
</ul>
<p>Enable watch mode</p>
<h3 id="root" tabindex="-1">root </h3>
<ul><li>
<strong>Type:</strong> <code>string</code>
</li></ul>
<p>Project root</p>
<h3 id="reporters" tabindex="-1">reporters </h3>
<ul>
<li>
<strong>Type:</strong> <code>Reporter | Reporter[]</code>
</li>
<li>
<strong>Default:</strong> <code>'default'</code>
</li>
</ul>
<p>Custom reporters for output. Reporters can be <a href="https://github.com/vitest-dev/vitest/blob/main/packages/vitest/src/types/reporter.ts" target="_blank" rel="noreferrer">a Reporter instance</a> or a string to select built in reporters:</p>
<ul>
<li>
<code>'default'</code> - collapse suites when they pass</li>
<li>
<code>'verbose'</code> - keep the full task tree visible</li>
<li>
<code>'dot'</code> - show each task as a single dot</li>
<li>
<code>'junit'</code> - JUnit XML reporter</li>
<li>
<code>'json'</code> - give a simple JSON summary</li>
<li>path of a custom reporter (e.g. <code>'./path/to/reporter.ts'</code>, <code>'@scope/reporter'</code>)</li>
</ul>
<h3 id="outputtruncatelength" tabindex="-1">outputTruncateLength </h3>
<ul>
<li>
<strong>Type:</strong> <code>number</code>
</li>
<li>
<strong>Default:</strong> <code>80</code>
</li>
</ul>
<p>Truncate output diff lines up to <code>80</code> number of characters. You may wish to tune this, depending on you terminal window width.</p>
<h3 id="outputdifflines" tabindex="-1">outputDiffLines </h3>
<ul>
<li>
<strong>Type:</strong> <code>number</code>
</li>
<li>
<strong>Default:</strong> <code>15</code>
</li>
</ul>
<p>Limit number of output diff lines up to <code>15</code>.</p>
<h3 id="outputfile" tabindex="-1">outputFile </h3>
<ul><li>
<strong>Type:</strong> <code>string | Record&lt;string, string&gt;</code>
</li></ul>
<p>Write test results to a file when the <code>--reporter=json</code> or <code>--reporter=junit</code> option is also specified. By providing an object instead of a string you can define individual outputs when using multiple reporters.</p>
<p>To provide object via CLI command, use the following syntax: <code>--outputFile.json=./path --outputFile.junit=./other-path</code>.</p>
<h3 id="threads" tabindex="-1">threads </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>true</code>
</li>
</ul>
<p>Enable multi-threading using <a href="https://github.com/tinylibs/tinypool" target="_blank" rel="noreferrer">tinypool</a> (a lightweight fork of <a href="https://github.com/piscinajs/piscina" target="_blank" rel="noreferrer">Piscina</a>)</p>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>This option is different from Jest's <code>--runInBand</code>. Vitest uses workers not only for running tests in parallel, but also to provide isolation. By disabling this option, your tests will run sequentially, but in the same global context, so you must provide isolation yourself.</p>
<p>This might cause all sorts of issues, if you are relying on global state (frontend frameworks usually do) or your code relies on environment to be defined separately for each test. But can be a speed boost for your tests (up to 3 times faster), that don't necessarily rely on global state or can easily bypass that.</p>
</div>
<h3 id="maxthreads" tabindex="-1">maxThreads </h3>
<ul>
<li>
<strong>Type:</strong> <code>number</code>
</li>
<li>
<strong>Default:</strong> <em>available CPUs</em>
</li>
</ul>
<p>Maximum number of threads. You can also use <code>VITEST_MAX_THREADS</code> environment variable.</p>
<h3 id="minthreads" tabindex="-1">minThreads </h3>
<ul>
<li>
<strong>Type:</strong> <code>number</code>
</li>
<li>
<strong>Default:</strong> <em>available CPUs</em>
</li>
</ul>
<p>Minimum number of threads. You can also use <code>VITEST_MIN_THREADS</code> environment variable.</p>
<h3 id="testtimeout" tabindex="-1">testTimeout </h3>
<ul>
<li>
<strong>Type:</strong> <code>number</code>
</li>
<li>
<strong>Default:</strong> <code>5000</code>
</li>
</ul>
<p>Default timeout of a test in milliseconds</p>
<h3 id="hooktimeout" tabindex="-1">hookTimeout </h3>
<ul>
<li>
<strong>Type:</strong> <code>number</code>
</li>
<li>
<strong>Default:</strong> <code>10000</code>
</li>
</ul>
<p>Default timeout of a hook in milliseconds</p>
<h3 id="teardowntimeout" tabindex="-1">teardownTimeout </h3>
<ul>
<li>
<strong>Type:</strong> <code>number</code>
</li>
<li>
<strong>Default:</strong> <code>1000</code>
</li>
</ul>
<p>Default timeout to wait for close when Vitest shuts down, in milliseconds</p>
<h3 id="silent" tabindex="-1">silent </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Silent console output from tests</p>
<h3 id="setupfiles" tabindex="-1">setupFiles </h3>
<ul><li>
<strong>Type:</strong> <code>string | string[]</code>
</li></ul>
<p>Path to setup files. They will be run before each test file.</p>
<p>You can use <code>p<wbr>rocess.env.VITEST_POOL_ID</wbr></code> (integer-like string) inside to distinguish between threads (will always be <code>'1'</code>, if run with <code>threads: false</code>).</p>
<div class="tip custom-block">
<strong class="custom-block-title">TIP</strong><p>Note, that if you are running <a href="#threads"><code>--no-threads</code></a>, this setup file will be run in the same global scope multiple times. Meaning, that you are accessing the same global object before each test, so make sure you are not doing the same thing more than you need.</p>
</div>
<p>For example, you may rely on a global variable:</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">import { config } from '@some-testing-lib'

if (!globalThis.defined) {
  config.plugins = [myCoolPlugin]
  computeHeavyThing()
  globalThis.defined = true
}

// hooks are reset before each suite
afterEach(() =&gt; {
  cleanup()
})

globalThis.resetBeforeEachTest = true</pre>
<pre class="vp-code-light" data-language="javascript">import { config } from '@some-testing-lib'

if (!globalThis.defined) {
  config.plugins = [myCoolPlugin]
  computeHeavyThing()
  globalThis.defined = true
}

// hooks are reset before each suite
afterEach(() =&gt; {
  cleanup()
})

globalThis.resetBeforeEachTest = true</pre>
</div>
<h3 id="globalsetup" tabindex="-1">globalSetup </h3>
<ul><li>
<strong>Type:</strong> <code>string | string[]</code>
</li></ul>
<p>Path to global setup files, relative to project root</p>
<p>A global setup file can either export named functions <code>setup</code> and <code>teardown</code> or a <code>default</code> function that returns a teardown function (<a href="https://github.com/vitest-dev/vitest/blob/main/test/global-setup/vitest.config.ts" target="_blank" rel="noreferrer">example</a>).</p>
<div class="info custom-block">
<strong class="custom-block-title">INFO</strong><p>Multiple globalSetup files are possible. setup and teardown are executed sequentially with teardown in reverse order.</p>
</div>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>Beware that the global setup is run in a different global scope, so your tests don't have access to variables defined here.</p>
</div>
<h3 id="watchexclude" tabindex="-1">watchExclude </h3>
<ul>
<li>
<strong>Type:</strong> <code>string[]</code>
</li>
<li>
<strong>Default:</strong> <code>['**/node_modules/**', '**/dist/**']</code>
</li>
</ul>
<p>Glob pattern of file paths to be ignored from triggering watch rerun.</p>
<h3 id="forcereruntriggers" tabindex="-1">forceRerunTriggers </h3>
<ul>
<li>
<strong>Type</strong>: <code>string[]</code>
</li>
<li>
<strong>Default:</strong> <code>['**/package.json/**', '**/vitest.config.*/**', '**/vite.config.*/**']</code>
</li>
</ul>
<p>Glob pattern of file paths that will trigger the whole suite rerun. When paired with the <code>--changed</code> argument will run the whole test suite if the trigger is found in the git diff.</p>
<p>Useful if you are testing calling CLI commands, because Vite cannot construct a module graph:</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">test('execute a script', async () =&gt; {
  // Vitest cannot rerun this test, if content of `dist/index.js` changes
  await execa('node', ['dist/index.js'])
})</pre>
<pre class="vp-code-light" data-language="javascript">test('execute a script', async () =&gt; {
  // Vitest cannot rerun this test, if content of `dist/index.js` changes
  await execa('node', ['dist/index.js'])
})</pre>
</div>
<div class="tip custom-block">
<strong class="custom-block-title">TIP</strong><p>Make sure that your files are not excluded by <code>watchExclude</code>.</p>
</div>
<h3 id="isolate" tabindex="-1">isolate </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>true</code>
</li>
</ul>
<p>Isolate environment for each test file. Does not work if you disable <a href="#threads"><code>--threads</code></a>.</p>
<h3 id="coverage" tabindex="-1">coverage </h3>
<ul>
<li>
<strong>Type:</strong> <code>CoverageC8Options | CoverageIstanbulOptions</code>
</li>
<li>
<strong>Default:</strong> <code>undefined</code>
</li>
</ul>
<p>You can use <a href="https://github.com/bcoe/c8" target="_blank" rel="noreferrer"><code>c8</code></a> or <a href="https://istanbul.js.org/" target="_blank" rel="noreferrer"><code>istanbul</code></a> for coverage collection.</p>
<h4 id="provider" tabindex="-1">provider </h4>
<ul>
<li>
<strong>Type:</strong> <code>'c8' | 'istanbul'</code>
</li>
<li>
<strong>Default:</strong> <code>'c8'</code>
</li>
</ul>
<p>Use <code>provider</code> to select the tool for coverage collection.</p>
<h4 id="coveragec8options" tabindex="-1">CoverageC8Options </h4>
<p>Used when <code>provider: 'c8'</code> is set. Coverage options are passed to <a href="https://github.com/bcoe/c8" target="_blank" rel="noreferrer"><code>c8</code></a>.</p>
<h4 id="coverageistanbuloptions" tabindex="-1">CoverageIstanbulOptions </h4>
<p>Used when <code>provider: 'istanbul'</code> is set.</p>
<h5 id="include-1" tabindex="-1">include </h5>
<ul>
<li>
<strong>Type:</strong> <code>string[]</code>
</li>
<li>
<strong>Default:</strong> <code>['**']</code>
</li>
</ul>
<p>List of files included in coverage as glob patterns</p>
<h5 id="exclude-1" tabindex="-1">exclude </h5>
<ul>
<li>
<strong>Type:</strong> <code>string[]</code>
</li>
<li>
<strong>Default:</strong> <code>[]</code>
</li>
</ul>
<p>List of files excluded from coverage as glob patterns.</p>
<h5 id="skipfull" tabindex="-1">skipFull </h5>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Do not show files with 100% statement, branch, and function coverage.</p>
<h5 id="perfile" tabindex="-1">perFile </h5>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Check thresholds per file.</p>
<h5 id="lines" tabindex="-1">lines </h5>
<ul><li>
<strong>Type:</strong> <code>number</code>
</li></ul>
<p>Threshold for lines.</p>
<h5 id="functions" tabindex="-1">functions </h5>
<ul><li>
<strong>Type:</strong> <code>number</code>
</li></ul>
<p>Threshold for functions.</p>
<h5 id="branches" tabindex="-1">branches </h5>
<ul><li>
<strong>Type:</strong> <code>number</code>
</li></ul>
<p>Threshold for branches.</p>
<h5 id="statements" tabindex="-1">statements </h5>
<ul><li>
<strong>Type:</strong> <code>number</code>
</li></ul>
<p>Threshold for statements.</p>
<h5 id="ignoreclassmethods" tabindex="-1">ignoreClassMethods </h5>
<ul>
<li>
<strong>Type:</strong> <code>string[]</code>
</li>
<li>
<strong>Default:</strong> []</li>
</ul>
<p>Set to array of class method names to ignore for coverage.</p>
<h5 id="watermarks" tabindex="-1">watermarks </h5>
<ul><li><strong>Type:</strong></li></ul>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">{
  statements?: [number, number],
  functions?: [number, number],
  branches?: [number, number],
  lines?: [number, number]
}</pre>
<pre class="vp-code-light" data-language="javascript">{
  statements?: [number, number],
  functions?: [number, number],
  branches?: [number, number],
  lines?: [number, number]
}</pre>
</div>
<ul><li><strong>Default:</strong></li></ul>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">{
  statements: [50, 80],
  functions: [50, 80],
  branches: [50, 80],
  lines: [50, 80]
}</pre>
<pre class="vp-code-light" data-language="javascript">{
  statements: [50, 80],
  functions: [50, 80],
  branches: [50, 80],
  lines: [50, 80]
}</pre>
</div>
<p>Watermarks for statements, lines, branches and functions.</p>
<h5 id="all" tabindex="-1">all </h5>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> false</li>
</ul>
<p>Whether to include all files, including the untested ones into report.</p>
<h3 id="testnamepattern" tabindex="-1">testNamePattern </h3>
<ul><li>
<strong>Type</strong> <code>string | RegExp</code>
</li></ul>
<p>Run tests with full names matching the pattern. If you add <code>OnlyRunThis</code> to this property, tests not containing the word <code>OnlyRunThis</code> in the test name will be skipped.</p>
<div class="language-js">
<span class="lang">js</span><pre class="vp-code-dark" data-language="javascript">import { expect, test } from 'vitest'

// run
test('OnlyRunThis', () =&gt; {
  expect(true).toBe(true)
})

// skipped
test('doNotRun', () =&gt; {
  expect(true).toBe(true)
})</pre>
<pre class="vp-code-light" data-language="javascript">import { expect, test } from 'vitest'

// run
test('OnlyRunThis', () =&gt; {
  expect(true).toBe(true)
})

// skipped
test('doNotRun', () =&gt; {
  expect(true).toBe(true)
})</pre>
</div>
<h3 id="open" tabindex="-1">open </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Open Vitest UI (WIP)</p>
<h3 id="api" tabindex="-1">api </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean | number</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Listen to port and serve API. When set to true, the default port is 51204</p>
<h3 id="clearmocks" tabindex="-1">clearMocks </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Will call <a href="../api/index#mockclear"><code>.mockClear()</code></a> on all spies before each test. This will clear mock history, but not reset its implementation to the default one.</p>
<h3 id="mockreset" tabindex="-1">mockReset </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Will call <a href="../api/index#mockreset"><code>.mockReset()</code></a> on all spies before each test. This will clear mock history and reset its implementation to an empty function (will return <code>undefined</code>).</p>
<h3 id="restoremocks" tabindex="-1">restoreMocks </h3>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Will call <a href="../api/index#mockrestore"><code>.mockRestore()</code></a> on all spies before each test. This will clear mock history and reset its implementation to the original one.</p>
<h3 id="transformmode" tabindex="-1">transformMode </h3>
<ul><li>
<strong>Type:</strong> <code>{ web?, ssr? }</code>
</li></ul>
<p>Determine the transform method of modules</p>
<h4 id="transformmode-ssr" tabindex="-1">transformMode.ssr </h4>
<ul>
<li>
<strong>Type:</strong> <code>RegExp[]</code>
</li>
<li>
<strong>Default:</strong> <code>[/\.([cm]?[jt]sx?|json)$/]</code>
</li>
</ul>
<p>Use SSR transform pipeline for the specified files.<br> Vite plugins will receive <code>ssr: true</code> flag when processing those files.</p>
<h4 id="transformmode-web" tabindex="-1">transformMode.web </h4>
<ul>
<li>
<strong>Type:</strong> <code>RegExp[]</code>
</li>
<li>
<strong>Default:</strong> <em>modules other than those specified in <code>transformMode.ssr</code></em>
</li>
</ul>
<p>First do a normal transform pipeline (targeting browser), then do a SSR rewrite to run the code in Node.<br> Vite plugins will receive <code>ssr: false</code> flag when processing those files.</p>
<p>When you use JSX as component models other than React (e.g. Vue JSX or SolidJS), you might want to config as following to make <code>.tsx</code> / <code>.jsx</code> transformed as client-side components:</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    transformMode: {
      web: [/\.[jt]sx$/],
    },
  },
})</pre>
<pre class="vp-code-light" data-language="javascript">import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    transformMode: {
      web: [/\.[jt]sx$/],
    },
  },
})</pre>
</div>
<h3 id="snapshotformat" tabindex="-1">snapshotFormat </h3>
<ul><li>
<strong>Type:</strong> <code>PrettyFormatOptions</code>
</li></ul>
<p>Format options for snapshot testing. These options are passed down to <a href="https://www.npmjs.com/package/pretty-format" target="_blank" rel="noreferrer"><code>pretty-format</code></a>.</p>
<h3 id="resolvesnapshotpath" tabindex="-1">resolveSnapshotPath </h3>
<ul>
<li>
<strong>Type</strong>: <code>(testPath: string, snapExtension: string) =&gt; string</code>
</li>
<li>
<strong>Default</strong>: stores snapshot files in <code>__snapshots__</code> directory</li>
</ul>
<p>Overrides default snapshot path. For example, to store snapshots next to test files:</p>
<div class="language-ts">
<span class="lang">ts</span><pre class="vp-code-dark" data-language="javascript">import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    resolveSnapshotPath: (testPath, snapExtension) =&gt; testPath + snapExtension,
  },
})</pre>
<pre class="vp-code-light" data-language="javascript">import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    resolveSnapshotPath: (testPath, snapExtension) =&gt; testPath + snapExtension,
  },
})</pre>
</div>
<h3 id="allowonly" tabindex="-1">allowOnly </h3>
<ul>
<li>
<strong>Type</strong>: <code>boolean</code>
</li>
<li>
<strong>Default</strong>: <code>false</code>
</li>
</ul>
<p>Allow tests and suites that are marked as only.</p>
<h3 id="dangerouslyignoreunhandlederrors" tabindex="-1">dangerouslyIgnoreUnhandledErrors </h3>
<ul>
<li>
<strong>Type</strong>: <code>boolean</code>
</li>
<li>
<strong>Default</strong>: <code>false</code>
</li>
</ul>
<p>Ignore any unhandled errors that occur.</p>
<h3 id="passwithnotests" tabindex="-1">passWithNoTests </h3>
<ul>
<li>
<strong>Type</strong>: <code>boolean</code>
</li>
<li>
<strong>Default</strong>: <code>false</code>
</li>
</ul>
<p>Vitest will not fail, if no tests will be found.</p>
<h3 id="logheapusage" tabindex="-1">logHeapUsage </h3>
<ul>
<li>
<strong>Type</strong>: <code>boolean</code>
</li>
<li>
<strong>Default</strong>: <code>false</code>
</li>
</ul>
<p>Show heap usage after each test. Useful for debugging memory leaks.</p>
<h3 id="css" tabindex="-1">css </h3>
<ul><li>
<strong>Type</strong>: <code>boolean | { include?, exclude? }</code>
</li></ul>
<p>Configure if CSS should be processed. When excluded, CSS files will be replaced with empty strings to bypass the subsequent processing. CSS Modules will return a proxy to not affect runtime.</p>
<h4 id="css-include" tabindex="-1">css.include </h4>
<ul>
<li>
<strong>Type</strong>: <code>RegExp | RegExp[]</code>
</li>
<li>
<strong>Default</strong>: <code>[]</code>
</li>
</ul>
<p>RegExp pattern for files that should return actual CSS and will be processed by Vite pipeline.</p>
<h4 id="css-exclude" tabindex="-1">css.exclude </h4>
<ul>
<li>
<strong>Type</strong>: <code>RegExp | RegExp[]</code>
</li>
<li>
<strong>Default</strong>: <code>[]</code>
</li>
</ul>
<p>RegExp pattern for files that will return an empty CSS file.</p>
<h4 id="css-modules" tabindex="-1">css.modules </h4>
<ul>
<li>
<strong>Type</strong>: <code>{ classNameStrategy? }</code>
</li>
<li>
<strong>Default</strong>: <code>{}</code>
</li>
</ul>
<h4 id="css-modules-classnamestrategy" tabindex="-1">css.modules.classNameStrategy </h4>
<ul>
<li>
<strong>Type</strong>: <code>'stable' | 'scoped' | 'non-scoped'</code>
</li>
<li>
<strong>Default</strong>: <code>'stable'</code>
</li>
</ul>
<p>If you decide to process CSS files, you can configure if class names inside CSS modules should be scoped. By default, Vitest exports a proxy, bypassing CSS Modules processing. You can choose one of the options:</p>
<ul>
<li>
<code>stable</code>: class names will be generated as <code>_${name}_${hashedFilename}</code>, which means that generated class will stay the same, if CSS content is changed, but will change, if the name of the file is modified, or file is moved to another folder. This setting is useful, if you use snapshot feature.</li>
<li>
<code>scoped</code>: class names will be generated as usual, respecting <code>css.modules.generateScopeName</code> method, if you have one. By default, filename will be generated as <code>_${name}_${hash}</code>, where hash includes filename and content of the file.</li>
<li>
<code>non-scoped</code>: class names will stay as they are defined in CSS.</li>
</ul>
<h3 id="maxconcurrency" tabindex="-1">maxConcurrency </h3>
<ul>
<li>
<strong>Type</strong>: <code>number</code>
</li>
<li>
<strong>Default</strong>: <code>5</code>
</li>
</ul>
<p>A number of tests that are allowed to run at the same time marked with <code>test.concurrent</code>.</p>
<p>Test above this limit will be queued to run when available slot appears.</p>
<h3 id="cache" tabindex="-1">cache </h3>
<ul><li>
<strong>Type</strong>: <code>false | { dir? }</code>
</li></ul>
<p>Options to configure Vitest cache policy. At the moment Vitest stores cache for test results to run the longer and failed tests first.</p>
<h4 id="cache-dir" tabindex="-1">cache.dir </h4>
<ul>
<li>
<strong>Type</strong>: <code>string</code>
</li>
<li>
<strong>Default</strong>: <code>node_modules/.vitest</code>
</li>
</ul>
<p>Path to cache directory.</p>
<h3 id="sequence" tabindex="-1">sequence </h3>
<ul><li>
<strong>Type</strong>: <code>{ sequencer?, shuffle?, seed? }</code>
</li></ul>
<p>Options for how tests should be sorted.</p>
<h4 id="sequence-sequencer" tabindex="-1">sequence.sequencer </h4>
<ul>
<li>
<strong>Type</strong>: <code>TestSequencerConstructor</code>
</li>
<li>
<strong>Default</strong>: <code>BaseSequencer</code>
</li>
</ul>
<p>A custom class that defines methods for sharding and sorting. You can extend <code>BaseSequencer</code> from <code>vitest/node</code>, if you only need to redefine one of the <code>sort</code> and <code>shard</code> methods, but both should exist.</p>
<p>Sharding is happening before sorting, and only if <code>--shard</code> option is provided.</p>
<h4 id="sequence-shuffle" tabindex="-1">sequence.shuffle </h4>
<ul>
<li>
<strong>Type</strong>: <code>boolean</code>
</li>
<li>
<strong>Default</strong>: <code>false</code>
</li>
</ul>
<p>If you want tests to run randomly, you can enable it with this option, or CLI argument <a href="../guide/cli"><code>--sequence.shuffle</code></a>.</p>
<p>Vitest usually uses cache to sort tests, so long running tests start earlier - this makes tests run faster. If your tests will run in random order you will lose this performance improvement, but it may be useful to track tests that accidentally depend on another run previously.</p>
<h4 id="sequence-seed" tabindex="-1">sequence.seed </h4>
<ul>
<li>
<strong>Type</strong>: <code>number</code>
</li>
<li>
<strong>Default</strong>: <code>Date.now()</code>
</li>
</ul>
<p>Sets the randomization seed, if tests are running in random order.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2021-Present Anthony Fu<br>© 2021-Present Matias Capeletto<br>Licensed under the MIT License.<br>
    <a href="https://vitest.dev/config/" class="_attribution-link">https://vitest.dev/config/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
