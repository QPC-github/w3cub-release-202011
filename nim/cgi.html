
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Cgi - Nim - W3cubDocs</title>
  
  <meta name="description" content=" This module implements helper procs for CGI applications. Example&#58; ">
  <meta name="keywords" content="module, cgi, nim">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/nim/cgi.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/nim.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/nim/" class="_nav-link" title="" style="margin-left:0;">Nim</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 class="title">Module cgi</h1>  <p class="module-desc">This module implements helper procs for CGI applications. Example:</p>
<pre class="listing" data-language="nim">import strtabs, cgi

# Fill the values when debugging:
when debug:
  setTestData("name", "Klaus", "password", "123456")
# read the data into `myData`
var myData = readData()
# check that the data's variable names are "name" or "password"
validateData(myData, "name", "password")
# start generating content:
writeContentType()
# generate content:
write(stdout, "&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\"&gt;\n")
write(stdout, "&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;\n")
writeLine(stdout, "your name: " &amp; myData["name"])
writeLine(stdout, "your password: " &amp; myData["password"])
writeLine(stdout, "&lt;/body&gt;&lt;/html&gt;")</pre>  <h2 id="5">Exports</h2> <dl> <a href="uri#encodeUrl"><span class="Identifier">encodeUrl</span></a>, <a href="uri#decodeUrl"><span class="Identifier">decodeUrl</span></a> </dl>  <h2 id="6">Imports</h2> <dl> <a href="strutils">strutils</a>, <a href="os">os</a>, <a href="strtabs">strtabs</a>, <a href="cookies">cookies</a>, <a href="uri">uri</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre>CgiError = object of IOError</pre></dt> <dd> exception that is raised if a CGI error occurs   </dd>  <dt><pre data-language="nim">RequestMethod = enum
  methodNone,                 ## no REQUEST_METHOD environment variable
  methodPost,                 ## query uses the POST method
  methodGet                   ## query uses the GET method</pre></dt> <dd> the used request method   </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre data-language="nim">proc xmlEncode(s: string): string {...}{.raises: [], tags: [].}</pre></dt> <dd> Encodes a value to be XML safe:<ul class="simple">
<li>
<code>"</code> is replaced by <code>&amp;quot;</code>
</li> <li>
<code>&lt;</code> is replaced by <code>&amp;lt;</code>
</li> <li>
<code>&gt;</code> is replaced by <code>&amp;gt;</code>
</li> <li>
<code>&amp;</code> is replaced by <code>&amp;amp;</code>
</li> <li>every other character is carried over.</li> </ul>   </dd>  <dt><pre data-language="nim">proc cgiError(msg: string) {...}{.noreturn, raises: [CgiError], tags: [].}</pre></dt> <dd> raises an ECgi exception with message <em>msg</em>.   </dd>  <dt><pre data-language="nim">proc readData(allowedMethods: set[RequestMethod] = {methodNone, methodPost, methodGet}): StringTableRef {...}{.
    raises: [CgiError, OverflowError, ValueError, IOError],
    tags: [ReadEnvEffect, ReadIOEffect].}</pre></dt> <dd> Read CGI data. If the client does not use a method listed in the <em>allowedMethods</em> set, an <em>ECgi</em> exception is raised.   </dd>  <dt><pre data-language="nim">proc validateData(data: StringTableRef; validKeys: varargs[string]) {...}{.
    raises: [CgiError], tags: [].}</pre></dt> <dd> validates data; raises <em>ECgi</em> if this fails. This checks that each variable name of the CGI <em>data</em> occurs in the <em>validKeys</em> array.   </dd>  <dt><pre data-language="nim">proc getContentLength(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>CONTENT_LENGTH</code> environment variable   </dd>  <dt><pre data-language="nim">proc getContentType(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>CONTENT_TYPE</code> environment variable   </dd>  <dt><pre data-language="nim">proc getDocumentRoot(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>DOCUMENT_ROOT</code> environment variable   </dd>  <dt><pre data-language="nim">proc getGatewayInterface(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>GATEWAY_INTERFACE</code> environment variable   </dd>  <dt><pre data-language="nim">proc getHttpAccept(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>HTTP_ACCEPT</code> environment variable   </dd>  <dt><pre data-language="nim">proc getHttpAcceptCharset(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>HTTP_ACCEPT_CHARSET</code> environment variable   </dd>  <dt><pre data-language="nim">proc getHttpAcceptEncoding(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>HTTP_ACCEPT_ENCODING</code> environment variable   </dd>  <dt><pre data-language="nim">proc getHttpAcceptLanguage(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>HTTP_ACCEPT_LANGUAGE</code> environment variable   </dd>  <dt><pre data-language="nim">proc getHttpConnection(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>HTTP_CONNECTION</code> environment variable   </dd>  <dt><pre data-language="nim">proc getHttpCookie(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>HTTP_COOKIE</code> environment variable   </dd>  <dt><pre data-language="nim">proc getHttpHost(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>HTTP_HOST</code> environment variable   </dd>  <dt><pre data-language="nim">proc getHttpReferer(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>HTTP_REFERER</code> environment variable   </dd>  <dt><pre data-language="nim">proc getHttpUserAgent(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>HTTP_USER_AGENT</code> environment variable   </dd>  <dt><pre data-language="nim">proc getPathInfo(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>PATH_INFO</code> environment variable   </dd>  <dt><pre data-language="nim">proc getPathTranslated(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>PATH_TRANSLATED</code> environment variable   </dd>  <dt><pre data-language="nim">proc getQueryString(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>QUERY_STRING</code> environment variable   </dd>  <dt><pre data-language="nim">proc getRemoteAddr(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>REMOTE_ADDR</code> environment variable   </dd>  <dt><pre data-language="nim">proc getRemoteHost(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>REMOTE_HOST</code> environment variable   </dd>  <dt><pre data-language="nim">proc getRemoteIdent(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>REMOTE_IDENT</code> environment variable   </dd>  <dt><pre data-language="nim">proc getRemotePort(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>REMOTE_PORT</code> environment variable   </dd>  <dt><pre data-language="nim">proc getRemoteUser(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>REMOTE_USER</code> environment variable   </dd>  <dt><pre data-language="nim">proc getRequestMethod(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>REQUEST_METHOD</code> environment variable   </dd>  <dt><pre data-language="nim">proc getRequestURI(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>REQUEST_URI</code> environment variable   </dd>  <dt><pre data-language="nim">proc getScriptFilename(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>SCRIPT_FILENAME</code> environment variable   </dd>  <dt><pre data-language="nim">proc getScriptName(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>SCRIPT_NAME</code> environment variable   </dd>  <dt><pre data-language="nim">proc getServerAddr(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>SERVER_ADDR</code> environment variable   </dd>  <dt><pre data-language="nim">proc getServerAdmin(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>SERVER_ADMIN</code> environment variable   </dd>  <dt><pre data-language="nim">proc getServerName(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>SERVER_NAME</code> environment variable   </dd>  <dt><pre data-language="nim">proc getServerPort(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>SERVER_PORT</code> environment variable   </dd>  <dt><pre data-language="nim">proc getServerProtocol(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>SERVER_PROTOCOL</code> environment variable   </dd>  <dt><pre data-language="nim">proc getServerSignature(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>SERVER_SIGNATURE</code> environment variable   </dd>  <dt><pre data-language="nim">proc getServerSoftware(): string {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> returns contents of the <code>SERVER_SOFTWARE</code> environment variable   </dd>  <dt><pre data-language="nim">proc setTestData(keysvalues: varargs[string]) {...}{.raises: [OSError],
    tags: [WriteEnvEffect].}</pre></dt> <dd> fills the appropriate environment variables to test your CGI application. This can only simulate the 'GET' request method. <em>keysvalues</em> should provide embedded (name, value)-pairs. Example:<pre class="listing" data-language="nim">setTestData("name", "Hanz", "password", "12345")</pre>   </dd>  <dt><pre data-language="nim">proc writeContentType() {...}{.raises: [IOError], tags: [WriteIOEffect].}</pre></dt> <dd> call this before starting to send your HTML data to <em>stdout</em>. This implements this part of the CGI protocol:<pre class="listing" data-language="nim">write(stdout, "Content-type: text/html\n\n")</pre>   </dd>  <dt><pre data-language="nim">proc writeErrorMessage(data: string) {...}{.raises: [IOError], tags: [WriteIOEffect].}</pre></dt> <dd> Tries to reset browser state and writes <em>data</em> to stdout in &lt;plaintext&gt; tag.   </dd>  <dt><pre data-language="nim">proc setStackTraceStdout() {...}{.raises: [], tags: [].}</pre></dt> <dd> Makes Nim output stacktraces to stdout, instead of server log.   </dd>  <dt><pre data-language="nim">proc setStackTraceNewLine() {...}{.deprecated, raises: [], tags: [].}</pre></dt> <dd> Makes Nim output stacktraces to stdout, instead of server log. Depracated alias for setStackTraceStdout.   </dd>  <dt><pre data-language="nim">proc setCookie(name, value: string) {...}{.raises: [IOError], tags: [WriteIOEffect].}</pre></dt> <dd> Sets a cookie.   </dd>  <dt><pre data-language="nim">proc getCookie(name: string): TaintedString {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> Gets a cookie. If no cookie of <em>name</em> exists, "" is returned.   </dd>  <dt><pre data-language="nim">proc existsCookie(name: string): bool {...}{.raises: [], tags: [ReadEnvEffect].}</pre></dt> <dd> Checks if a cookie of <em>name</em> exists.   </dd> </dl>  <h2 id="15">Iterators</h2> <dl>  <dt><pre data-language="nim">iterator decodeData(data: string): tuple[key, value: TaintedString] {...}{.
    raises: [CgiError], tags: [].}</pre></dt> <dd> Reads and decodes CGI data and yields the (name, value) pairs the data consists of.   </dd>  <dt><pre data-language="nim">iterator decodeData(allowedMethods: set[RequestMethod] = {methodNone, methodPost,
    methodGet}): tuple[key, value: TaintedString] {...}{.
    raises: [CgiError, OverflowError, ValueError, IOError],
    tags: [ReadEnvEffect, ReadIOEffect].}</pre></dt> <dd> Reads and decodes CGI data and yields the (name, value) pairs the data consists of. If the client does not use a method listed in the <em>allowedMethods</em> set, an <em>ECgi</em> exception is raised.   </dd> </dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2006–2018 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/cgi.html" class="_attribution-link">https://nim-lang.org/docs/cgi.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
