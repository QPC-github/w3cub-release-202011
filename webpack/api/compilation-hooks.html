
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Compilation Hooks - Webpack - W3cubDocs</title>
  
  <meta name="description" content="The Compilation module is used by the Compiler to create new compilations (or builds). A compilation instance has access to all modules and their &hellip;">
  <meta name="keywords" content="compilation, hooks, webpack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/webpack/api/compilation-hooks.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/webpack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/webpack/" class="_nav-link" title="" style="margin-left:0;">webpack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _webpack">
				
				
<h1>Compilation Hooks</h1>
<p>The <code>Compilation</code> module is used by the <code>Compiler</code> to create new compilations (or builds). A <code>compilation</code> instance has access to all modules and their dependencies (most of which are circular references). It is the literal compilation of all the modules in the dependency graph of an application. During the compilation phase, modules are loaded, sealed, optimized, chunked, hashed and restored.</p> <p>The <code>Compilation</code> class also extends <code>Tapable</code> and provides the following lifecycle hooks. They can be tapped the same way as compiler hooks:</p> <pre data-language="js">compilation.hooks.someHook.tap(/* ... */);
</pre> <p>As with the <code>compiler</code>, <code>tapAsync</code> and <code>tapPromise</code> may also be available depending on the type of hook.</p> <h2 class="header" id="buildmodule">  <code>buildModule</code>  </h2> <p><code>SyncHook</code></p> <p>Triggered before a module build has started.</p> <p>Parameters: <code>module</code></p> <h2 class="header" id="rebuildmodule">  <code>rebuildModule</code>  </h2> <p><code>SyncHook</code></p> <p>Fired before rebuilding a module.</p> <p>Parameters: <code>module</code></p> <h2 class="header" id="failedmodule">  <code>failedModule</code>  </h2> <p><code>SyncHook</code></p> <p>Run when a module build has failed.</p> <p>Parameters: <code>module</code> <code>error</code></p> <h2 class="header" id="succeedmodule">  <code>succeedModule</code>  </h2> <p><code>SyncHook</code></p> <p>Executed when a module has been built successfully.</p> <p>Parameters: <code>module</code></p> <h2 class="header" id="finishmodules">  <code>finishModules</code>  </h2> <p><code>SyncHook</code></p> <p>All modules have been built.</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="finishrebuildingmodule">  <code>finishRebuildingModule</code>  </h2> <p><code>SyncHook</code></p> <p>A module has been rebuilt.</p> <p>Parameters: <code>module</code></p> <h2 class="header" id="seal">  <code>seal</code>  </h2> <p><code>SyncHook</code></p> <p>Fired when the compilation stops accepting new modules.</p> <h2 class="header" id="unseal">  <code>unseal</code>  </h2> <p><code>SyncHook</code></p> <p>Fired when a compilation begins accepting new modules.</p> <h2 class="header" id="optimizedependenciesbasic">  <code>optimizeDependenciesBasic</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="optimizedependencies">  <code>optimizeDependencies</code>  </h2> <p><code>SyncBailHook</code></p> <p>Fired at the beginning of dependency optimization.</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="optimizedependenciesadvanced">  <code>optimizeDependenciesAdvanced</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="afteroptimizedependencies">  <code>afterOptimizeDependencies</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="optimize">  <code>optimize</code>  </h2> <p><code>SyncHook</code></p> <p>Triggered at the beginning of the optimization phase.</p> <h2 class="header" id="optimizemodulesbasic">  <code>optimizeModulesBasic</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="optimizemodules">  <code>optimizeModules</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="optimizemodulesadvanced">  <code>optimizeModulesAdvanced</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="afteroptimizemodules">  <code>afterOptimizeModules</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="optimizechunksbasic">  <code>optimizeChunksBasic</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="optimizechunks">  <code>optimizeChunks</code>  </h2> <p><code>SyncBailHook</code></p> <p>Optimize the chunks.</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="optimizechunksadvanced">  <code>optimizeChunksAdvanced</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="afteroptimizechunks">  <code>afterOptimizeChunks</code>  </h2> <p><code>SyncHook</code></p> <p>Fired after chunk optimization has completed.</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="optimizetree">  <code>optimizeTree</code>  </h2> <p><code>AsyncSeriesHook</code></p> <p>Optimize the dependency tree asynchronously.</p> <p>Parameters: <code>chunks</code> <code>modules</code></p> <h2 class="header" id="afteroptimizetree">  <code>afterOptimizeTree</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>chunks</code> <code>modules</code></p> <h2 class="header" id="optimizechunkmodulesbasic">  <code>optimizeChunkModulesBasic</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>chunks</code> <code>modules</code></p> <h2 class="header" id="optimizechunkmodules">  <code>optimizeChunkModules</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>chunks</code> <code>modules</code></p> <h2 class="header" id="optimizechunkmodulesadvanced">  <code>optimizeChunkModulesAdvanced</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <p>Parameters: <code>chunks</code> <code>modules</code></p> <h2 class="header" id="afteroptimizechunkmodules">  <code>afterOptimizeChunkModules</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>chunks</code> <code>modules</code></p> <h2 class="header" id="shouldrecord">  <code>shouldRecord</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <h2 class="header" id="revivemodules">  <code>reviveModules</code>  </h2> <p><code>SyncHook</code></p> <p>Restore module information from records.</p> <p>Parameters: <code>modules</code> <code>records</code></p> <h2 class="header" id="optimizemoduleorder">  <code>optimizeModuleOrder</code>  </h2> <p><code>SyncHook</code></p> <p>Sort the modules in from most to least important.</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="advancedoptimizemoduleorder">  <code>advancedOptimizeModuleOrder</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="beforemoduleids">  <code>beforeModuleIds</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="moduleids">  <code>moduleIds</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>modules</code></p> <h2 class="header" id="optimizemoduleids">  <code>optimizeModuleIds</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="afteroptimizemoduleids">  <code>afterOptimizeModuleIds</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="revivechunks">  <code>reviveChunks</code>  </h2> <p><code>SyncHook</code></p> <p>Restore chunk information from records.</p> <p>Parameters: <code>modules</code> <code>records</code></p> <h2 class="header" id="optimizechunkorder">  <code>optimizeChunkOrder</code>  </h2> <p><code>SyncHook</code></p> <p>Sort the chunks in from most to least important.</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="beforeoptimizechunkids">  <code>beforeOptimizeChunkIds</code>  </h2> <p><code>SyncHook</code></p> <p>Fired before chunk <code>id</code> optimization.</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="optimizechunkids">  <code>optimizeChunkIds</code>  </h2> <p><code>SyncHook</code></p> <p>Optimize the <code>id</code> of each chunk.</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="afteroptimizechunkids">  <code>afterOptimizeChunkIds</code>  </h2> <p><code>SyncHook</code></p> <p>Triggered after chunk <code>id</code> optimization has finished.</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="recordmodules">  <code>recordModules</code>  </h2> <p><code>SyncHook</code></p> <p>Store module info to the records.</p> <p>Parameters: <code>modules</code> <code>records</code></p> <h2 class="header" id="recordchunks">  <code>recordChunks</code>  </h2> <p><code>SyncHook</code></p> <p>Store chunk info to the records.</p> <p>Parameters: <code>chunks</code> <code>records</code></p> <h2 class="header" id="beforehash">  <code>beforeHash</code>  </h2> <p><code>SyncHook</code></p> <p>Before the compilation is hashed.</p> <h2 class="header" id="afterhash">  <code>afterHash</code>  </h2> <p><code>SyncHook</code></p> <p>After the compilation is hashed.</p> <h2 class="header" id="recordhash">  <code>recordHash</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>records</code></p> <h2 class="header" id="record">  <code>record</code>  </h2> <p><code>SyncHook</code></p> <p>Store information about the <code>compilation</code> to the <code>records</code>.</p> <p>Parameters: <code>compilation</code> <code>records</code></p> <h2 class="header" id="beforemoduleassets">  <code>beforeModuleAssets</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <h2 class="header" id="shouldgeneratechunkassets">  <code>shouldGenerateChunkAssets</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <h2 class="header" id="beforechunkassets">  <code>beforeChunkAssets</code>  </h2> <p><code>SyncHook</code></p> <p>Before creating the chunk assets.</p> <h2 class="header" id="additionalchunkassets">  <code>additionalChunkAssets</code>  </h2> <p><code>SyncHook</code></p> <p>Create additional assets for the chunks.</p> <p>Parameters: <code>chunks</code></p> <h2 class="header" id="records">  <code>records</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>compilation</code> <code>records</code></p> <h2 class="header" id="additionalassets">  <code>additionalAssets</code>  </h2> <p><code>AsyncSeriesHook</code></p> <p>Create additional assets for the compilation. This hook can be used to download an image, for example:</p> <pre data-language="js">compilation.hooks.additionalAssets.tapAsync('MyPlugin', callback =&gt; {
  download('https://img.shields.io/npm/v/webpack.svg', function(resp) {
    if(resp.status === 200) {
      compilation.assets['webpack-version.svg'] = toAsset(resp);
      callback();
    } else {
      callback(new Error('[webpack-example-plugin] Unable to download the image'));
    }
  });
});
</pre> <h2 class="header" id="optimizechunkassets">  <code>optimizeChunkAssets</code>  </h2> <p><code>AsyncSeriesHook</code></p> <p>Optimize any chunk assets. The assets are stored in <code>compilation.assets</code>. A <code>Chunk</code> has a property <code>files</code> which points to all files created by a chunk. Any additional chunk assets are stored in <code>compilation.additionalChunkAssets</code>.</p> <p>Parameters: <code>chunks</code></p> <p>Here's an example that simply adds a banner to each chunk.</p> <pre data-language="js">compilation.hooks
  .optimizeChunkAssets
  .tapAsync('MyPlugin', (chunks, callback) =&gt; {
    chunks.forEach(chunk =&gt; {
      chunk.files.forEach(file =&gt; {
        compilation.assets[file] = new ConcatSource(
          '\/**Sweet Banner**\/',
          '\n',
          compilation.assets[file]
        );
      });
    });

    callback();
  });
</pre> <h2 class="header" id="afteroptimizechunkassets">  <code>afterOptimizeChunkAssets</code>  </h2> <p><code>SyncHook</code></p> <p>The chunk assets have been optimized.</p> <p>Parameters: <code>chunks</code></p> <p>Here's an example plugin from <a href="https://github.com/boopathi">@boopathi</a> that outputs exactly what went into each chunk.</p> <pre data-language="js">compilation.hooks.afterOptimizeChunkAssets.tap('MyPlugin', chunks =&gt; {
  chunks.forEach(chunk =&gt; {
    console.log({
      id: chunk.id,
      name: chunk.name,
      includes: chunk.modules.map(module =&gt; module.request)
    });
  });
});
</pre> <h2 class="header" id="optimizeassets">  <code>optimizeAssets</code>  </h2> <p><code>AsyncSeriesHook</code></p> <p>Optimize all assets stored in <code>compilation.assets</code>.</p> <p>Parameters: <code>assets</code></p> <h2 class="header" id="afteroptimizeassets">  <code>afterOptimizeAssets</code>  </h2> <p><code>SyncHook</code></p> <p>The assets has been optimized.</p> <p>Parameters: <code>assets</code></p> <h2 class="header" id="needadditionalseal">  <code>needAdditionalSeal</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <h2 class="header" id="afterseal">  <code>afterSeal</code>  </h2> <p><code>AsyncSeriesHook</code></p> <p>...</p> <h2 class="header" id="chunkhash">  <code>chunkHash</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>chunk</code> <code>chunkHash</code></p> <h2 class="header" id="moduleasset">  <code>moduleAsset</code>  </h2> <p><code>SyncHook</code></p> <p>An asset from a module was added to the compilation.</p> <p>Parameters: <code>module</code> <code>filename</code></p> <h2 class="header" id="chunkasset">  <code>chunkAsset</code>  </h2> <p><code>SyncHook</code></p> <p>An asset from a chunk was added to the compilation.</p> <p>Parameters: <code>chunk</code> <code>filename</code></p> <h2 class="header" id="assetpath">  <code>assetPath</code>  </h2> <p><code>SyncWaterfallHook</code></p> <p>...</p> <p>Parameters: <code>filename</code> <code>data</code></p> <h2 class="header" id="needadditionalpass">  <code>needAdditionalPass</code>  </h2> <p><code>SyncBailHook</code></p> <p>...</p> <h2 class="header" id="childcompiler">  <code>childCompiler</code>  </h2> <p><code>SyncHook</code></p> <p>...</p> <p>Parameters: <code>childCompiler</code> <code>compilerName</code> <code>compilerIndex</code></p> <h2 class="header" id="normalmoduleloader">  <code>normalModuleLoader</code>  </h2> <p><code>SyncHook</code></p> <p>The normal module loader is the function that actually loads all the modules in the module graph (one-by-one).</p> <p>Parameters: <code>loaderContext</code> <code>module</code></p> <h2 class="header" id="dependencyreference">  <code>dependencyReference</code>  </h2> <p><code>SyncWaterfallHook</code></p> <p><code>Compilation.hooks.dependencyReference(depRef, dependency, module)</code> allows to change the references reported by dependencies.</p> <p>Parameters: <code>depRef</code> <code>dependency</code> <code>module</code></p> <div class="_attribution">
  <p class="_attribution-p">
    © JS Foundation and other contributors<br>Licensed under the Creative Commons Attribution License 4.0.<br>
    <a href="https://webpack.js.org/api/compilation-hooks" class="_attribution-link">https://webpack.js.org/api/compilation-hooks</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
