
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Wp_insert_post() - WordPress - W3cubDocs</title>
  
  <meta name="description" content=" Insert or update a post. ">
  <meta name="keywords" content="wp, insert, post, array, &#36;postarr, bool, &#36;wp, error, false, wordpress">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/wordpress/functions/wp_insert_post.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/wordpress.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/wordpress/" class="_nav-link" title="" style="margin-left:0;">WordPress</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _wordpress">
				
				
<h1>wp_insert_post( array $postarr, bool $wp_error = false )</h1>  <section class="summary"> <p>Insert or update a post.</p> </section> <div class="content-toc">  <section class="description"> <h2 class="toc-heading" id="description" tabindex="-1">Description </h2> <p>If the $postarr parameter has ‘ID’ set to a value, then post will be updated.</p> <p>You can set the post date manually, by setting the values for ‘post_date’ and ‘post_date_gmt’ keys. You can close the comments or open the comments by setting the value for ‘comment_status’ key.</p> <h3 class="toc-heading" id="see-also" tabindex="-1">See also </h3> <ul> <li><a href="sanitize_post">sanitize_post()</a></li> </ul> </section>  <section class="parameters"> <h2 class="toc-heading" id="parameters" tabindex="-1">Parameters </h2> <dl> <dt>$postarr</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Required)</span> <span class="description">An array of elements that make up a post to update or insert. <ul class="param-hash">
<li>
<b>'ID'</b><br><i><span class="type">(int)</span></i> The post ID. If equal to something other than 0, the post with that ID will be updated. Default 0.</li> <li>
<b>'post_author'</b><br><i><span class="type">(int)</span></i> The ID of the user who added the post. Default is the current user ID.</li> <li>
<b>'post_date'</b><br><i><span class="type">(string)</span></i> The date of the post. Default is the current time.</li> <li>
<b>'post_date_gmt'</b><br><i><span class="type">(string)</span></i> The date of the post in the GMT timezone. Default is the value of <code>$post_date</code>.</li> <li>
<b>'post_content'</b><br><i><span class="type">(mixed)</span></i> The post content. Default empty.</li> <li>
<b>'post_content_filtered'</b><br><i><span class="type">(string)</span></i> The filtered post content. Default empty.</li> <li>
<b>'post_title'</b><br><i><span class="type">(string)</span></i> The post title. Default empty.</li> <li>
<b>'post_excerpt'</b><br><i><span class="type">(string)</span></i> The post excerpt. Default empty.</li> <li>
<b>'post_status'</b><br><i><span class="type">(string)</span></i> The post status. Default 'draft'.</li> <li>
<b>'post_type'</b><br><i><span class="type">(string)</span></i> The post type. Default 'post'.</li> <li>
<b>'comment_status'</b><br><i><span class="type">(string)</span></i> Whether the post can accept comments. Accepts 'open' or 'closed'. Default is the value of 'default_comment_status' option.</li> <li>
<b>'ping_status'</b><br><i><span class="type">(string)</span></i> Whether the post can accept pings. Accepts 'open' or 'closed'. Default is the value of 'default_ping_status' option.</li> <li>
<b>'post_password'</b><br><i><span class="type">(string)</span></i> The password to access the post. Default empty.</li> <li>
<b>'post_name'</b><br><i><span class="type">(string)</span></i> The post name. Default is the sanitized post title when creating a new post.</li> <li>
<b>'to_ping'</b><br><i><span class="type">(string)</span></i> Space or carriage return-separated list of URLs to ping. Default empty.</li> <li>
<b>'pinged'</b><br><i><span class="type">(string)</span></i> Space or carriage return-separated list of URLs that have been pinged. Default empty.</li> <li>
<b>'post_modified'</b><br><i><span class="type">(string)</span></i> The date when the post was last modified. Default is the current time.</li> <li>
<b>'post_modified_gmt'</b><br><i><span class="type">(string)</span></i> The date when the post was last modified in the GMT timezone. Default is the current time.</li> <li>
<b>'post_parent'</b><br><i><span class="type">(int)</span></i> Set this for the post it belongs to, if any. Default 0.</li> <li>
<b>'menu_order'</b><br><i><span class="type">(int)</span></i> The order the post should be displayed in. Default 0.</li> <li>
<b>'post_mime_type'</b><br><i><span class="type">(string)</span></i> The mime type of the post. Default empty.</li> <li>
<b>'guid'</b><br><i><span class="type">(string)</span></i> Global Unique ID for referencing the post. Default empty.</li> <li>
<b>'post_category'</b><br><i><span class="type">(array)</span></i> Array of category IDs. Defaults to value of the 'default_category' option.</li> <li>
<b>'tags_input'</b><br><i><span class="type">(array)</span></i> Array of tag names, slugs, or IDs. Default empty.</li> <li>
<b>'tax_input'</b><br><i><span class="type">(array)</span></i> Array of taxonomy terms keyed by their taxonomy name. Default empty.</li> <li>
<b>'meta_input'</b><br><i><span class="type">(array)</span></i> Array of post meta values keyed by their post meta key. Default empty.</li> </ul> </span> </p> </dd> <dt>$wp_error</dt> <dd> <p class="desc"> <span class="type">(<span class="bool">bool</span>)</span> <span class="required">(Optional)</span> <span class="description"> Whether to return a <a href="../classes/wp_error">WP_Error</a> on failure. </span> </p> <p class="default">Default value: false</p> </dd> </dl> </section>  <section class="return"> <h2 class="toc-heading" id="return" tabindex="-1">Return </h2> <p><span class="return-type">(int|<a href="../classes/wp_error">WP_Error</a>)</span> The post ID on success. The value 0 or <a href="../classes/wp_error">WP_Error</a> on failure.</p> </section>  <section class="explanation"> <h2 class="toc-heading" id="more-information" tabindex="-1">More Information </h2> <h3 class="toc-heading" id="usage" tabindex="-1">Usage </h3> <pre class="brush: php; title: ; notranslate" title="" data-language="php">
wp_insert_post( $post, $wp_error );
</pre> <h3 class="toc-heading" id="notes" tabindex="-1">Notes </h3> <ul> <li>
<tt>post_title</tt> and <tt>post_content</tt> are required</li> <li>
<tt>post_status</tt>: If providing a post_status of ‘future’ you must specify the post_date in order for WordPress to know when to publish your post. See also <a title="Post Status Transitions" href="https://codex.wordpress.org/Post_Status_Transitions">Post Status Transitions</a>.</li> <li>
<tt>post_category</tt>: Equivalent to calling <a title="Function Reference/wp set post categories" href="wp_set_post_categories">wp_set_post_categories()</a>.</li> <li>
<tt>tags_input</tt>: Equivalent to calling <a title="Function Reference/wp set post tags" href="wp_set_post_tags">wp_set_post_tags()</a>.</li> <li>
<tt>tax_input</tt>: Equivalent to calling <a title="Function Reference/wp set post terms" href="wp_set_post_terms">wp_set_post_terms()</a> for each custom taxonomy in the array. If the current user doesn’t have the capability to work with a taxonomy, then you must use <a title="Function Reference/wp set object terms" href="wp_set_object_terms">wp_set_object_terms()</a> instead.</li> <li>
<tt>page_template</tt>: If post_type is ‘page’, will attempt to set the <a title="Page Templates" href="https://codex.wordpress.org/Page_Templates">page template</a>. On failure, the function will return either a <a href="../classes/wp_error">WP_Error</a> or 0, and stop before the final actions are called. If the post_type is not ‘page’, the parameter is ignored. You can set the page template for a non-page by calling <a title="Function Reference/update post meta" href="update_post_meta">update_post_meta()</a> with a key of ‘_wp_page_template’.</li> </ul> <h3 class="toc-heading" id="categories" tabindex="-1">Categories </h3> <p>Categories need to be passed as an array of integers that match the category IDs in the database. This is the case even where only one category is assigned to the post.</p> <p>See also: <a title="Function Reference/wp set post terms" href="wp_set_post_terms">wp_set_post_terms()</a></p> <h3 class="toc-heading" id="security" tabindex="-1">Security </h3> <p><tt><a href="wp_insert_post">wp_insert_post()</a></tt> passes data through <a href="_wp_link_placeholder">sanitize_post()</a>, which itself handles all necessary sanitization and validation (kses, etc.).</p> <p>As such, you don’t need to worry about that.</p> <p>You may wish, however, to remove HTML, JavaScript, and PHP tags from the post_title and any other fields. Surprisingly, WordPress does not do this automatically. This can be easily done by using the <a href="_wp_link_placeholder">wp_strip_all_tags()</a> function and is especially useful when building front-end post submission forms.</p> <pre class="brush: php; title: ; notranslate" title="" data-language="php">
// Create post object
$my_post = array(
  'post_title'    =&gt; wp_strip_all_tags( $_POST['post_title'] ),
  'post_content'  =&gt; $_POST['post_content'],
  'post_status'   =&gt; 'publish',
  'post_author'   =&gt; 1,
  'post_category' =&gt; array( 8,39 )
);

// Insert the post into the database
wp_insert_post( $my_post );
</pre> </section>  <section class="source-content"> <h2 class="toc-heading" id="source" tabindex="-1">Source </h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/post.php/">wp-includes/post.php</a> </p> <pre class="source-code-container" data-language="php">function wp_insert_post( $postarr, $wp_error = false ) {
	global $wpdb;

	// Capture original pre-sanitized array for passing into filters.
	$unsanitized_postarr = $postarr;

	$user_id = get_current_user_id();

	$defaults = array(
		'post_author'           =&gt; $user_id,
		'post_content'          =&gt; '',
		'post_content_filtered' =&gt; '',
		'post_title'            =&gt; '',
		'post_excerpt'          =&gt; '',
		'post_status'           =&gt; 'draft',
		'post_type'             =&gt; 'post',
		'comment_status'        =&gt; '',
		'ping_status'           =&gt; '',
		'post_password'         =&gt; '',
		'to_ping'               =&gt; '',
		'pinged'                =&gt; '',
		'post_parent'           =&gt; 0,
		'menu_order'            =&gt; 0,
		'guid'                  =&gt; '',
		'import_id'             =&gt; 0,
		'context'               =&gt; '',
	);

	$postarr = wp_parse_args( $postarr, $defaults );

	unset( $postarr['filter'] );

	$postarr = sanitize_post( $postarr, 'db' );

	// Are we updating or creating?
	$post_ID = 0;
	$update  = false;
	$guid    = $postarr['guid'];

	if ( ! empty( $postarr['ID'] ) ) {
		$update = true;

		// Get the post ID and GUID.
		$post_ID     = $postarr['ID'];
		$post_before = get_post( $post_ID );

		if ( is_null( $post_before ) ) {
			if ( $wp_error ) {
				return new WP_Error( 'invalid_post', __( 'Invalid post ID.' ) );
			}
			return 0;
		}

		$guid            = get_post_field( 'guid', $post_ID );
		$previous_status = get_post_field( 'post_status', $post_ID );
	} else {
		$previous_status = 'new';
	}

	$post_type = empty( $postarr['post_type'] ) ? 'post' : $postarr['post_type'];

	$post_title   = $postarr['post_title'];
	$post_content = $postarr['post_content'];
	$post_excerpt = $postarr['post_excerpt'];

	if ( isset( $postarr['post_name'] ) ) {
		$post_name = $postarr['post_name'];
	} elseif ( $update ) {
		// For an update, don't modify the post_name if it wasn't supplied as an argument.
		$post_name = $post_before-&gt;post_name;
	}

	$maybe_empty = 'attachment' !== $post_type
		&amp;&amp; ! $post_content &amp;&amp; ! $post_title &amp;&amp; ! $post_excerpt
		&amp;&amp; post_type_supports( $post_type, 'editor' )
		&amp;&amp; post_type_supports( $post_type, 'title' )
		&amp;&amp; post_type_supports( $post_type, 'excerpt' );

	/**
	 * Filters whether the post should be considered "empty".
	 *
	 * The post is considered "empty" if both:
	 * 1. The post type supports the title, editor, and excerpt fields
	 * 2. The title, editor, and excerpt fields are all empty
	 *
	 * Returning a truthy value from the filter will effectively short-circuit
	 * the new post being inserted and return 0. If $wp_error is true, a WP_Error
	 * will be returned instead.
	 *
	 * @since 3.3.0
	 *
	 * @param bool  $maybe_empty Whether the post should be considered "empty".
	 * @param array $postarr     Array of post data.
	 */
	if ( apply_filters( 'wp_insert_post_empty_content', $maybe_empty, $postarr ) ) {
		if ( $wp_error ) {
			return new WP_Error( 'empty_content', __( 'Content, title, and excerpt are empty.' ) );
		} else {
			return 0;
		}
	}

	$post_status = empty( $postarr['post_status'] ) ? 'draft' : $postarr['post_status'];

	if ( 'attachment' === $post_type &amp;&amp; ! in_array( $post_status, array( 'inherit', 'private', 'trash', 'auto-draft' ), true ) ) {
		$post_status = 'inherit';
	}

	if ( ! empty( $postarr['post_category'] ) ) {
		// Filter out empty terms.
		$post_category = array_filter( $postarr['post_category'] );
	}

	// Make sure we set a valid category.
	if ( empty( $post_category ) || 0 === count( $post_category ) || ! is_array( $post_category ) ) {
		// 'post' requires at least one category.
		if ( 'post' === $post_type &amp;&amp; 'auto-draft' !== $post_status ) {
			$post_category = array( get_option( 'default_category' ) );
		} else {
			$post_category = array();
		}
	}

	/*
	 * Don't allow contributors to set the post slug for pending review posts.
	 *
	 * For new posts check the primitive capability, for updates check the meta capability.
	 */
	$post_type_object = get_post_type_object( $post_type );

	if ( ! $update &amp;&amp; 'pending' === $post_status &amp;&amp; ! current_user_can( $post_type_object-&gt;cap-&gt;publish_posts ) ) {
		$post_name = '';
	} elseif ( $update &amp;&amp; 'pending' === $post_status &amp;&amp; ! current_user_can( 'publish_post', $post_ID ) ) {
		$post_name = '';
	}

	/*
	 * Create a valid post name. Drafts and pending posts are allowed to have
	 * an empty post name.
	 */
	if ( empty( $post_name ) ) {
		if ( ! in_array( $post_status, array( 'draft', 'pending', 'auto-draft' ), true ) ) {
			$post_name = sanitize_title( $post_title );
		} else {
			$post_name = '';
		}
	} else {
		// On updates, we need to check to see if it's using the old, fixed sanitization context.
		$check_name = sanitize_title( $post_name, '', 'old-save' );

		if ( $update &amp;&amp; strtolower( urlencode( $post_name ) ) == $check_name &amp;&amp; get_post_field( 'post_name', $post_ID ) == $check_name ) {
			$post_name = $check_name;
		} else { // new post, or slug has changed.
			$post_name = sanitize_title( $post_name );
		}
	}

	/*
	 * If the post date is empty (due to having been new or a draft) and status
	 * is not 'draft' or 'pending', set date to now.
	 */
	if ( empty( $postarr['post_date'] ) || '0000-00-00 00:00:00' === $postarr['post_date'] ) {
		if ( empty( $postarr['post_date_gmt'] ) || '0000-00-00 00:00:00' === $postarr['post_date_gmt'] ) {
			$post_date = current_time( 'mysql' );
		} else {
			$post_date = get_date_from_gmt( $postarr['post_date_gmt'] );
		}
	} else {
		$post_date = $postarr['post_date'];
	}

	// Validate the date.
	$mm         = substr( $post_date, 5, 2 );
	$jj         = substr( $post_date, 8, 2 );
	$aa         = substr( $post_date, 0, 4 );
	$valid_date = wp_checkdate( $mm, $jj, $aa, $post_date );
	if ( ! $valid_date ) {
		if ( $wp_error ) {
			return new WP_Error( 'invalid_date', __( 'Invalid date.' ) );
		} else {
			return 0;
		}
	}

	if ( empty( $postarr['post_date_gmt'] ) || '0000-00-00 00:00:00' === $postarr['post_date_gmt'] ) {
		if ( ! in_array( $post_status, get_post_stati( array( 'date_floating' =&gt; true ) ), true ) ) {
			$post_date_gmt = get_gmt_from_date( $post_date );
		} else {
			$post_date_gmt = '0000-00-00 00:00:00';
		}
	} else {
		$post_date_gmt = $postarr['post_date_gmt'];
	}

	if ( $update || '0000-00-00 00:00:00' === $post_date ) {
		$post_modified     = current_time( 'mysql' );
		$post_modified_gmt = current_time( 'mysql', 1 );
	} else {
		$post_modified     = $post_date;
		$post_modified_gmt = $post_date_gmt;
	}

	if ( 'attachment' !== $post_type ) {
		$now = gmdate( 'Y-m-d H:i:s' );

		if ( 'publish' === $post_status ) {
			if ( strtotime( $post_date_gmt ) - strtotime( $now ) &gt;= MINUTE_IN_SECONDS ) {
				$post_status = 'future';
			}
		} elseif ( 'future' === $post_status ) {
			if ( strtotime( $post_date_gmt ) - strtotime( $now ) &lt; MINUTE_IN_SECONDS ) {
				$post_status = 'publish';
			}
		}
	}

	// Comment status.
	if ( empty( $postarr['comment_status'] ) ) {
		if ( $update ) {
			$comment_status = 'closed';
		} else {
			$comment_status = get_default_comment_status( $post_type );
		}
	} else {
		$comment_status = $postarr['comment_status'];
	}

	// These variables are needed by compact() later.
	$post_content_filtered = $postarr['post_content_filtered'];
	$post_author           = isset( $postarr['post_author'] ) ? $postarr['post_author'] : $user_id;
	$ping_status           = empty( $postarr['ping_status'] ) ? get_default_comment_status( $post_type, 'pingback' ) : $postarr['ping_status'];
	$to_ping               = isset( $postarr['to_ping'] ) ? sanitize_trackback_urls( $postarr['to_ping'] ) : '';
	$pinged                = isset( $postarr['pinged'] ) ? $postarr['pinged'] : '';
	$import_id             = isset( $postarr['import_id'] ) ? $postarr['import_id'] : 0;

	/*
	 * The 'wp_insert_post_parent' filter expects all variables to be present.
	 * Previously, these variables would have already been extracted
	 */
	if ( isset( $postarr['menu_order'] ) ) {
		$menu_order = (int) $postarr['menu_order'];
	} else {
		$menu_order = 0;
	}

	$post_password = isset( $postarr['post_password'] ) ? $postarr['post_password'] : '';
	if ( 'private' === $post_status ) {
		$post_password = '';
	}

	if ( isset( $postarr['post_parent'] ) ) {
		$post_parent = (int) $postarr['post_parent'];
	} else {
		$post_parent = 0;
	}

	$new_postarr = array_merge(
		array(
			'ID' =&gt; $post_ID,
		),
		compact( array_diff( array_keys( $defaults ), array( 'context', 'filter' ) ) )
	);

	/**
	 * Filters the post parent -- used to check for and prevent hierarchy loops.
	 *
	 * @since 3.1.0
	 *
	 * @param int   $post_parent Post parent ID.
	 * @param int   $post_ID     Post ID.
	 * @param array $new_postarr Array of parsed post data.
	 * @param array $postarr     Array of sanitized, but otherwise unmodified post data.
	 */
	$post_parent = apply_filters( 'wp_insert_post_parent', $post_parent, $post_ID, $new_postarr, $postarr );

	/*
	 * If the post is being untrashed and it has a desired slug stored in post meta,
	 * reassign it.
	 */
	if ( 'trash' === $previous_status &amp;&amp; 'trash' !== $post_status ) {
		$desired_post_slug = get_post_meta( $post_ID, '_wp_desired_post_slug', true );

		if ( $desired_post_slug ) {
			delete_post_meta( $post_ID, '_wp_desired_post_slug' );
			$post_name = $desired_post_slug;
		}
	}

	// If a trashed post has the desired slug, change it and let this post have it.
	if ( 'trash' !== $post_status &amp;&amp; $post_name ) {
		/**
		 * Filters whether or not to add a `__trashed` suffix to trashed posts that match the name of the updated post.
		 *
		 * @since 5.4.0
		 *
		 * @param bool   $add_trashed_suffix Whether to attempt to add the suffix.
		 * @param string $post_name          The name of the post being updated.
		 * @param int    $post_ID            Post ID.
		 */
		$add_trashed_suffix = apply_filters( 'add_trashed_suffix_to_trashed_posts', true, $post_name, $post_ID );

		if ( $add_trashed_suffix ) {
			wp_add_trashed_suffix_to_post_name_for_trashed_posts( $post_name, $post_ID );
		}
	}

	// When trashing an existing post, change its slug to allow non-trashed posts to use it.
	if ( 'trash' === $post_status &amp;&amp; 'trash' !== $previous_status &amp;&amp; 'new' !== $previous_status ) {
		$post_name = wp_add_trashed_suffix_to_post_name_for_post( $post_ID );
	}

	$post_name = wp_unique_post_slug( $post_name, $post_ID, $post_status, $post_type, $post_parent );

	// Don't unslash.
	$post_mime_type = isset( $postarr['post_mime_type'] ) ? $postarr['post_mime_type'] : '';

	// Expected_slashed (everything!).
	$data = compact( 'post_author', 'post_date', 'post_date_gmt', 'post_content', 'post_content_filtered', 'post_title', 'post_excerpt', 'post_status', 'post_type', 'comment_status', 'ping_status', 'post_password', 'post_name', 'to_ping', 'pinged', 'post_modified', 'post_modified_gmt', 'post_parent', 'menu_order', 'post_mime_type', 'guid' );

	$emoji_fields = array( 'post_title', 'post_content', 'post_excerpt' );

	foreach ( $emoji_fields as $emoji_field ) {
		if ( isset( $data[ $emoji_field ] ) ) {
			$charset = $wpdb-&gt;get_col_charset( $wpdb-&gt;posts, $emoji_field );

			if ( 'utf8' === $charset ) {
				$data[ $emoji_field ] = wp_encode_emoji( $data[ $emoji_field ] );
			}
		}
	}

	if ( 'attachment' === $post_type ) {
		/**
		 * Filters attachment post data before it is updated in or added to the database.
		 *
		 * @since 3.9.0
		 * @since 5.4.1 `$unsanitized_postarr` argument added.
		 *
		 * @param array $data                An array of slashed, sanitized, and processed attachment post data.
		 * @param array $postarr             An array of slashed and sanitized attachment post data, but not processed.
		 * @param array $unsanitized_postarr An array of slashed yet *unsanitized* and unprocessed attachment post data
		 *                                   as originally passed to wp_insert_post().
		 */
		$data = apply_filters( 'wp_insert_attachment_data', $data, $postarr, $unsanitized_postarr );
	} else {
		/**
		 * Filters slashed post data just before it is inserted into the database.
		 *
		 * @since 2.7.0
		 * @since 5.4.1 `$unsanitized_postarr` argument added.
		 *
		 * @param array $data                An array of slashed, sanitized, and processed post data.
		 * @param array $postarr             An array of sanitized (and slashed) but otherwise unmodified post data.
		 * @param array $unsanitized_postarr An array of slashed yet *unsanitized* and unprocessed post data as
		 *                                   originally passed to wp_insert_post().
		 */
		$data = apply_filters( 'wp_insert_post_data', $data, $postarr, $unsanitized_postarr );
	}

	$data  = wp_unslash( $data );
	$where = array( 'ID' =&gt; $post_ID );

	if ( $update ) {
		/**
		 * Fires immediately before an existing post is updated in the database.
		 *
		 * @since 2.5.0
		 *
		 * @param int   $post_ID Post ID.
		 * @param array $data    Array of unslashed post data.
		 */
		do_action( 'pre_post_update', $post_ID, $data );

		if ( false === $wpdb-&gt;update( $wpdb-&gt;posts, $data, $where ) ) {
			if ( $wp_error ) {
				if ( 'attachment' === $post_type ) {
					$message = __( 'Could not update attachment in the database.' );
				} else {
					$message = __( 'Could not update post in the database.' );
				}

				return new WP_Error( 'db_update_error', $message, $wpdb-&gt;last_error );
			} else {
				return 0;
			}
		}
	} else {
		// If there is a suggested ID, use it if not already present.
		if ( ! empty( $import_id ) ) {
			$import_id = (int) $import_id;

			if ( ! $wpdb-&gt;get_var( $wpdb-&gt;prepare( "SELECT ID FROM $wpdb-&gt;posts WHERE ID = %d", $import_id ) ) ) {
				$data['ID'] = $import_id;
			}
		}

		if ( false === $wpdb-&gt;insert( $wpdb-&gt;posts, $data ) ) {
			if ( $wp_error ) {
				if ( 'attachment' === $post_type ) {
					$message = __( 'Could not insert attachment into the database.' );
				} else {
					$message = __( 'Could not insert post into the database.' );
				}

				return new WP_Error( 'db_insert_error', $message, $wpdb-&gt;last_error );
			} else {
				return 0;
			}
		}

		$post_ID = (int) $wpdb-&gt;insert_id;

		// Use the newly generated $post_ID.
		$where = array( 'ID' =&gt; $post_ID );
	}

	if ( empty( $data['post_name'] ) &amp;&amp; ! in_array( $data['post_status'], array( 'draft', 'pending', 'auto-draft' ), true ) ) {
		$data['post_name'] = wp_unique_post_slug( sanitize_title( $data['post_title'], $post_ID ), $post_ID, $data['post_status'], $post_type, $post_parent );

		$wpdb-&gt;update( $wpdb-&gt;posts, array( 'post_name' =&gt; $data['post_name'] ), $where );
		clean_post_cache( $post_ID );
	}

	if ( is_object_in_taxonomy( $post_type, 'category' ) ) {
		wp_set_post_categories( $post_ID, $post_category );
	}

	if ( isset( $postarr['tags_input'] ) &amp;&amp; is_object_in_taxonomy( $post_type, 'post_tag' ) ) {
		wp_set_post_tags( $post_ID, $postarr['tags_input'] );
	}

	// Add default term for all associated custom taxonomies.
	if ( 'auto-draft' !== $post_status ) {
		foreach ( get_object_taxonomies( $post_type, 'object' ) as $taxonomy =&gt; $tax_object ) {

			if ( ! empty( $tax_object-&gt;default_term ) ) {

				// Filter out empty terms.
				if ( isset( $postarr['tax_input'] ) &amp;&amp; is_array( $postarr['tax_input'][ $taxonomy ] ) ) {
					$postarr['tax_input'][ $taxonomy ] = array_filter( $postarr['tax_input'][ $taxonomy ] );
				}

				// Passed custom taxonomy list overwrites the existing list if not empty.
				$terms = wp_get_object_terms( $post_ID, $taxonomy, array( 'fields' =&gt; 'ids' ) );
				if ( ! empty( $terms ) &amp;&amp; empty( $postarr['tax_input'][ $taxonomy ] ) ) {
					$postarr['tax_input'][ $taxonomy ] = $terms;
				}

				if ( empty( $postarr['tax_input'][ $taxonomy ] ) ) {
					$default_term_id = get_option( 'default_term_' . $taxonomy );
					if ( ! empty( $default_term_id ) ) {
						$postarr['tax_input'][ $taxonomy ] = array( (int) $default_term_id );
					}
				}
			}
		}
	}

	// New-style support for all custom taxonomies.
	if ( ! empty( $postarr['tax_input'] ) ) {
		foreach ( $postarr['tax_input'] as $taxonomy =&gt; $tags ) {
			$taxonomy_obj = get_taxonomy( $taxonomy );

			if ( ! $taxonomy_obj ) {
				/* translators: %s: Taxonomy name. */
				_doing_it_wrong( __FUNCTION__, sprintf( __( 'Invalid taxonomy: %s.' ), $taxonomy ), '4.4.0' );
				continue;
			}

			// array = hierarchical, string = non-hierarchical.
			if ( is_array( $tags ) ) {
				$tags = array_filter( $tags );
			}

			if ( current_user_can( $taxonomy_obj-&gt;cap-&gt;assign_terms ) ) {
				wp_set_post_terms( $post_ID, $tags, $taxonomy );
			}
		}
	}

	if ( ! empty( $postarr['meta_input'] ) ) {
		foreach ( $postarr['meta_input'] as $field =&gt; $value ) {
			update_post_meta( $post_ID, $field, $value );
		}
	}

	$current_guid = get_post_field( 'guid', $post_ID );

	// Set GUID.
	if ( ! $update &amp;&amp; '' === $current_guid ) {
		$wpdb-&gt;update( $wpdb-&gt;posts, array( 'guid' =&gt; get_permalink( $post_ID ) ), $where );
	}

	if ( 'attachment' === $postarr['post_type'] ) {
		if ( ! empty( $postarr['file'] ) ) {
			update_attached_file( $post_ID, $postarr['file'] );
		}

		if ( ! empty( $postarr['context'] ) ) {
			add_post_meta( $post_ID, '_wp_attachment_context', $postarr['context'], true );
		}
	}

	// Set or remove featured image.
	if ( isset( $postarr['_thumbnail_id'] ) ) {
		$thumbnail_support = current_theme_supports( 'post-thumbnails', $post_type ) &amp;&amp; post_type_supports( $post_type, 'thumbnail' ) || 'revision' === $post_type;

		if ( ! $thumbnail_support &amp;&amp; 'attachment' === $post_type &amp;&amp; $post_mime_type ) {
			if ( wp_attachment_is( 'audio', $post_ID ) ) {
				$thumbnail_support = post_type_supports( 'attachment:audio', 'thumbnail' ) || current_theme_supports( 'post-thumbnails', 'attachment:audio' );
			} elseif ( wp_attachment_is( 'video', $post_ID ) ) {
				$thumbnail_support = post_type_supports( 'attachment:video', 'thumbnail' ) || current_theme_supports( 'post-thumbnails', 'attachment:video' );
			}
		}

		if ( $thumbnail_support ) {
			$thumbnail_id = intval( $postarr['_thumbnail_id'] );
			if ( -1 === $thumbnail_id ) {
				delete_post_thumbnail( $post_ID );
			} else {
				set_post_thumbnail( $post_ID, $thumbnail_id );
			}
		}
	}

	clean_post_cache( $post_ID );

	$post = get_post( $post_ID );

	if ( ! empty( $postarr['page_template'] ) ) {
		$post-&gt;page_template = $postarr['page_template'];
		$page_templates      = wp_get_theme()-&gt;get_page_templates( $post );

		if ( 'default' !== $postarr['page_template'] &amp;&amp; ! isset( $page_templates[ $postarr['page_template'] ] ) ) {
			if ( $wp_error ) {
				return new WP_Error( 'invalid_page_template', __( 'Invalid page template.' ) );
			}

			update_post_meta( $post_ID, '_wp_page_template', 'default' );
		} else {
			update_post_meta( $post_ID, '_wp_page_template', $postarr['page_template'] );
		}
	}

	if ( 'attachment' !== $postarr['post_type'] ) {
		wp_transition_post_status( $data['post_status'], $previous_status, $post );
	} else {
		if ( $update ) {
			/**
			 * Fires once an existing attachment has been updated.
			 *
			 * @since 2.0.0
			 *
			 * @param int $post_ID Attachment ID.
			 */
			do_action( 'edit_attachment', $post_ID );

			$post_after = get_post( $post_ID );

			/**
			 * Fires once an existing attachment has been updated.
			 *
			 * @since 4.4.0
			 *
			 * @param int     $post_ID      Post ID.
			 * @param WP_Post $post_after   Post object following the update.
			 * @param WP_Post $post_before  Post object before the update.
			 */
			do_action( 'attachment_updated', $post_ID, $post_after, $post_before );
		} else {

			/**
			 * Fires once an attachment has been added.
			 *
			 * @since 2.0.0
			 *
			 * @param int $post_ID Attachment ID.
			 */
			do_action( 'add_attachment', $post_ID );
		}

		return $post_ID;
	}

	if ( $update ) {
		/**
		 * Fires once an existing post has been updated.
		 *
		 * The dynamic portion of the hook name, `$post-&gt;post_type`, refers to
		 * the post type slug.
		 *
		 * @since 5.1.0
		 *
		 * @param int     $post_ID Post ID.
		 * @param WP_Post $post    Post object.
		 */
		do_action( "edit_post_{$post-&gt;post_type}", $post_ID, $post );

		/**
		 * Fires once an existing post has been updated.
		 *
		 * @since 1.2.0
		 *
		 * @param int     $post_ID Post ID.
		 * @param WP_Post $post    Post object.
		 */
		do_action( 'edit_post', $post_ID, $post );

		$post_after = get_post( $post_ID );

		/**
		 * Fires once an existing post has been updated.
		 *
		 * @since 3.0.0
		 *
		 * @param int     $post_ID      Post ID.
		 * @param WP_Post $post_after   Post object following the update.
		 * @param WP_Post $post_before  Post object before the update.
		 */
		do_action( 'post_updated', $post_ID, $post_after, $post_before );
	}

	/**
	 * Fires once a post has been saved.
	 *
	 * The dynamic portion of the hook name, `$post-&gt;post_type`, refers to
	 * the post type slug.
	 *
	 * @since 3.7.0
	 *
	 * @param int     $post_ID Post ID.
	 * @param WP_Post $post    Post object.
	 * @param bool    $update  Whether this is an existing post being updated.
	 */
	do_action( "save_post_{$post-&gt;post_type}", $post_ID, $post, $update );

	/**
	 * Fires once a post has been saved.
	 *
	 * @since 1.5.0
	 *
	 * @param int     $post_ID Post ID.
	 * @param WP_Post $post    Post object.
	 * @param bool    $update  Whether this is an existing post being updated.
	 */
	do_action( 'save_post', $post_ID, $post, $update );

	/**
	 * Fires once a post has been saved.
	 *
	 * @since 2.0.0
	 *
	 * @param int     $post_ID Post ID.
	 * @param WP_Post $post    Post object.
	 * @param bool    $update  Whether this is an existing post being updated.
	 */
	do_action( 'wp_insert_post', $post_ID, $post, $update );

	return $post_ID;
}</pre>  </section>  <section class="related"> <h2 class="toc-heading" id="related" tabindex="-1">Related </h2> <article class="uses"> <h3 class="toc-heading" id="uses" tabindex="-1">Uses </h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/add_trashed_suffix_to_trashed_posts">add_trashed_suffix_to_trashed_posts</a> </td> <td class="related-desc"> <p>Filters whether or not to add a <code>__trashed</code> suffix to trashed posts that match the name of the updated post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/edit_post_post-post_type">edit_post_{$post-&gt;post_type}</a> </td> <td class="related-desc"> <p>Fires once an existing post has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_add_trashed_suffix_to_post_name_for_trashed_posts">wp_add_trashed_suffix_to_post_name_for_trashed_posts()</a> </td> <td class="related-desc"> <p>Adds a suffix if any trashed posts have a given slug.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_add_trashed_suffix_to_post_name_for_post">wp_add_trashed_suffix_to_post_name_for_post()</a> </td> <td class="related-desc"> <p>Adds a trashed suffix for a given post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/attachment_updated">attachment_updated</a> </td> <td class="related-desc"> <p>Fires once an existing attachment has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/comment.php:</span> <a href="get_default_comment_status">get_default_comment_status()</a> </td> <td class="related-desc"> <p>Gets the default comment status for a post type.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/add_attachment">add_attachment</a> </td> <td class="related-desc"> <p>Fires once an attachment has been added.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/get_col_charset">wpdb::get_col_charset()</a> </td> <td class="related-desc"> <p>Retrieves the character set for the given column.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="wp_encode_emoji">wp_encode_emoji()</a> </td> <td class="related-desc"> <p>Convert emoji characters to their equivalent HTML entity.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_attachment_is">wp_attachment_is()</a> </td> <td class="related-desc"> <p>Verifies an attachment is of a given type.</p> </td> </tr> <tr> <td> <span>wp-includes/capabilities.php:</span> <a href="current_user_can">current_user_can()</a> </td> <td class="related-desc"> <p>Returns whether the current user has the specified capability.</p> </td> </tr> <tr> <td> <span>wp-includes/theme.php:</span> <a href="current_theme_supports">current_theme_supports()</a> </td> <td class="related-desc"> <p>Checks a theme’s support for a given feature.</p> </td> </tr> <tr> <td> <span>wp-includes/theme.php:</span> <a href="wp_get_theme">wp_get_theme()</a> </td> <td class="related-desc"> <p>Gets a <a href="../classes/wp_theme">WP_Theme</a> object for a theme.</p> </td> </tr> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="__">__()</a> </td> <td class="related-desc"> <p>Retrieve the translation of $text.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="sanitize_trackback_urls">sanitize_trackback_urls()</a> </td> <td class="related-desc"> <p>Sanitize space or carriage return separated URLs that are used to send trackbacks.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="wp_unslash">wp_unslash()</a> </td> <td class="related-desc"> <p>Remove slashes from a string or array of strings.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="get_date_from_gmt">get_date_from_gmt()</a> </td> <td class="related-desc"> <p>Given a date in UTC or GMT timezone, returns that date in the timezone of the site.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="get_gmt_from_date">get_gmt_from_date()</a> </td> <td class="related-desc"> <p>Given a date in the timezone of the site, returns that date in UTC.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="sanitize_title">sanitize_title()</a> </td> <td class="related-desc"> <p>Sanitizes a string into a slug, which can be used in URLs or HTML attributes.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-theme.php:</span> <a href="../classes/wp_theme/get_page_templates">WP_Theme::get_page_templates()</a> </td> <td class="related-desc"> <p>Returns the theme’s post templates for a given post type.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="wp_checkdate">wp_checkdate()</a> </td> <td class="related-desc"> <p>Test if the supplied date is valid for the Gregorian calendar.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="_doing_it_wrong">_doing_it_wrong()</a> </td> <td class="related-desc"> <p>Mark something as being incorrectly called.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="wp_parse_args">wp_parse_args()</a> </td> <td class="related-desc"> <p>Merge user defined arguments into defaults array.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="current_time">current_time()</a> </td> <td class="related-desc"> <p>Retrieves the current time based on specified type.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="is_object_in_taxonomy">is_object_in_taxonomy()</a> </td> <td class="related-desc"> <p>Determine if the given object type is associated with the given taxonomy.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="wp_get_object_terms">wp_get_object_terms()</a> </td> <td class="related-desc"> <p>Retrieves the terms associated with the given object(s), in the supplied taxonomies.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="get_object_taxonomies">get_object_taxonomies()</a> </td> <td class="related-desc"> <p>Return the names or objects of the taxonomies which are registered for the requested object or object type, such as a post object or post type name.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="get_taxonomy">get_taxonomy()</a> </td> <td class="related-desc"> <p>Retrieves the taxonomy object of $taxonomy.</p> </td> </tr> <tr> <td> <span>wp-includes/link-template.php:</span> <a href="get_permalink">get_permalink()</a> </td> <td class="related-desc"> <p>Retrieves the full permalink for the current post or post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="apply_filters">apply_filters()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="do_action">do_action()</a> </td> <td class="related-desc"> <p>Execute functions hooked on a specific action hook.</p> </td> </tr> <tr> <td> <span>wp-includes/option.php:</span> <a href="get_option">get_option()</a> </td> <td class="related-desc"> <p>Retrieves an option value based on an option name.</p> </td> </tr> <tr> <td> <span>wp-includes/user.php:</span> <a href="get_current_user_id">get_current_user_id()</a> </td> <td class="related-desc"> <p>Get the current user’s ID</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="clean_post_cache">clean_post_cache()</a> </td> <td class="related-desc"> <p>Will clean the post in the cache.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="delete_post_thumbnail">delete_post_thumbnail()</a> </td> <td class="related-desc"> <p>Removes the thumbnail (featured image) from the given post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="set_post_thumbnail">set_post_thumbnail()</a> </td> <td class="related-desc"> <p>Sets the post thumbnail (featured image) for the given post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_attachment_data">wp_insert_attachment_data</a> </td> <td class="related-desc"> <p>Filters attachment post data before it is updated in or added to the database.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/edit_attachment">edit_attachment</a> </td> <td class="related-desc"> <p>Fires once an existing attachment has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_unique_post_slug">wp_unique_post_slug()</a> </td> <td class="related-desc"> <p>Computes a unique slug for the post, when given the desired slug and some post details.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_set_post_categories">wp_set_post_categories()</a> </td> <td class="related-desc"> <p>Set categories for a post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_set_post_tags">wp_set_post_tags()</a> </td> <td class="related-desc"> <p>Set the tags for a post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_set_post_terms">wp_set_post_terms()</a> </td> <td class="related-desc"> <p>Set the terms for a post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_transition_post_status">wp_transition_post_status()</a> </td> <td class="related-desc"> <p>Fires actions related to the transitioning of a post’s status.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_post_empty_content">wp_insert_post_empty_content</a> </td> <td class="related-desc"> <p>Filters whether the post should be considered “empty”.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_post_parent">wp_insert_post_parent</a> </td> <td class="related-desc"> <p>Filters the post parent — used to check for and prevent hierarchy loops.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_post_data">wp_insert_post_data</a> </td> <td class="related-desc"> <p>Filters slashed post data just before it is inserted into the database.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/pre_post_update">pre_post_update</a> </td> <td class="related-desc"> <p>Fires immediately before an existing post is updated in the database.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/edit_post">edit_post</a> </td> <td class="related-desc"> <p>Fires once an existing post has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/post_updated">post_updated</a> </td> <td class="related-desc"> <p>Fires once an existing post has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/save_post_post-post_type">save_post_{$post-&gt;post_type}</a> </td> <td class="related-desc"> <p>Fires once a post has been saved.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/save_post">save_post</a> </td> <td class="related-desc"> <p>Fires once a post has been saved.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_post">wp_insert_post</a> </td> <td class="related-desc"> <p>Fires once a post has been saved.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="sanitize_post">sanitize_post()</a> </td> <td class="related-desc"> <p>Sanitize every post field.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="post_type_supports">post_type_supports()</a> </td> <td class="related-desc"> <p>Check a post type’s support for a given feature.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post_meta">get_post_meta()</a> </td> <td class="related-desc"> <p>Retrieves a post meta field for the given post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="delete_post_meta">delete_post_meta()</a> </td> <td class="related-desc"> <p>Deletes a post meta field for the given post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="update_post_meta">update_post_meta()</a> </td> <td class="related-desc"> <p>Updates a post meta field based on the given post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="add_post_meta">add_post_meta()</a> </td> <td class="related-desc"> <p>Adds a meta field to the given post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post">get_post()</a> </td> <td class="related-desc"> <p>Retrieves post data given a post ID or post object.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post_field">get_post_field()</a> </td> <td class="related-desc"> <p>Retrieve data from a post field based on Post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post_type_object">get_post_type_object()</a> </td> <td class="related-desc"> <p>Retrieves a post type object by name.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post_stati">get_post_stati()</a> </td> <td class="related-desc"> <p>Get a list of post statuses.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="update_attached_file">update_attached_file()</a> </td> <td class="related-desc"> <p>Update attachment file path based on attachment ID.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/update">wpdb::update()</a> </td> <td class="related-desc"> <p>Updates a row in the table.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/get_var">wpdb::get_var()</a> </td> <td class="related-desc"> <p>Retrieves one variable from the database.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/insert">wpdb::insert()</a> </td> <td class="related-desc"> <p>Inserts a row into the table.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/prepare">wpdb::prepare()</a> </td> <td class="related-desc"> <p>Prepares a SQL query for safe execution.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-error.php:</span> <a href="../classes/wp_error/__construct">WP_Error::__construct()</a> </td> <td class="related-desc"> <p>Initialize the error.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 class="toc-heading" id="used-by" tabindex="-1">Used By </h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/user.php:</span> <a href="wp_create_user_request">wp_create_user_request()</a> </td> <td class="related-desc"> <p>Create and log a user request to perform a specific action.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-customize-manager.php:</span> <a href="../classes/wp_customize_manager/save_changeset_post">WP_Customize_Manager::save_changeset_post()</a> </td> <td class="related-desc"> <p>Save the post for the loaded changeset.</p> </td> </tr> <tr> <td> <span>wp-includes/theme.php:</span> <a href="wp_update_custom_css_post">wp_update_custom_css_post()</a> </td> <td class="related-desc"> <p>Updates the <code>custom_css</code> post for a given theme.</p> </td> </tr> <tr> <td> <span>wp-includes/rest-api/endpoints/class-wp-rest-posts-controller.php:</span> <a href="../classes/wp_rest_posts_controller/create_item">WP_REST_Posts_Controller::create_item()</a> </td> <td class="related-desc"> <p>Creates a single post.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-customize-nav-menus.php:</span> <a href="../classes/wp_customize_nav_menus/insert_auto_draft_post">WP_Customize_Nav_Menus::insert_auto_draft_post()</a> </td> <td class="related-desc"> <p>Add a new <code>auto-draft</code> post.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/post.php:</span> <a href="wp_write_post">wp_write_post()</a> </td> <td class="related-desc"> <p>Creates a new post from the “Write Post” form using $_POST information.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/post.php:</span> <a href="get_default_post_to_edit">get_default_post_to_edit()</a> </td> <td class="related-desc"> <p>Default post information to use when populating the “Write Post” form.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-embed.php:</span> <a href="../classes/wp_embed/shortcode">WP_Embed::shortcode()</a> </td> <td class="related-desc"> <p>The <a href="do_shortcode">do_shortcode()</a> callback function.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_insert_attachment">wp_insert_attachment()</a> </td> <td class="related-desc"> <p>Insert an attachment.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_update_post">wp_update_post()</a> </td> <td class="related-desc"> <p>Update a post with new post data.</p> </td> </tr> <tr> <td> <span>wp-includes/revision.php:</span> <a href="_wp_put_post_revision">_wp_put_post_revision()</a> </td> <td class="related-desc"> <p>Inserts post data into the posts table as a post revision.</p> </td> </tr> <tr> <td> <span>wp-includes/nav-menu.php:</span> <a href="wp_update_nav_menu_item">wp_update_nav_menu_item()</a> </td> <td class="related-desc"> <p>Save the properties of a menu item or create a new one.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-xmlrpc-server.php:</span> <a href="../classes/wp_xmlrpc_server/blogger_newpost">wp_xmlrpc_server::blogger_newPost()</a> </td> <td class="related-desc"> <p>Creates new post.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-xmlrpc-server.php:</span> <a href="../classes/wp_xmlrpc_server/mw_newpost">wp_xmlrpc_server::mw_newPost()</a> </td> <td class="related-desc"> <p>Create a new post.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-xmlrpc-server.php:</span> <a href="../classes/wp_xmlrpc_server/_insert_post">wp_xmlrpc_server::_insert_post()</a> </td> <td class="related-desc"> <p>Helper method for wp_newPost() and wp_editPost(), containing shared logic.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section class="changelog"> <h2 class="toc-heading" id="changelog" tabindex="-1">Changelog </h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.4.0/" alt="WordPress 4.4.0">4.4.0</a></td> <td><span class="since-description">A 'meta_input' array can now be passed to <code>$postarr</code> to add post meta data.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.2.0/" alt="WordPress 4.2.0">4.2.0</a></td> <td><span class="since-description">Support was added for encoding emoji in the post title, content, and excerpt.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/1.0.0/" alt="WordPress 1.0.0">1.0.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2003–2019 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/wp_insert_post" class="_attribution-link">https://developer.wordpress.org/reference/functions/wp_insert_post</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
