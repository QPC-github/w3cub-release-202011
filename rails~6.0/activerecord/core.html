
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ActiveRecord&#58;&#58;Core - Ruby on Rails 6.0 - W3cubDocs</title>
  
  <meta name="description" content=" Returns fully resolved ActiveRecord&#58;&#58;DatabaseConfigurations object ">
  <meta name="keywords" content="module, activerecord, core, ruby, on, rails, rails~6.0">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/rails~6.0/activerecord/core.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/rails~6.0.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/rails~6.0/" class="_nav-link" title="" style="margin-left:0;">Ruby on Rails 6.0</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _rdoc">
				
				
<h1 id="module-ActiveRecord::Core" class="module"> module ActiveRecord::Core </h1>  <section id="5Buntitled-5D" class="documentation-section"> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-configurations"> <span class="method-name">configurations</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="configurations-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 56
def self.configurations
  @@configurations
end</pre> </div> <p>Returns fully resolved <a href="databaseconfigurations">ActiveRecord::DatabaseConfigurations</a> object</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-configurations-3D"> <span class="method-name">configurations=</span><span class="method-args">(config)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="configurations-3D-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 50
def self.configurations=(config)
  @@configurations = ActiveRecord::DatabaseConfigurations.new(config)
end</pre> </div> <p>Contains the database configuration - as is typically stored in config/database.yml - as an <a href="databaseconfigurations">ActiveRecord::DatabaseConfigurations</a> object.</p> <p>For example, the following database.yml…</p> <pre>development:
  adapter: sqlite3
  database: db/development.sqlite3

production:
  adapter: sqlite3
  database: db/production.sqlite3</pre> <p>…would result in <a href="core#method-c-configurations">::configurations</a> to look like this:</p> <pre>#&lt;ActiveRecord::DatabaseConfigurations:0x00007fd1acbdf800 @configurations=[
  #&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbded10 @env_name="development",
    @spec_name="primary", @config={"adapter"=&gt;"sqlite3", "database"=&gt;"db/development.sqlite3"}&gt;,
  #&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbdea90 @env_name="production",
    @spec_name="primary", @config={"adapter"=&gt;"mysql2", "database"=&gt;"db/production.sqlite3"}&gt;
]&gt;</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-connection_handler"> <span class="method-name">connection_handler</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="connection_handler-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 135
def self.connection_handler
  Thread.current.thread_variable_get("ar_connection_handler") || default_connection_handler
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-connection_handler-3D"> <span class="method-name">connection_handler=</span><span class="method-args">(handler)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="connection_handler-3D-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 139
def self.connection_handler=(handler)
  Thread.current.thread_variable_set("ar_connection_handler", handler)
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(attributes = nil) { |self| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 319
def initialize(attributes = nil)
  @new_record = true
  @attributes = self.class._default_attributes.deep_dup

  init_internals
  initialize_internals_callback

  assign_attributes(attributes) if attributes

  yield self if block_given?
  _run_initialize_callbacks
end</pre> </div> <p>New objects can be instantiated as either empty (pass no construction parameter) or pre-set with attributes but not yet saved (pass a hash with key names matching the associated table column names). In both instances, valid attribute keys are determined by the column names of the associated table – hence you can't have attributes that aren't part of the table columns.</p> <h4 id="method-c-new-label-Example-3A">Example:</h4> <pre class="ruby" data-language="ruby"># Instantiates a single new object
User.new(first_name: 'Jamie')
</pre>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-3C-3D-3E"> <span class="method-name">&lt;=&gt;</span><span class="method-args">(other_object)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="3C-3D-3E-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 471
def &lt;=&gt;(other_object)
  if other_object.is_a?(self.class)
    to_key &lt;=&gt; other_object.to_key
  else
    super
  end
end</pre> </div> <p>Allows sort on objects</p> <div class="method-calls-super"> Calls superclass method </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-3D-3D"> <span class="method-name">==</span><span class="method-args">(comparison_object)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="3D-3D-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 438
def ==(comparison_object)
  super ||
    comparison_object.instance_of?(self.class) &amp;&amp;
    !id.nil? &amp;&amp;
    comparison_object.id == id
end</pre> </div> <p>Returns true if <code>comparison_object</code> is the same exact object, or <code>comparison_object</code> is of the same type and <code>self</code> has an ID and it is equal to <code>comparison_object.id</code>.</p> <p>Note that new records are different from any other record by definition, unless the other record is the receiver itself. Besides, if you fetch existing records with <code>select</code> and leave the ID out, you're on your own, this predicate will return false.</p> <p>Note also that destroying a record preserves its ID in the model instance, so deleted models are still comparable.</p> <div class="method-calls-super"> Calls superclass method </div>  </div> <div class="aliases"> Also aliased as: <a href="core#method-i-eql-3F">eql?</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-clone"> <span class="method-name">clone</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="clone-source"> <pre class="c" data-language="c"># File activerecord/lib/active_record/core.rb, line 387
    </pre> </div> <p>Identical to Ruby's clone method. This is a “shallow” copy. Be warned that your attributes are not copied. That means that modifying attributes of the clone will modify the original, since they will both point to the same attributes hash. If you need a copy of your attributes hash, please use the <a href="core#method-i-dup">dup</a> method.</p> <pre class="ruby" data-language="ruby">user = User.first
new_user = user.clone
user.name               # =&gt; "Bob"
new_user.name = "Joe"
user.name               # =&gt; "Joe"

user.object_id == new_user.object_id            # =&gt; false
user.name.object_id == new_user.name.object_id  # =&gt; true

user.name.object_id == user.dup.name.object_id  # =&gt; false
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-connection_handler"> <span class="method-name">connection_handler</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="connection_handler-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 498
def connection_handler
  self.class.connection_handler
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-dup"> <span class="method-name">dup</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="dup-source"> <pre class="c" data-language="c"># File activerecord/lib/active_record/core.rb, line 396
    </pre> </div> <p>Duped objects have no id assigned and are treated as new records. Note that this is a “shallow” copy as it copies the object's attributes only, not its associations. The extent of a “deep” copy is application specific and is therefore left to the application to implement according to its need. The dup method does not preserve the timestamps (created|updated)_(at|on).</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-encode_with"> <span class="method-name">encode_with</span><span class="method-args">(coder)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="encode_with-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 423
def encode_with(coder)
  self.class.yaml_encoder.encode(@attributes, coder)
  coder["new_record"] = new_record?
  coder["active_record_yaml_version"] = 2
end</pre> </div> <p>Populate <code>coder</code> with attributes about this record that should be serialized. The structure of <code>coder</code> defined in this method is guaranteed to match the structure of <code>coder</code> passed to the <a href="core#method-i-init_with">init_with</a> method.</p> <p>Example:</p> <pre class="ruby" data-language="ruby">class Post &lt; ActiveRecord::Base
end
coder = {}
Post.new.encode_with(coder)
coder # =&gt; {"attributes" =&gt; {"id" =&gt; nil, ... }}
</pre>  </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-eql-3F"> <span class="method-name">eql?</span><span class="method-args">(comparison_object)</span> </div>  <div class="aliases"> Alias for: <a href="core#method-i-3D-3D">==</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-freeze"> <span class="method-name">freeze</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="freeze-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 459
def freeze
  @attributes = @attributes.clone.freeze
  self
end</pre> </div> <p>Clone and freeze the attributes hash such that associations are still accessible, even on destroyed records, but cloned models will not be frozen.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-frozen-3F"> <span class="method-name">frozen?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="frozen-3F-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 465
def frozen?
  sync_with_transaction_state if @transaction_state&amp;.finalized?
  @attributes.frozen?
end</pre> </div> <p>Returns <code>true</code> if the attributes hash has been frozen.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-hash"> <span class="method-name">hash</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="hash-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 448
def hash
  if id
    self.class.hash ^ id.hash
  else
    super
  end
end</pre> </div> <p>Delegates to id in order to allow two records of the same type and id to work with something like:</p> <pre class="ruby" data-language="ruby">[ Person.find(1), Person.find(2), Person.find(3) ] &amp; [ Person.find(1), Person.find(4) ] # =&gt; [ Person.find(1) ]
</pre> <div class="method-calls-super"> Calls superclass method </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-init_with"> <span class="method-name">init_with</span><span class="method-args">(coder, &amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="init_with-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 346
def init_with(coder, &amp;block)
  coder = LegacyYamlAdapter.convert(self.class, coder)
  attributes = self.class.yaml_encoder.decode(coder)
  init_with_attributes(attributes, coder["new_record"], &amp;block)
end</pre> </div> <p>Initialize an empty model object from <code>coder</code>. <code>coder</code> should be the result of previously encoding an Active Record model, using <a href="core#method-i-encode_with">encode_with</a>.</p> <pre class="ruby" data-language="ruby">class Post &lt; ActiveRecord::Base
end

old_post = Post.new(title: "hello world")
coder = {}
old_post.encode_with(coder)

post = Post.allocate
post.init_with(coder)
post.title # =&gt; 'hello world'
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-inspect"> <span class="method-name">inspect</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 503
def inspect
  # We check defined?(@attributes) not to issue warnings if the object is
  # allocated but not initialized.
  inspection = if defined?(@attributes) &amp;&amp; @attributes
    self.class.attribute_names.collect do |name|
      if has_attribute?(name)
        attr = _read_attribute(name)
        value = if attr.nil?
          attr.inspect
        else
          attr = format_for_inspect(attr)
          inspection_filter.filter_param(name, attr)
        end
        "#{name}: #{value}"
      end
    end.compact.join(", ")
  else
    "not initialized"
  end

  "#&lt;#{self.class} #{inspection}&gt;"
end</pre> </div> <p>Returns the contents of the record as a nicely formatted string.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-pretty_print"> <span class="method-name">pretty_print</span><span class="method-args">(pp)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="pretty_print-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 528
def pretty_print(pp)
  return super if custom_inspect_method_defined?
  pp.object_address_group(self) do
    if defined?(@attributes) &amp;&amp; @attributes
      attr_names = self.class.attribute_names.select { |name| has_attribute?(name) }
      pp.seplist(attr_names, proc { pp.text "," }) do |attr_name|
        pp.breakable " "
        pp.group(1) do
          pp.text attr_name
          pp.text ":"
          pp.breakable
          value = _read_attribute(attr_name)
          value = inspection_filter.filter_param(attr_name, value) unless value.nil?
          pp.pp value
        end
      end
    else
      pp.breakable " "
      pp.text "not initialized"
    end
  end
end</pre> </div> <p>Takes a PP and prettily prints this record to it, allowing you to get a nice result from <code>pp record</code> when pp is required.</p> <div class="method-calls-super"> Calls superclass method </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-readonly-21"> <span class="method-name">readonly!</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="readonly-21-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 494
def readonly!
  @readonly = true
end</pre> </div> <p>Marks this record as read only.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-readonly-3F"> <span class="method-name">readonly?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="readonly-3F-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 489
def readonly?
  @readonly
end</pre> </div> <p>Returns <code>true</code> if the record is read only. Records loaded through joins with piggy-back attributes will be marked as read only since they cannot be saved.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-slice"> <span class="method-name">slice</span><span class="method-args">(*methods)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="slice-source"> <pre class="ruby" data-language="ruby"># File activerecord/lib/active_record/core.rb, line 552
def slice(*methods)
  Hash[methods.flatten.map! { |method| [method, public_send(method)] }].with_indifferent_access
end</pre> </div> <p>Returns a hash of the given methods with their names as keys and returned values as values.</p>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2004–2019 David Heinemeier Hansson<br>Licensed under the MIT License.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
