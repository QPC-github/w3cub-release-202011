
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Postcss-loader - Webpack 4 - W3cubDocs</title>
  
  <meta name="description" content=" Loader for webpack to process CSS with PostCSS ">
  <meta name="keywords" content="postcss-loader, webpack, webpack~4">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/webpack~4/loaders/postcss-loader.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/webpack~4.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/webpack~4/" class="_nav-link" title="" style="margin-left:0;">webpack 4</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _webpack">
				
				
<h1>postcss-loader</h1>
<div> <p>Loader for <a href="https://webpack.js.org/">webpack</a> to process CSS with <a href="https://postcss.org/">PostCSS</a></p> </div> <h2 id="install">Install
</h2> <pre data-language="bash">npm i -D postcss-loader</pre> <h2 id="usage">Usage
</h2> <h3 id="configuration">
<code>Configuration</code>
</h3> <p><strong><code>postcss.config.js</code></strong></p> <pre data-language="js">module.exports = {
  parser: 'sugarss',
  plugins: {
    'postcss-import': {},
    'postcss-preset-env': {},
    'cssnano': {}
  }
}</pre> <p>You can read more about common PostCSS Config <a href="https://github.com/michael-ciniawsky/postcss-load-config">here</a>.</p> <h3 id="config-cascade">
<code>Config Cascade</code>
</h3> <p>You can use different <code>postcss.config.js</code> files in different directories. Config lookup starts from <code>path.dirname(file)</code> and walks the file tree upwards until a config file is found.</p> <pre data-language="js">|– components
| |– component
| | |– index.js
| | |– index.png
| | |– style.css (1)
| | |– postcss.config.js (1)
| |– component
| | |– index.js
| | |– image.png
| | |– style.css (2)
|
|– postcss.config.js (1 &amp;&amp; 2 (recommended))
|– webpack.config.js
|
|– package.json
</pre> <p>After setting up your <code>postcss.config.js</code>, add <code>postcss-loader</code> to your <code>webpack.config.js</code>. You can use it standalone or in conjunction with <code>css-loader</code> (recommended). Use it <strong>after</strong> <code>css-loader</code> and <code>style-loader</code>, but <strong>before</strong> other preprocessor loaders like e.g <code>sass|less|stylus-loader</code>, if you use any.</p> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [ 'style-loader', 'postcss-loader' ]
      }
    ]
  }
}</pre> <blockquote> <p>⚠️ When <code>postcss-loader</code> is used standalone (without <code>css-loader</code>) don't use <code>@import</code> in your CSS, since this can lead to quite bloated bundles</p> </blockquote> <p><strong><code>webpack.config.js</code> (recommended)</strong></p> <pre data-language="js">module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          'style-loader',
          { loader: 'css-loader', options: { importLoaders: 1 } },
          'postcss-loader'
        ]
      }
    ]
  }
}</pre> <h2 id="options">Options
</h2> <table> <thead> <tr> <th align="center">Name</th> <th align="center">Type</th> <th align="center">Default</th> <th align="left">Description</th> </tr> </thead> <tbody> <tr> <td align="center"> <div class="content">
<p><a href="#exec"><code>exec</code></a></p>
<p class="description mobile"><code>{Boolean}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{Boolean}</code></td> <td align="center"><code>undefined</code></td> <td align="left">Enable PostCSS Parser support in <code>CSS-in-JS</code>
</td> </tr> <tr> <td align="center"> <div class="content">
<p><a href="#syntaxes"><code>parser</code></a></p>
<p class="description mobile"><code>{String\|Object}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{String\|Object}</code></td> <td align="center"><code>undefined</code></td> <td align="left">Set PostCSS Parser</td> </tr> <tr> <td align="center"> <div class="content">
<p><a href="#syntaxes"><code>syntax</code></a></p>
<p class="description mobile"><code>{String\|Object}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{String\|Object}</code></td> <td align="center"><code>undefined</code></td> <td align="left">Set PostCSS Syntax</td> </tr> <tr> <td align="center"> <div class="content">
<p><a href="#syntaxes"><code>stringifier</code></a></p>
<p class="description mobile"><code>{String\|Object}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{String\|Object}</code></td> <td align="center"><code>undefined</code></td> <td align="left">Set PostCSS Stringifier</td> </tr> <tr> <td align="center"> <div class="content">
<p><a href="#config"><code>config</code></a></p>
<p class="description mobile"><code>{Object}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{Object}</code></td> <td align="center"><code>undefined</code></td> <td align="left">Set <code>postcss.config.js</code> config path &amp;&amp; <code>ctx</code>
</td> </tr> <tr> <td align="center"> <div class="content">
<p><a href="#plugins"><code>plugins</code></a></p>
<p class="description mobile"><code>{Array\|Function}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{Array\|Function}</code></td> <td align="center"><code>[]</code></td> <td align="left">Set PostCSS Plugins</td> </tr> <tr> <td align="center"> <div class="content">
<p><a href="#sourcemap"><code>sourceMap</code></a></p>
<p class="description mobile"><code>{String\|Boolean}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{String\|Boolean}</code></td> <td align="center"><code>false</code></td> <td align="left">Enable Source Maps</td> </tr> </tbody> </table> <h3 id="exec">
<code>Exec</code>
</h3> <p>If you use JS styles without the <a href="https://github.com/postcss/postcss-js"><code>postcss-js</code></a> parser, add the <code>exec</code> option.</p> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  test: /\.style.js$/,
  use: [
    'style-loader',
    { loader: 'css-loader', options: { importLoaders: 1 } },
    { loader: 'postcss-loader', options: { parser: 'sugarss', exec: true } }
  ]
}</pre> <h3 id="config">
<code>Config</code>
</h3> <table> <thead> <tr> <th align="center">Name</th> <th align="center">Type</th> <th align="center">Default</th> <th align="left">Description</th> </tr> </thead> <tbody> <tr> <td align="center"> <div class="content">
<p><a href="#path"><code>path</code></a></p>
<p class="description mobile"><code>{String}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{String}</code></td> <td align="center"><code>undefined</code></td> <td align="left">PostCSS Config Directory</td> </tr> <tr> <td align="center"> <div class="content">
<p><a href="#context-ctx"><code>context</code></a></p>
<p class="description mobile"><code>{Object}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{Object}</code></td> <td align="center"><code>undefined</code></td> <td align="left">PostCSS Config Context</td> </tr> </tbody> </table> <h4 id="path">
<code>Path</code>
</h4> <p>You can manually specify the path to search for your config (<code>postcss.config.js</code>) with the <code>config.path</code> option. This is needed if you store your config in a separate e.g <code>./config || ./.config</code> folder.</p> <blockquote> <p>⚠️ Otherwise it is <strong>unnecessary</strong> to set this option and is <strong>not</strong> recommended</p> <p>⚠️ Note that you <strong>can't</strong> use a <strong>filename</strong> other than the <a href="https://github.com/michael-ciniawsky/postcss-load-config#usage">supported config formats</a> (e.g <code>.postcssrc.js</code>, <code>postcss.config.js</code>), this option only allows you to manually specify the <strong>directory</strong> where config lookup should <strong>start</strong> from</p> </blockquote> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  loader: 'postcss-loader',
  options: {
    config: {
      path: 'path/to/.config/' ✅
      path: 'path/to/.config/css.config.js' ❌
    }
  }
}</pre> <h4 id="context-ctx">
<code>Context (ctx)</code>
</h4> <table> <thead> <tr> <th align="center">Name</th> <th align="center">Type</th> <th align="center">Default</th> <th align="left">Description</th> </tr> </thead> <tbody> <tr> <td align="center"> <div class="content">
<p><code>env</code></p>
<p class="description mobile"><code>{String}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{String}</code></td> <td align="center"><code>'development'</code></td> <td align="left"><code>process.env.NODE_ENV</code></td> </tr> <tr> <td align="center"> <div class="content">
<p><code>file</code></p>
<p class="description mobile"><code>{Object}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{Object}</code></td> <td align="center"><code>loader.resourcePath</code></td> <td align="left">
<code>extname</code> , <code>dirname</code> , <code>basename</code>
</td> </tr> <tr> <td align="center"> <div class="content">
<p><code>options</code></p>
<p class="description mobile"><code>{Object}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{Object}</code></td> <td align="center"><code>{}</code></td> <td align="left">Options</td> </tr> </tbody> </table> <p><code>postcss-loader</code> exposes context <code>ctx</code> to the config file, making your <code>postcss.config.js</code> dynamic, so can use it to do some real magic ✨</p> <p><strong><code>postcss.config.js</code></strong></p> <pre data-language="js">module.exports = ({ file, options, env }) =&gt; ({
  parser: file.extname === '.sss' ? 'sugarss' : false,
  plugins: {
    'postcss-import': { root: file.dirname },
    'postcss-preset-env': options['postcss-preset-env'] ? options['postcss-preset-env'] : false,
    'cssnano': env === 'production' ? options.cssnano : false
  }
})</pre> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  loader: 'postcss-loader',
  options: {
    config: {
      ctx: {
        'postcss-preset-env': {...options},
        cssnano: {...options},
      }
    }
  }
}</pre> <h3 id="plugins">
<code>Plugins</code>
</h3> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  loader: 'postcss-loader',
  options: {
    ident: 'postcss',
    plugins: (loader) =&gt; [
      require('postcss-import')({ root: loader.resourcePath }),
      require('postcss-preset-env')(),
      require('cssnano')()
    ]
  }
}</pre> <blockquote> <p>⚠️ webpack requires an identifier (<code>ident</code>) in <code>options</code> when <code>{Function}/require</code> is used (Complex Options). The <code>ident</code> can be freely named as long as it is unique. It's recommended to name it (<code>ident: 'postcss'</code>)</p> </blockquote> <h3 id="syntaxes">
<code>Syntaxes</code>
</h3> <table> <thead> <tr> <th align="center">Name</th> <th align="center">Type</th> <th align="center">Default</th> <th align="left">Description</th> </tr> </thead> <tbody> <tr> <td align="center"> <div class="content">
<p><a href="#parser"><code>parser</code></a></p>
<p class="description mobile"><code>{String\|Function}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{String\|Function}</code></td> <td align="center"><code>undefined</code></td> <td align="left">Custom PostCSS Parser</td> </tr> <tr> <td align="center"> <div class="content">
<p><a href="#syntax"><code>syntax</code></a></p>
<p class="description mobile"><code>{String\|Function}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{String\|Function}</code></td> <td align="center"><code>undefined</code></td> <td align="left">Custom PostCSS Syntax</td> </tr> <tr> <td align="center"> <div class="content">
<p><a href="#stringifier"><code>stringifier</code></a></p>
<p class="description mobile"><code>{String\|Function}</code></p>
</div>
</td> <td align="center" class="description desktop"><code>{String\|Function}</code></td> <td align="center"><code>undefined</code></td> <td align="left">Custom PostCSS Stringifier</td> </tr> </tbody> </table> <h4 id="parser">
<code>Parser</code>
</h4> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  test: /\.sss$/,
  use: [
    ...,
    { loader: 'postcss-loader', options: { parser: 'sugarss' } }
  ]
}</pre> <h4 id="syntax">
<code>Syntax</code>
</h4> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  test: /\.css$/,
  use: [
    ...,
    { loader: 'postcss-loader', options: { syntax: 'sugarss' } }
  ]
}</pre> <h4 id="stringifier">
<code>Stringifier</code>
</h4> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  test: /\.css$/,
  use: [
    ...,
    { loader: 'postcss-loader', options: { stringifier: 'midas' } }
  ]
}</pre> <h3 id="sourcemap">
<code>SourceMap</code>
</h3> <p>Enables source map support, <code>postcss-loader</code> will use the previous source map given by other loaders and update it accordingly, if no previous loader is applied before <code>postcss-loader</code>, the loader will generate a source map for you.</p> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  test: /\.css/,
  use: [
    { loader: 'style-loader', options: { sourceMap: true } },
    { loader: 'css-loader', options: { sourceMap: true } },
    { loader: 'postcss-loader', options: { sourceMap: true } },
    { loader: 'sass-loader', options: { sourceMap: true } }
  ]
}</pre> <h4 id="inline">
<code>'inline'</code>
</h4> <p>You can set the <code>sourceMap: 'inline'</code> option to inline the source map within the CSS directly as an annotation comment.</p> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  loader: 'postcss-loader',
  options: {
    sourceMap: 'inline'
  }
}</pre> <pre data-language="css">.class { color: red; }

/*# sourceMappingURL=data:application/json;base64, ... */</pre> <h2 id="examples">Examples
</h2> <h3 id="stylelint">
<code>Stylelint</code>
</h3> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  test: /\.css$/,
  use: [
    'style-loader',
    'css-loader',
    {
      loader: 'postcss-loader',
      options: {
        ident: 'postcss',
        plugins: [
          require('postcss-import')(),
          require('stylelint')(),
          ...,
        ]
      }
    }
  ]
}</pre> <h3 id="autoprefixing">
<code>Autoprefixing</code>
</h3> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  test: /\.css$/,
  use: [
    'style-loader',
    'css-loader',
    {
      loader: 'postcss-loader',
      options: {
        ident: 'postcss',
        plugins: [
          require('autoprefixer')({...options}),
          ...,
        ]
      }
    }
  ]
}</pre> <blockquote> <p>:warning: <a href="https://github.com/csstools/postcss-preset-env"><code>postcss-preset-env</code></a> includes <a href="https://github.com/postcss/autoprefixer"><code>autoprefixer</code></a>, so adding it separately is not necessary if you already use the preset.</p> </blockquote> <h3 id="css-modules">
<code>CSS Modules</code>
</h3> <p>This loader <a href="https://github.com/webpack/css-loader/issues/137">cannot be used</a> with <a href="https://github.com/webpack/css-loader#css-modules">CSS Modules</a> out of the box due to the way <code>css-loader</code> processes file imports. To make them work properly, either add the css-loader’s <a href="https://github.com/webpack-contrib/css-loader#importloaders"><code>importLoaders</code></a> option.</p> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  test: /\.css$/,
  use: [
    'style-loader',
    { loader: 'css-loader', options: { modules: true, importLoaders: 1 } },
    'postcss-loader'
  ]
}</pre> <p>or use <a href="https://github.com/css-modules/postcss-modules">postcss-modules</a> instead of <code>css-loader</code>.</p> <h3 id="css-in-js">
<code>CSS-in-JS</code>
</h3> <p>If you want to process styles written in JavaScript, use the <a href="https://github.com/postcss/postcss-js">postcss-js</a> parser.</p> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">{
  test: /\.style.js$/,
  use: [
    'style-loader',
    { loader: 'css-loader', options: { importLoaders: 2 } },
    { loader: 'postcss-loader', options: { parser: 'postcss-js' } },
    'babel-loader'
  ]
}</pre> <p>As result you will be able to write styles in the following way</p> <pre data-language="js">import colors from './styles/colors'

export default {
    '.menu': {
      color: colors.main,
      height: 25,
      '&amp;_link': {
      color: 'white'
    }
  }
}</pre> <blockquote> <p>:warning: If you are using Babel you need to do the following in order for the setup to work</p> <ol> <li>Add <a href="https://github.com/59naga/babel-plugin-add-module-exports">babel-plugin-add-module-exports</a> to your configuration</li> <li>You need to have only one <strong>default</strong> export per style module</li> </ol> </blockquote> <h3 id="extract-css">
<a href="https://github.com/webpack-contrib/mini-css-extract-plugin">Extract CSS</a>
</h3> <p><strong><code>webpack.config.js</code></strong></p> <pre data-language="js">const devMode = process.env.NODE_ENV !== 'production'

const MiniCssExtractPlugin = require('mini-css-extract-plugin')

module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          devMode ? 'style-loader' : MiniCssExtractPlugin.loader,
          'css-loader',
          'postcss-loader'
        ]
      }
    ]
  },
  plugins: [
    new MiniCssExtractPlugin({
      filename: devMode ? '[name].css' : '[name].[hash].css'
    })
  ]
}</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © JS Foundation and other contributors<br>Licensed under the Creative Commons Attribution License 4.0.<br>
    <a href="https://v4.webpack.js.org/loaders/postcss-loader" class="_attribution-link">https://v4.webpack.js.org/loaders/postcss-loader</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
