
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Assertions - Sinon.JS 7 - W3cubDocs</title>
  
  <meta name="description" content="Sinon.JS ships with a set of assertions that mirror most behavior verification methods and properties on spies and stubs. The advantage of using the &hellip;">
  <meta name="keywords" content="assertions, sinon, js, sinon~7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/sinon~7/assertions.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/sinon~7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/sinon~7/" class="_nav-link" title="" style="margin-left:0;">Sinon.JS 7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sinon">
				
				
<div class="bg-info hidden" id="banner-message"> These docs are from an older version of sinon. Do you want the <a href="https://sinonjs.org/releases/latest/">latest</a> docs? </div>    <h1 class="post-title">Assertions</h1>   <p>Sinon.JS ships with a set of assertions that mirror most behavior verification methods and properties on spies and stubs. The advantage of using the assertions is that failed expectations on stubs and spies can be expressed directly as assertion failures with detailed and helpful error messages.</p> <p>To make sure assertions integrate nicely with your test framework, you should customize either <code>sinon.assert.fail</code> or <code>sinon.assert.failException</code> and look into <code>sinon.assert.expose</code> and <code>sinon.assert.pass</code>.</p> <p>The assertions can be used with either spies or stubs.</p> <pre data-language="javascript">"test should call subscribers with message as first argument" : function () {
    var message = "an example message";
    var spy = sinon.spy();

    PubSub.subscribe(message, spy);
    PubSub.publishSync(message, "some payload");

    sinon.assert.calledOnce(spy);
    sinon.assert.calledWith(spy, message);
}
</pre> <h2 id="assertions-api">Assertions API</h2> <h4 id="sinonassertfailmessage"><code>sinon.assert.fail(message)</code></h4> <p>Every assertion fails by calling this method.</p> <p>By default it throws an error of type <code>sinon.assert.failException</code>.</p> <p>If the test framework looks for assertion errors by checking for a specific exception, you can simply override the kind of exception thrown. If that does not fit with your testing framework of choice, override the <code>fail</code> method to do the right thing.</p> <h4 id="sinonassertfailexception"><code>sinon.assert.failException;</code></h4> <p>Defaults to <code>AssertError</code>.</p> <h4 id="sinonassertpassassertion"><code>sinon.assert.pass(assertion);</code></h4> <p>Called every time <code>assertion</code> passes.</p> <p>Default implementation does nothing.</p> <h4 id="sinonassertnotcalledspy"><code>sinon.assert.notCalled(spy);</code></h4> <p>Passes if <code>spy</code> was never called</p> <h4 id="sinonassertcalledspy"><code>sinon.assert.called(spy);</code></h4> <p>Passes if <code>spy</code> was called at least once.</p> <h4 id="sinonassertcalledoncespy"><code>sinon.assert.calledOnce(spy);</code></h4> <p>Passes if <code>spy</code> was called once and only once.</p> <h4 id="sinonassertcalledtwicespy"><code>sinon.assert.calledTwice(spy);</code></h4> <p>Passes if <code>spy</code> was called exactly twice.</p> <h4 id="sinonassertcalledthricespy"><code>sinon.assert.calledThrice(spy)</code></h4> <p>Passes if <code>spy</code> was called exactly three times.</p> <h4 id="sinonassertcallcountspy-num"><code>sinon.assert.callCount(spy, num)</code></h4> <p>Passes if <code>spy</code> was called exactly <code>num</code> times.</p> <h4 id="sinonassertcallorderspy1-spy2-"><code>sinon.assert.callOrder(spy1, spy2, ...)</code></h4> <p>Passes if provided spies were called in the specified order.</p> <h4 id="sinonassertcalledonspyorspycall-obj"><code>sinon.assert.calledOn(spyOrSpyCall, obj)</code></h4> <p>Passes if <code>spy</code> was ever called with <code>obj</code> as its <code>this</code> value.</p> <p>It’s possible to assert on a dedicated spy call: <code>sinon.assert.calledOn(spy.firstCall, arg1, arg2, ...);</code>.</p> <h4 id="sinonassertalwayscalledonspy-obj"><code>sinon.assert.alwaysCalledOn(spy, obj)</code></h4> <p>Passes if <code>spy</code> was always called with <code>obj</code> as its <code>this</code> value.</p> <h4 id="sinonassertcalledwithspyorspycall-arg1-arg2-"><code>sinon.assert.calledWith(spyOrSpyCall, arg1, arg2, ...);</code></h4> <p>Passes if <code>spy</code> was called with the provided arguments.</p> <p>It’s possible to assert on a dedicated spy call: <code>sinon.assert.calledWith(spy.firstCall, arg1, arg2, ...);</code>.</p> <h4 id="sinonassertalwayscalledwithspy-arg1-arg2-"><code>sinon.assert.alwaysCalledWith(spy, arg1, arg2, ...);</code></h4> <p>Passes if <code>spy</code> was always called with the provided arguments.</p> <h4 id="sinonassertnevercalledwithspy-arg1-arg2-"><code>sinon.assert.neverCalledWith(spy, arg1, arg2, ...);</code></h4> <p>Passes if <code>spy</code> was never called with the provided arguments.</p> <h4 id="sinonassertcalledwithexactlyspyorspycall-arg1-arg2-"><code>sinon.assert.calledWithExactly(spyOrSpyCall, arg1, arg2, ...);</code></h4> <p>Passes if <code>spy</code> was called with the provided arguments and no others.</p> <p>It’s possible to assert on a dedicated spy call: <code>sinon.assert.calledWithExactly(spy.getCall(1), arg1, arg2, ...);</code>.</p> <h4 id="sinonassertalwayscalledwithexactlyspy-arg1-arg2-"><code>sinon.assert.alwaysCalledWithExactly(spy, arg1, arg2, ...);</code></h4> <p>Passes if <code>spy</code> was always called with the provided arguments and no others.</p> <h4 id="sinonassertcalledwithmatchspyorspycall-arg1-arg2-"><code>sinon.assert.calledWithMatch(spyOrSpyCall, arg1, arg2, ...)</code></h4> <p>Passes if <code>spy</code> was called with matching arguments.</p> <p>This behaves the same way as <code>sinon.assert.calledWith(spy, sinon.match(arg1), sinon.match(arg2), ...)</code>.</p> <p>It’s possible to assert on a dedicated spy call: <code>sinon.assert.calledWithMatch(spy.secondCall, arg1, arg2, ...);</code>.</p> <h4 id="sinonassertalwayscalledwithmatchspy-arg1-arg2-"><code>sinon.assert.alwaysCalledWithMatch(spy, arg1, arg2, ...)</code></h4> <p>Passes if <code>spy</code> was always called with matching arguments.</p> <p>This behaves the same way as <code>sinon.assert.alwaysCalledWith(spy, sinon.match(arg1), sinon.match(arg2), ...)</code>.</p> <h4 id="sinonassertcalledwithnewspyorspycall"><code>sinon.assert.calledWithNew(spyOrSpyCall)</code></h4> <p>Passes if <code>spy</code> was called with the <code>new</code> operator.</p> <p>It’s possible to assert on a dedicated spy call: <code>sinon.assert.calledWithNew(spy.secondCall, arg1, arg2, ...);</code>.</p> <h4 id="sinonassertnevercalledwithmatchspy-arg1-arg2-"><code>sinon.assert.neverCalledWithMatch(spy, arg1, arg2, ...)</code></h4> <p>Passes if <code>spy</code> was never called with matching arguments.</p> <p>This behaves the same way as <code>sinon.assert.neverCalledWith(spy, sinon.match(arg1), sinon.match(arg2), ...)</code>.</p> <h4 id="sinonassertthrewspyorspycall-exception"><code>sinon.assert.threw(spyOrSpyCall, exception);</code></h4> <p>Passes if <code>spy</code> threw the given exception.</p> <p>The exception can be a <code>String</code> denoting its type, or an actual object.</p> <p>If only one argument is provided, the assertion passes if <code>spy</code> ever threw any exception.</p> <p>It’s possible to assert on a dedicated spy call: <code>sinon.assert.threw(spy.thirdCall, exception);</code>.</p> <h4 id="sinonassertalwaysthrewspy-exception"><code>sinon.assert.alwaysThrew(spy, exception);</code></h4> <p>Like above, only required for all calls to the spy.</p> <h4 id="sinonassertmatchactual-expectation"><code>sinon.assert.match(actual, expectation);</code></h4> <p>Uses <a href="https://sinonjs.org/releases/matchers"><code>sinon.match</code></a> to test if the arguments can be considered a match.</p> <pre data-language="javascript">var sinon = require('sinon');

describe('example', function(){
    it('should match on `x` property, and ignore `y` property', function() {
        var expected = {x: 1},
            actual = {x: 1, y: 2};

        sinon.assert.match(actual, expected);
    });
});
</pre> <h4 id="sinonassertexposeobject-options"><code>sinon.assert.expose(object, options);</code></h4> <p>Exposes assertions into another object, to better integrate with the test framework. For instance, JsTestDriver uses global assertions, and to make Sinon.JS assertions appear alongside them, you can do.</p> <pre data-language="javascript">sinon.assert.expose(this);
</pre> <p>This will give you <code>assertCalled(spy)</code>,<code>assertCallOrder(spy1, spy2, ...)</code> and so on.</p> <p>The method accepts an optional options object with two options.</p> <dl> <dt>prefix</dt> <dd>is a prefix to give assertions. By default it is "assert", so <code>sinon.assert.called</code> becomes <code>target.assertCalled</code>. By passing a blank string, the exposed method will be <code>target.called</code>.</dd> <dt>includeFail</dt> <dd>
<code>true</code> by default, copies over the <code>fail</code> and <code>failException</code> properties</dd> </dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2018 Christian Johansen<br>Licensed under the BSD License.<br>
    <a href="https://sinonjs.org/releases/v7.1.1/assertions" class="_attribution-link">https://sinonjs.org/releases/v7.1.1/assertions</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
