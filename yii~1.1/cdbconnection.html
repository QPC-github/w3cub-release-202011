
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CDbConnection - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" Returns whether the DB connection is established. ">
  <meta name="keywords" content="cdbconnection, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cdbconnection.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/yii~1.1.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CDbConnection</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.db">system.db</a></td> </tr> <tr> <th>Inheritance</th> <td>class CDbConnection » <a href="capplicationcomponent">CApplicationComponent</a> » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Implements</th> <td><a href="iapplicationcomponent">IApplicationComponent</a></td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php">framework/db/CDbConnection.php</a></td> </tr> </table> <div id="classDescription"> CDbConnection represents a connection to a database. <br><br> CDbConnection works together with <a href="cdbcommand">CDbCommand</a>, <a href="cdbdatareader">CDbDataReader</a> and <a href="cdbtransaction">CDbTransaction</a> to provide data access to various DBMS in a common set of APIs. They are a thin wrapper of the <a href="http://www.php.net/manual/en/ref.pdo.php">PDO</a> PHP extension. <br><br> To establish a connection, set <a href="cdbconnection#setActive">active</a> to true after specifying <a href="cdbconnection#connectionString">connectionString</a>, <a href="cdbconnection#username">username</a> and <a href="cdbconnection#password">password</a>. <br><br> The following example shows how to create a CDbConnection instance and establish the actual connection: <pre>
$connection=new CDbConnection($dsn,$username,$password);
$connection-&gt;active=true;
</pre> <br><br> After the DB connection is established, one can execute an SQL statement like the following: <pre>
$command=$connection-&gt;createCommand($sqlStatement);
$command-&gt;execute();   // a non-query SQL statement execution
// or execute an SQL query and fetch the result set
$reader=$command-&gt;query();

// each $row is an array representing a row of data
foreach($reader as $row) ...
</pre> <br><br> One can do prepared SQL execution and bind parameters to the prepared SQL: <pre>
$command=$connection-&gt;createCommand($sqlStatement);
$command-&gt;bindParam($name1,$value1);
$command-&gt;bindParam($name2,$value2);
$command-&gt;execute();
</pre> <br><br> To use transaction, do like the following: <pre>
$transaction=$connection-&gt;beginTransaction();
try
{
   $connection-&gt;createCommand($sql1)-&gt;execute();
   $connection-&gt;createCommand($sql2)-&gt;execute();
   //.... other SQL executions
   $transaction-&gt;commit();
}
catch(Exception $e)
{
   $transaction-&gt;rollback();
}
</pre> <br><br> CDbConnection also provides a set of methods to support setting and querying of certain DBMS attributes, such as <a href="cdbconnection#getNullConversion">nullConversion</a>. <br><br> Since CDbConnection implements the interface IApplicationComponent, it can be used as an application component and be configured in application configuration, like the following, <pre>
array(
    'components'=&gt;array(
        'db'=&gt;array(
            'class'=&gt;'CDbConnection',
            'connectionString'=&gt;'sqlite:path/to/dbfile',
        ),
    ),
)
</pre> <br><br> Use the <a href="cdbconnection#driverName">driverName</a> property if you want to force the DB connection to use a particular driver by the given name, disregarding of what was set in the <a href="cdbconnection#connectionString">connectionString</a> property. This might be useful when working with ODBC connections. Sample code: <br><br> <pre>
'db'=&gt;array(
    'class'=&gt;'CDbConnection',
    'driverName'=&gt;'mysql',
    'connectionString'=&gt;'odbc:Driver={MySQL};Server=127.0.0.1;Database=test',
    'username'=&gt;'',
    'password'=&gt;'',
),
</pre>
</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="active"> <td><a href="cdbconnection#active-detail">active</a></td> <td>boolean</td> <td>Returns whether the DB connection is established.</td> <td>CDbConnection</td> </tr> <tr id="attributes"> <td><a href="cdbconnection#attributes-detail">attributes</a></td> <td>array</td> <td>Returns the attributes that are previously explicitly set for the DB connection.</td> <td>CDbConnection</td> </tr> <tr id="autoCommit"> <td><a href="cdbconnection#autoCommit-detail">autoCommit</a></td> <td>boolean</td> <td>Returns whether creating or updating a DB record will be automatically committed.</td> <td>CDbConnection</td> </tr> <tr id="autoConnect"> <td><a href="cdbconnection#autoConnect-detail">autoConnect</a></td> <td>boolean</td> <td>whether the database connection should be automatically established the component is being initialized.</td> <td>CDbConnection</td> </tr> <tr class="inherited" id="behaviors"> <td><a href="capplicationcomponent#behaviors-detail">behaviors</a></td> <td>array</td> <td>the behaviors that should be attached to this component.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="charset"> <td><a href="cdbconnection#charset-detail">charset</a></td> <td>string</td> <td>the charset used for database connection.</td> <td>CDbConnection</td> </tr> <tr id="clientVersion"> <td><a href="cdbconnection#clientVersion-detail">clientVersion</a></td> <td>string</td> <td>Returns the version information of the DB driver.</td> <td>CDbConnection</td> </tr> <tr id="columnCase"> <td><a href="cdbconnection#columnCase-detail">columnCase</a></td> <td>mixed</td> <td>Returns the case of the column names</td> <td>CDbConnection</td> </tr> <tr id="commandBuilder"> <td><a href="cdbconnection#commandBuilder-detail">commandBuilder</a></td> <td><a href="cdbcommandbuilder">CDbCommandBuilder</a></td> <td>Returns the SQL command builder for the current DB connection.</td> <td>CDbConnection</td> </tr> <tr id="connectionStatus"> <td><a href="cdbconnection#connectionStatus-detail">connectionStatus</a></td> <td>string</td> <td>Returns the status of the connection.</td> <td>CDbConnection</td> </tr> <tr id="connectionString"> <td><a href="cdbconnection#connectionString-detail">connectionString</a></td> <td>string</td> <td>The Data Source Name, or DSN, contains the information required to connect to the database.</td> <td>CDbConnection</td> </tr> <tr id="currentTransaction"> <td><a href="cdbconnection#currentTransaction-detail">currentTransaction</a></td> <td><a href="cdbtransaction">CDbTransaction</a></td> <td>Returns the currently active transaction.</td> <td>CDbConnection</td> </tr> <tr id="driverMap"> <td><a href="cdbconnection#driverMap-detail">driverMap</a></td> <td>array</td> <td>mapping between PDO driver and schema class name.</td> <td>CDbConnection</td> </tr> <tr id="driverName"> <td><a href="cdbconnection#driverName-detail">driverName</a></td> <td>string</td> <td>Returns the name of the DB driver.</td> <td>CDbConnection</td> </tr> <tr id="emulatePrepare"> <td><a href="cdbconnection#emulatePrepare-detail">emulatePrepare</a></td> <td>boolean</td> <td>whether to turn on prepare emulation.</td> <td>CDbConnection</td> </tr> <tr id="enableParamLogging"> <td><a href="cdbconnection#enableParamLogging-detail">enableParamLogging</a></td> <td>boolean</td> <td>whether to log the values that are bound to a prepare SQL statement.</td> <td>CDbConnection</td> </tr> <tr id="enableProfiling"> <td><a href="cdbconnection#enableProfiling-detail">enableProfiling</a></td> <td>boolean</td> <td>whether to enable profiling the SQL statements being executed.</td> <td>CDbConnection</td> </tr> <tr id="initSQLs"> <td><a href="cdbconnection#initSQLs-detail">initSQLs</a></td> <td>array</td> <td>list of SQL statements that should be executed right after the DB connection is established.</td> <td>CDbConnection</td> </tr> <tr class="inherited" id="isInitialized"> <td><a href="capplicationcomponent#isInitialized-detail">isInitialized</a></td> <td>boolean</td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="lastInsertID"> <td><a href="cdbconnection#lastInsertID-detail">lastInsertID</a></td> <td>string</td> <td>Returns the ID of the last inserted row or sequence value.</td> <td>CDbConnection</td> </tr> <tr id="nullConversion"> <td><a href="cdbconnection#nullConversion-detail">nullConversion</a></td> <td>mixed</td> <td>Returns how the null and empty strings are converted.</td> <td>CDbConnection</td> </tr> <tr id="password"> <td><a href="cdbconnection#password-detail">password</a></td> <td>string</td> <td>the password for establishing DB connection.</td> <td>CDbConnection</td> </tr> <tr id="pdoClass"> <td><a href="cdbconnection#pdoClass-detail">pdoClass</a></td> <td>string</td> <td>Custom PDO wrapper class.</td> <td>CDbConnection</td> </tr> <tr id="pdoInstance"> <td><a href="cdbconnection#pdoInstance-detail">pdoInstance</a></td> <td>PDO</td> <td>Returns the PDO instance.</td> <td>CDbConnection</td> </tr> <tr id="persistent"> <td><a href="cdbconnection#persistent-detail">persistent</a></td> <td>boolean</td> <td>Returns whether the connection is persistent or not.</td> <td>CDbConnection</td> </tr> <tr id="prefetch"> <td><a href="cdbconnection#prefetch-detail">prefetch</a></td> <td>boolean</td> <td>Returns whether the connection performs data prefetching.</td> <td>CDbConnection</td> </tr> <tr id="queryCacheID"> <td><a href="cdbconnection#queryCacheID-detail">queryCacheID</a></td> <td>string</td> <td>the ID of the cache application component that is used for query caching.</td> <td>CDbConnection</td> </tr> <tr id="queryCachingCount"> <td><a href="cdbconnection#queryCachingCount-detail">queryCachingCount</a></td> <td>integer</td> <td>the number of SQL statements that need to be cached next.</td> <td>CDbConnection</td> </tr> <tr id="queryCachingDependency"> <td><a href="cdbconnection#queryCachingDependency-detail">queryCachingDependency</a></td> <td>CCacheDependency|ICacheDependency</td> <td>the dependency that will be used when saving query results into cache.</td> <td>CDbConnection</td> </tr> <tr id="queryCachingDuration"> <td><a href="cdbconnection#queryCachingDuration-detail">queryCachingDuration</a></td> <td>integer</td> <td>number of seconds that query results can remain valid in cache.</td> <td>CDbConnection</td> </tr> <tr id="schema"> <td><a href="cdbconnection#schema-detail">schema</a></td> <td><a href="cdbschema">CDbSchema</a></td> <td>Returns the database schema for the current connection</td> <td>CDbConnection</td> </tr> <tr id="schemaCacheID"> <td><a href="cdbconnection#schemaCacheID-detail">schemaCacheID</a></td> <td>string</td> <td>the ID of the cache application component that is used to cache the table metadata.</td> <td>CDbConnection</td> </tr> <tr id="schemaCachingDuration"> <td><a href="cdbconnection#schemaCachingDuration-detail">schemaCachingDuration</a></td> <td>integer</td> <td>number of seconds that table metadata can remain valid in cache.</td> <td>CDbConnection</td> </tr> <tr id="schemaCachingExclude"> <td><a href="cdbconnection#schemaCachingExclude-detail">schemaCachingExclude</a></td> <td>array</td> <td>list of tables whose metadata should NOT be cached.</td> <td>CDbConnection</td> </tr> <tr id="serverInfo"> <td><a href="cdbconnection#serverInfo-detail">serverInfo</a></td> <td>string</td> <td>Returns the information of DBMS server.</td> <td>CDbConnection</td> </tr> <tr id="serverVersion"> <td><a href="cdbconnection#serverVersion-detail">serverVersion</a></td> <td>string</td> <td>Returns the version information of DBMS server.</td> <td>CDbConnection</td> </tr> <tr id="stats"> <td><a href="cdbconnection#stats-detail">stats</a></td> <td>array</td> <td>Returns the statistical results of SQL executions.</td> <td>CDbConnection</td> </tr> <tr id="tablePrefix"> <td><a href="cdbconnection#tablePrefix-detail">tablePrefix</a></td> <td>string</td> <td>the default prefix for table names.</td> <td>CDbConnection</td> </tr> <tr id="timeout"> <td><a href="cdbconnection#timeout-detail">timeout</a></td> <td>integer</td> <td>Returns the timeout settings for the connection.</td> <td>CDbConnection</td> </tr> <tr id="username"> <td><a href="cdbconnection#username-detail">username</a></td> <td>string</td> <td>the username for establishing DB connection.</td> <td>CDbConnection</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="__construct"> <td><a href="cdbconnection#__construct-detail">__construct()</a></td> <td>Constructor.</td> <td>CDbConnection</td> </tr> <tr class="inherited" id="__get"> <td><a href="ccomponent#__get-detail">__get()</a></td> <td>Returns a property value, an event handler list or a behavior based on its name.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__isset"> <td><a href="ccomponent#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__set"> <td><a href="ccomponent#__set-detail">__set()</a></td> <td>Sets value of a component property.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="__sleep"> <td><a href="cdbconnection#__sleep-detail">__sleep()</a></td> <td>Close the connection when serializing.</td> <td>CDbConnection</td> </tr> <tr class="inherited" id="__unset"> <td><a href="ccomponent#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="beginTransaction"> <td><a href="cdbconnection#beginTransaction-detail">beginTransaction()</a></td> <td>Starts a transaction.</td> <td>CDbConnection</td> </tr> <tr id="cache"> <td><a href="cdbconnection#cache-detail">cache()</a></td> <td>Sets the parameters about query caching.</td> <td>CDbConnection</td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="createCommand"> <td><a href="cdbconnection#createCommand-detail">createCommand()</a></td> <td>Creates a command for execution.</td> <td>CDbConnection</td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="getActive"> <td><a href="cdbconnection#getActive-detail">getActive()</a></td> <td>Returns whether the DB connection is established.</td> <td>CDbConnection</td> </tr> <tr id="getAttribute"> <td><a href="cdbconnection#getAttribute-detail">getAttribute()</a></td> <td>Obtains a specific DB connection attribute information.</td> <td>CDbConnection</td> </tr> <tr id="getAttributes"> <td><a href="cdbconnection#getAttributes-detail">getAttributes()</a></td> <td>Returns the attributes that are previously explicitly set for the DB connection.</td> <td>CDbConnection</td> </tr> <tr id="getAutoCommit"> <td><a href="cdbconnection#getAutoCommit-detail">getAutoCommit()</a></td> <td>Returns whether creating or updating a DB record will be automatically committed.</td> <td>CDbConnection</td> </tr> <tr id="getAvailableDrivers"> <td><a href="cdbconnection#getAvailableDrivers-detail">getAvailableDrivers()</a></td> <td>Returns a list of available PDO drivers.</td> <td>CDbConnection</td> </tr> <tr id="getClientVersion"> <td><a href="cdbconnection#getClientVersion-detail">getClientVersion()</a></td> <td>Returns the version information of the DB driver.</td> <td>CDbConnection</td> </tr> <tr id="getColumnCase"> <td><a href="cdbconnection#getColumnCase-detail">getColumnCase()</a></td> <td>Returns the case of the column names</td> <td>CDbConnection</td> </tr> <tr id="getCommandBuilder"> <td><a href="cdbconnection#getCommandBuilder-detail">getCommandBuilder()</a></td> <td>Returns the SQL command builder for the current DB connection.</td> <td>CDbConnection</td> </tr> <tr id="getConnectionStatus"> <td><a href="cdbconnection#getConnectionStatus-detail">getConnectionStatus()</a></td> <td>Returns the status of the connection.</td> <td>CDbConnection</td> </tr> <tr id="getCurrentTransaction"> <td><a href="cdbconnection#getCurrentTransaction-detail">getCurrentTransaction()</a></td> <td>Returns the currently active transaction.</td> <td>CDbConnection</td> </tr> <tr id="getDriverName"> <td><a href="cdbconnection#getDriverName-detail">getDriverName()</a></td> <td>Returns the name of the DB driver.</td> <td>CDbConnection</td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="getIsInitialized"> <td><a href="capplicationcomponent#getIsInitialized-detail">getIsInitialized()</a></td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="getLastInsertID"> <td><a href="cdbconnection#getLastInsertID-detail">getLastInsertID()</a></td> <td>Returns the ID of the last inserted row or sequence value.</td> <td>CDbConnection</td> </tr> <tr id="getNullConversion"> <td><a href="cdbconnection#getNullConversion-detail">getNullConversion()</a></td> <td>Returns how the null and empty strings are converted.</td> <td>CDbConnection</td> </tr> <tr id="getPdoInstance"> <td><a href="cdbconnection#getPdoInstance-detail">getPdoInstance()</a></td> <td>Returns the PDO instance.</td> <td>CDbConnection</td> </tr> <tr id="getPdoType"> <td><a href="cdbconnection#getPdoType-detail">getPdoType()</a></td> <td>Determines the PDO type for the specified PHP type.</td> <td>CDbConnection</td> </tr> <tr id="getPersistent"> <td><a href="cdbconnection#getPersistent-detail">getPersistent()</a></td> <td>Returns whether the connection is persistent or not.</td> <td>CDbConnection</td> </tr> <tr id="getPrefetch"> <td><a href="cdbconnection#getPrefetch-detail">getPrefetch()</a></td> <td>Returns whether the connection performs data prefetching.</td> <td>CDbConnection</td> </tr> <tr id="getSchema"> <td><a href="cdbconnection#getSchema-detail">getSchema()</a></td> <td>Returns the database schema for the current connection</td> <td>CDbConnection</td> </tr> <tr id="getServerInfo"> <td><a href="cdbconnection#getServerInfo-detail">getServerInfo()</a></td> <td>Returns the information of DBMS server.</td> <td>CDbConnection</td> </tr> <tr id="getServerVersion"> <td><a href="cdbconnection#getServerVersion-detail">getServerVersion()</a></td> <td>Returns the version information of DBMS server.</td> <td>CDbConnection</td> </tr> <tr id="getStats"> <td><a href="cdbconnection#getStats-detail">getStats()</a></td> <td>Returns the statistical results of SQL executions.</td> <td>CDbConnection</td> </tr> <tr id="getTimeout"> <td><a href="cdbconnection#getTimeout-detail">getTimeout()</a></td> <td>Returns the timeout settings for the connection.</td> <td>CDbConnection</td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="init"> <td><a href="cdbconnection#init-detail">init()</a></td> <td>Initializes the component.</td> <td>CDbConnection</td> </tr> <tr id="quoteColumnName"> <td><a href="cdbconnection#quoteColumnName-detail">quoteColumnName()</a></td> <td>Quotes a column name for use in a query.</td> <td>CDbConnection</td> </tr> <tr id="quoteTableName"> <td><a href="cdbconnection#quoteTableName-detail">quoteTableName()</a></td> <td>Quotes a table name for use in a query.</td> <td>CDbConnection</td> </tr> <tr id="quoteValue"> <td><a href="cdbconnection#quoteValue-detail">quoteValue()</a></td> <td>Quotes a string value for use in a query.</td> <td>CDbConnection</td> </tr> <tr id="quoteValueWithType"> <td><a href="cdbconnection#quoteValueWithType-detail">quoteValueWithType()</a></td> <td>Quotes a value for use in a query using a given type.</td> <td>CDbConnection</td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="setActive"> <td><a href="cdbconnection#setActive-detail">setActive()</a></td> <td>Open or close the DB connection.</td> <td>CDbConnection</td> </tr> <tr id="setAttribute"> <td><a href="cdbconnection#setAttribute-detail">setAttribute()</a></td> <td>Sets an attribute on the database connection.</td> <td>CDbConnection</td> </tr> <tr id="setAttributes"> <td><a href="cdbconnection#setAttributes-detail">setAttributes()</a></td> <td>Sets a set of attributes on the database connection.</td> <td>CDbConnection</td> </tr> <tr id="setAutoCommit"> <td><a href="cdbconnection#setAutoCommit-detail">setAutoCommit()</a></td> <td>Sets whether creating or updating a DB record will be automatically committed.</td> <td>CDbConnection</td> </tr> <tr id="setColumnCase"> <td><a href="cdbconnection#setColumnCase-detail">setColumnCase()</a></td> <td>Sets the case of the column names.</td> <td>CDbConnection</td> </tr> <tr id="setDriverName"> <td><a href="cdbconnection#setDriverName-detail">setDriverName()</a></td> <td>Changes the name of the DB driver. Overrides value extracted from the <a href="cdbconnection#connectionString">connectionString</a>,</td> <td>CDbConnection</td> </tr> <tr id="setNullConversion"> <td><a href="cdbconnection#setNullConversion-detail">setNullConversion()</a></td> <td>Sets how the null and empty strings are converted.</td> <td>CDbConnection</td> </tr> <tr id="setPersistent"> <td><a href="cdbconnection#setPersistent-detail">setPersistent()</a></td> <td>Sets whether the connection is persistent or not.</td> <td>CDbConnection</td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="close"> <td><a href="cdbconnection#close-detail">close()</a></td> <td>Closes the currently active DB connection.</td> <td>CDbConnection</td> </tr> <tr id="createPdoInstance"> <td><a href="cdbconnection#createPdoInstance-detail">createPdoInstance()</a></td> <td>Creates the PDO instance.</td> <td>CDbConnection</td> </tr> <tr id="initConnection"> <td><a href="cdbconnection#initConnection-detail">initConnection()</a></td> <td>Initializes the open db connection.</td> <td>CDbConnection</td> </tr> <tr id="open"> <td><a href="cdbconnection#open-detail">open()</a></td> <td>Opens DB connection if it is currently not</td> <td>CDbConnection</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="active-detail"> active<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <a href="cdbconnection#getActive"><b>getActive</b></a>()<br>public void <a href="cdbconnection#setActive"><b>setActive</b></a>(boolean $value)</pre> <p>Returns whether the DB connection is established.</p> <h3 class="detailHeader" id="attributes-detail"> attributes<span class="detailHeaderTag"> property (available since v1.1.7) </span> </h3> <pre class="signature">public array <a href="cdbconnection#getAttributes"><b>getAttributes</b></a>()<br>public void <a href="cdbconnection#setAttributes"><b>setAttributes</b></a>(array $values)</pre> <p>Returns the attributes that are previously explicitly set for the DB connection.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbconnection#setAttributes">setAttributes</a></li> </ul> </div> <h3 class="detailHeader" id="autoCommit-detail"> autoCommit<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <a href="cdbconnection#getAutoCommit"><b>getAutoCommit</b></a>()<br>public void <a href="cdbconnection#setAutoCommit"><b>setAutoCommit</b></a>(boolean $value)</pre> <p>Returns whether creating or updating a DB record will be automatically committed. Some DBMS (such as sqlite) may not support this feature.</p> <h3 class="detailHeader" id="autoConnect-detail"> autoConnect<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$autoConnect</b>;</pre> <p>whether the database connection should be automatically established the component is being initialized. Defaults to true. Note, this property is only effective when the CDbConnection object is used as an application component.</p> <h3 class="detailHeader" id="charset-detail"> charset<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$charset</b>;</pre> <p>the charset used for database connection. The property is only used for MySQL, MariaDB and PostgreSQL databases. Defaults to null, meaning using default charset as specified by the database. <br><br> Note that if you're using GBK or BIG5 then it's highly recommended to update to PHP 5.3.6+ and to specify charset via DSN like 'mysql:dbname=mydatabase;host=127.0.0.1;charset=GBK;'.</p> <h3 class="detailHeader" id="clientVersion-detail"> clientVersion<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public string <a href="cdbconnection#getClientVersion"><b>getClientVersion</b></a>()</pre> <p>Returns the version information of the DB driver.</p> <h3 class="detailHeader" id="columnCase-detail"> columnCase<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public mixed <a href="cdbconnection#getColumnCase"><b>getColumnCase</b></a>()<br>public void <a href="cdbconnection#setColumnCase"><b>setColumnCase</b></a>(mixed $value)</pre> <p>Returns the case of the column names</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/pdo.setattribute.php">http://www.php.net/manual/en/pdo.setattribute.php</a></li> </ul> </div> <h3 class="detailHeader" id="commandBuilder-detail"> commandBuilder<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public <a href="cdbcommandbuilder">CDbCommandBuilder</a> <a href="cdbconnection#getCommandBuilder"><b>getCommandBuilder</b></a>()</pre> <p>Returns the SQL command builder for the current DB connection.</p> <h3 class="detailHeader" id="connectionStatus-detail"> connectionStatus<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public string <a href="cdbconnection#getConnectionStatus"><b>getConnectionStatus</b></a>()</pre> <p>Returns the status of the connection. Some DBMS (such as sqlite) may not support this feature.</p> <h3 class="detailHeader" id="connectionString-detail"> connectionString<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$connectionString</b>;</pre> <p>The Data Source Name, or DSN, contains the information required to connect to the database.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/function.PDO-construct.php">Note that if you're using GBK or BIG5 then it's highly recommended to update to PHP 5.3.6+ and to specify charset via DSN like 'mysql:dbname=mydatabase;host=127.0.0.1;charset=GBK;'.</a></li> </ul> </div> <h3 class="detailHeader" id="currentTransaction-detail"> currentTransaction<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public <a href="cdbtransaction">CDbTransaction</a> <a href="cdbconnection#getCurrentTransaction"><b>getCurrentTransaction</b></a>()</pre> <p>Returns the currently active transaction.</p> <h3 class="detailHeader" id="driverMap-detail"> driverMap<span class="detailHeaderTag"> property (available since v1.1.6) </span> </h3> <pre class="signature">public array <b>$driverMap</b>;</pre> <p>mapping between PDO driver and schema class name. A schema class can be specified using path alias.</p> <h3 class="detailHeader" id="driverName-detail"> driverName<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <a href="cdbconnection#getDriverName"><b>getDriverName</b></a>()<br>public void <a href="cdbconnection#setDriverName"><b>setDriverName</b></a>(string $driverName)</pre> <p>Returns the name of the DB driver.</p> <h3 class="detailHeader" id="emulatePrepare-detail"> emulatePrepare<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$emulatePrepare</b>;</pre> <p>whether to turn on prepare emulation. Defaults to false, meaning PDO will use the native prepare support if available. For some databases (such as MySQL), this may need to be set true so that PDO can emulate the prepare support to bypass the buggy native prepare support. Note, this property is only effective for PHP 5.1.3 or above. The default value is null, which will not change the ATTR_EMULATE_PREPARES value of PDO.</p> <h3 class="detailHeader" id="enableParamLogging-detail"> enableParamLogging<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$enableParamLogging</b>;</pre> <p>whether to log the values that are bound to a prepare SQL statement. Defaults to false. During development, you may consider setting this property to true so that parameter values bound to SQL statements are logged for debugging purpose. You should be aware that logging parameter values could be expensive and have significant impact on the performance of your application.</p> <h3 class="detailHeader" id="enableProfiling-detail"> enableProfiling<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$enableProfiling</b>;</pre> <p>whether to enable profiling the SQL statements being executed. Defaults to false. This should be mainly enabled and used during development to find out the bottleneck of SQL executions.</p> <h3 class="detailHeader" id="initSQLs-detail"> initSQLs<span class="detailHeaderTag"> property (available since v1.1.1) </span> </h3> <pre class="signature">public array <b>$initSQLs</b>;</pre> <p>list of SQL statements that should be executed right after the DB connection is established.</p> <h3 class="detailHeader" id="lastInsertID-detail"> lastInsertID<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public string <a href="cdbconnection#getLastInsertID"><b>getLastInsertID</b></a>(string $sequenceName='')</pre> <p>Returns the ID of the last inserted row or sequence value.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/function.PDO-lastInsertId.php">http://www.php.net/manual/en/function.PDO-lastInsertId.php</a></li> </ul> </div> <h3 class="detailHeader" id="nullConversion-detail"> nullConversion<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public mixed <a href="cdbconnection#getNullConversion"><b>getNullConversion</b></a>()<br>public void <a href="cdbconnection#setNullConversion"><b>setNullConversion</b></a>(mixed $value)</pre> <p>Returns how the null and empty strings are converted.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/pdo.setattribute.php">http://www.php.net/manual/en/pdo.setattribute.php</a></li> </ul> </div> <h3 class="detailHeader" id="password-detail"> password<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$password</b>;</pre> <p>the password for establishing DB connection. Defaults to empty string.</p> <h3 class="detailHeader" id="pdoClass-detail"> pdoClass<span class="detailHeaderTag"> property (available since v1.1.8) </span> </h3> <pre class="signature">public string <b>$pdoClass</b>;</pre> <p>Custom PDO wrapper class.</p> <h3 class="detailHeader" id="pdoInstance-detail"> pdoInstance<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public PDO <a href="cdbconnection#getPdoInstance"><b>getPdoInstance</b></a>()</pre> <p>Returns the PDO instance.</p> <h3 class="detailHeader" id="persistent-detail"> persistent<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <a href="cdbconnection#getPersistent"><b>getPersistent</b></a>()<br>public void <a href="cdbconnection#setPersistent"><b>setPersistent</b></a>(boolean $value)</pre> <p>Returns whether the connection is persistent or not. Some DBMS (such as sqlite) may not support this feature.</p> <h3 class="detailHeader" id="prefetch-detail"> prefetch<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public boolean <a href="cdbconnection#getPrefetch"><b>getPrefetch</b></a>()</pre> <p>Returns whether the connection performs data prefetching.</p> <h3 class="detailHeader" id="queryCacheID-detail"> queryCacheID<span class="detailHeaderTag"> property (available since v1.1.7) </span> </h3> <pre class="signature">public string <b>$queryCacheID</b>;</pre> <p>the ID of the cache application component that is used for query caching. Defaults to 'cache' which refers to the primary cache application component. Set this property to false if you want to disable query caching.</p> <h3 class="detailHeader" id="queryCachingCount-detail"> queryCachingCount<span class="detailHeaderTag"> property (available since v1.1.7) </span> </h3> <pre class="signature">public integer <b>$queryCachingCount</b>;</pre> <p>the number of SQL statements that need to be cached next. If this is 0, then even if query caching is enabled, no query will be cached. Note that each time after executing a SQL statement (whether executed on DB server or fetched from query cache), this property will be reduced by 1 until 0.</p> <h3 class="detailHeader" id="queryCachingDependency-detail"> queryCachingDependency<span class="detailHeaderTag"> property (available since v1.1.7) </span> </h3> <pre class="signature">public CCacheDependency|ICacheDependency <b>$queryCachingDependency</b>;</pre> <p>the dependency that will be used when saving query results into cache.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbconnection#queryCachingDuration">queryCachingDuration</a></li> </ul> </div> <h3 class="detailHeader" id="queryCachingDuration-detail"> queryCachingDuration<span class="detailHeaderTag"> property (available since v1.1.7) </span> </h3> <pre class="signature">public integer <b>$queryCachingDuration</b>;</pre> <p>number of seconds that query results can remain valid in cache. Use 0 or negative value to indicate not caching query results (the default behavior). <br><br> In order to enable query caching, this property must be a positive integer and <a href="cdbconnection#queryCacheID">queryCacheID</a> must point to a valid cache component ID. <br><br> The method <a href="cdbconnection#cache">cache()</a> is provided as a convenient way of setting this property and <a href="cdbconnection#queryCachingDependency">queryCachingDependency</a> on the fly.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbconnection#cache">cache</a></li> <li><a href="cdbconnection#queryCachingDependency">queryCachingDependency</a></li> <li><a href="cdbconnection#queryCacheID">queryCacheID</a></li> </ul> </div> <h3 class="detailHeader" id="schema-detail"> schema<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public <a href="cdbschema">CDbSchema</a> <a href="cdbconnection#getSchema"><b>getSchema</b></a>()</pre> <p>Returns the database schema for the current connection</p> <h3 class="detailHeader" id="schemaCacheID-detail"> schemaCacheID<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$schemaCacheID</b>;</pre> <p>the ID of the cache application component that is used to cache the table metadata. Defaults to 'cache' which refers to the primary cache application component. Set this property to false if you want to disable caching table metadata.</p> <h3 class="detailHeader" id="schemaCachingDuration-detail"> schemaCachingDuration<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$schemaCachingDuration</b>;</pre> <p>number of seconds that table metadata can remain valid in cache. Use 0 or negative value to indicate not caching schema. If greater than 0 and the primary cache is enabled, the table metadata will be cached.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbconnection#schemaCachingExclude">schemaCachingExclude</a></li> </ul> </div> <h3 class="detailHeader" id="schemaCachingExclude-detail"> schemaCachingExclude<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$schemaCachingExclude</b>;</pre> <p>list of tables whose metadata should NOT be cached. Defaults to empty array.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbconnection#schemaCachingDuration">schemaCachingDuration</a></li> </ul> </div> <h3 class="detailHeader" id="serverInfo-detail"> serverInfo<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public string <a href="cdbconnection#getServerInfo"><b>getServerInfo</b></a>()</pre> <p>Returns the information of DBMS server.</p> <h3 class="detailHeader" id="serverVersion-detail"> serverVersion<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public string <a href="cdbconnection#getServerVersion"><b>getServerVersion</b></a>()</pre> <p>Returns the version information of DBMS server.</p> <h3 class="detailHeader" id="stats-detail"> stats<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public array <a href="cdbconnection#getStats"><b>getStats</b></a>()</pre> <p>Returns the statistical results of SQL executions. The results returned include the number of SQL statements executed and the total time spent. In order to use this method, <a href="cdbconnection#enableProfiling">enableProfiling</a> has to be set true.</p> <h3 class="detailHeader" id="tablePrefix-detail"> tablePrefix<span class="detailHeaderTag"> property (available since v1.1.0) </span> </h3> <pre class="signature">public string <b>$tablePrefix</b>;</pre> <p>the default prefix for table names. Defaults to null, meaning no table prefix. By setting this property, any token like '{{tableName}}' in <a href="cdbcommand#text">CDbCommand::text</a> will be replaced by 'prefixTableName', where 'prefix' refers to this property value.</p> <h3 class="detailHeader" id="timeout-detail"> timeout<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public integer <a href="cdbconnection#getTimeout"><b>getTimeout</b></a>()</pre> <p>Returns the timeout settings for the connection.</p> <h3 class="detailHeader" id="username-detail"> username<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$username</b>;</pre> <p>the username for establishing DB connection. Defaults to empty string.</p> <h2>Method Details</h2> <h3 class="detailHeader" id="__construct-detail"> __construct() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__construct</b>(string $dsn='', string $username='', string $password='')</pre> </td></tr> <tr> <td class="paramNameCol">$dsn</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">The Data Source Name, or DSN, contains the information required to connect to the database.</td> </tr> <tr> <td class="paramNameCol">$username</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">The user name for the DSN string.</td> </tr> <tr> <td class="paramNameCol">$password</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">The password for the DSN string.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L287">framework/db/CDbConnection.php#287</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$dsn</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$username</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$password</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionString</span><span style="color: #007700">=</span><span style="color: #0000BB">$dsn</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username</span><span style="color: #007700">=</span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">password</span><span style="color: #007700">=</span><span style="color: #0000BB">$password</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Constructor. Note, the DB connection is not established when this connection instance is created. Set <a href="cdbconnection#setActive">active</a> property to true to establish the connection.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/function.PDO-construct.php">http://www.php.net/manual/en/function.PDO-construct.php</a></li> </ul> </div> <h3 class="detailHeader" id="__sleep-detail"> __sleep() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>__sleep</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol"></td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L298">framework/db/CDbConnection.php#298</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__sleep</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br>    return </span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(</span><span style="color: #0000BB">get_object_vars</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">));<br>}</span></pre> </div> <p>Close the connection when serializing.</p> <h3 class="detailHeader" id="beginTransaction-detail"> beginTransaction() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbtransaction">CDbTransaction</a> <b>beginTransaction</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbtransaction">CDbTransaction</a></td> <td class="paramDescCol">the transaction initiated</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L518">framework/db/CDbConnection.php#518</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">beginTransaction</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #DD0000">'Starting transaction'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.CDbConnection'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setActive</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beginTransaction</span><span style="color: #007700">();<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_transaction</span><span style="color: #007700">=new </span><span style="color: #0000BB">CDbTransaction</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Starts a transaction.</p> <h3 class="detailHeader" id="cache-detail"> cache() <span class="detailHeaderTag"> method (available since v1.1.7) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>cache</b>(integer $duration, CCacheDependency|ICacheDependency $dependency=NULL, integer $queryCount=1)</pre> </td></tr> <tr> <td class="paramNameCol">$duration</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the number of seconds that query results may remain valid in cache. If this is 0, the caching will be disabled.</td> </tr> <tr> <td class="paramNameCol">$dependency</td> <td class="paramTypeCol">CCacheDependency|ICacheDependency</td> <td class="paramDescCol">the dependency that will be used when saving the query results into cache.</td> </tr> <tr> <td class="paramNameCol">$queryCount</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">number of SQL queries that need to be cached after calling this method. Defaults to 1, meaning that the next SQL query will be cached.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the connection instance itself.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L370">framework/db/CDbConnection.php#370</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">cache</span><span style="color: #007700">(</span><span style="color: #0000BB">$duration</span><span style="color: #007700">, </span><span style="color: #0000BB">$dependency</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">, </span><span style="color: #0000BB">$queryCount</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDuration</span><span style="color: #007700">=</span><span style="color: #0000BB">$duration</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDependency</span><span style="color: #007700">=</span><span style="color: #0000BB">$dependency</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingCount</span><span style="color: #007700">=</span><span style="color: #0000BB">$queryCount</span><span style="color: #007700">;<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets the parameters about query caching. This method can be used to enable or disable query caching. By setting the $duration parameter to be 0, the query caching will be disabled. Otherwise, query results of the new SQL statements executed next will be saved in cache and remain valid for the specified duration. If the same query is executed again, the result may be fetched from cache directly without actually executing the SQL statement.</p> <h3 class="detailHeader" id="close-detail"> close() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>close</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L415">framework/db/CDbConnection.php#415</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">close</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #DD0000">'Closing DB connection'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.CDbConnection'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_active</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_schema</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Closes the currently active DB connection. It does nothing if the connection is already closed.</p> <h3 class="detailHeader" id="createCommand-detail"> createCommand() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbcommand">CDbCommand</a> <b>createCommand</b>(mixed $query=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$query</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the DB query to be executed. This can be either a string representing a SQL statement, or an array representing different fragments of a SQL statement. Please refer to <a href="cdbcommand#__construct">CDbCommand::__construct</a> for more details about how to pass an array as the query. If this parameter is not given, you will have to call query builder methods of <a href="cdbcommand">CDbCommand</a> to build the DB query.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbcommand">CDbCommand</a></td> <td class="paramDescCol">the DB command</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L494">framework/db/CDbConnection.php#494</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setActive</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    return new </span><span style="color: #0000BB">CDbCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Creates a command for execution.</p> <h3 class="detailHeader" id="createPdoInstance-detail"> createPdoInstance() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected PDO <b>createPdoInstance</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">PDO</td> <td class="paramDescCol">the pdo instance</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L430">framework/db/CDbConnection.php#430</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">createPdoInstance</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$pdoClass</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pdoClass</span><span style="color: #007700">;<br>    if((</span><span style="color: #0000BB">$driver</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDriverName</span><span style="color: #007700">())!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$driver</span><span style="color: #007700">===</span><span style="color: #DD0000">'mssql' </span><span style="color: #007700">|| </span><span style="color: #0000BB">$driver</span><span style="color: #007700">===</span><span style="color: #DD0000">'dblib'</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$pdoClass</span><span style="color: #007700">=</span><span style="color: #DD0000">'CMssqlPdoAdapter'</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$driver</span><span style="color: #007700">===</span><span style="color: #DD0000">'sqlsrv'</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$pdoClass</span><span style="color: #007700">=</span><span style="color: #DD0000">'CMssqlSqlsrvPdoAdapter'</span><span style="color: #007700">;<br>    }<br><br>    if(!</span><span style="color: #0000BB">class_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$pdoClass</span><span style="color: #007700">))<br>        throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'CDbConnection is unable to find PDO class "{className}". Make sure PDO is installed correctly.'</span><span style="color: #007700">,<br>            array(</span><span style="color: #DD0000">'{className}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$pdoClass</span><span style="color: #007700">)));<br><br>    @</span><span style="color: #0000BB">$instance</span><span style="color: #007700">=new </span><span style="color: #0000BB">$pdoClass</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionString</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">password</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">);<br><br>    if(!</span><span style="color: #0000BB">$instance</span><span style="color: #007700">)<br>        throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'CDbConnection failed to open the DB connection.'</span><span style="color: #007700">));<br><br>    return </span><span style="color: #0000BB">$instance</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Creates the PDO instance. When some functionalities are missing in the pdo driver, we may use an adapter class to provide them.</p> <h3 class="detailHeader" id="getActive-detail"> getActive() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>getActive</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the DB connection is established</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L332">framework/db/CDbConnection.php#332</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getActive</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_active</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns whether the DB connection is established.</p> <h3 class="detailHeader" id="getAttribute-detail"> getAttribute() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getAttribute</b>(integer $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the attribute to be queried</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the corresponding attribute information</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L812">framework/db/CDbConnection.php#812</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setActive</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Obtains a specific DB connection attribute information.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/function.PDO-getAttribute.php">http://www.php.net/manual/en/function.PDO-getAttribute.php</a></li> </ul> </div> <h3 class="detailHeader" id="getAttributes-detail"> getAttributes() <span class="detailHeaderTag"> method (available since v1.1.7) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>getAttributes</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">attributes (name=&gt;value) that are previously explicitly set for the DB connection.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L838">framework/db/CDbConnection.php#838</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getAttributes</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the attributes that are previously explicitly set for the DB connection.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbconnection#setAttributes">setAttributes</a></li> </ul> </div> <h3 class="detailHeader" id="getAutoCommit-detail"> getAutoCommit() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>getAutoCommit</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether creating or updating a DB record will be automatically committed.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L690">framework/db/CDbConnection.php#690</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getAutoCommit</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_AUTOCOMMIT</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns whether creating or updating a DB record will be automatically committed. Some DBMS (such as sqlite) may not support this feature.</p> <h3 class="detailHeader" id="getAvailableDrivers-detail"> getAvailableDrivers() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static array <b>getAvailableDrivers</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of available PDO drivers</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L309">framework/db/CDbConnection.php#309</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">getAvailableDrivers</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">getAvailableDrivers</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Returns a list of available PDO drivers.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/function.PDO-getAvailableDrivers.php">http://www.php.net/manual/en/function.PDO-getAvailableDrivers.php</a></li> </ul> </div> <h3 class="detailHeader" id="getClientVersion-detail"> getClientVersion() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getClientVersion</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the version information of the DB driver</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L755">framework/db/CDbConnection.php#755</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getClientVersion</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_CLIENT_VERSION</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the version information of the DB driver.</p> <h3 class="detailHeader" id="getColumnCase-detail"> getColumnCase() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getColumnCase</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the case of the column names</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L650">framework/db/CDbConnection.php#650</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getColumnCase</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_CASE</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the case of the column names</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/pdo.setattribute.php">http://www.php.net/manual/en/pdo.setattribute.php</a></li> </ul> </div> <h3 class="detailHeader" id="getCommandBuilder-detail"> getCommandBuilder() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbcommandbuilder">CDbCommandBuilder</a> <b>getCommandBuilder</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbcommandbuilder">CDbCommandBuilder</a></td> <td class="paramDescCol">the command builder</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L550">framework/db/CDbConnection.php#550</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Returns the SQL command builder for the current DB connection.</p> <h3 class="detailHeader" id="getConnectionStatus-detail"> getConnectionStatus() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getConnectionStatus</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the status of the connection</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L765">framework/db/CDbConnection.php#765</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getConnectionStatus</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_CONNECTION_STATUS</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the status of the connection. Some DBMS (such as sqlite) may not support this feature.</p> <h3 class="detailHeader" id="getCurrentTransaction-detail"> getCurrentTransaction() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbtransaction">CDbTransaction</a> <b>getCurrentTransaction</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbtransaction">CDbTransaction</a></td> <td class="paramDescCol">the currently active transaction. Null if no active transaction.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L504">framework/db/CDbConnection.php#504</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getCurrentTransaction</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_transaction</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_transaction</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getActive</span><span style="color: #007700">())<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_transaction</span><span style="color: #007700">;<br>    }<br>    return </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the currently active transaction.</p> <h3 class="detailHeader" id="getDriverName-detail"> getDriverName() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getDriverName</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">name of the DB driver.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L729">framework/db/CDbConnection.php#729</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getDriverName</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_driverName</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_driverName</span><span style="color: #007700">;<br>    elseif((</span><span style="color: #0000BB">$pos</span><span style="color: #007700">=</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionString</span><span style="color: #007700">,</span><span style="color: #DD0000">':'</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_driverName</span><span style="color: #007700">=</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionString</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">$pos</span><span style="color: #007700">));<br>    </span><span style="color: #FF8000">//return $this-&gt;getAttribute(PDO::ATTR_DRIVER_NAME);<br></span><span style="color: #007700">}</span></pre> </div> <p>Returns the name of the DB driver.</p> <h3 class="detailHeader" id="getLastInsertID-detail"> getLastInsertID() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getLastInsertID</b>(string $sequenceName='')</pre> </td></tr> <tr> <td class="paramNameCol">$sequenceName</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">name of the sequence object (required by some DBMS)</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the row ID of the last row inserted, or the last value retrieved from the sequence object</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L561">framework/db/CDbConnection.php#561</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getLastInsertID</span><span style="color: #007700">(</span><span style="color: #0000BB">$sequenceName</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setActive</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">lastInsertId</span><span style="color: #007700">(</span><span style="color: #0000BB">$sequenceName</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the ID of the last inserted row or sequence value.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/function.PDO-lastInsertId.php">http://www.php.net/manual/en/function.PDO-lastInsertId.php</a></li> </ul> </div> <h3 class="detailHeader" id="getNullConversion-detail"> getNullConversion() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getNullConversion</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">how the null and empty strings are converted</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L670">framework/db/CDbConnection.php#670</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getNullConversion</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ORACLE_NULLS</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns how the null and empty strings are converted.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/pdo.setattribute.php">http://www.php.net/manual/en/pdo.setattribute.php</a></li> </ul> </div> <h3 class="detailHeader" id="getPdoInstance-detail"> getPdoInstance() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public PDO <b>getPdoInstance</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">PDO</td> <td class="paramDescCol">the PDO instance, null if the connection is not established yet</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L481">framework/db/CDbConnection.php#481</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getPdoInstance</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the PDO instance.</p> <h3 class="detailHeader" id="getPdoType-detail"> getPdoType() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>getPdoType</b>(string $type)</pre> </td></tr> <tr> <td class="paramNameCol">$type</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">The PHP type (obtained by gettype() call).</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the corresponding PDO type</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L632">framework/db/CDbConnection.php#632</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getPdoType</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">)<br>{<br>    static </span><span style="color: #0000BB">$map</span><span style="color: #007700">=array<br>    (<br>        </span><span style="color: #DD0000">'boolean'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_BOOL</span><span style="color: #007700">,<br>        </span><span style="color: #DD0000">'integer'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_INT</span><span style="color: #007700">,<br>        </span><span style="color: #DD0000">'string'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">,<br>        </span><span style="color: #DD0000">'resource'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_LOB</span><span style="color: #007700">,<br>        </span><span style="color: #DD0000">'NULL'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_NULL</span><span style="color: #007700">,<br>    );<br>    return isset(</span><span style="color: #0000BB">$map</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">]) ? </span><span style="color: #0000BB">$map</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">] : </span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Determines the PDO type for the specified PHP type.</p> <h3 class="detailHeader" id="getPersistent-detail"> getPersistent() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>getPersistent</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the connection is persistent or not</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L710">framework/db/CDbConnection.php#710</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getPersistent</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_PERSISTENT</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns whether the connection is persistent or not. Some DBMS (such as sqlite) may not support this feature.</p> <h3 class="detailHeader" id="getPrefetch-detail"> getPrefetch() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>getPrefetch</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the connection performs data prefetching</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L774">framework/db/CDbConnection.php#774</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getPrefetch</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_PREFETCH</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns whether the connection performs data prefetching.</p> <h3 class="detailHeader" id="getSchema-detail"> getSchema() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbschema">CDbSchema</a> <b>getSchema</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbschema">CDbSchema</a></td> <td class="paramDescCol">the database schema for the current connection</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L531">framework/db/CDbConnection.php#531</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_schema</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_schema</span><span style="color: #007700">;<br>    else<br>    {<br>        </span><span style="color: #0000BB">$driver</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDriverName</span><span style="color: #007700">();<br>        if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">driverMap</span><span style="color: #007700">[</span><span style="color: #0000BB">$driver</span><span style="color: #007700">]))<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_schema</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">createComponent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">driverMap</span><span style="color: #007700">[</span><span style="color: #0000BB">$driver</span><span style="color: #007700">], </span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>        else<br>            throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'CDbConnection does not support reading schema for {driver} database.'</span><span style="color: #007700">,<br>                array(</span><span style="color: #DD0000">'{driver}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$driver</span><span style="color: #007700">)));<br>    }<br>}</span></pre> </div> <p>Returns the database schema for the current connection</p> <h3 class="detailHeader" id="getServerInfo-detail"> getServerInfo() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getServerInfo</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the information of DBMS server</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L783">framework/db/CDbConnection.php#783</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getServerInfo</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_SERVER_INFO</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the information of DBMS server.</p> <h3 class="detailHeader" id="getServerVersion-detail"> getServerVersion() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getServerVersion</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the version information of DBMS server</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L792">framework/db/CDbConnection.php#792</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getServerVersion</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_SERVER_VERSION</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the version information of DBMS server.</p> <h3 class="detailHeader" id="getStats-detail"> getStats() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>getStats</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the first element indicates the number of SQL statements executed, and the second element the total time spent in SQL execution.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L863">framework/db/CDbConnection.php#863</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getStats</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$logger</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">getLogger</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$timings</span><span style="color: #007700">=</span><span style="color: #0000BB">$logger</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProfilingResults</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.CDbCommand.query'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$count</span><span style="color: #007700">=</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$timings</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$time</span><span style="color: #007700">=</span><span style="color: #0000BB">array_sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$timings</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$timings</span><span style="color: #007700">=</span><span style="color: #0000BB">$logger</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProfilingResults</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.CDbCommand.execute'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$count</span><span style="color: #007700">+=</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$timings</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$time</span><span style="color: #007700">+=</span><span style="color: #0000BB">array_sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$timings</span><span style="color: #007700">);<br>    return array(</span><span style="color: #0000BB">$count</span><span style="color: #007700">,</span><span style="color: #0000BB">$time</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the statistical results of SQL executions. The results returned include the number of SQL statements executed and the total time spent. In order to use this method, <a href="cdbconnection#enableProfiling">enableProfiling</a> has to be set true.</p> <h3 class="detailHeader" id="getTimeout-detail"> getTimeout() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>getTimeout</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">timeout settings for the connection</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L801">framework/db/CDbConnection.php#801</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getTimeout</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_TIMEOUT</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the timeout settings for the connection.</p> <h3 class="detailHeader" id="init-detail"> init() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>init</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L321">framework/db/CDbConnection.php#321</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">init</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">autoConnect</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setActive</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Initializes the component. This method is required by <a href="iapplicationcomponent">IApplicationComponent</a> and is invoked by application when the CDbConnection is used as an application component. If you override this method, make sure to call the parent implementation so that the component can be marked as initialized.</p> <h3 class="detailHeader" id="initConnection-detail"> initConnection() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>initConnection</b>(PDO $pdo)</pre> </td></tr> <tr> <td class="paramNameCol">$pdo</td> <td class="paramTypeCol">PDO</td> <td class="paramDescCol">the PDO instance</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L459">framework/db/CDbConnection.php#459</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">initConnection</span><span style="color: #007700">(</span><span style="color: #0000BB">$pdo</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">, </span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">emulatePrepare</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">constant</span><span style="color: #007700">(</span><span style="color: #DD0000">'PDO::ATTR_EMULATE_PREPARES'</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_EMULATE_PREPARES</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">emulatePrepare</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">charset</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$driver</span><span style="color: #007700">=</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_DRIVER_NAME</span><span style="color: #007700">));<br>        if(</span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$driver</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'pgsql'</span><span style="color: #007700">,</span><span style="color: #DD0000">'mysql'</span><span style="color: #007700">,</span><span style="color: #DD0000">'mysqli'</span><span style="color: #007700">)))<br>            </span><span style="color: #0000BB">$pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">'SET NAMES '</span><span style="color: #007700">.</span><span style="color: #0000BB">$pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quote</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">charset</span><span style="color: #007700">));<br>    }<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">initSQLs</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">initSQLs </span><span style="color: #007700">as </span><span style="color: #0000BB">$sql</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Initializes the open db connection. This method is invoked right after the db connection is established. The default implementation is to set the charset for MySQL, MariaDB and PostgreSQL database connections.</p> <h3 class="detailHeader" id="open-detail"> open() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>open</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L382">framework/db/CDbConnection.php#382</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">open</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        if(empty(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionString</span><span style="color: #007700">))<br>            throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #DD0000">'CDbConnection.connectionString cannot be empty.'</span><span style="color: #007700">);<br>        try<br>        {<br>            </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #DD0000">'Opening DB connection'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.CDbConnection'</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createPdoInstance</span><span style="color: #007700">();<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">initConnection</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_active</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>        }<br>        catch(</span><span style="color: #0000BB">PDOException $e</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">YII_DEBUG</span><span style="color: #007700">)<br>            {<br>                throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #DD0000">'CDbConnection failed to open the DB connection: '</span><span style="color: #007700">.<br>                    </span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),(int)</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">(),</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errorInfo</span><span style="color: #007700">);<br>            }<br>            else<br>            {<br>                </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">log</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),</span><span style="color: #0000BB">CLogger</span><span style="color: #007700">::</span><span style="color: #0000BB">LEVEL_ERROR</span><span style="color: #007700">,</span><span style="color: #DD0000">'exception.CDbException'</span><span style="color: #007700">);<br>                throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #DD0000">'CDbConnection failed to open the DB connection.'</span><span style="color: #007700">,(int)</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">(),</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errorInfo</span><span style="color: #007700">);<br>            }<br>        }<br>    }<br>}</span></pre> </div> <p>Opens DB connection if it is currently not</p> <h3 class="detailHeader" id="quoteColumnName-detail"> quoteColumnName() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>quoteColumnName</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">column name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the properly quoted column name</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L622">framework/db/CDbConnection.php#622</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Quotes a column name for use in a query. If the column name contains prefix, the prefix will also be properly quoted.</p> <h3 class="detailHeader" id="quoteTableName-detail"> quoteTableName() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>quoteTableName</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">table name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the properly quoted table name</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L611">framework/db/CDbConnection.php#611</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">quoteTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">quoteTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Quotes a table name for use in a query. If the table name contains schema prefix, the prefix will also be properly quoted.</p> <h3 class="detailHeader" id="quoteValue-detail"> quoteValue() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>quoteValue</b>(string $str)</pre> </td></tr> <tr> <td class="paramNameCol">$str</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">string to be quoted</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the properly quoted string</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L573">framework/db/CDbConnection.php#573</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">quoteValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">is_int</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">) || </span><span style="color: #0000BB">is_float</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$str</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setActive</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    if((</span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quote</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>    else  </span><span style="color: #FF8000">// the driver doesn't support quote (e.g. oci)<br>        </span><span style="color: #007700">return </span><span style="color: #DD0000">"'" </span><span style="color: #007700">. </span><span style="color: #0000BB">addcslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"'"</span><span style="color: #007700">, </span><span style="color: #DD0000">"''"</span><span style="color: #007700">, </span><span style="color: #0000BB">$str</span><span style="color: #007700">), </span><span style="color: #DD0000">"\000\n\r\\\032"</span><span style="color: #007700">) . </span><span style="color: #DD0000">"'"</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Quotes a string value for use in a query.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/function.PDO-quote.php">http://www.php.net/manual/en/function.PDO-quote.php</a></li> </ul> </div> <h3 class="detailHeader" id="quoteValueWithType-detail"> quoteValueWithType() <span class="detailHeaderTag"> method (available since v1.1.18) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>quoteValueWithType</b>(mixed $value, integer $type)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the value to be quoted.</td> </tr> <tr> <td class="paramNameCol">$type</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">The type to be used for quoting. This should be one of the `PDO::PARAM_*` constants described in <a href="http://www.php.net/manual/en/pdo.constants.php">PDO documentation</a>. This parameter will be passed to the `PDO::quote()` function.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the properly quoted string.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L596">framework/db/CDbConnection.php#596</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">quoteValueWithType</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">, </span><span style="color: #0000BB">$type</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setActive</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    if((</span><span style="color: #0000BB">$quoted</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quote</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">, </span><span style="color: #0000BB">$type</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$quoted</span><span style="color: #007700">;<br>    else  </span><span style="color: #FF8000">// the driver doesn't support quote (e.g. oci)<br>        </span><span style="color: #007700">return </span><span style="color: #DD0000">"'" </span><span style="color: #007700">. </span><span style="color: #0000BB">addcslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"'"</span><span style="color: #007700">, </span><span style="color: #DD0000">"''"</span><span style="color: #007700">, </span><span style="color: #0000BB">$value</span><span style="color: #007700">), </span><span style="color: #DD0000">"\000\n\r\\\032"</span><span style="color: #007700">) . </span><span style="color: #DD0000">"'"</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Quotes a value for use in a query using a given type.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/function.PDO-quote.php">http://www.php.net/manual/en/function.PDO-quote.php</a></li> </ul> </div> <h3 class="detailHeader" id="setActive-detail"> setActive() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setActive</b>(boolean $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to open or close DB connection</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L342">framework/db/CDbConnection.php#342</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setActive</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">!=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_active</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">();<br>        else<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br>    }<br>}</span></pre> </div> <p>Open or close the DB connection.</p> <h3 class="detailHeader" id="setAttribute-detail"> setAttribute() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setAttribute</b>(integer $name, mixed $value)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the attribute to be set</td> </tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the attribute value</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L824">framework/db/CDbConnection.php#824</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">PDO</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>    else<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets an attribute on the database connection.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/function.PDO-setAttribute.php">http://www.php.net/manual/en/function.PDO-setAttribute.php</a></li> </ul> </div> <h3 class="detailHeader" id="setAttributes-detail"> setAttributes() <span class="detailHeaderTag"> method (available since v1.1.7) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setAttributes</b>(array $values)</pre> </td></tr> <tr> <td class="paramNameCol">$values</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">attributes (name=&gt;value) to be set.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L849">framework/db/CDbConnection.php#849</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$values</span><span style="color: #007700">)<br>{<br>    foreach(</span><span style="color: #0000BB">$values </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets a set of attributes on the database connection.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbconnection#setAttribute">setAttribute</a></li> </ul> </div> <h3 class="detailHeader" id="setAutoCommit-detail"> setAutoCommit() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setAutoCommit</b>(boolean $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether creating or updating a DB record will be automatically committed.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L700">framework/db/CDbConnection.php#700</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setAutoCommit</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_AUTOCOMMIT</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Sets whether creating or updating a DB record will be automatically committed. Some DBMS (such as sqlite) may not support this feature.</p> <h3 class="detailHeader" id="setColumnCase-detail"> setColumnCase() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setColumnCase</b>(mixed $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the case of the column names</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L660">framework/db/CDbConnection.php#660</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setColumnCase</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_CASE</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Sets the case of the column names.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/pdo.setattribute.php">http://www.php.net/manual/en/pdo.setattribute.php</a></li> </ul> </div> <h3 class="detailHeader" id="setDriverName-detail"> setDriverName() <span class="detailHeaderTag"> method (available since v1.1.16) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setDriverName</b>(string $driverName)</pre> </td></tr> <tr> <td class="paramNameCol">$driverName</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">to be set. Valid values are the keys from the <a href="cdbconnection#driverMap">driverMap</a> property.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L746">framework/db/CDbConnection.php#746</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setDriverName</span><span style="color: #007700">(</span><span style="color: #0000BB">$driverName</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_driverName</span><span style="color: #007700">=</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$driverName</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Changes the name of the DB driver. Overrides value extracted from the <a href="cdbconnection#connectionString">connectionString</a>, which is behavior by default.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbconnection#getDriverName">getDriverName</a></li> <li><a href="cdbconnection#driverName">driverName</a></li> </ul> </div> <h3 class="detailHeader" id="setNullConversion-detail"> setNullConversion() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setNullConversion</b>(mixed $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">how the null and empty strings are converted</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L680">framework/db/CDbConnection.php#680</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setNullConversion</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ORACLE_NULLS</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Sets how the null and empty strings are converted.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/pdo.setattribute.php">http://www.php.net/manual/en/pdo.setattribute.php</a></li> </ul> </div> <h3 class="detailHeader" id="setPersistent-detail"> setPersistent() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setPersistent</b>(boolean $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the connection is persistent or not</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/CDbConnection.php#L720">framework/db/CDbConnection.php#720</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setPersistent</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_PERSISTENT</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Sets whether the connection is persistent or not. Some DBMS (such as sqlite) may not support this feature.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CDbConnection" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CDbConnection</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
