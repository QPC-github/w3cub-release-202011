
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CDbCache - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content="whether the cache DB table should be created automatically if it does not exist. Defaults to true. If you already have the table created, it is &hellip;">
  <meta name="keywords" content="cdbcache, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cdbcache.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/yii~1.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CDbCache</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.caching">system.caching</a></td> </tr> <tr> <th>Inheritance</th> <td>class CDbCache » <a href="ccache">CCache</a> » <a href="capplicationcomponent">CApplicationComponent</a> » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Implements</th> <td>ArrayAccess, <a href="icache">ICache</a>, <a href="iapplicationcomponent">IApplicationComponent</a>
</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php">framework/caching/CDbCache.php</a></td> </tr> </table> <div id="classDescription"> CDbCache implements a cache application component by storing cached data in a database. <br><br> CDbCache stores cache data in a DB table named <a href="cdbcache#cacheTableName">cacheTableName</a>. If the table does not exist, it will be automatically created. By setting <a href="cdbcache#autoCreateCacheTable">autoCreateCacheTable</a> to false, you can also manually create the DB table. <br><br> CDbCache relies on <a href="http://www.php.net/manual/en/ref.pdo.php">PDO</a> to access database. By default, it will use a SQLite3 database under the application runtime directory. You can also specify <a href="cdbcache#connectionID">connectionID</a> so that it makes use of a DB application component to access database. <br><br> See <a href="ccache">CCache</a> manual for common cache operations that are supported by CDbCache.</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="autoCreateCacheTable"> <td><a href="cdbcache#autoCreateCacheTable-detail">autoCreateCacheTable</a></td> <td>boolean</td> <td>whether the cache DB table should be created automatically if it does not exist.</td> <td>CDbCache</td> </tr> <tr class="inherited" id="behaviors"> <td><a href="capplicationcomponent#behaviors-detail">behaviors</a></td> <td>array</td> <td>the behaviors that should be attached to this component.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="cacheTableName"> <td><a href="cdbcache#cacheTableName-detail">cacheTableName</a></td> <td>string</td> <td>name of the DB table to store cache content.</td> <td>CDbCache</td> </tr> <tr id="connectionID"> <td><a href="cdbcache#connectionID-detail">connectionID</a></td> <td>string</td> <td>the ID of the <a href="cdbconnection">CDbConnection</a> application component.</td> <td>CDbCache</td> </tr> <tr id="dbConnection"> <td><a href="cdbcache#dbConnection-detail">dbConnection</a></td> <td><a href="cdbconnection">CDbConnection</a></td> <td>the DB connection instance</td> <td>CDbCache</td> </tr> <tr id="gCProbability"> <td><a href="cdbcache#gCProbability-detail">gCProbability</a></td> <td>integer</td> <td>the probability (parts per million) that garbage collection (GC) should be performed when storing a piece of data in the cache.</td> <td>CDbCache</td> </tr> <tr class="inherited" id="hashKey"> <td><a href="ccache#hashKey-detail">hashKey</a></td> <td>boolean</td> <td>whether to md5-hash the cache key for normalization purposes.</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="isInitialized"> <td><a href="capplicationcomponent#isInitialized-detail">isInitialized</a></td> <td>boolean</td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr class="inherited" id="keyPrefix"> <td><a href="ccache#keyPrefix-detail">keyPrefix</a></td> <td>string</td> <td>a string prefixed to every cache key so that it is unique.</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="serializer"> <td><a href="ccache#serializer-detail">serializer</a></td> <td>array|boolean</td> <td>the functions used to serialize and unserialize cached data.</td> <td><a href="ccache">CCache</a></td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__get"> <td><a href="ccomponent#__get-detail">__get()</a></td> <td>Returns a property value, an event handler list or a behavior based on its name.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__isset"> <td><a href="ccomponent#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__set"> <td><a href="ccomponent#__set-detail">__set()</a></td> <td>Sets value of a component property.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__unset"> <td><a href="ccomponent#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="add"> <td><a href="ccache#add-detail">add()</a></td> <td>Stores a value identified by a key into cache if the cache does not contain this key.</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="delete"> <td><a href="ccache#delete-detail">delete()</a></td> <td>Deletes a value with the specified key from cache</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="flush"> <td><a href="ccache#flush-detail">flush()</a></td> <td>Deletes all values from cache.</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="get"> <td><a href="ccache#get-detail">get()</a></td> <td>Retrieves a value from cache with a specified key.</td> <td><a href="ccache">CCache</a></td> </tr> <tr id="getDbConnection"> <td><a href="cdbcache#getDbConnection-detail">getDbConnection()</a></td> <td>Returns the DB connection instance</td> <td>CDbCache</td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="getGCProbability"> <td><a href="cdbcache#getGCProbability-detail">getGCProbability()</a></td> <td>Returns the probability (parts per million) that garbage collection (GC) should be performed when storing a piece of data in the cache. Defaults to 100, meaning 0.01% chance.</td> <td>CDbCache</td> </tr> <tr class="inherited" id="getIsInitialized"> <td><a href="capplicationcomponent#getIsInitialized-detail">getIsInitialized()</a></td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="init"> <td><a href="cdbcache#init-detail">init()</a></td> <td>Initializes this application component.</td> <td>CDbCache</td> </tr> <tr class="inherited" id="mget"> <td><a href="ccache#mget-detail">mget()</a></td> <td>Retrieves multiple values from cache with the specified keys.</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="offsetExists"> <td><a href="ccache#offsetExists-detail">offsetExists()</a></td> <td>Returns whether there is a cache entry with a specified key.</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="offsetGet"> <td><a href="ccache#offsetGet-detail">offsetGet()</a></td> <td>Retrieves the value from cache with a specified key.</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="offsetSet"> <td><a href="ccache#offsetSet-detail">offsetSet()</a></td> <td>Stores the value identified by a key into cache.</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="offsetUnset"> <td><a href="ccache#offsetUnset-detail">offsetUnset()</a></td> <td>Deletes the value with the specified key from cache</td> <td><a href="ccache">CCache</a></td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="set"> <td><a href="ccache#set-detail">set()</a></td> <td>Stores a value identified by a key into cache.</td> <td><a href="ccache">CCache</a></td> </tr> <tr id="setDbConnection"> <td><a href="cdbcache#setDbConnection-detail">setDbConnection()</a></td> <td>Sets the DB connection used by the cache component.</td> <td>CDbCache</td> </tr> <tr id="setGCProbability"> <td><a href="cdbcache#setGCProbability-detail">setGCProbability()</a></td> <td>Sets the probability (parts per million) that garbage collection (GC) should be performed when storing a piece of data in the cache. Defaults to 100, meaning 0.01% chance. This number should be between 0 and 1000000. A value 0 meaning no GC will be performed at all.</td> <td>CDbCache</td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="addValue"> <td><a href="cdbcache#addValue-detail">addValue()</a></td> <td>Stores a value identified by a key into cache if the cache does not contain this key.</td> <td>CDbCache</td> </tr> <tr id="createCacheTable"> <td><a href="cdbcache#createCacheTable-detail">createCacheTable()</a></td> <td>Creates the cache DB table.</td> <td>CDbCache</td> </tr> <tr id="deleteValue"> <td><a href="cdbcache#deleteValue-detail">deleteValue()</a></td> <td>Deletes a value with the specified key from cache</td> <td>CDbCache</td> </tr> <tr id="flushValues"> <td><a href="cdbcache#flushValues-detail">flushValues()</a></td> <td>Deletes all values from cache.</td> <td>CDbCache</td> </tr> <tr id="gc"> <td><a href="cdbcache#gc-detail">gc()</a></td> <td>Removes the expired data values.</td> <td>CDbCache</td> </tr> <tr class="inherited" id="generateUniqueKey"> <td><a href="ccache#generateUniqueKey-detail">generateUniqueKey()</a></td> <td></td> <td><a href="ccache">CCache</a></td> </tr> <tr id="getValue"> <td><a href="cdbcache#getValue-detail">getValue()</a></td> <td>Retrieves a value from cache with a specified key.</td> <td>CDbCache</td> </tr> <tr id="getValues"> <td><a href="cdbcache#getValues-detail">getValues()</a></td> <td>Retrieves multiple values from cache with the specified keys.</td> <td>CDbCache</td> </tr> <tr id="setValue"> <td><a href="cdbcache#setValue-detail">setValue()</a></td> <td>Stores a value identified by a key in cache.</td> <td>CDbCache</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="autoCreateCacheTable-detail"> autoCreateCacheTable<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$autoCreateCacheTable</b>;</pre> <p>whether the cache DB table should be created automatically if it does not exist. Defaults to true. If you already have the table created, it is recommended you set this property to be false to improve performance.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbcache#cacheTableName">cacheTableName</a></li> </ul> </div> <h3 class="detailHeader" id="cacheTableName-detail"> cacheTableName<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$cacheTableName</b>;</pre> <p>name of the DB table to store cache content. Defaults to 'YiiCache'. Note, if <a href="cdbcache#autoCreateCacheTable">autoCreateCacheTable</a> is false and you want to create the DB table manually by yourself, you need to make sure the DB table is of the following structure: </p>
<pre>
(id CHAR(128) PRIMARY KEY, expire INTEGER, value BLOB)
</pre> Note, some DBMS might not support BLOB type. In this case, replace 'BLOB' with a suitable binary data type (e.g. LONGBLOB in MySQL, BYTEA in PostgreSQL.) <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbcache#autoCreateCacheTable">autoCreateCacheTable</a></li> </ul> </div> <h3 class="detailHeader" id="connectionID-detail"> connectionID<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$connectionID</b>;</pre> <p>the ID of the <a href="cdbconnection">CDbConnection</a> application component. If not set, a SQLite3 database will be automatically created and used. The SQLite database file is <code>protected/runtime/cache-YiiVersion.db</code>.</p> <h3 class="detailHeader" id="dbConnection-detail"> dbConnection<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public <a href="cdbconnection">CDbConnection</a> <a href="cdbcache#getDbConnection"><b>getDbConnection</b></a>()<br>public void <a href="cdbcache#setDbConnection"><b>setDbConnection</b></a>(<a href="cdbconnection">CDbConnection</a> $value)</pre> <p>the DB connection instance</p> <h3 class="detailHeader" id="gCProbability-detail"> gCProbability<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <a href="cdbcache#getGCProbability"><b>getGCProbability</b></a>()<br>public void <a href="cdbcache#setGCProbability"><b>setGCProbability</b></a>(integer $value)</pre> <p>the probability (parts per million) that garbage collection (GC) should be performed when storing a piece of data in the cache. Defaults to 100, meaning 0.01% chance.</p> <h2>Method Details</h2> <h3 class="detailHeader" id="addValue-detail"> addValue() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected boolean <b>addValue</b>(string $key, string $value, integer $expire)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the key identifying the value to be cached</td> </tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the value to be cached</td> </tr> <tr> <td class="paramNameCol">$expire</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the number of seconds in which the cached value will expire. 0 means never expire.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">true if the value is successfully stored into cache, false otherwise</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L255">framework/caching/CDbCache.php#255</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">addValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$expire</span><span style="color: #007700">)<br>{<br>    if(!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_gced </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">mt_rand</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">1000000</span><span style="color: #007700">)&lt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_gcProbability</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">gc</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_gced</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">$expire</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$expire</span><span style="color: #007700">+=</span><span style="color: #0000BB">time</span><span style="color: #007700">();<br>    else<br>        </span><span style="color: #0000BB">$expire</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$sql</span><span style="color: #007700">=</span><span style="color: #DD0000">"INSERT INTO </span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheTableName</span><span style="color: #007700">}</span><span style="color: #DD0000"> (id,expire,value) VALUES ('</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">',</span><span style="color: #0000BB">$expire</span><span style="color: #DD0000">,:value)"</span><span style="color: #007700">;<br>    try<br>    {<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindValue</span><span style="color: #007700">(</span><span style="color: #DD0000">':value'</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_LOB</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    }<br>    catch(</span><span style="color: #0000BB">Exception $e</span><span style="color: #007700">)<br>    {<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    }<br>}</span></pre> </div> <p>Stores a value identified by a key into cache if the cache does not contain this key. This is the implementation of the method declared in the parent class.</p> <h3 class="detailHeader" id="createCacheTable-detail"> createCacheTable() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>createCacheTable</b>(<a href="cdbconnection">CDbConnection</a> $db, string $tableName)</pre> </td></tr> <tr> <td class="paramNameCol">$db</td> <td class="paramTypeCol"><a href="cdbconnection">CDbConnection</a></td> <td class="paramDescCol">the database connection</td> </tr> <tr> <td class="paramNameCol">$tableName</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the name of the table to be created</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L122">framework/caching/CDbCache.php#122</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">createCacheTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$driver</span><span style="color: #007700">=</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDriverName</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$driver</span><span style="color: #007700">===</span><span style="color: #DD0000">'mysql'</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$blob</span><span style="color: #007700">=</span><span style="color: #DD0000">'LONGBLOB'</span><span style="color: #007700">;<br>    elseif(</span><span style="color: #0000BB">$driver</span><span style="color: #007700">===</span><span style="color: #DD0000">'pgsql'</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$blob</span><span style="color: #007700">=</span><span style="color: #DD0000">'BYTEA'</span><span style="color: #007700">;<br>    else<br>        </span><span style="color: #0000BB">$blob</span><span style="color: #007700">=</span><span style="color: #DD0000">'BLOB'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$sql</span><span style="color: #007700">=&lt;&lt;&lt;EOD<br></span><span style="color: #DD0000">CREATE TABLE </span><span style="color: #0000BB">$tableName</span><span style="color: #DD0000"><br>(<br>id CHAR(128) PRIMARY KEY,<br>expire INTEGER,<br>value </span><span style="color: #0000BB">$blob</span><span style="color: #DD0000"><br>)<br></span><span style="color: #007700">EOD;<br>    </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Creates the cache DB table.</p> <h3 class="detailHeader" id="deleteValue-detail"> deleteValue() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected boolean <b>deleteValue</b>(string $key)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the key of the value to be deleted</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">if no error happens during deletion</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L287">framework/caching/CDbCache.php#287</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">deleteValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$sql</span><span style="color: #007700">=</span><span style="color: #DD0000">"DELETE FROM </span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheTableName</span><span style="color: #007700">}</span><span style="color: #DD0000"> WHERE id='</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>    return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Deletes a value with the specified key from cache This is the implementation of the method declared in the parent class.</p> <h3 class="detailHeader" id="flushValues-detail"> flushValues() <span class="detailHeaderTag"> method (available since v1.1.5) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected boolean <b>flushValues</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the flush operation was successful.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L308">framework/caching/CDbCache.php#308</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">flushValues</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">"DELETE FROM </span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheTableName</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>    return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Deletes all values from cache. This is the implementation of the method declared in the parent class.</p> <h3 class="detailHeader" id="gc-detail"> gc() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>gc</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L297">framework/caching/CDbCache.php#297</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">gc</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">"DELETE FROM </span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheTableName</span><span style="color: #007700">}</span><span style="color: #DD0000"> WHERE expire&gt;0 AND expire&lt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">time</span><span style="color: #007700">())-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Removes the expired data values.</p> <h3 class="detailHeader" id="getDbConnection-detail"> getDbConnection() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbconnection">CDbConnection</a> <b>getDbConnection</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbconnection">CDbConnection</a></td> <td class="paramDescCol">the DB connection instance</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L146">framework/caching/CDbCache.php#146</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">;<br>    elseif((</span><span style="color: #0000BB">$id</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionID</span><span style="color: #007700">)!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        if((</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getComponent</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">)) instanceof </span><span style="color: #0000BB">CDbConnection</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">;<br>        else<br>            throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'CDbCache.connectionID "{id}" is invalid. Please make sure it refers to the ID of a CDbConnection application component.'</span><span style="color: #007700">,<br>                array(</span><span style="color: #DD0000">'{id}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$id</span><span style="color: #007700">)));<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$dbFile</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRuntimePath</span><span style="color: #007700">().</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #DD0000">'cache-'</span><span style="color: #007700">.</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">getVersion</span><span style="color: #007700">().</span><span style="color: #DD0000">'.db'</span><span style="color: #007700">;<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">=new </span><span style="color: #0000BB">CDbConnection</span><span style="color: #007700">(</span><span style="color: #DD0000">'sqlite:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$dbFile</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div>  <h3 class="detailHeader" id="getGCProbability-detail"> getGCProbability() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>getGCProbability</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the probability (parts per million) that garbage collection (GC) should be performed when storing a piece of data in the cache. Defaults to 100, meaning 0.01% chance.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L97">framework/caching/CDbCache.php#97</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getGCProbability</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_gcProbability</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="getValue-detail"> getValue() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected string|boolean <b>getValue</b>(string $key)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">a unique key identifying the cached value</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string|boolean</td> <td class="paramDescCol">the value stored in cache, false if the value is not in the cache or expired.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L181">framework/caching/CDbCache.php#181</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">getValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$time</span><span style="color: #007700">=</span><span style="color: #0000BB">time</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$sql</span><span style="color: #007700">=</span><span style="color: #DD0000">"SELECT value FROM </span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheTableName</span><span style="color: #007700">}</span><span style="color: #DD0000"> WHERE id='</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">' AND (expire=0 OR expire&gt;</span><span style="color: #0000BB">$time</span><span style="color: #DD0000">)"</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$db</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDuration</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$duration</span><span style="color: #007700">=</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDuration</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDuration</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$result</span><span style="color: #007700">=</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">queryScalar</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDuration</span><span style="color: #007700">=</span><span style="color: #0000BB">$duration</span><span style="color: #007700">;<br>        return </span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">queryScalar</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Retrieves a value from cache with a specified key. This is the implementation of the method declared in the parent class.</p> <h3 class="detailHeader" id="getValues-detail"> getValues() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected array <b>getValues</b>(array $keys)</pre> </td></tr> <tr> <td class="paramNameCol">$keys</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">a list of keys identifying the cached values</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">a list of cached values indexed by the keys</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L203">framework/caching/CDbCache.php#203</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">getValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$keys</span><span style="color: #007700">)<br>{<br>    if(empty(</span><span style="color: #0000BB">$keys</span><span style="color: #007700">))<br>        return array();<br><br>    </span><span style="color: #0000BB">$ids</span><span style="color: #007700">=</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">"','"</span><span style="color: #007700">,</span><span style="color: #0000BB">$keys</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$time</span><span style="color: #007700">=</span><span style="color: #0000BB">time</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$sql</span><span style="color: #007700">=</span><span style="color: #DD0000">"SELECT id, value FROM </span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheTableName</span><span style="color: #007700">}</span><span style="color: #DD0000"> WHERE id IN ('</span><span style="color: #0000BB">$ids</span><span style="color: #DD0000">') AND (expire=0 OR expire&gt;</span><span style="color: #0000BB">$time</span><span style="color: #DD0000">)"</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$db</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDuration</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$duration</span><span style="color: #007700">=</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDuration</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDuration</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$rows</span><span style="color: #007700">=</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">queryAll</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryCachingDuration</span><span style="color: #007700">=</span><span style="color: #0000BB">$duration</span><span style="color: #007700">;<br>    }<br>    else<br>        </span><span style="color: #0000BB">$rows</span><span style="color: #007700">=</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">queryAll</span><span style="color: #007700">();<br><br>    </span><span style="color: #0000BB">$results</span><span style="color: #007700">=array();<br>    foreach(</span><span style="color: #0000BB">$keys </span><span style="color: #007700">as </span><span style="color: #0000BB">$key</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$results</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    foreach(</span><span style="color: #0000BB">$rows </span><span style="color: #007700">as </span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$results</span><span style="color: #007700">[</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]]=</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'value'</span><span style="color: #007700">];<br>    return </span><span style="color: #0000BB">$results</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Retrieves multiple values from cache with the specified keys.</p> <h3 class="detailHeader" id="init-detail"> init() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>init</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L73">framework/caching/CDbCache.php#73</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">init</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br><br>    </span><span style="color: #0000BB">$db</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setActive</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">autoCreateCacheTable</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$sql</span><span style="color: #007700">=</span><span style="color: #DD0000">"DELETE FROM </span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheTableName</span><span style="color: #007700">}</span><span style="color: #DD0000"> WHERE expire&gt;0 AND expire&lt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">time</span><span style="color: #007700">();<br>        try<br>        {<br>            </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>        }<br>        catch(</span><span style="color: #0000BB">Exception $e</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCacheTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheTableName</span><span style="color: #007700">);<br>        }<br>    }<br>}</span></pre> </div> <p>Initializes this application component. <br><br> This method is required by the <a href="iapplicationcomponent">IApplicationComponent</a> interface. It ensures the existence of the cache DB table. It also removes expired data items from the cache.</p> <h3 class="detailHeader" id="setDbConnection-detail"> setDbConnection() <span class="detailHeaderTag"> method (available since v1.1.5) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setDbConnection</b>(<a href="cdbconnection">CDbConnection</a> $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol"><a href="cdbconnection">CDbConnection</a></td> <td class="paramDescCol">the DB connection instance</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L170">framework/caching/CDbCache.php#170</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setDbConnection</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets the DB connection used by the cache component.</p> <h3 class="detailHeader" id="setGCProbability-detail"> setGCProbability() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setGCProbability</b>(integer $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the probability (parts per million) that garbage collection (GC) should be performed when storing a piece of data in the cache. Defaults to 100, meaning 0.01% chance. This number should be between 0 and 1000000. A value 0 meaning no GC will be performed at all.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L107">framework/caching/CDbCache.php#107</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setGCProbability</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$value</span><span style="color: #007700">=(int)</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">1000000</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #0000BB">1000000</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_gcProbability</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="setValue-detail"> setValue() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected boolean <b>setValue</b>(string $key, string $value, integer $expire)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the key identifying the value to be cached</td> </tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the value to be cached</td> </tr> <tr> <td class="paramNameCol">$expire</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the number of seconds in which the cached value will expire. 0 means never expire.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">true if the value is successfully stored into cache, false otherwise</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/caching/CDbCache.php#L240">framework/caching/CDbCache.php#240</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">setValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$expire</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">deleteValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$expire</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Stores a value identified by a key in cache. This is the implementation of the method declared in the parent class.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CDbCache" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CDbCache</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
