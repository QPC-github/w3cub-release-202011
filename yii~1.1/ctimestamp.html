
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CTimestamp - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" Fix 2-digit years. Works for any century. Assumes that if 2-digit is more than 30 years in future, then previous century. ">
  <meta name="keywords" content="ctimestamp, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/ctimestamp.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/yii~1.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CTimestamp</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.utils">system.utils</a></td> </tr> <tr> <th>Inheritance</th> <td>class CTimestamp</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php">framework/utils/CTimestamp.php</a></td> </tr> </table> <div id="classDescription"> CTimestamp represents a timestamp. <br><br> Part of this class was adapted from the ADOdb Date Library <a href="http://phplens.com/phpeverywhere/">ADOdb abstraction library</a>. The original source code was released under both BSD and GNU Lesser GPL library license, with the following copyright notice: Copyright (c) 2000, 2001, 2002, 2003, 2004 John Lim All rights reserved. <br><br> This class is provided to support UNIX timestamp that is beyond the range of 1901-2038 on Unix and1970-2038 on Windows. Except <a href="ctimestamp#getTimestamp">getTimestamp</a>, all other methods in this class can work with the extended timestamp range. For <a href="ctimestamp#getTimestamp">getTimestamp</a>, because it is merely a wrapper of http://php.net/manual/en/function.mktime.php, it may still be subject to the limit of timestamp range on certain platforms. Please refer to the PHP manual for more information.</div>   <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="formatDate"> <td><a href="ctimestamp#formatDate-detail">formatDate()</a></td> <td>Formats a timestamp to a date string.</td> <td>CTimestamp</td> </tr> <tr id="get4DigitYear"> <td><a href="ctimestamp#get4DigitYear-detail">get4DigitYear()</a></td> <td>Returns 4-digit representation of the year.</td> <td>CTimestamp</td> </tr> <tr id="getDate"> <td><a href="ctimestamp#getDate-detail">getDate()</a></td> <td>Returns the getdate() array.</td> <td>CTimestamp</td> </tr> <tr id="getDayofWeek"> <td><a href="ctimestamp#getDayofWeek-detail">getDayofWeek()</a></td> <td>Gets day of week, 0 = Sunday,... 6=Saturday.</td> <td>CTimestamp</td> </tr> <tr id="getGMTDiff"> <td><a href="ctimestamp#getGMTDiff-detail">getGMTDiff()</a></td> <td>Returns get local time zone offset from GMT</td> <td>CTimestamp</td> </tr> <tr id="getTimestamp"> <td><a href="ctimestamp#getTimestamp-detail">getTimestamp()</a></td> <td>Generates a timestamp.</td> <td>CTimestamp</td> </tr> <tr id="isLeapYear"> <td><a href="ctimestamp#isLeapYear-detail">isLeapYear()</a></td> <td>Checks for leap year, returns true if it is. No 2-digit year check. Also</td> <td>CTimestamp</td> </tr> <tr id="isValidDate"> <td><a href="ctimestamp#isValidDate-detail">isValidDate()</a></td> <td>Checks to see if the year, month, day are valid combination.</td> <td>CTimestamp</td> </tr> <tr id="isValidTime"> <td><a href="ctimestamp#isValidTime-detail">isValidTime()</a></td> <td>Checks to see if the hour, minute and second are valid.</td> <td>CTimestamp</td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="digitCheck"> <td><a href="ctimestamp#digitCheck-detail">digitCheck()</a></td> <td>Fix 2-digit years. Works for any century.</td> <td>CTimestamp</td> </tr> </table> </div>  <h2>Method Details</h2> <h3 class="detailHeader" id="digitCheck-detail"> digitCheck() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected static integer <b>digitCheck</b>(integer $y)</pre> </td></tr> <tr> <td class="paramNameCol">$y</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">year</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">change two digit year into multiple digits</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L112">framework/utils/CTimestamp.php#112</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected static function </span><span style="color: #0000BB">digitCheck</span><span style="color: #007700">(</span><span style="color: #0000BB">$y</span><span style="color: #007700">)<br>{<br>    if (</span><span style="color: #0000BB">$y </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">100</span><span style="color: #007700">){<br>        </span><span style="color: #0000BB">$yr </span><span style="color: #007700">= (integer) </span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"Y"</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$century </span><span style="color: #007700">= (integer) (</span><span style="color: #0000BB">$yr </span><span style="color: #007700">/</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br><br>        if (</span><span style="color: #0000BB">$yr</span><span style="color: #007700">%</span><span style="color: #0000BB">100 </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">50</span><span style="color: #007700">) {<br>            </span><span style="color: #0000BB">$c1 </span><span style="color: #007700">= </span><span style="color: #0000BB">$century </span><span style="color: #007700">+ </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$c0 </span><span style="color: #007700">= </span><span style="color: #0000BB">$century</span><span style="color: #007700">;<br>        } else {<br>            </span><span style="color: #0000BB">$c1 </span><span style="color: #007700">= </span><span style="color: #0000BB">$century</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$c0 </span><span style="color: #007700">= </span><span style="color: #0000BB">$century </span><span style="color: #007700">- </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>        }<br>        </span><span style="color: #0000BB">$c1 </span><span style="color: #007700">*= </span><span style="color: #0000BB">100</span><span style="color: #007700">;<br>        </span><span style="color: #FF8000">// if 2-digit year is less than 30 years in future, set it to this century<br>        // otherwise if more than 30 years in future, then we set 2-digit year to the prev century.<br>        </span><span style="color: #007700">if ((</span><span style="color: #0000BB">$y </span><span style="color: #007700">+ </span><span style="color: #0000BB">$c1</span><span style="color: #007700">) &lt; </span><span style="color: #0000BB">$yr</span><span style="color: #007700">+</span><span style="color: #0000BB">30</span><span style="color: #007700">) </span><span style="color: #0000BB">$y </span><span style="color: #007700">= </span><span style="color: #0000BB">$y </span><span style="color: #007700">+ </span><span style="color: #0000BB">$c1</span><span style="color: #007700">;<br>        else </span><span style="color: #0000BB">$y </span><span style="color: #007700">= </span><span style="color: #0000BB">$y </span><span style="color: #007700">+ </span><span style="color: #0000BB">$c0</span><span style="color: #007700">*</span><span style="color: #0000BB">100</span><span style="color: #007700">;<br>    }<br>    return </span><span style="color: #0000BB">$y</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Fix 2-digit years. Works for any century. Assumes that if 2-digit is more than 30 years in future, then previous century.</p> <h3 class="detailHeader" id="formatDate-detail"> formatDate() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static string <b>formatDate</b>(string $fmt, integer|boolean $d=false, boolean $is_gmt=false)</pre> </td></tr> <tr> <td class="paramNameCol">$fmt</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">format pattern</td> </tr> <tr> <td class="paramNameCol">$d</td> <td class="paramTypeCol">integer|boolean</td> <td class="paramDescCol">timestamp</td> </tr> <tr> <td class="paramNameCol">$is_gmt</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether this is a GMT timestamp</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">formatted date based on timestamp $d</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L216">framework/utils/CTimestamp.php#216</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">formatDate</span><span style="color: #007700">(</span><span style="color: #0000BB">$fmt</span><span style="color: #007700">,</span><span style="color: #0000BB">$d</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">,</span><span style="color: #0000BB">$is_gmt</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>{<br>    if (</span><span style="color: #0000BB">$d </span><span style="color: #007700">=== </span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return (</span><span style="color: #0000BB">$is_gmt</span><span style="color: #007700">)? @</span><span style="color: #0000BB">gmdate</span><span style="color: #007700">(</span><span style="color: #0000BB">$fmt</span><span style="color: #007700">): @</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #0000BB">$fmt</span><span style="color: #007700">);<br><br>    </span><span style="color: #FF8000">// check if number in 32-bit signed range<br>    </span><span style="color: #007700">if ((</span><span style="color: #0000BB">abs</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">) &lt;= </span><span style="color: #0000BB">0x7FFFFFFF</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #FF8000">// if windows, must be +ve integer<br>        </span><span style="color: #007700">if (</span><span style="color: #0000BB">$d </span><span style="color: #007700">&gt;= </span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>            return (</span><span style="color: #0000BB">$is_gmt</span><span style="color: #007700">)? @</span><span style="color: #0000BB">gmdate</span><span style="color: #007700">(</span><span style="color: #0000BB">$fmt</span><span style="color: #007700">,</span><span style="color: #0000BB">$d</span><span style="color: #007700">): @</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #0000BB">$fmt</span><span style="color: #007700">,</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br>    }<br><br>    </span><span style="color: #0000BB">$_day_power </span><span style="color: #007700">= </span><span style="color: #0000BB">86400</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$arr </span><span style="color: #007700">= </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getDate</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">,</span><span style="color: #0000BB">$is_gmt</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$year </span><span style="color: #007700">= </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'year'</span><span style="color: #007700">];<br>    </span><span style="color: #0000BB">$month </span><span style="color: #007700">= </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'mon'</span><span style="color: #007700">];<br>    </span><span style="color: #0000BB">$day </span><span style="color: #007700">= </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'mday'</span><span style="color: #007700">];<br>    </span><span style="color: #0000BB">$hour </span><span style="color: #007700">= </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'hours'</span><span style="color: #007700">];<br>    </span><span style="color: #0000BB">$min </span><span style="color: #007700">= </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'minutes'</span><span style="color: #007700">];<br>    </span><span style="color: #0000BB">$secs </span><span style="color: #007700">= </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'seconds'</span><span style="color: #007700">];<br><br>    </span><span style="color: #0000BB">$max </span><span style="color: #007700">= </span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$fmt</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$dates </span><span style="color: #007700">= </span><span style="color: #DD0000">''</span><span style="color: #007700">;<br><br>    </span><span style="color: #FF8000">/*<br>        at this point, we have the following integer vars to manipulate:<br>        $year, $month, $day, $hour, $min, $secs<br>    */<br>    </span><span style="color: #007700">for (</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">; </span><span style="color: #0000BB">$i </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">$max</span><span style="color: #007700">; </span><span style="color: #0000BB">$i</span><span style="color: #007700">++)<br>    {<br>        switch(</span><span style="color: #0000BB">$fmt</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">])<br>        {<br>        case </span><span style="color: #DD0000">'T'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'T'</span><span style="color: #007700">);break;<br>        </span><span style="color: #FF8000">// YEAR<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">'L'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'leap'</span><span style="color: #007700">] ? </span><span style="color: #DD0000">'1' </span><span style="color: #007700">: </span><span style="color: #DD0000">'0'</span><span style="color: #007700">; break;<br>        case </span><span style="color: #DD0000">'r'</span><span style="color: #007700">: </span><span style="color: #FF8000">// Thu, 21 Dec 2000 16:01:07 +0200<br><br>            // 4.3.11 uses '04 Jun 2004'<br>            // 4.3.8 uses  ' 4 Jun 2004'<br>            </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">gmdate</span><span style="color: #007700">(</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,</span><span style="color: #0000BB">$_day_power</span><span style="color: #007700">*(</span><span style="color: #0000BB">3</span><span style="color: #007700">+</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getDayOfWeek</span><span style="color: #007700">(</span><span style="color: #0000BB">$year</span><span style="color: #007700">,</span><span style="color: #0000BB">$month</span><span style="color: #007700">,</span><span style="color: #0000BB">$day</span><span style="color: #007700">))).</span><span style="color: #DD0000">', '<br>                </span><span style="color: #007700">. (</span><span style="color: #0000BB">$day</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">10</span><span style="color: #007700">?</span><span style="color: #DD0000">'0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$day</span><span style="color: #007700">:</span><span style="color: #0000BB">$day</span><span style="color: #007700">) . </span><span style="color: #DD0000">' '</span><span style="color: #007700">.</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'M'</span><span style="color: #007700">,</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">$month</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">1971</span><span style="color: #007700">)).</span><span style="color: #DD0000">' '</span><span style="color: #007700">.</span><span style="color: #0000BB">$year</span><span style="color: #007700">.</span><span style="color: #DD0000">' '</span><span style="color: #007700">;<br><br>            if (</span><span style="color: #0000BB">$hour </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">10</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$hour</span><span style="color: #007700">; else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$hour</span><span style="color: #007700">;<br><br>            if (</span><span style="color: #0000BB">$min </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">10</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">':0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$min</span><span style="color: #007700">; else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$min</span><span style="color: #007700">;<br><br>            if (</span><span style="color: #0000BB">$secs </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">10</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">':0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$secs</span><span style="color: #007700">; else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$secs</span><span style="color: #007700">;<br><br>            </span><span style="color: #0000BB">$gmt </span><span style="color: #007700">= </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getGMTDiff</span><span style="color: #007700">();<br>            </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">' %s%04d'</span><span style="color: #007700">,(</span><span style="color: #0000BB">$gmt</span><span style="color: #007700">&lt;=</span><span style="color: #0000BB">0</span><span style="color: #007700">)?</span><span style="color: #DD0000">'+'</span><span style="color: #007700">:</span><span style="color: #DD0000">'-'</span><span style="color: #007700">,</span><span style="color: #0000BB">abs</span><span style="color: #007700">(</span><span style="color: #0000BB">$gmt</span><span style="color: #007700">)/</span><span style="color: #0000BB">36</span><span style="color: #007700">);<br>            break;<br><br>        case </span><span style="color: #DD0000">'Y'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$year</span><span style="color: #007700">; break;<br>        case </span><span style="color: #DD0000">'y'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$year</span><span style="color: #007700">,</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$year</span><span style="color: #007700">)-</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">); break;<br>        </span><span style="color: #FF8000">// MONTH<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">'m'</span><span style="color: #007700">: if (</span><span style="color: #0000BB">$month</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">10</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$month</span><span style="color: #007700">; else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$month</span><span style="color: #007700">; break;<br>        case </span><span style="color: #DD0000">'Q'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= (</span><span style="color: #0000BB">$month</span><span style="color: #007700">+</span><span style="color: #0000BB">3</span><span style="color: #007700">)&gt;&gt;</span><span style="color: #0000BB">2</span><span style="color: #007700">; break;<br>        case </span><span style="color: #DD0000">'n'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$month</span><span style="color: #007700">; break;<br>        case </span><span style="color: #DD0000">'M'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'M'</span><span style="color: #007700">,</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">$month</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">1971</span><span style="color: #007700">)); break;<br>        case </span><span style="color: #DD0000">'F'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'F'</span><span style="color: #007700">,</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">$month</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">1971</span><span style="color: #007700">)); break;<br>        </span><span style="color: #FF8000">// DAY<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">'t'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'ndays'</span><span style="color: #007700">]; break;<br>        case </span><span style="color: #DD0000">'z'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'yday'</span><span style="color: #007700">]; break;<br>        case </span><span style="color: #DD0000">'w'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getDayOfWeek</span><span style="color: #007700">(</span><span style="color: #0000BB">$year</span><span style="color: #007700">,</span><span style="color: #0000BB">$month</span><span style="color: #007700">,</span><span style="color: #0000BB">$day</span><span style="color: #007700">); break;<br>        case </span><span style="color: #DD0000">'l'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">gmdate</span><span style="color: #007700">(</span><span style="color: #DD0000">'l'</span><span style="color: #007700">,</span><span style="color: #0000BB">$_day_power</span><span style="color: #007700">*(</span><span style="color: #0000BB">3</span><span style="color: #007700">+</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getDayOfWeek</span><span style="color: #007700">(</span><span style="color: #0000BB">$year</span><span style="color: #007700">,</span><span style="color: #0000BB">$month</span><span style="color: #007700">,</span><span style="color: #0000BB">$day</span><span style="color: #007700">))); break;<br>        case </span><span style="color: #DD0000">'D'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">gmdate</span><span style="color: #007700">(</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,</span><span style="color: #0000BB">$_day_power</span><span style="color: #007700">*(</span><span style="color: #0000BB">3</span><span style="color: #007700">+</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getDayOfWeek</span><span style="color: #007700">(</span><span style="color: #0000BB">$year</span><span style="color: #007700">,</span><span style="color: #0000BB">$month</span><span style="color: #007700">,</span><span style="color: #0000BB">$day</span><span style="color: #007700">))); break;<br>        case </span><span style="color: #DD0000">'j'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$day</span><span style="color: #007700">; break;<br>        case </span><span style="color: #DD0000">'d'</span><span style="color: #007700">: if (</span><span style="color: #0000BB">$day</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">10</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$day</span><span style="color: #007700">; else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$day</span><span style="color: #007700">; break;<br>        case </span><span style="color: #DD0000">'S'</span><span style="color: #007700">:<br>            </span><span style="color: #0000BB">$d10 </span><span style="color: #007700">= </span><span style="color: #0000BB">$day </span><span style="color: #007700">% </span><span style="color: #0000BB">10</span><span style="color: #007700">;<br>            if (</span><span style="color: #0000BB">$d10 </span><span style="color: #007700">== </span><span style="color: #0000BB">1</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'st'</span><span style="color: #007700">;<br>            elseif (</span><span style="color: #0000BB">$d10 </span><span style="color: #007700">== </span><span style="color: #0000BB">2 </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$day </span><span style="color: #007700">!= </span><span style="color: #0000BB">12</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'nd'</span><span style="color: #007700">;<br>            elseif (</span><span style="color: #0000BB">$d10 </span><span style="color: #007700">== </span><span style="color: #0000BB">3</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'rd'</span><span style="color: #007700">;<br>            else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'th'</span><span style="color: #007700">;<br>            break;<br><br>        </span><span style="color: #FF8000">// HOUR<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">'Z'</span><span style="color: #007700">:<br>            </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= (</span><span style="color: #0000BB">$is_gmt</span><span style="color: #007700">) ? </span><span style="color: #0000BB">0 </span><span style="color: #007700">: -</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getGMTDiff</span><span style="color: #007700">(); break;<br>        case </span><span style="color: #DD0000">'O'</span><span style="color: #007700">:<br>            </span><span style="color: #0000BB">$gmt </span><span style="color: #007700">= (</span><span style="color: #0000BB">$is_gmt</span><span style="color: #007700">) ? </span><span style="color: #0000BB">0 </span><span style="color: #007700">: </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getGMTDiff</span><span style="color: #007700">();<br><br>            </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">'%s%04d'</span><span style="color: #007700">,(</span><span style="color: #0000BB">$gmt</span><span style="color: #007700">&lt;=</span><span style="color: #0000BB">0</span><span style="color: #007700">)?</span><span style="color: #DD0000">'+'</span><span style="color: #007700">:</span><span style="color: #DD0000">'-'</span><span style="color: #007700">,</span><span style="color: #0000BB">abs</span><span style="color: #007700">(</span><span style="color: #0000BB">$gmt</span><span style="color: #007700">)/</span><span style="color: #0000BB">36</span><span style="color: #007700">);<br>            break;<br><br>        case </span><span style="color: #DD0000">'H'</span><span style="color: #007700">:<br>            if (</span><span style="color: #0000BB">$hour </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">10</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$hour</span><span style="color: #007700">;<br>            else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$hour</span><span style="color: #007700">;<br>            break;<br>        case </span><span style="color: #DD0000">'h'</span><span style="color: #007700">:<br>            if (</span><span style="color: #0000BB">$hour </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">12</span><span style="color: #007700">) </span><span style="color: #0000BB">$hh </span><span style="color: #007700">= </span><span style="color: #0000BB">$hour </span><span style="color: #007700">- </span><span style="color: #0000BB">12</span><span style="color: #007700">;<br>            else {<br>                if (</span><span style="color: #0000BB">$hour </span><span style="color: #007700">== </span><span style="color: #0000BB">0</span><span style="color: #007700">) </span><span style="color: #0000BB">$hh </span><span style="color: #007700">= </span><span style="color: #DD0000">'12'</span><span style="color: #007700">;<br>                else </span><span style="color: #0000BB">$hh </span><span style="color: #007700">= </span><span style="color: #0000BB">$hour</span><span style="color: #007700">;<br>            }<br><br>            if (</span><span style="color: #0000BB">$hh </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">10</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$hh</span><span style="color: #007700">;<br>            else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$hh</span><span style="color: #007700">;<br>            break;<br><br>        case </span><span style="color: #DD0000">'G'</span><span style="color: #007700">:<br>            </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$hour</span><span style="color: #007700">;<br>            break;<br><br>        case </span><span style="color: #DD0000">'g'</span><span style="color: #007700">:<br>            if (</span><span style="color: #0000BB">$hour </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">12</span><span style="color: #007700">) </span><span style="color: #0000BB">$hh </span><span style="color: #007700">= </span><span style="color: #0000BB">$hour </span><span style="color: #007700">- </span><span style="color: #0000BB">12</span><span style="color: #007700">;<br>            else {<br>                if (</span><span style="color: #0000BB">$hour </span><span style="color: #007700">== </span><span style="color: #0000BB">0</span><span style="color: #007700">) </span><span style="color: #0000BB">$hh </span><span style="color: #007700">= </span><span style="color: #DD0000">'12'</span><span style="color: #007700">;<br>                else </span><span style="color: #0000BB">$hh </span><span style="color: #007700">= </span><span style="color: #0000BB">$hour</span><span style="color: #007700">;<br>            }<br>            </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$hh</span><span style="color: #007700">;<br>            break;<br>        </span><span style="color: #FF8000">// MINUTES<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">'i'</span><span style="color: #007700">: if (</span><span style="color: #0000BB">$min </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">10</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$min</span><span style="color: #007700">; else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$min</span><span style="color: #007700">; break;<br>        </span><span style="color: #FF8000">// SECONDS<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">'U'</span><span style="color: #007700">: </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$d</span><span style="color: #007700">; break;<br>        case </span><span style="color: #DD0000">'s'</span><span style="color: #007700">: if (</span><span style="color: #0000BB">$secs </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">10</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'0'</span><span style="color: #007700">.</span><span style="color: #0000BB">$secs</span><span style="color: #007700">; else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$secs</span><span style="color: #007700">; break;<br>        </span><span style="color: #FF8000">// AM/PM<br>        // Note 00:00 to 11:59 is AM, while 12:00 to 23:59 is PM<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">'a'</span><span style="color: #007700">:<br>            if (</span><span style="color: #0000BB">$hour</span><span style="color: #007700">&gt;=</span><span style="color: #0000BB">12</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'pm'</span><span style="color: #007700">;<br>            else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'am'</span><span style="color: #007700">;<br>            break;<br>        case </span><span style="color: #DD0000">'A'</span><span style="color: #007700">:<br>            if (</span><span style="color: #0000BB">$hour</span><span style="color: #007700">&gt;=</span><span style="color: #0000BB">12</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'PM'</span><span style="color: #007700">;<br>            else </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #DD0000">'AM'</span><span style="color: #007700">;<br>            break;<br>        default:<br>            </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$fmt</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]; break;<br>        </span><span style="color: #FF8000">// ESCAPE<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">"\\"</span><span style="color: #007700">:<br>            </span><span style="color: #0000BB">$i</span><span style="color: #007700">++;<br>            if (</span><span style="color: #0000BB">$i </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">$max</span><span style="color: #007700">) </span><span style="color: #0000BB">$dates </span><span style="color: #007700">.= </span><span style="color: #0000BB">$fmt</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">];<br>            break;<br>        }<br>    }<br>    return </span><span style="color: #0000BB">$dates</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Formats a timestamp to a date string.</p> <h3 class="detailHeader" id="get4DigitYear-detail"> get4DigitYear() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static integer <b>get4DigitYear</b>(integer $y)</pre> </td></tr> <tr> <td class="paramNameCol">$y</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">year</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">4-digit representation of the year</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L139">framework/utils/CTimestamp.php#139</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">get4DigitYear</span><span style="color: #007700">(</span><span style="color: #0000BB">$y</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">digitCheck</span><span style="color: #007700">(</span><span style="color: #0000BB">$y</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns 4-digit representation of the year.</p> <h3 class="detailHeader" id="getDate-detail"> getDate() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static array <b>getDate</b>(integer|boolean $d=false, boolean $fast=false, boolean $gmt=false)</pre> </td></tr> <tr> <td class="paramNameCol">$d</td> <td class="paramTypeCol">integer|boolean</td> <td class="paramDescCol">original date timestamp. False to use the current timestamp.</td> </tr> <tr> <td class="paramNameCol">$fast</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">false to compute the day of the week, default is true</td> </tr> <tr> <td class="paramNameCol">$gmt</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">true to calculate the GMT dates</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">an array with date info.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L163">framework/utils/CTimestamp.php#163</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">getDate</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">,</span><span style="color: #0000BB">$fast</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">,</span><span style="color: #0000BB">$gmt</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$d</span><span style="color: #007700">===</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$d</span><span style="color: #007700">=</span><span style="color: #0000BB">time</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$gmt</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$tz </span><span style="color: #007700">= </span><span style="color: #0000BB">date_default_timezone_get</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">date_default_timezone_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'GMT'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">getdate</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">date_default_timezone_set</span><span style="color: #007700">(</span><span style="color: #0000BB">$tz</span><span style="color: #007700">);<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">getdate</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br>    }<br>    return </span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the getdate() array.</p> <h3 class="detailHeader" id="getDayofWeek-detail"> getDayofWeek() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static integer <b>getDayofWeek</b>(integer $year, integer $month, integer $day)</pre> </td></tr> <tr> <td class="paramNameCol">$year</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">year</td> </tr> <tr> <td class="paramNameCol">$month</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">month</td> </tr> <tr> <td class="paramNameCol">$day</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">day</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">day of week</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L43">framework/utils/CTimestamp.php#43</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">getDayofWeek</span><span style="color: #007700">(</span><span style="color: #0000BB">$year</span><span style="color: #007700">, </span><span style="color: #0000BB">$month</span><span style="color: #007700">, </span><span style="color: #0000BB">$day</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #FF8000">/*<br>    Pope Gregory removed 10 days - October 5 to October 14 - from the year 1582 and<br>    proclaimed that from that time onwards 3 days would be dropped from the calendar<br>    every 400 years.<br><br>    Thursday, October 4, 1582 (Julian) was followed immediately by Friday, October 15, 1582 (Gregorian).<br>    */<br>    </span><span style="color: #007700">if (</span><span style="color: #0000BB">$year </span><span style="color: #007700">&lt;= </span><span style="color: #0000BB">1582</span><span style="color: #007700">)<br>    {<br>        if (</span><span style="color: #0000BB">$year </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">1582 </span><span style="color: #007700">||<br>            (</span><span style="color: #0000BB">$year </span><span style="color: #007700">== </span><span style="color: #0000BB">1582 </span><span style="color: #007700">&amp;&amp; (</span><span style="color: #0000BB">$month </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">10 </span><span style="color: #007700">|| (</span><span style="color: #0000BB">$month </span><span style="color: #007700">== </span><span style="color: #0000BB">10 </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$day </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">15</span><span style="color: #007700">))))<br>        {<br>            </span><span style="color: #0000BB">$greg_correction </span><span style="color: #007700">= </span><span style="color: #0000BB">3</span><span style="color: #007700">;<br>        }<br>        else<br>        {<br>            </span><span style="color: #0000BB">$greg_correction </span><span style="color: #007700">= </span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>        }<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$greg_correction </span><span style="color: #007700">= </span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">$month </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">2</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$month </span><span style="color: #007700">-= </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br>    else<br>    {<br>        </span><span style="color: #0000BB">$month </span><span style="color: #007700">+= </span><span style="color: #0000BB">10</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$year</span><span style="color: #007700">--;<br>    }<br><br>    </span><span style="color: #0000BB">$day </span><span style="color: #007700">=  </span><span style="color: #0000BB">floor</span><span style="color: #007700">((</span><span style="color: #0000BB">13 </span><span style="color: #007700">* </span><span style="color: #0000BB">$month </span><span style="color: #007700">- </span><span style="color: #0000BB">1</span><span style="color: #007700">) / </span><span style="color: #0000BB">5</span><span style="color: #007700">) +<br>            </span><span style="color: #0000BB">$day </span><span style="color: #007700">+ (</span><span style="color: #0000BB">$year </span><span style="color: #007700">% </span><span style="color: #0000BB">100</span><span style="color: #007700">) +<br>            </span><span style="color: #0000BB">floor</span><span style="color: #007700">((</span><span style="color: #0000BB">$year </span><span style="color: #007700">% </span><span style="color: #0000BB">100</span><span style="color: #007700">) / </span><span style="color: #0000BB">4</span><span style="color: #007700">) +<br>            </span><span style="color: #0000BB">floor</span><span style="color: #007700">((</span><span style="color: #0000BB">$year </span><span style="color: #007700">/ </span><span style="color: #0000BB">100</span><span style="color: #007700">) / </span><span style="color: #0000BB">4</span><span style="color: #007700">) - </span><span style="color: #0000BB">2 </span><span style="color: #007700">*<br>            </span><span style="color: #0000BB">floor</span><span style="color: #007700">(</span><span style="color: #0000BB">$year </span><span style="color: #007700">/ </span><span style="color: #0000BB">100</span><span style="color: #007700">) + </span><span style="color: #0000BB">77 </span><span style="color: #007700">+ </span><span style="color: #0000BB">$greg_correction</span><span style="color: #007700">;<br><br>    return </span><span style="color: #0000BB">$day </span><span style="color: #007700">- </span><span style="color: #0000BB">7 </span><span style="color: #007700">* </span><span style="color: #0000BB">floor</span><span style="color: #007700">(</span><span style="color: #0000BB">$day </span><span style="color: #007700">/ </span><span style="color: #0000BB">7</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Gets day of week, 0 = Sunday,... 6=Saturday. Algorithm from PEAR::Date_Calc</p> <h3 class="detailHeader" id="getGMTDiff-detail"> getGMTDiff() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static integer <b>getGMTDiff</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">get local time zone offset from GMT</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L147">framework/utils/CTimestamp.php#147</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">getGMTDiff</span><span style="color: #007700">()<br>{<br>    static </span><span style="color: #0000BB">$TZ</span><span style="color: #007700">;<br>    if (isset(</span><span style="color: #0000BB">$TZ</span><span style="color: #007700">)) return </span><span style="color: #0000BB">$TZ</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$TZ </span><span style="color: #007700">= </span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">1970</span><span style="color: #007700">) - </span><span style="color: #0000BB">gmmktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">1970</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$TZ</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="getTimestamp-detail"> getTimestamp() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static integer|float <b>getTimestamp</b>(integer $hr, integer $min, integer $sec, integer|boolean $mon=false, integer|boolean $day=false, integer|boolean $year=false, boolean $is_gmt=false)</pre> </td></tr> <tr> <td class="paramNameCol">$hr</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">hour</td> </tr> <tr> <td class="paramNameCol">$min</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">minute</td> </tr> <tr> <td class="paramNameCol">$sec</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">second</td> </tr> <tr> <td class="paramNameCol">$mon</td> <td class="paramTypeCol">integer|boolean</td> <td class="paramDescCol">month</td> </tr> <tr> <td class="paramNameCol">$day</td> <td class="paramTypeCol">integer|boolean</td> <td class="paramDescCol">day</td> </tr> <tr> <td class="paramNameCol">$year</td> <td class="paramTypeCol">integer|boolean</td> <td class="paramDescCol">year</td> </tr> <tr> <td class="paramNameCol">$is_gmt</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether this is GMT time. If true, gmmktime() will be used.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer|float</td> <td class="paramDescCol">a timestamp given a local time.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L370">framework/utils/CTimestamp.php#370</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">getTimestamp</span><span style="color: #007700">(</span><span style="color: #0000BB">$hr</span><span style="color: #007700">,</span><span style="color: #0000BB">$min</span><span style="color: #007700">,</span><span style="color: #0000BB">$sec</span><span style="color: #007700">,</span><span style="color: #0000BB">$mon</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">,</span><span style="color: #0000BB">$day</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">,</span><span style="color: #0000BB">$year</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">,</span><span style="color: #0000BB">$is_gmt</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>{<br>    if (</span><span style="color: #0000BB">$mon </span><span style="color: #007700">=== </span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$is_gmt</span><span style="color: #007700">? @</span><span style="color: #0000BB">gmmktime</span><span style="color: #007700">(</span><span style="color: #0000BB">$hr</span><span style="color: #007700">,</span><span style="color: #0000BB">$min</span><span style="color: #007700">,</span><span style="color: #0000BB">$sec</span><span style="color: #007700">): @</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">$hr</span><span style="color: #007700">,</span><span style="color: #0000BB">$min</span><span style="color: #007700">,</span><span style="color: #0000BB">$sec</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$is_gmt </span><span style="color: #007700">? @</span><span style="color: #0000BB">gmmktime</span><span style="color: #007700">(</span><span style="color: #0000BB">$hr</span><span style="color: #007700">,</span><span style="color: #0000BB">$min</span><span style="color: #007700">,</span><span style="color: #0000BB">$sec</span><span style="color: #007700">,</span><span style="color: #0000BB">$mon</span><span style="color: #007700">,</span><span style="color: #0000BB">$day</span><span style="color: #007700">,</span><span style="color: #0000BB">$year</span><span style="color: #007700">) : @</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">$hr</span><span style="color: #007700">,</span><span style="color: #0000BB">$min</span><span style="color: #007700">,</span><span style="color: #0000BB">$sec</span><span style="color: #007700">,</span><span style="color: #0000BB">$mon</span><span style="color: #007700">,</span><span style="color: #0000BB">$day</span><span style="color: #007700">,</span><span style="color: #0000BB">$year</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Generates a timestamp. This is the same as the PHP function http://php.net/manual/en/function.mktime.php.</p> <h3 class="detailHeader" id="isLeapYear-detail"> isLeapYear() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static boolean <b>isLeapYear</b>(integer $year)</pre> </td></tr> <tr> <td class="paramNameCol">$year</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">year to check</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">true if is leap year</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L92">framework/utils/CTimestamp.php#92</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">isLeapYear</span><span style="color: #007700">(</span><span style="color: #0000BB">$year</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$year </span><span style="color: #007700">= </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">digitCheck</span><span style="color: #007700">(</span><span style="color: #0000BB">$year</span><span style="color: #007700">);<br>    if (</span><span style="color: #0000BB">$year </span><span style="color: #007700">% </span><span style="color: #0000BB">4 </span><span style="color: #007700">!= </span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br><br>    if (</span><span style="color: #0000BB">$year </span><span style="color: #007700">% </span><span style="color: #0000BB">400 </span><span style="color: #007700">== </span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    </span><span style="color: #FF8000">// if gregorian calendar (&gt;1582), century not-divisible by 400 is not leap<br>    </span><span style="color: #007700">elseif (</span><span style="color: #0000BB">$year </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">1582 </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$year </span><span style="color: #007700">% </span><span style="color: #0000BB">100 </span><span style="color: #007700">== </span><span style="color: #0000BB">0 </span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Checks for leap year, returns true if it is. No 2-digit year check. Also handles julian calendar correctly.</p> <h3 class="detailHeader" id="isValidDate-detail"> isValidDate() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static boolean <b>isValidDate</b>(integer $y, integer $m, integer $d)</pre> </td></tr> <tr> <td class="paramNameCol">$y</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">year</td> </tr> <tr> <td class="paramNameCol">$m</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">month</td> </tr> <tr> <td class="paramNameCol">$d</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">day</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">true if valid date, semantic check only.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L188">framework/utils/CTimestamp.php#188</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">isValidDate</span><span style="color: #007700">(</span><span style="color: #0000BB">$y</span><span style="color: #007700">,</span><span style="color: #0000BB">$m</span><span style="color: #007700">,</span><span style="color: #0000BB">$d</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">checkdate</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">, </span><span style="color: #0000BB">$d</span><span style="color: #007700">, </span><span style="color: #0000BB">$y</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Checks to see if the year, month, day are valid combination.</p> <h3 class="detailHeader" id="isValidTime-detail"> isValidTime() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static boolean <b>isValidTime</b>(integer $h, integer $m, integer $s, boolean $hs24=true)</pre> </td></tr> <tr> <td class="paramNameCol">$h</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">hour</td> </tr> <tr> <td class="paramNameCol">$m</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">minute</td> </tr> <tr> <td class="paramNameCol">$s</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">second</td> </tr> <tr> <td class="paramNameCol">$hs24</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the hours should be 0 through 23 (default) or 1 through 12.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">true if valid date, semantic check only.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CTimestamp.php#L201">framework/utils/CTimestamp.php#201</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">isValidTime</span><span style="color: #007700">(</span><span style="color: #0000BB">$h</span><span style="color: #007700">,</span><span style="color: #0000BB">$m</span><span style="color: #007700">,</span><span style="color: #0000BB">$s</span><span style="color: #007700">,</span><span style="color: #0000BB">$hs24</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$hs24 </span><span style="color: #007700">&amp;&amp; (</span><span style="color: #0000BB">$h </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">0 </span><span style="color: #007700">|| </span><span style="color: #0000BB">$h </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">23</span><span style="color: #007700">) || !</span><span style="color: #0000BB">$hs24 </span><span style="color: #007700">&amp;&amp; (</span><span style="color: #0000BB">$h </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">1 </span><span style="color: #007700">|| </span><span style="color: #0000BB">$h </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">12</span><span style="color: #007700">)) return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$m </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">59 </span><span style="color: #007700">|| </span><span style="color: #0000BB">$m </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">0</span><span style="color: #007700">) return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$s </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">59 </span><span style="color: #007700">|| </span><span style="color: #0000BB">$s </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">0</span><span style="color: #007700">) return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Checks to see if the hour, minute and second are valid.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CTimestamp" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CTimestamp</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
