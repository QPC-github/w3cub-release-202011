
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CWebUser - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" timeout in seconds after which user is logged out regardless of activity. ">
  <meta name="keywords" content="cwebuser, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cwebuser.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/yii~1.1.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CWebUser</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.web.auth">system.web.auth</a></td> </tr> <tr> <th>Inheritance</th> <td>class CWebUser » <a href="capplicationcomponent">CApplicationComponent</a> » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Implements</th> <td>
<a href="iapplicationcomponent">IApplicationComponent</a>, <a href="iwebuser">IWebUser</a>
</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php">framework/web/auth/CWebUser.php</a></td> </tr> </table> <div id="classDescription"> CWebUser represents the persistent state for a Web application user. <br><br> CWebUser is used as an application component whose ID is 'user'. Therefore, at any place one can access the user state via <code>Yii::app()-&gt;user</code>. <br><br> CWebUser should be used together with an <a href="iuseridentity">identity</a> which implements the actual authentication algorithm. <br><br> A typical authentication process using CWebUser is as follows: <ol> <li>The user provides information needed for authentication.</li> <li>An <a href="iuseridentity">identity instance</a> is created with the user-provided information.</li> <li>Call <a href="iuseridentity#authenticate">IUserIdentity::authenticate</a> to check if the identity is valid.</li> <li>If valid, call <a href="cwebuser#login">CWebUser::login</a> to login the user, and Redirect the user browser to <a href="cwebuser#returnUrl">returnUrl</a>.</li> <li>If not valid, retrieve the error code or message from the identity instance and display it.</li> </ol> <br><br> The property <a href="cwebuser#id">id</a> and <a href="cwebuser#name">name</a> are both identifiers for the user. The former is mainly used internally (e.g. primary key), while the latter is for display purpose (e.g. username). The <a href="cwebuser#id">id</a> property is a unique identifier for a user that is persistent during the whole user session. It can be a username, or something else, depending on the implementation of the <a href="iuseridentity">identity class</a>. <br><br> Both <a href="cwebuser#id">id</a> and <a href="cwebuser#name">name</a> are persistent during the user session. Besides, an identity may have additional persistent data which can be accessed by calling <a href="cwebuser#getState">getState</a>. Note, when <a href="cwebuser#allowAutoLogin">cookie-based authentication</a> is enabled, all these persistent data will be stored in cookie. Therefore, do not store password or other sensitive data in the persistent storage. Instead, you should store them directly in session on the server side if needed.</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="absoluteAuthTimeout"> <td><a href="cwebuser#absoluteAuthTimeout-detail">absoluteAuthTimeout</a></td> <td>integer</td> <td>timeout in seconds after which user is logged out regardless of activity.</td> <td>CWebUser</td> </tr> <tr id="allowAutoLogin"> <td><a href="cwebuser#allowAutoLogin-detail">allowAutoLogin</a></td> <td>boolean</td> <td>whether to enable cookie-based login.</td> <td>CWebUser</td> </tr> <tr id="authTimeout"> <td><a href="cwebuser#authTimeout-detail">authTimeout</a></td> <td>integer</td> <td>timeout in seconds after which user is logged out if inactive.</td> <td>CWebUser</td> </tr> <tr id="autoRenewCookie"> <td><a href="cwebuser#autoRenewCookie-detail">autoRenewCookie</a></td> <td>boolean</td> <td>whether to automatically renew the identity cookie each time a page is requested.</td> <td>CWebUser</td> </tr> <tr id="autoUpdateFlash"> <td><a href="cwebuser#autoUpdateFlash-detail">autoUpdateFlash</a></td> <td>boolean</td> <td>whether to automatically update the validity of flash messages.</td> <td>CWebUser</td> </tr> <tr class="inherited" id="behaviors"> <td><a href="capplicationcomponent#behaviors-detail">behaviors</a></td> <td>array</td> <td>the behaviors that should be attached to this component.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="flashes"> <td><a href="cwebuser#flashes-detail">flashes</a></td> <td>array</td> <td>Returns all flash messages.</td> <td>CWebUser</td> </tr> <tr id="guestName"> <td><a href="cwebuser#guestName-detail">guestName</a></td> <td>string</td> <td>the name for a guest user.</td> <td>CWebUser</td> </tr> <tr id="id"> <td><a href="cwebuser#id-detail">id</a></td> <td>mixed</td> <td>Returns a value that uniquely represents the user.</td> <td>CWebUser</td> </tr> <tr id="identityCookie"> <td><a href="cwebuser#identityCookie-detail">identityCookie</a></td> <td>array</td> <td>the property values (in name-value pairs) used to initialize the identity cookie.</td> <td>CWebUser</td> </tr> <tr id="isGuest"> <td><a href="cwebuser#isGuest-detail">isGuest</a></td> <td>boolean</td> <td>Returns a value indicating whether the user is a guest (not authenticated).</td> <td>CWebUser</td> </tr> <tr class="inherited" id="isInitialized"> <td><a href="capplicationcomponent#isInitialized-detail">isInitialized</a></td> <td>boolean</td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="loginRequiredAjaxResponse"> <td><a href="cwebuser#loginRequiredAjaxResponse-detail">loginRequiredAjaxResponse</a></td> <td>string</td> <td>value that will be echoed in case that user session has expired during an ajax call.</td> <td>CWebUser</td> </tr> <tr id="loginUrl"> <td><a href="cwebuser#loginUrl-detail">loginUrl</a></td> <td>string|array</td> <td>the URL for login.</td> <td>CWebUser</td> </tr> <tr id="name"> <td><a href="cwebuser#name-detail">name</a></td> <td>string</td> <td>Returns the unique identifier for the user (e.g. username).</td> <td>CWebUser</td> </tr> <tr id="returnUrl"> <td><a href="cwebuser#returnUrl-detail">returnUrl</a></td> <td>string</td> <td>Returns the URL that the user should be redirected to after successful login.</td> <td>CWebUser</td> </tr> <tr id="stateKeyPrefix"> <td><a href="cwebuser#stateKeyPrefix-detail">stateKeyPrefix</a></td> <td>string</td> <td>a prefix for the name of the session variables storing user session data.</td> <td>CWebUser</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="__get"> <td><a href="cwebuser#__get-detail">__get()</a></td> <td>PHP magic method.</td> <td>CWebUser</td> </tr> <tr id="__isset"> <td><a href="cwebuser#__isset-detail">__isset()</a></td> <td>PHP magic method.</td> <td>CWebUser</td> </tr> <tr id="__set"> <td><a href="cwebuser#__set-detail">__set()</a></td> <td>PHP magic method.</td> <td>CWebUser</td> </tr> <tr id="__unset"> <td><a href="cwebuser#__unset-detail">__unset()</a></td> <td>PHP magic method.</td> <td>CWebUser</td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="checkAccess"> <td><a href="cwebuser#checkAccess-detail">checkAccess()</a></td> <td>Performs access check for this user.</td> <td>CWebUser</td> </tr> <tr id="clearStates"> <td><a href="cwebuser#clearStates-detail">clearStates()</a></td> <td>Clears all user identity information from persistent storage.</td> <td>CWebUser</td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="getFlash"> <td><a href="cwebuser#getFlash-detail">getFlash()</a></td> <td>Returns a flash message.</td> <td>CWebUser</td> </tr> <tr id="getFlashes"> <td><a href="cwebuser#getFlashes-detail">getFlashes()</a></td> <td>Returns all flash messages.</td> <td>CWebUser</td> </tr> <tr id="getId"> <td><a href="cwebuser#getId-detail">getId()</a></td> <td>Returns a value that uniquely represents the user.</td> <td>CWebUser</td> </tr> <tr id="getIsGuest"> <td><a href="cwebuser#getIsGuest-detail">getIsGuest()</a></td> <td>Returns a value indicating whether the user is a guest (not authenticated).</td> <td>CWebUser</td> </tr> <tr class="inherited" id="getIsInitialized"> <td><a href="capplicationcomponent#getIsInitialized-detail">getIsInitialized()</a></td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="getName"> <td><a href="cwebuser#getName-detail">getName()</a></td> <td>Returns the unique identifier for the user (e.g. username).</td> <td>CWebUser</td> </tr> <tr id="getReturnUrl"> <td><a href="cwebuser#getReturnUrl-detail">getReturnUrl()</a></td> <td>Returns the URL that the user should be redirected to after successful login.</td> <td>CWebUser</td> </tr> <tr id="getState"> <td><a href="cwebuser#getState-detail">getState()</a></td> <td>Returns the value of a variable that is stored in user session.</td> <td>CWebUser</td> </tr> <tr id="getStateKeyPrefix"> <td><a href="cwebuser#getStateKeyPrefix-detail">getStateKeyPrefix()</a></td> <td>Returns a prefix for the name of the session variables storing user session data.</td> <td>CWebUser</td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="hasFlash"> <td><a href="cwebuser#hasFlash-detail">hasFlash()</a></td> <td>Determines whether the specified flash message exists</td> <td>CWebUser</td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="hasState"> <td><a href="cwebuser#hasState-detail">hasState()</a></td> <td>Returns a value indicating whether there is a state of the specified name.</td> <td>CWebUser</td> </tr> <tr id="init"> <td><a href="cwebuser#init-detail">init()</a></td> <td>Initializes the application component.</td> <td>CWebUser</td> </tr> <tr id="login"> <td><a href="cwebuser#login-detail">login()</a></td> <td>Logs in a user.</td> <td>CWebUser</td> </tr> <tr id="loginRequired"> <td><a href="cwebuser#loginRequired-detail">loginRequired()</a></td> <td>Redirects the user browser to the login page.</td> <td>CWebUser</td> </tr> <tr id="logout"> <td><a href="cwebuser#logout-detail">logout()</a></td> <td>Logs out the current user.</td> <td>CWebUser</td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="setFlash"> <td><a href="cwebuser#setFlash-detail">setFlash()</a></td> <td>Stores a flash message.</td> <td>CWebUser</td> </tr> <tr id="setId"> <td><a href="cwebuser#setId-detail">setId()</a></td> <td>Sets the unique identifier for the user. If null, it means the user is a guest.</td> <td>CWebUser</td> </tr> <tr id="setName"> <td><a href="cwebuser#setName-detail">setName()</a></td> <td>Sets the unique identifier for the user (e.g. username).</td> <td>CWebUser</td> </tr> <tr id="setReturnUrl"> <td><a href="cwebuser#setReturnUrl-detail">setReturnUrl()</a></td> <td>Sets the URL that the user should be redirected to after login.</td> <td>CWebUser</td> </tr> <tr id="setState"> <td><a href="cwebuser#setState-detail">setState()</a></td> <td>Stores a variable in user session.</td> <td>CWebUser</td> </tr> <tr id="setStateKeyPrefix"> <td><a href="cwebuser#setStateKeyPrefix-detail">setStateKeyPrefix()</a></td> <td>Sets a prefix for the name of the session variables storing user session data.</td> <td>CWebUser</td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="afterLogin"> <td><a href="cwebuser#afterLogin-detail">afterLogin()</a></td> <td>This method is called after the user is successfully logged in.</td> <td>CWebUser</td> </tr> <tr id="afterLogout"> <td><a href="cwebuser#afterLogout-detail">afterLogout()</a></td> <td>This method is invoked right after a user is logged out.</td> <td>CWebUser</td> </tr> <tr id="beforeLogin"> <td><a href="cwebuser#beforeLogin-detail">beforeLogin()</a></td> <td>This method is called before logging in a user.</td> <td>CWebUser</td> </tr> <tr id="beforeLogout"> <td><a href="cwebuser#beforeLogout-detail">beforeLogout()</a></td> <td>This method is invoked when calling <a href="cwebuser#logout">logout</a> to log out a user.</td> <td>CWebUser</td> </tr> <tr id="changeIdentity"> <td><a href="cwebuser#changeIdentity-detail">changeIdentity()</a></td> <td>Changes the current user with the specified identity information.</td> <td>CWebUser</td> </tr> <tr id="createIdentityCookie"> <td><a href="cwebuser#createIdentityCookie-detail">createIdentityCookie()</a></td> <td>Creates a cookie to store identity information.</td> <td>CWebUser</td> </tr> <tr id="loadIdentityStates"> <td><a href="cwebuser#loadIdentityStates-detail">loadIdentityStates()</a></td> <td>Loads identity states from an array and saves them to persistent storage.</td> <td>CWebUser</td> </tr> <tr id="renewCookie"> <td><a href="cwebuser#renewCookie-detail">renewCookie()</a></td> <td>Renews the identity cookie.</td> <td>CWebUser</td> </tr> <tr id="restoreFromCookie"> <td><a href="cwebuser#restoreFromCookie-detail">restoreFromCookie()</a></td> <td>Populates the current user object with the information obtained from cookie.</td> <td>CWebUser</td> </tr> <tr id="saveIdentityStates"> <td><a href="cwebuser#saveIdentityStates-detail">saveIdentityStates()</a></td> <td>Retrieves identity states from persistent storage and saves them as an array.</td> <td>CWebUser</td> </tr> <tr id="saveToCookie"> <td><a href="cwebuser#saveToCookie-detail">saveToCookie()</a></td> <td>Saves necessary user data into a cookie.</td> <td>CWebUser</td> </tr> <tr id="updateAuthStatus"> <td><a href="cwebuser#updateAuthStatus-detail">updateAuthStatus()</a></td> <td>Updates the authentication status according to <a href="cwebuser#authTimeout">authTimeout</a>.</td> <td>CWebUser</td> </tr> <tr id="updateFlash"> <td><a href="cwebuser#updateFlash-detail">updateFlash()</a></td> <td>Updates the internal counters for flash messages.</td> <td>CWebUser</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="absoluteAuthTimeout-detail"> absoluteAuthTimeout<span class="detailHeaderTag"> property (available since v1.1.14) </span> </h3> <pre class="signature">public integer <b>$absoluteAuthTimeout</b>;</pre> <p>timeout in seconds after which user is logged out regardless of activity.</p> <h3 class="detailHeader" id="allowAutoLogin-detail"> allowAutoLogin<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$allowAutoLogin</b>;</pre> <p>whether to enable cookie-based login. Defaults to false.</p> <h3 class="detailHeader" id="authTimeout-detail"> authTimeout<span class="detailHeaderTag"> property (available since v1.1.7) </span> </h3> <pre class="signature">public integer <b>$authTimeout</b>;</pre> <p>timeout in seconds after which user is logged out if inactive. If this property is not set, the user will be logged out after the current session expires (c.f. <a href="chttpsession#timeout">CHttpSession::timeout</a>).</p> <h3 class="detailHeader" id="autoRenewCookie-detail"> autoRenewCookie<span class="detailHeaderTag"> property (available since v1.1.0) </span> </h3> <pre class="signature">public boolean <b>$autoRenewCookie</b>;</pre> <p>whether to automatically renew the identity cookie each time a page is requested. Defaults to false. This property is effective only when <a href="cwebuser#allowAutoLogin">allowAutoLogin</a> is true. When this is false, the identity cookie will expire after the specified duration since the user is initially logged in. When this is true, the identity cookie will expire after the specified duration since the user visits the site the last time.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebuser#allowAutoLogin">allowAutoLogin</a></li> </ul> </div> <h3 class="detailHeader" id="autoUpdateFlash-detail"> autoUpdateFlash<span class="detailHeaderTag"> property (available since v1.1.7) </span> </h3> <pre class="signature">public boolean <b>$autoUpdateFlash</b>;</pre> <p>whether to automatically update the validity of flash messages. Defaults to true, meaning flash messages will be valid only in the current and the next requests. If this is set false, you will be responsible for ensuring a flash message is deleted after usage. (This can be achieved by calling <a href="cwebuser#getFlash">getFlash</a> with the 3rd parameter being true).</p> <h3 class="detailHeader" id="flashes-detail"> flashes<span class="detailHeaderTag"> property <em>read-only</em> (available since v1.1.3) </span> </h3> <pre class="signature">public array <a href="cwebuser#getFlashes"><b>getFlashes</b></a>(boolean $delete=true)</pre> <p>Returns all flash messages. This method is similar to <a href="cwebuser#getFlash">getFlash</a> except that it returns all currently available flash messages.</p> <h3 class="detailHeader" id="guestName-detail"> guestName<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$guestName</b>;</pre> <p>the name for a guest user. Defaults to 'Guest'. This is used by <a href="cwebuser#getName">getName</a> when the current user is a guest (not authenticated).</p> <h3 class="detailHeader" id="id-detail"> id<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public mixed <a href="cwebuser#getId"><b>getId</b></a>()<br>public void <a href="cwebuser#setId"><b>setId</b></a>(mixed $value)</pre> <p>Returns a value that uniquely represents the user.</p> <h3 class="detailHeader" id="identityCookie-detail"> identityCookie<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$identityCookie</b>;</pre> <p>the property values (in name-value pairs) used to initialize the identity cookie. Any property of <a href="chttpcookie">CHttpCookie</a> may be initialized. This property is effective only when <a href="cwebuser#allowAutoLogin">allowAutoLogin</a> is true.</p> <h3 class="detailHeader" id="isGuest-detail"> isGuest<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public boolean <a href="cwebuser#getIsGuest"><b>getIsGuest</b></a>()</pre> <p>Returns a value indicating whether the user is a guest (not authenticated).</p> <h3 class="detailHeader" id="loginRequiredAjaxResponse-detail"> loginRequiredAjaxResponse<span class="detailHeaderTag"> property (available since v1.1.9) </span> </h3> <pre class="signature">public string <b>$loginRequiredAjaxResponse</b>;</pre> <p>value that will be echoed in case that user session has expired during an ajax call. When a request is made and user session has expired, <a href="cwebuser#loginRequired">loginRequired</a> redirects to <a href="cwebuser#loginUrl">loginUrl</a> for login. If that happens during an ajax call, the complete HTML login page is returned as the result of that ajax call. That could be a problem if the ajax call expects the result to be a json array or a predefined string, as the login page is ignored in that case. To solve this, set this property to the desired return value. <br><br> If this property is set, this value will be returned as the result of the ajax call in case that the user session has expired.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebuser#loginRequired">loginRequired</a></li> </ul> </div> <h3 class="detailHeader" id="loginUrl-detail"> loginUrl<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string|array <b>$loginUrl</b>;</pre> <p>the URL for login. If using array, the first element should be the route to the login action, and the rest name-value pairs are GET parameters to construct the login URL (e.g. array('/site/login')). If this property is null, a 403 HTTP exception will be raised instead.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="ccontroller#createUrl">CController::createUrl</a></li> </ul> </div> <h3 class="detailHeader" id="name-detail"> name<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <a href="cwebuser#getName"><b>getName</b></a>()<br>public void <a href="cwebuser#setName"><b>setName</b></a>(string $value)</pre> <p>Returns the unique identifier for the user (e.g. username). This is the unique identifier that is mainly used for display purpose.</p> <h3 class="detailHeader" id="returnUrl-detail"> returnUrl<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <a href="cwebuser#getReturnUrl"><b>getReturnUrl</b></a>(string $defaultUrl=NULL)<br>public void <a href="cwebuser#setReturnUrl"><b>setReturnUrl</b></a>(string $value)</pre> <p>Returns the URL that the user should be redirected to after successful login. This property is usually used by the login action. If the login is successful, the action should read this property and use it to redirect the user browser.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebuser#loginRequired">loginRequired</a></li> </ul> </div> <h3 class="detailHeader" id="stateKeyPrefix-detail"> stateKeyPrefix<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <a href="cwebuser#getStateKeyPrefix"><b>getStateKeyPrefix</b></a>()<br>public void <a href="cwebuser#setStateKeyPrefix"><b>setStateKeyPrefix</b></a>(string $value)</pre> <p>a prefix for the name of the session variables storing user session data.</p> <h2>Method Details</h2> <h3 class="detailHeader" id="__get-detail"> __get() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>__get</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">property name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">property value</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L141">framework/web/auth/CWebUser.php#141</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__get</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>    else<br>        return </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__get</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div> <p>PHP magic method. This method is overridden so that persistent states can be accessed like properties.</p> <h3 class="detailHeader" id="__isset-detail"> __isset() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>__isset</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">property name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol"></td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L170">framework/web/auth/CWebUser.php#170</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__isset</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)!==</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>    else<br>        return </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__isset</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div> <p>PHP magic method. This method is overridden so that persistent states can also be checked for null value.</p> <h3 class="detailHeader" id="__set-detail"> __set() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__set</b>(string $name, mixed $value)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">property name</td> </tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">property value</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L156">framework/web/auth/CWebUser.php#156</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__set</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>    else<br>        </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__set</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>}</span></pre> </div> <p>PHP magic method. This method is overridden so that persistent states can be set like properties.</p> <h3 class="detailHeader" id="__unset-detail"> __unset() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__unset</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">property name</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L184">framework/web/auth/CWebUser.php#184</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__unset</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br>    else<br>        </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__unset</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div> <p>PHP magic method. This method is overridden so that persistent states can also be unset.</p> <h3 class="detailHeader" id="afterLogin-detail"> afterLogin() <span class="detailHeaderTag"> method (available since v1.1.3) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>afterLogin</b>(boolean $fromCookie)</pre> </td></tr> <tr> <td class="paramNameCol">$fromCookie</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the login is based on cookie.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L424">framework/web/auth/CWebUser.php#424</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">afterLogin</span><span style="color: #007700">(</span><span style="color: #0000BB">$fromCookie</span><span style="color: #007700">)<br>{<br>}</span></pre> </div> <p>This method is called after the user is successfully logged in. You may override this method to do some postprocessing (e.g. log the user login IP and time; load the user permission information).</p> <h3 class="detailHeader" id="afterLogout-detail"> afterLogout() <span class="detailHeaderTag"> method (available since v1.1.3) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>afterLogout</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L446">framework/web/auth/CWebUser.php#446</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">afterLogout</span><span style="color: #007700">()<br>{<br>}</span></pre> </div> <p>This method is invoked right after a user is logged out. You may override this method to do some extra cleanup work for the user.</p> <h3 class="detailHeader" id="beforeLogin-detail"> beforeLogin() <span class="detailHeaderTag"> method (available since v1.1.3) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected boolean <b>beforeLogin</b>(mixed $id, array $states, boolean $fromCookie)</pre> </td></tr> <tr> <td class="paramNameCol">$id</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the user ID. This is the same as returned by <a href="cwebuser#getId">getId()</a>.</td> </tr> <tr> <td class="paramNameCol">$states</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">a set of name-value pairs that are provided by the user identity.</td> </tr> <tr> <td class="paramNameCol">$fromCookie</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the login is based on cookie</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the user should be logged in</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L412">framework/web/auth/CWebUser.php#412</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">beforeLogin</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,</span><span style="color: #0000BB">$states</span><span style="color: #007700">,</span><span style="color: #0000BB">$fromCookie</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}</span></pre> </div> <p>This method is called before logging in a user. You may override this method to provide additional security check. For example, when the login is cookie-based, you may want to verify that the user ID together with a random token in the states can be found in the database. This will prevent hackers from faking arbitrary identity cookies even if they crack down the server private key.</p> <h3 class="detailHeader" id="beforeLogout-detail"> beforeLogout() <span class="detailHeaderTag"> method (available since v1.1.3) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected boolean <b>beforeLogout</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to log out the user</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L436">framework/web/auth/CWebUser.php#436</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">beforeLogout</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}</span></pre> </div> <p>This method is invoked when calling <a href="cwebuser#logout">logout</a> to log out a user. If this method return false, the logout action will be cancelled. You may override this method to provide additional check before logging out a user.</p> <h3 class="detailHeader" id="changeIdentity-detail"> changeIdentity() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>changeIdentity</b>(mixed $id, string $name, array $states)</pre> </td></tr> <tr> <td class="paramNameCol">$id</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">a unique identifier for the user</td> </tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the display name for the user</td> </tr> <tr> <td class="paramNameCol">$states</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">identity states</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L715">framework/web/auth/CWebUser.php#715</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">changeIdentity</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$states</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSession</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">regenerateID</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setId</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setName</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadIdentityStates</span><span style="color: #007700">(</span><span style="color: #0000BB">$states</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Changes the current user with the specified identity information. This method is called by <a href="cwebuser#login">login</a> and <a href="cwebuser#restoreFromCookie">restoreFromCookie</a> when the current user needs to be populated with the corresponding identity information. Derived classes may override this method by retrieving additional user-related information. Make sure the parent implementation is called first.</p> <h3 class="detailHeader" id="checkAccess-detail"> checkAccess() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>checkAccess</b>(string $operation, array $params=array ( ), boolean $allowCaching=true)</pre> </td></tr> <tr> <td class="paramNameCol">$operation</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the name of the operation that need access check.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">name-value pairs that would be passed to business rules associated with the tasks and roles assigned to the user. Since version 1.1.11 a param with name 'userId' is added to this array, which holds the value of <a href="cwebuser#getId">getId()</a> when <a href="cdbauthmanager">CDbAuthManager</a> or <a href="cphpauthmanager">CPhpAuthManager</a> is used.</td> </tr> <tr> <td class="paramNameCol">$allowCaching</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to allow caching the result of access check. When this parameter is true (default), if the access check of an operation was performed before, its result will be directly returned when calling this method to check the same operation. If this parameter is false, this method will always call <a href="cauthmanager#checkAccess">CAuthManager::checkAccess</a> to obtain the up-to-date access result. Note that this caching is effective only within the same request and only works when <code>$params=array()</code>.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the operations can be performed by this user.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L812">framework/web/auth/CWebUser.php#812</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">checkAccess</span><span style="color: #007700">(</span><span style="color: #0000BB">$operation</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array(),</span><span style="color: #0000BB">$allowCaching</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$allowCaching </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$params</span><span style="color: #007700">===array() &amp;&amp; isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_access</span><span style="color: #007700">[</span><span style="color: #0000BB">$operation</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_access</span><span style="color: #007700">[</span><span style="color: #0000BB">$operation</span><span style="color: #007700">];<br><br>    </span><span style="color: #0000BB">$access</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getAuthManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">checkAccess</span><span style="color: #007700">(</span><span style="color: #0000BB">$operation</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getId</span><span style="color: #007700">(),</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$allowCaching </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$params</span><span style="color: #007700">===array())<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_access</span><span style="color: #007700">[</span><span style="color: #0000BB">$operation</span><span style="color: #007700">]=</span><span style="color: #0000BB">$access</span><span style="color: #007700">;<br><br>    return </span><span style="color: #0000BB">$access</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Performs access check for this user.</p> <h3 class="detailHeader" id="clearStates-detail"> clearStates() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>clearStates</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L619">framework/web/auth/CWebUser.php#619</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">clearStates</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$keys</span><span style="color: #007700">=</span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$keys </span><span style="color: #007700">as </span><span style="color: #0000BB">$key</span><span style="color: #007700">)<br>    {<br>        if(!</span><span style="color: #0000BB">strncmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">,</span><span style="color: #0000BB">$n</span><span style="color: #007700">))<br>            unset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br>    }<br>}</span></pre> </div> <p>Clears all user identity information from persistent storage. This will remove the data stored via <a href="cwebuser#setState">setState</a>.</p> <h3 class="detailHeader" id="createIdentityCookie-detail"> createIdentityCookie() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected <a href="chttpcookie">CHttpCookie</a> <b>createIdentityCookie</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the cookie name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="chttpcookie">CHttpCookie</a></td> <td class="paramDescCol">the cookie used to store identity information</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L530">framework/web/auth/CWebUser.php#530</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">createIdentityCookie</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">=new </span><span style="color: #0000BB">CHttpCookie</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identityCookie</span><span style="color: #007700">))<br>    {<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identityCookie </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>    }<br>    return </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Creates a cookie to store identity information.</p> <h3 class="detailHeader" id="getFlash-detail"> getFlash() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getFlash</b>(string $key, mixed $defaultValue=NULL, boolean $delete=true)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">key identifying the flash message</td> </tr> <tr> <td class="paramNameCol">$defaultValue</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">value to be returned if the flash message is not available.</td> </tr> <tr> <td class="paramNameCol">$delete</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to delete this flash message after accessing it. Defaults to true.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the message message</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L668">framework/web/auth/CWebUser.php#668</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getFlash</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$defaultValue</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">,</span><span style="color: #0000BB">$delete</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FLASH_KEY_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$defaultValue</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$delete</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFlash</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns a flash message. A flash message is available only in the current and the next requests.</p> <h3 class="detailHeader" id="getFlashes-detail"> getFlashes() <span class="detailHeaderTag"> method (available since v1.1.3) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>getFlashes</b>(boolean $delete=true)</pre> </td></tr> <tr> <td class="paramNameCol">$delete</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to delete the flash messages after calling this method.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">flash messages (key =&gt; message).</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L639">framework/web/auth/CWebUser.php#639</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getFlashes</span><span style="color: #007700">(</span><span style="color: #0000BB">$delete</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$flashes</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">().</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FLASH_KEY_PREFIX</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$keys</span><span style="color: #007700">=</span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$keys </span><span style="color: #007700">as </span><span style="color: #0000BB">$key</span><span style="color: #007700">)<br>    {<br>        if(!</span><span style="color: #0000BB">strncmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">,</span><span style="color: #0000BB">$n</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$flashes</span><span style="color: #007700">[</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$n</span><span style="color: #007700">)]=</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">];<br>            if(</span><span style="color: #0000BB">$delete</span><span style="color: #007700">)<br>                unset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br>        }<br>    }<br>    if(</span><span style="color: #0000BB">$delete</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FLASH_COUNTERS</span><span style="color: #007700">,array());<br>    return </span><span style="color: #0000BB">$flashes</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns all flash messages. This method is similar to <a href="cwebuser#getFlash">getFlash</a> except that it returns all currently available flash messages.</p> <h3 class="detailHeader" id="getId-detail"> getId() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getId</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the unique identifier for the user. If null, it means the user is a guest.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L297">framework/web/auth/CWebUser.php#297</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getId</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #DD0000">'__id'</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns a value that uniquely represents the user.</p> <h3 class="detailHeader" id="getIsGuest-detail"> getIsGuest() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>getIsGuest</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the current application user is a guest.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L288">framework/web/auth/CWebUser.php#288</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getIsGuest</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #DD0000">'__id'</span><span style="color: #007700">)===</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns a value indicating whether the user is a guest (not authenticated).</p> <h3 class="detailHeader" id="getName-detail"> getName() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getName</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the user name. If the user is not logged in, this will be <a href="cwebuser#guestName">guestName</a>.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L315">framework/web/auth/CWebUser.php#315</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getName</span><span style="color: #007700">()<br>{<br>    if((</span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #DD0000">'__name'</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>    else<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">guestName</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the unique identifier for the user (e.g. username). This is the unique identifier that is mainly used for display purpose.</p> <h3 class="detailHeader" id="getReturnUrl-detail"> getReturnUrl() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getReturnUrl</b>(string $defaultUrl=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$defaultUrl</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the default return URL in case it was not set previously. If this is null, the application entry URL will be considered as the default return URL.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the URL that the user should be redirected to after login.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L342">framework/web/auth/CWebUser.php#342</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getReturnUrl</span><span style="color: #007700">(</span><span style="color: #0000BB">$defaultUrl</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$defaultUrl</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$defaultReturnUrl</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getUrlManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">showScriptName </span><span style="color: #007700">? </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getScriptUrl</span><span style="color: #007700">() : </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getBaseUrl</span><span style="color: #007700">().</span><span style="color: #DD0000">'/'</span><span style="color: #007700">;<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$defaultReturnUrl</span><span style="color: #007700">=</span><span style="color: #0000BB">CHtml</span><span style="color: #007700">::</span><span style="color: #0000BB">normalizeUrl</span><span style="color: #007700">(</span><span style="color: #0000BB">$defaultUrl</span><span style="color: #007700">);<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #DD0000">'__returnUrl'</span><span style="color: #007700">,</span><span style="color: #0000BB">$defaultReturnUrl</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the URL that the user should be redirected to after successful login. This property is usually used by the login action. If the login is successful, the action should read this property and use it to redirect the user browser.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebuser#loginRequired">loginRequired</a></li> </ul> </div> <h3 class="detailHeader" id="getState-detail"> getState() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getState</b>(string $key, mixed $defaultValue=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">variable name</td> </tr> <tr> <td class="paramNameCol">$defaultValue</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">default value</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the value of the variable. If it doesn't exist in the session, the provided default value will be returned</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L574">framework/web/auth/CWebUser.php#574</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$defaultValue</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$key</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">().</span><span style="color: #0000BB">$key</span><span style="color: #007700">;<br>    return isset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]) ? </span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">] : </span><span style="color: #0000BB">$defaultValue</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the value of a variable that is stored in user session. <br><br> This function is designed to be used by CWebUser descendant classes who want to store additional user information in user session. A variable, if stored in user session using <a href="cwebuser#setState">setState</a> can be retrieved back using this function.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebuser#setState">setState</a></li> </ul> </div> <h3 class="detailHeader" id="getStateKeyPrefix-detail"> getStateKeyPrefix() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getStateKeyPrefix</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">a prefix for the name of the session variables storing user session data.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L544">framework/web/auth/CWebUser.php#544</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_keyPrefix</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_keyPrefix</span><span style="color: #007700">;<br>    else<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_keyPrefix</span><span style="color: #007700">=</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #DD0000">'Yii.'</span><span style="color: #007700">.</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.'</span><span style="color: #007700">.</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getId</span><span style="color: #007700">());<br>}</span></pre> </div>  <h3 class="detailHeader" id="hasFlash-detail"> hasFlash() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>hasFlash</b>(string $key)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">key identifying the flash message</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the specified flash message exists</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L699">framework/web/auth/CWebUser.php#699</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">hasFlash</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFlash</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">, </span><span style="color: #0000BB">null</span><span style="color: #007700">, </span><span style="color: #0000BB">false</span><span style="color: #007700">)!==</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="hasState-detail"> hasState() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>hasState</b>(string $key)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">state name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether there is a state of the specified name.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L609">framework/web/auth/CWebUser.php#609</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">hasState</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$key</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">().</span><span style="color: #0000BB">$key</span><span style="color: #007700">;<br>    return isset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br>}</span></pre> </div> <p>Returns a value indicating whether there is a state of the specified name.</p> <h3 class="detailHeader" id="init-detail"> init() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>init</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L197">framework/web/auth/CWebUser.php#197</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">init</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSession</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsGuest</span><span style="color: #007700">() &amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">allowAutoLogin</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">restoreFromCookie</span><span style="color: #007700">();<br>    elseif(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">autoRenewCookie </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">allowAutoLogin</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">renewCookie</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">autoUpdateFlash</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">updateFlash</span><span style="color: #007700">();<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">updateAuthStatus</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Initializes the application component. This method overrides the parent implementation by starting session, performing cookie-based authentication if enabled, and updating the flash variables.</p> <h3 class="detailHeader" id="loadIdentityStates-detail"> loadIdentityStates() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>loadIdentityStates</b>(array $states)</pre> </td></tr> <tr> <td class="paramNameCol">$states</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the identity states</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L739">framework/web/auth/CWebUser.php#739</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">loadIdentityStates</span><span style="color: #007700">(</span><span style="color: #0000BB">$states</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$names</span><span style="color: #007700">=array();<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$states</span><span style="color: #007700">))<br>    {<br>        foreach(</span><span style="color: #0000BB">$states </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$names</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>        }<br>    }<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATES_VAR</span><span style="color: #007700">,</span><span style="color: #0000BB">$names</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Loads identity states from an array and saves them to persistent storage.</p> <h3 class="detailHeader" id="login-detail"> login() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>login</b>(<a href="iuseridentity">IUserIdentity</a> $identity, integer $duration=0)</pre> </td></tr> <tr> <td class="paramNameCol">$identity</td> <td class="paramTypeCol"><a href="iuseridentity">IUserIdentity</a></td> <td class="paramDescCol">the user identity (which should already be authenticated)</td> </tr> <tr> <td class="paramNameCol">$duration</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">number of seconds that the user can remain in logged-in status. Defaults to 0, meaning login till the user closes the browser. If greater than 0, cookie-based login will be used. In this case, <a href="cwebuser#allowAutoLogin">allowAutoLogin</a> must be set true, otherwise an exception will be thrown.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the user is logged in</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L229">framework/web/auth/CWebUser.php#229</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">login</span><span style="color: #007700">(</span><span style="color: #0000BB">$identity</span><span style="color: #007700">,</span><span style="color: #0000BB">$duration</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$id</span><span style="color: #007700">=</span><span style="color: #0000BB">$identity</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getId</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$states</span><span style="color: #007700">=</span><span style="color: #0000BB">$identity</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPersistentStates</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeLogin</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,</span><span style="color: #0000BB">$states</span><span style="color: #007700">,</span><span style="color: #0000BB">false</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">changeIdentity</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,</span><span style="color: #0000BB">$identity</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">(),</span><span style="color: #0000BB">$states</span><span style="color: #007700">);<br><br>        if(</span><span style="color: #0000BB">$duration</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">allowAutoLogin</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveToCookie</span><span style="color: #007700">(</span><span style="color: #0000BB">$duration</span><span style="color: #007700">);<br>            else<br>                throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'{class}.allowAutoLogin must be set true in order to use cookie-based authentication.'</span><span style="color: #007700">,<br>                    array(</span><span style="color: #DD0000">'{class}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">))));<br>        }<br><br>        if (</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">absoluteAuthTimeout</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">AUTH_ABSOLUTE_TIMEOUT_VAR</span><span style="color: #007700">, </span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">absoluteAuthTimeout</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterLogin</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br>    }<br>    return !</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsGuest</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Logs in a user. <br><br> The user identity information will be saved in storage that is persistent during the user session. By default, the storage is simply the session storage. If the duration parameter is greater than 0, a cookie will be sent to prepare for cookie-based login in future. <br><br> Note, you have to set <a href="cwebuser#allowAutoLogin">allowAutoLogin</a> to true if you want to allow user to be authenticated based on the cookie information.</p> <h3 class="detailHeader" id="loginRequired-detail"> loginRequired() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>loginRequired</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L372">framework/web/auth/CWebUser.php#372</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">loginRequired</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$app</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$request</span><span style="color: #007700">=</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">();<br><br>    if(!</span><span style="color: #0000BB">$request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsAjaxRequest</span><span style="color: #007700">())<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReturnUrl</span><span style="color: #007700">(</span><span style="color: #0000BB">$request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUrl</span><span style="color: #007700">());<br>        if((</span><span style="color: #0000BB">$url</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loginUrl</span><span style="color: #007700">)!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">))<br>            {<br>                </span><span style="color: #0000BB">$route</span><span style="color: #007700">=isset(</span><span style="color: #0000BB">$url</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]) ? </span><span style="color: #0000BB">$url</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">] : </span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">defaultController</span><span style="color: #007700">;<br>                </span><span style="color: #0000BB">$url</span><span style="color: #007700">=</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createUrl</span><span style="color: #007700">(</span><span style="color: #0000BB">$route</span><span style="color: #007700">,</span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br>            }<br>            </span><span style="color: #0000BB">$request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">redirect</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">);<br>        }<br>    }<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loginRequiredAjaxResponse</span><span style="color: #007700">))<br>    {<br>        echo </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loginRequiredAjaxResponse</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">end</span><span style="color: #007700">();<br>    }<br><br>    throw new </span><span style="color: #0000BB">CHttpException</span><span style="color: #007700">(</span><span style="color: #0000BB">403</span><span style="color: #007700">,</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Login Required'</span><span style="color: #007700">));<br>}</span></pre> </div> <p>Redirects the user browser to the login page. Before the redirection, the current URL (if it's not an AJAX url) will be kept in <a href="cwebuser#returnUrl">returnUrl</a> so that the user browser may be redirected back to the current page after successful login. Make sure you set <a href="cwebuser#loginUrl">loginUrl</a> so that the user browser can be redirected to the specified login URL after calling this method. After calling this method, the current request processing will be terminated.</p> <h3 class="detailHeader" id="logout-detail"> logout() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>logout</b>(boolean $destroySession=true)</pre> </td></tr> <tr> <td class="paramNameCol">$destroySession</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to destroy the whole session. Defaults to true. If false, then <a href="cwebuser#clearStates">clearStates</a> will be called, which removes only the data stored via <a href="cwebuser#setState">setState</a>.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L260">framework/web/auth/CWebUser.php#260</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">logout</span><span style="color: #007700">(</span><span style="color: #0000BB">$destroySession</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeLogout</span><span style="color: #007700">())<br>    {<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">allowAutoLogin</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getCookies</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">remove</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">());<br>            if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identityCookie</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createIdentityCookie</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">());<br>                </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>                </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expire</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>                </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getCookies</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,</span><span style="color: #0000BB">$cookie</span><span style="color: #007700">);<br>            }<br>        }<br>        if(</span><span style="color: #0000BB">$destroySession</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSession</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">destroy</span><span style="color: #007700">();<br>        else<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">clearStates</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_access</span><span style="color: #007700">=array();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterLogout</span><span style="color: #007700">();<br>    }<br>}</span></pre> </div> <p>Logs out the current user. This will remove authentication-related session data. If the parameter is true, the whole session will be destroyed as well.</p> <h3 class="detailHeader" id="renewCookie-detail"> renewCookie() <span class="detailHeaderTag"> method (available since v1.1.3) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>renewCookie</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L487">framework/web/auth/CWebUser.php#487</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">renewCookie</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$request</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$cookies</span><span style="color: #007700">=</span><span style="color: #0000BB">$request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCookies</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">=</span><span style="color: #0000BB">$cookies</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">itemAt</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">());<br>    if(</span><span style="color: #0000BB">$cookie </span><span style="color: #007700">&amp;&amp; !empty(</span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">) &amp;&amp; (</span><span style="color: #0000BB">$data</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSecurityManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">validateData</span><span style="color: #007700">(</span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$data</span><span style="color: #007700">=@</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">) &amp;&amp; isset(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">],</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">],</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]))<br>        {<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveToCookie</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br>        }<br>    }<br>}</span></pre> </div> <p>Renews the identity cookie. This method will set the expiration time of the identity cookie to be the current time plus the originally specified cookie duration.</p> <h3 class="detailHeader" id="restoreFromCookie-detail"> restoreFromCookie() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>restoreFromCookie</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L457">framework/web/auth/CWebUser.php#457</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">restoreFromCookie</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$app</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$request</span><span style="color: #007700">=</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">=</span><span style="color: #0000BB">$request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCookies</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">itemAt</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">());<br>    if(</span><span style="color: #0000BB">$cookie </span><span style="color: #007700">&amp;&amp; !empty(</span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">) &amp;&amp; </span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">) &amp;&amp; (</span><span style="color: #0000BB">$data</span><span style="color: #007700">=</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSecurityManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">validateData</span><span style="color: #007700">(</span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$data</span><span style="color: #007700">=@</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">) &amp;&amp; isset(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">],</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">],</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]))<br>        {<br>            list(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$duration</span><span style="color: #007700">,</span><span style="color: #0000BB">$states</span><span style="color: #007700">)=</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br>            if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeLogin</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,</span><span style="color: #0000BB">$states</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">))<br>            {<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">changeIdentity</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$states</span><span style="color: #007700">);<br>                if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">autoRenewCookie</span><span style="color: #007700">)<br>                {<br>                    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveToCookie</span><span style="color: #007700">(</span><span style="color: #0000BB">$duration</span><span style="color: #007700">);<br>                }<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterLogin</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>            }<br>        }<br>    }<br>}</span></pre> </div> <p>Populates the current user object with the information obtained from cookie. This method is used when automatic login (<a href="cwebuser#allowAutoLogin">allowAutoLogin</a>) is enabled. The user identity information is recovered from cookie. Sufficient security measures are used to prevent cookie data from being tampered.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebuser#saveToCookie">saveToCookie</a></li> </ul> </div> <h3 class="detailHeader" id="saveIdentityStates-detail"> saveIdentityStates() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected array <b>saveIdentityStates</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the identity states</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L727">framework/web/auth/CWebUser.php#727</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">saveIdentityStates</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$states</span><span style="color: #007700">=array();<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATES_VAR</span><span style="color: #007700">,array()) as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$dummy</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$states</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$states</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Retrieves identity states from persistent storage and saves them as an array.</p> <h3 class="detailHeader" id="saveToCookie-detail"> saveToCookie() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>saveToCookie</b>(integer $duration)</pre> </td></tr> <tr> <td class="paramNameCol">$duration</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">number of seconds that the user can remain in logged-in status. Defaults to 0, meaning login till the user closes the browser.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L510">framework/web/auth/CWebUser.php#510</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">saveToCookie</span><span style="color: #007700">(</span><span style="color: #0000BB">$duration</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$app</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createIdentityCookie</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">());<br>    </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expire</span><span style="color: #007700">=</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">$duration</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$data</span><span style="color: #007700">=array(<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getId</span><span style="color: #007700">(),<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">(),<br>        </span><span style="color: #0000BB">$duration</span><span style="color: #007700">,<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveIdentityStates</span><span style="color: #007700">(),<br>    );<br>    </span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">=</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSecurityManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">hashData</span><span style="color: #007700">(</span><span style="color: #0000BB">serialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">));<br>    </span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getCookies</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$cookie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,</span><span style="color: #0000BB">$cookie</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Saves necessary user data into a cookie. This method is used when automatic login (<a href="cwebuser#allowAutoLogin">allowAutoLogin</a>) is enabled. This method saves user ID, username, other identity states and a validation key to cookie. These information are used to do authentication next time when user visits the application.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebuser#restoreFromCookie">restoreFromCookie</a></li> </ul> </div> <h3 class="detailHeader" id="setFlash-detail"> setFlash() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setFlash</b>(string $key, mixed $value, mixed $defaultValue=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">key identifying the flash message</td> </tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">flash message</td> </tr> <tr> <td class="paramNameCol">$defaultValue</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">if this value is the same as the flash message, the flash message will be removed. (Therefore, you can use setFlash('key',null) to remove a flash message.)</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L684">framework/web/auth/CWebUser.php#684</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setFlash</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$defaultValue</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FLASH_KEY_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$defaultValue</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$counters</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FLASH_COUNTERS</span><span style="color: #007700">,array());<br>    if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">===</span><span style="color: #0000BB">$defaultValue</span><span style="color: #007700">)<br>        unset(</span><span style="color: #0000BB">$counters</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br>    else<br>        </span><span style="color: #0000BB">$counters</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FLASH_COUNTERS</span><span style="color: #007700">,</span><span style="color: #0000BB">$counters</span><span style="color: #007700">,array());<br>}</span></pre> </div> <p>Stores a flash message. A flash message is available only in the current and the next requests.</p> <h3 class="detailHeader" id="setId-detail"> setId() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setId</b>(mixed $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the unique identifier for the user. If null, it means the user is a guest.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L305">framework/web/auth/CWebUser.php#305</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setId</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #DD0000">'__id'</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>}</span></pre> </div>  <h3 class="detailHeader" id="setName-detail"> setName() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setName</b>(string $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the user name.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L328">framework/web/auth/CWebUser.php#328</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setName</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #DD0000">'__name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Sets the unique identifier for the user (e.g. username).</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebuser#getName">getName</a></li> </ul> </div> <h3 class="detailHeader" id="setReturnUrl-detail"> setReturnUrl() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setReturnUrl</b>(string $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the URL that the user should be redirected to after login.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L358">framework/web/auth/CWebUser.php#358</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setReturnUrl</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #DD0000">'__returnUrl'</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>}</span></pre> </div>  <h3 class="detailHeader" id="setState-detail"> setState() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setState</b>(string $key, mixed $value, mixed $defaultValue=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$key</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">variable name</td> </tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">variable value</td> </tr> <tr> <td class="paramNameCol">$defaultValue</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">default value. If $value===$defaultValue, the variable will be removed from the session</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L595">framework/web/auth/CWebUser.php#595</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$defaultValue</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$key</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getStateKeyPrefix</span><span style="color: #007700">().</span><span style="color: #0000BB">$key</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">===</span><span style="color: #0000BB">$defaultValue</span><span style="color: #007700">)<br>        unset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br>    else<br>        </span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Stores a variable in user session. <br><br> This function is designed to be used by CWebUser descendant classes who want to store additional user information in user session. By storing a variable using this function, the variable may be retrieved back later using <a href="cwebuser#getState">getState</a>. The variable will be persistent across page requests during a user session.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebuser#getState">getState</a></li> </ul> </div> <h3 class="detailHeader" id="setStateKeyPrefix-detail"> setStateKeyPrefix() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setStateKeyPrefix</b>(string $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">a prefix for the name of the session variables storing user session data.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L555">framework/web/auth/CWebUser.php#555</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setStateKeyPrefix</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_keyPrefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="updateAuthStatus-detail"> updateAuthStatus() <span class="detailHeaderTag"> method (available since v1.1.7) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>updateAuthStatus</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L782">framework/web/auth/CWebUser.php#782</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">updateAuthStatus</span><span style="color: #007700">()<br>{<br>    if((</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">authTimeout</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">|| </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">absoluteAuthTimeout</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">) &amp;&amp; !</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsGuest</span><span style="color: #007700">())<br>    {<br>        </span><span style="color: #0000BB">$expires</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">AUTH_TIMEOUT_VAR</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$expiresAbsolute</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">AUTH_ABSOLUTE_TIMEOUT_VAR</span><span style="color: #007700">);<br><br>        if (</span><span style="color: #0000BB">$expires</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$expires </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">time</span><span style="color: #007700">() || </span><span style="color: #0000BB">$expiresAbsolute</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$expiresAbsolute </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">time</span><span style="color: #007700">())<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">logout</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br>        else<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">AUTH_TIMEOUT_VAR</span><span style="color: #007700">,</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">authTimeout</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Updates the authentication status according to <a href="cwebuser#authTimeout">authTimeout</a>. If the user has been inactive for <a href="cwebuser#authTimeout">authTimeout</a> seconds, or {link absoluteAuthTimeout} has passed, he will be automatically logged out.</p> <h3 class="detailHeader" id="updateFlash-detail"> updateFlash() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>updateFlash</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/auth/CWebUser.php#L758">framework/web/auth/CWebUser.php#758</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">updateFlash</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$counters</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FLASH_COUNTERS</span><span style="color: #007700">);<br>    if(!</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$counters</span><span style="color: #007700">))<br>        return;<br>    foreach(</span><span style="color: #0000BB">$counters </span><span style="color: #007700">as </span><span style="color: #0000BB">$key</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$count</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$count</span><span style="color: #007700">)<br>        {<br>            unset(</span><span style="color: #0000BB">$counters</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FLASH_KEY_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br>        }<br>        else<br>            </span><span style="color: #0000BB">$counters</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]++;<br>    }<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setState</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FLASH_COUNTERS</span><span style="color: #007700">,</span><span style="color: #0000BB">$counters</span><span style="color: #007700">,array());<br>}</span></pre> </div> <p>Updates the internal counters for flash messages. This method is internally used by <a href="cwebapplication">CWebApplication</a> to maintain the availability of flash messages.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CWebUser" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CWebUser</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
