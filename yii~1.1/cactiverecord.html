
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CActiveRecord - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" Returns all column attribute values. Note, related objects are not returned. ">
  <meta name="keywords" content="cactiverecord, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cactiverecord.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/yii~1.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CActiveRecord</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.db.ar">system.db.ar</a></td> </tr> <tr> <th>Inheritance</th> <td>abstract class CActiveRecord » <a href="cmodel">CModel</a> » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Implements</th> <td>ArrayAccess, Traversable, IteratorAggregate</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php">framework/db/ar/CActiveRecord.php</a></td> </tr> </table> <div id="classDescription"> CActiveRecord is the base class for classes representing relational data. <br><br> It implements the active record design pattern, a popular Object-Relational Mapping (ORM) technique. Please check <a href="http://www.yiiframework.com/doc/guide/database.ar">the Guide</a> for more details about this class.</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="attributes"> <td><a href="cactiverecord#attributes-detail">attributes</a></td> <td>array</td> <td>Returns all column attribute values.</td> <td>CActiveRecord</td> </tr> <tr id="commandBuilder"> <td><a href="cactiverecord#commandBuilder-detail">commandBuilder</a></td> <td><a href="cdbcommandbuilder">CDbCommandBuilder</a></td> <td>Returns the command builder used by this AR.</td> <td>CActiveRecord</td> </tr> <tr id="db"> <td><a href="cactiverecord#db-detail">db</a></td> <td><a href="cdbconnection">CDbConnection</a></td> <td>the default database connection for all active record classes.</td> <td>CActiveRecord</td> </tr> <tr id="dbConnection"> <td><a href="cactiverecord#dbConnection-detail">dbConnection</a></td> <td><a href="cdbconnection">CDbConnection</a></td> <td>Returns the database connection used by active record.</td> <td>CActiveRecord</td> </tr> <tr id="dbCriteria"> <td><a href="cactiverecord#dbCriteria-detail">dbCriteria</a></td> <td><a href="cdbcriteria">CDbCriteria</a></td> <td>Returns the query criteria associated with this model.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="errors"> <td><a href="cmodel#errors-detail">errors</a></td> <td>array</td> <td>Returns the errors for all attribute or a single attribute.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="isNewRecord"> <td><a href="cactiverecord#isNewRecord-detail">isNewRecord</a></td> <td>boolean</td> <td>Returns if the current record is new (was never saved to database)</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="iterator"> <td><a href="cmodel#iterator-detail">iterator</a></td> <td><a href="cmapiterator">CMapIterator</a></td> <td>Returns an iterator for traversing the attributes in the model.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="metaData"> <td><a href="cactiverecord#metaData-detail">metaData</a></td> <td><a href="cactiverecordmetadata">CActiveRecordMetaData</a></td> <td>Returns the meta-data for this AR</td> <td>CActiveRecord</td> </tr> <tr id="oldPrimaryKey"> <td><a href="cactiverecord#oldPrimaryKey-detail">oldPrimaryKey</a></td> <td>mixed</td> <td>Returns the old primary key value.</td> <td>CActiveRecord</td> </tr> <tr id="primaryKey"> <td><a href="cactiverecord#primaryKey-detail">primaryKey</a></td> <td>mixed</td> <td>Returns the primary key value.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="safeAttributeNames"> <td><a href="cmodel#safeAttributeNames-detail">safeAttributeNames</a></td> <td>array</td> <td>Returns the attribute names that are safe to be massively assigned.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="scenario"> <td><a href="cmodel#scenario-detail">scenario</a></td> <td>string</td> <td>Returns the scenario that this model is used in.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="tableAlias"> <td><a href="cactiverecord#tableAlias-detail">tableAlias</a></td> <td>string</td> <td>Returns the table alias to be used by the find methods.</td> <td>CActiveRecord</td> </tr> <tr id="tableSchema"> <td><a href="cactiverecord#tableSchema-detail">tableSchema</a></td> <td><a href="cdbtableschema">CDbTableSchema</a></td> <td>Returns the metadata of the table that this AR belongs to</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="validatorList"> <td><a href="cmodel#validatorList-detail">validatorList</a></td> <td><a href="clist">CList</a></td> <td>Returns all the validators declared in the model.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="validators"> <td><a href="cmodel#validators-detail">validators</a></td> <td>array</td> <td>Returns the validators applicable to the current <a href="cactiverecord#scenario">scenario</a>.</td> <td><a href="cmodel">CModel</a></td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__call"> <td><a href="cactiverecord#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td>CActiveRecord</td> </tr> <tr id="__construct"> <td><a href="cactiverecord#__construct-detail">__construct()</a></td> <td>Constructor.</td> <td>CActiveRecord</td> </tr> <tr id="__get"> <td><a href="cactiverecord#__get-detail">__get()</a></td> <td>PHP getter magic method.</td> <td>CActiveRecord</td> </tr> <tr id="__isset"> <td><a href="cactiverecord#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td>CActiveRecord</td> </tr> <tr id="__set"> <td><a href="cactiverecord#__set-detail">__set()</a></td> <td>PHP setter magic method.</td> <td>CActiveRecord</td> </tr> <tr id="__sleep"> <td><a href="cactiverecord#__sleep-detail">__sleep()</a></td> <td>PHP sleep magic method.</td> <td>CActiveRecord</td> </tr> <tr id="__unset"> <td><a href="cactiverecord#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="addError"> <td><a href="cmodel#addError-detail">addError()</a></td> <td>Adds a new error to the specified attribute.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="addErrors"> <td><a href="cmodel#addErrors-detail">addErrors()</a></td> <td>Adds a list of errors.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="addRelatedRecord"> <td><a href="cactiverecord#addRelatedRecord-detail">addRelatedRecord()</a></td> <td>Do not call this method. This method is used internally by <a href="cactivefinder">CActiveFinder</a> to populate</td> <td>CActiveRecord</td> </tr> <tr id="afterFindInternal"> <td><a href="cactiverecord#afterFindInternal-detail">afterFindInternal()</a></td> <td>Calls <a href="cactiverecord#afterFind">afterFind</a>.</td> <td>CActiveRecord</td> </tr> <tr id="applyScopes"> <td><a href="cactiverecord#applyScopes-detail">applyScopes()</a></td> <td>Applies the query scopes to the given criteria.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attributeLabels"> <td><a href="cmodel#attributeLabels-detail">attributeLabels()</a></td> <td>Returns the attribute labels.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="attributeNames"> <td><a href="cactiverecord#attributeNames-detail">attributeNames()</a></td> <td>Returns the list of all attribute names of the model.</td> <td>CActiveRecord</td> </tr> <tr id="beforeFindInternal"> <td><a href="cactiverecord#beforeFindInternal-detail">beforeFindInternal()</a></td> <td>Calls <a href="cactiverecord#beforeFind">beforeFind</a>.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="behaviors"> <td><a href="cmodel#behaviors-detail">behaviors()</a></td> <td>Returns a list of behaviors that this model should behave as.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="cache"> <td><a href="cactiverecord#cache-detail">cache()</a></td> <td>Sets the parameters about query caching.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="clearErrors"> <td><a href="cmodel#clearErrors-detail">clearErrors()</a></td> <td>Removes errors for all attributes or a single attribute.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="count"> <td><a href="cactiverecord#count-detail">count()</a></td> <td>Finds the number of rows satisfying the specified query condition.</td> <td>CActiveRecord</td> </tr> <tr id="countByAttributes"> <td><a href="cactiverecord#countByAttributes-detail">countByAttributes()</a></td> <td>Finds the number of rows that have the specified attribute values.</td> <td>CActiveRecord</td> </tr> <tr id="countBySql"> <td><a href="cactiverecord#countBySql-detail">countBySql()</a></td> <td>Finds the number of rows using the given SQL statement.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="createValidators"> <td><a href="cmodel#createValidators-detail">createValidators()</a></td> <td>Creates validator objects based on the specification in <a href="cactiverecord#rules">rules</a>.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="defaultScope"> <td><a href="cactiverecord#defaultScope-detail">defaultScope()</a></td> <td>Returns the default named scope that should be implicitly applied to all queries for this model.</td> <td>CActiveRecord</td> </tr> <tr id="delete"> <td><a href="cactiverecord#delete-detail">delete()</a></td> <td>Deletes the row corresponding to this active record.</td> <td>CActiveRecord</td> </tr> <tr id="deleteAll"> <td><a href="cactiverecord#deleteAll-detail">deleteAll()</a></td> <td>Deletes rows with the specified condition.</td> <td>CActiveRecord</td> </tr> <tr id="deleteAllByAttributes"> <td><a href="cactiverecord#deleteAllByAttributes-detail">deleteAllByAttributes()</a></td> <td>Deletes rows which match the specified attribute values.</td> <td>CActiveRecord</td> </tr> <tr id="deleteByPk"> <td><a href="cactiverecord#deleteByPk-detail">deleteByPk()</a></td> <td>Deletes rows with the specified primary key.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="equals"> <td><a href="cactiverecord#equals-detail">equals()</a></td> <td>Compares current active record with another one.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="exists"> <td><a href="cactiverecord#exists-detail">exists()</a></td> <td>Checks whether there is row satisfying the specified condition.</td> <td>CActiveRecord</td> </tr> <tr id="find"> <td><a href="cactiverecord#find-detail">find()</a></td> <td>Finds a single active record with the specified condition.</td> <td>CActiveRecord</td> </tr> <tr id="findAll"> <td><a href="cactiverecord#findAll-detail">findAll()</a></td> <td>Finds all active records satisfying the specified condition.</td> <td>CActiveRecord</td> </tr> <tr id="findAllByAttributes"> <td><a href="cactiverecord#findAllByAttributes-detail">findAllByAttributes()</a></td> <td>Finds all active records that have the specified attribute values.</td> <td>CActiveRecord</td> </tr> <tr id="findAllByPk"> <td><a href="cactiverecord#findAllByPk-detail">findAllByPk()</a></td> <td>Finds all active records with the specified primary keys.</td> <td>CActiveRecord</td> </tr> <tr id="findAllBySql"> <td><a href="cactiverecord#findAllBySql-detail">findAllBySql()</a></td> <td>Finds all active records using the specified SQL statement.</td> <td>CActiveRecord</td> </tr> <tr id="findByAttributes"> <td><a href="cactiverecord#findByAttributes-detail">findByAttributes()</a></td> <td>Finds a single active record that has the specified attribute values.</td> <td>CActiveRecord</td> </tr> <tr id="findByPk"> <td><a href="cactiverecord#findByPk-detail">findByPk()</a></td> <td>Finds a single active record with the specified primary key.</td> <td>CActiveRecord</td> </tr> <tr id="findBySql"> <td><a href="cactiverecord#findBySql-detail">findBySql()</a></td> <td>Finds a single active record with the specified SQL statement.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="generateAttributeLabel"> <td><a href="cmodel#generateAttributeLabel-detail">generateAttributeLabel()</a></td> <td>Generates a user friendly attribute label.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="getActiveFinder"> <td><a href="cactiverecord#getActiveFinder-detail">getActiveFinder()</a></td> <td>Given 'with' options returns a new active finder instance.</td> <td>CActiveRecord</td> </tr> <tr id="getActiveRelation"> <td><a href="cactiverecord#getActiveRelation-detail">getActiveRelation()</a></td> <td>Returns the named relation declared for this AR class.</td> <td>CActiveRecord</td> </tr> <tr id="getAttribute"> <td><a href="cactiverecord#getAttribute-detail">getAttribute()</a></td> <td>Returns the named attribute value.</td> <td>CActiveRecord</td> </tr> <tr id="getAttributeLabel"> <td><a href="cactiverecord#getAttributeLabel-detail">getAttributeLabel()</a></td> <td>Returns the text label for the specified attribute.</td> <td>CActiveRecord</td> </tr> <tr id="getAttributes"> <td><a href="cactiverecord#getAttributes-detail">getAttributes()</a></td> <td>Returns all column attribute values.</td> <td>CActiveRecord</td> </tr> <tr id="getCommandBuilder"> <td><a href="cactiverecord#getCommandBuilder-detail">getCommandBuilder()</a></td> <td>Returns the command builder used by this AR.</td> <td>CActiveRecord</td> </tr> <tr id="getDbConnection"> <td><a href="cactiverecord#getDbConnection-detail">getDbConnection()</a></td> <td>Returns the database connection used by active record.</td> <td>CActiveRecord</td> </tr> <tr id="getDbCriteria"> <td><a href="cactiverecord#getDbCriteria-detail">getDbCriteria()</a></td> <td>Returns the query criteria associated with this model.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="getError"> <td><a href="cmodel#getError-detail">getError()</a></td> <td>Returns the first error of the specified attribute.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="getErrors"> <td><a href="cmodel#getErrors-detail">getErrors()</a></td> <td>Returns the errors for all attribute or a single attribute.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="getIsNewRecord"> <td><a href="cactiverecord#getIsNewRecord-detail">getIsNewRecord()</a></td> <td>Returns if the current record is new (was never saved to database)</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="getIterator"> <td><a href="cmodel#getIterator-detail">getIterator()</a></td> <td>Returns an iterator for traversing the attributes in the model.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="getMetaData"> <td><a href="cactiverecord#getMetaData-detail">getMetaData()</a></td> <td>Returns the meta-data for this AR</td> <td>CActiveRecord</td> </tr> <tr id="getOldPrimaryKey"> <td><a href="cactiverecord#getOldPrimaryKey-detail">getOldPrimaryKey()</a></td> <td>Returns the old primary key value.</td> <td>CActiveRecord</td> </tr> <tr id="getPrimaryKey"> <td><a href="cactiverecord#getPrimaryKey-detail">getPrimaryKey()</a></td> <td>Returns the primary key value.</td> <td>CActiveRecord</td> </tr> <tr id="getRelated"> <td><a href="cactiverecord#getRelated-detail">getRelated()</a></td> <td>Returns the related record(s).</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="getSafeAttributeNames"> <td><a href="cmodel#getSafeAttributeNames-detail">getSafeAttributeNames()</a></td> <td>Returns the attribute names that are safe to be massively assigned.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="getScenario"> <td><a href="cmodel#getScenario-detail">getScenario()</a></td> <td>Returns the scenario that this model is used in.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="getTableAlias"> <td><a href="cactiverecord#getTableAlias-detail">getTableAlias()</a></td> <td>Returns the table alias to be used by the find methods.</td> <td>CActiveRecord</td> </tr> <tr id="getTableSchema"> <td><a href="cactiverecord#getTableSchema-detail">getTableSchema()</a></td> <td>Returns the metadata of the table that this AR belongs to</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="getValidatorList"> <td><a href="cmodel#getValidatorList-detail">getValidatorList()</a></td> <td>Returns all the validators declared in the model.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="getValidators"> <td><a href="cmodel#getValidators-detail">getValidators()</a></td> <td>Returns the validators applicable to the current <a href="cactiverecord#scenario">scenario</a>.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="hasAttribute"> <td><a href="cactiverecord#hasAttribute-detail">hasAttribute()</a></td> <td>Checks whether this AR has the named attribute</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="hasErrors"> <td><a href="cmodel#hasErrors-detail">hasErrors()</a></td> <td>Returns a value indicating whether there is any validation error.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="hasRelated"> <td><a href="cactiverecord#hasRelated-detail">hasRelated()</a></td> <td>Returns a value indicating whether the named related object(s) has been loaded.</td> <td>CActiveRecord</td> </tr> <tr id="init"> <td><a href="cactiverecord#init-detail">init()</a></td> <td>Initializes this model.</td> <td>CActiveRecord</td> </tr> <tr id="insert"> <td><a href="cactiverecord#insert-detail">insert()</a></td> <td>Inserts a row into the table based on this active record attributes.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="isAttributeRequired"> <td><a href="cmodel#isAttributeRequired-detail">isAttributeRequired()</a></td> <td>Returns a value indicating whether the attribute is required.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="isAttributeSafe"> <td><a href="cmodel#isAttributeSafe-detail">isAttributeSafe()</a></td> <td>Returns a value indicating whether the attribute is safe for massive assignments.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="model"> <td><a href="cactiverecord#model-detail">model()</a></td> <td>Returns the static model of the specified AR class.</td> <td>CActiveRecord</td> </tr> <tr id="offsetExists"> <td><a href="cactiverecord#offsetExists-detail">offsetExists()</a></td> <td>Returns whether there is an element at the specified offset.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="offsetGet"> <td><a href="cmodel#offsetGet-detail">offsetGet()</a></td> <td>Returns the element at the specified offset.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="offsetSet"> <td><a href="cmodel#offsetSet-detail">offsetSet()</a></td> <td>Sets the element at the specified offset.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="offsetUnset"> <td><a href="cmodel#offsetUnset-detail">offsetUnset()</a></td> <td>Unsets the element at the specified offset.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="onAfterConstruct"> <td><a href="cmodel#onAfterConstruct-detail">onAfterConstruct()</a></td> <td>This event is raised after the model instance is created by new operator.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="onAfterDelete"> <td><a href="cactiverecord#onAfterDelete-detail">onAfterDelete()</a></td> <td>This event is raised after the record is deleted.</td> <td>CActiveRecord</td> </tr> <tr id="onAfterFind"> <td><a href="cactiverecord#onAfterFind-detail">onAfterFind()</a></td> <td>This event is raised after the record is instantiated by a find method.</td> <td>CActiveRecord</td> </tr> <tr id="onAfterSave"> <td><a href="cactiverecord#onAfterSave-detail">onAfterSave()</a></td> <td>This event is raised after the record is saved.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="onAfterValidate"> <td><a href="cmodel#onAfterValidate-detail">onAfterValidate()</a></td> <td>This event is raised after the validation is performed.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="onBeforeCount"> <td><a href="cactiverecord#onBeforeCount-detail">onBeforeCount()</a></td> <td>This event is raised before an AR finder performs a count call.</td> <td>CActiveRecord</td> </tr> <tr id="onBeforeDelete"> <td><a href="cactiverecord#onBeforeDelete-detail">onBeforeDelete()</a></td> <td>This event is raised before the record is deleted.</td> <td>CActiveRecord</td> </tr> <tr id="onBeforeFind"> <td><a href="cactiverecord#onBeforeFind-detail">onBeforeFind()</a></td> <td>This event is raised before an AR finder performs a find call.</td> <td>CActiveRecord</td> </tr> <tr id="onBeforeSave"> <td><a href="cactiverecord#onBeforeSave-detail">onBeforeSave()</a></td> <td>This event is raised before the record is saved.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="onBeforeValidate"> <td><a href="cmodel#onBeforeValidate-detail">onBeforeValidate()</a></td> <td>This event is raised before the validation is performed.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="onUnsafeAttribute"> <td><a href="cmodel#onUnsafeAttribute-detail">onUnsafeAttribute()</a></td> <td>This method is invoked when an unsafe attribute is being massively assigned.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="populateRecord"> <td><a href="cactiverecord#populateRecord-detail">populateRecord()</a></td> <td>Creates an active record with the given attributes.</td> <td>CActiveRecord</td> </tr> <tr id="populateRecords"> <td><a href="cactiverecord#populateRecords-detail">populateRecords()</a></td> <td>Creates a list of active records based on the input data.</td> <td>CActiveRecord</td> </tr> <tr id="primaryKey()"> <td><a href="cactiverecord#primaryKey()-detail">primaryKey()</a></td> <td>Returns the primary key of the associated database table.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="refresh"> <td><a href="cactiverecord#refresh-detail">refresh()</a></td> <td>Repopulates this active record with the latest data.</td> <td>CActiveRecord</td> </tr> <tr id="refreshMetaData"> <td><a href="cactiverecord#refreshMetaData-detail">refreshMetaData()</a></td> <td>Refreshes the meta data for this AR class.</td> <td>CActiveRecord</td> </tr> <tr id="relations"> <td><a href="cactiverecord#relations-detail">relations()</a></td> <td>This method should be overridden to declare related objects.</td> <td>CActiveRecord</td> </tr> <tr id="resetScope"> <td><a href="cactiverecord#resetScope-detail">resetScope()</a></td> <td>Resets all scopes and criterias applied.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="rules"> <td><a href="cmodel#rules-detail">rules()</a></td> <td>Returns the validation rules for attributes.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="save"> <td><a href="cactiverecord#save-detail">save()</a></td> <td>Saves the current record.</td> <td>CActiveRecord</td> </tr> <tr id="saveAttributes"> <td><a href="cactiverecord#saveAttributes-detail">saveAttributes()</a></td> <td>Saves a selected list of attributes.</td> <td>CActiveRecord</td> </tr> <tr id="saveCounters"> <td><a href="cactiverecord#saveCounters-detail">saveCounters()</a></td> <td>Saves one or several counter columns for the current AR object.</td> <td>CActiveRecord</td> </tr> <tr id="scopes"> <td><a href="cactiverecord#scopes-detail">scopes()</a></td> <td>Returns the declaration of named scopes.</td> <td>CActiveRecord</td> </tr> <tr id="setAttribute"> <td><a href="cactiverecord#setAttribute-detail">setAttribute()</a></td> <td>Sets the named attribute value.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="setAttributes"> <td><a href="cmodel#setAttributes-detail">setAttributes()</a></td> <td>Sets the attribute values in a massive way.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="setDbCriteria"> <td><a href="cactiverecord#setDbCriteria-detail">setDbCriteria()</a></td> <td>Sets the query criteria for the current model.</td> <td>CActiveRecord</td> </tr> <tr id="setIsNewRecord"> <td><a href="cactiverecord#setIsNewRecord-detail">setIsNewRecord()</a></td> <td>Sets if the record is new.</td> <td>CActiveRecord</td> </tr> <tr id="setOldPrimaryKey"> <td><a href="cactiverecord#setOldPrimaryKey-detail">setOldPrimaryKey()</a></td> <td>Sets the old primary key value.</td> <td>CActiveRecord</td> </tr> <tr id="setPrimaryKey"> <td><a href="cactiverecord#setPrimaryKey-detail">setPrimaryKey()</a></td> <td>Sets the primary key value.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="setScenario"> <td><a href="cmodel#setScenario-detail">setScenario()</a></td> <td>Sets the scenario for the model.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="setTableAlias"> <td><a href="cactiverecord#setTableAlias-detail">setTableAlias()</a></td> <td>Sets the table alias to be used in queries.</td> <td>CActiveRecord</td> </tr> <tr id="tableName"> <td><a href="cactiverecord#tableName-detail">tableName()</a></td> <td>Returns the name of the associated database table.</td> <td>CActiveRecord</td> </tr> <tr id="together"> <td><a href="cactiverecord#together-detail">together()</a></td> <td>Sets <a href="cdbcriteria#together">CDbCriteria::together</a> property to be true.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="unsetAttributes"> <td><a href="cmodel#unsetAttributes-detail">unsetAttributes()</a></td> <td>Sets the attributes to be null.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="update"> <td><a href="cactiverecord#update-detail">update()</a></td> <td>Updates the row represented by this active record.</td> <td>CActiveRecord</td> </tr> <tr id="updateAll"> <td><a href="cactiverecord#updateAll-detail">updateAll()</a></td> <td>Updates records with the specified condition.</td> <td>CActiveRecord</td> </tr> <tr id="updateByPk"> <td><a href="cactiverecord#updateByPk-detail">updateByPk()</a></td> <td>Updates records with the specified primary key(s).</td> <td>CActiveRecord</td> </tr> <tr id="updateCounters"> <td><a href="cactiverecord#updateCounters-detail">updateCounters()</a></td> <td>Updates one or several counter columns.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="validate"> <td><a href="cmodel#validate-detail">validate()</a></td> <td>Performs the validation.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="with"> <td><a href="cactiverecord#with-detail">with()</a></td> <td>Specifies which related objects should be eagerly loaded.</td> <td>CActiveRecord</td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="afterConstruct"> <td><a href="cmodel#afterConstruct-detail">afterConstruct()</a></td> <td>This method is invoked after a model instance is created by new operator.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="afterDelete"> <td><a href="cactiverecord#afterDelete-detail">afterDelete()</a></td> <td>This method is invoked after deleting a record.</td> <td>CActiveRecord</td> </tr> <tr id="afterFind"> <td><a href="cactiverecord#afterFind-detail">afterFind()</a></td> <td>This method is invoked after each record is instantiated by a find method.</td> <td>CActiveRecord</td> </tr> <tr id="afterSave"> <td><a href="cactiverecord#afterSave-detail">afterSave()</a></td> <td>This method is invoked after saving a record successfully.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="afterValidate"> <td><a href="cmodel#afterValidate-detail">afterValidate()</a></td> <td>This method is invoked after validation ends.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="beforeCount"> <td><a href="cactiverecord#beforeCount-detail">beforeCount()</a></td> <td>This method is invoked before an AR finder executes a count call.</td> <td>CActiveRecord</td> </tr> <tr id="beforeDelete"> <td><a href="cactiverecord#beforeDelete-detail">beforeDelete()</a></td> <td>This method is invoked before deleting a record.</td> <td>CActiveRecord</td> </tr> <tr id="beforeFind"> <td><a href="cactiverecord#beforeFind-detail">beforeFind()</a></td> <td>This method is invoked before an AR finder executes a find call.</td> <td>CActiveRecord</td> </tr> <tr id="beforeSave"> <td><a href="cactiverecord#beforeSave-detail">beforeSave()</a></td> <td>This method is invoked before saving a record (after validation, if any).</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="beforeValidate"> <td><a href="cmodel#beforeValidate-detail">beforeValidate()</a></td> <td>This method is invoked before validation starts.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr id="instantiate"> <td><a href="cactiverecord#instantiate-detail">instantiate()</a></td> <td>Creates an active record instance.</td> <td>CActiveRecord</td> </tr> <tr id="query"> <td><a href="cactiverecord#query-detail">query()</a></td> <td>Performs the actual DB query and populates the AR objects with the query result.</td> <td>CActiveRecord</td> </tr> </table> </div>  <div class="summary docEvent"> <h2>Events</h2>  <table class="summaryTable"> <colgroup> <col class="col-event"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Event</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="onBeforeSave"> <td><a href="cactiverecord#onBeforeSave-detail">onBeforeSave</a></td> <td>This event is raised before the record is saved.</td> <td>CActiveRecord</td> </tr> <tr id="onAfterSave"> <td><a href="cactiverecord#onAfterSave-detail">onAfterSave</a></td> <td>This event is raised after the record is saved.</td> <td>CActiveRecord</td> </tr> <tr id="onBeforeDelete"> <td><a href="cactiverecord#onBeforeDelete-detail">onBeforeDelete</a></td> <td>This event is raised before the record is deleted.</td> <td>CActiveRecord</td> </tr> <tr id="onAfterDelete"> <td><a href="cactiverecord#onAfterDelete-detail">onAfterDelete</a></td> <td>This event is raised after the record is deleted.</td> <td>CActiveRecord</td> </tr> <tr id="onBeforeFind"> <td><a href="cactiverecord#onBeforeFind-detail">onBeforeFind</a></td> <td>This event is raised before an AR finder performs a find call.</td> <td>CActiveRecord</td> </tr> <tr id="onAfterFind"> <td><a href="cactiverecord#onAfterFind-detail">onAfterFind</a></td> <td>This event is raised after the record is instantiated by a find method.</td> <td>CActiveRecord</td> </tr> <tr id="onBeforeCount"> <td><a href="cactiverecord#onBeforeCount-detail">onBeforeCount</a></td> <td>This event is raised before an AR finder performs a count call.</td> <td>CActiveRecord</td> </tr> <tr class="inherited" id="onAfterConstruct"> <td><a href="cmodel#onAfterConstruct-detail">onAfterConstruct</a></td> <td>This event is raised after the model instance is created by new operator.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="onBeforeValidate"> <td><a href="cmodel#onBeforeValidate-detail">onBeforeValidate</a></td> <td>This event is raised before the validation is performed.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="onAfterValidate"> <td><a href="cmodel#onAfterValidate-detail">onAfterValidate</a></td> <td>This event is raised after the validation is performed.</td> <td><a href="cmodel">CModel</a></td> </tr> <tr class="inherited" id="onUnsafeAttribute"> <td><a href="cmodel#onUnsafeAttribute-detail">onUnsafeAttribute</a></td> <td>This method is invoked when an unsafe attribute is being massively assigned.</td> <td><a href="cmodel">CModel</a></td> </tr> </table> </div> <h2>Property Details</h2> <h3 class="detailHeader" id="attributes-detail"> attributes<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <a href="cactiverecord#getAttributes"><b>getAttributes</b></a>(mixed $names=true)<br>public void <a href="cactiverecord#setAttributes"><b>setAttributes</b></a>(array $values, boolean $safeOnly=true)</pre> <p>Returns all column attribute values. Note, related objects are not returned.</p> <h3 class="detailHeader" id="commandBuilder-detail"> commandBuilder<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public <a href="cdbcommandbuilder">CDbCommandBuilder</a> <a href="cactiverecord#getCommandBuilder"><b>getCommandBuilder</b></a>()</pre> <p>Returns the command builder used by this AR.</p> <h3 class="detailHeader" id="db-detail"> db<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public static <a href="cdbconnection">CDbConnection</a> <b>$db</b>;</pre> <p>the default database connection for all active record classes. By default, this is the 'db' application component.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#getDbConnection">getDbConnection</a></li> </ul> </div> <h3 class="detailHeader" id="dbConnection-detail"> dbConnection<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public <a href="cdbconnection">CDbConnection</a> <a href="cactiverecord#getDbConnection"><b>getDbConnection</b></a>()</pre> <p>Returns the database connection used by active record. By default, the "db" application component is used as the database connection. You may override this method if you want to use a different database connection.</p> <h3 class="detailHeader" id="dbCriteria-detail"> dbCriteria<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public <a href="cdbcriteria">CDbCriteria</a> <a href="cactiverecord#getDbCriteria"><b>getDbCriteria</b></a>(boolean $createIfNull=true)<br>public void <a href="cactiverecord#setDbCriteria"><b>setDbCriteria</b></a>(<a href="cdbcriteria">CDbCriteria</a> $criteria)</pre> <p>Returns the query criteria associated with this model.</p> <h3 class="detailHeader" id="isNewRecord-detail"> isNewRecord<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <a href="cactiverecord#getIsNewRecord"><b>getIsNewRecord</b></a>()<br>public void <a href="cactiverecord#setIsNewRecord"><b>setIsNewRecord</b></a>(boolean $value)</pre> <p>Returns if the current record is new (was never saved to database)</p> <h3 class="detailHeader" id="metaData-detail"> metaData<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public <a href="cactiverecordmetadata">CActiveRecordMetaData</a> <a href="cactiverecord#getMetaData"><b>getMetaData</b></a>()</pre> <p>Returns the meta-data for this AR</p> <h3 class="detailHeader" id="oldPrimaryKey-detail"> oldPrimaryKey<span class="detailHeaderTag"> property (available since v1.1.0) </span> </h3> <pre class="signature">public mixed <a href="cactiverecord#getOldPrimaryKey"><b>getOldPrimaryKey</b></a>()<br>public void <a href="cactiverecord#setOldPrimaryKey"><b>setOldPrimaryKey</b></a>(mixed $value)</pre> <p>Returns the old primary key value. This refers to the primary key value that is populated into the record after executing a find method (e.g. find(), findAll()). The value remains unchanged even if the primary key attribute is manually assigned with a different value.</p> <h3 class="detailHeader" id="primaryKey-detail"> primaryKey<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public mixed <a href="cactiverecord#getPrimaryKey"><b>getPrimaryKey</b></a>()<br>public void <a href="cactiverecord#setPrimaryKey"><b>setPrimaryKey</b></a>(mixed $value)</pre> <p>Returns the primary key value.</p> <h3 class="detailHeader" id="tableAlias-detail"> tableAlias<span class="detailHeaderTag"> property (available since v1.1.1) </span> </h3> <pre class="signature">public string <a href="cactiverecord#getTableAlias"><b>getTableAlias</b></a>(boolean $quote=false, boolean $checkScopes=true)<br>public void <a href="cactiverecord#setTableAlias"><b>setTableAlias</b></a>(string $alias)</pre> <p>Returns the table alias to be used by the find methods. In relational queries, the returned table alias may vary according to the corresponding relation declaration. Also, the default table alias set by <a href="cactiverecord#setTableAlias">setTableAlias</a> may be overridden by the applied scopes.</p> <h3 class="detailHeader" id="tableSchema-detail"> tableSchema<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public <a href="cdbtableschema">CDbTableSchema</a> <a href="cactiverecord#getTableSchema"><b>getTableSchema</b></a>()</pre> <p>Returns the metadata of the table that this AR belongs to</p> <h2>Method Details</h2> <h3 class="detailHeader" id="__call-detail"> __call() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>__call</b>(string $name, array $parameters)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the method name</td> </tr> <tr> <td class="paramNameCol">$parameters</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">method parameters</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the method return value</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L212">framework/db/ar/CActiveRecord.php#212</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__call</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">)<br>{<br>    if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>    {<br>        if(empty(</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">))<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRelated</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br>        else<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRelated</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">false</span><span style="color: #007700">,</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br>    }<br><br>    </span><span style="color: #0000BB">$scopes</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">();<br>    if(isset(</span><span style="color: #0000BB">$scopes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbCriteria</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">mergeWith</span><span style="color: #007700">(</span><span style="color: #0000BB">$scopes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]);<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>    }<br><br>    return </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__call</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Calls the named method which is not a class method. Do not call this method. This is a PHP magic method that we override to implement the named scope feature.</p> <h3 class="detailHeader" id="__construct-detail"> __construct() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__construct</b>(string $scenario='insert')</pre> </td></tr> <tr> <td class="paramNameCol">$scenario</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">scenario name. See <a href="cmodel#scenario">CModel::scenario</a> for more details about this parameter. Note: in order to setup initial model parameters use <a href="cactiverecord#init">init()</a> or <a href="cactiverecord#afterConstruct">afterConstruct()</a>. Do NOT override the constructor unless it is absolutely necessary!</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L72">framework/db/ar/CActiveRecord.php#72</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$scenario</span><span style="color: #007700">=</span><span style="color: #DD0000">'insert'</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$scenario</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">) </span><span style="color: #FF8000">// internally used by populateRecord() and model()<br>        </span><span style="color: #007700">return;<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setScenario</span><span style="color: #007700">(</span><span style="color: #0000BB">$scenario</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setIsNewRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">attributeDefaults</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attachBehaviors</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">behaviors</span><span style="color: #007700">());<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterConstruct</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Constructor.</p> <h3 class="detailHeader" id="__get-detail"> __get() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>__get</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">property name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">property value</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L134">framework/db/ar/CActiveRecord.php#134</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__get</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">columns</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRelated</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>    else<br>        return </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__get</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div> <p>PHP getter magic method. This method is overridden so that AR attributes can be accessed like properties.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#getAttribute">getAttribute</a></li> </ul> </div> <h3 class="detailHeader" id="__isset-detail"> __isset() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>__isset</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the property name or the event name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the property value is null</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L173">framework/db/ar/CActiveRecord.php#173</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__isset</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">columns</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRelated</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)!==</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>    else<br>        return </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__isset</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Checks if a property value is null. This method overrides the parent implementation by checking if the named attribute is null or not.</p> <h3 class="detailHeader" id="__set-detail"> __set() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__set</b>(string $name, mixed $value)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">property name</td> </tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">property value</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L155">framework/db/ar/CActiveRecord.php#155</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__set</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">)===</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>    {<br>        if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>        else<br>            </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__set</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>PHP setter magic method. This method is overridden so that AR attributes can be accessed like properties.</p> <h3 class="detailHeader" id="__sleep-detail"> __sleep() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>__sleep</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol"></td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L122">framework/db/ar/CActiveRecord.php#122</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__sleep</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">array_keys</span><span style="color: #007700">((array)</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>}</span></pre> </div> <p>PHP sleep magic method. This method ensures that the model meta data reference is set to null.</p> <h3 class="detailHeader" id="__unset-detail"> __unset() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__unset</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the property name or the event name</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L194">framework/db/ar/CActiveRecord.php#194</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__unset</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">columns</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        unset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]);<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        unset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]);<br>    else<br>        </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__unset</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Sets a component property to be null. This method overrides the parent implementation by clearing the specified attribute value.</p> <h3 class="detailHeader" id="addRelatedRecord-detail"> addRelatedRecord() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>addRelatedRecord</b>(string $name, mixed $record, mixed $index)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">attribute name</td> </tr> <tr> <td class="paramNameCol">$record</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the related record</td> </tr> <tr> <td class="paramNameCol">$index</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the index value in the related object collection. If true, it means using zero-based integer index. If false, it means a HAS_ONE or BELONGS_TO object and no index is needed.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L732">framework/db/ar/CActiveRecord.php#732</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">addRelatedRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$record</span><span style="color: #007700">,</span><span style="color: #0000BB">$index</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$index</span><span style="color: #007700">!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>    {<br>        if(!isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=array();<br>        if(</span><span style="color: #0000BB">$record </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CActiveRecord</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">$index</span><span style="color: #007700">===</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][]=</span><span style="color: #0000BB">$record</span><span style="color: #007700">;<br>            else<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][</span><span style="color: #0000BB">$index</span><span style="color: #007700">]=</span><span style="color: #0000BB">$record</span><span style="color: #007700">;<br>        }<br>    }<br>    elseif(!isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$record</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Do not call this method. This method is used internally by <a href="cactivefinder">CActiveFinder</a> to populate related objects. This method adds a related object to this record.</p> <h3 class="detailHeader" id="afterDelete-detail"> afterDelete() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>afterDelete</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L992">framework/db/ar/CActiveRecord.php#992</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">afterDelete</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasEventHandler</span><span style="color: #007700">(</span><span style="color: #DD0000">'onAfterDelete'</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">onAfterDelete</span><span style="color: #007700">(new </span><span style="color: #0000BB">CEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">));<br>}</span></pre> </div> <p>This method is invoked after deleting a record. The default implementation raises the <a href="cactiverecord#onAfterDelete">onAfterDelete</a> event. You may override this method to do postprocessing after the record is deleted. Make sure you call the parent implementation so that the event is raised properly.</p> <h3 class="detailHeader" id="afterFind-detail"> afterFind() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>afterFind</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1037">framework/db/ar/CActiveRecord.php#1037</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">afterFind</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasEventHandler</span><span style="color: #007700">(</span><span style="color: #DD0000">'onAfterFind'</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">onAfterFind</span><span style="color: #007700">(new </span><span style="color: #0000BB">CEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">));<br>}</span></pre> </div> <p>This method is invoked after each record is instantiated by a find method. The default implementation raises the <a href="cactiverecord#onAfterFind">onAfterFind</a> event. You may override this method to do postprocessing after each newly found record is instantiated. Make sure you call the parent implementation so that the event is raised properly.</p> <h3 class="detailHeader" id="afterFindInternal-detail"> afterFindInternal() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>afterFindInternal</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1056">framework/db/ar/CActiveRecord.php#1056</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">afterFindInternal</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterFind</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Calls <a href="cactiverecord#afterFind">afterFind</a>. This method is internally used.</p> <h3 class="detailHeader" id="afterSave-detail"> afterSave() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>afterSave</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L961">framework/db/ar/CActiveRecord.php#961</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">afterSave</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasEventHandler</span><span style="color: #007700">(</span><span style="color: #DD0000">'onAfterSave'</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">onAfterSave</span><span style="color: #007700">(new </span><span style="color: #0000BB">CEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">));<br>}</span></pre> </div> <p>This method is invoked after saving a record successfully. The default implementation raises the <a href="cactiverecord#onAfterSave">onAfterSave</a> event. You may override this method to do postprocessing after record saving. Make sure you call the parent implementation so that the event is raised properly.</p> <h3 class="detailHeader" id="applyScopes-detail"> applyScopes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>applyScopes</b>(<a href="cdbcriteria">CDbCriteria</a> &amp;$criteria)</pre> </td></tr> <tr> <td class="paramNameCol">$criteria</td> <td class="paramTypeCol"><a href="cdbcriteria">CDbCriteria</a></td> <td class="paramDescCol">the query criteria. This parameter may be modified by merging <a href="cactiverecord#dbCriteria">dbCriteria</a>.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1374">framework/db/ar/CActiveRecord.php#1374</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">applyScopes</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)<br>{<br>    if(!empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$scs</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$c</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbCriteria</span><span style="color: #007700">();<br>        foreach((array)</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes </span><span style="color: #007700">as </span><span style="color: #0000BB">$k</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">is_integer</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">))<br>            {<br>                if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">))<br>                {<br>                    if(isset(</span><span style="color: #0000BB">$scs</span><span style="color: #007700">[</span><span style="color: #0000BB">$v</span><span style="color: #007700">]))<br>                    {<br>                        </span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mergeWith</span><span style="color: #007700">(</span><span style="color: #0000BB">$scs</span><span style="color: #007700">[</span><span style="color: #0000BB">$v</span><span style="color: #007700">],</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>                        continue;<br>                    }<br>                    </span><span style="color: #0000BB">$scope</span><span style="color: #007700">=</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br>                    </span><span style="color: #0000BB">$params</span><span style="color: #007700">=array();<br>                }<br>                elseif(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">))<br>                {<br>                    </span><span style="color: #0000BB">$scope</span><span style="color: #007700">=</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">);<br>                    </span><span style="color: #0000BB">$params</span><span style="color: #007700">=</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">);<br>                }<br>            }<br>            elseif(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">))<br>            {<br>                </span><span style="color: #0000BB">$scope</span><span style="color: #007700">=</span><span style="color: #0000BB">$k</span><span style="color: #007700">;<br>                </span><span style="color: #0000BB">$params</span><span style="color: #007700">=</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br>            }<br><br>            </span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$scope</span><span style="color: #007700">),(array)</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>        }<br>    }<br><br>    if(isset(</span><span style="color: #0000BB">$c</span><span style="color: #007700">) || (</span><span style="color: #0000BB">$c</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mergeWith</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$c</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">resetScope</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Applies the query scopes to the given criteria. This method merges <a href="cactiverecord#dbCriteria">dbCriteria</a> with the given criteria parameter. It then resets <a href="cactiverecord#dbCriteria">dbCriteria</a> to be null.</p> <h3 class="detailHeader" id="attributeNames-detail"> attributeNames() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>attributeNames</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attribute names.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L586">framework/db/ar/CActiveRecord.php#586</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">attributeNames</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">columns</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the list of all attribute names of the model. This would return all column names of the table associated with this AR class.</p> <h3 class="detailHeader" id="beforeCount-detail"> beforeCount() <span class="detailHeaderTag"> method (available since v1.1.14) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>beforeCount</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1025">framework/db/ar/CActiveRecord.php#1025</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">beforeCount</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasEventHandler</span><span style="color: #007700">(</span><span style="color: #DD0000">'onBeforeCount'</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">onBeforeCount</span><span style="color: #007700">(new </span><span style="color: #0000BB">CEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">));<br>}</span></pre> </div> <p>This method is invoked before an AR finder executes a count call. The count calls include <a href="cactiverecord#count">count</a> and <a href="cactiverecord#countByAttributes">countByAttributes</a> The default implementation raises the <a href="cactiverecord#onBeforeCount">onBeforeCount</a> event. If you override this method, make sure you call the parent implementation so that the event is raised properly.</p> <h3 class="detailHeader" id="beforeDelete-detail"> beforeDelete() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected boolean <b>beforeDelete</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the record should be deleted. Defaults to true.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L974">framework/db/ar/CActiveRecord.php#974</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">beforeDelete</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasEventHandler</span><span style="color: #007700">(</span><span style="color: #DD0000">'onBeforeDelete'</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$event</span><span style="color: #007700">=new </span><span style="color: #0000BB">CModelEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">onBeforeDelete</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}</span></pre> </div> <p>This method is invoked before deleting a record. The default implementation raises the <a href="cactiverecord#onBeforeDelete">onBeforeDelete</a> event. You may override this method to do any preparation work for record deletion. Make sure you call the parent implementation so that the event is raised properly.</p> <h3 class="detailHeader" id="beforeFind-detail"> beforeFind() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>beforeFind</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1008">framework/db/ar/CActiveRecord.php#1008</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">beforeFind</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasEventHandler</span><span style="color: #007700">(</span><span style="color: #DD0000">'onBeforeFind'</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$event</span><span style="color: #007700">=new </span><span style="color: #0000BB">CModelEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">onBeforeFind</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>This method is invoked before an AR finder executes a find call. The find calls include <a href="cactiverecord#find">find</a>, <a href="cactiverecord#findAll">findAll</a>, <a href="cactiverecord#findByPk">findByPk</a>, <a href="cactiverecord#findAllByPk">findAllByPk</a>, <a href="cactiverecord#findByAttributes">findByAttributes</a>, <a href="cactiverecord#findAllByAttributes">findAllByAttributes</a>, <a href="cactiverecord#findBySql">findBySql</a> and <a href="cactiverecord#findAllBySql">findAllBySql</a>. The default implementation raises the <a href="cactiverecord#onBeforeFind">onBeforeFind</a> event. If you override this method, make sure you call the parent implementation so that the event is raised properly. For details on modifying query criteria see <a href="cactiverecord#onBeforeFind">onBeforeFind</a> event.</p> <h3 class="detailHeader" id="beforeFindInternal-detail"> beforeFindInternal() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>beforeFindInternal</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1047">framework/db/ar/CActiveRecord.php#1047</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">beforeFindInternal</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeFind</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Calls <a href="cactiverecord#beforeFind">beforeFind</a>. This method is internally used.</p> <h3 class="detailHeader" id="beforeSave-detail"> beforeSave() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected boolean <b>beforeSave</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the saving should be executed. Defaults to true.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L943">framework/db/ar/CActiveRecord.php#943</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">beforeSave</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasEventHandler</span><span style="color: #007700">(</span><span style="color: #DD0000">'onBeforeSave'</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$event</span><span style="color: #007700">=new </span><span style="color: #0000BB">CModelEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">onBeforeSave</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}</span></pre> </div> <p>This method is invoked before saving a record (after validation, if any). The default implementation raises the <a href="cactiverecord#onBeforeSave">onBeforeSave</a> event. You may override this method to do any preparation work for record saving. Use <a href="cactiverecord#isNewRecord">isNewRecord</a> to determine whether the saving is for inserting or updating record. Make sure you call the parent implementation so that the event is raised properly.</p> <h3 class="detailHeader" id="cache-detail"> cache() <span class="detailHeaderTag"> method (available since v1.1.7) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>cache</b>(integer $duration, CCacheDependency|ICacheDependency $dependency=NULL, integer $queryCount=1)</pre> </td></tr> <tr> <td class="paramNameCol">$duration</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the number of seconds that query results may remain valid in cache. If this is 0, the caching will be disabled.</td> </tr> <tr> <td class="paramNameCol">$dependency</td> <td class="paramTypeCol">CCacheDependency|ICacheDependency</td> <td class="paramDescCol">the dependency that will be used when saving the query results into cache.</td> </tr> <tr> <td class="paramNameCol">$queryCount</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">number of SQL queries that need to be cached after calling this method. Defaults to 1, meaning that the next SQL query will be cached.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the active record instance itself.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L111">framework/db/ar/CActiveRecord.php#111</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">cache</span><span style="color: #007700">(</span><span style="color: #0000BB">$duration</span><span style="color: #007700">, </span><span style="color: #0000BB">$dependency</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">, </span><span style="color: #0000BB">$queryCount</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">cache</span><span style="color: #007700">(</span><span style="color: #0000BB">$duration</span><span style="color: #007700">, </span><span style="color: #0000BB">$dependency</span><span style="color: #007700">, </span><span style="color: #0000BB">$queryCount</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets the parameters about query caching. This is a shortcut method to <a href="cdbconnection#cache">CDbConnection::cache()</a>. It changes the query caching parameter of the <a href="cactiverecord#dbConnection">dbConnection</a> instance.</p> <h3 class="detailHeader" id="count-detail"> count() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>count</b>(mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the number of rows satisfying the specified query condition. Note: type is string to keep max. precision.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1600">framework/db/ar/CActiveRecord.php#1600</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.count()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeCount</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">applyScopes</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br><br>    if(empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCountCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">queryScalar</span><span style="color: #007700">();<br>    else<br>    {<br>        </span><span style="color: #0000BB">$finder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getActiveFinder</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Finds the number of rows satisfying the specified query condition. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="countByAttributes-detail"> countByAttributes() <span class="detailHeaderTag"> method (available since v1.1.4) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>countByAttributes</b>(array $attributes, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attribute values (indexed by attribute names) that the active records should match. An attribute value can be an array which will be used to generate an IN condition.</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the number of rows satisfying the specified query condition. Note: type is string to keep max. precision.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1627">framework/db/ar/CActiveRecord.php#1627</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">countByAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.countByAttributes()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #DD0000">'.'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeCount</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createColumnCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">,</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">applyScopes</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br><br>    if(empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCountCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">queryScalar</span><span style="color: #007700">();<br>    else<br>    {<br>        </span><span style="color: #0000BB">$finder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getActiveFinder</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Finds the number of rows that have the specified attribute values. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="countBySql-detail"> countBySql() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>countBySql</b>(string $sql, array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$sql</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the SQL statement</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to the SQL statement</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the number of rows using the given SQL statement. Note: type is string to keep max. precision.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1653">framework/db/ar/CActiveRecord.php#1653</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">countBySql</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.countBySql()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeCount</span><span style="color: #007700">();<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createSqlCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">queryScalar</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Finds the number of rows using the given SQL statement. This is equivalent to calling <a href="cdbcommand#queryScalar">CDbCommand::queryScalar</a> with the specified SQL statement and the parameters.</p> <h3 class="detailHeader" id="defaultScope-detail"> defaultScope() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>defaultScope</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the query criteria. This will be used as the parameter to the constructor of <a href="cdbcriteria">CDbCriteria</a>.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L353">framework/db/ar/CActiveRecord.php#353</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">defaultScope</span><span style="color: #007700">()<br>{<br>    return array();<br>}</span></pre> </div> <p>Returns the default named scope that should be implicitly applied to all queries for this model. Note, default scope only applies to SELECT queries. It is ignored for INSERT, UPDATE and DELETE queries. The default implementation simply returns an empty array. You may override this method if the model needs to be queried with some default criteria (e.g. only active records should be returned).</p> <h3 class="detailHeader" id="delete-detail"> delete() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>delete</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the deletion is successful.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1223">framework/db/ar/CActiveRecord.php#1223</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">delete</span><span style="color: #007700">()<br>{<br>    if(!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsNewRecord</span><span style="color: #007700">())<br>    {<br>        </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.delete()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeDelete</span><span style="color: #007700">())<br>        {<br>            </span><span style="color: #0000BB">$result</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">deleteByPk</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">())&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterDelete</span><span style="color: #007700">();<br>            return </span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br>        }<br>        else<br>            return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    }<br>    else<br>        throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The active record cannot be deleted because it is new.'</span><span style="color: #007700">));<br>}</span></pre> </div> <p>Deletes the row corresponding to this active record.</p> <h3 class="detailHeader" id="deleteAll-detail"> deleteAll() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>deleteAll</b>(mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the number of rows deleted</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1820">framework/db/ar/CActiveRecord.php#1820</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">deleteAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.deleteAll()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDeleteCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Deletes rows with the specified condition. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="deleteAllByAttributes-detail"> deleteAllByAttributes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>deleteAllByAttributes</b>(array $attributes, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attribute values (indexed by attribute names) that the active records should match. An attribute value can be an array which will be used to generate an IN condition.</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">number of rows affected by the execution.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1838">framework/db/ar/CActiveRecord.php#1838</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">deleteAllByAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.deleteAllByAttributes()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createColumnCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDeleteCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Deletes rows which match the specified attribute values. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="deleteByPk-detail"> deleteByPk() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>deleteByPk</b>(mixed $pk, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$pk</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">primary key value(s). Use array for multiple primary keys. For composite key, each key value must be an array (column name=&gt;column value).</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the number of rows deleted</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1804">framework/db/ar/CActiveRecord.php#1804</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">deleteByPk</span><span style="color: #007700">(</span><span style="color: #0000BB">$pk</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.deleteByPk()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createPkCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$pk</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDeleteCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Deletes rows with the specified primary key. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="equals-detail"> equals() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>equals</b>(CActiveRecord $record)</pre> </td></tr> <tr> <td class="paramNameCol">$record</td> <td class="paramTypeCol">CActiveRecord</td> <td class="paramDescCol">record to compare to</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the two active records refer to the same row in the database table.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1271">framework/db/ar/CActiveRecord.php#1271</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">equals</span><span style="color: #007700">(</span><span style="color: #0000BB">$record</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableName</span><span style="color: #007700">()===</span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableName</span><span style="color: #007700">() &amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">()===</span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Compares current active record with another one. The comparison is made by comparing table name and the primary key values of the two active records.</p> <h3 class="detailHeader" id="exists-detail"> exists() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>exists</b>(mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether there is row satisfying the specified condition.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1667">framework/db/ar/CActiveRecord.php#1667</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.exists()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">=</span><span style="color: #DD0000">'1'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">applyScopes</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br><br>    if(empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createFindCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">, </span><span style="color: #0000BB">false</span><span style="color: #007700">))-&gt;</span><span style="color: #0000BB">queryRow</span><span style="color: #007700">()!==</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    else<br>    {<br>        </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">=</span><span style="color: #DD0000">'*'</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$finder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getActiveFinder</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>    }<br>}</span></pre> </div> <p>Checks whether there is row satisfying the specified condition. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="find-detail"> find() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>find</b>(mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria. If a string, it is treated as query condition (the WHERE clause); If an array, it is treated as the initial values for constructing a <a href="cdbcriteria">CDbCriteria</a> object; Otherwise, it should be an instance of <a href="cdbcriteria">CDbCriteria</a>.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement. This is only used when the first parameter is a string (query condition). In other cases, please use <a href="cdbcriteria#params">CDbCriteria::params</a> to set parameters.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the record found. Null if no record is found.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1460">framework/db/ar/CActiveRecord.php#1460</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">find</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.find()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Finds a single active record with the specified condition.</p> <h3 class="detailHeader" id="findAll-detail"> findAll() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static[] <b>findAll</b>(mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static[]</td> <td class="paramDescCol">list of active records satisfying the specified condition. An empty array is returned if none is found.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1474">framework/db/ar/CActiveRecord.php#1474</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">findAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.findAll()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Finds all active records satisfying the specified condition. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="findAllByAttributes-detail"> findAllByAttributes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static[] <b>findAllByAttributes</b>(array $attributes, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attribute values (indexed by attribute names) that the active records should match. An attribute value can be an array which will be used to generate an IN condition.</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static[]</td> <td class="paramDescCol">the records found. An empty array is returned if none is found.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1539">framework/db/ar/CActiveRecord.php#1539</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">findAllByAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.findAllByAttributes()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #DD0000">'.'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createColumnCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">,</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Finds all active records that have the specified attribute values. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="findAllByPk-detail"> findAllByPk() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static[] <b>findAllByPk</b>(mixed $pk, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$pk</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">primary key value(s). Use array for multiple primary keys. For composite key, each key value must be an array (column name=&gt;column value).</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static[]</td> <td class="paramDescCol">the records found. An empty array is returned if none is found.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1505">framework/db/ar/CActiveRecord.php#1505</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">findAllByPk</span><span style="color: #007700">(</span><span style="color: #0000BB">$pk</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.findAllByPk()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #DD0000">'.'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createPkCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$pk</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">,</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Finds all active records with the specified primary keys. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="findAllBySql-detail"> findAllBySql() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static[] <b>findAllBySql</b>(string $sql, array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$sql</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the SQL statement</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to the SQL statement</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static[]</td> <td class="paramDescCol">the records found. An empty array is returned if none is found.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1576">framework/db/ar/CActiveRecord.php#1576</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">findAllBySql</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.findAllBySql()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeFind</span><span style="color: #007700">();<br>    if((</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; !empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">resetScope</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$finder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getActiveFinder</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findAllBySql</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createSqlCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">populateRecords</span><span style="color: #007700">(</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryAll</span><span style="color: #007700">());<br>    }<br>}</span></pre> </div> <p>Finds all active records using the specified SQL statement.</p> <h3 class="detailHeader" id="findByAttributes-detail"> findByAttributes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>findByAttributes</b>(array $attributes, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attribute values (indexed by attribute names) that the active records should match. An attribute value can be an array which will be used to generate an IN condition.</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the record found. Null if none is found.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1522">framework/db/ar/CActiveRecord.php#1522</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">findByAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.findByAttributes()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #DD0000">'.'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createColumnCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">,</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Finds a single active record that has the specified attribute values. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="findByPk-detail"> findByPk() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>findByPk</b>(mixed $pk, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$pk</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">primary key value(s). Use array for multiple primary keys. For composite key, each key value must be an array (column name=&gt;column value).</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the record found. Null if none is found.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1489">framework/db/ar/CActiveRecord.php#1489</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">findByPk</span><span style="color: #007700">(</span><span style="color: #0000BB">$pk</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.findByPk()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #DD0000">'.'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createPkCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$pk</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">,</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Finds a single active record with the specified primary key. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <h3 class="detailHeader" id="findBySql-detail"> findBySql() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>findBySql</b>(string $sql, array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$sql</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the SQL statement</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to the SQL statement</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the record found. Null if none is found.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1553">framework/db/ar/CActiveRecord.php#1553</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">findBySql</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.findBySql()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeFind</span><span style="color: #007700">();<br>    if((</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; !empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">resetScope</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$finder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getActiveFinder</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findBySql</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createSqlCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">populateRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryRow</span><span style="color: #007700">());<br>    }<br>}</span></pre> </div> <p>Finds a single active record with the specified SQL statement.</p> <h3 class="detailHeader" id="getActiveFinder-detail"> getActiveFinder() <span class="detailHeaderTag"> method (available since v1.1.14) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cactivefinder">CActiveFinder</a> <b>getActiveFinder</b>(mixed $with)</pre> </td></tr> <tr> <td class="paramNameCol">$with</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the relation names to be actively looked for</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cactivefinder">CActiveFinder</a></td> <td class="paramDescCol">active finder for the operation</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L913">framework/db/ar/CActiveRecord.php#913</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getActiveFinder</span><span style="color: #007700">(</span><span style="color: #0000BB">$with</span><span style="color: #007700">)<br>{<br>    return new </span><span style="color: #0000BB">CActiveFinder</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$with</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Given 'with' options returns a new active finder instance.</p> <h3 class="detailHeader" id="getActiveRelation-detail"> getActiveRelation() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cactiverelation">CActiveRelation</a> <b>getActiveRelation</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the relation name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cactiverelation">CActiveRelation</a></td> <td class="paramDescCol">the named relation declared for this AR class. Null if the relation does not exist.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L652">framework/db/ar/CActiveRecord.php#652</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getActiveRelation</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    return isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]) ? </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">] : </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the named relation declared for this AR class.</p> <h3 class="detailHeader" id="getAttribute-detail"> getAttribute() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getAttribute</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the attribute name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the attribute value. Null if the attribute is not set or does not exist.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L696">framework/db/ar/CActiveRecord.php#696</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">property_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br>}</span></pre> </div> <p>Returns the named attribute value. If this is a new record and the attribute is not set before, the default column value will be returned. If this record is the result of a query and the attribute is not loaded, null will be returned. You may also use $this-&gt;AttributeName to obtain the attribute value.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#hasAttribute">hasAttribute</a></li> </ul> </div> <h3 class="detailHeader" id="getAttributeLabel-detail"> getAttributeLabel() <span class="detailHeaderTag"> method (available since v1.1.4) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getAttributeLabel</b>(string $attribute)</pre> </td></tr> <tr> <td class="paramNameCol">$attribute</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the attribute name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the attribute label</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L602">framework/db/ar/CActiveRecord.php#602</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getAttributeLabel</span><span style="color: #007700">(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$labels</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributeLabels</span><span style="color: #007700">();<br>    if(isset(</span><span style="color: #0000BB">$labels</span><span style="color: #007700">[</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">$labels</span><span style="color: #007700">[</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">];<br>    elseif(</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,</span><span style="color: #DD0000">'.'</span><span style="color: #007700">)!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$segs</span><span style="color: #007700">=</span><span style="color: #0000BB">explode</span><span style="color: #007700">(</span><span style="color: #DD0000">'.'</span><span style="color: #007700">,</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">array_pop</span><span style="color: #007700">(</span><span style="color: #0000BB">$segs</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$model</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>        foreach(</span><span style="color: #0000BB">$segs </span><span style="color: #007700">as </span><span style="color: #0000BB">$seg</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$relations</span><span style="color: #007700">=</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">;<br>            if(isset(</span><span style="color: #0000BB">$relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$seg</span><span style="color: #007700">]))<br>                </span><span style="color: #0000BB">$model</span><span style="color: #007700">=</span><span style="color: #0000BB">CActiveRecord</span><span style="color: #007700">::</span><span style="color: #0000BB">model</span><span style="color: #007700">(</span><span style="color: #0000BB">$relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$seg</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">className</span><span style="color: #007700">);<br>            else<br>                break;<br>        }<br>        return </span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttributeLabel</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>    }<br>    else<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generateAttributeLabel</span><span style="color: #007700">(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the text label for the specified attribute. This method overrides the parent implementation by supporting returning the label defined in relational object. In particular, if the attribute name is in the form of "post.author.name", then this method will derive the label from the "author" relation's "name" attribute.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#generateAttributeLabel">generateAttributeLabel</a></li> </ul> </div> <h3 class="detailHeader" id="getAttributes-detail"> getAttributes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>getAttributes</b>(mixed $names=true)</pre> </td></tr> <tr> <td class="paramNameCol">$names</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">names of attributes whose value needs to be returned. If this is true (default), then all attribute values will be returned, including those that are not loaded from DB (null will be returned for those attributes). If this is null, all attributes except those that are not loaded from DB will be returned.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">attribute values indexed by attribute names.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L759">framework/db/ar/CActiveRecord.php#759</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$names</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">;<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">columns </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$column</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">property_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$names</span><span style="color: #007700">===</span><span style="color: #0000BB">true </span><span style="color: #007700">&amp;&amp; !isset(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>            </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>    }<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$names</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$attrs</span><span style="color: #007700">=array();<br>        foreach(</span><span style="color: #0000BB">$names </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">property_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>                </span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>            else<br>                </span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=isset(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">])?</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]:</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>        }<br>        return </span><span style="color: #0000BB">$attrs</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns all column attribute values. Note, related objects are not returned.</p> <h3 class="detailHeader" id="getCommandBuilder-detail"> getCommandBuilder() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbcommandbuilder">CDbCommandBuilder</a> <b>getCommandBuilder</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbcommandbuilder">CDbCommandBuilder</a></td> <td class="paramDescCol">the command builder used by this AR</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L670">framework/db/ar/CActiveRecord.php#670</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Returns the command builder used by this AR.</p> <h3 class="detailHeader" id="getDbConnection-detail"> getDbConnection() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbconnection">CDbConnection</a> <b>getDbConnection</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbconnection">CDbConnection</a></td> <td class="paramDescCol">the database connection used by active record.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L633">framework/db/ar/CActiveRecord.php#633</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$db</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$db</span><span style="color: #007700">;<br>    else<br>    {<br>        </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$db</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getDb</span><span style="color: #007700">();<br>        if(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$db </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CDbConnection</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$db</span><span style="color: #007700">;<br>        else<br>            throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Active Record requires a "db" CDbConnection application component.'</span><span style="color: #007700">));<br>    }<br>}</span></pre> </div> <p>Returns the database connection used by active record. By default, the "db" application component is used as the database connection. You may override this method if you want to use a different database connection.</p> <h3 class="detailHeader" id="getDbCriteria-detail"> getDbCriteria() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbcriteria">CDbCriteria</a> <b>getDbCriteria</b>(boolean $createIfNull=true)</pre> </td></tr> <tr> <td class="paramNameCol">$createIfNull</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to create a criteria instance if it does not exist. Defaults to true.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbcriteria">CDbCriteria</a></td> <td class="paramDescCol">the query criteria that is associated with this model. This criteria is mainly used by <a href="cactiverecord#scopes">named scope</a> feature to accumulate different criteria specifications.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L325">framework/db/ar/CActiveRecord.php#325</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getDbCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$createIfNull</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_c</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        if((</span><span style="color: #0000BB">$c</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">defaultScope</span><span style="color: #007700">())!==array() || </span><span style="color: #0000BB">$createIfNull</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_c</span><span style="color: #007700">=new </span><span style="color: #0000BB">CDbCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_c</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the query criteria associated with this model.</p> <h3 class="detailHeader" id="getIsNewRecord-detail"> getIsNewRecord() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>getIsNewRecord</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the record is new and should be inserted when calling <a href="cactiverecord#save">save</a>. This property is automatically set in constructor and <a href="cactiverecord#populateRecord">populateRecord</a> and is set to false right after inserting record to database. Defaults to false, but it will be set to true if the instance is created using the new operator.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L824">framework/db/ar/CActiveRecord.php#824</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getIsNewRecord</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_new</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns if the current record is new (was never saved to database)</p> <h3 class="detailHeader" id="getMetaData-detail"> getMetaData() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cactiverecordmetadata">CActiveRecordMetaData</a> <b>getMetaData</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cactiverecordmetadata">CActiveRecordMetaData</a></td> <td class="paramDescCol">the meta for this AR class.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L407">framework/db/ar/CActiveRecord.php#407</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$className</span><span style="color: #007700">=</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>    if(!</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">,</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$_md</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$_md</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">]=</span><span style="color: #0000BB">null</span><span style="color: #007700">; </span><span style="color: #FF8000">// preventing recursive invokes of {@link getMetaData()} via {@link __get()}<br>        </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$_md</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">]=new </span><span style="color: #0000BB">CActiveRecordMetaData</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>    }<br>    return </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$_md</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">];<br>}</span></pre> </div> <p>Returns the meta-data for this AR</p> <h3 class="detailHeader" id="getOldPrimaryKey-detail"> getOldPrimaryKey() <span class="detailHeaderTag"> method (available since v1.1.0) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getOldPrimaryKey</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the old primary key value. An array (column name=&gt;column value) is returned if the primary key is composite. If primary key is not defined, null will be returned.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1326">framework/db/ar/CActiveRecord.php#1326</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getOldPrimaryKey</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the old primary key value. This refers to the primary key value that is populated into the record after executing a find method (e.g. find(), findAll()). The value remains unchanged even if the primary key attribute is manually assigned with a different value.</p> <h3 class="detailHeader" id="getPrimaryKey-detail"> getPrimaryKey() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getPrimaryKey</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the primary key value. An array (column name=&gt;column value) is returned if the primary key is composite. If primary key is not defined, null will be returned.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1281">framework/db/ar/CActiveRecord.php#1281</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">};<br>    elseif(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$values</span><span style="color: #007700">=array();<br>        foreach(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$values</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>        return </span><span style="color: #0000BB">$values</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the primary key value.</p> <h3 class="detailHeader" id="getRelated-detail"> getRelated() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>getRelated</b>(string $name, boolean $refresh=false, mixed $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the relation name (see <a href="cactiverecord#relations">relations</a>)</td> </tr> <tr> <td class="paramNameCol">$refresh</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to reload the related objects from database. Defaults to false. If the current record is not a new record and it does not have the related objects loaded they will be retrieved from the database even if this is set to false. If the current record is a new record and this value is false, the related objects will not be retrieved from the database.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">array or CDbCriteria object with additional parameters that customize the query conditions as specified in the relation declaration. If this is supplied the related record(s) will be retrieved from the database regardless of the value or $refresh. The related record(s) retrieved when this is supplied will only be returned by this method and will not be loaded into the current record's relation. The value of the relation prior to running this method will still be available for the current record if this is supplied.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the related object(s).</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L252">framework/db/ar/CActiveRecord.php#252</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getRelated</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$refresh</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    if(!</span><span style="color: #0000BB">$refresh </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$params</span><span style="color: #007700">===array() &amp;&amp; (isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]) || </span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">)))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br><br>    </span><span style="color: #0000BB">$md</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">();<br>    if(!isset(</span><span style="color: #0000BB">$md</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'{class} does not have relation "{name}".'</span><span style="color: #007700">,<br>            array(</span><span style="color: #DD0000">'{class}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">), </span><span style="color: #DD0000">'{name}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)));<br><br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #DD0000">'lazy loading '</span><span style="color: #007700">.</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.'</span><span style="color: #007700">.</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$relation</span><span style="color: #007700">=</span><span style="color: #0000BB">$md</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relations</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsNewRecord</span><span style="color: #007700">() &amp;&amp; !</span><span style="color: #0000BB">$refresh </span><span style="color: #007700">&amp;&amp; (</span><span style="color: #0000BB">$relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CHasOneRelation </span><span style="color: #007700">|| </span><span style="color: #0000BB">$relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CHasManyRelation</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CHasOneRelation </span><span style="color: #007700">? </span><span style="color: #0000BB">null </span><span style="color: #007700">: array();<br><br>    if(</span><span style="color: #0000BB">$params</span><span style="color: #007700">!==array()) </span><span style="color: #FF8000">// dynamic query<br>    </span><span style="color: #007700">{<br>        </span><span style="color: #0000BB">$exists</span><span style="color: #007700">=isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]) || </span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$exists</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$save</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br><br>        if(</span><span style="color: #0000BB">$params </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CDbCriteria</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$params </span><span style="color: #007700">= </span><span style="color: #0000BB">$params</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">();<br><br>        </span><span style="color: #0000BB">$r</span><span style="color: #007700">=array(</span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    }<br>    else<br>        </span><span style="color: #0000BB">$r</span><span style="color: #007700">=</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>    unset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]);<br><br>    </span><span style="color: #0000BB">$finder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getActiveFinder</span><span style="color: #007700">(</span><span style="color: #0000BB">$r</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">lazyFind</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br><br>    if(!isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>    {<br>        if(</span><span style="color: #0000BB">$relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CHasManyRelation</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=array();<br>        elseif(</span><span style="color: #0000BB">$relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CStatRelation</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">defaultValue</span><span style="color: #007700">;<br>        else<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">$params</span><span style="color: #007700">!==array())<br>    {<br>        </span><span style="color: #0000BB">$results</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br>        if(</span><span style="color: #0000BB">$exists</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$save</span><span style="color: #007700">;<br>        else<br>            unset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]);<br>        return </span><span style="color: #0000BB">$results</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br>}</span></pre> </div> <p>Returns the related record(s). This method will return the related record(s) of the current record. If the relation is HAS_ONE or BELONGS_TO, it will return a single object or null if the object does not exist. If the relation is HAS_MANY or MANY_MANY, it will return an array of objects or an empty array.</p> <h3 class="detailHeader" id="getTableAlias-detail"> getTableAlias() <span class="detailHeaderTag"> method (available since v1.1.1) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getTableAlias</b>(boolean $quote=false, boolean $checkScopes=true)</pre> </td></tr> <tr> <td class="paramNameCol">$quote</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to quote the alias name</td> </tr> <tr> <td class="paramNameCol">$checkScopes</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to check if a table alias is defined in the applied scopes so far. This parameter must be set false when calling this method in <a href="cactiverecord#defaultScope">defaultScope</a>. An infinite loop would be formed otherwise.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the default table alias</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1430">framework/db/ar/CActiveRecord.php#1430</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$quote</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">, </span><span style="color: #0000BB">$checkScopes</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$checkScopes </span><span style="color: #007700">&amp;&amp; (</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">alias</span><span style="color: #007700">!=</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$alias</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">alias</span><span style="color: #007700">;<br>    else<br>        </span><span style="color: #0000BB">$alias</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_alias</span><span style="color: #007700">;<br>    return </span><span style="color: #0000BB">$quote </span><span style="color: #007700">? </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">quoteTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$alias</span><span style="color: #007700">) : </span><span style="color: #0000BB">$alias</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the table alias to be used by the find methods. In relational queries, the returned table alias may vary according to the corresponding relation declaration. Also, the default table alias set by <a href="cactiverecord#setTableAlias">setTableAlias</a> may be overridden by the applied scopes.</p> <h3 class="detailHeader" id="getTableSchema-detail"> getTableSchema() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbtableschema">CDbTableSchema</a> <b>getTableSchema</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbtableschema">CDbTableSchema</a></td> <td class="paramDescCol">the metadata of the table that this AR belongs to</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L661">framework/db/ar/CActiveRecord.php#661</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">tableSchema</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the metadata of the table that this AR belongs to</p> <h3 class="detailHeader" id="hasAttribute-detail"> hasAttribute() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>hasAttribute</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">attribute name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether this AR has the named attribute (table column).</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L680">framework/db/ar/CActiveRecord.php#680</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">hasAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    return isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">columns</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]);<br>}</span></pre> </div> <p>Checks whether this AR has the named attribute</p> <h3 class="detailHeader" id="hasRelated-detail"> hasRelated() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>hasRelated</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the relation name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">a value indicating whether the named related object(s) has been loaded.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L313">framework/db/ar/CActiveRecord.php#313</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">hasRelated</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    return isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]) || </span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns a value indicating whether the named related object(s) has been loaded.</p> <h3 class="detailHeader" id="init-detail"> init() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>init</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L94">framework/db/ar/CActiveRecord.php#94</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">init</span><span style="color: #007700">()<br>{<br>}</span></pre> </div> <p>Initializes this model. This method is invoked when an AR instance is newly created and has its <a href="cactiverecord#scenario">scenario</a> set. You may override this method to provide code that is needed to initialize the model (e.g. setting initial property values.)</p> <h3 class="detailHeader" id="insert-detail"> insert() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>insert</b>(array $attributes=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attributes that need to be saved. Defaults to null, meaning all attributes that are loaded from DB will be saved.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the attributes are valid and the record is inserted successfully.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1073">framework/db/ar/CActiveRecord.php#1073</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    if(!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsNewRecord</span><span style="color: #007700">())<br>        throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The active record cannot be inserted to database because it is not new.'</span><span style="color: #007700">));<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeSave</span><span style="color: #007700">())<br>    {<br>        </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.insert()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createInsertCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">));<br>        if(</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">())<br>        {<br>            </span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">=</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">;<br>            if(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sequenceName</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            {<br>                if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">) &amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>                    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLastInsertID</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">);<br>                elseif(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">))<br>                {<br>                    foreach(</span><span style="color: #0000BB">$primaryKey </span><span style="color: #007700">as </span><span style="color: #0000BB">$pk</span><span style="color: #007700">)<br>                    {<br>                        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$pk</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>                        {<br>                            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLastInsertID</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">);<br>                            break;<br>                        }<br>                    }<br>                }<br>            }<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">();<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterSave</span><span style="color: #007700">();<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setIsNewRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setScenario</span><span style="color: #007700">(</span><span style="color: #DD0000">'update'</span><span style="color: #007700">);<br>            return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>        }<br>    }<br>    return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Inserts a row into the table based on this active record attributes. If the table's primary key is auto-incremental and is null before insertion, it will be populated with the actual value after insertion. Note, validation is not performed in this method. You may call <a href="cactiverecord#validate">validate</a> to perform the validation. After the record is inserted to DB successfully, its <a href="cactiverecord#isNewRecord">isNewRecord</a> property will be set false, and its <a href="cactiverecord#scenario">scenario</a> property will be set to be 'update'.</p> <h3 class="detailHeader" id="instantiate-detail"> instantiate() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected static <b>instantiate</b>(array $attributes)</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attribute values for the active records.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the active record</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1916">framework/db/ar/CActiveRecord.php#1916</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">instantiate</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$class</span><span style="color: #007700">=</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$model</span><span style="color: #007700">=new </span><span style="color: #0000BB">$class</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$model</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Creates an active record instance. This method is called by <a href="cactiverecord#populateRecord">populateRecord</a> and <a href="cactiverecord#populateRecords">populateRecords</a>. You may override this method if the instance being created depends the attributes that are to be populated to the record. For example, by creating a record based on the value of a column, you may implement the so-called single-table inheritance mapping.</p> <h3 class="detailHeader" id="model-detail"> model() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static static <b>model</b>(string $className='CActiveRecord')</pre> </td></tr> <tr> <td class="paramNameCol">$className</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">active record class name.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">active record model instance.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L391">framework/db/ar/CActiveRecord.php#391</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">model</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">=</span><span style="color: #0000BB">__CLASS__</span><span style="color: #007700">)<br>{<br>    if(isset(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$_models</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$_models</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">];<br>    else<br>    {<br>        </span><span style="color: #0000BB">$model</span><span style="color: #007700">=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$_models</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">]=new </span><span style="color: #0000BB">$className</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attachBehaviors</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">behaviors</span><span style="color: #007700">());<br>        return </span><span style="color: #0000BB">$model</span><span style="color: #007700">;<br>    }<br>}</span></pre> </div> <p>Returns the static model of the specified AR class. The model returned is a static instance of the AR class. It is provided for invoking class-level methods (something similar to static class methods.) <br><br> EVERY derived AR class must override this method as follows, </p>
<pre>
public static function model($className=__CLASS__)
{
    return parent::model($className);
}
</pre> <h3 class="detailHeader" id="offsetExists-detail"> offsetExists() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>offsetExists</b>(mixed $offset)</pre> </td></tr> <tr> <td class="paramNameCol">$offset</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the offset to check on</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol"></td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1929">framework/db/ar/CActiveRecord.php#1929</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">offsetExists</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__isset</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns whether there is an element at the specified offset. This method is required by the interface ArrayAccess.</p> <h3 class="detailHeader" id="onAfterDelete-detail"> onAfterDelete() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>onAfterDelete</b>(<a href="cevent">CEvent</a> $event)</pre> </td></tr> <tr> <td class="paramNameCol">$event</td> <td class="paramTypeCol"><a href="cevent">CEvent</a></td> <td class="paramDescCol">the event parameter</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L872">framework/db/ar/CActiveRecord.php#872</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">onAfterDelete</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">raiseEvent</span><span style="color: #007700">(</span><span style="color: #DD0000">'onAfterDelete'</span><span style="color: #007700">,</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>}</span></pre> </div> <p>This event is raised after the record is deleted.</p> <h3 class="detailHeader" id="onAfterFind-detail"> onAfterFind() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>onAfterFind</b>(<a href="cevent">CEvent</a> $event)</pre> </td></tr> <tr> <td class="paramNameCol">$event</td> <td class="paramTypeCol"><a href="cevent">CEvent</a></td> <td class="paramDescCol">the event parameter</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L900">framework/db/ar/CActiveRecord.php#900</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">onAfterFind</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">raiseEvent</span><span style="color: #007700">(</span><span style="color: #DD0000">'onAfterFind'</span><span style="color: #007700">,</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>}</span></pre> </div> <p>This event is raised after the record is instantiated by a find method.</p> <h3 class="detailHeader" id="onAfterSave-detail"> onAfterSave() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>onAfterSave</b>(<a href="cevent">CEvent</a> $event)</pre> </td></tr> <tr> <td class="paramNameCol">$event</td> <td class="paramTypeCol"><a href="cevent">CEvent</a></td> <td class="paramDescCol">the event parameter</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L853">framework/db/ar/CActiveRecord.php#853</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">onAfterSave</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">raiseEvent</span><span style="color: #007700">(</span><span style="color: #DD0000">'onAfterSave'</span><span style="color: #007700">,</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>}</span></pre> </div> <p>This event is raised after the record is saved.</p> <h3 class="detailHeader" id="onBeforeCount-detail"> onBeforeCount() <span class="detailHeaderTag"> method (available since v1.1.14) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>onBeforeCount</b>(<a href="cmodelevent">CModelEvent</a> $event)</pre> </td></tr> <tr> <td class="paramNameCol">$event</td> <td class="paramTypeCol"><a href="cmodelevent">CModelEvent</a></td> <td class="paramDescCol">the event parameter</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L929">framework/db/ar/CActiveRecord.php#929</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">onBeforeCount</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">raiseEvent</span><span style="color: #007700">(</span><span style="color: #DD0000">'onBeforeCount'</span><span style="color: #007700">,</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>}</span></pre> </div> <p>This event is raised before an AR finder performs a count call. If you want to access or modify the query criteria used for the count call, you can use <a href="cactiverecord#getDbCriteria">getDbCriteria()</a> to customize it based on your needs. When modifying criteria in beforeCount you have to make sure you are using the right table alias which is different on normal count and relational call. You can use <a href="cactiverecord#getTableAlias">getTableAlias()</a> to get the alias used for the upcoming count call.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#beforeCount">beforeCount</a></li> </ul> </div> <h3 class="detailHeader" id="onBeforeDelete-detail"> onBeforeDelete() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>onBeforeDelete</b>(<a href="cmodelevent">CModelEvent</a> $event)</pre> </td></tr> <tr> <td class="paramNameCol">$event</td> <td class="paramTypeCol"><a href="cmodelevent">CModelEvent</a></td> <td class="paramDescCol">the event parameter</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L863">framework/db/ar/CActiveRecord.php#863</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">onBeforeDelete</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">raiseEvent</span><span style="color: #007700">(</span><span style="color: #DD0000">'onBeforeDelete'</span><span style="color: #007700">,</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>}</span></pre> </div> <p>This event is raised before the record is deleted. By setting <a href="cmodelevent#isValid">CModelEvent::isValid</a> to be false, the normal <a href="cactiverecord#delete">delete()</a> process will be stopped.</p> <h3 class="detailHeader" id="onBeforeFind-detail"> onBeforeFind() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>onBeforeFind</b>(<a href="cmodelevent">CModelEvent</a> $event)</pre> </td></tr> <tr> <td class="paramNameCol">$event</td> <td class="paramTypeCol"><a href="cmodelevent">CModelEvent</a></td> <td class="paramDescCol">the event parameter</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L891">framework/db/ar/CActiveRecord.php#891</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">onBeforeFind</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">raiseEvent</span><span style="color: #007700">(</span><span style="color: #DD0000">'onBeforeFind'</span><span style="color: #007700">,</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>}</span></pre> </div> <p>This event is raised before an AR finder performs a find call. This can be either a call to CActiveRecords find methods or a find call when model is loaded in relational context via lazy or eager loading. If you want to access or modify the query criteria used for the find call, you can use <a href="cactiverecord#getDbCriteria">getDbCriteria()</a> to customize it based on your needs. When modifying criteria in beforeFind you have to make sure you are using the right table alias which is different on normal find and relational call. You can use <a href="cactiverecord#getTableAlias">getTableAlias()</a> to get the alias used for the upcoming find call. Please note that modification of criteria is fully supported as of version 1.1.13. Earlier versions had some problems with relational context and applying changes correctly.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#beforeFind">beforeFind</a></li> </ul> </div> <h3 class="detailHeader" id="onBeforeSave-detail"> onBeforeSave() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>onBeforeSave</b>(<a href="cmodelevent">CModelEvent</a> $event)</pre> </td></tr> <tr> <td class="paramNameCol">$event</td> <td class="paramTypeCol"><a href="cmodelevent">CModelEvent</a></td> <td class="paramDescCol">the event parameter</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L844">framework/db/ar/CActiveRecord.php#844</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">onBeforeSave</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">raiseEvent</span><span style="color: #007700">(</span><span style="color: #DD0000">'onBeforeSave'</span><span style="color: #007700">,</span><span style="color: #0000BB">$event</span><span style="color: #007700">);<br>}</span></pre> </div> <p>This event is raised before the record is saved. By setting <a href="cmodelevent#isValid">CModelEvent::isValid</a> to be false, the normal <a href="cactiverecord#save">save()</a> process will be stopped.</p> <h3 class="detailHeader" id="populateRecord-detail"> populateRecord() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>populateRecord</b>(array $attributes, boolean $callAfterFind=true)</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">attribute values (column name=&gt;column value)</td> </tr> <tr> <td class="paramNameCol">$callAfterFind</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to call <a href="cactiverecord#afterFind">afterFind</a> after the record is populated.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the newly created active record. The class of the object is the same as the model class. Null is returned if the input data is false.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1856">framework/db/ar/CActiveRecord.php#1856</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">populateRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$callAfterFind</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$record</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">instantiate</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setScenario</span><span style="color: #007700">(</span><span style="color: #DD0000">'update'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$md</span><span style="color: #007700">=</span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">();<br>        foreach(</span><span style="color: #0000BB">$attributes </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">property_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$record</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>                </span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>            elseif(isset(</span><span style="color: #0000BB">$md</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columns</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>                </span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>        }<br>        </span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attachBehaviors</span><span style="color: #007700">(</span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">behaviors</span><span style="color: #007700">());<br>        if(</span><span style="color: #0000BB">$callAfterFind</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterFind</span><span style="color: #007700">();<br>        return </span><span style="color: #0000BB">$record</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Creates an active record with the given attributes. This method is internally used by the find methods.</p> <h3 class="detailHeader" id="populateRecords-detail"> populateRecords() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static[] <b>populateRecords</b>(array $data, boolean $callAfterFind=true, string $index=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$data</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attribute values for the active records.</td> </tr> <tr> <td class="paramNameCol">$callAfterFind</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to call <a href="cactiverecord#afterFind">afterFind</a> after each record is populated.</td> </tr> <tr> <td class="paramNameCol">$index</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the name of the attribute whose value will be used as indexes of the query result array. If null, it means the array will be indexed by zero-based integers.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static[]</td> <td class="paramDescCol">list of active records.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1890">framework/db/ar/CActiveRecord.php#1890</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">populateRecords</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">,</span><span style="color: #0000BB">$callAfterFind</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">,</span><span style="color: #0000BB">$index</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$records</span><span style="color: #007700">=array();<br>    foreach(</span><span style="color: #0000BB">$data </span><span style="color: #007700">as </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">)<br>    {<br>        if((</span><span style="color: #0000BB">$record</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">populateRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$callAfterFind</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">$index</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$records</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$record</span><span style="color: #007700">;<br>            else<br>                </span><span style="color: #0000BB">$records</span><span style="color: #007700">[</span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$index</span><span style="color: #007700">]=</span><span style="color: #0000BB">$record</span><span style="color: #007700">;<br>        }<br>    }<br>    return </span><span style="color: #0000BB">$records</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Creates a list of active records based on the input data. This method is internally used by the find methods.</p> <h3 class="detailHeader" id="primaryKey()-detail"> primaryKey() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>primaryKey</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the primary key of the associated database table. If the key is a single column, it should return the column name; If the key is a composite one consisting of several columns, it should return the array of the key column names.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L457">framework/db/ar/CActiveRecord.php#457</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">()<br>{<br>}</span></pre> </div> <p>Returns the primary key of the associated database table. This method is meant to be overridden in case when the table is not defined with a primary key (for some legency database). If the table is already defined with a primary key, you do not need to override this method. The default implementation simply returns null, meaning using the primary key defined in the database.</p> <h3 class="detailHeader" id="query-detail"> query() <span class="detailHeaderTag"> method (available since v1.1.7) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected mixed <b>query</b>(<a href="cdbcriteria">CDbCriteria</a> $criteria, boolean $all=false)</pre> </td></tr> <tr> <td class="paramNameCol">$criteria</td> <td class="paramTypeCol"><a href="cdbcriteria">CDbCriteria</a></td> <td class="paramDescCol">the query criteria</td> </tr> <tr> <td class="paramNameCol">$all</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to return all data</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the AR objects populated with the query result</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1349">framework/db/ar/CActiveRecord.php#1349</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,</span><span style="color: #0000BB">$all</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeFind</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">applyScopes</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br><br>    if(empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">))<br>    {<br>        if(!</span><span style="color: #0000BB">$all</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createFindCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$all </span><span style="color: #007700">? </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">populateRecords</span><span style="color: #007700">(</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryAll</span><span style="color: #007700">(), </span><span style="color: #0000BB">true</span><span style="color: #007700">, </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">index</span><span style="color: #007700">) : </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">populateRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryRow</span><span style="color: #007700">());<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$finder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getActiveFinder</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,</span><span style="color: #0000BB">$all</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Performs the actual DB query and populates the AR objects with the query result. This method is mainly internally used by other AR query methods.</p> <h3 class="detailHeader" id="refresh-detail"> refresh() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>refresh</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the row still exists in the database. If true, the latest data will be populated to this active record.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1245">framework/db/ar/CActiveRecord.php#1245</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">refresh</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.refresh()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    if((</span><span style="color: #0000BB">$record</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findByPk</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">()))!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">=array();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_related</span><span style="color: #007700">=array();<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">columns </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$column</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">property_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>            else<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>        }<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Repopulates this active record with the latest data.</p> <h3 class="detailHeader" id="refreshMetaData-detail"> refreshMetaData() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>refreshMetaData</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L425">framework/db/ar/CActiveRecord.php#425</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">refreshMetaData</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$className</span><span style="color: #007700">=</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">,</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$_md</span><span style="color: #007700">))<br>        unset(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$_md</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">]);<br>}</span></pre> </div> <p>Refreshes the meta data for this AR class. By calling this method, this AR class will regenerate the meta data needed. This is useful if the table schema has been changed and you want to use the latest available table schema. Make sure you have called <a href="cdbschema#refresh">CDbSchema::refresh</a> before you call this method. Otherwise, old table schema data will still be used.</p> <h3 class="detailHeader" id="relations-detail"> relations() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>relations</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of related object declarations. Defaults to empty array.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L540">framework/db/ar/CActiveRecord.php#540</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">relations</span><span style="color: #007700">()<br>{<br>    return array();<br>}</span></pre> </div> <p>This method should be overridden to declare related objects. <br><br> There are four types of relations that may exist between two active record objects: </p>
<ul> <li>BELONGS_TO: e.g. a member belongs to a team;</li> <li>HAS_ONE: e.g. a member has at most one profile;</li> <li>HAS_MANY: e.g. a team has many members;</li> <li>MANY_MANY: e.g. a member has many skills and a skill belongs to a member.</li> </ul> <br><br> Besides the above relation types, a special relation called STAT is also supported that can be used to perform statistical query (or aggregational query). It retrieves the aggregational information about the related objects, such as the number of comments for each post, the average rating for each product, etc. <br><br> Each kind of related objects is defined in this method as an array with the following elements: <pre>
'varName'=&gt;array('relationType', 'className', 'foreignKey', ...additional options)
</pre> where 'varName' refers to the name of the variable/property that the related object(s) can be accessed through; 'relationType' refers to the type of the relation, which can be one of the following four constants: self::BELONGS_TO, self::HAS_ONE, self::HAS_MANY and self::MANY_MANY; 'className' refers to the name of the active record class that the related object(s) is of; and 'foreignKey' states the foreign key that relates the two kinds of active record. Note, for composite foreign keys, they can be either listed together, separated by commas or specified as an array in format of array('key1','key2'). In case you need to specify custom PK-&gt;FK association you can define it as array('fk'=&gt;'pk'). For composite keys it will be array('fk_c1'=&gt;'pk_с1','fk_c2'=&gt;'pk_c2'). For foreign keys used in MANY_MANY relation, the joining table must be declared as well (e.g. 'join_table(fk1, fk2)'). <br><br> Additional options may be specified as name-value pairs in the rest array elements: <ul> <li>'select': string|array, a list of columns to be selected. Defaults to '*', meaning all columns. Column names should be disambiguated if they appear in an expression (e.g. COUNT(relationName.name) AS name_count).</li> <li>'condition': string, the WHERE clause. Defaults to empty. Note, column references need to be disambiguated with prefix 'relationName.' (e.g. relationName.age&gt;20)</li> <li>'order': string, the ORDER BY clause. Defaults to empty. Note, column references need to be disambiguated with prefix 'relationName.' (e.g. relationName.age DESC)</li> <li>'with': string|array, a list of child related objects that should be loaded together with this object. Note, this is only honored by lazy loading, not eager loading.</li> <li>'joinType': type of join. Defaults to 'LEFT OUTER JOIN'.</li> <li>'alias': the alias for the table associated with this relationship. It defaults to null, meaning the table alias is the same as the relation name.</li> <li>'params': the parameters to be bound to the generated SQL statement. This should be given as an array of name-value pairs.</li> <li>'on': the ON clause. The condition specified here will be appended to the joining condition using the AND operator.</li> <li>'index': the name of the column whose values should be used as keys of the array that stores related objects. This option is only available to HAS_MANY and MANY_MANY relations.</li> <li>'scopes': scopes to apply. In case of a single scope can be used like 'scopes'=&gt;'scopeName', in case of multiple scopes can be used like 'scopes'=&gt;array('scopeName1','scopeName2'). This option has been available since version 1.1.9.</li> </ul> <br><br> The following options are available for certain relations when lazy loading: <ul> <li>'group': string, the GROUP BY clause. Defaults to empty. Note, column references need to be disambiguated with prefix 'relationName.' (e.g. relationName.age). This option only applies to HAS_MANY and MANY_MANY relations.</li> <li>'having': string, the HAVING clause. Defaults to empty. Note, column references need to be disambiguated with prefix 'relationName.' (e.g. relationName.age). This option only applies to HAS_MANY and MANY_MANY relations.</li> <li>'limit': limit of the rows to be selected. This option does not apply to BELONGS_TO relation.</li> <li>'offset': offset of the rows to be selected. This option does not apply to BELONGS_TO relation.</li> <li>'through': name of the model's relation that will be used as a bridge when getting related data. Can be set only for HAS_ONE and HAS_MANY. This option has been available since version 1.1.7.</li> </ul> <br><br> Below is an example declaring related objects for 'Post' active record class: <pre>
return array(
    'author'=&gt;array(self::BELONGS_TO, 'User', 'author_id'),
    'comments'=&gt;array(self::HAS_MANY, 'Comment', 'post_id', 'with'=&gt;'author', 'order'=&gt;'create_time DESC'),
    'tags'=&gt;array(self::MANY_MANY, 'Tag', 'post_tag(post_id, tag_id)', 'order'=&gt;'name'),
);
</pre> <h3 class="detailHeader" id="resetScope-detail"> resetScope() <span class="detailHeaderTag"> method (available since v1.1.2) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>resetScope</b>(boolean $resetDefault=true)</pre> </td></tr> <tr> <td class="paramNameCol">$resetDefault</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">including default scope. This parameter available since 1.1.12</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the AR instance itself</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L365">framework/db/ar/CActiveRecord.php#365</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">resetScope</span><span style="color: #007700">(</span><span style="color: #0000BB">$resetDefault</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$resetDefault</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_c</span><span style="color: #007700">=new </span><span style="color: #0000BB">CDbCriteria</span><span style="color: #007700">();<br>    else<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_c</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br><br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Resets all scopes and criterias applied.</p> <h3 class="detailHeader" id="save-detail"> save() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>save</b>(boolean $runValidation=true, array $attributes=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$runValidation</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to perform validation before saving the record. If the validation fails, the record will not be saved to database.</td> </tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attributes that need to be saved. Defaults to null, meaning all attributes that are loaded from DB will be saved.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the saving succeeds</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L808">framework/db/ar/CActiveRecord.php#808</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">save</span><span style="color: #007700">(</span><span style="color: #0000BB">$runValidation</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">,</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    if(!</span><span style="color: #0000BB">$runValidation </span><span style="color: #007700">|| </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsNewRecord</span><span style="color: #007700">() ? </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">) : </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">);<br>    else<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Saves the current record. <br><br> The record is inserted as a row into the database table if its <a href="cactiverecord#isNewRecord">isNewRecord</a> property is true (usually the case when the record is created using the 'new' operator). Otherwise, it will be used to update the corresponding row in the table (usually the case if the record is obtained using one of those 'find' methods.) <br><br> Validation will be performed before saving the record. If the validation fails, the record will not be saved. You can call <a href="cactiverecord#getErrors">getErrors()</a> to retrieve the validation errors. <br><br> If the record is saved via insertion, its <a href="cactiverecord#isNewRecord">isNewRecord</a> property will be set false, and its <a href="cactiverecord#scenario">scenario</a> property will be set to be 'update'. And if its primary key is auto-incremental and is not set before insertion, the primary key will be populated with the automatically generated key value.</p> <h3 class="detailHeader" id="saveAttributes-detail"> saveAttributes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>saveAttributes</b>(array $attributes)</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">attributes to be updated. Each element represents an attribute name or an attribute value indexed by its name. If the latter, the record's attribute will be changed accordingly before saving.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the update is successful. Note that false is also returned if the saving was successfull but no attributes had changed and the database driver returns 0 for the number of updated records.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1159">framework/db/ar/CActiveRecord.php#1159</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">saveAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">)<br>{<br>    if(!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsNewRecord</span><span style="color: #007700">())<br>    {<br>        </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.saveAttributes()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$values</span><span style="color: #007700">=array();<br>        foreach(</span><span style="color: #0000BB">$attributes </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">is_integer</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>                </span><span style="color: #0000BB">$values</span><span style="color: #007700">[</span><span style="color: #0000BB">$value</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>            else<br>                </span><span style="color: #0000BB">$values</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>        }<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">();<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">updateByPk</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOldPrimaryKey</span><span style="color: #007700">(),</span><span style="color: #0000BB">$values</span><span style="color: #007700">)&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">();<br>            return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>        }<br>        else<br>            return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    }<br>    else<br>        throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The active record cannot be updated because it is new.'</span><span style="color: #007700">));<br>}</span></pre> </div> <p>Saves a selected list of attributes. Unlike <a href="cactiverecord#save">save</a>, this method only saves the specified attributes of an existing row dataset and does NOT call either <a href="cactiverecord#beforeSave">beforeSave</a> or <a href="cactiverecord#afterSave">afterSave</a>. Also note that this method does neither attribute filtering nor validation. So do not use this method with untrusted data (such as user posted data). You may consider the following alternative if you want to do so: </p>
<pre>
$postRecord=Post::model()-&gt;findByPk($postID);
$postRecord-&gt;attributes=$_POST['post'];
$postRecord-&gt;save();
</pre> <h3 class="detailHeader" id="saveCounters-detail"> saveCounters() <span class="detailHeaderTag"> method (available since v1.1.8) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>saveCounters</b>(array $counters)</pre> </td></tr> <tr> <td class="paramNameCol">$counters</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the counters to be updated (column name=&gt;increment value)</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the saving is successful</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1201">framework/db/ar/CActiveRecord.php#1201</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">saveCounters</span><span style="color: #007700">(</span><span style="color: #0000BB">$counters</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.saveCounters()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createPkCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOldPrimaryKey</span><span style="color: #007700">());<br>    </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createUpdateCounterCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$counters</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">())<br>    {<br>        foreach(</span><span style="color: #0000BB">$counters </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">+</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Saves one or several counter columns for the current AR object. Note that this method differs from <a href="cactiverecord#updateCounters">updateCounters</a> in that it only saves the current AR object. An example usage is as follows: </p>
<pre>
$postRecord=Post::model()-&gt;findByPk($postID);
$postRecord-&gt;saveCounters(array('view_count'=&gt;1));
</pre> Use negative values if you want to decrease the counters. <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#updateCounters">updateCounters</a></li> </ul> </div> <h3 class="detailHeader" id="scopes-detail"> scopes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>scopes</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the scope definition. The array keys are scope names; the array values are the corresponding scope definitions. Each scope definition is represented as an array whose keys must be properties of <a href="cdbcriteria">CDbCriteria</a>.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L576">framework/db/ar/CActiveRecord.php#576</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">scopes</span><span style="color: #007700">()<br>{<br>    return array();<br>}</span></pre> </div> <p>Returns the declaration of named scopes. A named scope represents a query criteria that can be chained together with other named scopes and applied to a query. This method should be overridden by child classes to declare named scopes for the particular AR classes. For example, the following code declares two named scopes: 'recently' and 'published'. </p>
<pre>
return array(
    'published'=&gt;array(
          'condition'=&gt;'status=1',
    ),
    'recently'=&gt;array(
          'order'=&gt;'create_time DESC',
          'limit'=&gt;5,
    ),
);
</pre> If the above scopes are declared in a 'Post' model, we can perform the following queries: <pre>
$posts=Post::model()-&gt;published()-&gt;findAll();
$posts=Post::model()-&gt;published()-&gt;recently()-&gt;findAll();
$posts=Post::model()-&gt;published()-&gt;with('comments')-&gt;findAll();
</pre> Note that the last query is a relational query. <h3 class="detailHeader" id="setAttribute-detail"> setAttribute() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>setAttribute</b>(string $name, mixed $value)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the attribute name</td> </tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the attribute value.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the attribute exists and the assignment is conducted successfully</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L712">framework/db/ar/CActiveRecord.php#712</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">property_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetaData</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">columns</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_attributes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>    else<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets the named attribute value. You may also use $this-&gt;AttributeName to set the attribute value.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#hasAttribute">hasAttribute</a></li> </ul> </div> <h3 class="detailHeader" id="setDbCriteria-detail"> setDbCriteria() <span class="detailHeaderTag"> method (available since v1.1.3) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setDbCriteria</b>(<a href="cdbcriteria">CDbCriteria</a> $criteria)</pre> </td></tr> <tr> <td class="paramNameCol">$criteria</td> <td class="paramTypeCol"><a href="cdbcriteria">CDbCriteria</a></td> <td class="paramDescCol">the query criteria</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L340">framework/db/ar/CActiveRecord.php#340</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setDbCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_c</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets the query criteria for the current model.</p> <h3 class="detailHeader" id="setIsNewRecord-detail"> setIsNewRecord() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setIsNewRecord</b>(boolean $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the record is new and should be inserted when calling <a href="cactiverecord#save">save</a>.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L834">framework/db/ar/CActiveRecord.php#834</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setIsNewRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_new</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets if the record is new.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#getIsNewRecord">getIsNewRecord</a></li> </ul> </div> <h3 class="detailHeader" id="setOldPrimaryKey-detail"> setOldPrimaryKey() <span class="detailHeaderTag"> method (available since v1.1.3) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setOldPrimaryKey</b>(mixed $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the old primary key value.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1336">framework/db/ar/CActiveRecord.php#1336</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setOldPrimaryKey</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets the old primary key value.</p> <h3 class="detailHeader" id="setPrimaryKey-detail"> setPrimaryKey() <span class="detailHeaderTag"> method (available since v1.1.0) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setPrimaryKey</b>(mixed $value)</pre> </td></tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the new primary key value. If the primary key is composite, the new value should be provided as an array (column name=&gt;column value).</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1304">framework/db/ar/CActiveRecord.php#1304</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setPrimaryKey</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">}=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>    elseif(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">))<br>    {<br>        foreach(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br>    }<br>}</span></pre> </div> <p>Sets the primary key value. After calling this method, the old primary key value can be obtained from <a href="cactiverecord#oldPrimaryKey">oldPrimaryKey</a>.</p> <h3 class="detailHeader" id="setTableAlias-detail"> setTableAlias() <span class="detailHeaderTag"> method (available since v1.1.3) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>setTableAlias</b>(string $alias)</pre> </td></tr> <tr> <td class="paramNameCol">$alias</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the table alias to be used in queries. The alias should NOT be quoted.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1444">framework/db/ar/CActiveRecord.php#1444</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">setTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$alias</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_alias</span><span style="color: #007700">=</span><span style="color: #0000BB">$alias</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets the table alias to be used in queries.</p> <h3 class="detailHeader" id="tableName-detail"> tableName() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>tableName</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the table name</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L438">framework/db/ar/CActiveRecord.php#438</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">tableName</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$tableName </span><span style="color: #007700">= </span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>    if((</span><span style="color: #0000BB">$pos</span><span style="color: #007700">=</span><span style="color: #0000BB">strrpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">,</span><span style="color: #DD0000">'\\'</span><span style="color: #007700">)) !== </span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">,</span><span style="color: #0000BB">$pos</span><span style="color: #007700">+</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$tableName</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the name of the associated database table. By default this method returns the class name as the table name. You may override this method if the table is not named after this convention.</p> <h3 class="detailHeader" id="together-detail"> together() <span class="detailHeaderTag"> method (available since v1.1.4) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>together</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the AR object itself</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1733">framework/db/ar/CActiveRecord.php#1733</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">together</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbCriteria</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">together</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Sets <a href="cdbcriteria#together">CDbCriteria::together</a> property to be true. This is only used in relational AR query. Please refer to <a href="cdbcriteria#together">CDbCriteria::together</a> for more details.</p> <h3 class="detailHeader" id="update-detail"> update() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public boolean <b>update</b>(array $attributes=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attributes that need to be saved. Defaults to null, meaning all attributes that are loaded from DB will be saved.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the update is successful</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1121">framework/db/ar/CActiveRecord.php#1121</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">update</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIsNewRecord</span><span style="color: #007700">())<br>        throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The active record cannot be updated because it is new.'</span><span style="color: #007700">));<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeSave</span><span style="color: #007700">())<br>    {<br>        </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.update()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">updateByPk</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOldPrimaryKey</span><span style="color: #007700">(),</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">));<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterSave</span><span style="color: #007700">();<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    }<br>    else<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Updates the row represented by this active record. All loaded attributes will be saved to the database. Note, validation is not performed in this method. You may call <a href="cactiverecord#validate">validate</a> to perform the validation.</p> <h3 class="detailHeader" id="updateAll-detail"> updateAll() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>updateAll</b>(array $attributes, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attributes (name=&gt;$value) to be updated</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the number of rows being updated</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1768">framework/db/ar/CActiveRecord.php#1768</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">updateAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.updateAll()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createUpdateCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Updates records with the specified condition. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params. Note, the attributes are not checked for safety and no validation is done.</p> <h3 class="detailHeader" id="updateByPk-detail"> updateByPk() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>updateByPk</b>(mixed $pk, array $attributes, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$pk</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">primary key value(s). Use array for multiple primary keys. For composite key, each key value must be an array (column name=&gt;column value).</td> </tr> <tr> <td class="paramNameCol">$attributes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of attributes (name=&gt;$value) to be updated</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the number of rows being updated</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1749">framework/db/ar/CActiveRecord.php#1749</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">updateByPk</span><span style="color: #007700">(</span><span style="color: #0000BB">$pk</span><span style="color: #007700">,</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.updateByPk()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createPkCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,</span><span style="color: #0000BB">$pk</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createUpdateCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Updates records with the specified primary key(s). See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params. Note, the attributes are not checked for safety and validation is NOT performed.</p> <h3 class="detailHeader" id="updateCounters-detail"> updateCounters() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>updateCounters</b>(array $counters, mixed $condition='', array $params=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$counters</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the counters to be updated (column name=&gt;increment value)</td> </tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">query condition or criteria.</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">parameters to be bound to an SQL statement.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the number of rows being updated</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1787">framework/db/ar/CActiveRecord.php#1787</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">updateCounters</span><span style="color: #007700">(</span><span style="color: #0000BB">$counters</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">'.updateCounters()'</span><span style="color: #007700">,</span><span style="color: #DD0000">'system.db.ar.CActiveRecord'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createUpdateCounterCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">(),</span><span style="color: #0000BB">$counters</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Updates one or several counter columns. Note, this updates all rows of data unless a condition or criteria is specified. See <a href="cactiverecord#find">find()</a> for detailed explanation about $condition and $params.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cactiverecord#saveCounters">saveCounters</a></li> </ul> </div> <h3 class="detailHeader" id="with-detail"> with() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>with</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the AR object itself.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveRecord.php#L1713">framework/db/ar/CActiveRecord.php#1713</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">with</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">func_num_args</span><span style="color: #007700">()&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$with</span><span style="color: #007700">=</span><span style="color: #0000BB">func_get_args</span><span style="color: #007700">();<br>        if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$with</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]))  </span><span style="color: #FF8000">// the parameter is given as an array<br>            </span><span style="color: #0000BB">$with</span><span style="color: #007700">=</span><span style="color: #0000BB">$with</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br>        if(!empty(</span><span style="color: #0000BB">$with</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbCriteria</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">mergeWith</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'with'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$with</span><span style="color: #007700">));<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Specifies which related objects should be eagerly loaded. This method takes variable number of parameters. Each parameter specifies the name of a relation or child-relation. For example, </p>
<pre>
// find all posts together with their author and comments
Post::model()-&gt;with('author','comments')-&gt;findAll();
// find all posts together with their author and the author's profile
Post::model()-&gt;with('author','author.profile')-&gt;findAll();
</pre> The relations should be declared in <a href="cactiverecord#relations">relations()</a>. <br><br> By default, the options specified in <a href="cactiverecord#relations">relations()</a> will be used to do relational query. In order to customize the options on the fly, we should pass an array parameter to the with() method. The array keys are relation names, and the array values are the corresponding query options. For example, <pre>
Post::model()-&gt;with(array(
    'author'=&gt;array('select'=&gt;'id, name'),
    'comments'=&gt;array('condition'=&gt;'approved=1', 'order'=&gt;'create_time'),
))-&gt;findAll();
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CActiveRecord" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CActiveRecord</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
