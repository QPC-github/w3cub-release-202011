
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CFileHelper - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" Copies a directory recursively as another. If the destination directory does not exist, it will be created recursively. ">
  <meta name="keywords" content="cfilehelper, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cfilehelper.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/yii~1.1.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CFileHelper</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.utils">system.utils</a></td> </tr> <tr> <th>Inheritance</th> <td>class CFileHelper</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php">framework/utils/CFileHelper.php</a></td> </tr> </table> <div id="classDescription"> CFileHelper provides a set of helper methods for common file system operations.</div>   <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="copyDirectory"> <td><a href="cfilehelper#copyDirectory-detail">copyDirectory()</a></td> <td>Copies a directory recursively as another.</td> <td>CFileHelper</td> </tr> <tr id="createDirectory"> <td><a href="cfilehelper#createDirectory-detail">createDirectory()</a></td> <td>Shared environment safe version of mkdir. Supports recursive creation.</td> <td>CFileHelper</td> </tr> <tr id="findFiles"> <td><a href="cfilehelper#findFiles-detail">findFiles()</a></td> <td>Returns the files found under the specified directory and subdirectories.</td> <td>CFileHelper</td> </tr> <tr id="getExtension"> <td><a href="cfilehelper#getExtension-detail">getExtension()</a></td> <td>Returns the extension name of a file path.</td> <td>CFileHelper</td> </tr> <tr id="getExtensionByMimeType"> <td><a href="cfilehelper#getExtensionByMimeType-detail">getExtensionByMimeType()</a></td> <td>Determines the file extension name based on its MIME type.</td> <td>CFileHelper</td> </tr> <tr id="getMimeType"> <td><a href="cfilehelper#getMimeType-detail">getMimeType()</a></td> <td>Determines the MIME type of the specified file.</td> <td>CFileHelper</td> </tr> <tr id="getMimeTypeByExtension"> <td><a href="cfilehelper#getMimeTypeByExtension-detail">getMimeTypeByExtension()</a></td> <td>Determines the MIME type based on the extension name of the specified file.</td> <td>CFileHelper</td> </tr> <tr id="removeDirectory"> <td><a href="cfilehelper#removeDirectory-detail">removeDirectory()</a></td> <td>Removes a directory recursively.</td> <td>CFileHelper</td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="copyDirectoryRecursive"> <td><a href="cfilehelper#copyDirectoryRecursive-detail">copyDirectoryRecursive()</a></td> <td>Copies a directory.</td> <td>CFileHelper</td> </tr> <tr id="findFilesRecursive"> <td><a href="cfilehelper#findFilesRecursive-detail">findFilesRecursive()</a></td> <td>Returns the files found under the specified directory and subdirectories.</td> <td>CFileHelper</td> </tr> <tr id="validatePath"> <td><a href="cfilehelper#validatePath-detail">validatePath()</a></td> <td>Validates a file or directory.</td> <td>CFileHelper</td> </tr> </table> </div>  <h2>Method Details</h2> <h3 class="detailHeader" id="copyDirectory-detail"> copyDirectory() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static void <b>copyDirectory</b>(string $src, string $dst, array $options=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$src</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the source directory</td> </tr> <tr> <td class="paramNameCol">$dst</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the destination directory</td> </tr> <tr> <td class="paramNameCol">$options</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">options for directory copy. Valid options are: <ul> <li>fileTypes: array, list of file name suffix (without dot). Only files with these suffixes will be copied.</li> <li>exclude: array, list of directory and file exclusions. Each exclusion can be either a name or a path. If a file or directory name or path matches the exclusion, it will not be copied. For example, an exclusion of '.svn' will exclude all files and directories whose name is '.svn'. And an exclusion of '/a/b' will exclude file or directory '$src/a/b'. Note, that '/' should be used as separator regardless of the value of the DIRECTORY_SEPARATOR constant. </li> <li>level: integer, recursion depth, default=-1. Level -1 means copying all directories and files under the directory; Level 0 means copying only the files DIRECTLY under the directory; level N means copying those directories that are within N levels. </li> <li>newDirMode - the permission to be set for newly copied directories (defaults to 0777);</li> <li>newFileMode - the permission to be set for newly copied files (defaults to the current environment setting).</li> </ul>
</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L54">framework/utils/CFileHelper.php#54</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">copyDirectory</span><span style="color: #007700">(</span><span style="color: #0000BB">$src</span><span style="color: #007700">,</span><span style="color: #0000BB">$dst</span><span style="color: #007700">,</span><span style="color: #0000BB">$options</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$exclude</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$level</span><span style="color: #007700">=-</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">extract</span><span style="color: #007700">(</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br>    if(!</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">createDirectory</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">,isset(</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'newDirMode'</span><span style="color: #007700">])?</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'newDirMode'</span><span style="color: #007700">]:</span><span style="color: #0000BB">null</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">copyDirectoryRecursive</span><span style="color: #007700">(</span><span style="color: #0000BB">$src</span><span style="color: #007700">,</span><span style="color: #0000BB">$dst</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$exclude</span><span style="color: #007700">,</span><span style="color: #0000BB">$level</span><span style="color: #007700">,</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Copies a directory recursively as another. If the destination directory does not exist, it will be created recursively.</p> <h3 class="detailHeader" id="copyDirectoryRecursive-detail"> copyDirectoryRecursive() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected static void <b>copyDirectoryRecursive</b>(string $src, string $dst, string $base, array $fileTypes, array $exclude, integer $level, array $options)</pre> </td></tr> <tr> <td class="paramNameCol">$src</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the source directory</td> </tr> <tr> <td class="paramNameCol">$dst</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the destination directory</td> </tr> <tr> <td class="paramNameCol">$base</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the path relative to the original source directory</td> </tr> <tr> <td class="paramNameCol">$fileTypes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of file name suffix (without dot). Only files with these suffixes will be copied.</td> </tr> <tr> <td class="paramNameCol">$exclude</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of directory and file exclusions. Each exclusion can be either a name or a path. If a file or directory name or path matches the exclusion, it will not be copied. For example, an exclusion of '.svn' will exclude all files and directories whose name is '.svn'. And an exclusion of '/a/b' will exclude file or directory '$src/a/b'. Note, that '/' should be used as separator regardless of the value of the DIRECTORY_SEPARATOR constant.</td> </tr> <tr> <td class="paramNameCol">$level</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">recursion depth. It defaults to -1. Level -1 means copying all directories and files under the directory; Level 0 means copying only the files DIRECTLY under the directory; level N means copying those directories that are within N levels.</td> </tr> <tr> <td class="paramNameCol">$options</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">additional options. The following options are supported: newDirMode - the permission to be set for newly copied directories (defaults to 0777); newFileMode - the permission to be set for newly copied files (defaults to the current environment setting).</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L158">framework/utils/CFileHelper.php#158</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected static function </span><span style="color: #0000BB">copyDirectoryRecursive</span><span style="color: #007700">(</span><span style="color: #0000BB">$src</span><span style="color: #007700">,</span><span style="color: #0000BB">$dst</span><span style="color: #007700">,</span><span style="color: #0000BB">$base</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$exclude</span><span style="color: #007700">,</span><span style="color: #0000BB">$level</span><span style="color: #007700">,</span><span style="color: #0000BB">$options</span><span style="color: #007700">)<br>{<br>    if(!</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">createDirectory</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">,isset(</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'newDirMode'</span><span style="color: #007700">])?</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'newDirMode'</span><span style="color: #007700">]:</span><span style="color: #0000BB">null</span><span style="color: #007700">,</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$folder</span><span style="color: #007700">=</span><span style="color: #0000BB">opendir</span><span style="color: #007700">(</span><span style="color: #0000BB">$src</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$folder</span><span style="color: #007700">===</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Unable to open directory: ' </span><span style="color: #007700">. </span><span style="color: #0000BB">$src</span><span style="color: #007700">);<br>    while((</span><span style="color: #0000BB">$file</span><span style="color: #007700">=</span><span style="color: #0000BB">readdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$folder</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$file</span><span style="color: #007700">===</span><span style="color: #DD0000">'.' </span><span style="color: #007700">|| </span><span style="color: #0000BB">$file</span><span style="color: #007700">===</span><span style="color: #DD0000">'..'</span><span style="color: #007700">)<br>            continue;<br>        </span><span style="color: #0000BB">$path</span><span style="color: #007700">=</span><span style="color: #0000BB">$src</span><span style="color: #007700">.</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$isFile</span><span style="color: #007700">=</span><span style="color: #0000BB">is_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$path</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validatePath</span><span style="color: #007700">(</span><span style="color: #0000BB">$base</span><span style="color: #007700">,</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$isFile</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$exclude</span><span style="color: #007700">))<br>        {<br>            if(</span><span style="color: #0000BB">$isFile</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">copy</span><span style="color: #007700">(</span><span style="color: #0000BB">$path</span><span style="color: #007700">,</span><span style="color: #0000BB">$dst</span><span style="color: #007700">.</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br>                if(isset(</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'newFileMode'</span><span style="color: #007700">]))<br>                    @</span><span style="color: #0000BB">chmod</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">.</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'newFileMode'</span><span style="color: #007700">]);<br>            }<br>            elseif(</span><span style="color: #0000BB">$level</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">copyDirectoryRecursive</span><span style="color: #007700">(</span><span style="color: #0000BB">$path</span><span style="color: #007700">,</span><span style="color: #0000BB">$dst</span><span style="color: #007700">.</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$base</span><span style="color: #007700">.</span><span style="color: #DD0000">'/'</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$exclude</span><span style="color: #007700">,</span><span style="color: #0000BB">$level</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br>        }<br>    }<br>    </span><span style="color: #0000BB">closedir</span><span style="color: #007700">(</span><span style="color: #0000BB">$folder</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Copies a directory. This method is mainly used by <a href="cfilehelper#copyDirectory">copyDirectory</a>.</p> <h3 class="detailHeader" id="createDirectory-detail"> createDirectory() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static boolean <b>createDirectory</b>(string $dst, integer $mode=NULL, boolean $recursive=false)</pre> </td></tr> <tr> <td class="paramNameCol">$dst</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">path to be created</td> </tr> <tr> <td class="paramNameCol">$mode</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the permission to be set for newly created directories, if not set - 0777 will be used</td> </tr> <tr> <td class="paramNameCol">$recursive</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to create directory structure recursive if parent dirs do not exist</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">result of mkdir</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L356">framework/utils/CFileHelper.php#356</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">createDirectory</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">,</span><span style="color: #0000BB">$mode</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">,</span><span style="color: #0000BB">$recursive</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$mode</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$mode</span><span style="color: #007700">=</span><span style="color: #0000BB">0777</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$prevDir</span><span style="color: #007700">=</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$recursive </span><span style="color: #007700">&amp;&amp; !</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">) &amp;&amp; !</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #0000BB">$prevDir</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">createDirectory</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">),</span><span style="color: #0000BB">$mode</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">mkdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">, </span><span style="color: #0000BB">$mode</span><span style="color: #007700">);<br>    @</span><span style="color: #0000BB">chmod</span><span style="color: #007700">(</span><span style="color: #0000BB">$dst</span><span style="color: #007700">,</span><span style="color: #0000BB">$mode</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$res</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Shared environment safe version of mkdir. Supports recursive creation. For avoidance of umask side-effects chmod is used.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li>mkdir</li> </ul> </div> <h3 class="detailHeader" id="findFiles-detail"> findFiles() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static array <b>findFiles</b>(string $dir, array $options=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$dir</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the directory under which the files will be looked for</td> </tr> <tr> <td class="paramNameCol">$options</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">options for file searching. Valid options are: <ul> <li>fileTypes: array, list of file name suffix (without dot). Only files with these suffixes will be returned.</li> <li>exclude: array, list of directory and file exclusions. Each exclusion can be either a name or a path. If a file or directory name or path matches the exclusion, it will not be copied. For example, an exclusion of '.svn' will exclude all files and directories whose name is '.svn'. And an exclusion of '/a/b' will exclude file or directory '$src/a/b'. Note, that '/' should be used as separator regardless of the value of the DIRECTORY_SEPARATOR constant. </li> <li>level: integer, recursion depth, default=-1. Level -1 means searching for all directories and files under the directory; Level 0 means searching for only the files DIRECTLY under the directory; level N means searching for those directories that are within N levels. </li> <li>absolutePaths: boolean, whether to return absolute paths or relative ones, defaults to true.</li> </ul>
</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">files found under the directory. The file list is sorted.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L126">framework/utils/CFileHelper.php#126</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">findFiles</span><span style="color: #007700">(</span><span style="color: #0000BB">$dir</span><span style="color: #007700">,</span><span style="color: #0000BB">$options</span><span style="color: #007700">=array())<br>{<br>    </span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$exclude</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$level</span><span style="color: #007700">=-</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$absolutePaths</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">extract</span><span style="color: #007700">(</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$list</span><span style="color: #007700">=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">findFilesRecursive</span><span style="color: #007700">(</span><span style="color: #0000BB">$dir</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$exclude</span><span style="color: #007700">,</span><span style="color: #0000BB">$level</span><span style="color: #007700">,</span><span style="color: #0000BB">$absolutePaths</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">sort</span><span style="color: #007700">(</span><span style="color: #0000BB">$list</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$list</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the files found under the specified directory and subdirectories.</p> <h3 class="detailHeader" id="findFilesRecursive-detail"> findFilesRecursive() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected static array <b>findFilesRecursive</b>(string $dir, string $base, array $fileTypes, array $exclude, integer $level, boolean $absolutePaths)</pre> </td></tr> <tr> <td class="paramNameCol">$dir</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the source directory</td> </tr> <tr> <td class="paramNameCol">$base</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the path relative to the original source directory</td> </tr> <tr> <td class="paramNameCol">$fileTypes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of file name suffix (without dot). Only files with these suffixes will be returned.</td> </tr> <tr> <td class="paramNameCol">$exclude</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of directory and file exclusions. Each exclusion can be either a name or a path. If a file or directory name or path matches the exclusion, it will not be copied. For example, an exclusion of '.svn' will exclude all files and directories whose name is '.svn'. And an exclusion of '/a/b' will exclude file or directory '$src/a/b'. Note, that '/' should be used as separator regardless of the value of the DIRECTORY_SEPARATOR constant.</td> </tr> <tr> <td class="paramNameCol">$level</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">recursion depth. It defaults to -1. Level -1 means searching for all directories and files under the directory; Level 0 means searching for only the files DIRECTLY under the directory; level N means searching for those directories that are within N levels.</td> </tr> <tr> <td class="paramNameCol">$absolutePaths</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to return absolute paths or relative ones</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">files found under the directory.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L205">framework/utils/CFileHelper.php#205</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected static function </span><span style="color: #0000BB">findFilesRecursive</span><span style="color: #007700">(</span><span style="color: #0000BB">$dir</span><span style="color: #007700">,</span><span style="color: #0000BB">$base</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$exclude</span><span style="color: #007700">,</span><span style="color: #0000BB">$level</span><span style="color: #007700">,</span><span style="color: #0000BB">$absolutePaths</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$list</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$handle</span><span style="color: #007700">=</span><span style="color: #0000BB">opendir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dir</span><span style="color: #007700">.</span><span style="color: #0000BB">$base</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">===</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Unable to open directory: ' </span><span style="color: #007700">. </span><span style="color: #0000BB">$dir</span><span style="color: #007700">);<br>    while((</span><span style="color: #0000BB">$file</span><span style="color: #007700">=</span><span style="color: #0000BB">readdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$file</span><span style="color: #007700">===</span><span style="color: #DD0000">'.' </span><span style="color: #007700">|| </span><span style="color: #0000BB">$file</span><span style="color: #007700">===</span><span style="color: #DD0000">'..'</span><span style="color: #007700">)<br>            continue;<br>        </span><span style="color: #0000BB">$path</span><span style="color: #007700">=</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$base</span><span style="color: #007700">.</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$fullPath</span><span style="color: #007700">=</span><span style="color: #0000BB">$dir</span><span style="color: #007700">.</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #0000BB">$path</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$isFile</span><span style="color: #007700">=</span><span style="color: #0000BB">is_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$fullPath</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validatePath</span><span style="color: #007700">(</span><span style="color: #0000BB">$base</span><span style="color: #007700">,</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$isFile</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$exclude</span><span style="color: #007700">))<br>        {<br>            if(</span><span style="color: #0000BB">$isFile</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$list</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$absolutePaths</span><span style="color: #007700">?</span><span style="color: #0000BB">$fullPath</span><span style="color: #007700">:</span><span style="color: #0000BB">$path</span><span style="color: #007700">;<br>            elseif(</span><span style="color: #0000BB">$level</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$list</span><span style="color: #007700">=</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$list</span><span style="color: #007700">,</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">findFilesRecursive</span><span style="color: #007700">(</span><span style="color: #0000BB">$dir</span><span style="color: #007700">,</span><span style="color: #0000BB">$base</span><span style="color: #007700">.</span><span style="color: #DD0000">'/'</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$exclude</span><span style="color: #007700">,</span><span style="color: #0000BB">$level</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">$absolutePaths</span><span style="color: #007700">));<br>        }<br>    }<br>    </span><span style="color: #0000BB">closedir</span><span style="color: #007700">(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$list</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the files found under the specified directory and subdirectories. This method is mainly used by <a href="cfilehelper#findFiles">findFiles</a>.</p> <h3 class="detailHeader" id="getExtension-detail"> getExtension() <span class="detailHeaderTag"> method (available since v1.1.2) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static string <b>getExtension</b>(string $path)</pre> </td></tr> <tr> <td class="paramNameCol">$path</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the file path</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the extension name without the dot character.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L27">framework/utils/CFileHelper.php#27</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">getExtension</span><span style="color: #007700">(</span><span style="color: #0000BB">$path</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">pathinfo</span><span style="color: #007700">(</span><span style="color: #0000BB">$path</span><span style="color: #007700">,</span><span style="color: #0000BB">PATHINFO_EXTENSION</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Returns the extension name of a file path. For example, the path "path/to/something.php" would return "php".</p> <h3 class="detailHeader" id="getExtensionByMimeType-detail"> getExtensionByMimeType() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static string <b>getExtensionByMimeType</b>(string $file, string $magicFile=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$file</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the file name.</td> </tr> <tr> <td class="paramNameCol">$magicFile</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the path of the file that contains all available extension information. If this is not set, the default 'system.utils.fileExtensions' file will be used. This parameter has been available since version 1.1.16.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">extension name. Null is returned if the extension cannot be determined.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L328">framework/utils/CFileHelper.php#328</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">getExtensionByMimeType</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    static </span><span style="color: #0000BB">$mimeTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$customMimeTypes</span><span style="color: #007700">=array();<br>    if(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">===</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$mimeTypes</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$mimeTypes</span><span style="color: #007700">=require(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">getPathOfAlias</span><span style="color: #007700">(</span><span style="color: #DD0000">'system.utils.fileExtensions'</span><span style="color: #007700">).</span><span style="color: #DD0000">'.php'</span><span style="color: #007700">);<br>    elseif(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; !isset(</span><span style="color: #0000BB">$customMimeTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">]))<br>        </span><span style="color: #0000BB">$customMimeTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">]=require(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">);<br>    if((</span><span style="color: #0000BB">$mime</span><span style="color: #007700">=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getMimeType</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$mime</span><span style="color: #007700">=</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$mime</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">===</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; isset(</span><span style="color: #0000BB">$mimeTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$mime</span><span style="color: #007700">]))<br>            return </span><span style="color: #0000BB">$mimeTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$mime</span><span style="color: #007700">];<br>        elseif(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; isset(</span><span style="color: #0000BB">$customMimeTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">][</span><span style="color: #0000BB">$mime</span><span style="color: #007700">]))<br>            return </span><span style="color: #0000BB">$customMimeTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">][</span><span style="color: #0000BB">$mime</span><span style="color: #007700">];<br>    }<br>    return </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Determines the file extension name based on its MIME type. This method will use a local map between MIME type and extension name.</p> <h3 class="detailHeader" id="getMimeType-detail"> getMimeType() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static string <b>getMimeType</b>(string $file, string $magicFile=NULL, boolean $checkExtension=true)</pre> </td></tr> <tr> <td class="paramNameCol">$file</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the file name.</td> </tr> <tr> <td class="paramNameCol">$magicFile</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">name of a magic database file, usually something like /path/to/magic.mime. This will be passed as the second parameter to <a href="http://php.net/manual/en/function.finfo-open.php">finfo_open</a>. Magic file format described in <a href="http://linux.die.net/man/5/magic">man 5 magic</a>, note that this file does not contain a standard PHP array as you might suppose. Specified magic file will be used only when fileinfo PHP extension is available. This parameter has been available since version 1.1.3.</td> </tr> <tr> <td class="paramNameCol">$checkExtension</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to check the file extension in case the MIME type cannot be determined based on finfo and mime_content_type. Defaults to true. This parameter has been available since version 1.1.4.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the MIME type. Null is returned if the MIME type cannot be determined.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L275">framework/utils/CFileHelper.php#275</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">getMimeType</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">,</span><span style="color: #0000BB">$checkExtension</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'finfo_open'</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$options</span><span style="color: #007700">=</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'FILEINFO_MIME_TYPE'</span><span style="color: #007700">) ? </span><span style="color: #0000BB">FILEINFO_MIME_TYPE </span><span style="color: #007700">: </span><span style="color: #0000BB">FILEINFO_MIME</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$info</span><span style="color: #007700">=</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">===</span><span style="color: #0000BB">null </span><span style="color: #007700">? </span><span style="color: #0000BB">finfo_open</span><span style="color: #007700">(</span><span style="color: #0000BB">$options</span><span style="color: #007700">) : </span><span style="color: #0000BB">finfo_open</span><span style="color: #007700">(</span><span style="color: #0000BB">$options</span><span style="color: #007700">,</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">);<br><br>        if(</span><span style="color: #0000BB">$info </span><span style="color: #007700">&amp;&amp; (</span><span style="color: #0000BB">$result</span><span style="color: #007700">=</span><span style="color: #0000BB">finfo_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$info</span><span style="color: #007700">,</span><span style="color: #0000BB">$file</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'mime_content_type'</span><span style="color: #007700">) &amp;&amp; (</span><span style="color: #0000BB">$result</span><span style="color: #007700">=</span><span style="color: #0000BB">mime_content_type</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br><br>    return </span><span style="color: #0000BB">$checkExtension </span><span style="color: #007700">? </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getMimeTypeByExtension</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">) : </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Determines the MIME type of the specified file. This method will attempt the following approaches in order: </p>
<ol> <li>finfo</li> <li>mime_content_type</li> <li>
<a href="cfilehelper#getMimeTypeByExtension">getMimeTypeByExtension</a>, when $checkExtension is set true.</li> </ol> <h3 class="detailHeader" id="getMimeTypeByExtension-detail"> getMimeTypeByExtension() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static string <b>getMimeTypeByExtension</b>(string $file, string $magicFile=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$file</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the file name.</td> </tr> <tr> <td class="paramNameCol">$magicFile</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the path of the file that contains all available MIME type information. If this is not set, the default 'system.utils.mimeTypes' file will be used. This parameter has been available since version 1.1.3.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the MIME type. Null is returned if the MIME type cannot be determined.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L301">framework/utils/CFileHelper.php#301</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">getMimeTypeByExtension</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    static </span><span style="color: #0000BB">$extensions</span><span style="color: #007700">,</span><span style="color: #0000BB">$customExtensions</span><span style="color: #007700">=array();<br>    if(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">===</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$extensions</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$extensions</span><span style="color: #007700">=require(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">getPathOfAlias</span><span style="color: #007700">(</span><span style="color: #DD0000">'system.utils.mimeTypes'</span><span style="color: #007700">).</span><span style="color: #DD0000">'.php'</span><span style="color: #007700">);<br>    elseif(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; !isset(</span><span style="color: #0000BB">$customExtensions</span><span style="color: #007700">[</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">]))<br>        </span><span style="color: #0000BB">$customExtensions</span><span style="color: #007700">[</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">]=require(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">);<br>    if((</span><span style="color: #0000BB">$ext</span><span style="color: #007700">=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getExtension</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">))!==</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$ext</span><span style="color: #007700">=</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$ext</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">===</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; isset(</span><span style="color: #0000BB">$extensions</span><span style="color: #007700">[</span><span style="color: #0000BB">$ext</span><span style="color: #007700">]))<br>            return </span><span style="color: #0000BB">$extensions</span><span style="color: #007700">[</span><span style="color: #0000BB">$ext</span><span style="color: #007700">];<br>        elseif(</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; isset(</span><span style="color: #0000BB">$customExtensions</span><span style="color: #007700">[</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">][</span><span style="color: #0000BB">$ext</span><span style="color: #007700">]))<br>            return </span><span style="color: #0000BB">$customExtensions</span><span style="color: #007700">[</span><span style="color: #0000BB">$magicFile</span><span style="color: #007700">][</span><span style="color: #0000BB">$ext</span><span style="color: #007700">];<br>    }<br>    return </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Determines the MIME type based on the extension name of the specified file. This method will use a local map between extension name and MIME type.</p> <h3 class="detailHeader" id="removeDirectory-detail"> removeDirectory() <span class="detailHeaderTag"> method (available since v1.1.14) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static void <b>removeDirectory</b>(string $directory, array $options=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$directory</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">to be deleted recursively.</td> </tr> <tr> <td class="paramNameCol">$options</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">for the directory removal. Valid options are: <ul> <li>traverseSymlinks: boolean, whether symlinks to the directories should be traversed too. Defaults to `false`, meaning that the content of the symlinked directory would not be deleted. Only symlink would be removed in that default case.</li> </ul> Note, options parameter is available since 1.1.16</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L78">framework/utils/CFileHelper.php#78</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public static function </span><span style="color: #0000BB">removeDirectory</span><span style="color: #007700">(</span><span style="color: #0000BB">$directory</span><span style="color: #007700">,</span><span style="color: #0000BB">$options</span><span style="color: #007700">=array())<br>{<br>    if(!isset(</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'traverseSymlinks'</span><span style="color: #007700">]))<br>        </span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'traverseSymlinks'</span><span style="color: #007700">]=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$items</span><span style="color: #007700">=</span><span style="color: #0000BB">glob</span><span style="color: #007700">(</span><span style="color: #0000BB">$directory</span><span style="color: #007700">.</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #DD0000">'{,.}*'</span><span style="color: #007700">,</span><span style="color: #0000BB">GLOB_MARK </span><span style="color: #007700">| </span><span style="color: #0000BB">GLOB_BRACE</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$items </span><span style="color: #007700">as </span><span style="color: #0000BB">$item</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">)==</span><span style="color: #DD0000">'.' </span><span style="color: #007700">|| </span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">)==</span><span style="color: #DD0000">'..'</span><span style="color: #007700">)<br>            continue;<br>        if(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">,-</span><span style="color: #0000BB">1</span><span style="color: #007700">)==</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">)<br>        {<br>            if(!</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'traverseSymlinks'</span><span style="color: #007700">] &amp;&amp; </span><span style="color: #0000BB">is_link</span><span style="color: #007700">(</span><span style="color: #0000BB">rtrim</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">,</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">)))<br>                </span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">rtrim</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">,</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">));<br>            else<br>                </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">removeDirectory</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">,</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br>        }<br>        else<br>            </span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">);<br>    }<br>    if(</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #0000BB">$directory</span><span style="color: #007700">=</span><span style="color: #0000BB">rtrim</span><span style="color: #007700">(</span><span style="color: #0000BB">$directory</span><span style="color: #007700">,</span><span style="color: #DD0000">'\\/'</span><span style="color: #007700">)))<br>    {<br>        if(</span><span style="color: #0000BB">is_link</span><span style="color: #007700">(</span><span style="color: #0000BB">$directory</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$directory</span><span style="color: #007700">);<br>        else<br>            </span><span style="color: #0000BB">rmdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$directory</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Removes a directory recursively.</p> <h3 class="detailHeader" id="validatePath-detail"> validatePath() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected static boolean <b>validatePath</b>(string $base, string $file, boolean $isFile, array $fileTypes, array $exclude)</pre> </td></tr> <tr> <td class="paramNameCol">$base</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the path relative to the original source directory</td> </tr> <tr> <td class="paramNameCol">$file</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the file or directory name</td> </tr> <tr> <td class="paramNameCol">$isFile</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether this is a file</td> </tr> <tr> <td class="paramNameCol">$fileTypes</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of valid file name suffixes (without dot).</td> </tr> <tr> <td class="paramNameCol">$exclude</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of directory and file exclusions. Each exclusion can be either a name or a path. If a file or directory name or path matches the exclusion, false will be returned. For example, an exclusion of '.svn' will return false for all files and directories whose name is '.svn'. And an exclusion of '/a/b' will return false for file or directory '$src/a/b'. Note, that '/' should be used as separator regardless of the value of the DIRECTORY_SEPARATOR constant.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the file or directory is valid</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/utils/CFileHelper.php#L242">framework/utils/CFileHelper.php#242</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected static function </span><span style="color: #0000BB">validatePath</span><span style="color: #007700">(</span><span style="color: #0000BB">$base</span><span style="color: #007700">,</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$isFile</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">,</span><span style="color: #0000BB">$exclude</span><span style="color: #007700">)<br>{<br>    foreach(</span><span style="color: #0000BB">$exclude </span><span style="color: #007700">as </span><span style="color: #0000BB">$e</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$file</span><span style="color: #007700">===</span><span style="color: #0000BB">$e </span><span style="color: #007700">|| </span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$base</span><span style="color: #007700">.</span><span style="color: #DD0000">'/'</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">$e</span><span style="color: #007700">)===</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    }<br>    if(!</span><span style="color: #0000BB">$isFile </span><span style="color: #007700">|| empty(</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    if((</span><span style="color: #0000BB">$type</span><span style="color: #007700">=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">getExtension</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">))!==</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">,</span><span style="color: #0000BB">$fileTypes</span><span style="color: #007700">);<br>    else<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Validates a file or directory.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CFileHelper" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CFileHelper</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
