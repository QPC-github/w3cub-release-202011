
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CDbMessageSource - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content="the ID of the cache application component that is used to cache the messages. Defaults to &#39;cache&#39; which refers to the primary cache &hellip;">
  <meta name="keywords" content="cdbmessagesource, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cdbmessagesource.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/yii~1.1.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CDbMessageSource</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.i18n">system.i18n</a></td> </tr> <tr> <th>Inheritance</th> <td>class CDbMessageSource » <a href="cmessagesource">CMessageSource</a> » <a href="capplicationcomponent">CApplicationComponent</a> » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Implements</th> <td><a href="iapplicationcomponent">IApplicationComponent</a></td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/i18n/CDbMessageSource.php">framework/i18n/CDbMessageSource.php</a></td> </tr> </table> <div id="classDescription"> CDbMessageSource represents a message source that stores translated messages in database. <br><br> The database must contain the following two tables: <pre>
CREATE TABLE SourceMessage
(
    id INTEGER PRIMARY KEY,
    category VARCHAR(32),
    message TEXT
);
CREATE TABLE Message
(
    id INTEGER,
    language VARCHAR(16),
    translation TEXT,
    PRIMARY KEY (id, language),
    CONSTRAINT FK_Message_SourceMessage FOREIGN KEY (id)
         REFERENCES SourceMessage (id) ON DELETE CASCADE ON UPDATE RESTRICT
);
</pre> The 'SourceMessage' table stores the messages to be translated, and the 'Message' table stores the translated messages. The name of these two tables can be customized by setting <a href="cdbmessagesource#sourceMessageTable">sourceMessageTable</a> and <a href="cdbmessagesource#translatedMessageTable">translatedMessageTable</a>, respectively. <br><br> When <a href="cdbmessagesource#cachingDuration">cachingDuration</a> is set as a positive number, message translations will be cached.</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="behaviors"> <td><a href="capplicationcomponent#behaviors-detail">behaviors</a></td> <td>array</td> <td>the behaviors that should be attached to this component.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="cacheID"> <td><a href="cdbmessagesource#cacheID-detail">cacheID</a></td> <td>string</td> <td>the ID of the cache application component that is used to cache the messages.</td> <td>CDbMessageSource</td> </tr> <tr id="cachingDuration"> <td><a href="cdbmessagesource#cachingDuration-detail">cachingDuration</a></td> <td>integer</td> <td>the time in seconds that the messages can remain valid in cache.</td> <td>CDbMessageSource</td> </tr> <tr id="connectionID"> <td><a href="cdbmessagesource#connectionID-detail">connectionID</a></td> <td>string</td> <td>the ID of the database connection application component.</td> <td>CDbMessageSource</td> </tr> <tr id="dbConnection"> <td><a href="cdbmessagesource#dbConnection-detail">dbConnection</a></td> <td><a href="cdbconnection">CDbConnection</a></td> <td>Returns the DB connection used for the message source.</td> <td>CDbMessageSource</td> </tr> <tr class="inherited" id="forceTranslation"> <td><a href="cmessagesource#forceTranslation-detail">forceTranslation</a></td> <td>boolean</td> <td>whether to force message translation when the source and target languages are the same.</td> <td><a href="cmessagesource">CMessageSource</a></td> </tr> <tr class="inherited" id="isInitialized"> <td><a href="capplicationcomponent#isInitialized-detail">isInitialized</a></td> <td>boolean</td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr class="inherited" id="language"> <td><a href="cmessagesource#language-detail">language</a></td> <td>string</td> <td>the language that the source messages are written in.</td> <td><a href="cmessagesource">CMessageSource</a></td> </tr> <tr id="sourceMessageTable"> <td><a href="cdbmessagesource#sourceMessageTable-detail">sourceMessageTable</a></td> <td>string</td> <td>the name of the source message table.</td> <td>CDbMessageSource</td> </tr> <tr id="translatedMessageTable"> <td><a href="cdbmessagesource#translatedMessageTable-detail">translatedMessageTable</a></td> <td>string</td> <td>the name of the translated message table.</td> <td>CDbMessageSource</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__get"> <td><a href="ccomponent#__get-detail">__get()</a></td> <td>Returns a property value, an event handler list or a behavior based on its name.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__isset"> <td><a href="ccomponent#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__set"> <td><a href="ccomponent#__set-detail">__set()</a></td> <td>Sets value of a component property.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__unset"> <td><a href="ccomponent#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="getDbConnection"> <td><a href="cdbmessagesource#getDbConnection-detail">getDbConnection()</a></td> <td>Returns the DB connection used for the message source.</td> <td>CDbMessageSource</td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="getIsInitialized"> <td><a href="capplicationcomponent#getIsInitialized-detail">getIsInitialized()</a></td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr class="inherited" id="getLanguage"> <td><a href="cmessagesource#getLanguage-detail">getLanguage()</a></td> <td>Returns the language that the source messages are written in. Defaults to <a href="capplication#language">application language</a>.</td> <td><a href="cmessagesource">CMessageSource</a></td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="init"> <td><a href="capplicationcomponent#init-detail">init()</a></td> <td>Initializes the application component.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr class="inherited" id="onMissingTranslation"> <td><a href="cmessagesource#onMissingTranslation-detail">onMissingTranslation()</a></td> <td>Raised when a message cannot be translated.</td> <td><a href="cmessagesource">CMessageSource</a></td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="setLanguage"> <td><a href="cmessagesource#setLanguage-detail">setLanguage()</a></td> <td>Sets the language that the source messages are written in.</td> <td><a href="cmessagesource">CMessageSource</a></td> </tr> <tr class="inherited" id="translate"> <td><a href="cmessagesource#translate-detail">translate()</a></td> <td>Translates a message to the specified language.</td> <td><a href="cmessagesource">CMessageSource</a></td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="loadMessages"> <td><a href="cdbmessagesource#loadMessages-detail">loadMessages()</a></td> <td>Loads the message translation for the specified language and category.</td> <td>CDbMessageSource</td> </tr> <tr id="loadMessagesFromDb"> <td><a href="cdbmessagesource#loadMessagesFromDb-detail">loadMessagesFromDb()</a></td> <td>Loads the messages from database.</td> <td>CDbMessageSource</td> </tr> <tr class="inherited" id="translateMessage"> <td><a href="cmessagesource#translateMessage-detail">translateMessage()</a></td> <td>Translates the specified message.</td> <td><a href="cmessagesource">CMessageSource</a></td> </tr> </table> </div>  <div class="summary docEvent"> <h2>Events</h2>  <table class="summaryTable"> <colgroup> <col class="col-event"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Event</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="onMissingTranslation"> <td><a href="cmessagesource#onMissingTranslation-detail">onMissingTranslation</a></td> <td>Raised when a message cannot be translated.</td> <td><a href="cmessagesource">CMessageSource</a></td> </tr> </table> </div> <h2>Property Details</h2> <h3 class="detailHeader" id="cacheID-detail"> cacheID<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$cacheID</b>;</pre> <p>the ID of the cache application component that is used to cache the messages. Defaults to 'cache' which refers to the primary cache application component. Set this property to false if you want to disable caching the messages.</p> <h3 class="detailHeader" id="cachingDuration-detail"> cachingDuration<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$cachingDuration</b>;</pre> <p>the time in seconds that the messages can remain valid in cache. Defaults to 0, meaning the caching is disabled.</p> <h3 class="detailHeader" id="connectionID-detail"> connectionID<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$connectionID</b>;</pre> <p>the ID of the database connection application component. Defaults to 'db'.</p> <h3 class="detailHeader" id="dbConnection-detail"> dbConnection<span class="detailHeaderTag"> property <em>read-only</em> (available since v1.1.5) </span> </h3> <pre class="signature">public <a href="cdbconnection">CDbConnection</a> <a href="cdbmessagesource#getDbConnection"><b>getDbConnection</b></a>()</pre> <p>Returns the DB connection used for the message source.</p> <h3 class="detailHeader" id="sourceMessageTable-detail"> sourceMessageTable<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$sourceMessageTable</b>;</pre> <p>the name of the source message table. Defaults to 'SourceMessage'.</p> <h3 class="detailHeader" id="translatedMessageTable-detail"> translatedMessageTable<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$translatedMessageTable</b>;</pre> <p>the name of the translated message table. Defaults to 'Message'.</p> <h2>Method Details</h2> <h3 class="detailHeader" id="getDbConnection-detail"> getDbConnection() <span class="detailHeaderTag"> method (available since v1.1.5) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbconnection">CDbConnection</a> <b>getDbConnection</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbconnection">CDbConnection</a></td> <td class="paramDescCol">the DB connection used for the message source.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/i18n/CDbMessageSource.php#L102">framework/i18n/CDbMessageSource.php#102</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getComponent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionID</span><span style="color: #007700">);<br>        if(!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CDbConnection</span><span style="color: #007700">)<br>            throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'CDbMessageSource.connectionID is invalid. Please make sure "{id}" refers to a valid database application component.'</span><span style="color: #007700">,<br>                array(</span><span style="color: #DD0000">'{id}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionID</span><span style="color: #007700">)));<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the DB connection used for the message source.</p> <h3 class="detailHeader" id="loadMessages-detail"> loadMessages() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected array <b>loadMessages</b>(string $category, string $language)</pre> </td></tr> <tr> <td class="paramNameCol">$category</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the message category</td> </tr> <tr> <td class="paramNameCol">$language</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the target language</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the loaded messages</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/i18n/CDbMessageSource.php#L77">framework/i18n/CDbMessageSource.php#77</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">loadMessages</span><span style="color: #007700">(</span><span style="color: #0000BB">$category</span><span style="color: #007700">,</span><span style="color: #0000BB">$language</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cachingDuration</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0 </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheID</span><span style="color: #007700">!==</span><span style="color: #0000BB">false </span><span style="color: #007700">&amp;&amp; (</span><span style="color: #0000BB">$cache</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getComponent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheID</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$key</span><span style="color: #007700">=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">CACHE_KEY_PREFIX</span><span style="color: #007700">.</span><span style="color: #DD0000">'.messages.'</span><span style="color: #007700">.</span><span style="color: #0000BB">$category</span><span style="color: #007700">.</span><span style="color: #DD0000">'.'</span><span style="color: #007700">.</span><span style="color: #0000BB">$language</span><span style="color: #007700">;<br>        if((</span><span style="color: #0000BB">$data</span><span style="color: #007700">=</span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br>    }<br><br>    </span><span style="color: #0000BB">$messages</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadMessagesFromDb</span><span style="color: #007700">(</span><span style="color: #0000BB">$category</span><span style="color: #007700">,</span><span style="color: #0000BB">$language</span><span style="color: #007700">);<br><br>    if(isset(</span><span style="color: #0000BB">$cache</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">serialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$messages</span><span style="color: #007700">),</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cachingDuration</span><span style="color: #007700">);<br><br>    return </span><span style="color: #0000BB">$messages</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Loads the message translation for the specified language and category.</p> <h3 class="detailHeader" id="loadMessagesFromDb-detail"> loadMessagesFromDb() <span class="detailHeaderTag"> method (available since v1.1.5) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected array <b>loadMessagesFromDb</b>(string $category, string $language)</pre> </td></tr> <tr> <td class="paramNameCol">$category</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the message category</td> </tr> <tr> <td class="paramNameCol">$language</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the target language</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the messages loaded from database</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/i18n/CDbMessageSource.php#L122">framework/i18n/CDbMessageSource.php#122</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">loadMessagesFromDb</span><span style="color: #007700">(</span><span style="color: #0000BB">$category</span><span style="color: #007700">,</span><span style="color: #0000BB">$language</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">()<br>        -&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">(</span><span style="color: #DD0000">"t1.message AS message, t2.translation AS translation"</span><span style="color: #007700">)<br>        -&gt;</span><span style="color: #0000BB">from</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sourceMessageTable</span><span style="color: #007700">}</span><span style="color: #DD0000"> t1"</span><span style="color: #007700">,</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">translatedMessageTable</span><span style="color: #007700">}</span><span style="color: #DD0000"> t2"</span><span style="color: #007700">))<br>        -&gt;</span><span style="color: #0000BB">where</span><span style="color: #007700">(</span><span style="color: #DD0000">'t1.id=t2.id AND t1.category=:category AND t2.language=:language'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">':category'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$category</span><span style="color: #007700">,</span><span style="color: #DD0000">':language'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$language</span><span style="color: #007700">))<br>    ;<br>    </span><span style="color: #0000BB">$messages</span><span style="color: #007700">=array();<br>    foreach(</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryAll</span><span style="color: #007700">() as </span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$messages</span><span style="color: #007700">[</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'message'</span><span style="color: #007700">]]=</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'translation'</span><span style="color: #007700">];<br><br>    return </span><span style="color: #0000BB">$messages</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Loads the messages from database. You may override this method to customize the message storage in the database.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CDbMessageSource" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CDbMessageSource</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
