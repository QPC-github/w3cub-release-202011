
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CDbFixtureManager - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" the base path containing all fixtures. Defaults to null, meaning the path &#39;protected&#47;tests&#47;fixtures&#39;. ">
  <meta name="keywords" content="cdbfixturemanager, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cdbfixturemanager.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/yii~1.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CDbFixtureManager</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.test">system.test</a></td> </tr> <tr> <th>Inheritance</th> <td>class CDbFixtureManager » <a href="capplicationcomponent">CApplicationComponent</a> » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Implements</th> <td><a href="iapplicationcomponent">IApplicationComponent</a></td> </tr> <tr> <th>Since</th> <td>1.1</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php">framework/test/CDbFixtureManager.php</a></td> </tr> </table> <div id="classDescription"> CDbFixtureManager manages database fixtures during tests. <br><br> A fixture represents a list of rows for a specific table. For a test method, using a fixture means that at the beginning of the method, the table has and only has the rows that are given in the fixture. Therefore, the table's state is predictable. <br><br> A fixture is represented as a PHP script whose name (without suffix) is the same as the table name (if schema name is needed, it should be prefixed to the table name). The PHP script returns an array representing a list of table rows. Each row is an associative array of column values indexed by column names. <br><br> A fixture can be associated with an init script which sits under the same fixture directory and is named as "TableName.init.php". The init script is used to initialize the table before populating the fixture data into the table. If the init script does not exist, the table will be emptied. <br><br> Fixtures must be stored under the <a href="cdbfixturemanager#basePath">basePath</a> directory. The directory may contain a file named "init.php" which will be executed once to initialize the database. If this file is not found, all available fixtures will be loaded into the database.</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="basePath"> <td><a href="cdbfixturemanager#basePath-detail">basePath</a></td> <td>string</td> <td>the base path containing all fixtures.</td> <td>CDbFixtureManager</td> </tr> <tr class="inherited" id="behaviors"> <td><a href="capplicationcomponent#behaviors-detail">behaviors</a></td> <td>array</td> <td>the behaviors that should be attached to this component.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="connectionID"> <td><a href="cdbfixturemanager#connectionID-detail">connectionID</a></td> <td>string</td> <td>the ID of the database connection.</td> <td>CDbFixtureManager</td> </tr> <tr id="dbConnection"> <td><a href="cdbfixturemanager#dbConnection-detail">dbConnection</a></td> <td><a href="cdbconnection">CDbConnection</a></td> <td>Returns the database connection used to load fixtures.</td> <td>CDbFixtureManager</td> </tr> <tr id="fixtures"> <td><a href="cdbfixturemanager#fixtures-detail">fixtures</a></td> <td>array</td> <td>Returns the information of the available fixtures.</td> <td>CDbFixtureManager</td> </tr> <tr id="initScript"> <td><a href="cdbfixturemanager#initScript-detail">initScript</a></td> <td>string</td> <td>the name of the initialization script that would be executed before the whole test set runs.</td> <td>CDbFixtureManager</td> </tr> <tr id="initScriptSuffix"> <td><a href="cdbfixturemanager#initScriptSuffix-detail">initScriptSuffix</a></td> <td>string</td> <td>the suffix for fixture initialization scripts.</td> <td>CDbFixtureManager</td> </tr> <tr class="inherited" id="isInitialized"> <td><a href="capplicationcomponent#isInitialized-detail">isInitialized</a></td> <td>boolean</td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="schemas"> <td><a href="cdbfixturemanager#schemas-detail">schemas</a></td> <td>array</td> <td>list of database schemas that the test tables may reside in.</td> <td>CDbFixtureManager</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__get"> <td><a href="ccomponent#__get-detail">__get()</a></td> <td>Returns a property value, an event handler list or a behavior based on its name.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__isset"> <td><a href="ccomponent#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__set"> <td><a href="ccomponent#__set-detail">__set()</a></td> <td>Sets value of a component property.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__unset"> <td><a href="ccomponent#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="checkIntegrity"> <td><a href="cdbfixturemanager#checkIntegrity-detail">checkIntegrity()</a></td> <td>Enables or disables database integrity check.</td> <td>CDbFixtureManager</td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="getDbConnection"> <td><a href="cdbfixturemanager#getDbConnection-detail">getDbConnection()</a></td> <td>Returns the database connection used to load fixtures.</td> <td>CDbFixtureManager</td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="getFixtures"> <td><a href="cdbfixturemanager#getFixtures-detail">getFixtures()</a></td> <td>Returns the information of the available fixtures.</td> <td>CDbFixtureManager</td> </tr> <tr class="inherited" id="getIsInitialized"> <td><a href="capplicationcomponent#getIsInitialized-detail">getIsInitialized()</a></td> <td>Checks if this application component has been initialized.</td> <td><a href="capplicationcomponent">CApplicationComponent</a></td> </tr> <tr id="getRecord"> <td><a href="cdbfixturemanager#getRecord-detail">getRecord()</a></td> <td>Returns the specified ActiveRecord instance in the fixture data.</td> <td>CDbFixtureManager</td> </tr> <tr id="getRows"> <td><a href="cdbfixturemanager#getRows-detail">getRows()</a></td> <td>Returns the fixture data rows.</td> <td>CDbFixtureManager</td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="init"> <td><a href="cdbfixturemanager#init-detail">init()</a></td> <td>Initializes this application component.</td> <td>CDbFixtureManager</td> </tr> <tr id="load"> <td><a href="cdbfixturemanager#load-detail">load()</a></td> <td>Loads the specified fixtures.</td> <td>CDbFixtureManager</td> </tr> <tr id="loadFixture"> <td><a href="cdbfixturemanager#loadFixture-detail">loadFixture()</a></td> <td>Loads the fixture for the specified table.</td> <td>CDbFixtureManager</td> </tr> <tr id="prepare"> <td><a href="cdbfixturemanager#prepare-detail">prepare()</a></td> <td>Prepares the fixtures for the whole test.</td> <td>CDbFixtureManager</td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="resetTable"> <td><a href="cdbfixturemanager#resetTable-detail">resetTable()</a></td> <td>Resets the table to the state that it contains no fixture data.</td> <td>CDbFixtureManager</td> </tr> <tr id="truncateTable"> <td><a href="cdbfixturemanager#truncateTable-detail">truncateTable()</a></td> <td>Removes all rows from the specified table and resets its primary key sequence, if any.</td> <td>CDbFixtureManager</td> </tr> <tr id="truncateTables"> <td><a href="cdbfixturemanager#truncateTables-detail">truncateTables()</a></td> <td>Truncates all tables in the specified schema.</td> <td>CDbFixtureManager</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="basePath-detail"> basePath<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$basePath</b>;</pre> <p>the base path containing all fixtures. Defaults to null, meaning the path 'protected/tests/fixtures'.</p> <h3 class="detailHeader" id="connectionID-detail"> connectionID<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$connectionID</b>;</pre> <p>the ID of the database connection. Defaults to 'db'. Note, data in this database may be deleted or modified during testing. Make sure you have a backup database.</p> <h3 class="detailHeader" id="dbConnection-detail"> dbConnection<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public <a href="cdbconnection">CDbConnection</a> <a href="cdbfixturemanager#getDbConnection"><b>getDbConnection</b></a>()</pre> <p>Returns the database connection used to load fixtures.</p> <h3 class="detailHeader" id="fixtures-detail"> fixtures<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public array <a href="cdbfixturemanager#getFixtures"><b>getFixtures</b></a>()</pre> <p>Returns the information of the available fixtures. This method will search for all PHP files under <a href="cdbfixturemanager#basePath">basePath</a>. If a file's name is the same as a table name, it is considered to be the fixture data for that table.</p> <h3 class="detailHeader" id="initScript-detail"> initScript<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$initScript</b>;</pre> <p>the name of the initialization script that would be executed before the whole test set runs. Defaults to 'init.php'. If the script does not exist, every table with a fixture file will be reset.</p> <h3 class="detailHeader" id="initScriptSuffix-detail"> initScriptSuffix<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$initScriptSuffix</b>;</pre> <p>the suffix for fixture initialization scripts. If a table is associated with such a script whose name is TableName suffixed this property value, then the script will be executed each time before the table is reset.</p> <h3 class="detailHeader" id="schemas-detail"> schemas<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$schemas</b>;</pre> <p>list of database schemas that the test tables may reside in. Defaults to array(''), meaning using the default schema (an empty string refers to the default schema). This property is mainly used when turning on and off integrity checks so that fixture data can be populated into the database without causing problem.</p> <h2>Method Details</h2> <h3 class="detailHeader" id="checkIntegrity-detail"> checkIntegrity() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>checkIntegrity</b>(boolean $check)</pre> </td></tr> <tr> <td class="paramNameCol">$check</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether to enable database integrity check</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L232">framework/test/CDbFixtureManager.php#232</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">checkIntegrity</span><span style="color: #007700">(</span><span style="color: #0000BB">$check</span><span style="color: #007700">)<br>{<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">schemas </span><span style="color: #007700">as </span><span style="color: #0000BB">$schema</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">checkIntegrity</span><span style="color: #007700">(</span><span style="color: #0000BB">$check</span><span style="color: #007700">,</span><span style="color: #0000BB">$schema</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Enables or disables database integrity check. This method may be used to temporarily turn off foreign constraints check.</p> <h3 class="detailHeader" id="getDbConnection-detail"> getDbConnection() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cdbconnection">CDbConnection</a> <b>getDbConnection</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cdbconnection">CDbConnection</a></td> <td class="paramDescCol">the database connection</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L95">framework/test/CDbFixtureManager.php#95</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getComponent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionID</span><span style="color: #007700">);<br>        if(!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CDbConnection</span><span style="color: #007700">)<br>            throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'CDbTestFixture.connectionID "{id}" is invalid. Please make sure it refers to the ID of a CDbConnection application component.'</span><span style="color: #007700">,<br>                array(</span><span style="color: #DD0000">'{id}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connectionID</span><span style="color: #007700">)));<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_db</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the database connection used to load fixtures.</p> <h3 class="detailHeader" id="getFixtures-detail"> getFixtures() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>getFixtures</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the information of the available fixtures (table name =&gt; fixture file)</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L202">framework/test/CDbFixtureManager.php#202</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getFixtures</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_fixtures</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_fixtures</span><span style="color: #007700">=array();<br>        </span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$folder</span><span style="color: #007700">=</span><span style="color: #0000BB">opendir</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">basePath</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$suffixLen</span><span style="color: #007700">=</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">initScriptSuffix</span><span style="color: #007700">);<br>        while(</span><span style="color: #0000BB">$file</span><span style="color: #007700">=</span><span style="color: #0000BB">readdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$folder</span><span style="color: #007700">))<br>        {<br>            if(</span><span style="color: #0000BB">$file</span><span style="color: #007700">===</span><span style="color: #DD0000">'.' </span><span style="color: #007700">|| </span><span style="color: #0000BB">$file</span><span style="color: #007700">===</span><span style="color: #DD0000">'..' </span><span style="color: #007700">|| </span><span style="color: #0000BB">$file</span><span style="color: #007700">===</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">initScript</span><span style="color: #007700">)<br>                continue;<br>            </span><span style="color: #0000BB">$path</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">basePath</span><span style="color: #007700">.</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">;<br>            if(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,-</span><span style="color: #0000BB">4</span><span style="color: #007700">)===</span><span style="color: #DD0000">'.php' </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">is_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$path</span><span style="color: #007700">) &amp;&amp; </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,-</span><span style="color: #0000BB">$suffixLen</span><span style="color: #007700">)!==</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">initScriptSuffix</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$tableName</span><span style="color: #007700">=</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,-</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br>                if(</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">)!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>                    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_fixtures</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">]=</span><span style="color: #0000BB">$path</span><span style="color: #007700">;<br>            }<br>        }<br>        </span><span style="color: #0000BB">closedir</span><span style="color: #007700">(</span><span style="color: #0000BB">$folder</span><span style="color: #007700">);<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_fixtures</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the information of the available fixtures. This method will search for all PHP files under <a href="cdbfixturemanager#basePath">basePath</a>. If a file's name is the same as a table name, it is considered to be the fixture data for that table.</p> <h3 class="detailHeader" id="getRecord-detail"> getRecord() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="cactiverecord">CActiveRecord</a> <b>getRecord</b>(string $name, string $alias)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the fixture name</td> </tr> <tr> <td class="paramNameCol">$alias</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the alias for the fixture data row</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cactiverecord">CActiveRecord</a></td> <td class="paramDescCol">the ActiveRecord instance. False is returned if there is no such fixture row.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L342">framework/test/CDbFixtureManager.php#342</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$alias</span><span style="color: #007700">)<br>{<br>    if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_records</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]))<br>    {<br>        if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_records</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]))<br>        {<br>            </span><span style="color: #0000BB">$row</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_rows</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][</span><span style="color: #0000BB">$alias</span><span style="color: #007700">];<br>            </span><span style="color: #0000BB">$model</span><span style="color: #007700">=</span><span style="color: #0000BB">CActiveRecord</span><span style="color: #007700">::</span><span style="color: #0000BB">model</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_records</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]);<br>            </span><span style="color: #0000BB">$key</span><span style="color: #007700">=</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">;<br>            if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">))<br>                </span><span style="color: #0000BB">$pk</span><span style="color: #007700">=</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">];<br>            else<br>            {<br>                foreach(</span><span style="color: #0000BB">$key </span><span style="color: #007700">as </span><span style="color: #0000BB">$k</span><span style="color: #007700">)<br>                    </span><span style="color: #0000BB">$pk</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]=</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">];<br>            }<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_records</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]=</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findByPk</span><span style="color: #007700">(</span><span style="color: #0000BB">$pk</span><span style="color: #007700">);<br>        }<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_records</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][</span><span style="color: #0000BB">$alias</span><span style="color: #007700">];<br>    }<br>    else<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the specified ActiveRecord instance in the fixture data.</p> <h3 class="detailHeader" id="getRows-detail"> getRows() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>getRows</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the fixture name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the fixture data rows. False is returned if there is no such fixture data.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L328">framework/test/CDbFixtureManager.php#328</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getRows</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_rows</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_rows</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br>    else<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the fixture data rows. The rows will have updated primary key values if the primary key is auto-incremental.</p> <h3 class="detailHeader" id="init-detail"> init() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>init</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L82">framework/test/CDbFixtureManager.php#82</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">init</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">basePath</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">basePath</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">getPathOfAlias</span><span style="color: #007700">(</span><span style="color: #DD0000">'application.tests.fixtures'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Initializes this application component.</p> <h3 class="detailHeader" id="load-detail"> load() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>load</b>(array $fixtures)</pre> </td></tr> <tr> <td class="paramNameCol">$fixtures</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">fixtures to be loaded. The array keys are fixture names, and the array values are either AR class names or table names. If table names, they must begin with a colon character (e.g. 'Post' means an AR class, while ':Post' means a table name).</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L285">framework/test/CDbFixtureManager.php#285</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #0000BB">$fixtures</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">checkIntegrity</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_rows</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_records</span><span style="color: #007700">=array();<br>    foreach(</span><span style="color: #0000BB">$fixtures </span><span style="color: #007700">as </span><span style="color: #0000BB">$fixtureName</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]===</span><span style="color: #DD0000">':'</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$tableName</span><span style="color: #007700">=</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br>            unset(</span><span style="color: #0000BB">$modelClass</span><span style="color: #007700">);<br>        }<br>        else<br>        {<br>            </span><span style="color: #0000BB">$modelClass</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">import</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$tableName</span><span style="color: #007700">=</span><span style="color: #0000BB">CActiveRecord</span><span style="color: #007700">::</span><span style="color: #0000BB">model</span><span style="color: #007700">(</span><span style="color: #0000BB">$modelClass</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">tableName</span><span style="color: #007700">();<br>        }<br>        if((</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">tablePrefix</span><span style="color: #007700">)!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$tableName</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'/{{(.*?)}}/'</span><span style="color: #007700">,</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #DD0000">'\1'</span><span style="color: #007700">,</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">resetTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$rows</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadFixture</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$rows</span><span style="color: #007700">) &amp;&amp; </span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$fixtureName</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_rows</span><span style="color: #007700">[</span><span style="color: #0000BB">$fixtureName</span><span style="color: #007700">]=</span><span style="color: #0000BB">$rows</span><span style="color: #007700">;<br>            if(isset(</span><span style="color: #0000BB">$modelClass</span><span style="color: #007700">))<br>            {<br>                foreach(</span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(</span><span style="color: #0000BB">$rows</span><span style="color: #007700">) as </span><span style="color: #0000BB">$alias</span><span style="color: #007700">)<br>                    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_records</span><span style="color: #007700">[</span><span style="color: #0000BB">$fixtureName</span><span style="color: #007700">][</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]=</span><span style="color: #0000BB">$modelClass</span><span style="color: #007700">;<br>            }<br>        }<br>    }<br><br>    </span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">checkIntegrity</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Loads the specified fixtures. For each fixture, the corresponding table will be reset first by calling <a href="cdbfixturemanager#resetTable">resetTable</a> and then be populated with the fixture data. The loaded fixture data may be later retrieved using <a href="cdbfixturemanager#getRows">getRows</a> and <a href="cdbfixturemanager#getRecord">getRecord</a>. Note, if a table does not have fixture data, <a href="cdbfixturemanager#resetTable">resetTable</a> will still be called to reset the table.</p> <h3 class="detailHeader" id="loadFixture-detail"> loadFixture() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>loadFixture</b>(string $tableName)</pre> </td></tr> <tr> <td class="paramNameCol">$tableName</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">table name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the loaded fixture rows indexed by row aliases (if any). False is returned if the table does not have a fixture.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L160">framework/test/CDbFixtureManager.php#160</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">loadFixture</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$fileName</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">basePath</span><span style="color: #007700">.</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">.</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">.</span><span style="color: #DD0000">'.php'</span><span style="color: #007700">;<br>    if(!</span><span style="color: #0000BB">is_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$fileName</span><span style="color: #007700">))<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$rows</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">);<br><br>    foreach(require(</span><span style="color: #0000BB">$fileName</span><span style="color: #007700">) as </span><span style="color: #0000BB">$alias</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createInsertCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,</span><span style="color: #0000BB">$row</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">=</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">;<br>        if(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sequenceName</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">) &amp;&amp; !isset(</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">]))<br>                </span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">]=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLastInsertID</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">);<br>            elseif(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$primaryKey</span><span style="color: #007700">))<br>            {<br>                foreach(</span><span style="color: #0000BB">$primaryKey </span><span style="color: #007700">as </span><span style="color: #0000BB">$pk</span><span style="color: #007700">)<br>                {<br>                    if(!isset(</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">$pk</span><span style="color: #007700">]))<br>                    {<br>                        </span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">$pk</span><span style="color: #007700">]=</span><span style="color: #0000BB">$builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLastInsertID</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">);<br>                        break;<br>                    }<br>                }<br>            }<br>        }<br>        </span><span style="color: #0000BB">$rows</span><span style="color: #007700">[</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]=</span><span style="color: #0000BB">$row</span><span style="color: #007700">;<br>    }<br>    return </span><span style="color: #0000BB">$rows</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Loads the fixture for the specified table. This method will insert rows given in the fixture into the corresponding table. The loaded rows will be returned by this method. If the table has auto-incremental primary key, each row will contain updated primary key value. If the fixture does not exist, this method will return false. Note, you may want to call <a href="cdbfixturemanager#resetTable">resetTable</a> before calling this method so that the table is emptied first.</p> <h3 class="detailHeader" id="prepare-detail"> prepare() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>prepare</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L112">framework/test/CDbFixtureManager.php#112</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">prepare</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$initFile</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">basePath </span><span style="color: #007700">. </span><span style="color: #0000BB">DIRECTORY_SEPARATOR </span><span style="color: #007700">. </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">initScript</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">checkIntegrity</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br><br>    if(</span><span style="color: #0000BB">is_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$initFile</span><span style="color: #007700">))<br>        require(</span><span style="color: #0000BB">$initFile</span><span style="color: #007700">);<br>    else<br>    {<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFixtures</span><span style="color: #007700">() as </span><span style="color: #0000BB">$tableName</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$fixturePath</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">resetTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadFixture</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">);<br>        }<br>    }<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">checkIntegrity</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Prepares the fixtures for the whole test. This method is invoked in <a href="cdbfixturemanager#init">init</a>. It executes the database init script if it exists. Otherwise, it will load all available fixtures.</p> <h3 class="detailHeader" id="resetTable-detail"> resetTable() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>resetTable</b>(string $tableName)</pre> </td></tr> <tr> <td class="paramNameCol">$tableName</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the table name</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L139">framework/test/CDbFixtureManager.php#139</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">resetTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$initFile</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">basePath </span><span style="color: #007700">. </span><span style="color: #0000BB">DIRECTORY_SEPARATOR </span><span style="color: #007700">. </span><span style="color: #0000BB">$tableName </span><span style="color: #007700">. </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">initScriptSuffix</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">is_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$initFile</span><span style="color: #007700">))<br>        require(</span><span style="color: #0000BB">$initFile</span><span style="color: #007700">);<br>    else<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">truncateTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Resets the table to the state that it contains no fixture data. If there is an init script named "tests/fixtures/TableName.init.php", the script will be executed. Otherwise, <a href="cdbfixturemanager#truncateTable">truncateTable</a> will be invoked to delete all rows in the table and reset primary key sequence, if any.</p> <h3 class="detailHeader" id="truncateTable-detail"> truncateTable() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>truncateTable</b>(string $tableName)</pre> </td></tr> <tr> <td class="paramNameCol">$tableName</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the table name</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L245">framework/test/CDbFixtureManager.php#245</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">truncateTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$db</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">();<br>    if((</span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">'DELETE FROM '</span><span style="color: #007700">.</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawName</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">resetSequence</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br>    }<br>    else<br>        throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #DD0000">"Table '</span><span style="color: #0000BB">$tableName</span><span style="color: #DD0000">' does not exist."</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Removes all rows from the specified table and resets its primary key sequence, if any. You may need to call <a href="cdbfixturemanager#checkIntegrity">checkIntegrity</a> to turn off integrity check temporarily before you call this method.</p> <h3 class="detailHeader" id="truncateTables-detail"> truncateTables() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>truncateTables</b>(string $schema='')</pre> </td></tr> <tr> <td class="paramNameCol">$schema</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the schema name. Defaults to empty string, meaning the default database schema.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/test/CDbFixtureManager.php#L265">framework/test/CDbFixtureManager.php#265</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">truncateTables</span><span style="color: #007700">(</span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$tableNames</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getTableNames</span><span style="color: #007700">(</span><span style="color: #0000BB">$schema</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$tableNames </span><span style="color: #007700">as </span><span style="color: #0000BB">$tableName</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">truncateTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Truncates all tables in the specified schema. You may need to call <a href="cdbfixturemanager#checkIntegrity">checkIntegrity</a> to turn off integrity check temporarily before you call this method.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cdbfixturemanager#truncateTable">truncateTable</a></li> </ul> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CDbFixtureManager" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CDbFixtureManager</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
