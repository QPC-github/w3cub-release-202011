
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CFileValidator - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content="whether the attribute requires a file to be uploaded or not. Defaults to false, meaning a file is required to be uploaded. When no file is uploaded &hellip;">
  <meta name="keywords" content="cfilevalidator, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cfilevalidator.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/yii~1.1.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CFileValidator</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.validators">system.validators</a></td> </tr> <tr> <th>Inheritance</th> <td>class CFileValidator » <a href="cvalidator">CValidator</a> » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/validators/CFileValidator.php">framework/validators/CFileValidator.php</a></td> </tr> </table> <div id="classDescription"> CFileValidator verifies if an attribute is receiving a valid uploaded file. <br><br> It uses the model class and attribute name to retrieve the information about the uploaded file. It then checks if a file is uploaded successfully, if the file size is within the limit and if the file type is allowed. <br><br> This validator will attempt to fetch uploaded data if attribute is not previously set. Please note that this cannot be done if input is tabular: <pre>
 foreach($models as $i=&gt;$model)
    $model-&gt;attribute = CUploadedFile::getInstance($model, "[$i]attribute");
</pre> Please note that you must use <a href="cuploadedfile#getInstances">CUploadedFile::getInstances</a> for multiple file uploads. <br><br> When using CFileValidator with an active record, the following code is often used: <pre>
 $model-&gt;attribute = CUploadedFile::getInstance($model, "attribute");
 if($model-&gt;save())
 {
    // single upload
    $model-&gt;attribute-&gt;saveAs($path);
    // multiple upload
    foreach($model-&gt;attribute as $file)
       $file-&gt;saveAs($path);
 }
</pre> <br><br> You can use <a href="cfilevalidator">CFileValidator</a> to validate the file attribute. <br><br> In addition to the <a href="cfilevalidator#message">message</a> property for setting a custom error message, CFileValidator has a few custom error messages you can set that correspond to different validation scenarios. When the file is too large, you may use the <a href="cfilevalidator#tooLarge">tooLarge</a> property to define a custom error message. Similarly for <a href="cfilevalidator#tooSmall">tooSmall</a>, <a href="cfilevalidator#wrongType">wrongType</a> and <a href="cfilevalidator#tooMany">tooMany</a>. The messages may contain additional placeholders that will be replaced with the actual content. In addition to the "{attribute}" placeholder, recognized by all validators (see <a href="cvalidator">CValidator</a>), CFileValidator allows for the following placeholders to be specified: <ul> <li>{file}: replaced with the name of the file.</li> <li>{limit}: when using <a href="cfilevalidator#tooLarge">tooLarge</a>, replaced with <a href="cfilevalidator#maxSize">maxSize</a>; when using <a href="cfilevalidator#tooSmall">tooSmall</a>, replaced with <a href="cfilevalidator#minSize">minSize</a>; and when using <a href="cfilevalidator#tooMany">tooMany</a> replaced with <a href="cfilevalidator#maxFiles">maxFiles</a>.</li> <li>{extensions}: when using <a href="cfilevalidator#wrongType">wrongType</a>, it will be replaced with the allowed extensions.</li> </ul>
</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="allowEmpty"> <td><a href="cfilevalidator#allowEmpty-detail">allowEmpty</a></td> <td>boolean</td> <td>whether the attribute requires a file to be uploaded or not.</td> <td>CFileValidator</td> </tr> <tr class="inherited" id="attributes"> <td><a href="cvalidator#attributes-detail">attributes</a></td> <td>array</td> <td>list of attributes to be validated.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="builtInValidators"> <td><a href="cvalidator#builtInValidators-detail">builtInValidators</a></td> <td>array</td> <td>list of built-in validators (name=&gt;class)</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="enableClientValidation"> <td><a href="cvalidator#enableClientValidation-detail">enableClientValidation</a></td> <td>boolean</td> <td>whether to perform client-side validation.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="except"> <td><a href="cvalidator#except-detail">except</a></td> <td>array</td> <td>list of scenarios that the validator should not be applied to.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="maxFiles"> <td><a href="cfilevalidator#maxFiles-detail">maxFiles</a></td> <td>integer</td> <td>the maximum file count the given attribute can hold.</td> <td>CFileValidator</td> </tr> <tr id="maxSize"> <td><a href="cfilevalidator#maxSize-detail">maxSize</a></td> <td>integer</td> <td>the maximum number of bytes required for the uploaded file.</td> <td>CFileValidator</td> </tr> <tr class="inherited" id="message"> <td><a href="cvalidator#message-detail">message</a></td> <td>string</td> <td>the user-defined error message.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="mimeTypes"> <td><a href="cfilevalidator#mimeTypes-detail">mimeTypes</a></td> <td>mixed</td> <td>a list of MIME-types of the file that are allowed to be uploaded.</td> <td>CFileValidator</td> </tr> <tr id="minSize"> <td><a href="cfilevalidator#minSize-detail">minSize</a></td> <td>integer</td> <td>the minimum number of bytes required for the uploaded file.</td> <td>CFileValidator</td> </tr> <tr class="inherited" id="on"> <td><a href="cvalidator#on-detail">on</a></td> <td>array</td> <td>list of scenarios that the validator should be applied.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="safe"> <td><a href="cvalidator#safe-detail">safe</a></td> <td>boolean</td> <td>whether attributes listed with this validator should be considered safe for massive assignment.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="skipOnError"> <td><a href="cvalidator#skipOnError-detail">skipOnError</a></td> <td>boolean</td> <td>whether this validation rule should be skipped when there is already a validation error for the current attribute.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="tooLarge"> <td><a href="cfilevalidator#tooLarge-detail">tooLarge</a></td> <td>string</td> <td>the error message used when the uploaded file is too large.</td> <td>CFileValidator</td> </tr> <tr id="tooMany"> <td><a href="cfilevalidator#tooMany-detail">tooMany</a></td> <td>string</td> <td>the error message used if the count of multiple uploads exceeds limit.</td> <td>CFileValidator</td> </tr> <tr id="tooSmall"> <td><a href="cfilevalidator#tooSmall-detail">tooSmall</a></td> <td>string</td> <td>the error message used when the uploaded file is too small.</td> <td>CFileValidator</td> </tr> <tr id="types"> <td><a href="cfilevalidator#types-detail">types</a></td> <td>mixed</td> <td>a list of file name extensions that are allowed to be uploaded.</td> <td>CFileValidator</td> </tr> <tr id="wrongMimeType"> <td><a href="cfilevalidator#wrongMimeType-detail">wrongMimeType</a></td> <td>string</td> <td>the error message used when the uploaded file has a MIME-type that is not listed among <a href="cfilevalidator#mimeTypes">mimeTypes</a>.</td> <td>CFileValidator</td> </tr> <tr id="wrongType"> <td><a href="cfilevalidator#wrongType-detail">wrongType</a></td> <td>string</td> <td>the error message used when the uploaded file has an extension name that is not listed among <a href="cfilevalidator#types">types</a>.</td> <td>CFileValidator</td> </tr> </table> </div> <div class="summary docProperty"> <h2>Protected Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="sizeLimit"> <td><a href="cfilevalidator#sizeLimit-detail">sizeLimit</a></td> <td>integer</td> <td>Returns the maximum size allowed for uploaded files.</td> <td>CFileValidator</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__get"> <td><a href="ccomponent#__get-detail">__get()</a></td> <td>Returns a property value, an event handler list or a behavior based on its name.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__isset"> <td><a href="ccomponent#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__set"> <td><a href="ccomponent#__set-detail">__set()</a></td> <td>Sets value of a component property.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__unset"> <td><a href="ccomponent#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="applyTo"> <td><a href="cvalidator#applyTo-detail">applyTo()</a></td> <td>Returns a value indicating whether the validator applies to the specified scenario.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="clientValidateAttribute"> <td><a href="cvalidator#clientValidateAttribute-detail">clientValidateAttribute()</a></td> <td>Returns the JavaScript needed for performing client-side validation.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="createValidator"> <td><a href="cvalidator#createValidator-detail">createValidator()</a></td> <td>Creates a validator object.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="sizeToBytes"> <td><a href="cfilevalidator#sizeToBytes-detail">sizeToBytes()</a></td> <td>Converts php.ini style size to bytes.</td> <td>CFileValidator</td> </tr> <tr class="inherited" id="validate"> <td><a href="cvalidator#validate-detail">validate()</a></td> <td>Validates the specified object.</td> <td><a href="cvalidator">CValidator</a></td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="addError"> <td><a href="cvalidator#addError-detail">addError()</a></td> <td>Adds an error about the specified attribute to the active record.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="emptyAttribute"> <td><a href="cfilevalidator#emptyAttribute-detail">emptyAttribute()</a></td> <td>Raises an error to inform end user about blank attribute.</td> <td>CFileValidator</td> </tr> <tr id="getSizeLimit"> <td><a href="cfilevalidator#getSizeLimit-detail">getSizeLimit()</a></td> <td>Returns the maximum size allowed for uploaded files.</td> <td>CFileValidator</td> </tr> <tr class="inherited" id="isEmpty"> <td><a href="cvalidator#isEmpty-detail">isEmpty()</a></td> <td>Checks if the given value is empty.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="validateAttribute"> <td><a href="cfilevalidator#validateAttribute-detail">validateAttribute()</a></td> <td>Set the attribute and then validates using <a href="cfilevalidator#validateFile">validateFile</a>.</td> <td>CFileValidator</td> </tr> <tr id="validateFile"> <td><a href="cfilevalidator#validateFile-detail">validateFile()</a></td> <td>Internally validates a file object.</td> <td>CFileValidator</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="allowEmpty-detail"> allowEmpty<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$allowEmpty</b>;</pre> <p>whether the attribute requires a file to be uploaded or not. Defaults to false, meaning a file is required to be uploaded. When no file is uploaded, the owner attribute is set to null to prevent setting arbitrary values.</p> <h3 class="detailHeader" id="maxFiles-detail"> maxFiles<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$maxFiles</b>;</pre> <p>the maximum file count the given attribute can hold. It defaults to 1, meaning single file upload. By defining a higher number, multiple uploads become possible.</p> <h3 class="detailHeader" id="maxSize-detail"> maxSize<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$maxSize</b>;</pre> <p>the maximum number of bytes required for the uploaded file. Defaults to null, meaning no limit. Note, the size limit is also affected by 'upload_max_filesize' INI setting and the 'MAX_FILE_SIZE' hidden field value.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cfilevalidator#tooLarge">tooLarge</a></li> </ul> </div> <h3 class="detailHeader" id="mimeTypes-detail"> mimeTypes<span class="detailHeaderTag"> property (available since v1.1.11) </span> </h3> <pre class="signature">public mixed <b>$mimeTypes</b>;</pre> <p>a list of MIME-types of the file that are allowed to be uploaded. This can be either an array or a string consisting of MIME-types separated by space or comma (e.g. "image/gif, image/jpeg"). MIME-types are case-insensitive. Defaults to null, meaning all MIME-types are allowed. In order to use this property fileinfo PECL extension should be installed.</p> <h3 class="detailHeader" id="minSize-detail"> minSize<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$minSize</b>;</pre> <p>the minimum number of bytes required for the uploaded file. Defaults to null, meaning no limit.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cfilevalidator#tooSmall">tooSmall</a></li> </ul> </div> <h3 class="detailHeader" id="sizeLimit-detail"> sizeLimit<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">protected integer <a href="cfilevalidator#getSizeLimit"><b>getSizeLimit</b></a>()</pre> <p>Returns the maximum size allowed for uploaded files. This is determined based on three factors: </p>
<ul> <li>'upload_max_filesize' in php.ini</li> <li>'MAX_FILE_SIZE' hidden field</li> <li><a href="cfilevalidator#maxSize">maxSize</a></li> </ul> <h3 class="detailHeader" id="tooLarge-detail"> tooLarge<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$tooLarge</b>;</pre> <p>the error message used when the uploaded file is too large.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cfilevalidator#maxSize">maxSize</a></li> </ul> </div> <h3 class="detailHeader" id="tooMany-detail"> tooMany<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$tooMany</b>;</pre> <p>the error message used if the count of multiple uploads exceeds limit.</p> <h3 class="detailHeader" id="tooSmall-detail"> tooSmall<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$tooSmall</b>;</pre> <p>the error message used when the uploaded file is too small.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cfilevalidator#minSize">minSize</a></li> </ul> </div> <h3 class="detailHeader" id="types-detail"> types<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public mixed <b>$types</b>;</pre> <p>a list of file name extensions that are allowed to be uploaded. This can be either an array or a string consisting of file extension names separated by space or comma (e.g. "gif, jpg"). Extension names are case-insensitive. Defaults to null, meaning all file name extensions are allowed.</p> <h3 class="detailHeader" id="wrongMimeType-detail"> wrongMimeType<span class="detailHeaderTag"> property (available since v1.1.11) </span> </h3> <pre class="signature">public string <b>$wrongMimeType</b>;</pre> <p>the error message used when the uploaded file has a MIME-type that is not listed among <a href="cfilevalidator#mimeTypes">mimeTypes</a>. In order to use this property fileinfo PECL extension should be installed.</p> <h3 class="detailHeader" id="wrongType-detail"> wrongType<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$wrongType</b>;</pre> <p>the error message used when the uploaded file has an extension name that is not listed among <a href="cfilevalidator#types">types</a>.</p> <h2>Method Details</h2> <h3 class="detailHeader" id="emptyAttribute-detail"> emptyAttribute() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>emptyAttribute</b>(<a href="cmodel">CModel</a> $object, string $attribute)</pre> </td></tr> <tr> <td class="paramNameCol">$object</td> <td class="paramTypeCol"><a href="cmodel">CModel</a></td> <td class="paramDescCol">the object being validated</td> </tr> <tr> <td class="paramNameCol">$attribute</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the attribute being validated</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/validators/CFileValidator.php#L269">framework/validators/CFileValidator.php#269</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">emptyAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">safe</span><span style="color: #007700">) <br>        </span><span style="color: #0000BB">$object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br><br>    if(!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">allowEmpty</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message </span><span style="color: #007700">: </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'{attribute} cannot be blank.'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">,</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,</span><span style="color: #0000BB">$message</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Raises an error to inform end user about blank attribute. Sets the owner attribute to null to prevent setting arbitrary values.</p> <h3 class="detailHeader" id="getSizeLimit-detail"> getSizeLimit() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected integer <b>getSizeLimit</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the size limit for uploaded files.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/validators/CFileValidator.php#L292">framework/validators/CFileValidator.php#292</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">getSizeLimit</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$limit</span><span style="color: #007700">=</span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">'upload_max_filesize'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$limit</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sizeToBytes</span><span style="color: #007700">(</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxSize</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$limit</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0 </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxSize</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$limit</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxSize</span><span style="color: #007700">;<br>    if(isset(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'MAX_FILE_SIZE'</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'MAX_FILE_SIZE'</span><span style="color: #007700">]&gt;</span><span style="color: #0000BB">0 </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'MAX_FILE_SIZE'</span><span style="color: #007700">]&lt;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$limit</span><span style="color: #007700">=</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'MAX_FILE_SIZE'</span><span style="color: #007700">];<br>    return </span><span style="color: #0000BB">$limit</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Returns the maximum size allowed for uploaded files. This is determined based on three factors: </p>
<ul> <li>'upload_max_filesize' in php.ini</li> <li>'MAX_FILE_SIZE' hidden field</li> <li><a href="cfilevalidator#maxSize">maxSize</a></li> </ul> <h3 class="detailHeader" id="sizeToBytes-detail"> sizeToBytes() <span class="detailHeaderTag"> method (available since v1.1.11) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public integer <b>sizeToBytes</b>(string $sizeStr)</pre> </td></tr> <tr> <td class="paramNameCol">$sizeStr</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the size string to convert.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the byte count in the given size string.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/validators/CFileValidator.php#L316">framework/validators/CFileValidator.php#316</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">sizeToBytes</span><span style="color: #007700">(</span><span style="color: #0000BB">$sizeStr</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #FF8000">// get the latest character<br>    </span><span style="color: #007700">switch (</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$sizeStr</span><span style="color: #007700">, -</span><span style="color: #0000BB">1</span><span style="color: #007700">)))<br>    {<br>        case </span><span style="color: #DD0000">'m'</span><span style="color: #007700">: return (int)</span><span style="color: #0000BB">$sizeStr </span><span style="color: #007700">* </span><span style="color: #0000BB">1048576</span><span style="color: #007700">; </span><span style="color: #FF8000">// 1024 * 1024<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">'k'</span><span style="color: #007700">: return (int)</span><span style="color: #0000BB">$sizeStr </span><span style="color: #007700">* </span><span style="color: #0000BB">1024</span><span style="color: #007700">; </span><span style="color: #FF8000">// 1024<br>        </span><span style="color: #007700">case </span><span style="color: #DD0000">'g'</span><span style="color: #007700">: return (int)</span><span style="color: #0000BB">$sizeStr </span><span style="color: #007700">* </span><span style="color: #0000BB">1073741824</span><span style="color: #007700">; </span><span style="color: #FF8000">// 1024 * 1024 * 1024<br>        </span><span style="color: #007700">default: return (int)</span><span style="color: #0000BB">$sizeStr</span><span style="color: #007700">; </span><span style="color: #FF8000">// do nothing<br>    </span><span style="color: #007700">}<br>}</span></pre> </div> <p>Converts php.ini style size to bytes. <br><br> Examples of size strings are: 150, 1g, 500k, 5M (size suffix is case insensitive). If you pass here the number with a fractional part, then everything after the decimal point will be ignored (php.ini values common behavior). For example 1.5G value would be treated as 1G and 1073741824 number will be returned as a result. This method is public (was private before) since 1.1.11.</p> <h3 class="detailHeader" id="validateAttribute-detail"> validateAttribute() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>validateAttribute</b>(<a href="cmodel">CModel</a> $object, string $attribute)</pre> </td></tr> <tr> <td class="paramNameCol">$object</td> <td class="paramTypeCol"><a href="cmodel">CModel</a></td> <td class="paramDescCol">the object being validated</td> </tr> <tr> <td class="paramNameCol">$attribute</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the attribute being validated</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/validators/CFileValidator.php#L142">framework/validators/CFileValidator.php#142</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">validateAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$files</span><span style="color: #007700">=</span><span style="color: #0000BB">$object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxFiles </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>    {<br>        if(!</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">) || !isset(</span><span style="color: #0000BB">$files</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]) || !</span><span style="color: #0000BB">$files</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">] instanceof </span><span style="color: #0000BB">CUploadedFile</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$files </span><span style="color: #007700">= </span><span style="color: #0000BB">CUploadedFile</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstances</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">);<br>        if(array()===</span><span style="color: #0000BB">$files</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">emptyAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">) &gt; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxFiles</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tooMany</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tooMany </span><span style="color: #007700">: </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">, </span><span style="color: #DD0000">'{attribute} cannot accept more than {limit} files.'</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">, </span><span style="color: #0000BB">$message</span><span style="color: #007700">, array(</span><span style="color: #DD0000">'{attribute}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">, </span><span style="color: #DD0000">'{limit}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxFiles</span><span style="color: #007700">));<br>        }<br>        else<br>            foreach(</span><span style="color: #0000BB">$files </span><span style="color: #007700">as </span><span style="color: #0000BB">$file</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validateFile</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">, </span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br>    }<br>    else<br>    {<br>        if (</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">))<br>        {<br>            if (</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">) &gt; </span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tooMany</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tooMany </span><span style="color: #007700">: </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">, </span><span style="color: #DD0000">'{attribute} cannot accept more than {limit} files.'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">, </span><span style="color: #0000BB">$message</span><span style="color: #007700">, array(</span><span style="color: #DD0000">'{attribute}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">, </span><span style="color: #DD0000">'{limit}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxFiles</span><span style="color: #007700">));<br>                return;<br>            }<br>            else<br>                </span><span style="color: #0000BB">$file </span><span style="color: #007700">= empty(</span><span style="color: #0000BB">$files</span><span style="color: #007700">) ? </span><span style="color: #0000BB">null </span><span style="color: #007700">: </span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">);<br>        }<br>        else<br>            </span><span style="color: #0000BB">$file </span><span style="color: #007700">= </span><span style="color: #0000BB">$files</span><span style="color: #007700">;<br>        if(!</span><span style="color: #0000BB">$file </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CUploadedFile</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$file </span><span style="color: #007700">= </span><span style="color: #0000BB">CUploadedFile</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">);<br>            if(</span><span style="color: #0000BB">null</span><span style="color: #007700">===</span><span style="color: #0000BB">$file</span><span style="color: #007700">)<br>                return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">emptyAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">);<br>        }<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validateFile</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">, </span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Set the attribute and then validates using <a href="cfilevalidator#validateFile">validateFile</a>. If there is any error, the error message is added to the object.</p> <h3 class="detailHeader" id="validateFile-detail"> validateFile() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>validateFile</b>(<a href="cmodel">CModel</a> $object, string $attribute, <a href="cuploadedfile">CUploadedFile</a> $file)</pre> </td></tr> <tr> <td class="paramNameCol">$object</td> <td class="paramTypeCol"><a href="cmodel">CModel</a></td> <td class="paramDescCol">the object being validated</td> </tr> <tr> <td class="paramNameCol">$attribute</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the attribute being validated</td> </tr> <tr> <td class="paramNameCol">$file</td> <td class="paramTypeCol"><a href="cuploadedfile">CUploadedFile</a></td> <td class="paramDescCol">uploaded file passed to check against a set of rules</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/validators/CFileValidator.php#L192">framework/validators/CFileValidator.php#192</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">validateFile</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">, </span><span style="color: #0000BB">$file</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$error</span><span style="color: #007700">=(</span><span style="color: #0000BB">null</span><span style="color: #007700">===</span><span style="color: #0000BB">$file </span><span style="color: #007700">? </span><span style="color: #0000BB">null </span><span style="color: #007700">: </span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getError</span><span style="color: #007700">());<br>    if(</span><span style="color: #0000BB">$error</span><span style="color: #007700">==</span><span style="color: #0000BB">UPLOAD_ERR_INI_SIZE </span><span style="color: #007700">|| </span><span style="color: #0000BB">$error</span><span style="color: #007700">==</span><span style="color: #0000BB">UPLOAD_ERR_FORM_SIZE </span><span style="color: #007700">|| </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxSize</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSize</span><span style="color: #007700">()&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxSize</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tooLarge</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tooLarge </span><span style="color: #007700">: </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The file "{file}" is too large. Its size cannot exceed {limit} bytes.'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">,</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,</span><span style="color: #0000BB">$message</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{file}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">(), </span><span style="color: #DD0000">'{limit}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSizeLimit</span><span style="color: #007700">()));<br>        if(</span><span style="color: #0000BB">$error</span><span style="color: #007700">!==</span><span style="color: #0000BB">UPLOAD_ERR_OK</span><span style="color: #007700">)<br>            return;<br>    }<br>    elseif(</span><span style="color: #0000BB">$error</span><span style="color: #007700">!==</span><span style="color: #0000BB">UPLOAD_ERR_OK</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$error</span><span style="color: #007700">==</span><span style="color: #0000BB">UPLOAD_ERR_NO_FILE</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">emptyAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">, </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">);<br>        elseif(</span><span style="color: #0000BB">$error</span><span style="color: #007700">==</span><span style="color: #0000BB">UPLOAD_ERR_PARTIAL</span><span style="color: #007700">)<br>            throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The file "{file}" was only partially uploaded.'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{file}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">())));<br>        elseif(</span><span style="color: #0000BB">$error</span><span style="color: #007700">==</span><span style="color: #0000BB">UPLOAD_ERR_NO_TMP_DIR</span><span style="color: #007700">)<br>            throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Missing the temporary folder to store the uploaded file "{file}".'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{file}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">())));<br>        elseif(</span><span style="color: #0000BB">$error</span><span style="color: #007700">==</span><span style="color: #0000BB">UPLOAD_ERR_CANT_WRITE</span><span style="color: #007700">)<br>            throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Failed to write the uploaded file "{file}" to disk.'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{file}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">())));<br>        elseif(</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'UPLOAD_ERR_EXTENSION'</span><span style="color: #007700">) &amp;&amp; </span><span style="color: #0000BB">$error</span><span style="color: #007700">==</span><span style="color: #0000BB">UPLOAD_ERR_EXTENSION</span><span style="color: #007700">)  </span><span style="color: #FF8000">// available for PHP 5.2.0 or above<br>            </span><span style="color: #007700">throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'A PHP extension stopped the file upload.'</span><span style="color: #007700">));<br>        else<br>            throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Unable to upload the file "{file}" because of an unrecognized error.'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{file}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">())));<br>    }<br><br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">minSize</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSize</span><span style="color: #007700">()&lt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">minSize</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tooSmall</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tooSmall </span><span style="color: #007700">: </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The file "{file}" is too small. Its size cannot be smaller than {limit} bytes.'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">,</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,</span><span style="color: #0000BB">$message</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{file}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">(), </span><span style="color: #DD0000">'{limit}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">minSize</span><span style="color: #007700">));<br>    }<br><br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$types</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_split</span><span style="color: #007700">(</span><span style="color: #DD0000">'/[\s,]+/'</span><span style="color: #007700">,</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">),-</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">PREG_SPLIT_NO_EMPTY</span><span style="color: #007700">);<br>        else<br>            </span><span style="color: #0000BB">$types</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">;<br>        if(!</span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getExtensionName</span><span style="color: #007700">()),</span><span style="color: #0000BB">$types</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">wrongType</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">wrongType </span><span style="color: #007700">: </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The file "{file}" cannot be uploaded. Only files with these extensions are allowed: {extensions}.'</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">,</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,</span><span style="color: #0000BB">$message</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{file}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">(), </span><span style="color: #DD0000">'{extensions}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">', '</span><span style="color: #007700">,</span><span style="color: #0000BB">$types</span><span style="color: #007700">)));<br>        }<br>    }<br><br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mimeTypes</span><span style="color: #007700">!==</span><span style="color: #0000BB">null </span><span style="color: #007700">&amp;&amp; !empty(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tempName</span><span style="color: #007700">))<br>    {<br>        if(</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'finfo_open'</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$mimeType</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>            if(</span><span style="color: #0000BB">$info</span><span style="color: #007700">=</span><span style="color: #0000BB">finfo_open</span><span style="color: #007700">(</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'FILEINFO_MIME_TYPE'</span><span style="color: #007700">) ? </span><span style="color: #0000BB">FILEINFO_MIME_TYPE </span><span style="color: #007700">: </span><span style="color: #0000BB">FILEINFO_MIME</span><span style="color: #007700">))<br>                </span><span style="color: #0000BB">$mimeType</span><span style="color: #007700">=</span><span style="color: #0000BB">finfo_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$info</span><span style="color: #007700">,</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTempName</span><span style="color: #007700">());<br>        }<br>        elseif(</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'mime_content_type'</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$mimeType</span><span style="color: #007700">=</span><span style="color: #0000BB">mime_content_type</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTempName</span><span style="color: #007700">());<br>        else<br>            throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'In order to use MIME-type validation provided by CFileValidator fileinfo PECL extension should be installed.'</span><span style="color: #007700">));<br><br>        if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mimeTypes</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$mimeTypes</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_split</span><span style="color: #007700">(</span><span style="color: #DD0000">'/[\s,]+/'</span><span style="color: #007700">,</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mimeTypes</span><span style="color: #007700">),-</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">PREG_SPLIT_NO_EMPTY</span><span style="color: #007700">);<br>        else<br>            </span><span style="color: #0000BB">$mimeTypes</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mimeTypes</span><span style="color: #007700">;<br><br>        if(</span><span style="color: #0000BB">$mimeType</span><span style="color: #007700">===</span><span style="color: #0000BB">false </span><span style="color: #007700">|| !</span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$mimeType</span><span style="color: #007700">),</span><span style="color: #0000BB">$mimeTypes</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">wrongMimeType</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">wrongMimeType </span><span style="color: #007700">: </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The file "{file}" cannot be uploaded. Only files of these MIME-types are allowed: {mimeTypes}.'</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">,</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,</span><span style="color: #0000BB">$message</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{file}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">(), </span><span style="color: #DD0000">'{mimeTypes}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">', '</span><span style="color: #007700">,</span><span style="color: #0000BB">$mimeTypes</span><span style="color: #007700">)));<br>        }<br>    }<br>}</span></pre> </div> <p>Internally validates a file object.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CFileValidator" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CFileValidator</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
