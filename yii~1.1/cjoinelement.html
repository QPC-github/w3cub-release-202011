
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CJoinElement - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" list of child join elements ">
  <meta name="keywords" content="cjoinelement, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cjoinelement.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/yii~1.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CJoinElement</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.db.ar">system.db.ar</a></td> </tr> <tr> <th>Inheritance</th> <td>class CJoinElement</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php">framework/db/ar/CActiveFinder.php</a></td> </tr> </table> <div id="classDescription"> CJoinElement represents a tree node in the join tree created by <a href="cactivefinder">CActiveFinder</a>.</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="children"> <td><a href="cjoinelement#children-detail">children</a></td> <td>array</td> <td>list of child join elements</td> <td>CJoinElement</td> </tr> <tr id="id"> <td><a href="cjoinelement#id-detail">id</a></td> <td>integer</td> <td>the unique ID of this tree node</td> <td>CJoinElement</td> </tr> <tr id="master"> <td><a href="cjoinelement#master-detail">master</a></td> <td><a href="cactiverelation">CActiveRelation</a></td> <td>the master relation</td> <td>CJoinElement</td> </tr> <tr id="model"> <td><a href="cjoinelement#model-detail">model</a></td> <td><a href="cactiverecord">CActiveRecord</a></td> <td>the model associated with this tree node</td> <td>CJoinElement</td> </tr> <tr id="rawTableAlias"> <td><a href="cjoinelement#rawTableAlias-detail">rawTableAlias</a></td> <td>string</td> <td>the quoted table alias for this element</td> <td>CJoinElement</td> </tr> <tr id="records"> <td><a href="cjoinelement#records-detail">records</a></td> <td>array</td> <td>list of active records found by the queries.</td> <td>CJoinElement</td> </tr> <tr id="relation"> <td><a href="cjoinelement#relation-detail">relation</a></td> <td><a href="cactiverelation">CActiveRelation</a></td> <td>the relation represented by this tree node</td> <td>CJoinElement</td> </tr> <tr id="slave"> <td><a href="cjoinelement#slave-detail">slave</a></td> <td><a href="cactiverelation">CActiveRelation</a></td> <td>the slave relation</td> <td>CJoinElement</td> </tr> <tr id="stats"> <td><a href="cjoinelement#stats-detail">stats</a></td> <td>array</td> <td>list of stat elements</td> <td>CJoinElement</td> </tr> <tr id="tableAlias"> <td><a href="cjoinelement#tableAlias-detail">tableAlias</a></td> <td>string</td> <td>table alias for this join element</td> <td>CJoinElement</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__construct"> <td><a href="cjoinelement#__construct-detail">__construct()</a></td> <td>Constructor.</td> <td>CJoinElement</td> </tr> <tr id="afterFind"> <td><a href="cjoinelement#afterFind-detail">afterFind()</a></td> <td>Calls <a href="cactiverecord#afterFind">CActiveRecord::afterFind</a> of all the records.</td> <td>CJoinElement</td> </tr> <tr id="buildQuery"> <td><a href="cjoinelement#buildQuery-detail">buildQuery()</a></td> <td>Builds the join query with all descendant HAS_ONE and BELONGS_TO nodes.</td> <td>CJoinElement</td> </tr> <tr id="count"> <td><a href="cjoinelement#count-detail">count()</a></td> <td>Count the number of primary records returned by the join statement.</td> <td>CJoinElement</td> </tr> <tr id="destroy"> <td><a href="cjoinelement#destroy-detail">destroy()</a></td> <td>Removes references to child elements and finder to avoid circular references.</td> <td>CJoinElement</td> </tr> <tr id="find"> <td><a href="cjoinelement#find-detail">find()</a></td> <td>Performs the recursive finding with the criteria.</td> <td>CJoinElement</td> </tr> <tr id="findWithBase"> <td><a href="cjoinelement#findWithBase-detail">findWithBase()</a></td> <td>Performs the eager loading with the base records ready.</td> <td>CJoinElement</td> </tr> <tr id="getColumnPrefix"> <td><a href="cjoinelement#getColumnPrefix-detail">getColumnPrefix()</a></td> <td>Returns the column prefix for column reference disambiguation</td> <td>CJoinElement</td> </tr> <tr id="getColumnSelect"> <td><a href="cjoinelement#getColumnSelect-detail">getColumnSelect()</a></td> <td>Generates the list of columns to be selected.</td> <td>CJoinElement</td> </tr> <tr id="getJoinCondition"> <td><a href="cjoinelement#getJoinCondition-detail">getJoinCondition()</a></td> <td>Returns the join statement (this node joins with its parent)</td> <td>CJoinElement</td> </tr> <tr id="getPrimaryKeyRange"> <td><a href="cjoinelement#getPrimaryKeyRange-detail">getPrimaryKeyRange()</a></td> <td>Returns the condition that specifies only the rows with the selected primary key values.</td> <td>CJoinElement</td> </tr> <tr id="getPrimaryKeySelect"> <td><a href="cjoinelement#getPrimaryKeySelect-detail">getPrimaryKeySelect()</a></td> <td>Returns the primary key selection</td> <td>CJoinElement</td> </tr> <tr id="getTableNameWithAlias"> <td><a href="cjoinelement#getTableNameWithAlias-detail">getTableNameWithAlias()</a></td> <td>Returns the table name and the table alias (if any). This can be used directly in SQL query without escaping.</td> <td>CJoinElement</td> </tr> <tr id="lazyFind"> <td><a href="cjoinelement#lazyFind-detail">lazyFind()</a></td> <td>Performs lazy find with the specified base record.</td> <td>CJoinElement</td> </tr> <tr id="runQuery"> <td><a href="cjoinelement#runQuery-detail">runQuery()</a></td> <td>Executes the join query and populates the query results.</td> <td>CJoinElement</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="children-detail"> children<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$children</b>;</pre> <p>list of child join elements</p> <h3 class="detailHeader" id="id-detail"> id<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$id</b>;</pre> <p>the unique ID of this tree node</p> <h3 class="detailHeader" id="master-detail"> master<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public <a href="cactiverelation">CActiveRelation</a> <b>$master</b>;</pre> <p>the master relation</p> <h3 class="detailHeader" id="model-detail"> model<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public <a href="cactiverecord">CActiveRecord</a> <b>$model</b>;</pre> <p>the model associated with this tree node</p> <h3 class="detailHeader" id="rawTableAlias-detail"> rawTableAlias<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$rawTableAlias</b>;</pre> <p>the quoted table alias for this element</p> <h3 class="detailHeader" id="records-detail"> records<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$records</b>;</pre> <p>list of active records found by the queries. They are indexed by primary key values.</p> <h3 class="detailHeader" id="relation-detail"> relation<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public <a href="cactiverelation">CActiveRelation</a> <b>$relation</b>;</pre> <p>the relation represented by this tree node</p> <h3 class="detailHeader" id="slave-detail"> slave<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public <a href="cactiverelation">CActiveRelation</a> <b>$slave</b>;</pre> <p>the slave relation</p> <h3 class="detailHeader" id="stats-detail"> stats<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$stats</b>;</pre> <p>list of stat elements</p> <h3 class="detailHeader" id="tableAlias-detail"> tableAlias<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$tableAlias</b>;</pre> <p>table alias for this join element</p> <h2>Method Details</h2> <h3 class="detailHeader" id="__construct-detail"> __construct() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__construct</b>(<a href="cactivefinder">CActiveFinder</a> $finder, mixed $relation, CJoinElement $parent=NULL, integer $id=0)</pre> </td></tr> <tr> <td class="paramNameCol">$finder</td> <td class="paramTypeCol"><a href="cactivefinder">CActiveFinder</a></td> <td class="paramDescCol">the finder</td> </tr> <tr> <td class="paramNameCol">$relation</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the relation (if the third parameter is not null) or the model (if the third parameter is null) associated with this tree node.</td> </tr> <tr> <td class="paramNameCol">$parent</td> <td class="paramTypeCol">CJoinElement</td> <td class="paramDescCol">the parent tree node</td> </tr> <tr> <td class="paramNameCol">$id</td> <td class="paramTypeCol">integer</td> <td class="paramDescCol">the ID of this tree node that is unique among all the tree nodes</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L375">framework/db/ar/CActiveFinder.php#375</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$finder</span><span style="color: #007700">,</span><span style="color: #0000BB">$relation</span><span style="color: #007700">,</span><span style="color: #0000BB">$parent</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">,</span><span style="color: #0000BB">$id</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">=</span><span style="color: #0000BB">$finder</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id</span><span style="color: #007700">=</span><span style="color: #0000BB">$id</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$parent</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">=</span><span style="color: #0000BB">$relation</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_parent</span><span style="color: #007700">=</span><span style="color: #0000BB">$parent</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">model</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModel</span><span style="color: #007700">(</span><span style="color: #0000BB">$relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">className</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableAlias</span><span style="color: #007700">=</span><span style="color: #0000BB">$relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">alias</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">:</span><span style="color: #0000BB">$relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">alias</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawTableAlias</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">quoteTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableAlias</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>    }<br>    else  </span><span style="color: #FF8000">// root element, the first parameter is the model.<br>    </span><span style="color: #007700">{<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">model</span><span style="color: #007700">=</span><span style="color: #0000BB">$relation</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">=</span><span style="color: #0000BB">$relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommandBuilder</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">=</span><span style="color: #0000BB">$relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableAlias</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableAlias</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawTableAlias</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">quoteTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableAlias</span><span style="color: #007700">);<br>    }<br><br>    </span><span style="color: #FF8000">// set up column aliases, such as t1_c2<br>    </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDbConnection</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getDriverName</span><span style="color: #007700">()===</span><span style="color: #DD0000">'oci'</span><span style="color: #007700">)  </span><span style="color: #FF8000">// Issue 482<br>        </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #DD0000">'T'</span><span style="color: #007700">.</span><span style="color: #0000BB">$id</span><span style="color: #007700">.</span><span style="color: #DD0000">'_C'</span><span style="color: #007700">;<br>    else<br>        </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #DD0000">'t'</span><span style="color: #007700">.</span><span style="color: #0000BB">$id</span><span style="color: #007700">.</span><span style="color: #DD0000">'_c'</span><span style="color: #007700">;<br>    foreach(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnNames</span><span style="color: #007700">() as </span><span style="color: #0000BB">$key</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$alias</span><span style="color: #007700">=</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #0000BB">$key</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_columnAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$alias</span><span style="color: #007700">;<br>        if(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">===</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias</span><span style="color: #007700">=</span><span style="color: #0000BB">$alias</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">) &amp;&amp; </span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$alias</span><span style="color: #007700">;<br>    }<br>}</span></pre> </div> <p>Constructor.</p> <h3 class="detailHeader" id="afterFind-detail"> afterFind() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>afterFind</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L772">framework/db/ar/CActiveFinder.php#772</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">afterFind</span><span style="color: #007700">()<br>{<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records </span><span style="color: #007700">as </span><span style="color: #0000BB">$record</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterFindInternal</span><span style="color: #007700">();<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children </span><span style="color: #007700">as </span><span style="color: #0000BB">$child</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterFind</span><span style="color: #007700">();<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children </span><span style="color: #007700">= </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Calls <a href="cactiverecord#afterFind">CActiveRecord::afterFind</a> of all the records.</p> <h3 class="detailHeader" id="buildQuery-detail"> buildQuery() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>buildQuery</b>(<a href="cjoinquery">CJoinQuery</a> $query)</pre> </td></tr> <tr> <td class="paramNameCol">$query</td> <td class="paramTypeCol"><a href="cjoinquery">CJoinQuery</a></td> <td class="paramDescCol">the query being built up</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L786">framework/db/ar/CActiveFinder.php#786</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">buildQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">)<br>{<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children </span><span style="color: #007700">as </span><span style="color: #0000BB">$child</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">master</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_joined</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CHasOneRelation </span><span style="color: #007700">|| </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CBelongsToRelation<br>            </span><span style="color: #007700">|| </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">joinAll </span><span style="color: #007700">|| </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">together </span><span style="color: #007700">|| (!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">baseLimited </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">together</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_joined</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">(</span><span style="color: #0000BB">$child</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>        }<br>    }<br>}</span></pre> </div> <p>Builds the join query with all descendant HAS_ONE and BELONGS_TO nodes.</p> <h3 class="detailHeader" id="count-detail"> count() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>count</b>(<a href="cdbcriteria">CDbCriteria</a> $criteria=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$criteria</td> <td class="paramTypeCol"><a href="cdbcriteria">CDbCriteria</a></td> <td class="paramDescCol">the query criteria</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">number of primary records. Note: type is string to keep max. precision.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L728">framework/db/ar/CActiveFinder.php#728</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">=new </span><span style="color: #0000BB">CJoinQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    </span><span style="color: #FF8000">// ensure only one big join statement is used<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">baseLimited</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">joinAll</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">=</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">offset</span><span style="color: #007700">=-</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br><br>    if(!empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">) || !empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">orders </span><span style="color: #007700">= array();<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$sql</span><span style="color: #007700">=</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getText</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$sql</span><span style="color: #007700">=</span><span style="color: #DD0000">"SELECT COUNT(*) FROM (</span><span style="color: #007700">{</span><span style="color: #0000BB">$sql</span><span style="color: #007700">}</span><span style="color: #DD0000">) sq"</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setText</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">=</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">;<br>        return </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryScalar</span><span style="color: #007700">();<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$select</span><span style="color: #007700">=</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">) ? </span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">','</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">) : </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">;<br>        if(</span><span style="color: #0000BB">$select</span><span style="color: #007700">!==</span><span style="color: #DD0000">'*' </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^count\s*\(/i'</span><span style="color: #007700">,</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$select</span><span style="color: #007700">)))<br>            </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selects</span><span style="color: #007700">=array(</span><span style="color: #0000BB">$select</span><span style="color: #007700">);<br>        elseif(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnPrefix</span><span style="color: #007700">();<br>            </span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">();<br>            </span><span style="color: #0000BB">$column</span><span style="color: #007700">=</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selects</span><span style="color: #007700">=array(</span><span style="color: #DD0000">"COUNT(DISTINCT </span><span style="color: #0000BB">$column</span><span style="color: #DD0000">)"</span><span style="color: #007700">);<br>        }<br>        else<br>            </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selects</span><span style="color: #007700">=array(</span><span style="color: #DD0000">"COUNT(*)"</span><span style="color: #007700">);<br><br>        </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">orders</span><span style="color: #007700">=</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">groups</span><span style="color: #007700">=</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">havings</span><span style="color: #007700">=array();<br>        </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryScalar</span><span style="color: #007700">();<br>    }<br>}</span></pre> </div> <p>Count the number of primary records returned by the join statement.</p> <h3 class="detailHeader" id="destroy-detail"> destroy() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>destroy</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L419">framework/db/ar/CActiveFinder.php#419</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">destroy</span><span style="color: #007700">()<br>{<br>    if(!empty(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">))<br>    {<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children </span><span style="color: #007700">as </span><span style="color: #0000BB">$child</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">destroy</span><span style="color: #007700">();<br>    }<br>    unset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_parent</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">model</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">master</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">slave</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stats</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Removes references to child elements and finder to avoid circular references. This is internally used.</p> <h3 class="detailHeader" id="find-detail"> find() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>find</b>(<a href="cdbcriteria">CDbCriteria</a> $criteria=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$criteria</td> <td class="paramTypeCol"><a href="cdbcriteria">CDbCriteria</a></td> <td class="paramDescCol">the query criteria</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L433">framework/db/ar/CActiveFinder.php#433</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">find</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_parent</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">) </span><span style="color: #FF8000">// root element<br>    </span><span style="color: #007700">{<br>        </span><span style="color: #0000BB">$query</span><span style="color: #007700">=new </span><span style="color: #0000BB">CJoinQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">baseLimited</span><span style="color: #007700">=(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">offset</span><span style="color: #007700">&gt;=</span><span style="color: #0000BB">0 </span><span style="color: #007700">|| </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">&gt;=</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">baseLimited</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">runQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>    }<br>    elseif(!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_joined </span><span style="color: #007700">&amp;&amp; !empty(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_parent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">)) </span><span style="color: #FF8000">// not joined before<br>    </span><span style="color: #007700">{<br>        </span><span style="color: #0000BB">$query</span><span style="color: #007700">=new </span><span style="color: #0000BB">CJoinQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_parent</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_joined</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_parent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">runQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>    }<br><br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children </span><span style="color: #007700">as </span><span style="color: #0000BB">$child</span><span style="color: #007700">) </span><span style="color: #FF8000">// find recursively<br>        </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br><br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stats </span><span style="color: #007700">as </span><span style="color: #0000BB">$stat</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$stat</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Performs the recursive finding with the criteria.</p> <h3 class="detailHeader" id="findWithBase-detail"> findWithBase() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>findWithBase</b>(mixed $baseRecords)</pre> </td></tr> <tr> <td class="paramNameCol">$baseRecords</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the available base record(s).</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L692">framework/db/ar/CActiveFinder.php#692</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">findWithBase</span><span style="color: #007700">(</span><span style="color: #0000BB">$baseRecords</span><span style="color: #007700">)<br>{<br>    if(!</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$baseRecords</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$baseRecords</span><span style="color: #007700">=array(</span><span style="color: #0000BB">$baseRecords</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">))<br>    {<br>        foreach(</span><span style="color: #0000BB">$baseRecords </span><span style="color: #007700">as </span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">[</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">}]=</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">;<br>    }<br>    else<br>    {<br>        foreach(</span><span style="color: #0000BB">$baseRecords </span><span style="color: #007700">as </span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$pk</span><span style="color: #007700">=array();<br>            foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$pk</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">[</span><span style="color: #0000BB">serialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$pk</span><span style="color: #007700">)]=</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">;<br>        }<br>    }<br><br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">=new </span><span style="color: #0000BB">CJoinQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">joins</span><span style="color: #007700">)&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">runQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children </span><span style="color: #007700">as </span><span style="color: #0000BB">$child</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br><br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stats </span><span style="color: #007700">as </span><span style="color: #0000BB">$stat</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$stat</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">();<br>}</span></pre> </div> <p>Performs the eager loading with the base records ready.</p> <h3 class="detailHeader" id="getColumnPrefix-detail"> getColumnPrefix() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getColumnPrefix</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the column prefix for column reference disambiguation</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L1020">framework/db/ar/CActiveFinder.php#1020</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getColumnPrefix</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableAlias</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawTableAlias</span><span style="color: #007700">.</span><span style="color: #DD0000">'.'</span><span style="color: #007700">;<br>    else<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawName</span><span style="color: #007700">.</span><span style="color: #DD0000">'.'</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="getColumnSelect-detail"> getColumnSelect() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getColumnSelect</b>(mixed $select='*')</pre> </td></tr> <tr> <td class="paramNameCol">$select</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">columns to be selected. Defaults to '*', indicating all columns.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the column selection</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L911">framework/db/ar/CActiveFinder.php#911</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getColumnSelect</span><span style="color: #007700">(</span><span style="color: #0000BB">$select</span><span style="color: #007700">=</span><span style="color: #DD0000">'*'</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnPrefix</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$columns</span><span style="color: #007700">=array();<br>    if(</span><span style="color: #0000BB">$select</span><span style="color: #007700">===</span><span style="color: #DD0000">'*'</span><span style="color: #007700">)<br>    {<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnNames</span><span style="color: #007700">() as </span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">).</span><span style="color: #DD0000">' AS '</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_columnAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]);<br>    }<br>    else<br>    {<br>        if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$select</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$select</span><span style="color: #007700">=</span><span style="color: #0000BB">explode</span><span style="color: #007700">(</span><span style="color: #DD0000">','</span><span style="color: #007700">,</span><span style="color: #0000BB">$select</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$selected</span><span style="color: #007700">=array();<br>        foreach(</span><span style="color: #0000BB">$select </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$matches</span><span style="color: #007700">=array();<br>            if((</span><span style="color: #0000BB">$pos</span><span style="color: #007700">=</span><span style="color: #0000BB">strrpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #DD0000">'.'</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$key</span><span style="color: #007700">=</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$pos</span><span style="color: #007700">+</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br>            else<br>                </span><span style="color: #0000BB">$key</span><span style="color: #007700">=</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$key</span><span style="color: #007700">=</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #DD0000">'\'"`'</span><span style="color: #007700">);<br><br>            if(</span><span style="color: #0000BB">$key</span><span style="color: #007700">===</span><span style="color: #DD0000">'*'</span><span style="color: #007700">)<br>            {<br>                foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columns </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$column</span><span style="color: #007700">)<br>                {<br>                    </span><span style="color: #0000BB">$alias</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_columnAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];<br>                    if(!isset(</span><span style="color: #0000BB">$selected</span><span style="color: #007700">[</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]))<br>                    {<br>                        </span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #0000BB">$column</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawName</span><span style="color: #007700">.</span><span style="color: #DD0000">' AS '</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$alias</span><span style="color: #007700">);<br>                        </span><span style="color: #0000BB">$selected</span><span style="color: #007700">[</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]=</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>                    }<br>                }<br>                continue;<br>            }<br><br>            if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_columnAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]))  </span><span style="color: #FF8000">// simple column names<br>            </span><span style="color: #007700">{<br>                </span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">).</span><span style="color: #DD0000">' AS '</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_columnAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br>                </span><span style="color: #0000BB">$selected</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_columnAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]]=</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>            }<br>            elseif(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^(.*?)\s+AS\s+(\w+)$/im'</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">)) </span><span style="color: #FF8000">// if the column is already aliased<br>            </span><span style="color: #007700">{<br>                </span><span style="color: #0000BB">$alias</span><span style="color: #007700">=</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">];<br>                if(!isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_columnAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]) || </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_columnAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]!==</span><span style="color: #0000BB">$alias</span><span style="color: #007700">)<br>                {<br>                    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_columnAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]=</span><span style="color: #0000BB">$alias</span><span style="color: #007700">;<br>                    </span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>                    </span><span style="color: #0000BB">$selected</span><span style="color: #007700">[</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]=</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>                }<br>            }<br>            else<br>                throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Active record "{class}" is trying to select an invalid column "{column}". Note, the column must exist in the table or be an expression with alias.'</span><span style="color: #007700">,<br>                    array(</span><span style="color: #DD0000">'{class}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">model</span><span style="color: #007700">), </span><span style="color: #DD0000">'{column}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)));<br>        }<br>        </span><span style="color: #FF8000">// add primary key selection if they are not selected<br>        </span><span style="color: #007700">if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias</span><span style="color: #007700">) &amp;&amp; !isset(</span><span style="color: #0000BB">$selected</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias</span><span style="color: #007700">]))<br>            </span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">).</span><span style="color: #DD0000">' AS '</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias</span><span style="color: #007700">);<br>        elseif(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias</span><span style="color: #007700">))<br>        {<br>            foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$alias</span><span style="color: #007700">)<br>                if(!isset(</span><span style="color: #0000BB">$selected</span><span style="color: #007700">[</span><span style="color: #0000BB">$alias</span><span style="color: #007700">]))<br>                    </span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">).</span><span style="color: #DD0000">' AS '</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$alias</span><span style="color: #007700">);<br>        }<br>    }<br><br>    return </span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">', '</span><span style="color: #007700">,</span><span style="color: #0000BB">$columns</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Generates the list of columns to be selected. Columns will be properly aliased and primary keys will be added to selection if they are not specified.</p> <h3 class="detailHeader" id="getJoinCondition-detail"> getJoinCondition() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getJoinCondition</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the join statement (this node joins with its parent)</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L1032">framework/db/ar/CActiveFinder.php#1032</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getJoinCondition</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$parent</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_parent</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CManyManyRelation</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$joinTableName</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJunctionTableName</span><span style="color: #007700">();<br>        if((</span><span style="color: #0000BB">$joinTable</span><span style="color: #007700">=</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinTableName</span><span style="color: #007700">))===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            throw new </span><span style="color: #0000BB">CDbException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'The relation "{relation}" in active record class "{class}" is not specified correctly: the join table "{joinTable}" given in the foreign key cannot be found in the database.'</span><span style="color: #007700">,<br>                array(</span><span style="color: #DD0000">'{class}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$parent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">model</span><span style="color: #007700">), </span><span style="color: #DD0000">'{relation}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">, </span><span style="color: #DD0000">'{joinTable}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$joinTableName</span><span style="color: #007700">)));<br>        </span><span style="color: #0000BB">$fks</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJunctionForeignKeys</span><span style="color: #007700">();<br><br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">joinManyMany</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinTable</span><span style="color: #007700">,</span><span style="color: #0000BB">$fks</span><span style="color: #007700">,</span><span style="color: #0000BB">$parent</span><span style="color: #007700">);<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$fks</span><span style="color: #007700">=</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foreignKey</span><span style="color: #007700">) ? </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foreignKey </span><span style="color: #007700">: </span><span style="color: #0000BB">preg_split</span><span style="color: #007700">(</span><span style="color: #DD0000">'/\s*,\s*/'</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foreignKey</span><span style="color: #007700">,-</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">PREG_SPLIT_NO_EMPTY</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">slave</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CBelongsToRelation</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$fks</span><span style="color: #007700">=</span><span style="color: #0000BB">array_flip</span><span style="color: #007700">(</span><span style="color: #0000BB">$fks</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$pke</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">slave</span><span style="color: #007700">;<br>                </span><span style="color: #0000BB">$fke</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>            }<br>            else<br>            {<br>                </span><span style="color: #0000BB">$pke</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>                </span><span style="color: #0000BB">$fke</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">slave</span><span style="color: #007700">;<br>            }<br>        }<br>        elseif(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CBelongsToRelation</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$pke</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$fke</span><span style="color: #007700">=</span><span style="color: #0000BB">$parent</span><span style="color: #007700">;<br>        }<br>        else<br>        {<br>            </span><span style="color: #0000BB">$pke</span><span style="color: #007700">=</span><span style="color: #0000BB">$parent</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$fke</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>        }<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">joinOneMany</span><span style="color: #007700">(</span><span style="color: #0000BB">$fke</span><span style="color: #007700">,</span><span style="color: #0000BB">$fks</span><span style="color: #007700">,</span><span style="color: #0000BB">$pke</span><span style="color: #007700">,</span><span style="color: #0000BB">$parent</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div>  <h3 class="detailHeader" id="getPrimaryKeyRange-detail"> getPrimaryKeyRange() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getPrimaryKeyRange</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the condition that specifies only the rows with the selected primary key values.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L1004">framework/db/ar/CActiveFinder.php#1004</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getPrimaryKeyRange</span><span style="color: #007700">()<br>{<br>    if(empty(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">))<br>        return </span><span style="color: #DD0000">''</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$values</span><span style="color: #007700">=</span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">))<br>    {<br>        foreach(</span><span style="color: #0000BB">$values </span><span style="color: #007700">as &amp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createInCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">,</span><span style="color: #0000BB">$values</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnPrefix</span><span style="color: #007700">());<br>}</span></pre> </div>  <h3 class="detailHeader" id="getPrimaryKeySelect-detail"> getPrimaryKeySelect() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getPrimaryKeySelect</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the primary key selection</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L986">framework/db/ar/CActiveFinder.php#986</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getPrimaryKeySelect</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSchema</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$prefix</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnPrefix</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$columns</span><span style="color: #007700">=array();<br>    if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">).</span><span style="color: #DD0000">' AS '</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias</span><span style="color: #007700">);<br>    elseif(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias</span><span style="color: #007700">))<br>    {<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_pkAlias </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$alias</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">).</span><span style="color: #DD0000">' AS '</span><span style="color: #007700">.</span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$alias</span><span style="color: #007700">);<br>    }<br>    return </span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">', '</span><span style="color: #007700">,</span><span style="color: #0000BB">$columns</span><span style="color: #007700">);<br>}</span></pre> </div>  <h3 class="detailHeader" id="getTableNameWithAlias-detail"> getTableNameWithAlias() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getTableNameWithAlias</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the table name and the table alias (if any). This can be used directly in SQL query without escaping.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L896">framework/db/ar/CActiveFinder.php#896</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getTableNameWithAlias</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableAlias</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawName </span><span style="color: #007700">. </span><span style="color: #DD0000">' ' </span><span style="color: #007700">. </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawTableAlias</span><span style="color: #007700">;<br>    else<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawName</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="lazyFind-detail"> lazyFind() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>lazyFind</b>(<a href="cactiverecord">CActiveRecord</a> $baseRecord)</pre> </td></tr> <tr> <td class="paramNameCol">$baseRecord</td> <td class="paramTypeCol"><a href="cactiverecord">CActiveRecord</a></td> <td class="paramDescCol">the active record whose related object is to be fetched.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L463">framework/db/ar/CActiveFinder.php#463</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">lazyFind</span><span style="color: #007700">(</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">[</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey</span><span style="color: #007700">}]=</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">;<br>    else<br>    {<br>        </span><span style="color: #0000BB">$pk</span><span style="color: #007700">=array();<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">primaryKey </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$pk</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">[</span><span style="color: #0000BB">serialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$pk</span><span style="color: #007700">)]=</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">;<br>    }<br><br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stats </span><span style="color: #007700">as </span><span style="color: #0000BB">$stat</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$stat</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">();<br><br>    if(!</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">)<br>        return;<br><br>    </span><span style="color: #0000BB">$params</span><span style="color: #007700">=array();<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children </span><span style="color: #007700">as </span><span style="color: #0000BB">$child</span><span style="color: #007700">)<br>        if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$params</span><span style="color: #007700">=</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">=new </span><span style="color: #0000BB">CJoinQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$child</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selects</span><span style="color: #007700">=array(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnSelect</span><span style="color: #007700">(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">));<br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conditions</span><span style="color: #007700">=array(<br>        </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">on</span><span style="color: #007700">,<br>    );<br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">groups</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">joins</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">havings</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">orders</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">=</span><span style="color: #0000BB">$params</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">[</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id</span><span style="color: #007700">]=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CHasManyRelation</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">=</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">offset</span><span style="color: #007700">=</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">offset</span><span style="color: #007700">;<br>    }<br><br>    </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">applyLazyCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">,</span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_joined</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_joined</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">baseLimited</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">runQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children </span><span style="color: #007700">as </span><span style="color: #0000BB">$c</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br><br>    if(empty(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">))<br>        return;<br>    if(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CHasOneRelation </span><span style="color: #007700">|| </span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CBelongsToRelation</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addRelatedRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records</span><span style="color: #007700">),</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br>    else </span><span style="color: #FF8000">// has_many and many_many<br>    </span><span style="color: #007700">{<br>        foreach(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">records </span><span style="color: #007700">as </span><span style="color: #0000BB">$record</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">index</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$index</span><span style="color: #007700">=</span><span style="color: #0000BB">$record</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">index</span><span style="color: #007700">};<br>            else<br>                </span><span style="color: #0000BB">$index</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$baseRecord</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addRelatedRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$child</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">relation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,</span><span style="color: #0000BB">$record</span><span style="color: #007700">,</span><span style="color: #0000BB">$index</span><span style="color: #007700">);<br>        }<br>    }<br>}</span></pre> </div> <p>Performs lazy find with the specified base record.</p> <h3 class="detailHeader" id="runQuery-detail"> runQuery() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>runQuery</b>(<a href="cjoinquery">CJoinQuery</a> $query)</pre> </td></tr> <tr> <td class="paramNameCol">$query</td> <td class="paramTypeCol"><a href="cjoinquery">CJoinQuery</a></td> <td class="paramDescCol">the query to be executed.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/ar/CActiveFinder.php#L806">framework/db/ar/CActiveFinder.php#806</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">runQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$command</span><span style="color: #007700">=</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_builder</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryAll</span><span style="color: #007700">() as </span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">populateRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">,</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Executes the join query and populates the query results.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CJoinElement" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CJoinElement</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
