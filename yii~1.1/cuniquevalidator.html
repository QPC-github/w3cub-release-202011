
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CUniqueValidator - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" whether the attribute value can be null or empty. Defaults to true, meaning that if the attribute is empty, it is considered valid. ">
  <meta name="keywords" content="cuniquevalidator, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cuniquevalidator.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/yii~1.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CUniqueValidator</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.validators">system.validators</a></td> </tr> <tr> <th>Inheritance</th> <td>class CUniqueValidator » <a href="cvalidator">CValidator</a> » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/validators/CUniqueValidator.php">framework/validators/CUniqueValidator.php</a></td> </tr> </table> <div id="classDescription"> CUniqueValidator validates that the attribute value is unique in the corresponding database table. <br><br> When using the <a href="cuniquevalidator#message">message</a> property to define a custom error message, the message may contain additional placeholders that will be replaced with the actual content. In addition to the "{attribute}" placeholder, recognized by all validators (see <a href="cvalidator">CValidator</a>), CUniqueValidator allows for the following placeholders to be specified: <ul> <li>{value}: replaced with current value of the attribute.</li> </ul>
</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="allowEmpty"> <td><a href="cuniquevalidator#allowEmpty-detail">allowEmpty</a></td> <td>boolean</td> <td>whether the attribute value can be null or empty.</td> <td>CUniqueValidator</td> </tr> <tr id="attributeName"> <td><a href="cuniquevalidator#attributeName-detail">attributeName</a></td> <td>string</td> <td>the ActiveRecord class attribute name that should be used to look for the attribute value being validated.</td> <td>CUniqueValidator</td> </tr> <tr class="inherited" id="attributes"> <td><a href="cvalidator#attributes-detail">attributes</a></td> <td>array</td> <td>list of attributes to be validated.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="builtInValidators"> <td><a href="cvalidator#builtInValidators-detail">builtInValidators</a></td> <td>array</td> <td>list of built-in validators (name=&gt;class)</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="caseSensitive"> <td><a href="cuniquevalidator#caseSensitive-detail">caseSensitive</a></td> <td>boolean</td> <td>whether the comparison is case sensitive.</td> <td>CUniqueValidator</td> </tr> <tr id="className"> <td><a href="cuniquevalidator#className-detail">className</a></td> <td>string</td> <td>the ActiveRecord class name that should be used to look for the attribute value being validated.</td> <td>CUniqueValidator</td> </tr> <tr id="criteria"> <td><a href="cuniquevalidator#criteria-detail">criteria</a></td> <td>mixed</td> <td>additional query criteria.</td> <td>CUniqueValidator</td> </tr> <tr class="inherited" id="enableClientValidation"> <td><a href="cvalidator#enableClientValidation-detail">enableClientValidation</a></td> <td>boolean</td> <td>whether to perform client-side validation.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="except"> <td><a href="cvalidator#except-detail">except</a></td> <td>array</td> <td>list of scenarios that the validator should not be applied to.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="message"> <td><a href="cuniquevalidator#message-detail">message</a></td> <td>string</td> <td>the user-defined error message.</td> <td>CUniqueValidator</td> </tr> <tr class="inherited" id="on"> <td><a href="cvalidator#on-detail">on</a></td> <td>array</td> <td>list of scenarios that the validator should be applied.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="safe"> <td><a href="cvalidator#safe-detail">safe</a></td> <td>boolean</td> <td>whether attributes listed with this validator should be considered safe for massive assignment.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="skipOnError"> <td><a href="cuniquevalidator#skipOnError-detail">skipOnError</a></td> <td>boolean</td> <td>whether this validation rule should be skipped if when there is already a validation error for the current attribute.</td> <td>CUniqueValidator</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__get"> <td><a href="ccomponent#__get-detail">__get()</a></td> <td>Returns a property value, an event handler list or a behavior based on its name.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__isset"> <td><a href="ccomponent#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__set"> <td><a href="ccomponent#__set-detail">__set()</a></td> <td>Sets value of a component property.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__unset"> <td><a href="ccomponent#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="applyTo"> <td><a href="cvalidator#applyTo-detail">applyTo()</a></td> <td>Returns a value indicating whether the validator applies to the specified scenario.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="clientValidateAttribute"> <td><a href="cvalidator#clientValidateAttribute-detail">clientValidateAttribute()</a></td> <td>Returns the JavaScript needed for performing client-side validation.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="createValidator"> <td><a href="cvalidator#createValidator-detail">createValidator()</a></td> <td>Creates a validator object.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="validate"> <td><a href="cvalidator#validate-detail">validate()</a></td> <td>Validates the specified object.</td> <td><a href="cvalidator">CValidator</a></td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="addError"> <td><a href="cvalidator#addError-detail">addError()</a></td> <td>Adds an error about the specified attribute to the active record.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="getModel"> <td><a href="cuniquevalidator#getModel-detail">getModel()</a></td> <td>Given active record class name returns new model instance.</td> <td>CUniqueValidator</td> </tr> <tr class="inherited" id="isEmpty"> <td><a href="cvalidator#isEmpty-detail">isEmpty()</a></td> <td>Checks if the given value is empty.</td> <td><a href="cvalidator">CValidator</a></td> </tr> <tr id="validateAttribute"> <td><a href="cuniquevalidator#validateAttribute-detail">validateAttribute()</a></td> <td>Validates the attribute of the object.</td> <td>CUniqueValidator</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="allowEmpty-detail"> allowEmpty<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$allowEmpty</b>;</pre> <p>whether the attribute value can be null or empty. Defaults to true, meaning that if the attribute is empty, it is considered valid.</p> <h3 class="detailHeader" id="attributeName-detail"> attributeName<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$attributeName</b>;</pre> <p>the ActiveRecord class attribute name that should be used to look for the attribute value being validated. Defaults to null, meaning using the name of the attribute being validated.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cuniquevalidator#className">className</a></li> </ul> </div> <h3 class="detailHeader" id="caseSensitive-detail"> caseSensitive<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$caseSensitive</b>;</pre> <p>whether the comparison is case sensitive. Defaults to true. Note, by setting it to false, you are assuming the attribute type is string.</p> <h3 class="detailHeader" id="className-detail"> className<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$className</b>;</pre> <p>the ActiveRecord class name that should be used to look for the attribute value being validated. Defaults to null, meaning using the class of the object currently being validated. You may use path alias to reference a class name here.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cuniquevalidator#attributeName">attributeName</a></li> </ul> </div> <h3 class="detailHeader" id="criteria-detail"> criteria<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public mixed <b>$criteria</b>;</pre> <p>additional query criteria. Either an array or CDbCriteria. This will be combined with the condition that checks if the attribute value exists in the corresponding table column. This array will be used to instantiate a <a href="cdbcriteria">CDbCriteria</a> object.</p> <h3 class="detailHeader" id="message-detail"> message<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$message</b>;</pre> <p>the user-defined error message. The placeholders "{attribute}" and "{value}" are recognized, which will be replaced with the actual attribute name and value, respectively.</p> <h3 class="detailHeader" id="skipOnError-detail"> skipOnError<span class="detailHeaderTag"> property (available since v1.1.1) </span> </h3> <pre class="signature">public boolean <b>$skipOnError</b>;</pre> <p>whether this validation rule should be skipped if when there is already a validation error for the current attribute. Defaults to true.</p> <h2>Method Details</h2> <h3 class="detailHeader" id="getModel-detail"> getModel() <span class="detailHeaderTag"> method (available since v1.1.14) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected <a href="cactiverecord">CActiveRecord</a> <b>getModel</b>(string $className)</pre> </td></tr> <tr> <td class="paramNameCol">$className</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">active record class name.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="cactiverecord">CActiveRecord</a></td> <td class="paramDescCol">active record model instance.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/validators/CUniqueValidator.php#L146">framework/validators/CUniqueValidator.php#146</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">getModel</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">CActiveRecord</span><span style="color: #007700">::</span><span style="color: #0000BB">model</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Given active record class name returns new model instance.</p> <h3 class="detailHeader" id="validateAttribute-detail"> validateAttribute() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>validateAttribute</b>(<a href="cmodel">CModel</a> $object, string $attribute)</pre> </td></tr> <tr> <td class="paramNameCol">$object</td> <td class="paramTypeCol"><a href="cmodel">CModel</a></td> <td class="paramDescCol">the object being validated</td> </tr> <tr> <td class="paramNameCol">$attribute</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the attribute being validated</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/validators/CUniqueValidator.php#L80">framework/validators/CUniqueValidator.php#80</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">validateAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">,</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #0000BB">$object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">allowEmpty </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isEmpty</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">))<br>        return;<br><br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #FF8000">// https://github.com/yiisoft/yii/issues/1955<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">,</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'{attribute} is invalid.'</span><span style="color: #007700">));<br>        return;<br>    }<br><br>    </span><span style="color: #0000BB">$className</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">className</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">):</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">import</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">className</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$attributeName</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributeName</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">:</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributeName</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$finder</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModel</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$table</span><span style="color: #007700">=</span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableSchema</span><span style="color: #007700">();<br>    if((</span><span style="color: #0000BB">$column</span><span style="color: #007700">=</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributeName</span><span style="color: #007700">))===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Table "{table}" does not have a column named "{column}".'</span><span style="color: #007700">,<br>            array(</span><span style="color: #DD0000">'{column}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$attributeName</span><span style="color: #007700">,</span><span style="color: #DD0000">'{table}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$table</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">)));<br><br>    </span><span style="color: #0000BB">$columnName</span><span style="color: #007700">=</span><span style="color: #0000BB">$column</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rawName</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=new </span><span style="color: #0000BB">CDbCriteria</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">criteria</span><span style="color: #007700">!==array())<br>        </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mergeWith</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">criteria</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$tableAlias </span><span style="color: #007700">= empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">alias</span><span style="color: #007700">) ? </span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">) : </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">alias</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$valueParamName </span><span style="color: #007700">= </span><span style="color: #0000BB">CDbCriteria</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">CDbCriteria</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++;<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">caseSensitive </span><span style="color: #007700">? </span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$tableAlias</span><span style="color: #007700">}</span><span style="color: #DD0000">.</span><span style="color: #007700">{</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">}</span><span style="color: #DD0000">=</span><span style="color: #007700">{</span><span style="color: #0000BB">$valueParamName</span><span style="color: #007700">}</span><span style="color: #DD0000">" </span><span style="color: #007700">: </span><span style="color: #DD0000">"LOWER(</span><span style="color: #007700">{</span><span style="color: #0000BB">$tableAlias</span><span style="color: #007700">}</span><span style="color: #DD0000">.</span><span style="color: #007700">{</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">}</span><span style="color: #DD0000">)=LOWER(</span><span style="color: #007700">{</span><span style="color: #0000BB">$valueParamName</span><span style="color: #007700">}</span><span style="color: #DD0000">)"</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">$valueParamName</span><span style="color: #007700">] = </span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br><br>    if(!</span><span style="color: #0000BB">$object </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">CActiveRecord </span><span style="color: #007700">|| </span><span style="color: #0000BB">$object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isNewRecord </span><span style="color: #007700">|| </span><span style="color: #0000BB">$object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableName</span><span style="color: #007700">()!==</span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tableName</span><span style="color: #007700">())<br>        </span><span style="color: #0000BB">$exists</span><span style="color: #007700">=</span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    else<br>    {<br>        </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">=</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$objects</span><span style="color: #007700">=</span><span style="color: #0000BB">$finder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$objects</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$n</span><span style="color: #007700">===</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">$column</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isPrimaryKey</span><span style="color: #007700">)  </span><span style="color: #FF8000">// primary key is modified and not unique<br>                </span><span style="color: #0000BB">$exists</span><span style="color: #007700">=</span><span style="color: #0000BB">$object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOldPrimaryKey</span><span style="color: #007700">()!=</span><span style="color: #0000BB">$object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">();<br>            else<br>            {<br>                </span><span style="color: #FF8000">// non-primary key, need to exclude the current record based on PK<br>                </span><span style="color: #0000BB">$exists</span><span style="color: #007700">=</span><span style="color: #0000BB">array_shift</span><span style="color: #007700">(</span><span style="color: #0000BB">$objects</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">getPrimaryKey</span><span style="color: #007700">()!=</span><span style="color: #0000BB">$object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOldPrimaryKey</span><span style="color: #007700">();<br>            }<br>        }<br>        else<br>            </span><span style="color: #0000BB">$exists</span><span style="color: #007700">=</span><span style="color: #0000BB">$n</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">$exists</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #007700">:</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'yii'</span><span style="color: #007700">,</span><span style="color: #DD0000">'{attribute} "{value}" has already been taken.'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">,</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,</span><span style="color: #0000BB">$message</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{value}'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">));<br>    }<br>}</span></pre> </div> <p>Validates the attribute of the object. If there is any error, the error message is added to the object.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CUniqueValidator" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CUniqueValidator</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
