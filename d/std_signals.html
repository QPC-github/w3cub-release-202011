
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>std.signals - D - W3cubDocs</title>
  
  <meta name="description" content="Signals and Slots are an implementation of the Observer Pattern. Essentially, when a Signal is emitted, a list of connected Observers (called slots &hellip;">
  <meta name="keywords" content="std, signals, d">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/d/std_signals.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/d.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/d/" class="_nav-link" title="" style="margin-left:0;">D</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _d">
				
				
<h1>std.signals</h1>  <p>Signals and Slots are an implementation of the Observer Pattern. Essentially, when a Signal is emitted, a list of connected Observers (called slots) are called. </p>
<p>There have been several D implementations of Signals and Slots. This version makes use of several new features in D, which make using it simpler and less error prone. In particular, it is no longer necessary to instrument the slots. </p> <dl>
<dt>References</dt>
<dd> <a href="https://google.com/search?btnI=I%27m+Feeling+Lucky&amp;ie=UTF-8&amp;oe=UTF-8&amp;q=A%20Deeper%20Look%20at%20Signals%20and%20Slots">A Deeper Look at Signals and Slots</a><br> <a href="http://en.wikipedia.org/wiki/Observer_pattern">Observer pattern</a><br> <a href="http://en.wikipedia.org/wiki/Signals_and_slots">Wikipedia</a><br> <a href="http://boost.org/doc/html/signals.html">Boost Signals</a><br> <a href="http://qt-project.org/doc/qt-5/signalsandslots.html">Qt</a><br> </dd>
</dl> There has been a great deal of discussion in the D newsgroups over this, and several implementations:  <a href="http://www.digitalmars.com/d/archives/digitalmars/D/announce/signal_slots_library_4825.html">signal slots library</a><br> <a href="http://www.digitalmars.com/d/archives/digitalmars/D/Signals_and_Slots_in_D_42387.html">Signals and Slots in D</a><br> <a href="http://www.digitalmars.com/d/archives/digitalmars/D/Dynamic_binding_--_Qt_s_Signals_and_Slots_vs_Objective-C_42260.html">Dynamic binding -- Qt's Signals and Slots vs Objective-C</a><br> <a href="http://www.digitalmars.com/d/archives/digitalmars/D/Dissecting_the_SS_42377.html">Dissecting the SS</a><br> <a href="http://www.digitalmars.com/d/archives/digitalmars/D/dwt/about_harmonia_454.html">about harmonia</a><br> <a href="http://www.digitalmars.com/d/archives/digitalmars/D/announce/1502.html">Another event handling module</a><br> <a href="http://www.digitalmars.com/d/archives/digitalmars/D/41825.html">Suggestion: signal/slot mechanism</a><br> <a href="http://www.digitalmars.com/d/archives/digitalmars/D/13251.html">Signals and slots?</a><br> <a href="http://www.digitalmars.com/d/archives/digitalmars/D/10714.html">Signals and slots ready for evaluation</a><br> <a href="http://www.digitalmars.com/d/archives/digitalmars/D/1393.html">Signals &amp; Slots for Walter</a><br> <a href="http://www.digitalmars.com/d/archives/28456.html">Signal/Slot mechanism?</a><br> <a href="http://www.digitalmars.com/d/archives/19470.html">Modern Features?</a><br> <a href="http://www.digitalmars.com/d/archives/16592.html">Delegates vs interfaces</a><br> <a href="http://www.digitalmars.com/d/archives/16583.html">The importance of component programming (properties, signals and slots, etc)</a><br> <a href="http://www.digitalmars.com/d/archives/16368.html">signals and slots</a><br>  <dl>
<dt>Bugs:</dt>
<dd>Slots can only be delegates formed from class objects or interfaces to class objects. If a delegate to something else is passed to connect(), such as a struct member function, a nested function or a COM interface, undefined behavior will result.  Not safe for multiple threads operating on the same signals or slots. </dd>
</dl> <dl>
<dt>License:</dt>
<dd>
<a href="http://www.boost.org/LICENSE_1_0.txt">Boost License 1.0</a>. </dd>
</dl> <dl>
<dt>Authors:</dt>
<dd>
<a href="http://digitalmars.com">Walter Bright</a> </dd>
</dl> <dl>
<dt>Source</dt>
<dd> <span class="phobos_src"><a class="https" href="https://github.com/dlang/phobos/blob/master/std/signals.d">std/signals.d</a></span> </dd>
</dl>  <dl>
<dt class="d_decl" id="Signal">template <strong id="Signal">Signal</strong>(T1...)</dt> <dd>
<p>Mixin to create a signal within a class object. </p>
<p>Different signals can be added to a class by naming the mixins.</p> <dl>
<dt>Examples:</dt>
<dd>
<pre data-language="d">import std.signals;

int observedMessageCounter = 0;

class Observer
{   // our slot
    void watch(string msg, int value)
    {
        switch (observedMessageCounter++)
        {
            case 0:
                writeln(msg); // "setting new value"
                writeln(value); // 4
                break;
            case 1:
                writeln(msg); // "setting new value"
                writeln(value); // 6
                break;
            default:
                assert(0, "Unknown observation");
        }
    }
}

class Observer2
{   // our slot
    void watch(string msg, int value)
    {
    }
}

class Foo
{
    int value() { return _value; }

    int value(int v)
    {
        if (v != _value)
        {   _value = v;
            // call all the connected slots with the two parameters
            emit("setting new value", v);
        }
        return v;
    }

    // Mix in all the code we need to make Foo into a signal
    mixin Signal!(string, int);

  private :
    int _value;
}

Foo a = new Foo;
Observer o = new Observer;
auto o2 = new Observer2;
auto o3 = new Observer2;
auto o4 = new Observer2;
auto o5 = new Observer2;

a.value = 3;                // should not call o.watch()
a.connect(&amp;o.watch);        // o.watch is the slot
a.connect(&amp;o2.watch);
a.connect(&amp;o3.watch);
a.connect(&amp;o4.watch);
a.connect(&amp;o5.watch);
a.value = 4;                // should call o.watch()
a.disconnect(&amp;o.watch);     // o.watch is no longer a slot
a.disconnect(&amp;o3.watch);
a.disconnect(&amp;o5.watch);
a.disconnect(&amp;o4.watch);
a.disconnect(&amp;o2.watch);
a.value = 5;                // so should not call o.watch()
a.connect(&amp;o2.watch);
a.connect(&amp;o.watch);        // connect again
a.value = 6;                // should call o.watch()
destroy(o);                 // destroying o should automatically disconnect it
a.value = 7;                // should not call o.watch()

writeln(observedMessageCounter); // 2
</pre> </dd>
</dl> <dl>
<dt class="d_decl" id="Signal.slot_t">alias <strong id="slot_t">slot_t</strong> = void delegate(T1); </dt> <dd>
<p>A slot is implemented as a delegate. The slot_t is the type of the delegate. The delegate must be to an instance of a class or an interface to a class instance. Delegates to struct instances or nested functions must not be used as slots.</p> </dd> <dt class="d_decl" id="Signal.emit">final void <strong id="emit">emit</strong>(T1 i); </dt> <dd>
<p>Call each of the connected slots, passing the argument(s) i to them. Nested call will be ignored.</p> </dd> <dt class="d_decl" id="Signal.connect">final void <strong id="connect">connect</strong>(slot_t slot); </dt> <dd>
<p>Add a slot to the list of slots to be called when emit() is called.</p> </dd> <dt class="d_decl" id="Signal.disconnect">final void <strong id="disconnect">disconnect</strong>(slot_t slot); </dt> <dd>
<p>Remove a slot from the list of slots to be called when emit() is called.</p> </dd> <dt class="d_decl" id="Signal.disconnectAll">final void <strong id="disconnectAll">disconnectAll</strong>(); </dt> <dd>
<p>Disconnect all the slots.</p> </dd> </dl> </dd> </dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 1999–2019 The D Language Foundation<br>Licensed under the Boost License 1.0.<br>
    <a href="https://dlang.org/phobos/std_signals.html" class="_attribution-link">https://dlang.org/phobos/std_signals.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
