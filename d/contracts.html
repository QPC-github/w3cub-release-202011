
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>23. Contract Programming - D - W3cubDocs</title>
  
  <meta name="description" content="Contracts are a breakthrough technique to reduce the programming effort for large projects. Contracts are the concept of preconditions, &hellip;">
  <meta name="keywords" content="contract, programming, d">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/d/contracts.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/d.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/d/" class="_nav-link" title="" style="margin-left:0;">D</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _d">
				
				
<h1>Contract Programming</h1>       <b>Contents</b>  <ol> <li><a href="#assert_contracts">Assert Contract</a></li> <li><a href="#pre_post_contracts">Pre and Post Contracts</a></li> <li><a href="#in_out_inheritance">In, Out and Inheritance</a></li> <li><a href="#Invariants">Invariants</a></li> <li><a href="#references">References</a></li> </ol>   <p>Contracts are a breakthrough technique to reduce the programming effort for large projects. Contracts are the concept of preconditions, postconditions, errors, and invariants. </p>  <p>Building contract support into the language makes for:</p>  <ol> <li>a consistent look and feel for the contracts</li> <li>tool support</li> <li>it's possible the compiler can generate better code using information gathered from the contracts</li> <li>easier management and enforcement of contracts</li> <li>handling of contract inheritance</li> </ol>  <img src="data:image/gif;base64,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" style="max-width:100%" alt="Contracts make D bug resistant" border="0">  <p>The idea of a contract is simple - it's just an expression that must evaluate to true. If it does not, the contract is broken, and by definition, the program has a bug in it. Contracts form part of the specification for a program, moving it from the documentation to the code itself. And as every programmer knows, documentation tends to be incomplete, out of date, wrong, or non-existent. Moving the contracts into the code makes them verifiable against the program.</p>  <h2 id="assert_contracts">Assert Contract</h2>  <p>The most basic contract is the <a href="expression#AssertExpression"><i>AssertExpression</i></a>. An <b>assert</b> declares an expression that must evaluate to true, with an optional failure string as a second argument:</p> <pre data-language="d">assert(expression);
assert(expression, "message to display on failure");
</pre> <p>As a contract, an <code>assert</code> represents a guarantee that the code <i>must</i> uphold. Any failure of this expression represents a logic error in the code that must be fixed in the source code. A program for which the assert contract is false is, by definition, invalid.</p>  <p>As a debugging aid, the compiler may insert a runtime check to verify that the expression is indeed true. If it is false, an <code>AssertError</code> is thrown. When compiling for release, this check is not generated. The special <code>assert(0)</code> expression, however, is generated even in release mode. See the <a href="expression#AssertExpression"><i>AssertExpression</i></a> documentation for more information.</p>  <p>The compiler is free to assume the assert expression is true and optimize subsequent code accordingly.</p>  <b>Undefined Behavior</b>: The subsequent execution of the program after an assert contract is false.  <h2 id="pre_post_contracts">Pre and Post Contracts</h2>  <p>The pre contracts specify the preconditions before a statement is executed. The most typical use of this would be in validating the parameters to a function. The post contracts validate the result of the statement. The most typical use of this would be in validating the return value of a function and of any side effects it has. In D, pre contracts begin with <code>in</code>, and post contracts begin with <code>out</code>. They come at the end of the function signature and before the opening brace of the function body.</p>  <p>Pre and post contracts can be written either in expression form (feature introduced in DMD 2.081.0), with a syntax similar to <b>assert</b>, or as block statements containing arbitrary code.</p>  <p>The expression form is:</p> <pre data-language="d">in (expression)
in (expression, "failure string")
out (identifier; expression)
out (identifier; expression, "failure string")
out (; expression)
out (; expression, "failure string")
{
    ...function body...
}
</pre> <p>The block statement form is:</p> <pre data-language="d">in
{
    ...contract preconditions...
}
out
{
    ...contract postconditions...
}
out (identifier)
{
    ...contract postconditions...
}
do
{
    ...function body...
}
</pre>  <p>The optional identifier in either type of <code>out</code> contract is set to the return value of the function.</p>  <p>By definition, if a pre contract fails, then the function received bad parameters. If a post contract fails, then there is a bug in the function. In either case, an <code>assert</code> statement within the corresponding <code>in</code> or <code>out</code> block will throw an <code>AssertError</code>.</p>  <p>The keyword <code>do</code> can be used to announce the function body. Although any number of pre or post contracts of any form may follow each other, <code>do</code> is required only when the last contract before the body is a block statement. (Before the acceptance of <a href="https://github.com/dlang/DIPs/blob/master/DIPs/accepted/DIP1003.md">DIP1003</a>, the keyword <code>body</code> was required instead of <code>do</code>, and may still be encountered in old code bases. In the long term, <code>body</code> may be deprecated, but for now it's allowed both as a keyword in this context and as an identifier elsewhere, although <code>do</code> is preferred.) </p>  <p>Though any arbitrary D code is allowed in the <code>in</code> and <code>out</code> contract blocks, their only function should be to verify incoming and outgoing data. It is important to ensure that the code has no side effects, and that the release version of the code will not depend on any effects of the code. For a release build of the code, <code>in</code> and <code>out</code> contracts are not inserted.</p>  <p>Here is an example function in both forms:</p>  <pre data-language="d">int fun(ref int a, int b)
in (a &gt; 0)
in (b &gt;= 0, "b cannot be negative!")
out (r; r &gt; 0, "return must be positive")
out (; a != 0)
{
    // function body
}

int fun(ref int a, int b)
in
{
    assert(a &gt; 0);
    assert(b &gt;= 0, "b cannot be negative!");
}
out (r)
{
    assert(r &gt; 0, "return must be positive");
    assert(a != 0);
}
do
{
    // function body
}
</pre>  <p>The two functions are almost identical semantically. The expressions in the first are lowered to contract blocks that look almost exactly like the second, except that a separate block is created for each expression in the first, thus avoiding shadowing variable names.</p>  <h2 id="in_out_inheritance">In, Out and Inheritance</h2>  <p>If a function in a derived class overrides a function from its super class, then only one of the <code>in</code> contracts of the function and its base functions must be satisfied. Overriding functions then becomes a process of <i>loosening</i> the <code>in</code> contracts. </p>  <p>A function without an <code>in</code> contract means that any values of the function parameters are allowed. This implies that if any function in an inheritance hierarchy has no <code>in</code> contract, then any <code>in</code> contracts on functions overriding it have no useful effect. </p>  <p>Conversely, all of the <code>out</code> contracts need to be satisfied, so overriding functions becomes a processes of <i>tightening</i> the <code>out</code> contracts. </p>  <h2 id="Invariants">Invariants</h2>  <p>Invariants are used to specify characteristics of a class or struct that must always be true (except while executing a member function). For example, a class representing a date might have an invariant that the day must be 1..31 and the hour must be 0..23: </p>  <pre data-language="d">class Date
{
    int day;
    int hour;

    this(int d, int h)
    {
        day = d;
        hour = h;
    }

    invariant
    {
        assert(1 &lt;= day &amp;&amp; day &lt;= 31);
        assert(0 &lt;= hour &amp;&amp; hour &lt; 24, "hour out of bounds");
    }
}
</pre>  <p>Invariant blocks should contain <code>assert</code> expressions, and should throw <code>AssertError</code>s when they fail. Since DMD version 2.081.0, invariants can also be written as expression statements, with <code>assert</code> implied: </p>  <pre data-language="d">    invariant (1 &lt;= day &amp;&amp; day &lt;= 31);
    invariant (0 &lt;= hour &amp;&amp; hour &lt; 24, "hour out of bounds");
</pre>  <p>The invariant is a contract saying that the <code>assert</code>s must hold true. The invariant is checked when a class or struct constructor completes, and at the start of the class or struct destructor. For public or exported functions, the order of execution is: </p>  <ol> <li>preconditions</li> <li>invariant</li> <li>function body</li> <li>invariant</li> <li>postconditions</li> </ol>  <p>The invariant is not checked if the class or struct is implicitly constructed using the default <code>.init</code> value. </p>  <p>The code in the invariant may not call any public non-static members of the class or struct, either directly or indirectly. Doing so will result in a stack overflow, as the invariant will wind up being called in an infinitely recursive manner. </p>  <p>Invariants are implicitly <code>const</code>.</p>  <p>Since the invariant is called at the start of public or exported members, such members should not be called from constructors. </p>  <pre data-language="d">class Foo
{
    public void f() { }
    private void g() { }

    invariant
    {
        f();  // error, cannot call public member function from invariant
        g();  // ok, g() is not public
    }
}
</pre>  <p>The invariant can be checked with an <code>assert()</code> expression:</p>  <ol> <li>classes need to pass a class object</li> <li>structs need to pass the address of an instance</li> </ol>  <pre data-language="d">auto mydate = new Date(); //class
auto s = S();             //struct
...
assert(mydate);           // check that class Date invariant holds
assert(&amp;s);               // check that struct S invariant holds
</pre>  <p>Class invariants are inherited, that is, any class invariant is implicitly in addition to the invariants of its base classes.</p>  <p>There can be more than one invariant declared per class or struct.</p>  <p>When compiling for release, the invariant code is not generated, and the compiled program runs at maximum speed. The compiler is free to assume the invariant holds true, regardless of whether code is generated for it or not, and may optimize code accordingly.</p>  <h2 id="references">References</h2>  <ul>
<li> <a href="https://web.archive.org/web/20080919174640/http://people.cs.uchicago.edu/~robby/contract-reading-list/">Contracts Reading List</a>
</li>
<li> <a href="http://jan.newmarch.name/java/contracts/paper-long.html">Adding Contracts to Java</a> </li>
</ul>     <div class="_attribution">
  <p class="_attribution-p">
    © 1999–2019 The D Language Foundation<br>Licensed under the Boost License 1.0.<br>
    <a href="https://dlang.org/spec/contracts.html" class="_attribution-link">https://dlang.org/spec/contracts.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
