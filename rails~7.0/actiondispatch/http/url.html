
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ActionDispatch&#58;&#58;Http&#58;&#58;URL - Ruby on Rails 7.0 - W3cubDocs</title>
  
  <meta name="description" content=" Returns the domain part of a host given the domain level. ">
  <meta name="keywords" content="module, actiondispatch, http, url, ruby, on, rails, rails~7.0">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/rails~7.0/actiondispatch/http/url.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-60a6449bb52e9968d95c133a29f066ffcb8dbe4f077d4022e51c991ce30bf256c8e19c508207a4193c414ffd0414826564317669b0f27f9f85c1cb21b84e097e.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/rails~7.0.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/rails~7.0/" class="_nav-link" title="" style="margin-left:0;">Ruby on Rails 7.0</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _rdoc">
				
				
<h1 id="module-ActionDispatch::Http::URL" class="module"> module ActionDispatch::Http::URL </h1>  <section id="5Buntitled-5D" class="documentation-section"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="HOST_REGEXP">HOST_REGEXP </dt>

<dt id="IP_HOST_REGEXP">IP_HOST_REGEXP </dt>

<dt id="PROTOCOL_REGEXP">PROTOCOL_REGEXP </dt>

</dl> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-extract_domain"> <span class="method-name">extract_domain</span><span class="method-args">(host, tld_length)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="extract_domain-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 22
def extract_domain(host, tld_length)
  extract_domain_from(host, tld_length) if named_host?(host)
end</pre> </div> <p>Returns the domain part of a host given the domain level.</p> <pre class="ruby" data-language="ruby"># Top-level domain example
extract_domain('www.example.com', 1) # =&gt; "example.com"
# Second-level domain example
extract_domain('dev.www.example.co.uk', 2) # =&gt; "example.co.uk"
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-extract_subdomain"> <span class="method-name">extract_subdomain</span><span class="method-args">(host, tld_length)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="extract_subdomain-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 46
def extract_subdomain(host, tld_length)
  extract_subdomains(host, tld_length).join(".")
end</pre> </div> <p>Returns the subdomains of a host as a <a href="../../string"><code>String</code></a> given the domain level.</p> <pre class="ruby" data-language="ruby"># Top-level domain example
extract_subdomain('www.example.com', 1) # =&gt; "www"
# Second-level domain example
extract_subdomain('dev.www.example.co.uk', 2) # =&gt; "dev.www"
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-extract_subdomains"> <span class="method-name">extract_subdomains</span><span class="method-args">(host, tld_length)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="extract_subdomains-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 32
def extract_subdomains(host, tld_length)
  if named_host?(host)
    extract_subdomains_from(host, tld_length)
  else
    []
  end
end</pre> </div> <p>Returns the subdomains of a host as an <a href="../../array"><code>Array</code></a> given the domain level.</p> <pre class="ruby" data-language="ruby"># Top-level domain example
extract_subdomains('www.example.com', 1) # =&gt; ["www"]
# Second-level domain example
extract_subdomains('dev.www.example.co.uk', 2) # =&gt; ["dev", "www"]
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-full_url_for"> <span class="method-name">full_url_for</span><span class="method-args">(options)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="full_url_for-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 58
def full_url_for(options)
  host     = options[:host]
  protocol = options[:protocol]
  port     = options[:port]

  unless host
    raise ArgumentError, "Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true"
  end

  build_host_url(host, port, protocol, options, path_for(options))
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 179
def initialize
  super
  @protocol = nil
  @port     = nil
end</pre> </div> <div class="method-calls-super"> Calls superclass method </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-path_for"> <span class="method-name">path_for</span><span class="method-args">(options)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="path_for-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 70
def path_for(options)
  path = options[:script_name].to_s.chomp("/")
  path &lt;&lt; options[:path] if options.key?(:path)

  path = "/" if options[:trailing_slash] &amp;&amp; path.blank?

  add_params(path, options[:params]) if options.key?(:params)
  add_anchor(path, options[:anchor]) if options.key?(:anchor)

  path
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-url_for"> <span class="method-name">url_for</span><span class="method-args">(options)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="url_for-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 50
def url_for(options)
  if options[:only_path]
    path_for options
  else
    full_url_for options
  end
end</pre> </div>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-domain"> <span class="method-name">domain</span><span class="method-args">(tld_length = @@tld_length)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="domain-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 321
def domain(tld_length = @@tld_length)
  ActionDispatch::Http::URL.extract_domain(host, tld_length)
end</pre> </div> <p>Returns the domain part of a host, such as “rubyonrails.org” in “<span>www.rubyonrails.org</span>”. You can specify a different <code>tld_length</code>, such as 2 to catch rubyonrails.co.uk in “<span>www.rubyonrails.co.uk</span>”.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-host"> <span class="method-name">host</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="host-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 226
def host
  raw_host_with_port.sub(/:\d+$/, "")
end</pre> </div> <p>Returns the host for this request, such as “example.com”.</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:8080'
req.host # =&gt; "example.com"
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-host_with_port"> <span class="method-name">host_with_port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="host_with_port-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 242
def host_with_port
  "#{host}#{port_string}"
end</pre> </div> <p>Returns a host:port string for this request, such as “example.com” or “example.com:8080”. Port is only included if it is not a default port (80 or 443)</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com'
req.host_with_port # =&gt; "example.com"

req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:80'
req.host_with_port # =&gt; "example.com"

req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:8080'
req.host_with_port # =&gt; "example.com:8080"
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-optional_port"> <span class="method-name">optional_port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="optional_port-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 292
def optional_port
  standard_port? ? nil : port
end</pre> </div> <p>Returns a number port suffix like 8080 if the port number of this request is not the default HTTP port 80 or HTTPS port 443.</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:80'
req.optional_port # =&gt; nil

req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:8080'
req.optional_port # =&gt; 8080
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-port"> <span class="method-name">port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="port-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 253
def port
  @port ||= if raw_host_with_port =~ /:(\d+)$/
    $1.to_i
  else
    standard_port
  end
end</pre> </div> <p>Returns the port number of this request as an integer.</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com'
req.port # =&gt; 80

req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:8080'
req.port # =&gt; 8080
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-port_string"> <span class="method-name">port_string</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="port_string-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 304
def port_string
  standard_port? ? "" : ":#{port}"
end</pre> </div> <p>Returns a string port suffix, including colon, like “:8080” if the port number of this request is not the default HTTP port 80 or HTTPS port 443.</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:80'
req.port_string # =&gt; ""

req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:8080'
req.port_string # =&gt; ":8080"
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-protocol"> <span class="method-name">protocol</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="protocol-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 200
def protocol
  @protocol ||= ssl? ? "https://" : "http://"
end</pre> </div> <p>Returns 'https://' if this is an <a href="../ssl"><code>SSL</code></a> request and 'http://' otherwise.</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com'
req.protocol # =&gt; "http://"

req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com', 'HTTPS' =&gt; 'on'
req.protocol # =&gt; "https://"
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-raw_host_with_port"> <span class="method-name">raw_host_with_port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="raw_host_with_port-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 214
def raw_host_with_port
  if forwarded = x_forwarded_host.presence
    forwarded.split(/,\s?/).last
  else
    get_header("HTTP_HOST") || "#{server_name}:#{get_header('SERVER_PORT')}"
  end
end</pre> </div> <p>Returns the host and port for this request, such as “example.com:8080”.</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com'
req.raw_host_with_port # =&gt; "example.com"

req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:80'
req.raw_host_with_port # =&gt; "example.com:80"

req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:8080'
req.raw_host_with_port # =&gt; "example.com:8080"
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-server_port"> <span class="method-name">server_port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="server_port-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 315
def server_port
  get_header("SERVER_PORT").to_i
end</pre> </div> <p>Returns the requested port, such as 8080, based on SERVER_PORT</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'SERVER_PORT' =&gt; '80'
req.server_port # =&gt; 80

req = ActionDispatch::Request.new 'SERVER_PORT' =&gt; '8080'
req.server_port # =&gt; 8080
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-standard_port"> <span class="method-name">standard_port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="standard_port-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 265
def standard_port
  if "https://" == protocol
    443
  else
    80
  end
end</pre> </div> <p>Returns the standard port number for this request's protocol.</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:8080'
req.standard_port # =&gt; 80
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-standard_port-3F"> <span class="method-name">standard_port?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="standard_port-3F-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 280
def standard_port?
  port == standard_port
end</pre> </div> <p>Returns whether this request is using the standard port</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:80'
req.standard_port? # =&gt; true

req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com:8080'
req.standard_port? # =&gt; false
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-subdomain"> <span class="method-name">subdomain</span><span class="method-args">(tld_length = @@tld_length)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="subdomain-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 337
def subdomain(tld_length = @@tld_length)
  ActionDispatch::Http::URL.extract_subdomain(host, tld_length)
end</pre> </div> <p>Returns all the subdomains as a string, so <code>"dev.www"</code> would be returned for “dev.<span>www.rubyonrails.org</span>”. You can specify a different <code>tld_length</code>, such as 2 to catch <code>"www"</code> instead of <code>"www.rubyonrails"</code> in “<span>www.rubyonrails.co.uk</span>”.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-subdomains"> <span class="method-name">subdomains</span><span class="method-args">(tld_length = @@tld_length)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="subdomains-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 329
def subdomains(tld_length = @@tld_length)
  ActionDispatch::Http::URL.extract_subdomains(host, tld_length)
end</pre> </div> <p>Returns all the subdomains as an array, so <code>["dev", "www"]</code> would be returned for “dev.<span>www.rubyonrails.org</span>”. You can specify a different <code>tld_length</code>, such as 2 to catch <code>["www"]</code> instead of <code>["www", "rubyonrails"]</code> in “<span>www.rubyonrails.co.uk</span>”.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-url"> <span class="method-name">url</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="url-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 189
def url
  protocol + host_with_port + fullpath
end</pre> </div> <p>Returns the complete <a href="url"><code>URL</code></a> used for this request.</p> <pre class="ruby" data-language="ruby">req = ActionDispatch::Request.new 'HTTP_HOST' =&gt; 'example.com'
req.url # =&gt; "http://example.com"
</pre>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2004–2021 David Heinemeier Hansson<br>Licensed under the MIT License.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
