
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Interact With the Clipboard - Web Extensions - W3cubDocs</title>
  
  <meta name="description" content="There are two ways browser extensions can interact with the system clipboard&#58; the Document.execCommand() method and the modern asynchronous &hellip;">
  <meta name="keywords" content="interact, with, clipboard, web, extensions, web_extensions">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/web_extensions/interact_with_the_clipboard.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/web_extensions.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/web_extensions/" class="_nav-link" title="" style="margin-left:0;">Web Extensions</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>Interact with the clipboard</h1> <p>There are two ways browser extensions can interact with the system clipboard: the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand"><code>Document.execCommand()</code></a> method and the modern asynchronous <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API">Clipboard API</a>.</p> <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand"><code>Document.execCommand()</code></a> method can be used, specifying the desired command:</p> <ul> <li><code>document.execCommand("copy")</code></li> <li><code>document.execCommand("cut")</code></li> <li><code>document.execCommand("paste")</code></li> </ul> <p>The Clipboard API provides asynchronous access to read and write the clipboard contents directly. For example, to read text from the clipboard:</p> <div class="code-example"><pre data-language="js">navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">text</span> <span class="token operator">=&gt;</span> outputElem<span class="token punctuation">.</span>innerText <span class="token operator">=</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div> <p>This requests the contents of the clipboard and, when the response is received stores the clipboard text into an element's <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/innerText"><code>innerText</code></a>.</p> <div class="note notecard"> <p><strong>Note:</strong> The asynchronous Clipboard API methods are a recent addition to the specification, and may not be fully implemented to the specification in all browsers. Be sure to review the compatibility tables for each method before using them, to ensure that support is broad enough for your needs.</p> </div>
<h2 id="writing_to_the_clipboard">Writing to the clipboard</h2>
<p>There are two ways to write to the clipboard. You can use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand"><code>document.execCommand()</code></a> to trigger the "cut" and "copy" actions, which replaces the clipboard's current contents with the currently selected data. The other option is to use the Clipboard API's <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/writeText"><code>Clipboard.writeText()</code></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/write"><code>Clipboard.write()</code></a> method to replace the clipboard's contents with specific data.</p>
<h3 id="using_execcommand()">Using execCommand()</h3>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand"><code>document.execCommand()</code></a> method's <code>"cut"</code> and <code>"copy"</code> commands can be used to replace the clipboard's current contents with the selected material. These commands can be used without any special permission if you are using them in a short-lived event handler for a user action (for example, a click handler).</p> <p>For example, suppose you've got a popup that includes the following HTML:</p> <div class="code-example"><pre data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>copy<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Copy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</pre></div> <p>To make the <code>"copy"</code> button copy the contents of the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input"><code>&lt;input&gt;</code></a> element, you can use code like this:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> copyText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  copyText<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">"copy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#copy"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> copy<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div> <p>Because the <code>execCommand()</code> call is inside a click event handler, you don't need any special permissions here.</p> <p>However, let's say that instead you trigger the copy from an alarm:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> copyText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  copyText<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">"copy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

browser<span class="token punctuation">.</span>alarms<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  delayInMinutes<span class="token operator">:</span> <span class="token number">0.1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

browser<span class="token punctuation">.</span>alarms<span class="token punctuation">.</span>onAlarm<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div> <p>Depending on the browser, this may not work. On Firefox, it will not work, and you'll see a message like this in your console:</p> <pre class="notranslate">document.execCommand(‘cut’/‘copy’) was denied because it was not called from inside a short running user-generated event handler.</pre> <p>To enable this use case, you need to ask for the <code>"clipboardWrite"</code> <a href="manifest.json/permissions">permission</a>. So: <code>"clipboardWrite"</code> enables you to write to the clipboard outside a short-lived event handler for a user action.</p>
<h3 id="using_the_clipboard_api">Using the Clipboard API</h3>
<p>The Clipboard API adds greater flexibility, in that you aren't limited to copying the current selection into the clipboard, but can directly specify what information to place into the clipboard.</p> <p>Using the API requires that you have the permission "clipboardRead" or "clipboardWrite" in your manifest.json file.</p> <p>For page scripts, the Permissions API's <code>"clipboard-write"</code> permission is needed. You can check for that permission using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query"><code>navigator.permissions.query()</code></a>:</p> <div class="code-example"><pre data-language="js">navigator<span class="token punctuation">.</span>permissions<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">"clipboard-write"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>state <span class="token operator">==</span> <span class="token string">"granted"</span> <span class="token operator">||</span> result<span class="token punctuation">.</span>state <span class="token operator">==</span> <span class="token string">"prompt"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* write to the clipboard now */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>This function takes a string as input and updates the clipboard to contain that string:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">updateClipboard</span><span class="token punctuation">(</span><span class="token parameter">newClip</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>newClip<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* clipboard successfully set */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* clipboard write failed */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div> <div class="notecard note"> <p><strong>Note:</strong> The<code>clipboard-write</code> permission name is not currently supported in Firefox — only Chromium browsers.</p> </div>
<h3 id="browser-specific_considerations">Browser-specific considerations</h3>
<p>The clipboard and other APIs involved here are evolving rapidly, so there are variations among browsers in how they work.</p> <p>In Chrome:</p> <ul> <li>You can write to the clipboard like this in all execution contexts - background pages, content scripts, options pages, and popups.</li> <li>You don't actually need <code>"clipboardWrite"</code>, even to write to the clipboard outside a user-generated event handler.</li> </ul> <p>In Firefox:</p> <ul> <li>You can write to the clipboard with execCommand in all execution contexts <em>except background pages</em>. In Firefox you can't select text or focus an input field in background pages, so you can't write to the clipboard with execCommand from a background page. The Clipboard Web API doesn't have this limitation.</li> <li>From version 57 onward, you can copy images to the clipboard using the <code><a href="api/clipboard/setimagedata">clipboard.setImageData()</a></code> API.</li> <li>Support for the Clipboard API's <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/writeText"><code>navigator.clipboard.writeText()</code></a> method was added in Firefox 63.</li> <li>When using content scripts, the Clipboard API is available only for HTTPS pages. As a workaround, use messaging between your content scripts and the background script.</li> </ul>
<h2 id="reading_from_the_clipboard">Reading from the clipboard</h2>
<p>The <code>execCommand()</code> method provides the <code>"paste"</code> command, which lets you paste the current clipboard contents at the insertion point in an editable control. You can gain greater flexibility using the Clipboard API's <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/read"><code>Clipboard.read()</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText"><code>Clipboard.readText()</code></a> methods.</p>
<h3 id="using_execcommand()_2">Using execCommand()</h3>
<p>First, you will need to have the <code>"clipboardRead"</code> <a href="manifest.json/permissions">permission</a> established for your extension. This is the case even if you're using the <code>"paste"</code> command from within a user-generated event handler such as <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/click_event">click</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/keypress_event">keypress</a></code>.</p> <p>Consider HTML that includes something like this:</p> <div class="code-example"><pre data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>output<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>paste<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Paste<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</pre></div> <p>To set the content of the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea"><code>&lt;textarea&gt;</code></a> element with the ID <code>"output"</code> from the clipboard when the user clicks the <code>"paste"</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button"><code>&lt;button&gt;</code></a>, you can use code like this:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">paste</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> pasteText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#output"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  pasteText<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">"paste"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pasteText<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#paste"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> paste<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<h3 id="using_the_clipboard_api_2">Using the Clipboard API</h3>
<p>The Clipboard API's <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText"><code>navigator.clipboard.readText()</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/read"><code>navigator.clipboard.read()</code></a> methods let you read arbitrary text or binary data from the clipboard. This lets you access the data in the clipboard without pasting it into an editable element.</p> <p>Once you have the <code>"clipboard-read"</code> permission from the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Permissions_API">Permissions API</a>, you can read from the clipboard easily:</p> <div class="code-example"><pre data-language="js">navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">clipText</span> <span class="token operator">=&gt;</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"outbox"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> clipText<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div> <p>This snippet of code fetches the text from the clipboard and replaces the current contents of the element with the ID <code>"outbox"</code> with that text.</p>
<h3 id="browser-specific_considerations_2">Browser-specific considerations</h3>
<p>Firefox supports the <code>"clipboardRead"</code> <a href="manifest.json/permissions">permission</a> from version 54, but only supports pasting into elements in <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Editable_content">content editable mode</a>, which for content scripts only works with a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea"><code>&lt;textarea&gt;</code></a>. For background scripts, any element can be set to content editable mode.</p>
<h2 id="see_also">See also</h2>
<ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API">Clipboard API</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Permissions_API">Permissions API</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Editable_content">Making content editable</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes#attr-contenteditable"><code>contenteditable</code></a></li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2021 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
