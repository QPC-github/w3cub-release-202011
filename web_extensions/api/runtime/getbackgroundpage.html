
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>runtime.getBackgroundPage() - Web Extensions - W3cubDocs</title>
  
  <meta name="description" content=" Retrieves the Window object for the background page running inside the current extension. ">
  <meta name="keywords" content="runtime, getbackgroundpage, web, extensions, web_extensions">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/web_extensions/api/runtime/getbackgroundpage.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/web_extensions.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/web_extensions/" class="_nav-link" title="" style="margin-left:0;">Web Extensions</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>runtime.getBackgroundPage()</h1> <p>Retrieves the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window"><code>Window</code></a> object for the background page running inside the current extension.</p> <p>This provides a convenient way for other privileged extension scripts to get direct access to the background script's scope. This enables them to access variables or call functions defined in that scope. "Privileged script" here includes scripts running in <a href="../../anatomy_of_a_webextension#options_pages">options pages</a>, or scripts running in <a href="../../anatomy_of_a_webextension#browser_actions_2">browser action</a> or <a href="../../anatomy_of_a_webextension#page_actions">page action</a> popups, but does <em>not</em> include <a href="../../anatomy_of_a_webextension#content_scripts">content scripts</a>.</p> <p>Note that variables that were declared using <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const">const</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let">let</a></code> do not appear in the <code>Window</code> object returned by this function.</p> <p><strong>Also note that this method cannot be used in a private window in Firefox</strong>—it always returns <code>null</code>. For more info see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1329304" rel=" noopener">related bug at bugzilla</a>.</p> <p>If the background page is an event page, the system will ensure it is loaded before resolving the promise.</p> <p>This is an asynchronous function that returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>.</p> <div class="note notecard"> <p><strong>Note:</strong> In Firefox, this method cannot be used in Private Browsing mode — it always returns <code>null</code>. For more info see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1329304" rel=" noopener">bug 1329304</a>.</p> <p>In Chrome, this method is available only with persistent background pages, which are not available in Manifest V3, so consider using Manifest V2. See the <a href="https://developer.chrome.com/extensions/migrating_to_service_workers" rel=" noopener">this</a> for details.</p> <p>Consider using <a href="sendmessage"><code>runtime.sendMessage()</code></a> or <a href="connect"><code>runtime.connect()</code></a>, which work correctly in both scenarios above.</p> </div>
<h2 id="syntax">Syntax</h2>
<div class="code-example"><pre data-language="js"><span class="token keyword">var</span> gettingPage <span class="token operator">=</span> browser<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token function">getBackgroundPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre></div>
<h3 id="parameters">Parameters</h3>
<p>None.</p>
<h3 id="return_value">Return value</h3>
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that will be fulfilled with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window"><code>Window</code></a> object for the background page, if there is one. If the extension does not include a background page, the promise is rejected with an error message.</p>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>getBackgroundPage</code></th>
<td class="bc-supports-yes"><div>22</div></td>
<td class="bc-supports-yes"><div>14</div></td>
<td class="bc-supports-yes">
<div>45</div>
<div>If this is called from a page that is part of a private browsing window, such as a sidebar in a private window or a popup opened from a private window, then it will always return <code>null</code>.</div>
</td>
<td class="bc-supports-unknown"><div>?</div></td>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes"><div>14</div></td>
<td class="bc-supports-unknown"><div>?</div></td>
<td class="bc-supports-unknown"><div>?</div></td>
<td class="bc-supports-yes">
<div>48</div>
<div>If this is called from a page that is part of a private browsing window, such as a sidebar in a private window or a popup opened from a private window, then it will always return <code>null</code>.</div>
</td>
<td class="bc-supports-unknown"><div>?</div></td>
<td class="bc-supports-unknown"><div>?</div></td>
<td class="bc-supports-unknown"><div>?</div></td>
</tr></tbody>
</table>


<h2 id="examples">Examples</h2>
<p>Suppose a <a href="../../anatomy_of_a_webextension#background_scripts">background script</a> defines a function <code>foo()</code>:</p> <div class="code-example"><pre data-language="js"><span class="token comment">// background.js</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"I'm defined in background.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div> <p>A script running in a <a href="../../anatomy_of_a_webextension#browser_actions_2">popup</a> can call this function directly like this:</p> <div class="code-example"><pre data-language="js"><span class="token comment">// popup.js</span>

<span class="token keyword">function</span> <span class="token function">onGot</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  page<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> getting <span class="token operator">=</span> browser<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token function">getBackgroundPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
getting<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>onGot<span class="token punctuation">,</span> onError<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>  <div class="note notecard">
<p><strong>Note:</strong> This API is based on Chromium's <a href="https://developer.chrome.com/extensions/runtime#method-getBackgroundPage" rel=" noopener"><code>chrome.runtime</code></a> API. This documentation is derived from <a href="https://chromium.googlesource.com/chromium/src/+/master/extensions/common/api/runtime.json" rel=" noopener"><code>runtime.json</code></a> in the Chromium code.</p> <p>Microsoft Edge compatibility data is supplied by Microsoft Corporation and is included here under the Creative Commons Attribution 3.0 United States License.</p> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2021 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/getBackgroundPage" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/getBackgroundPage</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
