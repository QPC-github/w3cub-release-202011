
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Astro Integration API - Astro - W3cubDocs</title>
  
  <meta name="description" content=" Astro Integrations add new functionality and behaviors for your project with only a few lines of code. ">
  <meta name="keywords" content="astro, integration, api">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/astro/reference/integrations-reference/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-1810d67ab7e57be09d8247710d2feb6954566959eb82322d1fee3a0c9156f56974b78ebaa9928774f00767342bbe58b0799d91fcc336b92b319170b196f9b64b.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/astro.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/astro/" class="_nav-link" title="" style="margin-left:0;">Astro</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 class="content-title astro-NDOP6O4T" id="overview">Astro Integration API</h1> <p><strong>Astro Integrations</strong> add new functionality and behaviors for your project with only a few lines of code.</p>
<p>This reference page is for anyone writing their own integration. To learn how to use an integration in your project, check out our <a href="../../guides/integrations-guide/index">Using Integrations</a> guide instead.</p>
<div class="heading-wrapper level-h2" tabindex="-1"><h2 id="examples">Examples</h2></div>
<p>The official Astro integrations can act as reference for you as you go to build your own integrations.</p>
<ul> <li>
<strong>Renderers:</strong> <a href="../../guides/integrations-guide/lit/index"><code>lit</code></a>, <a href="../../guides/integrations-guide/svelte/index"><code>svelte</code></a>, <a href="../../guides/integrations-guide/react/index"><code>react</code></a>, <a href="../../guides/integrations-guide/preact/index"><code>preact</code></a>, <a href="../../guides/integrations-guide/vue/index"><code>vue</code></a>, <a href="../../guides/integrations-guide/solid-js/index"><code>solid</code></a>
</li> <li>
<strong>Libraries:</strong> <a href="../../guides/integrations-guide/tailwind/index"><code>tailwind</code></a>, <a href="../../guides/integrations-guide/partytown/index"><code>partytown</code></a>
</li> <li>
<strong>Features:</strong> <a href="../../guides/integrations-guide/sitemap/index"><code>sitemap</code></a>
</li> </ul>
<div class="heading-wrapper level-h2" tabindex="-1"><h2 id="quick-api-reference">Quick API Reference</h2></div>   <pre class="astro-code" data-language="ts">interface AstroIntegration {
    name: string;
    hooks: {
        'astro:config:setup'?: (options: {
            config: AstroConfig;
            command: 'dev' | 'build';
            updateConfig: (newConfig: Record&lt;string, any&gt;) =&gt; void;
            addRenderer: (renderer: AstroRenderer) =&gt; void;
            injectScript: (stage: InjectedScriptStage, content: string) =&gt; void;
            injectRoute: ({ pattern: string, entryPoint: string }) =&gt; void;
        }) =&gt; void;
        'astro:config:done'?: (options: { config: AstroConfig }) =&gt; void | Promise&lt;void&gt;;
        'astro:server:setup'?: (options: { server: vite.ViteDevServer }) =&gt; void | Promise&lt;void&gt;;
        'astro:server:start'?: (options: { address: AddressInfo }) =&gt; void | Promise&lt;void&gt;;
        'astro:server:done'?: () =&gt; void | Promise&lt;void&gt;;
        'astro:build:start'?: (options: { buildConfig: BuildConfig }) =&gt; void | Promise&lt;void&gt;;
        'astro:build:setup'?: (options: {
          vite: ViteConfigWithSSR;
          pages: Map&lt;string, PageBuildData&gt;;
          target: 'client' | 'server';
        }) =&gt; void | Promise&lt;void&gt;;
        'astro:build:generated'?: (options: { dir: URL }) =&gt; void | Promise&lt;void&gt;;
        'astro:build:ssr'?: (options: { manifest: SerializedSSRManifest }) =&gt; void | Promise&lt;void&gt;;
        'astro:build:done'?: (options: { pages: { pathname: string }[]; dir: URL; routes: RouteData[] }) =&gt; void | Promise&lt;void&gt;;
    };
}</pre> <div class="heading-wrapper level-h2" tabindex="-1"><h2 id="hooks">Hooks</h2></div>
<div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astroconfigsetup"><code>astro:config:setup</code></h3></div>
<p><strong>Next hook:</strong> <a href="#astroconfigdone"><code>astro:config:done</code></a></p>
<p><strong>When:</strong> On initialization, before either the <a href="https://vitejs.dev/config/">Vite</a> or <a href="../configuration-reference/index">Astro config</a> have resolved.</p>
<p><strong>Why:</strong> To extend the project config. This inludes updating the <a href="../configuration-reference/index">Astro config</a>, applying <a href="https://vitejs.dev/guide/api-plugin.html">Vite plugins</a>, adding component renderers, and injecting scripts onto the page.</p>   <pre class="astro-code" data-language="js">'astro:config:setup'?: (options: {
    config: AstroConfig;
    command: 'dev' | 'build';
    updateConfig: (newConfig: Record&lt;string, any&gt;) =&gt; void;
    addRenderer: (renderer: AstroRenderer) =&gt; void;
    injectScript: (stage: InjectedScriptStage, content: string) =&gt; void;
    injectRoute: ({ pattern: string, entryPoint: string }) =&gt; void;
}) =&gt; void;</pre> <div class="heading-wrapper level-h4" tabindex="-1"><h4 id="config-option">
<code>config</code> option</h4></div>
<p><strong>Type:</strong> <code>AstroConfig</code></p>
<p>A read-only copy of the user-supplied <a href="../configuration-reference/index">Astro config</a>. This is resolved <em>before</em> any other integrations have run. If you need a copy of the config after all integrations have completed their config updates, <a href="#astroconfigdone">see the <code>astro:config:done</code> hook</a>.</p>
<div class="heading-wrapper level-h4" tabindex="-1"><h4 id="command-option">
<code>command</code> option</h4></div>
<p><strong>Type:</strong> <code>'dev' / 'build'</code></p>
<ul> <li>
<code>dev</code> - Project is executed with <code>astro dev</code> or <code>astro preview</code>
</li> <li>
<code>build</code> - Project is executed with <code>astro build</code>
</li> </ul>
<div class="heading-wrapper level-h4" tabindex="-1"><h4 id="updateconfig-option">
<code>updateConfig</code> option</h4></div>
<p><strong>Type:</strong> <code>(newConfig: Record&lt;string, any&gt;) =&gt; void;</code></p>
<p>A callback function to update the user-supplied <a href="../configuration-reference/index">Astro config</a>. Any config you provide <strong>will be merged with the user config + other integration config updates,</strong> so you are free to omit keys!</p>
<p>For example, say you need to supply a <a href="https://vitejs.dev/">Vite</a> plugin to the user’s project:</p>   <pre class="astro-code" data-language="js">import bananaCSS from '@vitejs/official-banana-css-plugin';

export default {
  name: 'banana-css-integration',
  hooks: {
    'astro:config:setup': ({ updateConfig }) =&gt; {
      updateConfig({
        vite: {
          plugins: [bananaCSS()],
        }
      })
    }
  }
}</pre> <div class="heading-wrapper level-h4" tabindex="-1"><h4 id="addrenderer-option">
<code>addRenderer</code> option</h4></div>
<p><strong>Type:</strong> <code>(renderer:</code> <a href="https://github.com/withastro/astro/blob/fdd607c5755034edf262e7b275732519328a33b2/packages/astro/src/%40types/astro.ts#L872-L883"><code>AstroRenderer</code></a> <code>) =&gt; void;</code> <strong>Examples:</strong> <a href="https://github.com/withastro/astro/blob/main/packages/integrations/lit/src/index.ts"><code>lit</code></a>, <a href="https://github.com/withastro/astro/blob/main/packages/integrations/svelte/src/index.ts"><code>svelte</code></a>, <a href="https://github.com/withastro/astro/blob/main/packages/integrations/react/src/index.ts"><code>react</code></a>, <a href="https://github.com/withastro/astro/blob/main/packages/integrations/preact/src/index.ts"><code>preact</code></a>, <a href="https://github.com/withastro/astro/blob/main/packages/integrations/vue/src/index.ts"><code>vue</code></a>, <a href="https://github.com/withastro/astro/blob/main/packages/integrations/solid/src/index.ts"><code>solid</code></a></p>
<p>A callback function to add a component framework renderer (i.e. React, Vue, Svelte, etc). You can browse the examples and type definition above for more advanced options, but here are the 2 main options to be aware of:</p>
<ul> <li>
<code>clientEntrypoint</code> - path to a file that executes on the client whenever your component is used. This is mainly for rendering or hydrating your component with JS.</li> <li>
<code>serverEntrypoint</code> - path to a file that executes during server-side requests or static builds whenever your component is used. These should render components to static markup, with hooks for hydration where applicable. <a href="https://reactjs.org/docs/react-dom-server.html#rendertostring">React’s <code>renderToString</code> callback</a> is a classic example.</li> </ul>
<div class="heading-wrapper level-h4" tabindex="-1"><h4 id="injectroute-option">
<code>injectRoute</code> option</h4></div>
<p><strong>Type:</strong> <code>({ pattern: string, entryPoint: string }) =&gt; void;</code></p>
<p>A callback function to inject routes into an Astro project. Injected routes can be <a href="../../core-concepts/astro-pages/index"><code>.astro</code> pages</a> or <a href="../../core-concepts/endpoints/index#static-file-endpoints"><code>.js</code> and <code>.ts</code> route handlers</a>.</p>
<p><code>injectRoute</code> takes an object with a <code>pattern</code> and an <code>entryPoint</code>.</p>
<ul> <li>
<code>pattern</code> - where the route should be output in the browser, for example <code>/foo/bar</code>. A <code>pattern</code> can use Astro’s filepath syntax for denoting dynamic routes, for example <code>/foo/[bar]</code> or <code>/foo/[...bar]</code>. Note that a file extension is <strong>not</strong> needed in the <code>pattern</code>.</li> <li>
<code>entryPoint</code> - a bare module specifier pointing towards the <code>.astro</code> page or <code>.js</code>/<code>.ts</code> route handler that handles the route denoted in the <code>pattern</code>.</li> </ul>
<p>Example usage:</p>   <pre class="astro-code" data-language="js">injectRoute({
  pattern: '/foo/[dynamic]',
  entryPoint: 'foo/dynamic-page.astro'
});</pre> <div class="heading-wrapper level-h4" tabindex="-1"><h4 id="injectscript-option">
<code>injectScript</code> option</h4></div>
<p><strong>Type:</strong> <code>(stage: InjectedScriptStage, content: string) =&gt; void;</code></p>
<p>A callback function to inject a string of JavaScript content onto every page.</p>
<p>The <strong><code>stage</code></strong> denotes how this script (the <code>content</code>) should be inserted. Some stages allow inserting scripts without modification, while others allow optimization during <a href="https://vitejs.dev/guide/build.html">Vite’s bundling step</a>:</p>
<ul> <li> <p><code>"head-inline"</code>: Injected into a script tag in the <code>&lt;head&gt;</code> of every page. <strong>Not</strong> optimized or resolved by Vite.</p> </li> <li> <p><code>"before-hydration"</code>: Imported client-side, before the hydration script runs. Optimized and resolved by Vite.</p> </li> <li> <p><code>"page"</code>: Similar to <code>head-inline</code>, except that the injected snippet is handled by Vite and bundled with any other <code>&lt;script&gt;</code> tags defined inside of Astro components on the page. The script will be loaded with a <code>&lt;script type="module"&gt;</code> in the final page output, optimized and resolved by Vite.</p> </li> <li> <p><code>"page-ssr"</code>: Imported as a separate module in the frontmatter of every Astro page component. Because this stage imports your script, the <code>Astro</code> global is not available and your script will only be run once when the <code>import</code> is first evaluated.</p> <p>The main use for the <code>page-ssr</code> stage is injecting a CSS <code>import</code> into every page to be optimized and resolved by Vite:</p>   <pre class="astro-code" data-language="js">injectScript('page-ssr', 'import "global-styles.css";');</pre>  </li> </ul>
<div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astroconfigdone"><code>astro:config:done</code></h3></div>
<p><strong>Previous hook:</strong> <a href="#astroconfigsetup"><code>astro:config:setup</code></a></p>
<p><strong>Next hook:</strong> <a href="#astroserversetup"><code>astro:server:setup</code></a> when running in “dev” or “preview” mode, or <a href="#astrobuildstart"><code>astro:build:start</code></a> during production builds</p>
<p><strong>When:</strong> After the Astro config has resolved and other integrations have run their <code>astro:config:setup</code> hooks.</p>
<p><strong>Why:</strong> To retrieve the final config for use in other hooks.</p>   <pre class="astro-code" data-language="js">'astro:config:done'?: (options: { config: AstroConfig }) =&gt; void | Promise&lt;void&gt;;</pre> <div class="heading-wrapper level-h4" tabindex="-1"><h4 id="config-option-1">
<code>config</code> option</h4></div>
<p><strong>Type:</strong> <code>AstroConfig</code></p>
<p>A read-only copy of the user-supplied <a href="../configuration-reference/index">Astro config</a>. This is resolved <em>after</em> other integrations have run.</p>
<div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astroserversetup"><code>astro:server:setup</code></h3></div>
<p><strong>Previous hook:</strong> <a href="#astroconfigdone"><code>astro:config:done</code></a></p>
<p><strong>Next hook:</strong> <a href="#astroserverstart"><code>astro:server:start</code></a></p>
<p><strong>When:</strong> Just after the Vite server is created in “dev” or “preview” mode, but before the <code>listen()</code> event is fired. <a href="https://vitejs.dev/guide/api-javascript.html#createserver">See Vite’s createServer API</a> for more.</p>
<p><strong>Why:</strong> To update Vite server options and middleware.</p>   <pre class="astro-code" data-language="js">'astro:server:setup'?: (options: { server: vite.ViteDevServer }) =&gt; void | Promise&lt;void&gt;;</pre> <div class="heading-wrapper level-h4" tabindex="-1"><h4 id="server-option">
<code>server</code> option</h4></div>
<p><strong>Type:</strong> <a href="https://vitejs.dev/guide/api-javascript.html#vitedevserver"><code>ViteDevServer</code></a></p>
<p>A mutable instance of the Vite server used in “dev” and “preview” mode. For instance, this is <a href="../../guides/integrations-guide/partytown/index">used by our Partytown integration</a> to inject the Partytown server as middleware:</p>   <pre class="astro-code" data-language="js">export default {
  name: 'partytown'
  hooks: {
    'astro:server:setup': ({ server }) =&gt; {
      server.middlewares.use(
        function middleware(req, res, next) {
          // handle requests
        }
      );
    }
  }
}</pre> <div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astroserverstart"><code>astro:server:start</code></h3></div>
<p><strong>Previous hook:</strong> <a href="#astroserversetup"><code>astro:server:setup</code></a></p>
<p><strong>Next hook:</strong> <a href="#astroserverdone"><code>astro:server:done</code></a></p>
<p><strong>When:</strong> Just after the server’s <code>listen()</code> event has fired.</p>
<p><strong>Why:</strong> To intercept network requests at the specified address. If you intend to use this address for middleware, consider using <code>astro:server:setup</code> instead.</p>   <pre class="astro-code" data-language="js">'astro:server:start'?: (options: { address: AddressInfo }) =&gt; void | Promise&lt;void&gt;;</pre> <div class="heading-wrapper level-h4" tabindex="-1"><h4 id="address-option">
<code>address</code> option</h4></div>
<p><strong>Type:</strong> <a href="https://microsoft.github.io/PowerBI-JavaScript/interfaces/_node_modules__types_node_net_d_._net_.addressinfo.html"><code>AddressInfo</code></a></p>
<p>The address, family and port number supplied by the <a href="https://nodejs.org/api/net.html">NodeJS Net module</a>.</p>
<div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astroserverdone"><code>astro:server:done</code></h3></div>
<p><strong>Previous hook:</strong> <a href="#astroserverstart"><code>astro:server:start</code></a></p>
<p><strong>When:</strong> Just after the dev server is closed.</p>
<p><strong>Why:</strong> To run any cleanup events you may trigger during the <code>astro:server:setup</code> or <code>astro:server:start</code> hooks.</p>   <pre class="astro-code" data-language="js">'astro:server:done'?: () =&gt; void | Promise&lt;void&gt;;</pre> <div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astrobuildstart"><code>astro:build:start</code></h3></div>
<p><strong>Previous hook:</strong> <a href="#astroconfigdone"><code>astro:config:done</code></a></p>
<p><strong>Next hook:</strong> <a href="#astrobuildsetup"><code>astro:build:setup</code></a></p>
<p><strong>When:</strong> After the <code>astro:config:done</code> event, but before the production build begins.</p>
<p><strong>Why:</strong> To set up any global objects or clients needed during a production build. This can also extend the build configuration options in the <a href="../adapter-reference/index">adapter API</a>.</p>   <pre class="astro-code" data-language="js">'astro:build:start'?: (options: { buildConfig: BuildConfig }) =&gt; void | Promise&lt;void&gt;;</pre> <div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astrobuildsetup"><code>astro:build:setup</code></h3></div>
<p><strong>Previous hook:</strong> <a href="#astrobuildstart"><code>astro:build:start</code></a></p>
<p><strong>Next hook:</strong> <a href="#astrobuildssr"><code>astro:build:ssr</code></a></p>
<p><strong>When:</strong> After the <code>astro:build:start</code> hook, runs immediately before the build.</p>
<p><strong>Why:</strong> At this point, the Vite config for the build has been completely constructed, this is your final chance to modify it. This can be useful for example to overwrite some defaults. If you’re not sure whether you should use this hook or <code>astro:build:start</code>, use <code>astro:build:start</code> instead.</p>   <pre class="astro-code" data-language="js">'astro:build:setup'?: (options: {
  vite: ViteConfigWithSSR;
  pages: Map&lt;string, PageBuildData&gt;;
  target: 'client' | 'server';
}) =&gt; void | Promise&lt;void&gt;;</pre> <div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astrobuildgenerated"><code>astro:build:generated</code></h3></div>
<p><strong>Previous hook:</strong> <a href="#astrobuildsetup"><code>astro:build:setup</code></a></p>
<p><strong>When:</strong> After a static production build has finished generating routes and assets.</p>
<p><strong>Why:</strong> To access generated routes and assets <strong>before</strong> build artifacts are cleaned up. This is a very uncommon use case. We recommend using <a href="#astrobuilddone"><code>astro:build:done</code></a> unless you really need to access the generated files before cleanup.</p>   <pre class="astro-code" data-language="js">'astro:build:generated'?: (options: { dir: URL }) =&gt; void | Promise&lt;void&gt;;</pre> <div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astrobuildssr"><code>astro:build:ssr</code></h3></div>
<p><strong>Previous hook:</strong> <a href="#astrobuildsetup"><code>astro:build:setup</code></a></p>
<p><strong>When:</strong> After a production SSR build has completed.</p>
<p><strong>Why:</strong> To get access the SSR manifest, this is useful when creating custom SSR builds in plugins or integrations.</p>   <pre class="astro-code" data-language="js">'astro:build:ssr'?: (options: { manifest: SerializedSSRManifest }) =&gt; void | Promise&lt;void&gt;;</pre> <div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astrobuilddone"><code>astro:build:done</code></h3></div>
<p><strong>Previous hook:</strong> <a href="#astrobuildssr"><code>astro:build:ssr</code></a></p>
<p><strong>When:</strong> After a production build (SSG or SSR) has completed.</p>
<p><strong>Why:</strong> To access generated routes and assets for extension (ex. copy content into the generated <code>/assets</code> directory). If you plan to transform generated assets, we recommend exploring the <a href="https://vitejs.dev/guide/api-plugin.html">Vite Plugin API</a> and <a href="#updateconfig-option">configuring via <code>astro:config:setup</code></a> instead.</p>   <pre class="astro-code" data-language="js">'astro:build:done'?: (options: { dir: URL; routes: RouteData[] }) =&gt; void | Promise&lt;void&gt;;</pre> <div class="heading-wrapper level-h4" tabindex="-1"><h4 id="dir-option">
<code>dir</code> option</h4></div>
<p><strong>Type:</strong> <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL"><code>URL</code></a></p>
<p>A URL path to the build output directory. Note that if you need a valid absolute path string, you should use Node’s built-in <a href="https://nodejs.org/api/url.html#urlfileurltopathurl"><code>fileURLToPath</code></a> utility.</p>   <pre class="astro-code" data-language="js">import { writeFile } from 'node:fs/promises';
import { fileURLToPath } from 'node:url';

export default function myIntegration() {
  return {
    hooks: {
      'astro:build:done': async ({ dir }) =&gt; {
        const metadata = await getIntegrationMetadata();
        // Use fileURLToPath to get a valid, cross-platform absolute path string 
        const outFile = fileURLToPath(new URL('./my-integration.json', dir));
        await writeFile(outFile, JSON.stringify(metadata));
      }
    }
  }
}</pre> <div class="heading-wrapper level-h4" tabindex="-1"><h4 id="routes-option">
<code>routes</code> option</h4></div>
<p><strong>Type:</strong> <a href="https://github.com/withastro/astro/blob/main/packages/astro/src/%40types/astro.ts#L973"><code>RouteData[]</code></a></p>
<p>A list of all generated routes alongside their associated metadata. <strong>This will be empty when using an SSR adapter!</strong></p>
<p>You can reference the full <code>RouteData</code> type below, but the most common properties are:</p>
<ul> <li>
<code>component</code> - the input file path relative to the project root</li> <li>
<code>pathname</code> - the output file URL (undefined for routes using <code>[dynamic]</code> and <code>[...spread]</code> params)</li> </ul>
<p><strong><code>RouteData</code> type reference</strong></p>   <pre class="astro-code" data-language="ts">interface RouteData {
  /** Whether a given route is an HTML page or non-HTML endpoint */
  type: 'page' | 'endpoint';
  /** Source component URL */
  component: string;
  /**
   * Output URL pathname where this route will be served
   * note: will be undefined for [dynamic] and [...spread] routes
   */
  pathname?: string;
  /** 
   * regex used for matching an input URL against a requested route
   * ex. "[fruit]/about.astro" will generate the pattern: /^\/([^/]+?)\/about\/?$/
   * where pattern.test("banana/about") is "true"
   */
  pattern: RegExp;
  /**
   * Dynamic and spread route params
   * ex. "/pages/[lang]/[..slug].astro" will output the params ['lang', '...slug']
   */
  params: string[];
  /**
   * Similar to the "params" field, but with more associated metadata
   * ex. "/pages/[lang]/index.astro" will output the segments
   * [[ { content: 'lang', dynamic: true, spread: false } ]]
   */
  segments: { content: string; dynamic: boolean; spread: boolean; }[][];
  /** 
   * Function to render component in-place from a set of input data.
   * This is typically for internal use, so call with caution!
   */
  generate: (data?: any) =&gt; string;
}</pre> <div class="heading-wrapper level-h2" tabindex="-1"><h2 id="allow-installation-with-astro-add">Allow installation with <code>astro add</code>
</h2></div>
<p><a href="../cli-reference/index#astro-add">The <code>astro add</code> command</a> allows users to easily add integrations and adapters to their project. If you want <em>your</em> integration to be installable with this tool, <strong>add <code>astro-integration</code> to the <code>keywords</code> field in your <code>package.json</code></strong>:</p>   <pre class="astro-code" data-language="json">{
  "name": "example",
  "keywords": ["astro-integration"],
}</pre> <p>Once you <a href="https://docs.npmjs.com/cli/v8/commands/npm-publish">publish your integration to npm</a>, running <code>astro add example</code> will install your package with any peer dependencies specified in your <code>package.json</code>. This will also apply your integration to the user’s <code>astro.config</code> like so:</p>  <div class="_pre-heading"><span class="title">astro.config.mjs</span></div> <pre class="astro-code" data-language="diff">import { defineConfig } from 'astro/config';
+ import example from 'example';

export default defineConfig({
+  integrations: [example()],
})

export default defineConfig({
+  integrations: [example()],
})
})</pre> <aside class="content caution astro-J4JMU3BW" aria-label="Caution"> <p class="title astro-J4JMU3BW" aria-hidden="true">  Caution </p> <section class="astro-J4JMU3BW"> <p>This assumes your integration definition is 1) a <code>default</code> export and 2) a function. Ensure this is true before adding the <code>astro-integration</code> keyword!</p> </section> </aside> <div class="heading-wrapper level-h2" tabindex="-1"><h2 id="integration-ordering">Integration Ordering</h2></div>
<p>All integrations are run in the order that they are configured. For instance, for the array <code>[react(), svelte()]</code> in a user’s <code>astro.config.*</code>, <code>react</code> will run before <code>svelte</code>.</p>
<p>Your integration should ideally run in any order. If this isn’t possible, we recommend documenting that your integration needs to come first or last in your user’s <code>integrations</code> configuration array.</p>
<div class="heading-wrapper level-h2" tabindex="-1"><h2 id="combine-integrations-into-presets">Combine integrations into presets</h2></div>
<p>An integration can also be written as a collection of multiple, smaller integrations. We call these collections <strong>presets.</strong> Instead of creating a factory function that returns a single integration object, a preset returns an <em>array</em> of integration objects. This is useful for building complex features out of multiple integrations.</p>   <pre class="astro-code" data-language="js">integrations: [
  // Example: where examplePreset() returns: [integrationOne, integrationTwo, ...etc]
  examplePreset()
]</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2021 Fred K. Schott<br>Licensed under the MIT License.<br>
    <a href="https://docs.astro.build/en/reference/integrations-reference/" class="_attribution-link">https://docs.astro.build/en/reference/integrations-reference/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
