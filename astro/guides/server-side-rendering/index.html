
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Server-side Rendering - Astro - W3cubDocs</title>
  
  <meta name="description" content=" Server-side Rendering, aka SSR, can be enabled in Astro. When you enable SSR you can&#58; ">
  <meta name="keywords" content="server-side, rendering, astro">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/astro/guides/server-side-rendering/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-f16eecbe420d8b2925d31ffbb21d05646497ecbd9515f08ffe69e9bba7332f5657accc7003c7f6c72cb4a132171acf171b359ae3bae4ae5660ddfb1718f88c67.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/astro.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/astro/" class="_nav-link" title="" style="margin-left:0;">Astro</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 class="content-title astro-NDOP6O4T" id="overview">Server-side Rendering</h1> <p><strong>Server-side Rendering</strong>, aka SSR, can be enabled in Astro. When you enable SSR you can:</p>
<ul> <li>Implement sessions for login state in your app.</li> <li>Render data from an API called dynamically with <code>fetch</code>.</li> <li>Deploy your site to a host using an <em>adapter</em>.</li> </ul>
<div class="heading-wrapper level-h2" tabindex="-1"><h2 id="enabling-ssr-in-your-project">Enabling SSR in Your Project</h2></div>
<p>To get started, enable SSR features in development mode with the <code>output: server</code> configuration option:</p>  <div class="_pre-heading"><span class="title">astro.config.mjs</span></div> <pre class="astro-code" data-language="js">import { defineConfig } from 'astro/config';

export default defineConfig({
  output: 'server'
});</pre> <p>When it’s time to deploy an SSR project, you also need to add an adapter. This is because SSR requires a server <em>runtime</em>: the environment that runs your server-side code. Each adapter allows Astro to output a script that runs your project on a specific runtime.</p>
<p>The following adapters are available today with more to come in the future:</p>
<ul> <li><a href="../integrations-guide/cloudflare/index">Cloudflare</a></li> <li><a href="../integrations-guide/deno/index">Deno</a></li> <li><a href="../integrations-guide/netlify/index">Netlify</a></li> <li><a href="../integrations-guide/node/index">Node.js</a></li> <li><a href="../integrations-guide/vercel/index">Vercel</a></li> </ul>
<p>You can add any of the official adapters with the following <code>astro add</code> command. This will install the adapter and make the appropriate changes to your <code>astro.config.mjs</code> file in one step. For example, to install the Netlify adapter, run:</p>   <pre class="astro-code" data-language="bash">npx astro add netlify</pre> <p>You can also add an adapter manually by installing the package and updating <code>astro.config.mjs</code> yourself. (See the links above for adapter-specific instructions to complete the following two steps to enable SSR.) Using <code>my-adapter</code> as an example placeholder, the instructions will look something like:</p>
<ol> <li> <p>Install the adapter to your project dependencies using your preferred package manager. If you’re using npm or aren’t sure, run this in the terminal:</p>   <pre class="astro-code" data-language="bash">npm install @astrojs/my-adapter</pre>  </li> <li> <p><a href="../../reference/configuration-reference/index">Add the adapter</a> to your <code>astro.config.mjs</code> file’s import and default export</p>  <div class="_pre-heading"><span class="title">astro.config.mjs</span></div> <pre class="astro-code" data-language="js">import { defineConfig } from 'astro/config';
import myAdapter from '@astrojs/my-adapter';

export default defineConfig({
  output: 'server',
  adapter: myAdapter(),
});</pre>  </li> </ol>
<div class="heading-wrapper level-h2" tabindex="-1"><h2 id="features">Features</h2></div>
<p>Astro will remain a static-site generator by default. But once you enable a server-side rendering adapter, <strong>every route in your pages directory becomes a server-rendered route</strong> and a few new features become available to you.</p>
<div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astrorequestheaders"><code>Astro.request.headers</code></h3></div>
<p>The headers for the request are available on <code>Astro.request.headers</code>. It is a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers">Headers</a> object, a Map-like object where you can retrieve headers such as the cookie.</p>  <div class="_pre-heading"><span class="title">src/pages/index.astro</span></div> <pre class="astro-code" data-language="astro">---
const cookie = Astro.request.headers.get('cookie');
// ...
---
&lt;html&gt;
  &lt;!-- Page here... --&gt;
&lt;/html&gt;</pre> <aside class="content caution astro-J4JMU3BW" aria-label="Caution"> <p class="title astro-J4JMU3BW" aria-hidden="true">  Caution </p> <section class="astro-J4JMU3BW"> <p>The features below are only available at the page level. (You can’t use them inside of components, including layout components.)</p>
<p>This is because these features modify the <a href="https://developer.mozilla.org/en-US/docs/Glossary/Response_header">Response headers</a>, which can’t be modified after they’re sent to the browser. In SSR mode, Astro uses HTML streaming to send each component to the browser as it renders them. This makes sure the user sees your HTML as fast as possible, but it also means that by the time Astro runs your component code, it has already sent the Response headers.</p> </section> </aside> <div class="heading-wrapper level-h3" tabindex="-1"><h3 id="astroredirect"><code>Astro.redirect</code></h3></div>
<p>On the <code>Astro</code> global, this method allows you to redirect to another page. You might do this after checking if the user is logged in by getting their session from a cookie.</p>  <div class="_pre-heading"><span class="title">src/pages/account.astro</span></div> <pre class="astro-code" data-language="astro">---
import { isLoggedIn } from '../utils';

const cookie = Astro.request.headers.get('cookie');

// If the user is not logged in, redirect them to the login page
if (!isLoggedIn(cookie)) {
  return Astro.redirect('/login');
}
---
&lt;html&gt;
  &lt;!-- Page here... --&gt;
&lt;/html&gt;</pre> <div class="heading-wrapper level-h3" tabindex="-1"><h3 id="response"><code>Response</code></h3></div>
<p>You can also return a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">Response</a> from any page. You might do this to return a 404 on a dynamic page after looking up an id in the database.</p>  <div class="_pre-heading"><span class="title">src/pages/[id].astro</span></div> <pre class="astro-code" data-language="astro">---
import { getProduct } from '../api';

const product = await getProduct(Astro.params.id);

// No product found
if (!product) {
  return new Response(null, {
    status: 404,
    statusText: 'Not found'
  });
}
---
&lt;html&gt;
  &lt;!-- Page here... --&gt;
&lt;/html&gt;</pre> <div class="heading-wrapper level-h3" tabindex="-1"><h3 id="server-endpoints">Server Endpoints</h3></div>
<p>A server endpoint, also known as an <strong>API route</strong>, is a <code>.js</code> or <code>.ts</code> file within the <code>src/pages</code> folder that takes a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Request</a> and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">Response</a>. A powerful feature of SSR, API routes are able to securely execute code on the server side. To learn more, see our <a href="../../core-concepts/endpoints/index#server-endpoints-api-routes">Endpoints Guide</a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2021 Fred K. Schott<br>Licensed under the MIT License.<br>
    <a href="https://docs.astro.build/en/guides/server-side-rendering/" class="_attribution-link">https://docs.astro.build/en/guides/server-side-rendering/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
