
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Reference - Nginx - W3cubDocs</title>
  
  <meta name="description" content=" njs provides objects, methods and properties for extending nginx functionality. ">
  <meta name="keywords" content="reference, nginx">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/nginx/njs/reference.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/nginx.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/nginx/" class="_nav-link" title="" style="margin-left:0;">nginx</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _nginx">
				
				
<h1>Reference</h1>
<ul>
<li><a href="#http_stream">nginx objects</a></li>
<li><a href="#http">HTTP Request</a></li>
<li><a href="#stream">Stream Session</a></li>
<li><a href="#core">Core</a></li>
<li><a href="#core_global">Global</a></li>
<li><a href="#string">String</a></li>
<li><a href="#textdecoder">Text Decoder</a></li>
<li><a href="#textencoder">Text Encoder</a></li>
<li><a href="#njs_api_timers">Timers</a></li>
<li><a href="#built-in">Built-in Modules</a></li>
<li><a href="#buffer">Buffer</a></li>
<li><a href="#crypto">Crypto</a></li>
<li><a href="#njs_api_fs">File System</a></li>
<li><a href="#querystring">Query String</a></li>
</ul>
<p id="summary"> <a href="index">njs</a> provides objects, methods and properties for extending nginx functionality. </p>
<p> This reference contains only njs specific properties, methods and modules not compliant with ECMAScript. Definitions of njs properties and methods compliant with ECMAScript can be found in <a href="http://www.ecma-international.org/ecma-262/">ECMAScript specification</a>. List of all njs properties and methods can be found in <a href="compatibility">Compatibility</a>. </p>
<h4 id="http_stream">nginx objects</h4>
<h4 id="http">HTTP Request</h4>
<p> The HTTP request object is available only in the <a href="../http/ngx_http_js_module">ngx_http_js_module</a> module. All string properties of the object are <a href="#string">byte strings</a>. </p> <dl class="compact"> <dt id="r_args"><code>r.args{}</code></dt> <dd> request arguments object, read-only </dd> <dt id="r_error"><code>r.error(<i>string</i>)</code></dt> <dd> writes a <code>string</code> to the error log on the <code>error</code> level of logging </dd> <dt id="r_finish"><code>r.finish()</code></dt> <dd> finishes sending a response to the client </dd> <dt id="r_headers_in"><code>r.headersIn{}</code></dt> <dd> incoming headers object, read-only. <p> The <code>Foo</code> request header can be accessed with the syntax: <code>headersIn.foo</code> or <code>headersIn['Foo']</code>. </p> <p> The “Authorization”, “Content-Length”, “Content-Range”, “Content-Type”, “ETag”, “Expect”, “From”, “Host”, “If-Match”, “If-Modified-Since”, “If-None-Match”, “If-Range”, “If-Unmodified-Since”, “Max-Forwards”, “Proxy-Authorization”, “Referer”, “Transfer-Encoding”, and “User-Agent” request headers can have only one field value (<a href="changes#njs0.4.1">0.4.1</a>). Duplicate field values in “Cookie” headers are separated by semicolon (<code>;</code>). Duplicate field values in all other request headers are separated by commas. </p> </dd> <dt id="r_headers_out"><code>r.headersOut{}</code></dt> <dd> outgoing headers object, writable. <p> The “Foo” response header can be accessed with the syntax: <code>headersOut.foo</code> or <code>headersOut['Foo']</code>. </p> <p> Field values of multi-value response headers (<a href="changes#njs0.4.0">0.4.0</a>) can be set with the syntax: </p> <pre data-language="nginx">
r.headersOut['Foo'] = ['a', 'b']
</pre>
<p> where the output will be: </p> <pre data-language="nginx">
Foo: a
Foo: b
</pre>
<p> All previous field values of the “Foo” response header will be deleted. </p> <p> For standard response headers that accept only a single field value such as “Content-Type”, only the last element of the array will take effect. Field values of the “Set-Cookie” response header are always returned as an array. Duplicate field values in “Age”, “Content-Encoding”, “Content-Length”, “Content-Type”, “ETag”, “Expires”, “Last-Modified”, “Location”, “Retry-After” response headers are ignored. Duplicate field values in all other response headers are separated by commas. </p> </dd> <dt id="r_http_version"><code>r.httpVersion</code></dt> <dd> HTTP version, read-only </dd> <dt id="r_internal_redirect"><code>r.internalRedirect(<i>uri</i>)</code></dt> <dd> performs an internal redirect to the specified <code>uri</code>. If the uri starts with the “<code>@</code>” prefix, it is considered a named location. The actual redirect happens after the handler execution is completed. </dd> <dt id="r_log"><code>r.log(<i>string</i>)</code></dt> <dd> writes a <code>string</code> to the error log on the <code>info</code> level of logging </dd> <dt id="r_method"><code>r.method</code></dt> <dd> HTTP method, read-only </dd> <dt id="r_parent"><code>r.parent</code></dt> <dd> references the parent request object </dd> <dt id="r_remote_address"><code>r.remoteAddress</code></dt> <dd> client address, read-only </dd> <dt id="r_raw_headers_in"><code>r.rawHeadersIn{}</code></dt> <dd> returns an array of key-value pairs exactly as they were received from the client (<a href="changes#njs0.4.1">0.4.1</a>). <p> For example, with the following request headers: </p> <pre data-language="nginx">
Host: localhost
Foo:  bar
foo:  bar2
</pre>
<p> the output of <code>r.rawHeadersIn</code> will be: </p> <pre data-language="nginx">
[
    ['Host', 'localhost'],
    ['Foo', 'bar'],
    ['foo', 'bar2']
]
</pre>
<p> All <code>foo</code> headers can be collected with the syntax: </p> <pre data-language="nginx">
r.rawHeadersIn.filter(v=&gt;v[0].toLowerCase() == 'foo').map(v=&gt;v[1])
</pre>
<p> the output will be: </p> <pre data-language="nginx">
['bar', 'bar2']
</pre>
<p> Header field names are not converted to lower case, duplicate field values are not merged. </p> </dd> <dt id="r_raw_headers_out"><code>r.rawHeadersOut{}</code></dt> <dd> returns an array of key-value pairs of response headers (<a href="changes#njs0.4.1">0.4.1</a>). Header field names are not converted to lower case, duplicate field values are not merged. </dd> <dt id="r_request_body"><code>r.requestBody</code></dt> <dd> returns the client request body if it has not been written to a temporary file. To ensure that the client request body is in memory, its size should be limited by <a href="../http/ngx_http_core_module#client_max_body_size">client_max_body_size</a>, and a sufficient buffer size should be set using <a href="../http/ngx_http_core_module#client_body_buffer_size">client_body_buffer_size</a>. The property is available only in the <a href="../http/ngx_http_js_module#js_content">js_content</a> directive. </dd> <dt id="r_response_body"><code>r.responseBody</code></dt> <dd> holds the <a href="#r_subrequest">subrequest</a> response body, read-only. The size of <code>r.responseBody</code> is limited by the <a href="../http/ngx_http_core_module#subrequest_output_buffer_size">subrequest_output_buffer_size</a> directive. </dd> <dt id="r_return"><code>r.return(status[, string])</code></dt> <dd> sends the entire response with the specified <code>status</code> to the client <p> It is possible to specify either a redirect URL (for codes 301, 302, 303, 307, and 308) or the response body text (for other codes) as the second argument </p> </dd> <dt id="r_send"><code>r.send(<i>string</i>)</code></dt> <dd> sends a part of the response body to the client </dd> <dt id="r_send_header"><code>r.sendHeader()</code></dt> <dd> sends the HTTP headers to the client </dd> <dt id="r_status"><code>r.status</code></dt> <dd> status, writable </dd> <dt id="r_subrequest"><code>r.subrequest(<i>uri</i>[,
<i>options</i>[, <i>callback</i>]])</code></dt> <dd> creates a subrequest with the given <code>uri</code> and <code>options</code>, and installs an optional completion <code>callback</code>. <p> A <a href="../dev/development_guide#http_subrequests">subrequest</a> shares its input headers with the client request. To send headers different from original headers to a proxied server, the <a href="../http/ngx_http_proxy_module#proxy_set_header">proxy_set_header</a> directive can be used. To send a completely new set of headers to a proxied server, the <a href="../http/ngx_http_proxy_module#proxy_pass_request_headers">proxy_pass_request_headers</a> directive can be used. </p> <p> If <code>options</code> is a string, then it holds the subrequest arguments string. Otherwise, <code>options</code> is expected to be an object with the following keys: </p> <dl class="compact"> <dt><code>args</code></dt> <dd> arguments string, by default an empty string is used </dd> <dt><code>body</code></dt> <dd> request body, by default the request body of the parent request object is used </dd> <dt><code>method</code></dt> <dd> HTTP method, by default the <code>GET</code> method is used </dd> <dt><code>detached</code></dt> <dd> boolean flag (<a href="changes#njs0.3.9">0.3.9</a>), if <code>true</code>, the created subrequest is a detached subrequest. Responses to detached subrequests are ignored. Unlike ordinary subrequests, a detached subrequest can be created inside a variable handler. The <code>detached</code> flag and callback argument are mutually exclusive. </dd> </dl>
 <p> The completion <code>callback</code> receives a subrequest response object with methods and properties identical to the parent request object. </p> <p> Since <a href="changes#njs0.3.8">0.3.8</a>, if a <code>callback</code> is not provided, the <code>Promise</code> object that resolves to the subrequest response object is returned. </p> </dd> <dt id="r_uri"><code>r.uri</code></dt> <dd> current <a href="../http/ngx_http_core_module#var_uri">URI</a> in request, <a href="../http/ngx_http_core_module#location">normalized</a>, read-only </dd> <dt id="r_variables"><code>r.variables{}</code></dt> <dd> nginx variables object, writable (since <a href="changes#njs0.2.8">0.2.8</a>) </dd> <dt id="r_warn"><code>r.warn(<i>string</i>)</code></dt> <dd> writes a <code>string</code> to the error log on the <code>warning</code> level of logging </dd> </dl>

<h4 id="stream">Stream Session</h4>
<p> The stream session object is available only in the <a href="../stream/ngx_stream_js_module">ngx_stream_js_module</a> module. All string properties of the object are <a href="#string">byte strings</a>. </p>
 <dl class="compact"> <dt id="s_allow"><code>s.allow()</code></dt> <dd> successfully finalizes the phase handler (<a href="changes#njs0.2.4">0.2.4</a>) </dd> <dt id="s_decline"><code>s.decline()</code></dt> <dd> finalizes the phase handler and passes control to the next handler (<a href="changes#njs0.2.4">0.2.4</a>) </dd> <dt id="s_deny"><code>s.deny()</code></dt> <dd> finalizes the phase handler with the access error code (<a href="changes#njs0.2.4">0.2.4</a>) </dd> <dt id="s_done">
<code>s.done</code>(<code><i>[code]</i></code>)</dt> <dd> successfully finalizes the current phase handler or finalizes it with the specified numeric code (<a href="changes#njs0.2.4">0.2.4</a>). </dd> <dt id="s_error"><code>s.error(<i>string</i>)</code></dt> <dd> writes a sent <code>string</code> to the error log on the <code>error</code> level of logging </dd> <dt id="s_log"><code>s.log(<i>string</i>)</code></dt> <dd> writes a sent <code><i>string</i></code> to the error log on the <code>info</code> level of logging </dd> <dt id="s_off"><code>s.off(<i>eventName</i>)</code></dt> <dd> unregisters the callback set by the <a href="#s_on">s.on()</a> method (<a href="changes#njs0.2.4">0.2.4</a>) </dd> <dt id="s_on"><code>s.on(<i>event</i>,
<i>callback</i>)</code></dt> <dd> registers a <code>callback</code> for the specified <code>event</code> (<a href="changes#njs0.2.4">0.2.4</a>). <p> An <code>event</code> may be one of the following strings: </p> <dl class="compact"> <dt><code>upload</code></dt> <dd> new data from a client </dd> <dt><code>download</code></dt> <dd> new data to a client </dd> </dl>
 <p> The completion callback has the following prototype: <code>callback(data, flags)</code>, where <code>data</code> is string, <code>flags</code> is an object with the following properties: </p> <dl class="compact"> <dt id="s_on_callback_last"><code>last</code></dt> <dd> a boolean value, true if data is a last buffer. </dd> </dl>
 </dd> <dt id="s_remote_address"><code>s.remoteAddress</code></dt> <dd> client address, read-only </dd> <dt id="s_send"><code>s.send(<i>data</i>[,
<i>options</i>])</code></dt> <dd> sends the data to the client (<a href="changes#njs0.2.4">0.2.4</a>). The <code>options</code> is an object used to override nginx buffer flags derived from an incoming data chunk buffer. The flags can be overridden with the following flags:  <dl class="compact"> <dt><code>last</code></dt> <dd> boolean, true if the buffer is the last buffer </dd> <dt><code>flush</code></dt> <dd> boolean, true if the buffer should have the <code>flush</code> flag </dd> </dl>
 The method can be called multiple times per callback invocation. </dd> <dt id="s_variables"><code>s.variables{}</code></dt> <dd> nginx variables object, writable (since <a href="changes#njs0.2.8">0.2.8</a>) </dd> <dt id="s_warn"><code>s.warn(<i>string</i>)</code></dt> <dd> writes a sent <code>string</code> to the error log on the <code>warning</code> level of logging </dd> </dl>

<h4 id="core">Core</h4>
<h4 id="core_global">Global</h4>
<h4 id="process">Process</h4>
<p> The <code>process</code> object is a global object that provides information about the current process (<a href="changes#njs0.3.3">0.3.3</a>). </p>
 <dl class="compact"> <dt id="process_argv"><code>process.argv</code></dt> <dd> Returns an array that contains the command line arguments passed when the current process was launched. </dd> <dt id="process_env"><code>process.env</code></dt> <dd> Returns an object containing the user environment. <blockquote class="note"> By default, nginx removes all environment variables inherited from its parent process except the TZ variable. Use the <a href="../ngx_core_module#env">env</a> directive to preserve some of the inherited variables. </blockquote> </dd> <dt id="process_pid"><code>process.pid</code></dt> <dd> Returns the PID of the current process. </dd> <dt id="process_ppid"><code>process.ppid</code></dt> <dd> Returns the PID of the current parent process. </dd> </dl>

<h4 id="string">String</h4>
<p> There are two types of strings in njs: a Unicode string (default) and a byte string. </p>
<p> A Unicode string corresponds to an ECMAScript string which contains Unicode characters. </p>
<p> Byte strings contain a sequence of bytes and are used to serialize Unicode strings to external data and deserialize from external sources. For example, the <a href="#string_toutf8">toUTF8()</a> method serializes a Unicode string to a byte string using UTF8 encoding: </p> <pre data-language="nginx">
&gt;&gt; '£'.toUTF8().toString('hex')
'c2a3'  /* C2 A3 is the UTF8 representation of 00A3 ('£') code point */
</pre>
<p> The <a href="#string_tobytes">toBytes()</a> method serializes a Unicode string with code points up to 255 into a byte string, otherwise, <code>null</code> is returned: </p> <pre data-language="nginx">
&gt;&gt; '£'.toBytes().toString('hex')
'a3'  /* a3 is a byte equal to 00A3 ('£') code point  */
</pre>
 <dl class="compact"> <dt id="string_bytesfrom"><code>String.bytesFrom(<i>array</i>
| <i>string</i>, <i>encoding</i>)</code></dt> <dd> Creates a byte string either from an array that contains octets, or from an encoded string (<a href="changes#njs0.2.3">0.2.3</a>). The encoding can be <code>hex</code>, <code>base64</code>, and <code>base64url</code>. The method is deprecated since <a href="changes#njs0.4.4">0.4.4</a>, the <code>Buffer.from</code> method should be used instead: <pre data-language="nginx">
&gt;&gt; Buffer.from([0x62, 0x75, 0x66, 0x66, 0x65, 0x72]).toString()
'buffer'

&gt;&gt; Buffer.from('YnVmZmVy', 'base64').toString()
'buffer'
</pre> </dd> <dt id="string_frombytes"><code>String.prototype.fromBytes(<i>start</i>[,
<i>end</i>])</code></dt> <dd> Returns a new Unicode string from a byte string where each byte is replaced with a corresponding Unicode code point. </dd> <dt id="string_fromutf8"><code>String.prototype.fromUTF8(<i>start</i>[,
<i>end</i>])</code></dt> <dd> Converts a byte string containing a valid UTF8 string into a Unicode string, otherwise <code>null</code> is returned. </dd> <dt id="string_tobytes"><code>String.prototype.toBytes(<i>start</i>[,
<i>end</i>])</code></dt> <dd> Serializes a Unicode string to a byte string. Returns <code>null</code> if a character larger than 255 is found in the string. </dd> <dt id="string_tostring"><code>String.prototype.toString(<i>encoding</i>)</code></dt> <dd> <p> Encodes a string to <code>hex</code>, <code>base64</code>, or <code>base64url</code>: </p> <pre data-language="nginx">
&gt;&gt;  'αβγδ'.toString('base64url')
'zrHOss6zzrQ'
</pre>
<p> Before version <a href="changes#njs0.4.3">0.4.3</a>, only a <a href="#string_tobytes">byte string</a> could be encoded: </p> <pre data-language="nginx">
&gt;&gt;  'αβγδ'.toUTF8().toString('base64url')
'zrHOss6zzrQ'
</pre>
 </dd> <dt id="string_toutf8"><code>String.prototype.toUTF8(<i>start</i>[,
<i>end</i>])</code></dt> <dd> Serializes a Unicode string to a byte string using UTF8 encoding. <pre data-language="nginx">
&gt;&gt; 'αβγδ'.toUTF8().length
8
&gt;&gt; 'αβγδ'.length
4
</pre> </dd> </dl>

<h4 id="textdecoder">Text Decoder</h4>
<p> The <code>TextDecoder</code> produces a stream of code points from a stream of bytes (<a href="changes#njs0.4.3">0.4.3</a>). </p>
 <dl class="compact"> <dt><code>TextDecoder([[<i>encoding</i>],
<i>options</i>])</code></dt> <dd> Creates a new <code>TextDecoder</code> object for specified <code>encoding</code>, currently, only UTF-8 is supported. The <code>options</code> is <code>TextDecoderOptions</code> dictionary with the property: <dl class="compact"> <dt><code>fatal</code></dt> <dd> boolean flag indicating if <a href="#textdecoder_decode"><code>TextDecoder.decode()</code></a> must throw the <code><i>TypeError</i></code> exception when a coding error is found, by default is <code>false</code>. </dd> </dl> </dd> <dt id="textdecoder_encoding"><code>TextDecoder.prototype.encoding</code></dt> <dd> Returns a string with the name of the encoding used by <a href="#textdecoder"><code>TextDecoder()</code></a>, read-only. </dd> <dt id="textdecoder_fatal"><code>TextDecoder.prototype.fatal</code></dt> <dd> boolean flag, <code>true</code> if the error mode is fatal, read-only. </dd> <dt id="textdecoder_ignorebom"><code>TextDecoder.prototype.ignoreBOM</code></dt> <dd> boolean flag, <code>true</code> if the byte order marker is ignored, read-only. </dd> <dt id="textdecoder_decode"><code>TextDecoder.prototype.decode(<i>buffer</i>,
[<i>options</i>])</code></dt> <dd> Returns a string with the text decoded from the <code>buffer</code> by <a href="#textdecoder"><code>TextDecoder()</code></a>. The buffer can be <code>ArrayBuffer</code>. The <code>options</code> is <code>TextDecodeOptions</code> dictionary with the property: <dl class="compact"> <dt><code>stream</code></dt> <dd> boolean flag indicating if additional data will follow in subsequent calls to <code>decode()</code>: <code>true</code> if processing the data in chunks, and <code>false</code> for the final chunk or if the data is not chunked. By default is <code>false</code>. </dd> </dl> <pre data-language="nginx">
&gt;&gt; (new TextDecoder()).decode(new Uint8Array([206,177,206,178]))
αβ
</pre> </dd> </dl>

<h4 id="textencoder">Text Encoder</h4>
<p> The <code>TextEncoder</code> object produces a byte stream with UTF-8 encoding from a stream of code points (<a href="changes#njs0.4.3">0.4.3</a>). </p>
 <dl class="compact"> <dt><code>TextEncoder()</code></dt> <dd> Returns a newly constructed <code>TextEncoder</code> that will generate a byte stream with UTF-8 encoding. </dd> <dt id="textencoder_encoding"><code>TextEncoder.prototype.encoding</code></dt> <dd> Returns “<code><i>utf-8</i></code>”, read-only. </dd> <dt id="textencoder_encode"><code>TextEncoder.prototype.encode(<i>string</i>)</code></dt> <dd> Encodes <code>string</code> into a <code>Uint8Array</code> with UTF-8 encoded text. </dd> <dt id="textencoder_encodeinto"><code>TextEncoder.prototype.encodeInto(<i>string</i>,
<i>uint8Array</i>)</code></dt> <dd> Encodes a <code>string</code> to UTF-8, puts the result into destination <code>Uint8Array</code>, and returns a dictionary object that shows the progress of the encoding. The dictionary object contains two members: <dl class="compact"> <dt><code>read</code></dt> <dd> the number of UTF-16 units of code from the source <code>string</code> converted to UTF-8 </dd> <dt><code>written</code></dt> <dd> the number of bytes modified in the destination <code>Uint8Array</code> </dd> </dl> </dd> </dl>

<h4 id="njs_api_timers">Timers</h4>
 <dl class="compact"> <dt id="cleartimeout"><code>clearTimeout(<i>timeout</i>)</code></dt> <dd> Cancels a <code>timeout</code> object created by <a href="#settimeout"><code>setTimeout()</code></a>. </dd> <dt id="settimeout"><code>setTimeout(<i>function</i>,
<i>milliseconds</i>[,
<i>argument1</i>,
<i>argumentN</i>])</code></dt> <dd> Calls a <code>function</code> after a specified number of <code>milliseconds</code>. One or more optional <code>arguments</code> can be passed to the specified function. Returns a <code>timeout</code> object. <pre data-language="nginx">
function handler(v)
{
    // ...
}

t = setTimeout(handler, 12);

// ...

clearTimeout(t);
</pre> </dd> </dl>

<h4 id="built-in">Built-in Modules</h4>
<h4 id="buffer">Buffer</h4>
 <dl class="compact"> <dt id="buffer_alloc"><code>Buffer.alloc(<i>size</i>[,
<i>fill</i>[,
<i>encoding</i>]]))</code></dt> <dd> <p> Allocates a new Buffer of a specified <code><i>size</i></code>. If <code><i>fill</i></code> is not specified, the Buffer will be zero-filled. If <code><i>fill</i></code> is specified, the allocated Buffer will be initialized by calling <a href="#buf_fill"><code>buf.fill(fill)</code></a>. If <code><i>fill</i></code> and <code><i>encoding</i></code> are specified, the allocated Buffer will be initialized by calling <a href="#buf_fill"><code>buf.fill(fill,
encoding)</code></a>. </p> <p> The <code><i>fill</i></code> parameter may be a <code><i>string</i></code>, <code><i>Buffer</i></code>, <code><i>Uint8Array</i></code>, or <code><i>integer</i></code>. </p> </dd> <dt id="buffer_alloc_unsafe"><code>Buffer.allocUnsafe(<i>size</i>)</code></dt> <dd> <p> The same as <a href="#buffer_alloc"><code>Buffer.alloc()</code></a>, with the difference that the memory allocated for the buffer is not initialized, the contents of the new buffer is unknown and may contain sensitive data. </p> </dd> <dt id="buffer_bytelength"><code>Buffer.byteLength(<i>value</i>[,
<i>encoding</i>])</code></dt> <dd> Returns the byte length of a specified value, when encoded using <code><i>encoding</i></code>. The value can be a <code>string</code>, <code>Buffer</code>, <code>TypedArray</code>, <code>DataView</code>, or <code>ArrayBuffer</code>. If the value is a <code><i>string</i></code>, the <code>encoding</code> parameter is its encoding, can be <code><i>utf-8</i></code>, <code><i>hex</i></code>, <code><i>base64</i></code>, <code><i>base64url</i></code>; by default is <code><i>utf-8</i></code>. </dd> <dt id="buffer_compare"><code>Buffer.compare(<i>buffer1</i>,
<i>buffer2</i>)</code></dt> <dd> Compares <code><i>buffer1</i></code> with <code><i>buffer2</i></code> when sorting arrays of Buffer instances. Returns <code>0</code> if <code><i>buffer1</i></code> is the same as <code><i>buffer2</i></code>, <code>1</code> if <code><i>buffer2</i></code> should come before <code><i>buffer1</i></code> when sorted, or <code>-1</code> if <code><i>buffer2</i></code> should come after <code><i>buffer1</i></code> when sorted. </dd> <dt id="buffer_concat"><code>Buffer.concat(<i>list</i>[,
<i>totalLength</i>])</code></dt> <dd> Returns a new Buffer which is the result of concatenating all the Buffer instances in the list. If there are no items in the list or the total length is 0, a new zero-length Buffer is returned. If <code><i>totalLength</i></code> is not specified, it is calculated from the Buffer instances in list by adding their lengths. If <code><i>totalLength</i></code> is specified, it is coerced to an unsigned integer. If the combined length of the Buffers in list exceeds <code><i>totalLength</i></code>, the result is truncated to <code><i>totalLength</i></code>. </dd> <dt id="buffer_from_array"><code>Buffer.from(<i>array</i>)</code></dt> <dd> Allocates a new Buffer using an array of bytes in the range <code>0</code> – <code>255</code>. Array entries outside that range will be truncated. </dd> <dt id="buffer_from_arraybuffer"><code>Buffer.from(<i>arrayBuffer</i>,
<i>byteOffset</i>[,
<i>length</i>]])</code></dt> <dd> Creates a view of the <code><i>ArrayBuffer</i></code> without copying the underlying memory. The optional <code><i>byteOffset</i></code> and <code><i>length</i></code> arguments specify a memory range within the <code><i>arrayBuffer</i></code> that will be shared by the Buffer. </dd> <dt id="buffer_from_buffer"><code>Buffer.from(<i>buffer</i>)</code></dt> <dd> Copies the passed buffer data onto a new Buffer instance. </dd> <dt id="buffer_from_object"><code>Buffer.from(<i>object</i>[,
<i>offsetOrEncoding</i>[,
<i>length</i>]])</code></dt> <dd> For objects whose <code>valueOf()</code> function returns a value not strictly equal to object, returns <code>Buffer.from(object.valueOf()</code>, <code>offsetOrEncoding</code>, <code>length</code>). </dd> <dt id="buffer_from_string"><code>Buffer.from(<i>string</i>[,
<i>encoding</i>])</code></dt> <dd> Creates a new Buffer with a <code><i>string</i></code>. The <code><i>encoding</i></code> parameter identifies the character encoding to be used when converting a string into bytes. The encoding can be <code>utf-8</code>, <code>hex</code>, <code>base64</code>, <code>base64url</code>; by default is <code>utf-8</code>. </dd> <dt id="buffer_is_buffer"><code>Buffer.isBuffer(<i>object</i>)</code></dt> <dd> A boolean value, returns <code>true</code> if <code><i>object</i></code> is a Buffer. </dd> <dt id="buffer_is_encoding"><code>Buffer.isEncoding(<i>encoding</i>)</code></dt> <dd> A boolean value, returns <code>true</code> if encoding is the name of a supported character encoding. </dd> <dt id="buf_index"><code>buffer[<i>index</i>]</code></dt> <dd> The index operator <code><i>index</i></code> can be used to get and set the octet at position index in <code>buffer</code>. The values refer to individual bytes, so the legal value range is between 0 and 255 (decimal). </dd> <dt id="buf_buffer"><code>buf.buffer</code></dt> <dd> The underlying <code>ArrayBuffer</code> object based on which this Buffer object is created. </dd> <dt id="buf_byte_offset"><code>buf.byteOffset</code></dt> <dd> An integer, specifying the <code>byteOffset</code> of the Buffers underlying <code>ArrayBuffer</code> object. </dd> <dt id="buf_compare"><code>buf.compare(<i>target</i>[,
<i>targetStart</i>[,
<i>targetEnd</i>[,
<i>sourceStart</i>[,
<i>sourceEnd</i>]]]])</code></dt> <dd> Compares buffer with target and returns a number indicating whether buffer comes before, after, or is the same as target in sort order. Comparison is based on the actual sequence of bytes in each Buffer. The <code>targetStart</code> is an integer specifying the offset within target at which to begin comparison, by default is 0. The <code>targetEnd</code> is an integer specifying the offset within target at which to end comparison, by default is <code>target.length</code>. The <code>sourceStart</code> is an integer specifying the offset within buffer at which to begin comparison, by default is 0. The <code>sourceEnd</code> is an integer specifying the offset within buffer at which to end comparison (not inclusive), by default is <code>buf.length</code>. </dd> <dt id="buf_copy"><code>buf.copy(<i>target</i>[,
<i>targetStart</i>[,
<i>sourceStart</i>[,
<i>sourceEnd</i>]]])</code></dt> <dd> Copies data from a region of buffer to a region in target, even if the target memory region overlaps with buffer. The <code>target</code> parameter is a <code><i>Buffer</i></code> or <code><i>Uint8Array</i></code> to copy into. <p> The <code>targetStart</code> is an integer specifying the offset within target at which to begin writing, by default is 0. The <code>sourceStart</code> is an integer specifying the offset within buffer from which to begin copying, by default is 0. The <code>sourceEnd</code> is an integer specifying the offset within buffer at which to stop copying (not inclusive) by default is <code><i>buf.length</i></code>. </p> </dd> <dt id="buf_equals"><code>buf.equals(<i>otherBuffer</i>)</code></dt> <dd> A boolean value, returns <code>true</code> if both Buffer and <code><i>otherBuffer</i></code> have exactly the same bytes. </dd> <dt id="buf_fill"><code>buf.fill(<i>value</i>[,
<i>offset</i>[,
<i>end</i>]][,
<i>encoding</i>])</code></dt> <dd> Fills the Buffer with the specified <code><i>value</i></code>. If the <code><i>offset</i></code> and <code><i>end</i></code> are not specified, the entire Buffer will be filled. The <code><i>value</i></code> is coerced to <code><i>uint32</i></code> if it is not a <code>string</code>, <code>Buffer</code>, or <code>integer</code>. If the resulting integer is greater than 255, the Buffer will be filled with <code><i>value</i></code> and 255. </dd> <dt id="buf_includes"><code>buf.includes(<i>value</i>[,
<i>byteOffset</i>][,
<i>encoding</i>])</code></dt> <dd> Equivalent to <a href="#buf_indexof"><code>buf.indexOf()</code></a> <code>!== -1</code>, returns <code>true</code> if the <code><i>value</i></code> was found in Buffer. </dd> <dt id="buf_indexof"><code>buf.indexOf(<i>value</i>[,
<i>byteOffset</i>][,
<i>encoding</i>])</code></dt> <dd> Returns an integer which is the index of the first occurrence of <code><i>value</i></code> in Buffer, or <code><i>-1</i></code> if Buffer does not contain value. The <code><i>value</i></code> can be a <code>string</code> with specified <code><i>encoding</i></code> (by default <code><i>utf-8</i></code>), <code>Buffer</code>, <code>Unit8Array</code>, or a number between 0 and 255. </dd> <dt id="buf_lastindexof"><code>buf.lastIndexOf(<i>value</i>[,
<i>byteOffset</i>][,
<i>encoding</i>])</code></dt> <dd> The same as <a href="#buf_indexof"><code>buf.indexOf()</code></a>, except the last occurrence of the <code><i>value</i></code> is found instead of the first occurrence. The <code><i>value</i></code> can be a string, Buffer, or integer between 1 and 255. If the <code><i>value</i></code> is an empty string or empty Buffer, <code>byteOffset</code> will be returned. </dd> <dt id="buf_length"><code>buf.length</code></dt> <dd> Returns the number of bytes in Buffer. </dd> <dt id="buf_readintbe"><code>buf.readIntBE(<i>offset</i>,
<i>byteLength</i>)</code></dt> <dd> Reads the <code><i>byteLength</i></code> from <code>buf</code> at the specified <code><i>offset</i></code> and interprets the result as a big-endian, two's complement signed value supporting up to 48 bits of accuracy. The <code><i>byteLength</i></code> parameter is an integer between 1 and 6 specifying the number of bytes to read. <p> The similar methods are also supported: <code>buf.readInt8([offset])</code>, <code>buf.readInt16BE([offset])</code>, <code>buf.readInt32BE([offset])</code>. </p> </dd> <dt id="buf_readintle"><code>buf.readIntLE(<i>offset</i>,
<i>byteLength</i>)</code></dt> <dd> Reads the <code><i>byteLength</i></code> from <code>buf</code> at the specified <code><i>offset</i></code> and interprets the result as a little-endian, two's complement signed value supporting up to 48 bits of accuracy. The <code><i>byteLength</i></code> parameter is an integer between 1 and 6 specifying the number of bytes to read. <p> The similar methods are also supported: <code>buf.readInt8([offset])</code>, <code>buf.readInt16LE([offset])</code>, <code>buf.readInt32LE([offset])</code>. </p> </dd> <dt id="buf_readuintbe"><code>buf.readUIntBE(<i>offset</i>,
<i>byteLength</i>)</code></dt> <dd> Reads the <code><i>byteLength</i></code> from <code>buf</code> at the specified <code><i>offset</i></code> and interprets the result as a big-endian integer supporting up to 48 bits of accuracy. The <code><i>byteLength</i></code> parameter is an integer between 1 and 6 specifying the number of bytes to read. <p> The similar methods are also supported: <code>buf.readUInt8([offset])</code>, <code>buf.readUInt16BE([offset])</code>, <code>buf.readUInt32BE([offset])</code>. </p> </dd> <dt id="buf_readuintle"><code>buf.readUIntLE(<i>offset</i>,
<i>byteLength</i>)</code></dt> <dd> Reads the <code><i>byteLength</i></code> from <code>buf</code> at the specified <code><i>offset</i></code> and interprets the result as a little-endian integer supporting up to 48 bits of accuracy. The <code><i>byteLength</i></code> parameter is an integer between 1 and 6 specifying the number of bytes to read. <p> The similar methods are also supported: <code>buf.readUInt8([offset])</code>, <code>buf.readUInt16LE([offset])</code>, <code>buf.readUInt32LE([offset])</code>. </p> </dd> <dt id="buf_readdobulebe">
<code>buf.readDoubleBE</code>([<code><i>offset</i></code>])</dt> <dd> Reads a 64-bit, big-endian double from <code>buf</code> at the specified <code><i>offset</i></code>. </dd> <dt id="buf_readdobulele">
<code>buf.readDoubleLE</code>([<code><i>offset</i></code>])</dt> <dd> Reads a 64-bit, little-endian double from <code>buf</code> at the specified <code><i>offset</i></code>. </dd> <dt id="buf_readfloatbe">
<code>buf.readFloatBE</code>([<code><i>offset</i></code>])</dt> <dd> Reads a 32-bit, big-endian float from <code>buf</code> at the specified <code><i>offset</i></code>. </dd> <dt id="buf_readfloatle">
<code>buf.readFloatLE</code>([<code><i>offset</i></code>])</dt> <dd> Reads a 32-bit, little-endian float from <code>buf</code> at the specified <code><i>offset</i></code>. </dd> <dt id="buf_subarray"><code>buf.subarray[<i>start</i>[,
<i>end</i>]])</code></dt> <dd> Returns a new <code>buf</code> that references the same memory as the original, but offset and cropped by <code><i>start</i></code> and <code><i>end</i></code>. If <code><i>end</i></code> is greater than <a href="#buf_length"><code>buf.length</code></a>, the same result as that of end equal to <a href="#buf_length"><code>buf.length</code></a> is returned. </dd> <dt id="buf_slice"><code>buf.slice[<i>start</i>[,
<i>end</i>]])</code></dt> <dd> Returns a new <code>buf</code> that references the same memory as the original, but offset and cropped by the <code><i>start</i></code> and <code><i>end</i></code> values. The method is not compatible with the <code>Uint8Array.prototype.slice()</code>, which is a superclass of Buffer. To copy the slice, use <code>Uint8Array.prototype.slice()</code>. </dd> <dt id="buf_swap16">
<code>buf.swap16</code>()</dt> <dd> Interprets <code>buf</code> as an array of unsigned 16-bit numbers and swaps the byte order in-place. Throws an error if <a href="#buf_length"><code>buf.length</code></a> is not a multiple of 2. </dd> <dt id="buf_swap32">
<code>buf.swap32</code>()</dt> <dd> Interprets <code>buf</code> as an array of unsigned 32-bit numbers and swaps the byte order in-place. Throws an error if <a href="#buf_length"><code>buf.length</code></a> is not a multiple of 4. </dd> <dt id="buf_swap64">
<code>buf.swap64</code>()</dt> <dd> Interprets <code>buf</code> as an array of 64-bit numbers and swaps byte order in-place. Throws an error if <a href="#buf_length"><code>buf.length</code></a> is not a multiple of 8. </dd> <dt id="buf_tojson">
<code>buf.toJSON</code>()</dt> <dd> Returns a JSON representation of <code>buf.</code> <code>JSON.stringify()</code> implicitly calls this function when stringifying a Buffer instance. </dd> <dt id="buf_tostring"><code>buf.toString([<i>encoding</i>[,
<i>start</i>[,
<i>end</i>]]])</code></dt> <dd> Decodes <code>buf</code> to a string according to the specified character <code><i>encoding</i></code>. which can be <code><i>utf-8</i></code>, <code><i>hex</i></code>, <code><i>base64</i></code>, <code><i>base64url</i></code>. The <code><i>start</i></code> and <code><i>end</i></code> parameters may be passed to decode only a subset of Buffer. </dd> <dt id="buf_write"><code>buf.write(<i>string</i>[,
<i>offset</i>[,
<i>length</i>]][,
<i>encoding</i>])</code></dt> <dd> Writes a <code><i>string</i></code> to <code>buf</code> at <code><i>offset</i></code> according to the character <code><i>encoding</i></code>. The <code><i>length</i></code> parameter is the number of bytes to write. If Buffer did not contain enough space to fit the entire string, only part of string will be written, however, partially encoded characters will not be written. The <code><i>encoding</i></code> can be <code><i>utf-8</i></code>, <code><i>hex</i></code>, <code><i>base64</i></code>, <code><i>base64url</i></code>. </dd> <dt id="buf_writeintbe"><code>buf.writeIntBE(<i>value</i>,
<i>offset</i>,
<i>byteLength</i>)</code></dt> <dd> Writes <code><i>byteLength</i></code> bytes of <code><i>value</i></code> to <code>buf</code> at the specified <code><i>offset</i></code> as big-endian. Supports up to 48 bits of accuracy. The <code><i>byteLength</i></code> parameter is an integer between 1 and 6 specifying the number of bytes to read. <p> The following similar methods are also supported: <code>buf.writeInt8</code>, <code>buf.writeInt16BE</code>, <code>buf.writeInt32BE</code>. </p> </dd> <dt id="buf_writeintle"><code>buf.writeIntLE(<i>value</i>,
<i>offset</i>,
<i>byteLength</i>)</code></dt> <dd> Writes <code><i>byteLength</i></code> bytes of <code><i>value</i></code> to <code>buf</code> at the specified <code><i>offset</i></code> as little-endian. Supports up to 48 bits of accuracy. The <code><i>byteLength</i></code> parameter is an integer between 1 and 6 specifying the number of bytes to read. <p> The following similar methods are also supported: <code>buf.writeInt8</code>, <code>buf.writeInt16LE</code>, <code>buf.writeInt32LE</code>. </p> </dd> <dt id="buf_writeuintbe"><code>buf.writeUIntBE(<i>value</i>,
<i>offset</i>,
<i>byteLength</i>)</code></dt> <dd> Writes <code><i>byteLength</i></code> bytes of <code><i>value</i></code> to <code>buf</code> at the specified <code><i>offset</i></code> as big-endian. Supports up to 48 bits of accuracy. The <code><i>byteLength</i></code> parameter is an integer between 1 and 6 specifying the number of bytes to read. <p> The following similar methods are also supported: <code>buf.writeUInt8</code>, <code>buf.writeUInt16BE</code>, <code>buf.writeUInt32BE</code>. </p> </dd> <dt id="buf_writeuintle"><code>buf.writeUIntLE(<i>value</i>,
<i>offset</i>,
<i>byteLength</i>)</code></dt> <dd> Writes <code><i>byteLength</i></code> bytes of <code><i>value</i></code> to <code>buf</code> at the specified <code><i>offset</i></code> as little-endian. Supports up to 48 bits of accuracy. The <code><i>byteLength</i></code> parameter is an integer between 1 and 6 specifying the number of bytes to read. <p> The following similar methods are also supported: <code>buf.writeUInt8</code>, <code>buf.writeUInt16LE</code>, <code>buf.writeUInt32LE</code>. </p> </dd> <dt id="buf_writedoublebe"><code>buf.writeDoubleBE(<i>value</i>,
[<i>offset</i>])</code></dt> <dd> Writes the <code><i>value</i></code> to <code>buf</code> at the specified <code><i>offset</i></code> as big-endian. </dd> <dt id="buf_writedoublele"><code>buf.writeDoubleLE(<i>value</i>,
[<i>offset</i>])</code></dt> <dd> Writes the <code><i>value</i></code> to <code>buf</code> at the specified <code><i>offset</i></code> as little-endian. </dd> <dt id="buf_writefloatbe"><code>buf.writeFloatBE(<i>value</i>,
[<i>offset</i>])</code></dt> <dd> Writes the <code><i>value</i></code> to <code>buf</code> at the specified <code><i>offset</i></code> as big-endian. </dd> <dt id="buf_writefloatle"><code>buf.writeFloatLE(<i>value</i>,
[<i>offset</i>])</code></dt> <dd> Writes the <code><i>value</i></code> to <code>buf</code> at the specified <code><i>offset</i></code> as little-endian. </dd> </dl>

<h4 id="crypto">Crypto</h4>
<p> The Crypto module provides cryptographic functionality support. The Crypto module object is returned by <code>require('crypto')</code>. </p>
 <dl class="compact"> <dt id="crypto_createhash"><code>crypto.createHash(<i>algorithm</i>)</code></dt> <dd> Creates and returns a <a href="#crypto_hash">Hash</a> object that can be used to generate hash digests using the given <code><i>algorithm</i></code>. The algorithm can be <code>md5</code>, <code>sha1</code>, and <code>sha256</code>. </dd> <dt id="crypto_createhmac"><code>crypto.createHmac(<i>algorithm</i>,
<i>secret key</i>)</code></dt> <dd> Creates and returns an <a href="#crypto_hmac">HMAC</a> object that uses the given <code><i>algorithm</i></code> and <code><i>secret key</i></code>. The algorithm can be <code>md5</code>, <code>sha1</code>, and <code>sha256</code>. </dd> </dl>

<h4 id="crypto_hash">Hash</h4>
 <dl class="compact"> <dt id="crypto_hash_update"><code>hash.update(<i>data</i>)</code></dt> <dd> Updates the hash content with the given <code><i>data</i></code>. </dd> <dt id="crypto_hash_digest"><code>hash.digest([<i>encoding</i>])</code></dt> <dd> Calculates the digest of all of the data passed using <code>hash.update()</code>. The encoding can be <code>hex</code>, <code>base64</code>, and <code>base64url</code>. If encoding is not provided, a Buffer object (<a href="changes#njs0.4.4">0.4.4</a>) is returned. <blockquote class="note"> Before version (<a href="changes#njs0.4.4">0.4.4</a>), a byte string was returned instead of a Buffer object. </blockquote> </dd> </dl>

 <pre data-language="nginx">
&gt;&gt; var cr = require('crypto')
undefined

&gt;&gt; cr.createHash('sha1').update('A').update('B').digest('base64url')
'BtlFlCqiamG-GMPiK_GbvKjdK10'
</pre>

<h4 id="crypto_hmac">HMAC</h4>
 <dl class="compact"> <dt id="crypto_hmac_update"><code>hmac.update(<i>data</i>)</code></dt> <dd> Updates the HMAC content with the given <code><i>data</i></code>. </dd> <dt id="crypto_hmac_digest"><code>hmac.digest([<i>encoding</i>])</code></dt> <dd> Calculates the HMAC digest of all of the data passed using <code>hmac.update()</code>. The encoding can be <code>hex</code>, <code>base64</code>, and <code>base64url</code>. If encoding is not provided, a Buffer object (<a href="changes#njs0.4.4">0.4.4</a>) is returned. <blockquote class="note"> Before version <a href="changes#njs0.4.4">0.4.4</a>, a byte string was returned instead of a Buffer object. </blockquote> </dd> </dl>

 <pre data-language="nginx">
&gt;&gt; var cr = require('crypto')
undefined

&gt;&gt; cr.createHmac('sha1', 'secret.key').update('AB').digest('base64url')
'Oglm93xn23_MkiaEq_e9u8zk374'
</pre>

<h4 id="njs_api_fs">File System</h4>
<p> The File System module provides operations with files. </p>
<p> The module object is returned by <code>require('fs')</code>. Since <a href="changes#njs0.3.9">0.3.9</a>, promissified versions of file system methods are available through <code>require('fs').promises</code> object: </p> <pre data-language="nginx">
&gt; var fs = require('fs').promises;
undefined
&gt; fs.readFile("/file/path").then((data)=&gt;console.log(data))
&lt;file data&gt;
</pre>
 <dl class="compact"> <dt id="fs_accesssync"><code>accessSync(<i>path</i>[,
<i>mode</i>])</code></dt> <dd> Synchronously tests permissions for a file or directory specified in the <code>path</code> (<a href="changes#njs0.3.9">0.3.9</a>). If the check fails, an error will be returned, otherwise, the method will return undefined. <dl class="compact"> <dt><code>mode</code></dt> <dd> by default is <a href="#access_const"><code>fs.constants.F_OK</code></a>. The mode argument is an optional integer that specifies the accessibility checks to be performed. <pre data-language="nginx">
try {
    fs.accessSync('/file/path', fs.constants.R_OK | fs.constants.W_OK);
    console.log('has access');
} catch (e) {
    console.log('no access');)
}
</pre> </dd> </dl> </dd> <dt id="fs_appendfilesync"><code>appendFileSync(<i>filename</i>,
<i>data</i>[, <i>options</i>])</code></dt> <dd> Synchronously appends specified <code>data</code> to a file with provided <code>filename</code>. The <code>data</code> is expected to be a string or a Buffer object (<a href="changes#njs0.4.4">0.4.4</a>). If the file does not exist, it will be created. The <code>options</code> parameter is expected to be an object with the following keys: <dl class="compact"> <dt><code>mode</code></dt> <dd> mode option, by default is <code>0o666</code> </dd> <dt><code>flag</code></dt> <dd> file system <a href="#njs_api_fs_flags">flag</a>, by default is <code>a</code> </dd> </dl> </dd> <dt id="fs_mkdirsync"><code>mkdirSync(<i>path</i>[,
<i>options</i>])</code></dt> <dd> Synchronously creates a directory at the specified <code>path</code> (<a href="changes#njs0.4.2">0.4.2</a>). The <code>options</code> parameter is expected to be an <code>integer</code> that specifies the <a href="#fs_mkdirsync_mode">mode</a>, or an object with the following keys: <dl class="compact"> <dt id="fs_mkdirsync_mode"><code>mode</code></dt> <dd> mode option, by default is <code>0o777</code>. </dd> </dl> </dd> <dt id="fs_readdirsync"><code>readdirSync(<i>path</i>[,
<i>options</i>])</code></dt> <dd> Synchronously reads the contents of a directory at the specified <code>path</code> (<a href="changes#njs0.4.2">0.4.2</a>). The <code>options</code> parameter is expected to be a string that specifies <a href="#fs_readdirsync_encoding">encoding</a> or an object with the following keys: <dl class="compact"> <dt id="fs_readdirsync_encoding"><code>encoding</code></dt> <dd> encoding, by default is <code>utf8</code>. The encoding can be <code>utf8</code> and <code>buffer</code> (<a href="changes#njs0.4.4">0.4.4</a>). </dd> <dt id="fs_readdirsync_withfiletypes"><code>withFileTypes</code></dt> <dd> if set to <code>true</code>, the files array will contain <a href="#fs_dirent"><code>fs.Dirent</code></a> objects, by default is <code>false</code>. </dd> </dl> </dd> <dt id="fs_readfilesync"><code>readFileSync(<i>filename</i>[,
<i>options</i>])</code></dt> <dd> Synchronously returns the contents of the file with provided <code>filename</code>. The <code>options</code> parameter holds <code>string</code> that specifies encoding. If an encoding is specified, a string is returned, otherwise, a Buffer object (<a href="changes#njs0.4.4">0.4.4</a>) is returned. <blockquote class="note"> Before version <a href="changes#njs0.4.4">0.4.4</a>, a <a href="#string_tobytes">byte string</a> was returned if encoding was not specified. </blockquote> Otherwise, <code>options</code> is expected to be an object with the following keys: <dl class="compact"> <dt><code>encoding</code></dt> <dd> encoding, by default is not specified. The encoding can be <code>utf8</code>, <code>hex</code> (<a href="changes#njs0.4.4">0.4.4</a>), <code>base64</code> (<a href="changes#njs0.4.4">0.4.4</a>), <code>base64url</code> (<a href="changes#njs0.4.4">0.4.4</a>). </dd> <dt><code>flag</code></dt> <dd> file system <a href="#njs_api_fs_flags">flag</a>, by default is <code>r</code> </dd> </dl> <pre data-language="nginx">
&gt;&gt; var fs = require('fs')
undefined
&gt;&gt; var file = fs.readFileSync('/file/path.tar.gz')
undefined
&gt;&gt; var gzipped = file.slice(0,2).toString('hex') === '1f8b'; gzipped
true
</pre> </dd> <dt id="fs_realpathsync"><code>realpathSync(<i>path</i>[,
<i>options</i>])</code></dt> <dd> Synchronously computes the canonical pathname by resolving <code>.</code>, <code>..</code> and symbolic links using <a href="http://man7.org/linux/man-pages/man3/realpath.3.html">realpath(3)</a>. The <code>options</code> argument can be a string specifying an encoding, or an object with an encoding property specifying the character encoding to use for the path passed to the callback (<a href="changes#njs0.3.9">0.3.9</a>). </dd> <dt id="fs_renamesync"><code>renameSync(<i>oldPath</i>,
<i>newPath</i>)</code></dt> <dd> Synchronously changes the name or location of a file from <code>oldPath</code> to <code>newPath</code> (<a href="changes#njs0.3.4">0.3.4</a>). <pre data-language="nginx">
&gt;&gt; var fs = require('fs')
undefined
&gt;&gt; var file = fs.renameSync('hello.txt', 'HelloWorld.txt')
undefined
</pre> </dd> <dt id="fs_rmdirsync"><code>rmdirSync(<i>path</i>)</code></dt> <dd> Synchronously removes a directory at the specified <code>path</code> (<a href="changes#njs0.4.2">0.4.2</a>). </dd> <dt id="fs_symlinksync"><code>symlinkSync(<i>target</i>,
<i>path</i>)</code></dt> <dd> Synchronously creates the link called <code>path</code> pointing to <code>target</code> using <a href="http://man7.org/linux/man-pages/man2/symlink.2.html">symlink(2)</a> (<a href="changes#njs0.3.9">0.3.9</a>). Relative targets are relative to the link’s parent directory. </dd> <dt id="fs_unlinksync"><code>unlinkSync(<i>path</i>)</code></dt> <dd> Synchronously unlinks a file by <code>path</code> (<a href="changes#njs0.3.9">0.3.9</a>). </dd> <dt id="fs_writefilesync"><code>writeFileSync(<i>filename</i>,
<i>data</i>[,
<i>options</i>])</code></dt> <dd> Synchronously writes <code>data</code> to a file with provided <code>filename</code>. The <code>data</code> is expected to be a string or a Buffer object (<a href="changes#njs0.4.4">0.4.4</a>). If the file does not exist, it will be created, if the file exists, it will be replaced. The <code>options</code> parameter is expected to be an object with the following keys: <dl class="compact"> <dt><code>mode</code></dt> <dd> mode option, by default is <code>0o666</code> </dd> <dt><code>flag</code></dt> <dd> file system <a href="#njs_api_fs_flags">flag</a>, by default is <code>w</code> </dd> </dl> <pre data-language="nginx">
&gt;&gt; var fs = require('fs')
undefined
&gt;&gt; var file = fs.writeFileSync('hello.txt', 'Hello world')
undefined
</pre> </dd> </dl>

<h4 id="fs_dirent">fs.Dirent</h4>
<p> <code>fs.Dirent</code> is a representation of a directory entry — a file or a subdirectory. When <a href="#fs_readdirsync"><code>readdirSync()</code></a> is called with the <a href="#fs_readdirsync_withfiletypes"><code>withFileTypes</code></a> option, the resulting array contains <code>fs.Dirent</code> objects. </p> <ul> <li> <code>dirent.isBlockDevice()</code> — returns <code>true</code> if the <code>fs.Dirent</code> object describes a block device. </li> <li> <code>dirent.isCharacterDevice()</code> — returns <code>true</code> if the <code>fs.Dirent</code> object describes a character device. </li> <li> <code>dirent.isDirectory()</code> — returns <code>true</code> if the <code>fs.Dirent</code> object describes a file system directory. </li> <li> <code>dirent.isFIFO()</code> — returns <code>true</code> if the <code>fs.Dirent</code> object describes a first-in-first-out (FIFO) pipe. </li> <li> <code>dirent.isFile()</code> — returns <code>true</code> if the <code>fs.Dirent</code> object describes a regular file. </li> <li> <code>dirent.isSocket()</code> — returns <code>true</code> if the <code>fs.Dirent</code> object describes a socket. </li> <li> <code>dirent.isSymbolicLink()</code> — returns <code>true</code> if the <code>fs.Dirent</code> object describes a symbolic link. </li> <li> <code>dirent.name</code> — the name of the file <code>fs.Dirent</code> object refers to. </li> </ul>

<h4 id="access_const">File Access Constants</h4>
<p> The <a href="#fs_accesssync"><code>access()</code></a> method can accept the following flags. These flags are exported by <code>fs.constants</code>: </p> <ul> <li> <code>F_OK</code> — indicates that the file is visible to the calling process, used by default if no mode is specified </li> <li> <code>R_OK</code> — indicates that the file can be read by the calling process </li> <li> <code>W_OK</code> — indicates that the file can be written by the calling process </li> <li> <code>X_OK</code> — indicates that the file can be executed by the calling process </li> </ul>

<h4 id="njs_api_fs_flags">File System Flags</h4>
<p> The <code>flag</code> option can accept the following values: </p> <ul> <li> <code>a</code> — open a file for appending. The file is created if it does not exist </li> <li> <code>ax</code> — the same as <code>a</code> but fails if the file already exists </li> <li> <code>a+</code> — open a file for reading and appending. If the file does not exist, it will be created </li> <li> <code>ax+</code> — the same as <code>a+</code> but fails if the file already exists </li> <li> <code>as</code> — open a file for appending in synchronous mode. If the file does not exist, it will be created </li> <li> <code>as+</code> — open a file for reading and appending in synchronous mode. If the file does not exist, it will be created </li> <li> <code>r</code> — open a file for reading. An exception occurs if the file does not exist </li> <li> <code>r+</code> — open a file for reading and writing. An exception occurs if the file does not exist </li> <li> <code>rs+</code> — open a file for reading and writing in synchronous mode. Instructs the operating system to bypass the local file system cache </li> <li> <code>w</code> — open a file for writing. If the file does not exist, it will be created. If the file exists, it will be replaced </li> <li> <code>wx</code> — the same as <code>w</code> but fails if the file already exists </li> <li> <code>w+</code> — open a file for reading and writing. If the file does not exist, it will be created. If the file exists, it will be replaced </li> <li> <code>wx+</code> — the same as <code>w+</code> but fails if the file already exists </li> </ul>

<h4 id="querystring">Query String</h4>
<p> The Query String module provides support for parsing and formatting URL query strings (<a href="changes#njs0.4.3">0.4.3</a>). The Query String module object is returned by <code>require('querystring')</code>. </p>
 <dl class="compact"> <dt id="querystring_decode"><code>querystring.decode()</code></dt> <dd> is an alias for <a href="#querystring_parse"><code>querystring.parse()</code></a>. </dd> <dt id="querystring_encode"><code>querystring.encode()</code></dt> <dd> is an alias for <a href="#querystring_stringify"><code>querystring.stringify()</code></a>. </dd> <dt id="querystring_escape"><code>querystring.escape(<i>string</i>)</code></dt> <dd> <p> Performs URL encoding of the given <code>string</code>, returns an escaped query string. The method is used by <a href="#querystring_stringify"><code>querystring.stringify()</code></a> and should not be used directly. </p> </dd> <dt id="querystring_parse"><code>querystring.parse(<i>string</i>[,
<i>separator</i>[,
<i>equal</i>[,
<i>options</i>]]])</code></dt> <dd> <p> Parses the query string URL and returns an object. </p> <p> The <code>separator</code> parameter is a substring for delimiting key and value pairs in the query string, by default is “<code>&amp;</code>”. </p> <p> The <code>equal</code> parameter is a substring for delimiting keys and values in the query string, by default is “<code>=</code>”. </p> <p> The <code>options</code> parameter is expected to be an object with the following keys: </p> <dl class="compact"> <dt>
<code>decodeURIComponent</code> <code><i>function</i></code>
</dt> <dd> Function used to decode percent-encoded characters in the query string, by default is <a href="#querystring_unescape"><code>querystring.unescape()</code></a> </dd> <dt>
<code>maxKeys</code> <code><i>number</i></code>
</dt> <dd> the maximum number of keys to parse, by default is <code>1000</code>. The <code>0</code> value removes limitations for counting keys. </dd> </dl>
<p> By default, percent-encoded characters within the query string are assumed to use the UTF-8 encoding, invalid UTF-8 sequences will be replaced with the <code>U+FFFD</code> replacement character. </p> <p> For example, for the following query string </p> <pre data-language="nginx">
'foo=bar&amp;abc=xyz&amp;abc=123'
</pre>
<p> the output will be: </p> <pre data-language="nginx">
{
  foo: 'bar',
  abc: ['xyz', '123']
}
</pre>
 </dd> <dt id="querystring_stringify"><code>querystring.stringify(<i>object</i>[,
<i>separator</i>[,
<i>equal</i>[,
<i>options</i>]]])</code></dt> <dd> <p> Serializes an object and returns a URL query string. </p> <p> The <code>separator</code> parameter is a substring for delimiting key and value pairs in the query string, by default is “<code>&amp;</code>”. </p> <p> The <code>equal</code> parameter is a substring for delimiting keys and values in the query string, by default is “<code>=</code>”. </p> <p> The <code>options</code> parameter is expected to be an object with the following keys: </p> <dl class="compact"> <dt>
<code>encodeURIComponent</code> <code><i>function</i></code>
</dt> <dd> The function to use when converting URL-unsafe characters to percent-encoding in the query string, by default is <a href="#querystring_escape"><code>querystring.escape()</code></a>. </dd> </dl>
 <p> By default, characters that require percent-encoding within the query string are encoded as UTF-8. If other encoding is required, then <code>encodeURIComponent</code> option should be specified. </p> <p> For example, for the following command </p> <pre data-language="nginx">
querystring.stringify({ foo: 'bar', baz: ['qux', 'quux'], 123: '' });
</pre>
<p> the query string will be: </p> <pre data-language="nginx">
'foo=bar&amp;baz=qux&amp;baz=quux&amp;123='
</pre>
 </dd> <dt id="querystring_unescape"><code>querystring.unescape(<i>string</i>)</code></dt> <dd> <p> Performs decoding of URL percent-encoded characters of the <code>string</code>, returns an unescaped query string. The method is used by <a href="#querystring_parse"><code>querystring.parse()</code></a> and should not be used directly. </p> </dd> </dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2002-2020 Igor Sysoev<br>© 2011-2020 Nginx, Inc.<br>Licensed under the BSD License.<br>
    <a href="https://nginx.org/en/docs/njs/reference.html" class="_attribution-link">https://nginx.org/en/docs/njs/reference.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
