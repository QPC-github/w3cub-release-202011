
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>tf.contrib.training.NextQueuedSequenceBatch - TensorFlow 1.15 - W3cubDocs</title>
  
  <meta name="description" content=" NextQueuedSequenceBatch stores deferred SequenceQueueingStateSaver data. ">
  <meta name="keywords" content="tf, contrib, training, nextqueuedsequencebatch, tensorflow, tensorflow~1.15">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tensorflow~1.15/contrib/training/nextqueuedsequencebatch.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/tensorflow~1.15.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~1.15/" class="_nav-link" title="" style="margin-left:0;">TensorFlow 1.15</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tensorflow">
				
				
<h1 class="devsite-page-title">tf.contrib.training.NextQueuedSequenceBatch</h1>       <p>NextQueuedSequenceBatch stores deferred SequenceQueueingStateSaver data.</p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.contrib.training.NextQueuedSequenceBatch(
    state_saver
)
</pre>  <p>This class is instantiated by <code translate="no" dir="ltr">SequenceQueueingStateSaver</code> and is accessible via its <code translate="no" dir="ltr">next_batch</code> property.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Attributes</th></tr> 
<tr> <td> <code translate="no" dir="ltr">batch_size</code> </td> <td> The batch_size of the given batch. <p>Usually, this is the batch_size requested when initializing the SQSS, but if allow_small_batch=True this will become smaller when inputs are exhausted. </p>
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">context</code> </td> <td> A dict mapping keys of <code translate="no" dir="ltr">input_context</code> to batched context. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">insertion_index</code> </td> <td> The insertion indices of the examples (when they were first added). <p>These indices start with the value -2**63 and increase with every call to the prefetch op. Each whole example gets its own insertion index, and this is used to prioritize the example so that its truncated segments appear in adjacent iterations, even if new examples are inserted by the prefetch op between iterations. </p>
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">key</code> </td> <td> The key names of the given truncated unrolled examples. <p>The format of the key is:</p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">"%05d_of_%05d:%s" % (sequence, sequence_count, original_key)
</pre> <p>where <code translate="no" dir="ltr">original_key</code> is the unique key read in by the prefetcher. </p>
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">length</code> </td> <td> The lengths of the given truncated unrolled examples. <p>For initial iterations, for which <code translate="no" dir="ltr">sequence * num_unroll &lt; length</code>, this number is <code translate="no" dir="ltr">num_unroll</code>. For the remainder, this number is between <code translate="no" dir="ltr">0</code> and <code translate="no" dir="ltr">num_unroll</code>. </p>
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">next_key</code> </td> <td> The key names of the next (in iteration) truncated unrolled examples. <p>The format of the key is:</p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">"%05d_of_%05d:%s" % (sequence + 1, sequence_count, original_key)
</pre> <p>if <code translate="no" dir="ltr">sequence + 1 &lt; sequence_count</code>, otherwise:</p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">"STOP:%s" % original_key
</pre> <p>where <code translate="no" dir="ltr">original_key</code> is the unique key read in by the prefetcher. </p>
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">sequence</code> </td> <td> An int32 vector, length <code translate="no" dir="ltr">batch_size</code>: the sequence index of each entry. <p>When an input is split up, the sequence values</p> <pre class="prettyprint" translate="no" dir="ltr" data-language="cpp">0, 1, ..., sequence_count - 1
</pre> <p>are assigned to each split. </p>
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">sequence_count</code> </td> <td> An int32 vector, length <code translate="no" dir="ltr">batch_size</code>: the sequence count of each entry. <p>When an input is split up, the number of splits is equal to: <code translate="no" dir="ltr">padded_length / num_unroll</code>. This is the sequence_count. </p>
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">sequences</code> </td> <td> A dict mapping keys of <code translate="no" dir="ltr">input_sequences</code> to split and rebatched data. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">total_length</code> </td> <td> The lengths of the original (non-truncated) unrolled examples. </td> </tr> </table> <h2 id="methods" data-text="Methods" tabindex="0">Methods</h2> <h3 id="save_state" data-text="save_state" tabindex="0"><code translate="no" dir="ltr">save_state</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/v1.15.0/tensorflow/contrib/training/python/training/sequence_queueing_state_saver.py#L556-L611">View source</a></p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
save_state(
    state_name, value, name=None
)
</pre> <p>Returns an op to save the current batch of state <code translate="no" dir="ltr">state_name</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">state_name</code> </td> <td> string, matches a key provided in <code translate="no" dir="ltr">initial_states</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">value</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code>. Its type must match that of <code translate="no" dir="ltr">initial_states[state_name].dtype</code>. If we had at input: <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">initial_states[state_name].get_shape() == [d1, d2, ...]
</pre> <p>then the shape of <code translate="no" dir="ltr">value</code> must match:</p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">tf.shape(value) == [batch_size, d1, d2, ...]
</pre> 
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">name</code> </td> <td> string (optional). The name scope for newly created ops. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A control flow op that stores the new state of each entry into the state saver. This op must be run for every iteration that accesses data from the state saver (otherwise the state saver will never progress through its states and run out of capacity). </td> </tr> 
</table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Raises</th></tr> 
<tr> <td> <code translate="no" dir="ltr">KeyError</code> </td> <td> if <code translate="no" dir="ltr">state_name</code> does not match any of the initial states declared in <code translate="no" dir="ltr">initial_states</code>. </td> </tr> </table> <h3 id="state" data-text="state" tabindex="0"><code translate="no" dir="ltr">state</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/v1.15.0/tensorflow/contrib/training/python/training/sequence_queueing_state_saver.py#L527-L554">View source</a></p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
state(
    state_name
)
</pre> <p>Returns batched state tensors.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">state_name</code> </td> <td> string, matches a key provided in <code translate="no" dir="ltr">initial_states</code>. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">Tensor</code>: a batched set of states, either initial states (if this is the first run of the given example), or a value as stored during a previous iteration via <code translate="no" dir="ltr">save_state</code> control flow. Its type is the same as <code translate="no" dir="ltr">initial_states["state_name"].dtype</code>. If we had at input: <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">initial_states[state_name].get_shape() == [d1, d2, ...],
</pre> <p>then</p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">state(state_name).get_shape() == [batch_size, d1, d2, ...]
</pre> 
</td> </tr> 
</table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Raises</th></tr> 
<tr> <td> <code translate="no" dir="ltr">KeyError</code> </td> <td> if <code translate="no" dir="ltr">state_name</code> does not match any of the initial states declared in <code translate="no" dir="ltr">initial_states</code>. </td> </tr> </table>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    © 2020 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/contrib/training/NextQueuedSequenceBatch" class="_attribution-link">https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/contrib/training/NextQueuedSequenceBatch</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
