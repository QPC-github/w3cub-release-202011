
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ConfigManager&#58;&#58;callOnDependencyRemoval - Drupal 8 - W3cubDocs</title>
  
  <meta name="description" content=" Calls an entity&#39;s onDependencyRemoval() method. ">
  <meta name="keywords" content="protected, function, configmanager, callondependencyremoval, drupal, drupal~8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/drupal~8/core-lib-drupal-core-config-configmanager.php/function/configmanager-callondependencyremoval/8.1.x.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/drupal~8.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/drupal~8/" class="_nav-link" title="" style="margin-left:0;">Drupal 8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _drupal">
				
				
<h1 id="page-subtitle">protected function ConfigManager::callOnDependencyRemoval</h1>     <pre class="signature">protected <a href="../../class/configmanager/8.1.x">ConfigManager</a>::callOnDependencyRemoval(ConfigEntityInterface $entity, array $dependent_entities, $type, array $names)</pre> <p>Calls an entity's onDependencyRemoval() method.</p> <p>A helper method to call onDependencyRemoval() with the correct list of affected entities. This list should only contain dependencies on the entity. Configuration and content entity dependencies will be converted into entity objects.</p> <h3>Parameters</h3> <p> <strong><a href="../../../core-lib-drupal-core-config-entity-configentityinterface.php/interface/configentityinterface/8.1.x" title="Defines a common interface for configuration entities." class="local">\Drupal\Core\Config\Entity\ConfigEntityInterface</a> $entity</strong>: The entity to call onDependencyRemoval() on.</p> <p><strong><a href="../../../core-lib-drupal-core-config-entity-configentityinterface.php/interface/configentityinterface/8.1.x" title="Defines a common interface for configuration entities." class="local">\Drupal\Core\Config\Entity\ConfigEntityInterface</a>[] $dependent_entities</strong>: The list of dependent configuration entities.</p> <p><strong>string $type</strong>: The type of dependency being checked. Either 'module', 'theme', 'config' or 'content'.</p> <p><strong>array $names</strong>: The specific names to check. If $type equals 'module' or 'theme' then it should be a list of module names or theme names. In the case of 'config' or 'content' it should be a list of configuration dependency names.</p> <h3>Return value</h3> <p> bool TRUE if the entity has changed as a result of calling the onDependencyRemoval() method, FALSE if not.</p>  <h3>File</h3> 
<dl> <dt>core/lib/Drupal/Core/Config/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Config%21ConfigManager.php/8.1.x">ConfigManager.php</a>, line 399</dt>  </dl> <h3>Class</h3> 
<dl> <dt>
<a href="../../class/configmanager/8.1.x">ConfigManager</a> </dt> <dd>The ConfigManager provides helper functions for the configuration system.</dd> </dl> <h3>Namespace</h3> <a href="https://api.drupal.org/api/drupal/namespace/Drupal%21Core%21Config/8.1.x">Drupal\Core\Config</a> <h3>Code</h3> <pre class="php" data-language="php">protected function callOnDependencyRemoval(ConfigEntityInterface $entity, array $dependent_entities, $type, array $names) {
  $entity_dependencies = $entity-&gt;getDependencies();
  if (empty($entity_dependencies)) {
    // No dependent entities nothing to do.
    return FALSE;
  }

  $affected_dependencies = array(
    'config' =&gt; array(),
    'content' =&gt; array(),
    'module' =&gt; array(),
    'theme' =&gt; array(),
  );

  // Work out if any of the entity's dependencies are going to be affected.
  if (isset($entity_dependencies[$type])) {
    // Work out which dependencies the entity has in common with the provided
    // $type and $names.
    $affected_dependencies[$type] = array_intersect($entity_dependencies[$type], $names);

    // If the dependencies are entities we need to convert them into objects.
    if ($type == 'config' || $type == 'content') {
      $affected_dependencies[$type] = array_map(function($name) use ($type) {
        if ($type == 'config') {
          return $this-&gt;loadConfigEntityByName($name);
        }
        else {
          // Ignore the bundle.
          list($entity_type_id, , $uuid) = explode(':', $name);
          return $this-&gt;entityManager-&gt;loadEntityByConfigTarget($entity_type_id, $uuid);
        }
      }, $affected_dependencies[$type]);
    }
  }

  // Merge any other configuration entities into the list of affected
  // dependencies if necessary.
  if (isset($entity_dependencies['config'])) {
    foreach ($dependent_entities as $dependent_entity) {
      if (in_array($dependent_entity-&gt;getConfigDependencyName(), $entity_dependencies['config'])) {
        $affected_dependencies['config'][] = $dependent_entity;
      }
    }
  }

  // Key the entity arrays by config dependency name to make searching easy.
  foreach (['config', 'content'] as $dependency_type) {
    $affected_dependencies[$dependency_type] = array_combine(
    array_map(function($entity) {
      return $entity-&gt;getConfigDependencyName();
    }, $affected_dependencies[$dependency_type]), 
    $affected_dependencies[$dependency_type]
    );
  }

  // Inform the entity.
  return $entity-&gt;onDependencyRemoval($affected_dependencies);
}
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/core!lib!Drupal!Core!Config!ConfigManager.php/function/ConfigManager::callOnDependencyRemoval/8.1.x" class="_attribution-link">https://api.drupal.org/api/drupal/core!lib!Drupal!Core!Config!ConfigManager.php/function/ConfigManager::callOnDependencyRemoval/8.1.x</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
