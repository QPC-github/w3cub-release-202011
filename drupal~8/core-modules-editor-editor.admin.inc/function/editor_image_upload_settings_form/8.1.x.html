
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Editor_image_upload_settings_form - Drupal 8 - W3cubDocs</title>
  
  <meta name="description" content=" Subform constructor to configure the text editor&#39;s image upload settings. ">
  <meta name="keywords" content="function, editor, image, upload, settings, form, drupal, drupal~8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/drupal~8/core-modules-editor-editor.admin.inc/function/editor_image_upload_settings_form/8.1.x.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/drupal~8.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/drupal~8/" class="_nav-link" title="" style="margin-left:0;">Drupal 8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _drupal">
				
				
<h1 id="page-subtitle">function editor_image_upload_settings_form</h1>     <pre class="signature">editor_image_upload_settings_form(Editor $editor)</pre> <p>Subform constructor to configure the text editor's image upload settings.</p> <p>Each text editor plugin that is configured to offer the ability to insert images and uses EditorImageDialog for that, should use this form to update the text editor's configuration so that EditorImageDialog knows whether it should allow the user to upload images.</p> <h3>Parameters</h3> <p> <strong><a href="https://api.drupal.org/api/drupal/core%21modules%21editor%21src%21Entity%21Editor.php/class/Editor/8.1.x" title="Defines the configured text editor entity." class="local">\Drupal\editor\Entity\Editor</a> $editor</strong>: The text editor entity that is being edited.</p> <h3>Return value</h3> <p> array The image upload settings form.</p> <h3>See also</h3> <p> <a href="https://api.drupal.org/api/drupal/core%21modules%21editor%21src%21Form%21EditorImageDialog.php/class/EditorImageDialog/8.1.x" title="Provides an image dialog for text editors." class="local">\Drupal\editor\Form\EditorImageDialog</a></p>  <h3>File</h3> 
<dl> <dt>core/modules/editor/<a href="../../8.1.x">editor.admin.inc</a>, line 27</dt> <dd>Administration functions for <a href="../../../core-modules-editor-editor.module/8.1.x" title='Adds bindings for client-side "text editors" to text formats.' class="local">editor.module</a>.</dd> </dl> <h3>Code</h3> <pre class="php" data-language="php">function editor_image_upload_settings_form(Editor $editor) {
  // Defaults.
  $image_upload = $editor-&gt;getImageUploadSettings();
  $image_upload += array(
    'status' =&gt; FALSE,
    'scheme' =&gt; file_default_scheme(),
    'directory' =&gt; 'inline-images',
    'max_size' =&gt; '',
    'max_dimensions' =&gt; array('width' =&gt; '', 'height' =&gt; ''),
  );

  $form['status'] = array(
    '#type' =&gt; 'checkbox',
    '#title' =&gt; t('Enable image uploads'),
    '#default_value' =&gt; $image_upload['status'],
    '#attributes' =&gt; array(
      'data-editor-image-upload' =&gt; 'status',
    ),
  );
  $show_if_image_uploads_enabled = array(
    'visible' =&gt; array(
      ':input[data-editor-image-upload="status"]' =&gt; array('checked' =&gt; TRUE),
    ),
  );

  // Any visible, writable wrapper can potentially be used for uploads,
  // including a remote file system that integrates with a CDN.
  $options = \Drupal::service('stream_wrapper_manager')-&gt;getDescriptions(StreamWrapperInterface::WRITE_VISIBLE);
  if (!empty($options)) {
    $form['scheme'] = array(
      '#type' =&gt; 'radios',
      '#title' =&gt; t('File storage'),
      '#default_value' =&gt; $image_upload['scheme'],
      '#options' =&gt; $options,
      '#states' =&gt; $show_if_image_uploads_enabled,
      '#access' =&gt; count($options) &gt; 1,
    );
  }
  // Set data- attributes with human-readable names for all possible stream
  // wrappers, so that drupal.ckeditor.drupalimage.admin's summary rendering
  // can use that.
  foreach (\Drupal::service('stream_wrapper_manager')-&gt;getNames(StreamWrapperInterface::WRITE_VISIBLE) as $scheme =&gt; $name) {
    $form['scheme'][$scheme]['#attributes']['data-label'] = t('Storage: @name', array('@name' =&gt; $name));
  }

  $form['directory'] = array(
    '#type' =&gt; 'textfield',
    '#default_value' =&gt; $image_upload['directory'],
    '#title' =&gt; t('Upload directory'),
    '#description' =&gt; t("A directory relative to Drupal's files directory where uploaded images will be stored."),
    '#states' =&gt; $show_if_image_uploads_enabled,
  );

  $default_max_size = format_size(file_upload_max_size());
  $form['max_size'] = array(
    '#type' =&gt; 'textfield',
    '#default_value' =&gt; $image_upload['max_size'],
    '#title' =&gt; t('Maximum file size'),
    '#description' =&gt; t('If this is left empty, then the file size will be limited by the PHP maximum upload size of @size.', array('@size' =&gt; $default_max_size)),
    '#maxlength' =&gt; 20,
    '#size' =&gt; 10,
    '#placeholder' =&gt; $default_max_size,
    '#states' =&gt; $show_if_image_uploads_enabled,
  );

  $form['max_dimensions'] = array(
    '#type' =&gt; 'item',
    '#title' =&gt; t('Maximum dimensions'),
    '#field_prefix' =&gt; '&lt;div class="container-inline clearfix"&gt;',
    '#field_suffix' =&gt; '&lt;/div&gt;',
    '#description' =&gt; t('Images larger than these dimensions will be scaled down.'),
    '#states' =&gt; $show_if_image_uploads_enabled,
  );
  $form['max_dimensions']['width'] = array(
    '#title' =&gt; t('Width'),
    '#title_display' =&gt; 'invisible',
    '#type' =&gt; 'number',
    '#default_value' =&gt; (empty($image_upload['max_dimensions']['width'])) ? '' : $image_upload['max_dimensions']['width'],
    '#size' =&gt; 8,
    '#maxlength' =&gt; 8,
    '#min' =&gt; 1,
    '#max' =&gt; 99999,
    '#placeholder' =&gt; t('width'),
    '#field_suffix' =&gt; ' x ',
    '#states' =&gt; $show_if_image_uploads_enabled,
  );
  $form['max_dimensions']['height'] = array(
    '#title' =&gt; t('Height'),
    '#title_display' =&gt; 'invisible',
    '#type' =&gt; 'number',
    '#default_value' =&gt; (empty($image_upload['max_dimensions']['height'])) ? '' : $image_upload['max_dimensions']['height'],
    '#size' =&gt; 8,
    '#maxlength' =&gt; 8,
    '#min' =&gt; 1,
    '#max' =&gt; 99999,
    '#placeholder' =&gt; t('height'),
    '#field_suffix' =&gt; t('pixels'),
    '#states' =&gt; $show_if_image_uploads_enabled,
  );

  return $form;
}
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/core!modules!editor!editor.admin.inc/function/editor_image_upload_settings_form/8.1.x" class="_attribution-link">https://api.drupal.org/api/drupal/core!modules!editor!editor.admin.inc/function/editor_image_upload_settings_form/8.1.x</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
