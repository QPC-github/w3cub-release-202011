
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>UseJava - CMake 3.19 - W3cubDocs</title>
  
  <meta name="description" content=" Use Module for Java ">
  <meta name="keywords" content="usejava, cmake, cmake~3.19">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cmake~3.19/module/usejava.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/cmake~3.19.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cmake~3.19/" class="_nav-link" title="" style="margin-left:0;">CMake 3.19</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="module:UseJava">UseJava</h1> <p id="usejava">Use Module for Java</p> <p>This file provides functions for Java. It is assumed that <a class="reference internal" href="findjava#module:FindJava" title="FindJava" id="index-0-module:FindJava"><code>FindJava</code></a> has already been loaded. See <a class="reference internal" href="findjava#module:FindJava" title="FindJava" id="index-1-module:FindJava"><code>FindJava</code></a> for information on how to load Java into your CMake project.</p>  <h2 id="creating-and-installing-jars">Creating And Installing JARs</h2> <pre data-language="cmake">add_jar(&lt;target_name&gt;
        [SOURCES] &lt;source1&gt; [&lt;source2&gt;...] [&lt;resource1&gt;...]
        [INCLUDE_JARS &lt;jar1&gt; [&lt;jar2&gt;...]]
        [ENTRY_POINT &lt;entry&gt;]
        [VERSION &lt;version&gt;]
        [OUTPUT_NAME &lt;name&gt;]
        [OUTPUT_DIR &lt;dir&gt;]
        [GENERATE_NATIVE_HEADERS &lt;target&gt; [DESTINATION &lt;dir&gt;]]
        )
</pre> <p>This command creates a <code>&lt;target_name&gt;.jar</code>. It compiles the given <code>&lt;source&gt;</code> files and adds the given <code>&lt;resource&gt;</code> files to the jar file. Source files can be java files or listing files (prefixed by <code>@</code>). If only resource files are given then just a jar file is created. The list of <code>INCLUDE_JARS</code> are added to the classpath when compiling the java sources and also to the dependencies of the target. <code>INCLUDE_JARS</code> also accepts other target names created by <code>add_jar()</code>. For backwards compatibility, jar files listed as sources are ignored (as they have been since the first version of this module).</p> <p>The default <code>OUTPUT_DIR</code> can also be changed by setting the variable <code>CMAKE_JAVA_TARGET_OUTPUT_DIR</code>.</p> <p>Optionally, using option <code>GENERATE_NATIVE_HEADERS</code>, native header files can be generated for methods declared as native. These files provide the connective glue that allow your Java and C code to interact. An INTERFACE target will be created for an easy usage of generated files. Sub-option <code>DESTINATION</code> can be used to specify the output directory for generated header files.</p> <p><code>GENERATE_NATIVE_HEADERS</code> option requires, at least, version 1.8 of the JDK.</p> <p>The <code>add_jar()</code> function sets the following target properties on <code>&lt;target_name&gt;</code>:</p> <dl class="simple"> <dt>
<code>INSTALL_FILES</code> </dt>
<dd>
<p>The files which should be installed. This is used by <code>install_jar()</code>.</p> </dd> <dt>
<code>JNI_SYMLINK</code> </dt>
<dd>
<p>The JNI symlink which should be installed. This is used by <code>install_jni_symlink()</code>.</p> </dd> <dt>
<code>JAR_FILE</code> </dt>
<dd>
<p>The location of the jar file so that you can include it.</p> </dd> <dt>
<code>CLASSDIR</code> </dt>
<dd>
<p>The directory where the class files can be found. For example to use them with <code>javah</code>.</p> </dd> </dl> <pre data-language="cmake">install_jar(&lt;target_name&gt; &lt;destination&gt;)
install_jar(&lt;target_name&gt; DESTINATION &lt;destination&gt; [COMPONENT &lt;component&gt;])
</pre> <p>This command installs the <code>&lt;target_name&gt;</code> files to the given <code>&lt;destination&gt;</code>. It should be called in the same scope as <code>add_jar()</code> or it will fail.</p> <p>The <code>install_jar()</code> function sets the <code>INSTALL_DESTINATION</code> target property on jars so installed. This property holds the <code>&lt;destination&gt;</code> as described above, and is used by <code>install_jar_exports()</code>. You can get this information with <a class="reference internal" href="../command/get_property#command:get_property" title="get_property" id="index-0-command:get_property"><code>get_property()</code></a> and the <code>INSTALL_DESTINATION</code> property key.</p> <pre data-language="cmake">install_jni_symlink(&lt;target_name&gt; &lt;destination&gt;)
install_jni_symlink(&lt;target_name&gt; DESTINATION &lt;destination&gt; [COMPONENT &lt;component&gt;])
</pre> <p>This command installs the <code>&lt;target_name&gt;</code> JNI symlinks to the given <code>&lt;destination&gt;</code>. It should be called in the same scope as <code>add_jar()</code> or it will fail.</p> <pre data-language="cmake">install_jar_exports(TARGETS &lt;jars&gt;...
                    [NAMESPACE &lt;namespace&gt;]
                    FILE &lt;filename&gt;
                    DESTINATION &lt;destination&gt; [COMPONENT &lt;component&gt;])
</pre> <p>This command installs a target export file <code>&lt;filename&gt;</code> for the named jar targets to the given <code>&lt;destination&gt;</code> directory. Its function is similar to that of <a class="reference internal" href="../command/install#command:install" title="install" id="index-0-command:install"><code>install(EXPORTS)</code></a>.</p> <pre data-language="cmake">export_jars(TARGETS &lt;jars&gt;...
            [NAMESPACE &lt;namespace&gt;]
            FILE &lt;filename&gt;)
</pre> <p>This command writes a target export file <code>&lt;filename&gt;</code> for the named <code>&lt;jars&gt;</code> targets. Its function is similar to that of <a class="reference internal" href="../command/export#command:export" title="export" id="index-0-command:export"><code>export()</code></a>.</p>  <h3 id="examples">Examples</h3> <p>To add compile flags to the target you can set these flags with the following variable:</p> <pre data-language="cmake">set(CMAKE_JAVA_COMPILE_FLAGS -nowarn)
</pre> <p>To add a path or a jar file to the class path you can do this with the <code>CMAKE_JAVA_INCLUDE_PATH</code> variable.</p> <pre data-language="cmake">set(CMAKE_JAVA_INCLUDE_PATH /usr/share/java/shibboleet.jar)
</pre> <p>To use a different output name for the target you can set it with:</p> <pre data-language="cmake">add_jar(foobar foobar.java OUTPUT_NAME shibboleet.jar)
</pre> <p>To use a different output directory than <code>CMAKE_CURRENT_BINARY_DIR</code> you can set it with:</p> <pre data-language="cmake">add_jar(foobar foobar.java OUTPUT_DIR ${PROJECT_BINARY_DIR}/bin)
</pre> <p>To define an entry point in your jar you can set it with the <code>ENTRY_POINT</code> named argument:</p> <pre data-language="cmake">add_jar(example ENTRY_POINT com/examples/MyProject/Main)
</pre> <p>To define a custom manifest for the jar, you can set it with the <code>MANIFEST</code> named argument:</p> <pre data-language="cmake">add_jar(example MANIFEST /path/to/manifest)
</pre> <p>To add a version to the target output name you can set it using the <code>VERSION</code> named argument to <code>add_jar()</code>. The following example will create a jar file with the name <code>shibboleet-1.0.0.jar</code> and will create a symlink <code>shibboleet.jar</code> pointing to the jar with the version information.</p> <pre data-language="cmake">add_jar(shibboleet shibbotleet.java VERSION 1.2.0)
</pre> <p>If the target is a JNI library, utilize the following commands to create a JNI symbolic link:</p> <pre data-language="cmake">set(CMAKE_JNI_TARGET TRUE)
add_jar(shibboleet shibbotleet.java VERSION 1.2.0)
install_jar(shibboleet ${LIB_INSTALL_DIR}/shibboleet)
install_jni_symlink(shibboleet ${JAVA_LIB_INSTALL_DIR})
</pre> <p>If a single target needs to produce more than one jar from its java source code, to prevent the accumulation of duplicate class files in subsequent jars, set/reset <code>CMAKE_JAR_CLASSES_PREFIX</code> prior to calling the <code>add_jar()</code> function:</p> <pre data-language="cmake">set(CMAKE_JAR_CLASSES_PREFIX com/redhat/foo)
add_jar(foo foo.java)

set(CMAKE_JAR_CLASSES_PREFIX com/redhat/bar)
add_jar(bar bar.java)
</pre> <p>For an optimum usage of option <code>GENERATE_NATIVE_HEADERS</code>, it is recommended to include module JNI before any call to <code>add_jar()</code>. The produced target for native headers can then be used to compile C/C++ sources with the <a class="reference internal" href="../command/target_link_libraries#command:target_link_libraries" title="target_link_libraries" id="index-0-command:target_link_libraries"><code>target_link_libraries()</code></a> command.</p> <pre data-language="cmake">find_package(JNI)
add_jar(foo foo.java GENERATE_NATIVE_HEADERS foo-native)
add_library(bar bar.cpp)
target_link_libraries(bar PRIVATE foo-native)
</pre>    <h2 id="finding-jars">Finding JARs</h2> <pre data-language="cmake">find_jar(&lt;VAR&gt;
         &lt;name&gt; | NAMES &lt;name1&gt; [&lt;name2&gt;...]
         [PATHS &lt;path1&gt; [&lt;path2&gt;... ENV &lt;var&gt;]]
         [VERSIONS &lt;version1&gt; [&lt;version2&gt;]]
         [DOC "cache documentation string"]
        )
</pre> <p>This command is used to find a full path to the named jar. A cache entry named by <code>&lt;VAR&gt;</code> is created to store the result of this command. If the full path to a jar is found the result is stored in the variable and the search will not repeated unless the variable is cleared. If nothing is found, the result will be <code>&lt;VAR&gt;-NOTFOUND</code>, and the search will be attempted again next time <code>find_jar()</code> is invoked with the same variable. The name of the full path to a file that is searched for is specified by the names listed after <code>NAMES</code> argument. Additional search locations can be specified after the <code>PATHS</code> argument. If you require special a version of a jar file you can specify it with the <code>VERSIONS</code> argument. The argument after <code>DOC</code> will be used for the documentation string in the cache.</p>   <h2 id="javadoc">Javadoc</h2> <p>The <code>create_javadoc()</code> command can be used to create java documentation based on files or packages. For more details please read the javadoc manpage.</p> <p>There are two main signatures for <code>create_javadoc()</code>. The first signature works with package names on a path with source files.</p> <pre data-language="cmake">create_javadoc(&lt;VAR&gt;
               PACKAGES &lt;pkg1&gt; [&lt;pkg2&gt;...]
               [SOURCEPATH &lt;sourcepath&gt;]
               [CLASSPATH &lt;classpath&gt;]
               [INSTALLPATH &lt;install path&gt;]
               [DOCTITLE "the documentation title"]
               [WINDOWTITLE "the title of the document"]
               [AUTHOR TRUE|FALSE]
               [USE TRUE|FALSE]
               [VERSION TRUE|FALSE]
               )
</pre> <p>For example:</p> <pre data-language="cmake">create_javadoc(my_example_doc
  PACKAGES com.example.foo com.example.bar
  SOURCEPATH "${CMAKE_CURRENT_SOURCE_DIR}"
  CLASSPATH ${CMAKE_JAVA_INCLUDE_PATH}
  WINDOWTITLE "My example"
  DOCTITLE "&lt;h1&gt;My example&lt;/h1&gt;"
  AUTHOR TRUE
  USE TRUE
  VERSION TRUE
)
</pre> <p>The second signature for <code>create_javadoc()</code> works on a given list of files.</p> <pre data-language="cmake">create_javadoc(&lt;VAR&gt;
               FILES &lt;file1&gt; [&lt;file2&gt;...]
               [CLASSPATH &lt;classpath&gt;]
               [INSTALLPATH &lt;install path&gt;]
               [DOCTITLE "the documentation title"]
               [WINDOWTITLE "the title of the document"]
               [AUTHOR TRUE|FALSE]
               [USE TRUE|FALSE]
               [VERSION TRUE|FALSE]
              )
</pre> <p>For example:</p> <pre data-language="cmake">create_javadoc(my_example_doc
  FILES ${example_SRCS}
  CLASSPATH ${CMAKE_JAVA_INCLUDE_PATH}
  WINDOWTITLE "My example"
  DOCTITLE "&lt;h1&gt;My example&lt;/h1&gt;"
  AUTHOR TRUE
  USE TRUE
  VERSION TRUE
)
</pre> <p>Both signatures share most of the options. These options are the same as what you can find in the javadoc manpage. Please look at the manpage for <code>CLASSPATH</code>, <code>DOCTITLE</code>, <code>WINDOWTITLE</code>, <code>AUTHOR</code>, <code>USE</code> and <code>VERSION</code>.</p> <p>If you don’t set the <code>INSTALLPATH</code>, then by default the documentation will be installed to :</p> <pre data-language="none">${CMAKE_INSTALL_PREFIX}/share/javadoc/&lt;VAR&gt;
</pre>   <h2 id="header-generation">Header Generation</h2> <pre data-language="cmake">create_javah(TARGET &lt;target&gt; | GENERATED_FILES &lt;VAR&gt;
             CLASSES &lt;class&gt;...
             [CLASSPATH &lt;classpath&gt;...]
             [DEPENDS &lt;depend&gt;...]
             [OUTPUT_NAME &lt;path&gt;|OUTPUT_DIR &lt;path&gt;]
             )
</pre> <p>Create C header files from java classes. These files provide the connective glue that allow your Java and C code to interact.</p> <div class="deprecated"> <p><span class="versionmodified deprecated">Deprecated since version 3.11.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This command will no longer be supported starting with version 10 of the JDK due to the <a class="reference external" href="http://openjdk.java.net/jeps/313">suppression of javah tool</a>. The <code>add_jar(GENERATE_NATIVE_HEADERS)</code> command should be used instead.</p> </div> <p>There are two main signatures for <code>create_javah()</code>. The first signature returns generated files through variable specified by the <code>GENERATED_FILES</code> option. For example:</p> <pre data-language="cmake">create_javah(GENERATED_FILES files_headers
  CLASSES org.cmake.HelloWorld
  CLASSPATH hello.jar
)
</pre> <p>The second signature for <code>create_javah()</code> creates a target which encapsulates header files generation. E.g.</p> <pre data-language="cmake">create_javah(TARGET target_headers
  CLASSES org.cmake.HelloWorld
  CLASSPATH hello.jar
)
</pre> <p>Both signatures share same options.</p> <dl class="simple"> <dt>
<code>CLASSES &lt;class&gt;...</code> </dt>
<dd>
<p>Specifies Java classes used to generate headers.</p> </dd> <dt>
<code>CLASSPATH &lt;classpath&gt;...</code> </dt>
<dd>
<p>Specifies various paths to look up classes. Here .class files, jar files or targets created by command add_jar can be used.</p> </dd> <dt>
<code>DEPENDS &lt;depend&gt;...</code> </dt>
<dd>
<p>Targets on which the javah target depends.</p> </dd> <dt>
<code>OUTPUT_NAME &lt;path&gt;</code> </dt>
<dd>
<p>Concatenates the resulting header files for all the classes listed by option <code>CLASSES</code> into <code>&lt;path&gt;</code>. Same behavior as option <code>-o</code> of javah tool.</p> </dd> <dt>
<code>OUTPUT_DIR &lt;path&gt;</code> </dt>
<dd>
<p>Sets the directory where the header files will be generated. Same behavior as option <code>-d</code> of javah tool. If not specified, <a class="reference internal" href="../variable/cmake_current_binary_dir#variable:CMAKE_CURRENT_BINARY_DIR" title="CMAKE_CURRENT_BINARY_DIR" id="index-0-variable:CMAKE_CURRENT_BINARY_DIR"><code>CMAKE_CURRENT_BINARY_DIR</code></a> is used as the output directory.</p> </dd> </dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2000–2020 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.19/module/UseJava.html" class="_attribution-link">https://cmake.org/cmake/help/v3.19/module/UseJava.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
