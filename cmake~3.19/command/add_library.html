
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Add_library() - CMake 3.19 - W3cubDocs</title>
  
  <meta name="description" content=" Add a library to the project using the specified source files. ">
  <meta name="keywords" content="add, library, cmake, cmake~3.19">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cmake~3.19/command/add_library.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/cmake~3.19.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cmake~3.19/" class="_nav-link" title="" style="margin-left:0;">CMake 3.19</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="command:add_library">add_library</h1>   <ul id="add-library"> <li><a class="reference internal" href="#normal-libraries" id="id2">Normal Libraries</a></li> <li><a class="reference internal" href="#object-libraries" id="id3">Object Libraries</a></li> <li><a class="reference internal" href="#interface-libraries" id="id4">Interface Libraries</a></li> <li><a class="reference internal" href="#imported-libraries" id="id5">Imported Libraries</a></li> <li><a class="reference internal" href="#alias-libraries" id="id6">Alias Libraries</a></li> </ul>
  <p>Add a library to the project using the specified source files.</p>  <h2 id="normal-libraries">Normal Libraries</h2> <pre data-language="cmake">add_library(&lt;name&gt; [STATIC | SHARED | MODULE]
            [EXCLUDE_FROM_ALL]
            [&lt;source&gt;...])
</pre> <p>Adds a library target called <code>&lt;name&gt;</code> to be built from the source files listed in the command invocation. (The source files can be omitted here if they are added later using <a class="reference internal" href="target_sources#command:target_sources" title="target_sources" id="index-0-command:target_sources"><code>target_sources()</code></a>.) The <code>&lt;name&gt;</code> corresponds to the logical target name and must be globally unique within a project. The actual file name of the library built is constructed based on conventions of the native platform (such as <code>lib&lt;name&gt;.a</code> or <code>&lt;name&gt;.lib</code>).</p> <p><code>STATIC</code>, <code>SHARED</code>, or <code>MODULE</code> may be given to specify the type of library to be created. <code>STATIC</code> libraries are archives of object files for use when linking other targets. <code>SHARED</code> libraries are linked dynamically and loaded at runtime. <code>MODULE</code> libraries are plugins that are not linked into other targets but may be loaded dynamically at runtime using dlopen-like functionality. If no type is given explicitly the type is <code>STATIC</code> or <code>SHARED</code> based on whether the current value of the variable <a class="reference internal" href="../variable/build_shared_libs#variable:BUILD_SHARED_LIBS" title="BUILD_SHARED_LIBS" id="index-0-variable:BUILD_SHARED_LIBS"><code>BUILD_SHARED_LIBS</code></a> is <code>ON</code>. For <code>SHARED</code> and <code>MODULE</code> libraries the <a class="reference internal" href="../prop_tgt/position_independent_code#prop_tgt:POSITION_INDEPENDENT_CODE" title="POSITION_INDEPENDENT_CODE" id="index-0-prop_tgt:POSITION_INDEPENDENT_CODE"><code>POSITION_INDEPENDENT_CODE</code></a> target property is set to <code>ON</code> automatically. A <code>SHARED</code> or <code>STATIC</code> library may be marked with the <a class="reference internal" href="../prop_tgt/framework#prop_tgt:FRAMEWORK" title="FRAMEWORK" id="index-0-prop_tgt:FRAMEWORK"><code>FRAMEWORK</code></a> target property to create an macOS Framework.</p> <p>If a library does not export any symbols, it must not be declared as a <code>SHARED</code> library. For example, a Windows resource DLL or a managed C++/CLI DLL that exports no unmanaged symbols would need to be a <code>MODULE</code> library. This is because CMake expects a <code>SHARED</code> library to always have an associated import library on Windows.</p> <p>By default the library file will be created in the build tree directory corresponding to the source tree directory in which the command was invoked. See documentation of the <a class="reference internal" href="../prop_tgt/archive_output_directory#prop_tgt:ARCHIVE_OUTPUT_DIRECTORY" title="ARCHIVE_OUTPUT_DIRECTORY" id="index-0-prop_tgt:ARCHIVE_OUTPUT_DIRECTORY"><code>ARCHIVE_OUTPUT_DIRECTORY</code></a>, <a class="reference internal" href="../prop_tgt/library_output_directory#prop_tgt:LIBRARY_OUTPUT_DIRECTORY" title="LIBRARY_OUTPUT_DIRECTORY" id="index-0-prop_tgt:LIBRARY_OUTPUT_DIRECTORY"><code>LIBRARY_OUTPUT_DIRECTORY</code></a>, and <a class="reference internal" href="../prop_tgt/runtime_output_directory#prop_tgt:RUNTIME_OUTPUT_DIRECTORY" title="RUNTIME_OUTPUT_DIRECTORY" id="index-0-prop_tgt:RUNTIME_OUTPUT_DIRECTORY"><code>RUNTIME_OUTPUT_DIRECTORY</code></a> target properties to change this location. See documentation of the <a class="reference internal" href="../prop_tgt/output_name#prop_tgt:OUTPUT_NAME" title="OUTPUT_NAME" id="index-0-prop_tgt:OUTPUT_NAME"><code>OUTPUT_NAME</code></a> target property to change the <code>&lt;name&gt;</code> part of the final file name.</p> <p>If <code>EXCLUDE_FROM_ALL</code> is given the corresponding property will be set on the created target. See documentation of the <a class="reference internal" href="../prop_tgt/exclude_from_all#prop_tgt:EXCLUDE_FROM_ALL" title="EXCLUDE_FROM_ALL" id="index-0-prop_tgt:EXCLUDE_FROM_ALL"><code>EXCLUDE_FROM_ALL</code></a> target property for details.</p> <p>Source arguments to <code>add_library</code> may use “generator expressions” with the syntax <code>$&lt;...&gt;</code>. See the <a class="reference internal" href="../manual/cmake-generator-expressions.7#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-0-manual:cmake-generator-expressions(7)"><code>cmake-generator-expressions(7)</code></a> manual for available expressions. See the <a class="reference internal" href="../manual/cmake-buildsystem.7#manual:cmake-buildsystem(7)" title="cmake-buildsystem(7)" id="index-0-manual:cmake-buildsystem(7)"><code>cmake-buildsystem(7)</code></a> manual for more on defining buildsystem properties.</p> <p>See also <a class="reference internal" href="../prop_sf/header_file_only#prop_sf:HEADER_FILE_ONLY" title="HEADER_FILE_ONLY" id="index-0-prop_sf:HEADER_FILE_ONLY"><code>HEADER_FILE_ONLY</code></a> on what to do if some sources are pre-processed, and you want to have the original sources reachable from within IDE.</p>   <h2 id="object-libraries">Object Libraries</h2> <pre data-language="cmake">add_library(&lt;name&gt; OBJECT [&lt;source&gt;...])
</pre> <p>Creates an <a class="reference internal" href="../manual/cmake-buildsystem.7#object-libraries"><span class="std std-ref">Object Library</span></a>. An object library compiles source files but does not archive or link their object files into a library. Instead other targets created by <a class="reference internal" href="#command:add_library" title="add_library" id="index-0-command:add_library"><code>add_library()</code></a> or <a class="reference internal" href="add_executable#command:add_executable" title="add_executable" id="index-0-command:add_executable"><code>add_executable()</code></a> may reference the objects using an expression of the form <code>$&lt;TARGET_OBJECTS:objlib&gt;</code> as a source, where <code>objlib</code> is the object library name. For example:</p> <pre data-language="cmake">add_library(... $&lt;TARGET_OBJECTS:objlib&gt; ...)
add_executable(... $&lt;TARGET_OBJECTS:objlib&gt; ...)
</pre> <p>will include objlib’s object files in a library and an executable along with those compiled from their own sources. Object libraries may contain only sources that compile, header files, and other files that would not affect linking of a normal library (e.g. <code>.txt</code>). They may contain custom commands generating such sources, but not <code>PRE_BUILD</code>, <code>PRE_LINK</code>, or <code>POST_BUILD</code> commands. Some native build systems (such as Xcode) may not like targets that have only object files, so consider adding at least one real source file to any target that references <code>$&lt;TARGET_OBJECTS:objlib&gt;</code>.</p>   <h2 id="interface-libraries">Interface Libraries</h2> <pre data-language="cmake">add_library(&lt;name&gt; INTERFACE)
</pre> <p>Creates an <a class="reference internal" href="../manual/cmake-buildsystem.7#interface-libraries"><span class="std std-ref">Interface Library</span></a>. An <code>INTERFACE</code> library target does not compile sources and does not produce a library artifact on disk. However, it may have properties set on it and it may be installed and exported. Typically, <code>INTERFACE_*</code> properties are populated on an interface target using the commands:</p> <ul class="simple"> <li>
<a class="reference internal" href="set_property#command:set_property" title="set_property" id="index-0-command:set_property"><code>set_property()</code></a>,</li> <li>
<a class="reference internal" href="target_link_libraries#command:target_link_libraries" title="target_link_libraries" id="index-0-command:target_link_libraries"><code>target_link_libraries(INTERFACE)</code></a>,</li> <li>
<a class="reference internal" href="target_link_options#command:target_link_options" title="target_link_options" id="index-0-command:target_link_options"><code>target_link_options(INTERFACE)</code></a>,</li> <li>
<a class="reference internal" href="target_include_directories#command:target_include_directories" title="target_include_directories" id="index-0-command:target_include_directories"><code>target_include_directories(INTERFACE)</code></a>,</li> <li>
<a class="reference internal" href="target_compile_options#command:target_compile_options" title="target_compile_options" id="index-0-command:target_compile_options"><code>target_compile_options(INTERFACE)</code></a>,</li> <li>
<a class="reference internal" href="target_compile_definitions#command:target_compile_definitions" title="target_compile_definitions" id="index-0-command:target_compile_definitions"><code>target_compile_definitions(INTERFACE)</code></a>, and</li> <li>
<a class="reference internal" href="target_sources#command:target_sources" title="target_sources" id="index-1-command:target_sources"><code>target_sources(INTERFACE)</code></a>,</li> </ul> <p>and then it is used as an argument to <a class="reference internal" href="target_link_libraries#command:target_link_libraries" title="target_link_libraries" id="index-1-command:target_link_libraries"><code>target_link_libraries()</code></a> like any other target.</p> <p>An interface library created with the above signature has no source files itself and is not included as a target in the generated buildsystem.</p> <p>Since CMake 3.19, an interface library target may be created with source files:</p> <pre data-language="cmake">add_library(&lt;name&gt; INTERFACE [&lt;source&gt;...] [EXCLUDE_FROM_ALL])
</pre> <p>Source files may be listed directly in the <code>add_library</code> call or added later by calls to <a class="reference internal" href="target_sources#command:target_sources" title="target_sources" id="index-2-command:target_sources"><code>target_sources()</code></a> with the <code>PRIVATE</code> or <code>PUBLIC</code> keywords.</p> <p>If an interface library has source files (i.e. the <a class="reference internal" href="../prop_tgt/sources#prop_tgt:SOURCES" title="SOURCES" id="index-0-prop_tgt:SOURCES"><code>SOURCES</code></a> target property is set), it will appear in the generated buildsystem as a build target much like a target defined by the <a class="reference internal" href="add_custom_target#command:add_custom_target" title="add_custom_target" id="index-0-command:add_custom_target"><code>add_custom_target()</code></a> command. It does not compile any sources, but does contain build rules for custom commands created by the <a class="reference internal" href="add_custom_command#command:add_custom_command" title="add_custom_command" id="index-0-command:add_custom_command"><code>add_custom_command()</code></a> command.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>In most command signatures where the <code>INTERFACE</code> keyword appears, the items listed after it only become part of that target’s usage requirements and are not part of the target’s own settings. However, in this signature of <code>add_library</code>, the <code>INTERFACE</code> keyword refers to the library type only. Sources listed after it in the <code>add_library</code> call are <code>PRIVATE</code> to the interface library and do not appear in its <a class="reference internal" href="../prop_tgt/interface_sources#prop_tgt:INTERFACE_SOURCES" title="INTERFACE_SOURCES" id="index-0-prop_tgt:INTERFACE_SOURCES"><code>INTERFACE_SOURCES</code></a> target property.</p> </div>   <h2 id="imported-libraries">Imported Libraries</h2> <pre data-language="cmake">add_library(&lt;name&gt; &lt;type&gt; IMPORTED [GLOBAL])
</pre> <p>Creates an <a class="reference internal" href="../manual/cmake-buildsystem.7#imported-targets"><span class="std std-ref">IMPORTED library target</span></a> called <code>&lt;name&gt;</code>. No rules are generated to build it, and the <a class="reference internal" href="../prop_tgt/imported#prop_tgt:IMPORTED" title="IMPORTED" id="index-0-prop_tgt:IMPORTED"><code>IMPORTED</code></a> target property is <code>True</code>. The target name has scope in the directory in which it is created and below, but the <code>GLOBAL</code> option extends visibility. It may be referenced like any target built within the project. <code>IMPORTED</code> libraries are useful for convenient reference from commands like <a class="reference internal" href="target_link_libraries#command:target_link_libraries" title="target_link_libraries" id="index-2-command:target_link_libraries"><code>target_link_libraries()</code></a>. Details about the imported library are specified by setting properties whose names begin in <code>IMPORTED_</code> and <code>INTERFACE_</code>.</p> <p>The <code>&lt;type&gt;</code> must be one of:</p> <dl> <dt>
<code>STATIC, SHARED, MODULE, UNKNOWN</code> </dt>
<dd>
<p>References a library file located outside the project. The <a class="reference internal" href="../prop_tgt/imported_location#prop_tgt:IMPORTED_LOCATION" title="IMPORTED_LOCATION" id="index-0-prop_tgt:IMPORTED_LOCATION"><code>IMPORTED_LOCATION</code></a> target property (or its per-configuration variant <a class="reference internal" href="#" title="IMPORTED_LOCATION_&lt;CONFIG&gt;" id="index-0-prop_tgt:IMPORTED_LOCATION_&lt;CONFIG&gt;"><code>IMPORTED_LOCATION_&lt;CONFIG&gt;</code></a>) specifies the location of the main library file on disk. In the case of a <code>SHARED</code> library on Windows, the <a class="reference internal" href="../prop_tgt/imported_implib#prop_tgt:IMPORTED_IMPLIB" title="IMPORTED_IMPLIB" id="index-0-prop_tgt:IMPORTED_IMPLIB"><code>IMPORTED_IMPLIB</code></a> target property (or its per-configuration variant <a class="reference internal" href="#" title="IMPORTED_IMPLIB_&lt;CONFIG&gt;" id="index-0-prop_tgt:IMPORTED_IMPLIB_&lt;CONFIG&gt;"><code>IMPORTED_IMPLIB_&lt;CONFIG&gt;</code></a>) specifies the location of the DLL import library file (<code>.lib</code> or <code>.dll.a</code>) on disk, and the <code>IMPORTED_LOCATION</code> is the location of the <code>.dll</code> runtime library (and is optional). Additional usage requirements may be specified in <code>INTERFACE_*</code> properties.</p> <p>An <code>UNKNOWN</code> library type is typically only used in the implementation of <a class="reference internal" href="../manual/cmake-developer.7#find-modules"><span class="std std-ref">Find Modules</span></a>. It allows the path to an imported library (often found using the <a class="reference internal" href="find_library#command:find_library" title="find_library" id="index-0-command:find_library"><code>find_library()</code></a> command) to be used without having to know what type of library it is. This is especially useful on Windows where a static library and a DLL’s import library both have the same file extension.</p> </dd> <dt>
<code>OBJECT</code> </dt>
<dd>
<p>References a set of object files located outside the project. The <a class="reference internal" href="../prop_tgt/imported_objects#prop_tgt:IMPORTED_OBJECTS" title="IMPORTED_OBJECTS" id="index-0-prop_tgt:IMPORTED_OBJECTS"><code>IMPORTED_OBJECTS</code></a> target property (or its per-configuration variant <a class="reference internal" href="#" title="IMPORTED_OBJECTS_&lt;CONFIG&gt;" id="index-0-prop_tgt:IMPORTED_OBJECTS_&lt;CONFIG&gt;"><code>IMPORTED_OBJECTS_&lt;CONFIG&gt;</code></a>) specifies the locations of object files on disk. Additional usage requirements may be specified in <code>INTERFACE_*</code> properties.</p> </dd> <dt>
<code>INTERFACE</code> </dt>
<dd>
<p>Does not reference any library or object files on disk, but may specify usage requirements in <code>INTERFACE_*</code> properties.</p> </dd> </dl> <p>See documentation of the <code>IMPORTED_*</code> and <code>INTERFACE_*</code> properties for more information.</p>   <h2 id="alias-libraries">Alias Libraries</h2> <pre data-language="cmake">add_library(&lt;name&gt; ALIAS &lt;target&gt;)
</pre> <p>Creates an <a class="reference internal" href="../manual/cmake-buildsystem.7#alias-targets"><span class="std std-ref">Alias Target</span></a>, such that <code>&lt;name&gt;</code> can be used to refer to <code>&lt;target&gt;</code> in subsequent commands. The <code>&lt;name&gt;</code> does not appear in the generated buildsystem as a make target. The <code>&lt;target&gt;</code> may not be an <code>ALIAS</code>.</p> <p>An <code>ALIAS</code> to a non-<code>GLOBAL</code> <a class="reference internal" href="../manual/cmake-buildsystem.7#imported-targets"><span class="std std-ref">Imported Target</span></a> has scope in the directory in which the alias is created and below. The <a class="reference internal" href="../prop_tgt/alias_global#prop_tgt:ALIAS_GLOBAL" title="ALIAS_GLOBAL" id="index-0-prop_tgt:ALIAS_GLOBAL"><code>ALIAS_GLOBAL</code></a> target property can be used to check if the alias is global or not.</p> <p><code>ALIAS</code> targets can be used as linkable targets and as targets to read properties from. They can also be tested for existence with the regular <a class="reference internal" href="if#command:if" title="if" id="index-0-command:if"><code>if(TARGET)</code></a> subcommand. The <code>&lt;name&gt;</code> may not be used to modify properties of <code>&lt;target&gt;</code>, that is, it may not be used as the operand of <a class="reference internal" href="set_property#command:set_property" title="set_property" id="index-1-command:set_property"><code>set_property()</code></a>, <a class="reference internal" href="set_target_properties#command:set_target_properties" title="set_target_properties" id="index-0-command:set_target_properties"><code>set_target_properties()</code></a>, <a class="reference internal" href="target_link_libraries#command:target_link_libraries" title="target_link_libraries" id="index-3-command:target_link_libraries"><code>target_link_libraries()</code></a> etc. An <code>ALIAS</code> target may not be installed or exported.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2000–2020 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.19/command/add_library.html" class="_attribution-link">https://cmake.org/cmake/help/v3.19/command/add_library.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
