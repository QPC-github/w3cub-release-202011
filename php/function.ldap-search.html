
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Ldap_search - PHP - W3cubDocs</title>
  
  <meta name="description" content=" (PHP 4, PHP 5, PHP 7) ">
  <meta name="keywords" content="ldap, search, php">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/php/function.ldap-search.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/php.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/php/" class="_nav-link" title="" style="margin-left:0;">PHP</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _php">
				
				
<div class="refnamediv"> <h1 class="refname">ldap_search</h1> <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p>
<p class="refpurpose"><span class="refname">ldap_search</span> — <span class="dc-title">Search LDAP tree</span></p> </div> <div class="refsect1 description" id="refsect1-function.ldap-search-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">resource ldap_search ( resource $link_identifier , string $base_dn , string $filter [, array $attributes [, int $attrsonly [, int $sizelimit [, int $timelimit [, int $deref [, array $serverctrls ]]]]]] )</pre> <p class="para rdfs-comment"> Performs the search for a specified filter on the directory with the scope of <strong><code>LDAP_SCOPE_SUBTREE</code></strong>. This is equivalent to searching the entire directory. </p> <p class="para"> From 4.0.5 on it's also possible to do parallel searches. To do this you use an array of link identifiers, rather than a single identifier, as the first argument. If you don't want the same base DN and the same filter for all the searches, you can also use an array of base DNs and/or an array of filters. Those arrays must be of the same size as the link identifier array since the first entries of the arrays are used for one search, the second entries are used for another, and so on. When doing parallel searches an array of search result identifiers is returned, except in case of error, then the entry corresponding to the search will be <strong><code>FALSE</code></strong>. This is very much like the value normally returned, except that a result identifier is always returned when a search was made. There are some rare cases where the normal search returns <strong><code>FALSE</code></strong> while the parallel search returns an identifier. </p> </div> <div class="refsect1 parameters" id="refsect1-function.ldap-search-parameters"> <h3 class="title">Parameters</h3> 
<dl> <dt> <code class="parameter">link_identifier</code>
</dt> <dd> <p class="para"> An LDAP link identifier, returned by <span class="function"><a href="function.ldap-connect" class="function">ldap_connect()</a></span>. </p> </dd> <dt> <code class="parameter">base_dn</code>
</dt> <dd> <p class="para"> The base DN for the directory. </p> </dd> <dt> <code class="parameter">filter</code>
</dt> <dd> <p class="para"> The search filter can be simple or advanced, using boolean operators in the format described in the LDAP documentation (see the <a href="https://wiki.mozilla.org/Mozilla_LDAP_SDK_Programmer%27s_Guide/Searching_the_Directory_With_LDAP_C_SDK" class="link external">» Netscape Directory SDK</a> or <a href="http://www.faqs.org/rfcs/rfc4515" class="link external">» RFC4515</a> for full information on filters). </p> </dd> <dt> <code class="parameter">attributes</code>
</dt> <dd> <p class="para"> An array of the required attributes, e.g. <em>array("mail", "sn", "cn")</em>. Note that the "dn" is always returned irrespective of which attributes types are requested. </p> <p class="para"> Using this parameter is much more efficient than the default action (which is to return all attributes and their associated values). The use of this parameter should therefore be considered good practice. </p> </dd> <dt> <code class="parameter">attrsonly</code>
</dt> <dd> <p class="para"> Should be set to 1 if only attribute types are wanted. If set to 0 both attributes types and attribute values are fetched which is the default behaviour. </p> </dd> <dt> <code class="parameter">sizelimit</code>
</dt> <dd> <p class="para"> Enables you to limit the count of entries fetched. Setting this to 0 means no limit. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> This parameter can NOT override server-side preset sizelimit. You can set it lower though. </p> <p class="para"> Some directory server hosts will be configured to return no more than a preset number of entries. If this occurs, the server will indicate that it has only returned a partial results set. This also occurs if you use this parameter to limit the count of fetched entries. </p> </blockquote> </dd> <dt> <code class="parameter">timelimit</code>
</dt> <dd> <p class="para"> Sets the number of seconds how long is spend on the search. Setting this to 0 means no limit. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> This parameter can NOT override server-side preset timelimit. You can set it lower though. </p> </blockquote> </dd> <dt> <code class="parameter">deref</code>
</dt> <dd> <p class="para"> Specifies how aliases should be handled during the search. It can be one of the following: </p>
<ul class="itemizedlist"> <li class="listitem"> <span class="simpara"> <strong><code>LDAP_DEREF_NEVER</code></strong> - (default) aliases are never dereferenced. </span> </li> <li class="listitem"> <span class="simpara"> <strong><code>LDAP_DEREF_SEARCHING</code></strong> - aliases should be dereferenced during the search but not when locating the base object of the search. </span> </li> <li class="listitem"> <span class="simpara"> <strong><code>LDAP_DEREF_FINDING</code></strong> - aliases should be dereferenced when locating the base object but not during the search. </span> </li> <li class="listitem"> <span class="simpara"> <strong><code>LDAP_DEREF_ALWAYS</code></strong> - aliases should be dereferenced always. </span> </li> </ul> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-function.ldap-search-returnvalues"> <h3 class="title">Return Values</h3> <p class="para"> Returns a search result identifier or <strong><code>FALSE</code></strong> on error. </p> </div> <div class="refsect1 examples" id="refsect1-function.ldap-search-examples"> <h3 class="title">Examples</h3> <p class="para"> The example below retrieves the organizational unit, surname, given name and email address for all people in "My Company" where the surname or given name contains the substring <var class="varname"><var class="varname">$person</var></var>. This example uses a boolean filter to tell the server to look for information in more than one attribute. </p>
<div class="example" id="ldap-count-entries.example.basic"> <p><strong>Example #1 LDAP search</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
// $ds is a valid link identifier for a directory server

// $person is all or part of a person's name, eg "Jo"

$dn = "o=My Company, c=US";
$filter="(|(sn=$person*)(givenname=$person*))";
$justthese = array("ou", "sn", "givenname", "mail");

$sr=ldap_search($ds, $dn, $filter, $justthese);

$info = ldap_get_entries($ds, $sr);

echo $info["count"]." entries returned\n";
?&gt;</pre> </div> </div> </div> <div class="manualnavbar" style="text-align: center;"> <div class="prev" style="text-align: left; float: left;"><a href="function.ldap-sasl-bind">← ldap_sasl_bind</a></div> <div class="next" style="text-align: right; float: right;"><a href="function.ldap-set-option">ldap_set_option →</a></div>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 1997–2018 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://secure.php.net/manual/en/function.ldap-search.php" class="_attribution-link">https://secure.php.net/manual/en/function.ldap-search.php</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
