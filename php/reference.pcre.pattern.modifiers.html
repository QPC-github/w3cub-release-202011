
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Pattern Modifiers - PHP - W3cubDocs</title>
  
  <meta name="description" content="The current possible PCRE modifiers are listed below. The names in parentheses refer to internal PCRE names for these modifiers. Spaces and newlines &hellip;">
  <meta name="keywords" content="pattern, modifiers, php">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/php/reference.pcre.pattern.modifiers.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/php.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/php/" class="_nav-link" title="" style="margin-left:0;">PHP</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _php">
				
				
<h1>Pattern Modifiers</h1> <p class="para"> The current possible PCRE modifiers are listed below. The names in parentheses refer to internal PCRE names for these modifiers. Spaces and newlines are ignored in modifiers, other characters cause error. </p> 
<blockquote class="blockquote"> <dl> <dt> <em class="emphasis">i</em> (<em>PCRE_CASELESS</em>)</dt> <dd> <span class="simpara"> If this modifier is set, letters in the pattern match both upper and lower case letters. </span> </dd> <dt> <em class="emphasis">m</em> (<em>PCRE_MULTILINE</em>)</dt> <dd> <span class="simpara"> By default, PCRE treats the subject string as consisting of a single "line" of characters (even if it actually contains several newlines). The "start of line" metacharacter (^) matches only at the start of the string, while the "end of line" metacharacter ($) matches only at the end of the string, or before a terminating newline (unless <em class="emphasis">D</em> modifier is set). This is the same as Perl. </span> <span class="simpara"> When this modifier is set, the "start of line" and "end of line" constructs match immediately following or immediately before any newline in the subject string, respectively, as well as at the very start and end. This is equivalent to Perl's /m modifier. If there are no "\n" characters in a subject string, or no occurrences of ^ or $ in a pattern, setting this modifier has no effect. </span> </dd> <dt> <em class="emphasis">s</em> (<em>PCRE_DOTALL</em>)</dt> <dd> <span class="simpara"> If this modifier is set, a dot metacharacter in the pattern matches all characters, including newlines. Without it, newlines are excluded. This modifier is equivalent to Perl's /s modifier. A negative class such as [^a] always matches a newline character, independent of the setting of this modifier. </span> </dd> <dt> <em class="emphasis">x</em> (<em>PCRE_EXTENDED</em>)</dt> <dd> <span class="simpara"> If this modifier is set, whitespace data characters in the pattern are totally ignored except when escaped or inside a character class, and characters between an unescaped # outside a character class and the next newline character, inclusive, are also ignored. This is equivalent to Perl's /x modifier, and makes it possible to include commentary inside complicated patterns. Note, however, that this applies only to data characters. Whitespace characters may never appear within special character sequences in a pattern, for example within the sequence (?( which introduces a conditional subpattern. </span> </dd> <dt id="reference.pcre.pattern.modifiers.eval">
<em class="emphasis">e</em> (<em>PREG_REPLACE_EVAL</em>)</dt> <dd> <div class="warning">
<strong class="warning">Warning</strong><p class="simpara">This feature was <em class="emphasis">DEPRECATED</em> in PHP 5.5.0, and <em class="emphasis">REMOVED</em> as of PHP 7.0.0.</p>
</div> <span class="simpara"> If this deprecated modifier is set, <span class="function"><a href="function.preg-replace" class="function">preg_replace()</a></span> does normal substitution of backreferences in the replacement string, evaluates it as PHP code, and uses the result for replacing the search string. Single quotes, double quotes, backslashes (<em>\</em>) and NULL chars will be escaped by backslashes in substituted backreferences. </span> <div class="caution">
<strong class="caution">Caution</strong> <p class="para"> The <span class="function"><a href="function.addslashes" class="function">addslashes()</a></span> function is run on each matched backreference before the substitution takes place. As such, when the backreference is used as a quoted string, escaped characters will be converted to literals. However, characters which are escaped, which would normally not be converted, will retain their slashes. This makes use of this modifier very complicated. </p> </div> <div class="caution">
<strong class="caution">Caution</strong> <p class="para"> Make sure that <code class="parameter">replacement</code> constitutes a valid PHP code string, otherwise PHP will complain about a parse error at the line containing <span class="function"><a href="function.preg-replace" class="function">preg_replace()</a></span>. </p> </div> <div class="caution">
<strong class="caution">Caution</strong> <p class="para"> Use of this modifier is <em class="emphasis">discouraged</em>, as it can easily introduce security vulnerabilites: </p> <div class="informalexample"> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$html = $_POST['html'];

// uppercase headings
$html = preg_replace(
    '(&lt;h([1-6])&gt;(.*?)&lt;/h\1&gt;)e',
    '"&lt;h$1&gt;" . strtoupper("$2") . "&lt;/h$1&gt;"',
    $html
);</pre> </div> </div> <p class="para"> The above example code can be easily exploited by passing in a string such as <em>&lt;h1&gt;{${eval($_GET[php_code])}}&lt;/h1&gt;</em>. This gives the attacker the ability to execute arbitrary PHP code and as such gives them nearly complete access to your server. </p> <p class="para"> To prevent this kind of remote code execution vulnerability the <span class="function"><a href="function.preg-replace-callback" class="function">preg_replace_callback()</a></span> function should be used instead: </p> <div class="informalexample"> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$html = $_POST['html'];

// uppercase headings
$html = preg_replace_callback(
    '(&lt;h([1-6])&gt;(.*?)&lt;/h\1&gt;)',
    function ($m) {
        return "&lt;h$m[1]&gt;" . strtoupper($m[2]) . "&lt;/h$m[1]&gt;";
    },
    $html
);</pre> </div> </div> </div> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> Only <span class="function"><a href="function.preg-replace" class="function">preg_replace()</a></span> uses this modifier; it is ignored by other PCRE functions. </p> </blockquote> </dd> <dt> <em class="emphasis">A</em> (<em>PCRE_ANCHORED</em>)</dt> <dd> <span class="simpara"> If this modifier is set, the pattern is forced to be "anchored", that is, it is constrained to match only at the start of the string which is being searched (the "subject string"). This effect can also be achieved by appropriate constructs in the pattern itself, which is the only way to do it in Perl. </span> </dd> <dt> <em class="emphasis">D</em> (<em>PCRE_DOLLAR_ENDONLY</em>)</dt> <dd> <span class="simpara"> If this modifier is set, a dollar metacharacter in the pattern matches only at the end of the subject string. Without this modifier, a dollar also matches immediately before the final character if it is a newline (but not before any other newlines). This modifier is ignored if <em class="emphasis">m</em> modifier is set. There is no equivalent to this modifier in Perl. </span> </dd> <dt> <em class="emphasis">S</em>
</dt> <dd> <span class="simpara"> When a pattern is going to be used several times, it is worth spending more time analyzing it in order to speed up the time taken for matching. If this modifier is set, then this extra analysis is performed. At present, studying a pattern is useful only for non-anchored patterns that do not have a single fixed starting character. </span> </dd> <dt> <em class="emphasis">U</em> (<em>PCRE_UNGREEDY</em>)</dt> <dd> <span class="simpara"> This modifier inverts the "greediness" of the quantifiers so that they are not greedy by default, but become greedy if followed by <em>?</em>. It is not compatible with Perl. It can also be set by a (<em>?U</em>) <a href="regexp.reference.internal-options" class="link">modifier setting within the pattern</a> or by a question mark behind a quantifier (e.g. <em>.*?</em>). </span> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> It is usually not possible to match more than <a href="https://secure.php.net/manual/en/pcre.configuration.php#ini.pcre.backtrack-limit" class="link">pcre.backtrack_limit</a> characters in ungreedy mode. </p> </blockquote> </dd> <dt> <em class="emphasis">X</em> (<em>PCRE_EXTRA</em>)</dt> <dd> <span class="simpara"> This modifier turns on additional functionality of PCRE that is incompatible with Perl. Any backslash in a pattern that is followed by a letter that has no special meaning causes an error, thus reserving these combinations for future expansion. By default, as in Perl, a backslash followed by a letter with no special meaning is treated as a literal. There are at present no other features controlled by this modifier. </span> </dd> <dt> <em class="emphasis">J</em> (<em>PCRE_INFO_JCHANGED</em>)</dt> <dd> <span class="simpara"> The (?J) internal option setting changes the local <em>PCRE_DUPNAMES</em> option. Allow duplicate names for subpatterns. As of PHP 7.2.0 <em>J</em> is supported as modifier as well. </span> </dd> <dt> <em class="emphasis">u</em> (<em>PCRE_UTF8</em>)</dt> <dd> <span class="simpara"> This modifier turns on additional functionality of PCRE that is incompatible with Perl. Pattern and subject strings are treated as UTF-8. An invalid subject will cause the preg_* function to match nothing; an invalid pattern will trigger an error of level E_WARNING. Five and six octet UTF-8 sequences are regarded as invalid since PHP 5.3.4 (resp. PCRE 7.3 2007-08-28); formerly those have been regarded as valid UTF-8. </span> </dd> </dl> </blockquote> <div class="manualnavbar" style="text-align: center;"> <div class="prev" style="text-align: left; float: left;"><a href="regexp.reference.performance">← Performance</a></div> <div class="next" style="text-align: right; float: right;"><a href="reference.pcre.pattern.differences">Differences From Perl →</a></div>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 1997–2018 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://secure.php.net/manual/en/reference.pcre.pattern.modifiers.php" class="_attribution-link">https://secure.php.net/manual/en/reference.pcre.pattern.modifiers.php</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
