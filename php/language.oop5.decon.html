
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>__construct() - PHP - W3cubDocs</title>
  
  <meta name="description" content="PHP allows developers to declare constructor methods for classes. Classes which have a constructor method call this method on each newly-created &hellip;">
  <meta name="keywords" content="construct, php">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/php/language.oop5.decon.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/php.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/php/" class="_nav-link" title="" style="margin-left:0;">PHP</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _php">
				
				
<div id="layout"> <div id="layout-content"><div id="language.oop5.decon" class="sect1"> <h2 class="title">Constructors and Destructors</h2> <div class="sect2" id="language.oop5.decon.constructor"> <h3 class="title">Constructor</h3> <pre class="methodsynopsis dc-description" id="object.construct" data-language="php">__construct ( mixed ...$values = "" ) : void</pre> <p class="para"> PHP allows developers to declare constructor methods for classes. Classes which have a constructor method call this method on each newly-created object, so it is suitable for any initialization that the object may need before it is used. </p> <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara"> Parent constructors are not called implicitly if the child class defines a constructor. In order to run a parent constructor, a call to <span class="function"><strong>parent::__construct()</strong></span> within the child constructor is required. If the child does not define a constructor then it may be inherited from the parent class just like a normal class method (if it was not declared as private). </span> </p></blockquote> <div class="example" id="language.oop5.basic.class.class.object"> <p><strong>Example #1 Constructors in inheritance</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
class BaseClass {
    function __construct() {
        print "In BaseClass constructor\n";
    }
}

class SubClass extends BaseClass {
    function __construct() {
        parent::__construct();
        print "In SubClass constructor\n";
    }
}

class OtherSubClass extends BaseClass {
    // inherits BaseClass's constructor
}

// In BaseClass constructor
$obj = new BaseClass();

// In BaseClass constructor
// In SubClass constructor
$obj = new SubClass();

// In BaseClass constructor
$obj = new OtherSubClass();
?&gt;</pre> </div> </div> <p class="para"> Unlike with other methods, PHP will not generate an <strong><code>E_STRICT</code></strong> level error message when <a href="language.oop5.decon#object.construct" class="link">__construct()</a> is overridden with different parameters than the parent <a href="language.oop5.decon#object.construct" class="link">__construct()</a> method has. </p> <p class="para"> Constructors are ordinary methods which are called during the instantiation of their corresponding object. As such, they may define an arbitrary number of arguments, which may be required, may have a type, and may have a default value. Constructor arguments are called by placing the arguments in parentheses after the class name. </p> <div class="example" id="example-216"> <p><strong>Example #2 Using constructor arguments</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
class Point {
    protected int $x;
    protected int $y;

    public function __construct(int $x, int $y = 0) {
        $this-&gt;x = $x;
        $this-&gt;y = $y;
    }
}

// Pass both parameters.
$p1 = new Point(4, 5);
// Pass only the required parameter. $y will take its default value of 0.
$p2 = new Point(4);
// With named parameters (as of PHP 8.0):
$p3 = new Point(y: 5, x: 4);
?&gt;</pre> </div> </div> <p class="para"> If a class has no constructor, or the constructor has no required arguments, the parentheses may be omitted. </p> <div class="sect3"> <h4 class="title">Old-style constructors</h4> <p class="para"> Prior to PHP 8.0.0, classes in the global namespace will interpret a method named the same as the class as an old-style constructor. That syntax is deprecated, and will result in an <strong><code>E_DEPRECATED</code></strong> error but still call that function as a constructor. If both <a href="language.oop5.decon#object.construct" class="link">__construct()</a> and a same-name method are defined, <a href="language.oop5.decon#object.construct" class="link">__construct()</a> will be called. </p> <p class="para"> In namespaced classes, or any class as of PHP 8.0.0, a method named the same as the class never has any special meaning. </p> <p class="para">Always use <a href="language.oop5.decon#object.construct" class="link">__construct()</a> in new code. </p> </div> <div class="sect3" id="language.oop5.decon.constructor.promotion"> <h4 class="title">Constructor Promotion</h4> <p class="para"> As of PHP 8.0.0, constructor parameters may also be promoted to correspond to an object property. It is very common for constructor parameters to be assigned to a property in the constructor but otherwise not operated upon. Constructor promotion provides a short-hand for that use case. The example above could be rewritten as the following. </p> <div class="example" id="example-217"> <p><strong>Example #3 Using constructor property promotion</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
class Point {
    public function __construct(protected int $x, protected int $y = 0) {
    }
}</pre> </div> </div> <p class="para"> When a constructor argument includes a visibility modifier, PHP will interpret it as both an object property and a constructor argument, and assign the argument value to the property. The constructor body may then be empty or may contain other statements. Any additional statements will be executed after the argument values have been assigned to the corresponding properties. </p> <p class="para"> Not all arguments need to be promoted. It is possible to mix and match promoted and not-promoted arguments, in any order. Promoted arguments have no impact on code calling the constructor. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> Object properties may not be typed <span class="type"><a href="language.types.callable" class="type callable">callable</a></span> due to engine ambiguity that would introduce. Promoted arguments, therefore, may not be typed <span class="type"><a href="language.types.callable" class="type callable">callable</a></span> either. Any other <a href="language.types.declarations" class="link">type declaration</a> is permitted, however. </p> </blockquote> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> Attributes placed on a promoted constructor argument will be replicated to both the property and argument. </p> </blockquote> </div> <div class="sect3" id="language.oop5.decon.constructor.static"> <h4 class="title">Static creation methods</h4> <p class="para"> PHP only supports a single constructor per class. In some cases, however, it may be desirable to allow an object to be constructed in different ways with different inputs. The recommended way to do so is by using static methods as constructor wrappers. </p> <div class="example" id="example-218"> <p><strong>Example #4 Using static creation methods</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
class Product {

    private ?int $id;
    private ?string $name;

    private function __construct(?int $id = null, ?string $name = null) {
        $this-&gt;id = $id;
        $this-&gt;name = $name;
    }

    public static function fromBasicData(int $id, string $name): static {
        $new = new static($id, $name);
        return $new;
    }

    public static function fromJson(string $json): static {
        $data = json_decode($json);
        return new static($data['id'], $data['name']);
    }

    public static function fromXml(string $xml): static {
        // Put your own logic here.
        $data = convert_xml_to_array($xml);
        $new = new static();
        $new-&gt;id = $data['id'];
        $new-&gt;name = $data['name'];
        return $new;
    }
}

$p1 = Product::fromBasicData(5, 'Widget');
$p2 = Product::fromJson($some_json_string);
$p3 = Product::fromXml($some_xml_string);</pre> </div> </div> <p class="para"> The constructor may be made private or protected to prevent it from being called externally. If so, only a static method will be able to instantiate the class. Because they are in the same class definition they have access to private methods, even if not of the same object instance. The private constructor is optional and may or may not make sense depending on the use case.. </p> <p class="para"> The three public static methods then demonstrate different ways of instantiating the object. </p> <ul class="simplelist"> <li class="member">
<code class="code">fromBasicData()</code> takes the exact parameters that are needed, then creates the object by calling the constructor and returning the result.</li> <li class="member">
<code class="code">fromJson()</code> accepts a JSON string and does some pre-processing on it itself to convert it into the format desired by the constructor. It then returns the new object.</li> <li class="member">
<code class="code">fromXml()</code> accepts an XML string, preprocesses it, and then creates a bare object. The constructor is still called, but as all of the parameters are optional the method skips them. It then assigns values to the object properties directly before returning the result.</li> </ul> <p class="para"> In all three cases, the <code class="code">static</code> keyword is translated into the name of the class the code is in. In this case, <code class="code">Product</code>. </p> </div> </div> <div class="sect2" id="language.oop5.decon.destructor"> <h3 class="title">Destructor</h3> <pre class="methodsynopsis dc-description" id="object.destruct" data-language="php">__destruct ( ) : void</pre> <p class="para"> PHP 5 introduces a destructor concept similar to that of other object-oriented languages, such as C++. The destructor method will be called as soon as there are no other references to a particular object, or in any order during the shutdown sequence. </p> <div class="example" id="example-219"> <p><strong>Example #5 Destructor Example</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

class MyDestructableClass 
{
    function __construct() {
        print "In constructor\n";
    }

    function __destruct() {
        print "Destroying " . __CLASS__ . "\n";
    }
}

$obj = new MyDestructableClass();</pre> </div> </div> <p class="para"> Like constructors, parent destructors will not be called implicitly by the engine. In order to run a parent destructor, one would have to explicitly call <span class="function"><strong>parent::__destruct()</strong></span> in the destructor body. Also like constructors, a child class may inherit the parent's destructor if it does not implement one itself. </p> <p class="para"> The destructor will be called even if script execution is stopped using <span class="function"><a href="function.exit" class="function">exit()</a></span>. Calling <span class="function"><a href="function.exit" class="function">exit()</a></span> in a destructor will prevent the remaining shutdown routines from executing. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> Destructors called during the script shutdown have HTTP headers already sent. The working directory in the script shutdown phase can be different with some SAPIs (e.g. Apache). </p> </blockquote> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> Attempting to throw an exception from a destructor (called in the time of script termination) causes a fatal error. </p> </blockquote> </div> </div></div>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 1997–2020 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/language.oop5.decon.php" class="_attribution-link">https://www.php.net/manual/en/language.oop5.decon.php</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
