
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Magic Methods - PHP - W3cubDocs</title>
  
  <meta name="description" content="The function names __construct(), __destruct(), __call(), __callStatic(), __get(), __set(), __isset(), __unset(), __sleep(), __wakeup(), __toString &hellip;">
  <meta name="keywords" content="magic, methods, php">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/php/language.oop5.magic.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/php.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/php/" class="_nav-link" title="" style="margin-left:0;">PHP</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _php">
				
				
<h1 class="title">Magic Methods</h1> <p class="para"> The function names <a href="language.oop5.decon#object.construct" class="link">__construct()</a>, <a href="language.oop5.decon#object.destruct" class="link">__destruct()</a>, <a href="language.oop5.overloading#object.call" class="link">__call()</a>, <a href="language.oop5.overloading#object.callstatic" class="link">__callStatic()</a>, <a href="language.oop5.overloading#object.get" class="link">__get()</a>, <a href="language.oop5.overloading#object.set" class="link">__set()</a>, <a href="language.oop5.overloading#object.isset" class="link">__isset()</a>, <a href="language.oop5.overloading#object.unset" class="link">__unset()</a>, <a href="language.oop5.magic#object.sleep" class="link">__sleep()</a>, <a href="language.oop5.magic#object.wakeup" class="link">__wakeup()</a>, <a href="language.oop5.magic#object.tostring" class="link">__toString()</a>, <a href="language.oop5.magic#object.invoke" class="link">__invoke()</a>, <a href="language.oop5.magic#object.set-state" class="link">__set_state()</a>, <a href="language.oop5.cloning#object.clone" class="link">__clone()</a> and <a href="language.oop5.magic#object.debuginfo" class="link">__debugInfo()</a> are magical in PHP classes. You cannot have functions with these names in any of your classes unless you want the magic functionality associated with them. </p> <div class="caution">
<strong class="caution">Caution</strong> <p class="simpara"> PHP reserves all function names starting with __ as magical. It is recommended that you do not use function names with __ in PHP unless you want some documented magic functionality. </p> </div> <div class="sect2" id="language.oop5.magic.sleep"> <h3 class="title"> <a href="language.oop5.magic#object.sleep" class="link">__sleep()</a> and <a href="language.oop5.magic#object.wakeup" class="link">__wakeup()</a> </h3> <pre class="methodsynopsis dc-description" id="object.sleep" data-language="php">public array __sleep ( void )</pre> <pre class="methodsynopsis dc-description" id="object.wakeup" data-language="php">void __wakeup ( void )</pre> <p class="para"> <span class="function"><a href="function.serialize" class="function">serialize()</a></span> checks if your class has a function with the magic name <a href="language.oop5.magic#object.sleep" class="link">__sleep()</a>. If so, that function is executed prior to any serialization. It can clean up the object and is supposed to return an array with the names of all variables of that object that should be serialized. If the method doesn't return anything then <strong><code>NULL</code></strong> is serialized and <strong><code>E_NOTICE</code></strong> is issued. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> It is not possible for <a href="language.oop5.magic#object.sleep" class="link">__sleep()</a> to return names of private properties in parent classes. Doing this will result in an <strong><code>E_NOTICE</code></strong> level error. Instead you may use the <a href="class.serializable" class="classname">Serializable</a> interface. </p> </blockquote> <p class="para"> The intended use of <a href="language.oop5.magic#object.sleep" class="link">__sleep()</a> is to commit pending data or perform similar cleanup tasks. Also, the function is useful if you have very large objects which do not need to be saved completely. </p> <p class="para"> Conversely, <span class="function"><a href="function.unserialize" class="function">unserialize()</a></span> checks for the presence of a function with the magic name <a href="language.oop5.magic#object.wakeup" class="link">__wakeup()</a>. If present, this function can reconstruct any resources that the object may have. </p> <p class="para"> The intended use of <a href="language.oop5.magic#object.wakeup" class="link">__wakeup()</a> is to reestablish any database connections that may have been lost during serialization and perform other reinitialization tasks. </p> <div class="example" id="language.oop5.traits.precedence.examples.ex2"> <p><strong>Example #1 Sleep and wakeup</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
class Connection
{
    protected $link;
    private $dsn, $username, $password;
    
    public function __construct($dsn, $username, $password)
    {
        $this-&gt;dsn = $dsn;
        $this-&gt;username = $username;
        $this-&gt;password = $password;
        $this-&gt;connect();
    }
    
    private function connect()
    {
        $this-&gt;link = new PDO($this-&gt;dsn, $this-&gt;username, $this-&gt;password);
    }
    
    public function __sleep()
    {
        return array('dsn', 'username', 'password');
    }
    
    public function __wakeup()
    {
        $this-&gt;connect();
    }
}?&gt;</pre> </div> </div> </div> <div class="sect2" id="language.oop5.magic.tostring"> <h3 class="title"><a href="language.oop5.magic#object.tostring" class="link">__toString()</a></h3> <pre class="methodsynopsis dc-description" id="object.tostring" data-language="php">public string __toString ( void )</pre> <p class="para"> The <a href="language.oop5.magic#object.tostring" class="link">__toString()</a> method allows a class to decide how it will react when it is treated like a string. For example, what <em>echo $obj;</em> will print. This method must return a string, as otherwise a fatal <strong><code>E_RECOVERABLE_ERROR</code></strong> level error is emitted. </p> <div class="warning">
<strong class="warning">Warning</strong> <p class="simpara"> You cannot throw an exception from within a <a href="language.oop5.magic#object.tostring" class="link">__toString()</a> method. Doing so will result in a fatal error. </p> </div> <div class="example" id="language.oop5.traits.multiple.ex1"> <p><strong>Example #2 Simple example</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
// Declare a simple class
class TestClass
{
    public $foo;

    public function __construct($foo)
    {
        $this-&gt;foo = $foo;
    }

    public function __toString()
    {
        return $this-&gt;foo;
    }
}

$class = new TestClass('Hello');
echo $class;
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
Hello
</pre></div> </div> </div> <p class="para"> It is worth noting that before PHP 5.2.0 the <a href="language.oop5.magic#object.tostring" class="link">__toString()</a> method was only called when it was directly combined with <span class="function"><a href="function.echo" class="function">echo</a></span> or <span class="function"><a href="function.print" class="function">print</a></span>. Since PHP 5.2.0, it is called in any string context (e.g. in <span class="function"><a href="function.printf" class="function">printf()</a></span> with <em>%s</em> modifier) but not in other types contexts (e.g. with <em>%d</em> modifier). Since PHP 5.2.0, converting objects without <a href="language.oop5.magic#object.tostring" class="link">__toString()</a> method to string would cause <strong><code>E_RECOVERABLE_ERROR</code></strong>. </p> </div> <div class="sect2" id="language.oop5.magic.invoke"> <h3 class="title"><a href="language.oop5.magic#object.invoke" class="link">__invoke()</a></h3> <pre class="methodsynopsis dc-description" id="object.invoke" data-language="php">mixed __invoke ([  $... ] )</pre> <p class="para"> The <a href="language.oop5.magic#object.invoke" class="link">__invoke()</a> method is called when a script tries to call an object as a function. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> This feature is available since PHP 5.3.0. </p> </blockquote> <div class="example" id="language.oop5.traits.conflict.ex1"> <p><strong>Example #3 Using <a href="language.oop5.magic#object.invoke" class="link">__invoke()</a></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
class CallableClass
{
    public function __invoke($x)
    {
        var_dump($x);
    }
}
$obj = new CallableClass;
$obj(5);
var_dump(is_callable($obj));
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
int(5)
bool(true)
</pre></div> </div> </div> </div> <div class="sect2" id="language.oop5.magic.set-state"> <h3 class="title"><a href="language.oop5.magic#object.set-state" class="link">__set_state()</a></h3> <pre class="methodsynopsis dc-description" id="object.set-state" data-language="php">static object __set_state ( array $properties )</pre> <p class="para"> This <a href="language.oop5.static" class="link">static</a> method is called for classes exported by <span class="function"><a href="function.var-export" class="function">var_export()</a></span> since PHP 5.1.0. </p> <p class="para"> The only parameter of this method is an array containing exported properties in the form <em>array('property' =&gt; value, ...)</em>. </p> <div class="example" id="language.oop5.traits.visibility.ex1"> <p><strong>Example #4 Using <a href="language.oop5.magic#object.set-state" class="link">__set_state()</a> (since PHP 5.1.0)</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

class A
{
    public $var1;
    public $var2;

    public static function __set_state($an_array) // As of PHP 5.1.0
    {
        $obj = new A;
        $obj-&gt;var1 = $an_array['var1'];
        $obj-&gt;var2 = $an_array['var2'];
        return $obj;
    }
}

$a = new A;
$a-&gt;var1 = 5;
$a-&gt;var2 = 'foo';

eval('$b = ' . var_export($a, true) . ';'); // $b = A::__set_state(array(
                                            //    'var1' =&gt; 5,
                                            //    'var2' =&gt; 'foo',
                                            // ));
var_dump($b);

?&gt;</pre> </div> <div class="example-contents"><p>The above example will output:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
object(A)#2 (2) {
  ["var1"]=&gt;
  int(5)
  ["var2"]=&gt;
  string(3) "foo"
}
</pre></div> </div> </div> <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara"> When exporting an object, <span class="function"><a href="function.var-export" class="function">var_export()</a></span> does not check whether <a href="language.oop5.magic#object.set-state" class="link">__set_state()</a> is implemented by the object's class, so re-importing such objects will fail, if __set_state() is not implemented. Particularly, this affects some internal classes. </span> <span class="simpara"> It is the responsibility of the programmer to verify that only objects will be re-imported, whose class implements __set_state(). </span> </p></blockquote> </div> <div class="sect2" id="language.oop5.magic.debuginfo"> <h3 class="title"><a href="language.oop5.magic#object.debuginfo" class="link">__debugInfo()</a></h3> <pre class="methodsynopsis dc-description" id="object.debuginfo" data-language="php">array __debugInfo ( void )</pre> <p class="para"> This method is called by <span class="function"><a href="function.var-dump" class="function">var_dump()</a></span> when dumping an object to get the properties that should be shown. If the method isn't defined on an object, then all public, protected and private properties will be shown. </p> <p class="para"> This feature was added in PHP 5.6.0. </p> <div class="example" id="language.oop5.traits.composition.ex1"> <p><strong>Example #5 Using <a href="language.oop5.magic#object.debuginfo" class="link">__debugInfo()</a></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
class C {
    private $prop;

    public function __construct($val) {
        $this-&gt;prop = $val;
    }

    public function __debugInfo() {
        return [
            'propSquared' =&gt; $this-&gt;prop ** 2,
        ];
    }
}

var_dump(new C(42));
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
object(C)#1 (1) {
  ["propSquared"]=&gt;
  int(1764)
}
</pre></div> </div> </div> </div> <div class="manualnavbar" style="text-align: center;"> <div class="prev" style="text-align: left; float: left;"><a href="language.oop5.iterations">← Object Iteration</a></div> <div class="next" style="text-align: right; float: right;"><a href="language.oop5.final">Final Keyword →</a></div>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 1997–2018 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://secure.php.net/manual/en/language.oop5.magic.php" class="_attribution-link">https://secure.php.net/manual/en/language.oop5.magic.php</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
