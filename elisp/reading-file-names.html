
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Reading File Names - Elisp - W3cubDocs</title>
  
  <meta name="description" content="The high-level completion functions read-file-name, read-directory-name, and read-shell-command are designed to read file names, directory names, &hellip;">
  <meta name="keywords" content="reading, file, names, elisp">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/elisp/reading-file-names.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/elisp.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/elisp/" class="_nav-link" title="" style="margin-left:0;">Elisp</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _elisp">
				
				
<h4 class="subsection">Reading File Names</h4>   <p>The high-level completion functions <code>read-file-name</code>, <code>read-directory-name</code>, and <code>read-shell-command</code> are designed to read file names, directory names, and shell commands, respectively. They provide special features, including automatic insertion of the default directory. </p> <dl> <dt id="read-file-name">
Function: <strong>read-file-name</strong> <em>prompt &amp;optional directory default require-match initial predicate</em>
</dt> <dd>
<p>This function reads a file name, prompting with <var>prompt</var> and providing completion. </p> <p>As an exception, this function reads a file name using a graphical file dialog instead of the minibuffer, if all of the following are true: </p> <ol> <li> It is invoked via a mouse command. </li>
<li> The selected frame is on a graphical display supporting such dialogs. </li>
<li> The variable <code>use-dialog-box</code> is non-<code>nil</code>. See <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Dialog-Boxes.html#Dialog-Boxes">Dialog Boxes</a> in <cite>The GNU Emacs Manual</cite>. </li>
<li> The <var>directory</var> argument, described below, does not specify a remote file. See <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Remote-Files.html#Remote-Files">Remote Files</a> in <cite>The GNU Emacs Manual</cite>. </li>
</ol> <p>The exact behavior when using a graphical file dialog is platform-dependent. Here, we simply document the behavior when using the minibuffer. </p> <p><code>read-file-name</code> does not automatically expand the returned file name. You can call <code>expand-file-name</code> yourself if an absolute file name is required. </p> <p>The optional argument <var>require-match</var> has the same meaning as in <code>completing-read</code>. See <a href="minibuffer-completion#Minibuffer-Completion">Minibuffer Completion</a>. </p> <p>The argument <var>directory</var> specifies the directory to use for completing relative file names. It should be an absolute directory name. If the variable <code>insert-default-directory</code> is non-<code>nil</code>, <var>directory</var> is also inserted in the minibuffer as initial input. It defaults to the current buffer’s value of <code>default-directory</code>. </p> <p>If you specify <var>initial</var>, that is an initial file name to insert in the buffer (after <var>directory</var>, if that is inserted). In this case, point goes at the beginning of <var>initial</var>. The default for <var>initial</var> is <code>nil</code>—don’t insert any file name. To see what <var>initial</var> does, try the command <kbd>C-x C-v</kbd> in a buffer visiting a file. <strong>Please note:</strong> we recommend using <var>default</var> rather than <var>initial</var> in most cases. </p> <p>If <var>default</var> is non-<code>nil</code>, then the function returns <var>default</var> if the user exits the minibuffer with the same non-empty contents that <code>read-file-name</code> inserted initially. The initial minibuffer contents are always non-empty if <code>insert-default-directory</code> is non-<code>nil</code>, as it is by default. <var>default</var> is not checked for validity, regardless of the value of <var>require-match</var>. However, if <var>require-match</var> is non-<code>nil</code>, the initial minibuffer contents should be a valid file (or directory) name. Otherwise <code>read-file-name</code> attempts completion if the user exits without any editing, and does not return <var>default</var>. <var>default</var> is also available through the history commands. </p> <p>If <var>default</var> is <code>nil</code>, <code>read-file-name</code> tries to find a substitute default to use in its place, which it treats in exactly the same way as if it had been specified explicitly. If <var>default</var> is <code>nil</code>, but <var>initial</var> is non-<code>nil</code>, then the default is the absolute file name obtained from <var>directory</var> and <var>initial</var>. If both <var>default</var> and <var>initial</var> are <code>nil</code> and the buffer is visiting a file, <code>read-file-name</code> uses the absolute file name of that file as default. If the buffer is not visiting a file, then there is no default. In that case, if the user types <tt class="key">RET</tt> without any editing, <code>read-file-name</code> simply returns the pre-inserted contents of the minibuffer. </p> <p>If the user types <tt class="key">RET</tt> in an empty minibuffer, this function returns an empty string, regardless of the value of <var>require-match</var>. This is, for instance, how the user can make the current buffer visit no file using <kbd>M-x set-visited-file-name</kbd>. </p> <p>If <var>predicate</var> is non-<code>nil</code>, it specifies a function of one argument that decides which file names are acceptable completion alternatives. A file name is an acceptable value if <var>predicate</var> returns non-<code>nil</code> for it. </p> <p>Here is an example of using <code>read-file-name</code>: </p> <div class="example"> <pre class="example">(read-file-name "The file is ")

;; <span class="roman">After evaluation of the preceding expression,</span>
;;   <span class="roman">the following appears in the minibuffer:</span>
</pre>

<pre class="example">---------- Buffer: Minibuffer ----------
The file is /gp/gnu/elisp/∗
---------- Buffer: Minibuffer ----------
</pre>
</div> <p>Typing <kbd>manual <span class="key">TAB</span></kbd> results in the following: </p> <div class="example"> <pre class="example">---------- Buffer: Minibuffer ----------
The file is /gp/gnu/elisp/manual.texi∗
---------- Buffer: Minibuffer ----------
</pre>
</div> <p>If the user types <tt class="key">RET</tt>, <code>read-file-name</code> returns the file name as the string <code>"/gp/gnu/elisp/manual.texi"</code>. </p>
</dd>
</dl> <dl> <dt id="read-file-name-function">
Variable: <strong>read-file-name-function</strong>
</dt> <dd><p>If non-<code>nil</code>, this should be a function that accepts the same arguments as <code>read-file-name</code>. When <code>read-file-name</code> is called, it calls this function with the supplied arguments instead of doing its usual work. </p></dd>
</dl> <dl> <dt id="read-file-name-completion-ignore-case">
User Option: <strong>read-file-name-completion-ignore-case</strong>
</dt> <dd><p>If this variable is non-<code>nil</code>, <code>read-file-name</code> ignores case when performing completion. </p></dd>
</dl> <dl> <dt id="read-directory-name">
Function: <strong>read-directory-name</strong> <em>prompt &amp;optional directory default require-match initial</em>
</dt> <dd>
<p>This function is like <code>read-file-name</code> but allows only directory names as completion alternatives. </p> <p>If <var>default</var> is <code>nil</code> and <var>initial</var> is non-<code>nil</code>, <code>read-directory-name</code> constructs a substitute default by combining <var>directory</var> (or the current buffer’s default directory if <var>directory</var> is <code>nil</code>) and <var>initial</var>. If both <var>default</var> and <var>initial</var> are <code>nil</code>, this function uses <var>directory</var> as substitute default, or the current buffer’s default directory if <var>directory</var> is <code>nil</code>. </p>
</dd>
</dl> <dl> <dt id="insert-default-directory">
User Option: <strong>insert-default-directory</strong>
</dt> <dd>
<p>This variable is used by <code>read-file-name</code>, and thus, indirectly, by most commands reading file names. (This includes all commands that use the code letters ‘<samp>f</samp>’ or ‘<samp>F</samp>’ in their interactive form. See <a href="interactive-codes#Interactive-Codes">Code Characters for interactive</a>.) Its value controls whether <code>read-file-name</code> starts by placing the name of the default directory in the minibuffer, plus the initial file name, if any. If the value of this variable is <code>nil</code>, then <code>read-file-name</code> does not place any initial input in the minibuffer (unless you specify initial input with the <var>initial</var> argument). In that case, the default directory is still used for completion of relative file names, but is not displayed. </p> <p>If this variable is <code>nil</code> and the initial minibuffer contents are empty, the user may have to explicitly fetch the next history element to access a default value. If the variable is non-<code>nil</code>, the initial minibuffer contents are always non-empty and the user can always request a default value by immediately typing <tt class="key">RET</tt> in an unedited minibuffer. (See above.) </p> <p>For example: </p> <div class="example"> <pre class="example">;; <span class="roman">Here the minibuffer starts out with the default directory.</span>
(let ((insert-default-directory t))
  (read-file-name "The file is "))
</pre>

<pre class="example">---------- Buffer: Minibuffer ----------
The file is ~lewis/manual/∗
---------- Buffer: Minibuffer ----------
</pre>

<pre class="example">;; <span class="roman">Here the minibuffer is empty and only the prompt</span>
;;   <span class="roman">appears on its line.</span>
(let ((insert-default-directory nil))
  (read-file-name "The file is "))
</pre>

<pre class="example">---------- Buffer: Minibuffer ----------
The file is ∗
---------- Buffer: Minibuffer ----------
</pre>
</div> </dd>
</dl> <dl> <dt id="read-shell-command">
Function: <strong>read-shell-command</strong> <em>prompt &amp;optional initial history &amp;rest args</em>
</dt> <dd>
<p>This function reads a shell command from the minibuffer, prompting with <var>prompt</var> and providing intelligent completion. It completes the first word of the command using candidates that are appropriate for command names, and the rest of the command words as file names. </p> <p>This function uses <code>minibuffer-local-shell-command-map</code> as the keymap for minibuffer input. The <var>history</var> argument specifies the history list to use; if is omitted or <code>nil</code>, it defaults to <code>shell-command-history</code> (see <a href="minibuffer-history#Minibuffer-History">shell-command-history</a>). The optional argument <var>initial</var> specifies the initial content of the minibuffer (see <a href="initial-input#Initial-Input">Initial Input</a>). The rest of <var>args</var>, if present, are used as the <var>default</var> and <var>inherit-input-method</var> arguments in <code>read-from-minibuffer</code> (see <a href="text-from-minibuffer#Text-from-Minibuffer">Text from Minibuffer</a>). </p>
</dd>
</dl> <dl> <dt id="minibuffer-local-shell-command-map">
Variable: <strong>minibuffer-local-shell-command-map</strong>
</dt> <dd><p>This keymap is used by <code>read-shell-command</code> for completing command and file names that are part of a shell command. It uses <code>minibuffer-local-map</code> as its parent keymap, and binds <tt class="key">TAB</tt> to <code>completion-at-point</code>. </p></dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright © 1990-1996, 1998-2019 Free Software Foundation, Inc. <br>Licensed under the GNU GPL license.<br>
    <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Reading-File-Names.html" class="_attribution-link">https://www.gnu.org/software/emacs/manual/html_node/elisp/Reading-File-Names.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
