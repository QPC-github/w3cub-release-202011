
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Connecting to Your Database - CodeIgniter 4 - W3cubDocs</title>
  
  <meta name="description" content="You can connect to your database by adding this line of code in any function where it is needed, or in your class constructor to make the database &hellip;">
  <meta name="keywords" content="connecting, your, database, codeigniter, codeigniter~4">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/codeigniter~4/database/connecting.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/codeigniter~4.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/codeigniter~4/" class="_nav-link" title="" style="margin-left:0;">CodeIgniter 4</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<div itemprop="articleBody">  <h1 id="connecting-to-your-database">Connecting to your Database</h1> <p>You can connect to your database by adding this line of code in any function where it is needed, or in your class constructor to make the database available globally in that class.</p> <pre data-language="html">$db = \Config\Database::connect();
</pre> <p>If the above function does <strong>not</strong> contain any information in the first parameter it will connect to the default group specified in your database config file. For most people, this is the preferred method of use.</p> <p>A convenience method exists that is purely a wrapper around the above line and is provided for your convenience:</p> <pre data-language="html">$db = db_connect();
</pre>  <h2 id="available-parameters">Available Parameters</h2> <ol class="arabic simple"> <li>The database group name, a string that must match the config class’ property name. Default value is $config-&gt;defaultGroup.</li> <li>TRUE/FALSE (boolean). Whether to return the shared connection (see Connecting to Multiple Databases below).</li> </ol>   <h2 id="manually-connecting-to-a-database">Manually Connecting to a Database</h2> <p>The first parameter of this function can <strong>optionally</strong> be used to specify a particular database group from your config file. Examples:</p> <p>To choose a specific group from your config file you can do this:</p> <pre data-language="html">$db = \Config\Database::connect('group_name');
</pre> <p>Where group_name is the name of the connection group from your config file.</p>   <h2 id="multiple-connections-to-same-database">Multiple Connections to Same Database</h2> <p>By default, the <code>connect()</code> method will return the same instance of the database connection every time. If you need to have a separate connection to the same database, send <code>false</code> as the second parameter:</p> <pre data-language="html">$db = \Config\Database::connect('group_name', false);
</pre>  <h3 id="connecting-to-multiple-databases">Connecting to Multiple Databases</h3> <p>If you need to connect to more than one database simultaneously you can do so as follows:</p> <pre data-language="html">$db1 = \Config\Database::connect('group_one');
$db  = \Config\Database::connect('group_two');
</pre> <p>Note: Change the words “group_one” and “group_two” to the specific group names you are connecting to.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>You don’t need to create separate database configurations if you only need to use a different database on the same connection. You can switch to a different database when you need to, like this:</p>  </div>   <h3 id="connecting-with-custom-settings">Connecting with Custom Settings</h3> <p>You can pass in an array of database settings instead of a group name to get a connection that uses your custom settings. The array passed in must be the same format as the groups are defined in the configuration file:</p> <pre data-language="html">$custom = [
            'DSN'      =&gt; '',
            'hostname' =&gt; 'localhost',
            'username' =&gt; '',
            'password' =&gt; '',
            'database' =&gt; '',
            'DBDriver' =&gt; 'MySQLi',
            'DBPrefix' =&gt; '',
            'pConnect' =&gt; false,
            'DBDebug'  =&gt; (ENVIRONMENT !== 'production'),
            'cacheOn'  =&gt; false,
            'cacheDir' =&gt; '',
            'charset'  =&gt; 'utf8',
            'DBCollat' =&gt; 'utf8_general_ci',
            'swapPre'  =&gt; '',
            'encrypt'  =&gt; false,
            'compress' =&gt; false,
            'strictOn' =&gt; false,
            'failover' =&gt; [],
            'port'     =&gt; 3306,
    ];
$db = \Config\Database::connect($custom);
</pre>   <h3 id="reconnecting-keeping-the-connection-alive">Reconnecting / Keeping the Connection Alive</h3> <p>If the database server’s idle timeout is exceeded while you’re doing some heavy PHP lifting (processing an image, for instance), you should consider pinging the server by using the reconnect() method before sending further queries, which can gracefully keep the connection alive or re-establish it.</p> <div class="admonition important"> <p class="first admonition-title">Important</p> <p class="last">If you are using MySQLi database driver, the reconnect() method does not ping the server but it closes the connection then connects again.</p> </div> <pre data-language="html">$db-&gt;reconnect();
</pre>   <h3 id="manually-closing-the-connection">Manually closing the Connection</h3> <p>While CodeIgniter intelligently takes care of closing your database connections, you can explicitly close the connection.</p> <pre data-language="html">$db-&gt;close();
</pre>    </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2014–2020 British Columbia Institute of Technology<br>Licensed under the MIT License.<br>
    <a href="https://codeigniter.com/userguide4/database/connecting.html" class="_attribution-link">https://codeigniter.com/userguide4/database/connecting.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
