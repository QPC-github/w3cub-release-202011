
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Npm-prune - Npm - W3cubDocs</title>
  
  <meta name="description" content="This command removes &#34;extraneous&#34; packages. If a package name is provided, then only packages matching one of the supplied names are removed &hellip;">
  <meta name="keywords" content="npm-prune, npm">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/npm/cli/v8/commands/npm-prune.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/npm.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/npm/" class="_nav-link" title="" style="margin-left:0;">npm</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _npm">
				
				
<h1 class="Heading-sc-1m35ws5-0 iZclfL">npm-prune</h1>
<div id="___gatsby">
<div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="BaseStyles-sc-8q0tj8-0 fDevHB"><div display="flex" class="Box-sc-1b6inku-0 Flex-jlpa5r-0 fHJZpJ"><div display="flex" class="Box-sc-1b6inku-0 Flex-jlpa5r-0 layout___StyledFlex-sc-1xkoyzi-0 iqdyRg"><div id="skip-nav" display="grid" class="Box-sc-1b6inku-0 Grid-nhubvi-0 layout___StyledGrid-sc-1xkoyzi-1 iAgMbs">
<div class="Box-sc-1b6inku-0 layout___StyledBox-sc-1xkoyzi-2 bWYaaq">
<div class="Box-sc-1b6inku-0 BorderBox-sc-1y9cbfx-0 ebbWWE"><div class="Box-sc-1b6inku-0 jVPEnE"><div class="Box-sc-1b6inku-0 jVPEnE">Remove extraneous packages</div></div></div>

</div>
<div class="Box-sc-1b6inku-0 layout___StyledBox3-sc-1xkoyzi-5 dPTlHs">

<h3 id="synopsis" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH3-ceok90-3 ZvtHx Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
Synopsis</h3>
<div class="Box-sc-1b6inku-0 Position-gj4o9g-0 dIAadT">

<pre class="Box-sc-1b6inku-0 BorderBox-sc-1y9cbfx-0 jRndWL prism-code language-bash" data-language="javascript">npm prune [[&lt;@scope&gt;/]&lt;pkg&gt;...] [--production] [--dry-run] [--json]</pre>
</div>
<h3 id="description" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH3-ceok90-3 ZvtHx Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
Description</h3>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">This command removes "extraneous" packages. If a package name is provided, then only packages matching one of the supplied names are removed.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Extraneous packages are those present in the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">node_modules</code> folder that are not listed as any package's dependency list.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">If the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">--production</code> flag is specified or the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">NODE_ENV</code> environment variable is set to <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">production</code>, this command will remove the packages specified in your <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">devDependencies</code>. Setting <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">--no-production</code> will negate <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">NODE_ENV</code> being set to <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">production</code>.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">If the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">--dry-run</code> flag is used then no changes will actually be made.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">If the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">--json</code> flag is used, then the changes <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">npm prune</code> made (or would have made with <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">--dry-run</code>) are printed as a JSON object.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">In normal operation, extraneous modules are pruned automatically, so you'll only need this command with the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">--production</code> flag. However, in the real world, operation is not always "normal". When crashes or mistakes happen, this command can help clean up any resulting garbage.</p>
<h3 id="configuration" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH3-ceok90-3 ZvtHx Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
Configuration</h3>
<h4 id="omit" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH4-ceok90-4 kXfvHH Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
<code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">omit</code>
</h4>
<ul class="list__List-sc-12i9x9y-0 hmihVt">
<li>Default: 'dev' if the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">NODE_ENV</code> environment variable is set to 'production', otherwise empty.</li>
<li>Type: "dev", "optional", or "peer" (can be set multiple times)</li>
</ul>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Dependency types to omit from the installation tree on disk.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Note that these dependencies <em>are</em> still resolved and added to the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">package-lock.json</code> or <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">npm-shrinkwrap.json</code> file. They are just not physically installed on disk.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">If a package type appears in both the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">--include</code> and <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">--omit</code> lists, then it will be included.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">If the resulting omit list includes <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">'dev'</code>, then the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">NODE_ENV</code> environment variable will be set to <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">'production'</code> for all lifecycle scripts.</p>
<h4 id="dry-run" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH4-ceok90-4 kXfvHH Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
<code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">dry-run</code>
</h4>
<ul class="list__List-sc-12i9x9y-0 hmihVt">
<li>Default: false</li>
<li>Type: Boolean</li>
</ul>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Indicates that you don't want npm to make any changes and that it should only report what it would have done. This can be passed into any of the commands that modify your local installation, eg, <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">install</code>, <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">update</code>, <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">dedupe</code>, <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">uninstall</code>, as well as <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">pack</code> and <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">publish</code>.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Note: This is NOT honored by other network related commands, eg <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">dist-tags</code>, <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">owner</code>, etc.</p>
<h4 id="json" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH4-ceok90-4 kXfvHH Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
<code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">json</code>
</h4>
<ul class="list__List-sc-12i9x9y-0 hmihVt">
<li>Default: false</li>
<li>Type: Boolean</li>
</ul>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Whether or not to output JSON data, rather than the normal output.</p>
<ul class="list__List-sc-12i9x9y-0 hmihVt"><li>In <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">npm pkg set</code> it enables parsing set values with JSON.parse() before saving them to your <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">package.json</code>.</li></ul>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Not supported by all npm commands.</p>
<h4 id="workspace" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH4-ceok90-4 kXfvHH Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
<code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">workspace</code>
</h4>
<ul class="list__List-sc-12i9x9y-0 hmihVt">
<li>Default:</li>
<li>Type: String (can be set multiple times)</li>
</ul>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Enable running a command in the context of the configured workspaces of the current project while filtering by running only the workspaces defined by this configuration option.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Valid values for the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">workspace</code> config are either:</p>
<ul class="list__List-sc-12i9x9y-0 hmihVt">
<li>Workspace names</li>
<li>Path to a workspace directory</li>
<li>Path to a parent workspace directory (will result in selecting all workspaces within that folder)</li>
</ul>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">When set for the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">npm init</code> command, this may be set to the folder of a workspace which does not yet exist, to create the folder and set it up as a brand new workspace within the project.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">This value is not exported to the environment for child processes.</p>
<h4 id="workspaces" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH4-ceok90-4 kXfvHH Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
<code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">workspaces</code>
</h4>
<ul class="list__List-sc-12i9x9y-0 hmihVt">
<li>Default: null</li>
<li>Type: null or Boolean</li>
</ul>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Set to true to run the command in the context of <strong>all</strong> configured workspaces.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Explicitly setting this to false will cause commands like <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">install</code> to ignore workspaces altogether. When not set explicitly:</p>
<ul class="list__List-sc-12i9x9y-0 hmihVt"><li>Commands that operate on the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">node_modules</code> tree (install, update, etc.) will link workspaces into the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">node_modules</code> folder. - Commands that do other things (test, exec, publish, etc.) will operate on the root project, <em>unless</em> one or more workspaces are specified in the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">workspace</code> config.</li></ul>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">This value is not exported to the environment for child processes.</p>
<h4 id="include-workspace-root" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH4-ceok90-4 kXfvHH Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
<code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">include-workspace-root</code>
</h4>
<ul class="list__List-sc-12i9x9y-0 hmihVt">
<li>Default: false</li>
<li>Type: Boolean</li>
</ul>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">Include the workspace root when workspaces are enabled for a command.</p>
<p class="paragraph__Paragraph-sc-10e3u8p-0 hNfxuH">When false, specifying individual workspaces via the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">workspace</code> config, or all workspaces via the <code class="inline-code__InlineCode-sc-6w7ni7-0 cfZKRM">workspaces</code> flag, will cause npm to operate only on the specified workspaces, and not on the root project.</p>
<h3 id="see-also" class="Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 heading__StyledH3-ceok90-3 ZvtHx Heading-sc-1m35ws5-0 heading__StyledHeading-ceok90-0 llhjUK">
See Also</h3>
<ul class="list__List-sc-12i9x9y-0 hmihVt">
<li><a href="npm-uninstall" color="blue.5" class="Link-kudw2l-0 fXZrkv">npm uninstall</a></li>
<li><a href="../configuring-npm/folders" color="blue.5" class="Link-kudw2l-0 fXZrkv">npm folders</a></li>
<li><a href="npm-ls" color="blue.5" class="Link-kudw2l-0 fXZrkv">npm ls</a></li>
</ul>
</div>
</div></div></div></div></div>

</div>
<div class="_attribution">
  <p class="_attribution-p">
    © npm, Inc. and Contributors<br>Licensed under the npm License.<br>npm is a trademark of npm, Inc.<br>
    <a href="https://docs.npmjs.com/cli/v8/commands/npm-prune" class="_attribution-link">https://docs.npmjs.com/cli/v8/commands/npm-prune</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
